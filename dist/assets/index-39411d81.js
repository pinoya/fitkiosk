function g3e(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Am(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cD={exports:{}},Pv={},dD={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=Symbol.for("react.element"),dH=Symbol.for("react.portal"),hH=Symbol.for("react.fragment"),pH=Symbol.for("react.strict_mode"),fH=Symbol.for("react.profiler"),mH=Symbol.for("react.provider"),gH=Symbol.for("react.context"),bH=Symbol.for("react.forward_ref"),yH=Symbol.for("react.suspense"),vH=Symbol.for("react.memo"),xH=Symbol.for("react.lazy"),UE=Symbol.iterator;function wH(e){return e===null||typeof e!="object"?null:(e=UE&&e[UE]||e["@@iterator"],typeof e=="function"?e:null)}var hD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pD=Object.assign,fD={};function bh(e,t,n){this.props=e,this.context=t,this.refs=fD,this.updater=n||hD}bh.prototype.isReactComponent={};bh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mD(){}mD.prototype=bh.prototype;function _S(e,t,n){this.props=e,this.context=t,this.refs=fD,this.updater=n||hD}var AS=_S.prototype=new mD;AS.constructor=_S;pD(AS,bh.prototype);AS.isPureReactComponent=!0;var VE=Array.isArray,gD=Object.prototype.hasOwnProperty,RS={current:null},bD={key:!0,ref:!0,__self:!0,__source:!0};function yD(e,t,n){var r,a={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)gD.call(t,r)&&!bD.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Rm,type:e,key:i,ref:s,props:a,_owner:RS.current}}function kH(e,t){return{$$typeof:Rm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function DS(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rm}function SH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jE=/\/+/g;function sw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SH(""+e.key):t.toString(36)}function Gb(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Rm:case dH:s=!0}}if(s)return s=e,a=a(s),e=r===""?"."+sw(s,0):r,VE(a)?(n="",e!=null&&(n=e.replace(jE,"$&/")+"/"),Gb(a,t,n,"",function(c){return c})):a!=null&&(DS(a)&&(a=kH(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(jE,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=r===""?".":r+":",VE(e))for(var o=0;o<e.length;o++){i=e[o];var l=r+sw(i,o);s+=Gb(i,t,n,l,a)}else if(l=wH(e),typeof l=="function")for(e=l.call(e),o=0;!(i=e.next()).done;)i=i.value,l=r+sw(i,o++),s+=Gb(i,t,n,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function ab(e,t,n){if(e==null)return e;var r=[],a=0;return Gb(e,r,"","",function(i){return t.call(n,i,a++)}),r}function IH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ea={current:null},qb={transition:null},$H={ReactCurrentDispatcher:ea,ReactCurrentBatchConfig:qb,ReactCurrentOwner:RS};ct.Children={map:ab,forEach:function(e,t,n){ab(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ab(e,function(){t++}),t},toArray:function(e){return ab(e,function(t){return t})||[]},only:function(e){if(!DS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ct.Component=bh;ct.Fragment=hH;ct.Profiler=fH;ct.PureComponent=_S;ct.StrictMode=pH;ct.Suspense=yH;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$H;ct.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pD({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=RS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)gD.call(t,l)&&!bD.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Rm,type:e.type,key:a,ref:i,props:r,_owner:s}};ct.createContext=function(e){return e={$$typeof:gH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mH,_context:e},e.Consumer=e};ct.createElement=yD;ct.createFactory=function(e){var t=yD.bind(null,e);return t.type=e,t};ct.createRef=function(){return{current:null}};ct.forwardRef=function(e){return{$$typeof:bH,render:e}};ct.isValidElement=DS;ct.lazy=function(e){return{$$typeof:xH,_payload:{_status:-1,_result:e},_init:IH}};ct.memo=function(e,t){return{$$typeof:vH,type:e,compare:t===void 0?null:t}};ct.startTransition=function(e){var t=qb.transition;qb.transition={};try{e()}finally{qb.transition=t}};ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ct.useCallback=function(e,t){return ea.current.useCallback(e,t)};ct.useContext=function(e){return ea.current.useContext(e)};ct.useDebugValue=function(){};ct.useDeferredValue=function(e){return ea.current.useDeferredValue(e)};ct.useEffect=function(e,t){return ea.current.useEffect(e,t)};ct.useId=function(){return ea.current.useId()};ct.useImperativeHandle=function(e,t,n){return ea.current.useImperativeHandle(e,t,n)};ct.useInsertionEffect=function(e,t){return ea.current.useInsertionEffect(e,t)};ct.useLayoutEffect=function(e,t){return ea.current.useLayoutEffect(e,t)};ct.useMemo=function(e,t){return ea.current.useMemo(e,t)};ct.useReducer=function(e,t,n){return ea.current.useReducer(e,t,n)};ct.useRef=function(e){return ea.current.useRef(e)};ct.useState=function(e){return ea.current.useState(e)};ct.useSyncExternalStore=function(e,t,n){return ea.current.useSyncExternalStore(e,t,n)};ct.useTransition=function(){return ea.current.useTransition()};ct.version="18.2.0";dD.exports=ct;var oe=dD.exports;const le=Am(oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CH=oe,TH=Symbol.for("react.element"),EH=Symbol.for("react.fragment"),NH=Object.prototype.hasOwnProperty,_H=CH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AH={key:!0,ref:!0,__self:!0,__source:!0};function vD(e,t,n){var r,a={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)NH.call(t,r)&&!AH.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:TH,type:e,key:i,ref:s,props:a,_owner:_H.current}}Pv.Fragment=EH;Pv.jsx=vD;Pv.jsxs=vD;cD.exports=Pv;var _=cD.exports,xD={exports:{}},Ha={},wD={exports:{}},kD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,W){var L=O.length;O.push(W);e:for(;0<L;){var H=L-1>>>1,Z=O[H];if(0<a(Z,W))O[H]=W,O[L]=Z,L=H;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],L=O.pop();if(L!==W){O[0]=L;e:for(var H=0,Z=O.length,J=Z>>>1;H<J;){var ne=2*(H+1)-1,re=O[ne],pe=ne+1,de=O[pe];if(0>a(re,L))pe<Z&&0>a(de,re)?(O[H]=de,O[pe]=L,H=pe):(O[H]=re,O[ne]=L,H=ne);else if(pe<Z&&0>a(de,L))O[H]=de,O[pe]=L,H=pe;else break e}}return W}function a(O,W){var L=O.sortIndex-W.sortIndex;return L!==0?L:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,t(l,W);else break;W=n(c)}}function x(O){if(m=!1,v(O),!f)if(n(l)!==null)f=!0,j(w);else{var W=n(c);W!==null&&K(x,W.startTime-O)}}function w(O,W){f=!1,m&&(m=!1,b(T),T=-1),p=!0;var L=h;try{for(v(W),d=n(l);d!==null&&(!(d.expirationTime>W)||O&&!N());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var Z=H(d.expirationTime<=W);W=e.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&r(l),v(W)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var ne=n(c);ne!==null&&K(x,ne.startTime-W),J=!1}return J}finally{d=null,h=L,p=!1}}var $=!1,C=null,T=-1,A=5,D=-1;function N(){return!(e.unstable_now()-D<A)}function I(){if(C!==null){var O=e.unstable_now();D=O;var W=!0;try{W=C(!0,O)}finally{W?M():($=!1,C=null)}}else $=!1}var M;if(typeof y=="function")M=function(){y(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,z=P.port2;P.port1.onmessage=I,M=function(){z.postMessage(null)}}else M=function(){g(I,0)};function j(O){C=O,$||($=!0,M())}function K(O,W){T=g(function(){O(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,j(w))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var L=h;h=W;try{return O()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var L=h;h=O;try{return W()}finally{h=L}},e.unstable_scheduleCallback=function(O,W,L){var H=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=L+Z,O={id:u++,callback:W,priorityLevel:O,startTime:L,expirationTime:Z,sortIndex:-1},L>H?(O.sortIndex=L,t(c,O),n(l)===null&&O===n(c)&&(m?(b(T),T=-1):m=!0,K(x,L-H))):(O.sortIndex=Z,t(l,O),f||p||(f=!0,j(w))),O},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(O){var W=h;return function(){var L=h;h=W;try{return O.apply(this,arguments)}finally{h=L}}}})(kD);wD.exports=kD;var RH=wD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD=oe,Wa=RH;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ID=new Set,Vf={};function gu(e,t){Pd(e,t),Pd(e+"Capture",t)}function Pd(e,t){for(Vf[e]=t,e=0;e<t.length;e++)ID.add(t[e])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f1=Object.prototype.hasOwnProperty,DH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HE={},GE={};function FH(e){return f1.call(GE,e)?!0:f1.call(HE,e)?!1:DH.test(e)?GE[e]=!0:(HE[e]=!0,!1)}function MH(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OH(e,t,n,r){if(t===null||typeof t>"u"||MH(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ta(e,t,n,r,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yr[e]=new ta(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yr[t]=new ta(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yr[e]=new ta(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yr[e]=new ta(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yr[e]=new ta(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yr[e]=new ta(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yr[e]=new ta(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yr[e]=new ta(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yr[e]=new ta(e,5,!1,e.toLowerCase(),null,!1,!1)});var FS=/[\-:]([a-z])/g;function MS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(FS,MS);yr[t]=new ta(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(FS,MS);yr[t]=new ta(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(FS,MS);yr[t]=new ta(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yr[e]=new ta(e,1,!1,e.toLowerCase(),null,!1,!1)});yr.xlinkHref=new ta("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yr[e]=new ta(e,1,!1,e.toLowerCase(),null,!0,!0)});function OS(e,t,n,r){var a=yr.hasOwnProperty(t)?yr[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OH(t,n,a,r)&&(n=null),r||a===null?FH(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var js=SD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ib=Symbol.for("react.element"),dd=Symbol.for("react.portal"),hd=Symbol.for("react.fragment"),PS=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),$D=Symbol.for("react.provider"),CD=Symbol.for("react.context"),LS=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),b1=Symbol.for("react.suspense_list"),zS=Symbol.for("react.memo"),ao=Symbol.for("react.lazy"),TD=Symbol.for("react.offscreen"),qE=Symbol.iterator;function Yp(e){return e===null||typeof e!="object"?null:(e=qE&&e[qE]||e["@@iterator"],typeof e=="function"?e:null)}var pn=Object.assign,ow;function df(e){if(ow===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ow=t&&t[1]||""}return"\n"+ow+e}var lw=!1;function uw(e,t){if(!e||lw)return"";lw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{lw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?df(e):""}function PH(e){switch(e.tag){case 5:return df(e.type);case 16:return df("Lazy");case 13:return df("Suspense");case 19:return df("SuspenseList");case 0:case 2:case 15:return e=uw(e.type,!1),e;case 11:return e=uw(e.type.render,!1),e;case 1:return e=uw(e.type,!0),e;default:return""}}function y1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hd:return"Fragment";case dd:return"Portal";case m1:return"Profiler";case PS:return"StrictMode";case g1:return"Suspense";case b1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CD:return(e.displayName||"Context")+".Consumer";case $D:return(e._context.displayName||"Context")+".Provider";case LS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zS:return t=e.displayName||null,t!==null?t:y1(e.type)||"Memo";case ao:t=e._payload,e=e._init;try{return y1(e(t))}catch(n){}}return null}function LH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return y1(t);case 8:return t===PS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _o(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ED(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zH(e){var t=ED(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sb(e){e._valueTracker||(e._valueTracker=zH(e))}function ND(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ED(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function my(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function v1(e,t){var n=t.checked;return pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function KE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_o(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _D(e,t){t=t.checked,t!=null&&OS(e,"checked",t,!1)}function x1(e,t){_D(e,t);var n=_o(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w1(e,t.type,n):t.hasOwnProperty("defaultValue")&&w1(e,t.type,_o(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function XE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function w1(e,t,n){(t!=="number"||my(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var hf=Array.isArray;function Id(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_o(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function k1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function YE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(fe(92));if(hf(n)){if(1<n.length)throw Error(fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_o(n)}}function AD(e,t){var n=_o(t.value),r=_o(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function JE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function RD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?RD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ob,DD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ob=ob||document.createElement("div"),ob.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ob.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BH=["Webkit","ms","Moz","O"];Object.keys(Cf).forEach(function(e){BH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cf[t]=Cf[e]})});function FD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Cf.hasOwnProperty(e)&&Cf[e]?(""+t).trim():t+"px"}function MD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=FD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var WH=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I1(e,t){if(t){if(WH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function $1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C1=null;function BS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var T1=null,$d=null,Cd=null;function ZE(e){if(e=Mm(e)){if(typeof T1!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=Uv(t),T1(e.stateNode,e.type,t))}}function OD(e){$d?Cd?Cd.push(e):Cd=[e]:$d=e}function PD(){if($d){var e=$d,t=Cd;if(Cd=$d=null,ZE(e),t)for(e=0;e<t.length;e++)ZE(t[e])}}function LD(e,t){return e(t)}function zD(){}var cw=!1;function BD(e,t,n){if(cw)return e(t,n);cw=!0;try{return LD(e,t,n)}finally{cw=!1,($d!==null||Cd!==null)&&(zD(),PD())}}function Hf(e,t){var n=e.stateNode;if(n===null)return null;var r=Uv(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(fe(231,t,typeof n));return n}var E1=!1;if(Ps)try{var Jp={};Object.defineProperty(Jp,"passive",{get:function(){E1=!0}}),window.addEventListener("test",Jp,Jp),window.removeEventListener("test",Jp,Jp)}catch(e){E1=!1}function UH(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Tf=!1,gy=null,by=!1,N1=null,VH={onError:function(e){Tf=!0,gy=e}};function jH(e,t,n,r,a,i,s,o,l){Tf=!1,gy=null,UH.apply(VH,arguments)}function HH(e,t,n,r,a,i,s,o,l){if(jH.apply(this,arguments),Tf){if(Tf){var c=gy;Tf=!1,gy=null}else throw Error(fe(198));by||(by=!0,N1=c)}}function bu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function WD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function QE(e){if(bu(e)!==e)throw Error(fe(188))}function GH(e){var t=e.alternate;if(!t){if(t=bu(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return QE(a),e;if(i===r)return QE(a),t;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?e:t}function UD(e){return e=GH(e),e!==null?VD(e):null}function VD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VD(e);if(t!==null)return t;e=e.sibling}return null}var jD=Wa.unstable_scheduleCallback,eN=Wa.unstable_cancelCallback,qH=Wa.unstable_shouldYield,KH=Wa.unstable_requestPaint,Sn=Wa.unstable_now,XH=Wa.unstable_getCurrentPriorityLevel,WS=Wa.unstable_ImmediatePriority,HD=Wa.unstable_UserBlockingPriority,yy=Wa.unstable_NormalPriority,YH=Wa.unstable_LowPriority,GD=Wa.unstable_IdlePriority,Lv=null,ss=null;function JH(e){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(Lv,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Ni=Math.clz32?Math.clz32:e6,ZH=Math.log,QH=Math.LN2;function e6(e){return e>>>=0,e===0?32:31-(ZH(e)/QH|0)|0}var lb=64,ub=4194304;function pf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vy(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~a;o!==0?r=pf(o):(i&=s,i!==0&&(r=pf(i)))}else s=n&~a,s!==0?r=pf(s):i!==0&&(r=pf(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ni(t),a=1<<n,r|=e[n],t&=~a;return r}function t6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n6(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Ni(i),o=1<<s,l=a[s];l===-1?(!(o&n)||o&r)&&(a[s]=t6(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}function _1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qD(){var e=lb;return lb<<=1,!(lb&4194240)&&(lb=64),e}function dw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Dm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ni(t),e[t]=n}function r6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ni(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function US(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ni(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Nt=0;function KD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var XD,VS,YD,JD,ZD,A1=!1,cb=[],yo=null,vo=null,xo=null,Gf=new Map,qf=new Map,oo=[],a6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tN(e,t){switch(e){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":vo=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Gf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qf.delete(t.pointerId)}}function Zp(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Mm(t),t!==null&&VS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function i6(e,t,n,r,a){switch(t){case"focusin":return yo=Zp(yo,e,t,n,r,a),!0;case"dragenter":return vo=Zp(vo,e,t,n,r,a),!0;case"mouseover":return xo=Zp(xo,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Gf.set(i,Zp(Gf.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,qf.set(i,Zp(qf.get(i)||null,e,t,n,r,a)),!0}return!1}function QD(e){var t=El(e.target);if(t!==null){var n=bu(t);if(n!==null){if(t=n.tag,t===13){if(t=WD(n),t!==null){e.blockedOn=t,ZD(e.priority,function(){YD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=R1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);C1=r,n.target.dispatchEvent(r),C1=null}else return t=Mm(n),t!==null&&VS(t),e.blockedOn=n,!1;t.shift()}return!0}function nN(e,t,n){Kb(e)&&n.delete(t)}function s6(){A1=!1,yo!==null&&Kb(yo)&&(yo=null),vo!==null&&Kb(vo)&&(vo=null),xo!==null&&Kb(xo)&&(xo=null),Gf.forEach(nN),qf.forEach(nN)}function Qp(e,t){e.blockedOn===t&&(e.blockedOn=null,A1||(A1=!0,Wa.unstable_scheduleCallback(Wa.unstable_NormalPriority,s6)))}function Kf(e){function t(a){return Qp(a,e)}if(0<cb.length){Qp(cb[0],e);for(var n=1;n<cb.length;n++){var r=cb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yo!==null&&Qp(yo,e),vo!==null&&Qp(vo,e),xo!==null&&Qp(xo,e),Gf.forEach(t),qf.forEach(t),n=0;n<oo.length;n++)r=oo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<oo.length&&(n=oo[0],n.blockedOn===null);)QD(n),n.blockedOn===null&&oo.shift()}var Td=js.ReactCurrentBatchConfig,xy=!0;function o6(e,t,n,r){var a=Nt,i=Td.transition;Td.transition=null;try{Nt=1,jS(e,t,n,r)}finally{Nt=a,Td.transition=i}}function l6(e,t,n,r){var a=Nt,i=Td.transition;Td.transition=null;try{Nt=4,jS(e,t,n,r)}finally{Nt=a,Td.transition=i}}function jS(e,t,n,r){if(xy){var a=R1(e,t,n,r);if(a===null)ww(e,t,r,wy,n),tN(e,r);else if(i6(a,e,t,n,r))r.stopPropagation();else if(tN(e,r),t&4&&-1<a6.indexOf(e)){for(;a!==null;){var i=Mm(a);if(i!==null&&XD(i),i=R1(e,t,n,r),i===null&&ww(e,t,r,wy,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else ww(e,t,r,null,n)}}var wy=null;function R1(e,t,n,r){if(wy=null,e=BS(r),e=El(e),e!==null)if(t=bu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=WD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wy=e,null}function eF(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XH()){case WS:return 1;case HD:return 4;case yy:case YH:return 16;case GD:return 536870912;default:return 16}default:return 16}}var co=null,HS=null,Xb=null;function tF(){if(Xb)return Xb;var e,t=HS,n=t.length,r,a="value"in co?co.value:co.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===a[i-r];r++);return Xb=a.slice(e,1<r?1-r:void 0)}function Yb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function db(){return!0}function rN(){return!1}function Ga(e){function t(n,r,a,i,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?db:rN,this.isPropagationStopped=rN,this}return pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=db)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=db)},persist:function(){},isPersistent:db}),t}var yh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GS=Ga(yh),Fm=pn({},yh,{view:0,detail:0}),u6=Ga(Fm),hw,pw,ef,zv=pn({},Fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ef&&(ef&&e.type==="mousemove"?(hw=e.screenX-ef.screenX,pw=e.screenY-ef.screenY):pw=hw=0,ef=e),hw)},movementY:function(e){return"movementY"in e?e.movementY:pw}}),aN=Ga(zv),c6=pn({},zv,{dataTransfer:0}),d6=Ga(c6),h6=pn({},Fm,{relatedTarget:0}),fw=Ga(h6),p6=pn({},yh,{animationName:0,elapsedTime:0,pseudoElement:0}),f6=Ga(p6),m6=pn({},yh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),g6=Ga(m6),b6=pn({},yh,{data:0}),iN=Ga(b6),y6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=x6[e])?!!t[e]:!1}function qS(){return w6}var k6=pn({},Fm,{key:function(e){if(e.key){var t=y6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?v6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qS,charCode:function(e){return e.type==="keypress"?Yb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),S6=Ga(k6),I6=pn({},zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sN=Ga(I6),$6=pn({},Fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qS}),C6=Ga($6),T6=pn({},yh,{propertyName:0,elapsedTime:0,pseudoElement:0}),E6=Ga(T6),N6=pn({},zv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_6=Ga(N6),A6=[9,13,27,32],KS=Ps&&"CompositionEvent"in window,Ef=null;Ps&&"documentMode"in document&&(Ef=document.documentMode);var R6=Ps&&"TextEvent"in window&&!Ef,nF=Ps&&(!KS||Ef&&8<Ef&&11>=Ef),oN=String.fromCharCode(32),lN=!1;function rF(e,t){switch(e){case"keyup":return A6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pd=!1;function D6(e,t){switch(e){case"compositionend":return aF(t);case"keypress":return t.which!==32?null:(lN=!0,oN);case"textInput":return e=t.data,e===oN&&lN?null:e;default:return null}}function F6(e,t){if(pd)return e==="compositionend"||!KS&&rF(e,t)?(e=tF(),Xb=HS=co=null,pd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nF&&t.locale!=="ko"?null:t.data;default:return null}}var M6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!M6[e.type]:t==="textarea"}function iF(e,t,n,r){OD(r),t=ky(t,"onChange"),0<t.length&&(n=new GS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nf=null,Xf=null;function O6(e){gF(e,0)}function Bv(e){var t=gd(e);if(ND(t))return e}function P6(e,t){if(e==="change")return t}var sF=!1;if(Ps){var mw;if(Ps){var gw="oninput"in document;if(!gw){var cN=document.createElement("div");cN.setAttribute("oninput","return;"),gw=typeof cN.oninput=="function"}mw=gw}else mw=!1;sF=mw&&(!document.documentMode||9<document.documentMode)}function dN(){Nf&&(Nf.detachEvent("onpropertychange",oF),Xf=Nf=null)}function oF(e){if(e.propertyName==="value"&&Bv(Xf)){var t=[];iF(t,Xf,e,BS(e)),BD(O6,t)}}function L6(e,t,n){e==="focusin"?(dN(),Nf=t,Xf=n,Nf.attachEvent("onpropertychange",oF)):e==="focusout"&&dN()}function z6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bv(Xf)}function B6(e,t){if(e==="click")return Bv(t)}function W6(e,t){if(e==="input"||e==="change")return Bv(t)}function U6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pi=typeof Object.is=="function"?Object.is:U6;function Yf(e,t){if(Pi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f1.call(t,a)||!Pi(e[a],t[a]))return!1}return!0}function hN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pN(e,t){var n=hN(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hN(n)}}function lF(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lF(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uF(){for(var e=window,t=my();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=my(e.document)}return t}function XS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function V6(e){var t=uF(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lF(n.ownerDocument.documentElement,n)){if(r!==null&&XS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=pN(n,i);var s=pN(n,r);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var j6=Ps&&"documentMode"in document&&11>=document.documentMode,fd=null,D1=null,_f=null,F1=!1;function fN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;F1||fd==null||fd!==my(r)||(r=fd,"selectionStart"in r&&XS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_f&&Yf(_f,r)||(_f=r,r=ky(D1,"onSelect"),0<r.length&&(t=new GS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fd)))}function hb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var md={animationend:hb("Animation","AnimationEnd"),animationiteration:hb("Animation","AnimationIteration"),animationstart:hb("Animation","AnimationStart"),transitionend:hb("Transition","TransitionEnd")},bw={},cF={};Ps&&(cF=document.createElement("div").style,"AnimationEvent"in window||(delete md.animationend.animation,delete md.animationiteration.animation,delete md.animationstart.animation),"TransitionEvent"in window||delete md.transitionend.transition);function Wv(e){if(bw[e])return bw[e];if(!md[e])return e;var t=md[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cF)return bw[e]=t[n];return e}var dF=Wv("animationend"),hF=Wv("animationiteration"),pF=Wv("animationstart"),fF=Wv("transitionend"),mF=new Map,mN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(e,t){mF.set(e,t),gu(t,[e])}for(var yw=0;yw<mN.length;yw++){var vw=mN[yw],H6=vw.toLowerCase(),G6=vw[0].toUpperCase()+vw.slice(1);Go(H6,"on"+G6)}Go(dF,"onAnimationEnd");Go(hF,"onAnimationIteration");Go(pF,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(fF,"onTransitionEnd");Pd("onMouseEnter",["mouseout","mouseover"]);Pd("onMouseLeave",["mouseout","mouseover"]);Pd("onPointerEnter",["pointerout","pointerover"]);Pd("onPointerLeave",["pointerout","pointerover"]);gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ff="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q6=new Set("cancel close invalid load scroll toggle".split(" ").concat(ff));function gN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,HH(r,t,void 0,e),e.currentTarget=null}function gF(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;gN(a,o,c),i=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;gN(a,o,c),i=l}}}if(by)throw e=N1,by=!1,N1=null,e}function Jt(e,t){var n=t[z1];n===void 0&&(n=t[z1]=new Set);var r=e+"__bubble";n.has(r)||(bF(t,e,2,!1),n.add(r))}function xw(e,t,n){var r=0;t&&(r|=4),bF(n,e,r,t)}var pb="_reactListening"+Math.random().toString(36).slice(2);function Jf(e){if(!e[pb]){e[pb]=!0,ID.forEach(function(n){n!=="selectionchange"&&(q6.has(n)||xw(n,!1,e),xw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pb]||(t[pb]=!0,xw("selectionchange",!1,t))}}function bF(e,t,n,r){switch(eF(t)){case 1:var a=o6;break;case 4:a=l6;break;default:a=jS}n=a.bind(null,t,n,e),a=void 0,!E1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ww(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;s=s.return}for(;o!==null;){if(s=El(o),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}o=o.parentNode}}r=r.return}BD(function(){var c=i,u=BS(n),d=[];e:{var h=mF.get(e);if(h!==void 0){var p=GS,f=e;switch(e){case"keypress":if(Yb(n)===0)break e;case"keydown":case"keyup":p=S6;break;case"focusin":f="focus",p=fw;break;case"focusout":f="blur",p=fw;break;case"beforeblur":case"afterblur":p=fw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=aN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=d6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=C6;break;case dF:case hF:case pF:p=f6;break;case fF:p=E6;break;case"scroll":p=u6;break;case"wheel":p=_6;break;case"copy":case"cut":case"paste":p=g6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sN}var m=(t&4)!==0,g=!m&&e==="scroll",b=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,b!==null&&(x=Hf(y,b),x!=null&&m.push(Zf(y,x,v)))),g)break;y=y.return}0<m.length&&(h=new p(h,f,null,n,u),d.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==C1&&(f=n.relatedTarget||n.fromElement)&&(El(f)||f[Ls]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(f=n.relatedTarget||n.toElement,p=c,f=f?El(f):null,f!==null&&(g=bu(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=c),p!==f)){if(m=aN,x="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=sN,x="onPointerLeave",b="onPointerEnter",y="pointer"),g=p==null?h:gd(p),v=f==null?h:gd(f),h=new m(x,y+"leave",p,n,u),h.target=g,h.relatedTarget=v,x=null,El(u)===c&&(m=new m(b,y+"enter",f,n,u),m.target=v,m.relatedTarget=g,x=m),g=x,p&&f)t:{for(m=p,b=f,y=0,v=m;v;v=Zc(v))y++;for(v=0,x=b;x;x=Zc(x))v++;for(;0<y-v;)m=Zc(m),y--;for(;0<v-y;)b=Zc(b),v--;for(;y--;){if(m===b||b!==null&&m===b.alternate)break t;m=Zc(m),b=Zc(b)}m=null}else m=null;p!==null&&bN(d,h,p,m,!1),f!==null&&g!==null&&bN(d,g,f,m,!0)}}e:{if(h=c?gd(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=P6;else if(uN(h))if(sF)w=W6;else{w=z6;var $=L6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=B6);if(w&&(w=w(e,c))){iF(d,w,n,u);break e}$&&$(e,h,c),e==="focusout"&&($=h._wrapperState)&&$.controlled&&h.type==="number"&&w1(h,"number",h.value)}switch($=c?gd(c):window,e){case"focusin":(uN($)||$.contentEditable==="true")&&(fd=$,D1=c,_f=null);break;case"focusout":_f=D1=fd=null;break;case"mousedown":F1=!0;break;case"contextmenu":case"mouseup":case"dragend":F1=!1,fN(d,n,u);break;case"selectionchange":if(j6)break;case"keydown":case"keyup":fN(d,n,u)}var C;if(KS)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else pd?rF(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nF&&n.locale!=="ko"&&(pd||T!=="onCompositionStart"?T==="onCompositionEnd"&&pd&&(C=tF()):(co=u,HS="value"in co?co.value:co.textContent,pd=!0)),$=ky(c,T),0<$.length&&(T=new iN(T,e,null,n,u),d.push({event:T,listeners:$}),C?T.data=C:(C=aF(n),C!==null&&(T.data=C)))),(C=R6?D6(e,n):F6(e,n))&&(c=ky(c,"onBeforeInput"),0<c.length&&(u=new iN("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}gF(d,t)})}function Zf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ky(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Hf(e,n),i!=null&&r.unshift(Zf(e,i,a)),i=Hf(e,t),i!=null&&r.push(Zf(e,i,a))),e=e.return}return r}function Zc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bN(e,t,n,r,a){for(var i=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,a?(l=Hf(n,i),l!=null&&s.unshift(Zf(n,l,o))):a||(l=Hf(n,i),l!=null&&s.push(Zf(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var K6=/\r\n?/g,X6=/\u0000|\uFFFD/g;function yN(e){return(typeof e=="string"?e:""+e).replace(K6,"\n").replace(X6,"")}function fb(e,t,n){if(t=yN(t),yN(e)!==t&&n)throw Error(fe(425))}function Sy(){}var M1=null,O1=null;function P1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var L1=typeof setTimeout=="function"?setTimeout:void 0,Y6=typeof clearTimeout=="function"?clearTimeout:void 0,vN=typeof Promise=="function"?Promise:void 0,J6=typeof queueMicrotask=="function"?queueMicrotask:typeof vN<"u"?function(e){return vN.resolve(null).then(e).catch(Z6)}:L1;function Z6(e){setTimeout(function(){throw e})}function kw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Kf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Kf(t)}function wo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var vh=Math.random().toString(36).slice(2),as="__reactFiber$"+vh,Qf="__reactProps$"+vh,Ls="__reactContainer$"+vh,z1="__reactEvents$"+vh,Q6="__reactListeners$"+vh,e5="__reactHandles$"+vh;function El(e){var t=e[as];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ls]||n[as]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xN(e);e!==null;){if(n=e[as])return n;e=xN(e)}return t}e=n,n=e.parentNode}return null}function Mm(e){return e=e[as]||e[Ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function Uv(e){return e[Qf]||null}var B1=[],bd=-1;function qo(e){return{current:e}}function Zt(e){0>bd||(e.current=B1[bd],B1[bd]=null,bd--)}function Kt(e,t){bd++,B1[bd]=e.current,e.current=t}var Ao={},_r=qo(Ao),pa=qo(!1),Wl=Ao;function Ld(e,t){var n=e.type.contextTypes;if(!n)return Ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function fa(e){return e=e.childContextTypes,e!=null}function Iy(){Zt(pa),Zt(_r)}function wN(e,t,n){if(_r.current!==Ao)throw Error(fe(168));Kt(_r,t),Kt(pa,n)}function yF(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(fe(108,LH(e)||"Unknown",a));return pn({},n,r)}function $y(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Wl=_r.current,Kt(_r,e),Kt(pa,pa.current),!0}function kN(e,t,n){var r=e.stateNode;if(!r)throw Error(fe(169));n?(e=yF(e,t,Wl),r.__reactInternalMemoizedMergedChildContext=e,Zt(pa),Zt(_r),Kt(_r,e)):Zt(pa),Kt(pa,n)}var ks=null,Vv=!1,Sw=!1;function vF(e){ks===null?ks=[e]:ks.push(e)}function t5(e){Vv=!0,vF(e)}function Ko(){if(!Sw&&ks!==null){Sw=!0;var e=0,t=Nt;try{var n=ks;for(Nt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ks=null,Vv=!1}catch(a){throw ks!==null&&(ks=ks.slice(e+1)),jD(WS,Ko),a}finally{Nt=t,Sw=!1}}return null}var yd=[],vd=0,Cy=null,Ty=0,ai=[],ii=0,Ul=null,Ns=1,_s="";function yl(e,t){yd[vd++]=Ty,yd[vd++]=Cy,Cy=e,Ty=t}function xF(e,t,n){ai[ii++]=Ns,ai[ii++]=_s,ai[ii++]=Ul,Ul=e;var r=Ns;e=_s;var a=32-Ni(r)-1;r&=~(1<<a),n+=1;var i=32-Ni(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Ns=1<<32-Ni(t)+a|n<<a|r,_s=i+e}else Ns=1<<i|n<<a|r,_s=e}function YS(e){e.return!==null&&(yl(e,1),xF(e,1,0))}function JS(e){for(;e===Cy;)Cy=yd[--vd],yd[vd]=null,Ty=yd[--vd],yd[vd]=null;for(;e===Ul;)Ul=ai[--ii],ai[ii]=null,_s=ai[--ii],ai[ii]=null,Ns=ai[--ii],ai[ii]=null}var za=null,Fa=null,rn=!1,Si=null;function wF(e,t){var n=si(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function SN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,za=e,Fa=wo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,za=e,Fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ul!==null?{id:Ns,overflow:_s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=si(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,za=e,Fa=null,!0):!1;default:return!1}}function W1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U1(e){if(rn){var t=Fa;if(t){var n=t;if(!SN(e,t)){if(W1(e))throw Error(fe(418));t=wo(n.nextSibling);var r=za;t&&SN(e,t)?wF(r,n):(e.flags=e.flags&-4097|2,rn=!1,za=e)}}else{if(W1(e))throw Error(fe(418));e.flags=e.flags&-4097|2,rn=!1,za=e}}}function IN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;za=e}function mb(e){if(e!==za)return!1;if(!rn)return IN(e),rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!P1(e.type,e.memoizedProps)),t&&(t=Fa)){if(W1(e))throw kF(),Error(fe(418));for(;t;)wF(e,t),t=wo(t.nextSibling)}if(IN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fa=wo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fa=null}}else Fa=za?wo(e.stateNode.nextSibling):null;return!0}function kF(){for(var e=Fa;e;)e=wo(e.nextSibling)}function zd(){Fa=za=null,rn=!1}function ZS(e){Si===null?Si=[e]:Si.push(e)}var n5=js.ReactCurrentBatchConfig;function wi(e,t){if(e&&e.defaultProps){t=pn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Ey=qo(null),Ny=null,xd=null,QS=null;function eI(){QS=xd=Ny=null}function tI(e){var t=Ey.current;Zt(Ey),e._currentValue=t}function V1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ed(e,t){Ny=e,QS=xd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ua=!0),e.firstContext=null)}function ui(e){var t=e._currentValue;if(QS!==e)if(e={context:e,memoizedValue:t,next:null},xd===null){if(Ny===null)throw Error(fe(308));xd=e,Ny.dependencies={lanes:0,firstContext:e}}else xd=xd.next=e;return t}var Nl=null;function nI(e){Nl===null?Nl=[e]:Nl.push(e)}function SF(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,nI(t)):(n.next=a.next,a.next=n),t.interleaved=n,zs(e,r)}function zs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var io=!1;function rI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ko(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,zs(e,n)}return a=r.interleaved,a===null?(t.next=t,nI(r)):(t.next=a.next,a.next=t),r.interleaved=t,zs(e,n)}function Jb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,US(e,n)}}function $N(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _y(e,t,n,r){var a=e.updateQueue;io=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?i=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=a.baseState;s=0,u=c=l=null,o=i;do{var h=o.lane,p=o.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(p,d,h):f,h==null)break e;d=pn({},d,h);break e;case 2:io=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(u===null&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);jl|=s,e.lanes=s,e.memoizedState=d}}function CN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(fe(191,a));a.call(r)}}}var $F=new SD.Component().refs;function j1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jv={isMounted:function(e){return(e=e._reactInternals)?bu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kr(),a=Io(e),i=Rs(r,a);i.payload=t,n!=null&&(i.callback=n),t=ko(e,i,a),t!==null&&(_i(t,e,a,r),Jb(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kr(),a=Io(e),i=Rs(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ko(e,i,a),t!==null&&(_i(t,e,a,r),Jb(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kr(),r=Io(e),a=Rs(n,r);a.tag=2,t!=null&&(a.callback=t),t=ko(e,a,r),t!==null&&(_i(t,e,r,n),Jb(t,e,r))}};function TN(e,t,n,r,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Yf(n,r)||!Yf(a,i):!0}function CF(e,t,n){var r=!1,a=Ao,i=t.contextType;return typeof i=="object"&&i!==null?i=ui(i):(a=fa(t)?Wl:_r.current,r=t.contextTypes,i=(r=r!=null)?Ld(e,a):Ao),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jv,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function EN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jv.enqueueReplaceState(t,t.state,null)}function H1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=$F,rI(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ui(i):(i=fa(t)?Wl:_r.current,a.context=Ld(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(j1(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&jv.enqueueReplaceState(a,a.state,null),_y(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function tf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;o===$F&&(o=a.refs={}),s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,e))}return e}function gb(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NN(e){var t=e._init;return t(e._payload)}function TF(e){function t(b,y){if(e){var v=b.deletions;v===null?(b.deletions=[y],b.flags|=16):v.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=$o(b,y),b.index=0,b.sibling=null,b}function i(b,y,v){return b.index=v,e?(v=b.alternate,v!==null?(v=v.index,v<y?(b.flags|=2,y):v):(b.flags|=2,y)):(b.flags|=1048576,y)}function s(b){return e&&b.alternate===null&&(b.flags|=2),b}function o(b,y,v,x){return y===null||y.tag!==6?(y=_w(v,b.mode,x),y.return=b,y):(y=a(y,v),y.return=b,y)}function l(b,y,v,x){var w=v.type;return w===hd?u(b,y,v.props.children,x,v.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ao&&NN(w)===y.type)?(x=a(y,v.props),x.ref=tf(b,y,v),x.return=b,x):(x=ry(v.type,v.key,v.props,null,b.mode,x),x.ref=tf(b,y,v),x.return=b,x)}function c(b,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Aw(v,b.mode,x),y.return=b,y):(y=a(y,v.children||[]),y.return=b,y)}function u(b,y,v,x,w){return y===null||y.tag!==7?(y=Ol(v,b.mode,x,w),y.return=b,y):(y=a(y,v),y.return=b,y)}function d(b,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_w(""+y,b.mode,v),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ib:return v=ry(y.type,y.key,y.props,null,b.mode,v),v.ref=tf(b,null,y),v.return=b,v;case dd:return y=Aw(y,b.mode,v),y.return=b,y;case ao:var x=y._init;return d(b,x(y._payload),v)}if(hf(y)||Yp(y))return y=Ol(y,b.mode,v,null),y.return=b,y;gb(b,y)}return null}function h(b,y,v,x){var w=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:o(b,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ib:return v.key===w?l(b,y,v,x):null;case dd:return v.key===w?c(b,y,v,x):null;case ao:return w=v._init,h(b,y,w(v._payload),x)}if(hf(v)||Yp(v))return w!==null?null:u(b,y,v,x,null);gb(b,v)}return null}function p(b,y,v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return b=b.get(v)||null,o(y,b,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ib:return b=b.get(x.key===null?v:x.key)||null,l(y,b,x,w);case dd:return b=b.get(x.key===null?v:x.key)||null,c(y,b,x,w);case ao:var $=x._init;return p(b,y,v,$(x._payload),w)}if(hf(x)||Yp(x))return b=b.get(v)||null,u(y,b,x,w,null);gb(y,x)}return null}function f(b,y,v,x){for(var w=null,$=null,C=y,T=y=0,A=null;C!==null&&T<v.length;T++){C.index>T?(A=C,C=null):A=C.sibling;var D=h(b,C,v[T],x);if(D===null){C===null&&(C=A);break}e&&C&&D.alternate===null&&t(b,C),y=i(D,y,T),$===null?w=D:$.sibling=D,$=D,C=A}if(T===v.length)return n(b,C),rn&&yl(b,T),w;if(C===null){for(;T<v.length;T++)C=d(b,v[T],x),C!==null&&(y=i(C,y,T),$===null?w=C:$.sibling=C,$=C);return rn&&yl(b,T),w}for(C=r(b,C);T<v.length;T++)A=p(C,b,T,v[T],x),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?T:A.key),y=i(A,y,T),$===null?w=A:$.sibling=A,$=A);return e&&C.forEach(function(N){return t(b,N)}),rn&&yl(b,T),w}function m(b,y,v,x){var w=Yp(v);if(typeof w!="function")throw Error(fe(150));if(v=w.call(v),v==null)throw Error(fe(151));for(var $=w=null,C=y,T=y=0,A=null,D=v.next();C!==null&&!D.done;T++,D=v.next()){C.index>T?(A=C,C=null):A=C.sibling;var N=h(b,C,D.value,x);if(N===null){C===null&&(C=A);break}e&&C&&N.alternate===null&&t(b,C),y=i(N,y,T),$===null?w=N:$.sibling=N,$=N,C=A}if(D.done)return n(b,C),rn&&yl(b,T),w;if(C===null){for(;!D.done;T++,D=v.next())D=d(b,D.value,x),D!==null&&(y=i(D,y,T),$===null?w=D:$.sibling=D,$=D);return rn&&yl(b,T),w}for(C=r(b,C);!D.done;T++,D=v.next())D=p(C,b,T,D.value,x),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?T:D.key),y=i(D,y,T),$===null?w=D:$.sibling=D,$=D);return e&&C.forEach(function(I){return t(b,I)}),rn&&yl(b,T),w}function g(b,y,v,x){if(typeof v=="object"&&v!==null&&v.type===hd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ib:e:{for(var w=v.key,$=y;$!==null;){if($.key===w){if(w=v.type,w===hd){if($.tag===7){n(b,$.sibling),y=a($,v.props.children),y.return=b,b=y;break e}}else if($.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ao&&NN(w)===$.type){n(b,$.sibling),y=a($,v.props),y.ref=tf(b,$,v),y.return=b,b=y;break e}n(b,$);break}else t(b,$);$=$.sibling}v.type===hd?(y=Ol(v.props.children,b.mode,x,v.key),y.return=b,b=y):(x=ry(v.type,v.key,v.props,null,b.mode,x),x.ref=tf(b,y,v),x.return=b,b=x)}return s(b);case dd:e:{for($=v.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(b,y.sibling),y=a(y,v.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=Aw(v,b.mode,x),y.return=b,b=y}return s(b);case ao:return $=v._init,g(b,y,$(v._payload),x)}if(hf(v))return f(b,y,v,x);if(Yp(v))return m(b,y,v,x);gb(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(b,y.sibling),y=a(y,v),y.return=b,b=y):(n(b,y),y=_w(v,b.mode,x),y.return=b,b=y),s(b)):n(b,y)}return g}var Bd=TF(!0),EF=TF(!1),Om={},os=qo(Om),em=qo(Om),tm=qo(Om);function _l(e){if(e===Om)throw Error(fe(174));return e}function aI(e,t){switch(Kt(tm,t),Kt(em,e),Kt(os,Om),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:S1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=S1(t,e)}Zt(os),Kt(os,t)}function Wd(){Zt(os),Zt(em),Zt(tm)}function NF(e){_l(tm.current);var t=_l(os.current),n=S1(t,e.type);t!==n&&(Kt(em,e),Kt(os,n))}function iI(e){em.current===e&&(Zt(os),Zt(em))}var dn=qo(0);function Ay(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Iw=[];function sI(){for(var e=0;e<Iw.length;e++)Iw[e]._workInProgressVersionPrimary=null;Iw.length=0}var Zb=js.ReactCurrentDispatcher,$w=js.ReactCurrentBatchConfig,Vl=0,hn=null,Gn=null,nr=null,Ry=!1,Af=!1,nm=0,r5=0;function Sr(){throw Error(fe(321))}function oI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pi(e[n],t[n]))return!1;return!0}function lI(e,t,n,r,a,i){if(Vl=i,hn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zb.current=e===null||e.memoizedState===null?o5:l5,e=n(r,a),Af){i=0;do{if(Af=!1,nm=0,25<=i)throw Error(fe(301));i+=1,nr=Gn=null,t.updateQueue=null,Zb.current=u5,e=n(r,a)}while(Af)}if(Zb.current=Dy,t=Gn!==null&&Gn.next!==null,Vl=0,nr=Gn=hn=null,Ry=!1,t)throw Error(fe(300));return e}function uI(){var e=nm!==0;return nm=0,e}function Zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?hn.memoizedState=nr=e:nr=nr.next=e,nr}function ci(){if(Gn===null){var e=hn.alternate;e=e!==null?e.memoizedState:null}else e=Gn.next;var t=nr===null?hn.memoizedState:nr.next;if(t!==null)nr=t,Gn=e;else{if(e===null)throw Error(fe(310));Gn=e,e={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},nr===null?hn.memoizedState=nr=e:nr=nr.next=e}return nr}function rm(e,t){return typeof t=="function"?t(e):t}function Cw(e){var t=ci(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=Gn,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=s=null,l=null,c=i;do{var u=c.lane;if((Vl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,hn.lanes|=u,jl|=u}c=c.next}while(c!==null&&c!==i);l===null?s=r:l.next=o,Pi(r,t.memoizedState)||(ua=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,hn.lanes|=i,jl|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tw(e){var t=ci(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Pi(i,t.memoizedState)||(ua=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _F(){}function AF(e,t){var n=hn,r=ci(),a=t(),i=!Pi(r.memoizedState,a);if(i&&(r.memoizedState=a,ua=!0),r=r.queue,cI(FF.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||nr!==null&&nr.memoizedState.tag&1){if(n.flags|=2048,am(9,DF.bind(null,n,r,a,t),void 0,null),or===null)throw Error(fe(349));Vl&30||RF(n,t,a)}return a}function RF(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function DF(e,t,n,r){t.value=n,t.getSnapshot=r,MF(t)&&OF(e)}function FF(e,t,n){return n(function(){MF(t)&&OF(e)})}function MF(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pi(e,n)}catch(r){return!0}}function OF(e){var t=zs(e,1);t!==null&&_i(t,e,1,-1)}function _N(e){var t=Zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:e},t.queue=e,e=e.dispatch=s5.bind(null,hn,e),[t.memoizedState,e]}function am(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PF(){return ci().memoizedState}function Qb(e,t,n,r){var a=Zi();hn.flags|=e,a.memoizedState=am(1|t,n,void 0,r===void 0?null:r)}function Hv(e,t,n,r){var a=ci();r=r===void 0?null:r;var i=void 0;if(Gn!==null){var s=Gn.memoizedState;if(i=s.destroy,r!==null&&oI(r,s.deps)){a.memoizedState=am(t,n,i,r);return}}hn.flags|=e,a.memoizedState=am(1|t,n,i,r)}function AN(e,t){return Qb(8390656,8,e,t)}function cI(e,t){return Hv(2048,8,e,t)}function LF(e,t){return Hv(4,2,e,t)}function zF(e,t){return Hv(4,4,e,t)}function BF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WF(e,t,n){return n=n!=null?n.concat([e]):null,Hv(4,4,BF.bind(null,t,e),n)}function dI(){}function UF(e,t){var n=ci();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function VF(e,t){var n=ci();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jF(e,t,n){return Vl&21?(Pi(n,t)||(n=qD(),hn.lanes|=n,jl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ua=!0),e.memoizedState=n)}function a5(e,t){var n=Nt;Nt=n!==0&&4>n?n:4,e(!0);var r=$w.transition;$w.transition={};try{e(!1),t()}finally{Nt=n,$w.transition=r}}function HF(){return ci().memoizedState}function i5(e,t,n){var r=Io(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GF(e))qF(t,n);else if(n=SF(e,t,n,r),n!==null){var a=Kr();_i(n,e,r,a),KF(n,t,r)}}function s5(e,t,n){var r=Io(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GF(e))qF(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,Pi(o,s)){var l=t.interleaved;l===null?(a.next=a,nI(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch(c){}finally{}n=SF(e,t,a,r),n!==null&&(a=Kr(),_i(n,e,r,a),KF(n,t,r))}}function GF(e){var t=e.alternate;return e===hn||t!==null&&t===hn}function qF(e,t){Af=Ry=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function KF(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,US(e,n)}}var Dy={readContext:ui,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},o5={readContext:ui,useCallback:function(e,t){return Zi().memoizedState=[e,t===void 0?null:t],e},useContext:ui,useEffect:AN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qb(4194308,4,BF.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qb(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qb(4,2,e,t)},useMemo:function(e,t){var n=Zi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=i5.bind(null,hn,e),[r.memoizedState,e]},useRef:function(e){var t=Zi();return e={current:e},t.memoizedState=e},useState:_N,useDebugValue:dI,useDeferredValue:function(e){return Zi().memoizedState=e},useTransition:function(){var e=_N(!1),t=e[0];return e=a5.bind(null,e[1]),Zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=hn,a=Zi();if(rn){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=t(),or===null)throw Error(fe(349));Vl&30||RF(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,AN(FF.bind(null,r,i,e),[e]),r.flags|=2048,am(9,DF.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Zi(),t=or.identifierPrefix;if(rn){var n=_s,r=Ns;n=(r&~(1<<32-Ni(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=nm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=r5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},l5={readContext:ui,useCallback:UF,useContext:ui,useEffect:cI,useImperativeHandle:WF,useInsertionEffect:LF,useLayoutEffect:zF,useMemo:VF,useReducer:Cw,useRef:PF,useState:function(){return Cw(rm)},useDebugValue:dI,useDeferredValue:function(e){var t=ci();return jF(t,Gn.memoizedState,e)},useTransition:function(){var e=Cw(rm)[0],t=ci().memoizedState;return[e,t]},useMutableSource:_F,useSyncExternalStore:AF,useId:HF,unstable_isNewReconciler:!1},u5={readContext:ui,useCallback:UF,useContext:ui,useEffect:cI,useImperativeHandle:WF,useInsertionEffect:LF,useLayoutEffect:zF,useMemo:VF,useReducer:Tw,useRef:PF,useState:function(){return Tw(rm)},useDebugValue:dI,useDeferredValue:function(e){var t=ci();return Gn===null?t.memoizedState=e:jF(t,Gn.memoizedState,e)},useTransition:function(){var e=Tw(rm)[0],t=ci().memoizedState;return[e,t]},useMutableSource:_F,useSyncExternalStore:AF,useId:HF,unstable_isNewReconciler:!1};function Ud(e,t){try{var n="",r=t;do n+=PH(r),r=r.return;while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ew(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function G1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var c5=typeof WeakMap=="function"?WeakMap:Map;function XF(e,t,n){n=Rs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){My||(My=!0,nk=r),G1(e,t)},n}function YF(e,t,n){n=Rs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){G1(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){G1(e,t),typeof r!="function"&&(So===null?So=new Set([this]):So.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function RN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new c5;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=I5.bind(null,e,t,n),t.then(e,e))}function DN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function FN(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rs(-1,1),t.tag=2,ko(n,t,1))),n.lanes|=1),e)}var d5=js.ReactCurrentOwner,ua=!1;function jr(e,t,n,r){t.child=e===null?EF(t,null,n,r):Bd(t,e.child,n,r)}function MN(e,t,n,r,a){n=n.render;var i=t.ref;return Ed(t,a),r=lI(e,t,n,r,i,a),n=uI(),e!==null&&!ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a)):(rn&&n&&YS(t),t.flags|=1,jr(e,t,r,a),t.child)}function ON(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!vI(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,JF(e,t,i,r,a)):(e=ry(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yf,n(s,r)&&e.ref===t.ref)return Bs(e,t,a)}return t.flags|=1,e=$o(i,r),e.ref=t.ref,e.return=t,t.child=e}function JF(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Yf(i,r)&&e.ref===t.ref)if(ua=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(ua=!0);else return t.lanes=e.lanes,Bs(e,t,a)}return q1(e,t,n,r,a)}function ZF(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(kd,_a),_a|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Kt(kd,_a),_a|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Kt(kd,_a),_a|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Kt(kd,_a),_a|=r;return jr(e,t,a,n),t.child}function QF(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function q1(e,t,n,r,a){var i=fa(n)?Wl:_r.current;return i=Ld(t,i),Ed(t,a),n=lI(e,t,n,r,i,a),r=uI(),e!==null&&!ua?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a)):(rn&&r&&YS(t),t.flags|=1,jr(e,t,n,a),t.child)}function PN(e,t,n,r,a){if(fa(n)){var i=!0;$y(t)}else i=!1;if(Ed(t,a),t.stateNode===null)ey(e,t),CF(t,n,r),H1(t,n,r,a),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=ui(c):(c=fa(n)?Wl:_r.current,c=Ld(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==c)&&EN(t,s,r,c),io=!1;var h=t.memoizedState;s.state=h,_y(t,r,s,a),l=t.memoizedState,o!==r||h!==l||pa.current||io?(typeof u=="function"&&(j1(t,n,u,r),l=t.memoizedState),(o=io||TN(t,n,o,r,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,IF(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:wi(t.type,o),s.props=c,d=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=ui(l):(l=fa(n)?Wl:_r.current,l=Ld(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||h!==l)&&EN(t,s,r,l),io=!1,h=t.memoizedState,s.state=h,_y(t,r,s,a);var f=t.memoizedState;o!==d||h!==f||pa.current||io?(typeof p=="function"&&(j1(t,n,p,r),f=t.memoizedState),(c=io||TN(t,n,c,r,h,f,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,f,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,f,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return K1(e,t,n,r,i,a)}function K1(e,t,n,r,a,i){QF(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return a&&kN(t,n,!1),Bs(e,t,i);r=t.stateNode,d5.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Bd(t,e.child,null,i),t.child=Bd(t,null,o,i)):jr(e,t,o,i),t.memoizedState=r.state,a&&kN(t,n,!0),t.child}function eM(e){var t=e.stateNode;t.pendingContext?wN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wN(e,t.context,!1),aI(e,t.containerInfo)}function LN(e,t,n,r,a){return zd(),ZS(a),t.flags|=256,jr(e,t,n,r),t.child}var X1={dehydrated:null,treeContext:null,retryLane:0};function Y1(e){return{baseLanes:e,cachePool:null,transitions:null}}function tM(e,t,n){var r=t.pendingProps,a=dn.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Kt(dn,a&1),e===null)return U1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Kv(s,r,0,null),e=Ol(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Y1(n),t.memoizedState=X1,e):hI(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return h5(e,t,s,r,o,a,n);if(i){i=r.fallback,s=t.mode,a=e.child,o=a.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=$o(a,l),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=$o(o,i):(i=Ol(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Y1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=X1,r}return i=e.child,e=i.sibling,r=$o(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function hI(e,t){return t=Kv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bb(e,t,n,r){return r!==null&&ZS(r),Bd(t,e.child,null,n),e=hI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h5(e,t,n,r,a,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Ew(Error(fe(422))),bb(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Kv({mode:"visible",children:r.children},a,0,null),i=Ol(i,a,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Bd(t,e.child,null,s),t.child.memoizedState=Y1(s),t.memoizedState=X1,i);if(!(t.mode&1))return bb(e,t,s,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(fe(419)),r=Ew(i,r,void 0),bb(e,t,s,r)}if(o=(s&e.childLanes)!==0,ua||o){if(r=or,r!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,zs(e,a),_i(r,e,a,-1))}return yI(),r=Ew(Error(fe(421))),bb(e,t,s,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=$5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Fa=wo(a.nextSibling),za=t,rn=!0,Si=null,e!==null&&(ai[ii++]=Ns,ai[ii++]=_s,ai[ii++]=Ul,Ns=e.id,_s=e.overflow,Ul=t),t=hI(t,r.children),t.flags|=4096,t)}function zN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),V1(e.return,t,n)}function Nw(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function nM(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(jr(e,t,r.children,n),r=dn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zN(e,n,t);else if(e.tag===19)zN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Kt(dn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ay(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Nw(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ay(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Nw(t,!0,n,null,i);break;case"together":Nw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ey(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,n=$o(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$o(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function p5(e,t,n){switch(t.tag){case 3:eM(t),zd();break;case 5:NF(t);break;case 1:fa(t.type)&&$y(t);break;case 4:aI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Kt(Ey,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Kt(dn,dn.current&1),t.flags|=128,null):n&t.child.childLanes?tM(e,t,n):(Kt(dn,dn.current&1),e=Bs(e,t,n),e!==null?e.sibling:null);Kt(dn,dn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return nM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Kt(dn,dn.current),r)break;return null;case 22:case 23:return t.lanes=0,ZF(e,t,n)}return Bs(e,t,n)}var rM,J1,aM,iM;rM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J1=function(){};aM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,_l(os.current);var i=null;switch(n){case"input":a=v1(e,a),r=v1(e,r),i=[];break;case"select":a=pn({},a,{value:void 0}),r=pn({},r,{value:void 0}),i=[];break;case"textarea":a=k1(e,a),r=k1(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sy)}I1(n,r);var s;n=null;for(c in a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Vf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=a!=null?a[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Vf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Jt("scroll",e),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};iM=function(e,t,n,r){n!==r&&(t.flags|=4)};function nf(e,t){if(!rn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ir(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function f5(e,t,n){var r=t.pendingProps;switch(JS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(t),null;case 1:return fa(t.type)&&Iy(),Ir(t),null;case 3:return r=t.stateNode,Wd(),Zt(pa),Zt(_r),sI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(mb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Si!==null&&(ik(Si),Si=null))),J1(e,t),Ir(t),null;case 5:iI(t);var a=_l(tm.current);if(n=t.type,e!==null&&t.stateNode!=null)aM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(fe(166));return Ir(t),null}if(e=_l(os.current),mb(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[as]=t,r[Qf]=i,e=(t.mode&1)!==0,n){case"dialog":Jt("cancel",r),Jt("close",r);break;case"iframe":case"object":case"embed":Jt("load",r);break;case"video":case"audio":for(a=0;a<ff.length;a++)Jt(ff[a],r);break;case"source":Jt("error",r);break;case"img":case"image":case"link":Jt("error",r),Jt("load",r);break;case"details":Jt("toggle",r);break;case"input":KE(r,i),Jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Jt("invalid",r);break;case"textarea":YE(r,i),Jt("invalid",r)}I1(n,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&fb(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&fb(r.textContent,o,e),a=["children",""+o]):Vf.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Jt("scroll",r)}switch(n){case"input":sb(r),XE(r,i,!0);break;case"textarea":sb(r),JE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sy)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=RD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[as]=t,e[Qf]=r,rM(e,t,!1,!1),t.stateNode=e;e:{switch(s=$1(n,r),n){case"dialog":Jt("cancel",e),Jt("close",e),a=r;break;case"iframe":case"object":case"embed":Jt("load",e),a=r;break;case"video":case"audio":for(a=0;a<ff.length;a++)Jt(ff[a],e);a=r;break;case"source":Jt("error",e),a=r;break;case"img":case"image":case"link":Jt("error",e),Jt("load",e),a=r;break;case"details":Jt("toggle",e),a=r;break;case"input":KE(e,r),a=v1(e,r),Jt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=pn({},r,{value:void 0}),Jt("invalid",e);break;case"textarea":YE(e,r),a=k1(e,r),Jt("invalid",e);break;default:a=r}I1(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?MD(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DD(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&jf(e,l):typeof l=="number"&&jf(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Jt("scroll",e):l!=null&&OS(e,i,l,s))}switch(n){case"input":sb(e),XE(e,r,!1);break;case"textarea":sb(e),JE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_o(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Id(e,!!r.multiple,i,!1):r.defaultValue!=null&&Id(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Sy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ir(t),null;case 6:if(e&&t.stateNode!=null)iM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(fe(166));if(n=_l(tm.current),_l(os.current),mb(t)){if(r=t.stateNode,n=t.memoizedProps,r[as]=t,(i=r.nodeValue!==n)&&(e=za,e!==null))switch(e.tag){case 3:fb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fb(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[as]=t,t.stateNode=r}return Ir(t),null;case 13:if(Zt(dn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rn&&Fa!==null&&t.mode&1&&!(t.flags&128))kF(),zd(),t.flags|=98560,i=!1;else if(i=mb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(fe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[as]=t}else zd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ir(t),i=!1}else Si!==null&&(ik(Si),Si=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dn.current&1?Xn===0&&(Xn=3):yI())),t.updateQueue!==null&&(t.flags|=4),Ir(t),null);case 4:return Wd(),J1(e,t),e===null&&Jf(t.stateNode.containerInfo),Ir(t),null;case 10:return tI(t.type._context),Ir(t),null;case 17:return fa(t.type)&&Iy(),Ir(t),null;case 19:if(Zt(dn),i=t.memoizedState,i===null)return Ir(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)nf(i,!1);else{if(Xn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ay(e),s!==null){for(t.flags|=128,nf(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Kt(dn,dn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Sn()>Vd&&(t.flags|=128,r=!0,nf(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ay(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),nf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!rn)return Ir(t),null}else 2*Sn()-i.renderingStartTime>Vd&&n!==1073741824&&(t.flags|=128,r=!0,nf(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Sn(),t.sibling=null,n=dn.current,Kt(dn,r?n&1|2:n&1),t):(Ir(t),null);case 22:case 23:return bI(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_a&1073741824&&(Ir(t),t.subtreeFlags&6&&(t.flags|=8192)):Ir(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function m5(e,t){switch(JS(t),t.tag){case 1:return fa(t.type)&&Iy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wd(),Zt(pa),Zt(_r),sI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iI(t),null;case 13:if(Zt(dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));zd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zt(dn),null;case 4:return Wd(),null;case 10:return tI(t.type._context),null;case 22:case 23:return bI(),null;case 24:return null;default:return null}}var yb=!1,$r=!1,g5=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function wd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mn(e,t,r)}else n.current=null}function Z1(e,t,n){try{n()}catch(r){mn(e,t,r)}}var BN=!1;function b5(e,t){if(M1=xy,e=uF(),XS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var s=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||a!==0&&d.nodeType!==3||(o=s+a),d!==i||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===a&&(o=s),h===i&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(O1={focusedElem:e,selectionRange:n},xy=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:wi(t.type,m),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(x){mn(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return f=BN,BN=!1,f}function Rf(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Z1(t,n,i)}a=a.next}while(a!==r)}}function Gv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Q1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sM(e){var t=e.alternate;t!==null&&(e.alternate=null,sM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[as],delete t[Qf],delete t[z1],delete t[Q6],delete t[e5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oM(e){return e.tag===5||e.tag===3||e.tag===4}function WN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ek(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sy));else if(r!==4&&(e=e.child,e!==null))for(ek(e,t,n),e=e.sibling;e!==null;)ek(e,t,n),e=e.sibling}function tk(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(tk(e,t,n),e=e.sibling;e!==null;)tk(e,t,n),e=e.sibling}var fr=null,ki=!1;function Qs(e,t,n){for(n=n.child;n!==null;)lM(e,t,n),n=n.sibling}function lM(e,t,n){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(Lv,n)}catch(o){}switch(n.tag){case 5:$r||wd(n,t);case 6:var r=fr,a=ki;fr=null,Qs(e,t,n),fr=r,ki=a,fr!==null&&(ki?(e=fr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fr.removeChild(n.stateNode));break;case 18:fr!==null&&(ki?(e=fr,n=n.stateNode,e.nodeType===8?kw(e.parentNode,n):e.nodeType===1&&kw(e,n),Kf(e)):kw(fr,n.stateNode));break;case 4:r=fr,a=ki,fr=n.stateNode.containerInfo,ki=!0,Qs(e,t,n),fr=r,ki=a;break;case 0:case 11:case 14:case 15:if(!$r&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Z1(n,t,s),a=a.next}while(a!==r)}Qs(e,t,n);break;case 1:if(!$r&&(wd(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){mn(n,t,o)}Qs(e,t,n);break;case 21:Qs(e,t,n);break;case 22:n.mode&1?($r=(r=$r)||n.memoizedState!==null,Qs(e,t,n),$r=r):Qs(e,t,n);break;default:Qs(e,t,n)}}function UN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new g5),t.forEach(function(r){var a=C5.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function yi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:fr=o.stateNode,ki=!1;break e;case 3:fr=o.stateNode.containerInfo,ki=!0;break e;case 4:fr=o.stateNode.containerInfo,ki=!0;break e}o=o.return}if(fr===null)throw Error(fe(160));lM(i,s,a),fr=null,ki=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(c){mn(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uM(t,e),t=t.sibling}function uM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yi(t,e),Xi(e),r&4){try{Rf(3,e,e.return),Gv(3,e)}catch(m){mn(e,e.return,m)}try{Rf(5,e,e.return)}catch(m){mn(e,e.return,m)}}break;case 1:yi(t,e),Xi(e),r&512&&n!==null&&wd(n,n.return);break;case 5:if(yi(t,e),Xi(e),r&512&&n!==null&&wd(n,n.return),e.flags&32){var a=e.stateNode;try{jf(a,"")}catch(m){mn(e,e.return,m)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&_D(a,i),$1(o,s);var c=$1(o,i);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?MD(a,d):u==="dangerouslySetInnerHTML"?DD(a,d):u==="children"?jf(a,d):OS(a,u,d,c)}switch(o){case"input":x1(a,i);break;case"textarea":AD(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Id(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Id(a,!!i.multiple,i.defaultValue,!0):Id(a,!!i.multiple,i.multiple?[]:"",!1))}a[Qf]=i}catch(m){mn(e,e.return,m)}}break;case 6:if(yi(t,e),Xi(e),r&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){mn(e,e.return,m)}}break;case 3:if(yi(t,e),Xi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kf(t.containerInfo)}catch(m){mn(e,e.return,m)}break;case 4:yi(t,e),Xi(e);break;case 13:yi(t,e),Xi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(mI=Sn())),r&4&&UN(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?($r=(c=$r)||u,yi(t,e),$r=c):yi(t,e),Xi(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Ne=e,u=e.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(h=Ne,p=h.child,h.tag){case 0:case 11:case 14:case 15:Rf(4,h,h.return);break;case 1:wd(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){mn(r,n,m)}}break;case 5:wd(h,h.return);break;case 22:if(h.memoizedState!==null){jN(d);continue}}p!==null?(p.return=h,Ne=p):jN(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{a=d.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=FD("display",s))}catch(m){mn(e,e.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){mn(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yi(t,e),Xi(e),r&4&&UN(e);break;case 21:break;default:yi(t,e),Xi(e)}}function Xi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oM(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(jf(a,""),r.flags&=-33);var i=WN(e);tk(e,i,a);break;case 3:case 4:var s=r.stateNode.containerInfo,o=WN(e);ek(e,o,s);break;default:throw Error(fe(161))}}catch(l){mn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function y5(e,t,n){Ne=e,cM(e)}function cM(e,t,n){for(var r=(e.mode&1)!==0;Ne!==null;){var a=Ne,i=a.child;if(a.tag===22&&r){var s=a.memoizedState!==null||yb;if(!s){var o=a.alternate,l=o!==null&&o.memoizedState!==null||$r;o=yb;var c=$r;if(yb=s,($r=l)&&!c)for(Ne=a;Ne!==null;)s=Ne,l=s.child,s.tag===22&&s.memoizedState!==null?HN(a):l!==null?(l.return=s,Ne=l):HN(a);for(;i!==null;)Ne=i,cM(i),i=i.sibling;Ne=a,yb=o,$r=c}VN(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ne=i):VN(e)}}function VN(e){for(;Ne!==null;){var t=Ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$r||Gv(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$r)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:wi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&CN(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}CN(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Kf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}$r||t.flags&512&&Q1(t)}catch(h){mn(t,t.return,h)}}if(t===e){Ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ne=n;break}Ne=t.return}}function jN(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ne=n;break}Ne=t.return}}function HN(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gv(4,t)}catch(l){mn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(l){mn(t,a,l)}}var i=t.return;try{Q1(t)}catch(l){mn(t,i,l)}break;case 5:var s=t.return;try{Q1(t)}catch(l){mn(t,s,l)}}}catch(l){mn(t,t.return,l)}if(t===e){Ne=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ne=o;break}Ne=t.return}}var v5=Math.ceil,Fy=js.ReactCurrentDispatcher,pI=js.ReactCurrentOwner,oi=js.ReactCurrentBatchConfig,vt=0,or=null,_n=null,gr=0,_a=0,kd=qo(0),Xn=0,im=null,jl=0,qv=0,fI=0,Df=null,oa=null,mI=0,Vd=1/0,ws=null,My=!1,nk=null,So=null,vb=!1,ho=null,Oy=0,Ff=0,rk=null,ty=-1,ny=0;function Kr(){return vt&6?Sn():ty!==-1?ty:ty=Sn()}function Io(e){return e.mode&1?vt&2&&gr!==0?gr&-gr:n5.transition!==null?(ny===0&&(ny=qD()),ny):(e=Nt,e!==0||(e=window.event,e=e===void 0?16:eF(e.type)),e):1}function _i(e,t,n,r){if(50<Ff)throw Ff=0,rk=null,Error(fe(185));Dm(e,n,r),(!(vt&2)||e!==or)&&(e===or&&(!(vt&2)&&(qv|=n),Xn===4&&lo(e,gr)),ma(e,r),n===1&&vt===0&&!(t.mode&1)&&(Vd=Sn()+500,Vv&&Ko()))}function ma(e,t){var n=e.callbackNode;n6(e,t);var r=vy(e,e===or?gr:0);if(r===0)n!==null&&eN(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&eN(n),t===1)e.tag===0?t5(GN.bind(null,e)):vF(GN.bind(null,e)),J6(function(){!(vt&6)&&Ko()}),n=null;else{switch(KD(r)){case 1:n=WS;break;case 4:n=HD;break;case 16:n=yy;break;case 536870912:n=GD;break;default:n=yy}n=yM(n,dM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dM(e,t){if(ty=-1,ny=0,vt&6)throw Error(fe(327));var n=e.callbackNode;if(Nd()&&e.callbackNode!==n)return null;var r=vy(e,e===or?gr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Py(e,r);else{t=r;var a=vt;vt|=2;var i=pM();(or!==e||gr!==t)&&(ws=null,Vd=Sn()+500,Ml(e,t));do try{k5();break}catch(o){hM(e,o)}while(1);eI(),Fy.current=i,vt=a,_n!==null?t=0:(or=null,gr=0,t=Xn)}if(t!==0){if(t===2&&(a=_1(e),a!==0&&(r=a,t=ak(e,a))),t===1)throw n=im,Ml(e,0),lo(e,r),ma(e,Sn()),n;if(t===6)lo(e,r);else{if(a=e.current.alternate,!(r&30)&&!x5(a)&&(t=Py(e,r),t===2&&(i=_1(e),i!==0&&(r=i,t=ak(e,i))),t===1))throw n=im,Ml(e,0),lo(e,r),ma(e,Sn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(fe(345));case 2:vl(e,oa,ws);break;case 3:if(lo(e,r),(r&130023424)===r&&(t=mI+500-Sn(),10<t)){if(vy(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Kr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=L1(vl.bind(null,e,oa,ws),t);break}vl(e,oa,ws);break;case 4:if(lo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-Ni(r);i=1<<s,s=t[s],s>a&&(a=s),r&=~i}if(r=a,r=Sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*v5(r/1960))-r,10<r){e.timeoutHandle=L1(vl.bind(null,e,oa,ws),r);break}vl(e,oa,ws);break;case 5:vl(e,oa,ws);break;default:throw Error(fe(329))}}}return ma(e,Sn()),e.callbackNode===n?dM.bind(null,e):null}function ak(e,t){var n=Df;return e.current.memoizedState.isDehydrated&&(Ml(e,t).flags|=256),e=Py(e,t),e!==2&&(t=oa,oa=n,t!==null&&ik(t)),e}function ik(e){oa===null?oa=e:oa.push.apply(oa,e)}function x5(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Pi(i(),a))return!1}catch(s){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lo(e,t){for(t&=~fI,t&=~qv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ni(t),r=1<<n;e[n]=-1,t&=~r}}function GN(e){if(vt&6)throw Error(fe(327));Nd();var t=vy(e,0);if(!(t&1))return ma(e,Sn()),null;var n=Py(e,t);if(e.tag!==0&&n===2){var r=_1(e);r!==0&&(t=r,n=ak(e,r))}if(n===1)throw n=im,Ml(e,0),lo(e,t),ma(e,Sn()),n;if(n===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vl(e,oa,ws),ma(e,Sn()),null}function gI(e,t){var n=vt;vt|=1;try{return e(t)}finally{vt=n,vt===0&&(Vd=Sn()+500,Vv&&Ko())}}function Hl(e){ho!==null&&ho.tag===0&&!(vt&6)&&Nd();var t=vt;vt|=1;var n=oi.transition,r=Nt;try{if(oi.transition=null,Nt=1,e)return e()}finally{Nt=r,oi.transition=n,vt=t,!(vt&6)&&Ko()}}function bI(){_a=kd.current,Zt(kd)}function Ml(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Y6(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(JS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Iy();break;case 3:Wd(),Zt(pa),Zt(_r),sI();break;case 5:iI(r);break;case 4:Wd();break;case 13:Zt(dn);break;case 19:Zt(dn);break;case 10:tI(r.type._context);break;case 22:case 23:bI()}n=n.return}if(or=e,_n=e=$o(e.current,null),gr=_a=t,Xn=0,im=null,fI=qv=jl=0,oa=Df=null,Nl!==null){for(t=0;t<Nl.length;t++)if(n=Nl[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=a,r.next=s}n.pending=r}Nl=null}return e}function hM(e,t){do{var n=_n;try{if(eI(),Zb.current=Dy,Ry){for(var r=hn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ry=!1}if(Vl=0,nr=Gn=hn=null,Af=!1,nm=0,pI.current=null,n===null||n.return===null){Xn=1,im=t,_n=null;break}e:{var i=e,s=n.return,o=n,l=t;if(t=gr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=DN(s);if(p!==null){p.flags&=-257,FN(p,s,o,i,t),p.mode&1&&RN(i,c,t),t=p,l=c;var f=t.updateQueue;if(f===null){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}else{if(!(t&1)){RN(i,c,t),yI();break e}l=Error(fe(426))}}else if(rn&&o.mode&1){var g=DN(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),FN(g,s,o,i,t),ZS(Ud(l,o));break e}}i=l=Ud(l,o),Xn!==4&&(Xn=2),Df===null?Df=[i]:Df.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=XF(i,l,t);$N(i,b);break e;case 1:o=l;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(So===null||!So.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=YF(i,o,t);$N(i,x);break e}}i=i.return}while(i!==null)}mM(n)}catch(w){t=w,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(1)}function pM(){var e=Fy.current;return Fy.current=Dy,e===null?Dy:e}function yI(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),or===null||!(jl&268435455)&&!(qv&268435455)||lo(or,gr)}function Py(e,t){var n=vt;vt|=2;var r=pM();(or!==e||gr!==t)&&(ws=null,Ml(e,t));do try{w5();break}catch(a){hM(e,a)}while(1);if(eI(),vt=n,Fy.current=r,_n!==null)throw Error(fe(261));return or=null,gr=0,Xn}function w5(){for(;_n!==null;)fM(_n)}function k5(){for(;_n!==null&&!qH();)fM(_n)}function fM(e){var t=bM(e.alternate,e,_a);e.memoizedProps=e.pendingProps,t===null?mM(e):_n=t,pI.current=null}function mM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=m5(n,t),n!==null){n.flags&=32767,_n=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xn=6,_n=null;return}}else if(n=f5(n,t,_a),n!==null){_n=n;return}if(t=t.sibling,t!==null){_n=t;return}_n=t=e}while(t!==null);Xn===0&&(Xn=5)}function vl(e,t,n){var r=Nt,a=oi.transition;try{oi.transition=null,Nt=1,S5(e,t,n,r)}finally{oi.transition=a,Nt=r}return null}function S5(e,t,n,r){do Nd();while(ho!==null);if(vt&6)throw Error(fe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(r6(e,i),e===or&&(_n=or=null,gr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vb||(vb=!0,yM(yy,function(){return Nd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=oi.transition,oi.transition=null;var s=Nt;Nt=1;var o=vt;vt|=4,pI.current=null,b5(e,n),uM(n,e),V6(O1),xy=!!M1,O1=M1=null,e.current=n,y5(n),KH(),vt=o,Nt=s,oi.transition=i}else e.current=n;if(vb&&(vb=!1,ho=e,Oy=a),i=e.pendingLanes,i===0&&(So=null),JH(n.stateNode),ma(e,Sn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(My)throw My=!1,e=nk,nk=null,e;return Oy&1&&e.tag!==0&&Nd(),i=e.pendingLanes,i&1?e===rk?Ff++:(Ff=0,rk=e):Ff=0,Ko(),null}function Nd(){if(ho!==null){var e=KD(Oy),t=oi.transition,n=Nt;try{if(oi.transition=null,Nt=16>e?16:e,ho===null)var r=!1;else{if(e=ho,ho=null,Oy=0,vt&6)throw Error(fe(331));var a=vt;for(vt|=4,Ne=e.current;Ne!==null;){var i=Ne,s=i.child;if(Ne.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:Rf(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var h=u.sibling,p=u.return;if(sM(u),u===c){Ne=null;break}if(h!==null){h.return=p,Ne=h;break}Ne=p}}}var f=i.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ne=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,Ne=s;else e:for(;Ne!==null;){if(i=Ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Ne=b;break e}Ne=i.return}}var y=e.current;for(Ne=y;Ne!==null;){s=Ne;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,Ne=v;else e:for(s=y;Ne!==null;){if(o=Ne,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Gv(9,o)}}catch(w){mn(o,o.return,w)}if(o===s){Ne=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,Ne=x;break e}Ne=o.return}}if(vt=a,Ko(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(Lv,e)}catch(w){}r=!0}return r}finally{Nt=n,oi.transition=t}}return!1}function qN(e,t,n){t=Ud(n,t),t=XF(e,t,1),e=ko(e,t,1),t=Kr(),e!==null&&(Dm(e,1,t),ma(e,t))}function mn(e,t,n){if(e.tag===3)qN(e,e,n);else for(;t!==null;){if(t.tag===3){qN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(So===null||!So.has(r))){e=Ud(n,e),e=YF(t,e,1),t=ko(t,e,1),e=Kr(),t!==null&&(Dm(t,1,e),ma(t,e));break}}t=t.return}}function I5(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Kr(),e.pingedLanes|=e.suspendedLanes&n,or===e&&(gr&n)===n&&(Xn===4||Xn===3&&(gr&130023424)===gr&&500>Sn()-mI?Ml(e,0):fI|=n),ma(e,t)}function gM(e,t){t===0&&(e.mode&1?(t=ub,ub<<=1,!(ub&130023424)&&(ub=4194304)):t=1);var n=Kr();e=zs(e,t),e!==null&&(Dm(e,t,n),ma(e,n))}function $5(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gM(e,n)}function C5(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(t),gM(e,n)}var bM;bM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pa.current)ua=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ua=!1,p5(e,t,n);ua=!!(e.flags&131072)}else ua=!1,rn&&t.flags&1048576&&xF(t,Ty,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ey(e,t),e=t.pendingProps;var a=Ld(t,_r.current);Ed(t,n),a=lI(null,t,r,e,a,n);var i=uI();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fa(r)?(i=!0,$y(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,rI(t),a.updater=jv,t.stateNode=a,a._reactInternals=t,H1(t,r,e,n),t=K1(null,t,r,!0,i,n)):(t.tag=0,rn&&i&&YS(t),jr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ey(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=E5(r),e=wi(r,e),a){case 0:t=q1(null,t,r,e,n);break e;case 1:t=PN(null,t,r,e,n);break e;case 11:t=MN(null,t,r,e,n);break e;case 14:t=ON(null,t,r,wi(r.type,e),n);break e}throw Error(fe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:wi(r,a),q1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:wi(r,a),PN(e,t,r,a,n);case 3:e:{if(eM(t),e===null)throw Error(fe(387));r=t.pendingProps,i=t.memoizedState,a=i.element,IF(e,t),_y(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ud(Error(fe(423)),t),t=LN(e,t,r,n,a);break e}else if(r!==a){a=Ud(Error(fe(424)),t),t=LN(e,t,r,n,a);break e}else for(Fa=wo(t.stateNode.containerInfo.firstChild),za=t,rn=!0,Si=null,n=EF(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zd(),r===a){t=Bs(e,t,n);break e}jr(e,t,r,n)}t=t.child}return t;case 5:return NF(t),e===null&&U1(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,P1(r,a)?s=null:i!==null&&P1(r,i)&&(t.flags|=32),QF(e,t),jr(e,t,s,n),t.child;case 6:return e===null&&U1(t),null;case 13:return tM(e,t,n);case 4:return aI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Bd(t,null,r,n):jr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:wi(r,a),MN(e,t,r,a,n);case 7:return jr(e,t,t.pendingProps,n),t.child;case 8:return jr(e,t,t.pendingProps.children,n),t.child;case 12:return jr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Kt(Ey,r._currentValue),r._currentValue=s,i!==null)if(Pi(i.value,s)){if(i.children===a.children&&!pa.current){t=Bs(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Rs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),V1(i.return,n,t),o.lanes|=n;break}l=l.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(fe(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),V1(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}jr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ed(t,n),a=ui(a),r=r(a),t.flags|=1,jr(e,t,r,n),t.child;case 14:return r=t.type,a=wi(r,t.pendingProps),a=wi(r.type,a),ON(e,t,r,a,n);case 15:return JF(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:wi(r,a),ey(e,t),t.tag=1,fa(r)?(e=!0,$y(t)):e=!1,Ed(t,n),CF(t,r,a),H1(t,r,a,n),K1(null,t,r,!0,e,n);case 19:return nM(e,t,n);case 22:return ZF(e,t,n)}throw Error(fe(156,t.tag))};function yM(e,t){return jD(e,t)}function T5(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,r){return new T5(e,t,n,r)}function vI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function E5(e){if(typeof e=="function")return vI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===LS)return 11;if(e===zS)return 14}return 2}function $o(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ry(e,t,n,r,a,i){var s=2;if(r=e,typeof e=="function")vI(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case hd:return Ol(n.children,a,i,t);case PS:s=8,a|=8;break;case m1:return e=si(12,n,t,a|2),e.elementType=m1,e.lanes=i,e;case g1:return e=si(13,n,t,a),e.elementType=g1,e.lanes=i,e;case b1:return e=si(19,n,t,a),e.elementType=b1,e.lanes=i,e;case TD:return Kv(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $D:s=10;break e;case CD:s=9;break e;case LS:s=11;break e;case zS:s=14;break e;case ao:s=16,r=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=si(s,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Ol(e,t,n,r){return e=si(7,e,r,t),e.lanes=n,e}function Kv(e,t,n,r){return e=si(22,e,r,t),e.elementType=TD,e.lanes=n,e.stateNode={isHidden:!1},e}function _w(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function Aw(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function N5(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dw(0),this.expirationTimes=dw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dw(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function xI(e,t,n,r,a,i,s,o,l){return e=new N5(e,t,n,o,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=si(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rI(i),e}function _5(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vM(e){if(!e)return Ao;e=e._reactInternals;e:{if(bu(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var n=e.type;if(fa(n))return yF(e,n,t)}return t}function xM(e,t,n,r,a,i,s,o,l){return e=xI(n,r,!0,e,a,i,s,o,l),e.context=vM(null),n=e.current,r=Kr(),a=Io(n),i=Rs(r,a),i.callback=t!=null?t:null,ko(n,i,a),e.current.lanes=a,Dm(e,a,r),ma(e,r),e}function Xv(e,t,n,r){var a=t.current,i=Kr(),s=Io(a);return n=vM(n),t.context===null?t.context=n:t.pendingContext=n,t=Rs(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ko(a,t,s),e!==null&&(_i(e,a,s,i),Jb(e,a,s)),s}function Ly(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function KN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wI(e,t){KN(e,t),(e=e.alternate)&&KN(e,t)}function A5(){return null}var wM=typeof reportError=="function"?reportError:function(e){console.error(e)};function kI(e){this._internalRoot=e}Yv.prototype.render=kI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));Xv(e,t,null,null)};Yv.prototype.unmount=kI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hl(function(){Xv(null,e,null,null)}),t[Ls]=null}};function Yv(e){this._internalRoot=e}Yv.prototype.unstable_scheduleHydration=function(e){if(e){var t=JD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oo.length&&t!==0&&t<oo[n].priority;n++);oo.splice(n,0,e),n===0&&QD(e)}};function SI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function XN(){}function R5(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var c=Ly(s);i.call(c)}}var s=xM(t,r,e,0,null,!1,!1,"",XN);return e._reactRootContainer=s,e[Ls]=s.current,Jf(e.nodeType===8?e.parentNode:e),Hl(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var c=Ly(l);o.call(c)}}var l=xI(e,0,!1,null,null,!1,!1,"",XN);return e._reactRootContainer=l,e[Ls]=l.current,Jf(e.nodeType===8?e.parentNode:e),Hl(function(){Xv(t,l,n,r)}),l}function Zv(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var l=Ly(s);o.call(l)}}Xv(t,s,e,a)}else s=R5(n,t,e,a,r);return Ly(s)}XD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pf(t.pendingLanes);n!==0&&(US(t,n|1),ma(t,Sn()),!(vt&6)&&(Vd=Sn()+500,Ko()))}break;case 13:Hl(function(){var r=zs(e,1);if(r!==null){var a=Kr();_i(r,e,1,a)}}),wI(e,1)}};VS=function(e){if(e.tag===13){var t=zs(e,134217728);if(t!==null){var n=Kr();_i(t,e,134217728,n)}wI(e,134217728)}};YD=function(e){if(e.tag===13){var t=Io(e),n=zs(e,t);if(n!==null){var r=Kr();_i(n,e,t,r)}wI(e,t)}};JD=function(){return Nt};ZD=function(e,t){var n=Nt;try{return Nt=e,t()}finally{Nt=n}};T1=function(e,t,n){switch(t){case"input":if(x1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Uv(r);if(!a)throw Error(fe(90));ND(r),x1(r,a)}}}break;case"textarea":AD(e,n);break;case"select":t=n.value,t!=null&&Id(e,!!n.multiple,t,!1)}};LD=gI;zD=Hl;var D5={usingClientEntryPoint:!1,Events:[Mm,gd,Uv,OD,PD,gI]},rf={findFiberByHostInstance:El,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},F5={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:js.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=UD(e),e===null?null:e.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||A5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xb.isDisabled&&xb.supportsFiber)try{Lv=xb.inject(F5),ss=xb}catch(e){}}Ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D5;Ha.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!SI(t))throw Error(fe(200));return _5(e,t,null,n)};Ha.createRoot=function(e,t){if(!SI(e))throw Error(fe(299));var n=!1,r="",a=wM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=xI(e,1,!1,null,null,n,!1,r,a),e[Ls]=t.current,Jf(e.nodeType===8?e.parentNode:e),new kI(t)};Ha.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=UD(t),e=e===null?null:e.stateNode,e};Ha.flushSync=function(e){return Hl(e)};Ha.hydrate=function(e,t,n){if(!Jv(t))throw Error(fe(200));return Zv(null,e,t,!0,n)};Ha.hydrateRoot=function(e,t,n){if(!SI(e))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",s=wM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=xM(t,null,e,1,n!=null?n:null,a,!1,i,s),e[Ls]=t.current,Jf(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yv(t)};Ha.render=function(e,t,n){if(!Jv(t))throw Error(fe(200));return Zv(null,e,t,!1,n)};Ha.unmountComponentAtNode=function(e){if(!Jv(e))throw Error(fe(40));return e._reactRootContainer?(Hl(function(){Zv(null,null,e,!1,function(){e._reactRootContainer=null,e[Ls]=null})}),!0):!1};Ha.unstable_batchedUpdates=gI;Ha.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jv(n))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return Zv(e,t,n,!1,r)};Ha.version="18.2.0-next-9e3b772b8-20220608";function kM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kM)}catch(e){console.error(e)}}kM(),xD.exports=Ha;var II=xD.exports;const M5=Am(II);var SM,YN=II;SM=YN.createRoot,YN.hydrateRoot;function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},sk(e,t)}function Ro(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sk(e,t)}var IM={exports:{}},O5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",P5=O5,L5=P5;function $M(){}function CM(){}CM.resetWarningCache=$M;var z5=function(){function e(r,a,i,s,o,l){if(l!==L5){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:CM,resetWarningCache:$M};return n.PropTypes=n,n};IM.exports=z5();var B5=IM.exports;const JN=Am(B5);function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ya.apply(this,arguments)}function wb(e){return e.charAt(0)==="/"}function Rw(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}function W5(e,t){t===void 0&&(t="");var n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&wb(e),i=t&&wb(t),s=a||i;if(e&&wb(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var o;if(r.length){var l=r[r.length-1];o=l==="."||l===".."||l===""}else o=!1;for(var c=0,u=r.length;u>=0;u--){var d=r[u];d==="."?Rw(r,u):d===".."?(Rw(r,u),c++):c&&(Rw(r,u),c--)}if(!s)for(;c--;c)r.unshift("..");s&&r[0]!==""&&(!r[0]||!wb(r[0]))&&r.unshift("");var h=r.join("/");return o&&h.substr(-1)!=="/"&&(h+="/"),h}function ZN(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function ay(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(a,i){return ay(a,t[i])});if(typeof e=="object"||typeof t=="object"){var n=ZN(e),r=ZN(t);return n!==e||r!==t?ay(n,r):Object.keys(Object.assign({},e,t)).every(function(a){return ay(e[a],t[a])})}return!1}var U5=!0,Dw="Invariant failed";function yu(e,t){if(!e){if(U5)throw new Error(Dw);var n=typeof t=="function"?t():t,r=n?"".concat(Dw,": ").concat(n):Dw;throw new Error(r)}}function Mf(e){return e.charAt(0)==="/"?e:"/"+e}function QN(e){return e.charAt(0)==="/"?e.substr(1):e}function V5(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function TM(e,t){return V5(e,t)?e.substr(t.length):e}function EM(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function j5(e){var t=e||"/",n="",r="",a=t.indexOf("#");a!==-1&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return i!==-1&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:n==="?"?"":n,hash:r==="#"?"":r}}function ei(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function ca(e,t,n,r){var a;typeof e=="string"?(a=j5(e),a.state=t):(a=ya({},e),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",t!==void 0&&a.state===void 0&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(i){throw i instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):i}return n&&(a.key=n),r?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=W5(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function H5(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&ay(e.state,t.state)}function $I(){var e=null;function t(s){return e=s,function(){e===s&&(e=null)}}function n(s,o,l,c){if(e!=null){var u=typeof e=="function"?e(s,o):e;typeof u=="string"?typeof l=="function"?l(u,c):c(!0):c(u!==!1)}else c(!0)}var r=[];function a(s){var o=!0;function l(){o&&s.apply(void 0,arguments)}return r.push(l),function(){o=!1,r=r.filter(function(c){return c!==l})}}function i(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];r.forEach(function(c){return c.apply(void 0,o)})}return{setPrompt:t,confirmTransitionTo:n,appendListener:a,notifyListeners:i}}var NM=!!(typeof window<"u"&&window.document&&window.document.createElement);function _M(e,t){t(window.confirm(e))}function G5(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function q5(){return window.navigator.userAgent.indexOf("Trident")===-1}function K5(){return window.navigator.userAgent.indexOf("Firefox")===-1}function X5(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var e_="popstate",t_="hashchange";function n_(){try{return window.history.state||{}}catch(e){return{}}}function Y5(e){e===void 0&&(e={}),NM||yu(!1);var t=window.history,n=G5(),r=!q5(),a=e,i=a.forceRefresh,s=i===void 0?!1:i,o=a.getUserConfirmation,l=o===void 0?_M:o,c=a.keyLength,u=c===void 0?6:c,d=e.basename?EM(Mf(e.basename)):"";function h(W){var L=W||{},H=L.key,Z=L.state,J=window.location,ne=J.pathname,re=J.search,pe=J.hash,de=ne+re+pe;return d&&(de=TM(de,d)),ca(de,Z,H)}function p(){return Math.random().toString(36).substr(2,u)}var f=$I();function m(W){ya(O,W),O.length=t.length,f.notifyListeners(O.location,O.action)}function g(W){X5(W)||v(h(W.state))}function b(){v(h(n_()))}var y=!1;function v(W){if(y)y=!1,m();else{var L="POP";f.confirmTransitionTo(W,L,l,function(H){H?m({action:L,location:W}):x(W)})}}function x(W){var L=O.location,H=$.indexOf(L.key);H===-1&&(H=0);var Z=$.indexOf(W.key);Z===-1&&(Z=0);var J=H-Z;J&&(y=!0,D(J))}var w=h(n_()),$=[w.key];function C(W){return d+ei(W)}function T(W,L){var H="PUSH",Z=ca(W,L,p(),O.location);f.confirmTransitionTo(Z,H,l,function(J){if(J){var ne=C(Z),re=Z.key,pe=Z.state;if(n)if(t.pushState({key:re,state:pe},null,ne),s)window.location.href=ne;else{var de=$.indexOf(O.location.key),he=$.slice(0,de+1);he.push(Z.key),$=he,m({action:H,location:Z})}else window.location.href=ne}})}function A(W,L){var H="REPLACE",Z=ca(W,L,p(),O.location);f.confirmTransitionTo(Z,H,l,function(J){if(J){var ne=C(Z),re=Z.key,pe=Z.state;if(n)if(t.replaceState({key:re,state:pe},null,ne),s)window.location.replace(ne);else{var de=$.indexOf(O.location.key);de!==-1&&($[de]=Z.key),m({action:H,location:Z})}else window.location.replace(ne)}})}function D(W){t.go(W)}function N(){D(-1)}function I(){D(1)}var M=0;function P(W){M+=W,M===1&&W===1?(window.addEventListener(e_,g),r&&window.addEventListener(t_,b)):M===0&&(window.removeEventListener(e_,g),r&&window.removeEventListener(t_,b))}var z=!1;function j(W){W===void 0&&(W=!1);var L=f.setPrompt(W);return z||(P(1),z=!0),function(){return z&&(z=!1,P(-1)),L()}}function K(W){var L=f.appendListener(W);return P(1),function(){P(-1),L()}}var O={length:t.length,action:"POP",location:w,createHref:C,push:T,replace:A,go:D,goBack:N,goForward:I,block:j,listen:K};return O}var r_="hashchange",J5={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+QN(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:QN,decodePath:Mf},slash:{encodePath:Mf,decodePath:Mf}};function AM(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function af(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function Z5(e){window.location.hash=e}function Fw(e){window.location.replace(AM(window.location.href)+"#"+e)}function Q5(e){e===void 0&&(e={}),NM||yu(!1);var t=window.history;K5();var n=e,r=n.getUserConfirmation,a=r===void 0?_M:r,i=n.hashType,s=i===void 0?"slash":i,o=e.basename?EM(Mf(e.basename)):"",l=J5[s],c=l.encodePath,u=l.decodePath;function d(){var L=u(af());return o&&(L=TM(L,o)),ca(L)}var h=$I();function p(L){ya(W,L),W.length=t.length,h.notifyListeners(W.location,W.action)}var f=!1,m=null;function g(L,H){return L.pathname===H.pathname&&L.search===H.search&&L.hash===H.hash}function b(){var L=af(),H=c(L);if(L!==H)Fw(H);else{var Z=d(),J=W.location;if(!f&&g(J,Z)||m===ei(Z))return;m=null,y(Z)}}function y(L){if(f)f=!1,p();else{var H="POP";h.confirmTransitionTo(L,H,a,function(Z){Z?p({action:H,location:L}):v(L)})}}function v(L){var H=W.location,Z=C.lastIndexOf(ei(H));Z===-1&&(Z=0);var J=C.lastIndexOf(ei(L));J===-1&&(J=0);var ne=Z-J;ne&&(f=!0,N(ne))}var x=af(),w=c(x);x!==w&&Fw(w);var $=d(),C=[ei($)];function T(L){var H=document.querySelector("base"),Z="";return H&&H.getAttribute("href")&&(Z=AM(window.location.href)),Z+"#"+c(o+ei(L))}function A(L,H){var Z="PUSH",J=ca(L,void 0,void 0,W.location);h.confirmTransitionTo(J,Z,a,function(ne){if(ne){var re=ei(J),pe=c(o+re),de=af()!==pe;if(de){m=re,Z5(pe);var he=C.lastIndexOf(ei(W.location)),Ie=C.slice(0,he+1);Ie.push(re),C=Ie,p({action:Z,location:J})}else p()}})}function D(L,H){var Z="REPLACE",J=ca(L,void 0,void 0,W.location);h.confirmTransitionTo(J,Z,a,function(ne){if(ne){var re=ei(J),pe=c(o+re),de=af()!==pe;de&&(m=re,Fw(pe));var he=C.indexOf(ei(W.location));he!==-1&&(C[he]=re),p({action:Z,location:J})}})}function N(L){t.go(L)}function I(){N(-1)}function M(){N(1)}var P=0;function z(L){P+=L,P===1&&L===1?window.addEventListener(r_,b):P===0&&window.removeEventListener(r_,b)}var j=!1;function K(L){L===void 0&&(L=!1);var H=h.setPrompt(L);return j||(z(1),j=!0),function(){return j&&(j=!1,z(-1)),H()}}function O(L){var H=h.appendListener(L);return z(1),function(){z(-1),H()}}var W={length:t.length,action:"POP",location:$,createHref:T,push:A,replace:D,go:N,goBack:I,goForward:M,block:K,listen:O};return W}function a_(e,t,n){return Math.min(Math.max(e,t),n)}function eG(e){e===void 0&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,a=r===void 0?["/"]:r,i=t.initialIndex,s=i===void 0?0:i,o=t.keyLength,l=o===void 0?6:o,c=$I();function u(T){ya(C,T),C.length=C.entries.length,c.notifyListeners(C.location,C.action)}function d(){return Math.random().toString(36).substr(2,l)}var h=a_(s,0,a.length-1),p=a.map(function(T){return typeof T=="string"?ca(T,void 0,d()):ca(T,void 0,T.key||d())}),f=ei;function m(T,A){var D="PUSH",N=ca(T,A,d(),C.location);c.confirmTransitionTo(N,D,n,function(I){if(I){var M=C.index,P=M+1,z=C.entries.slice(0);z.length>P?z.splice(P,z.length-P,N):z.push(N),u({action:D,location:N,index:P,entries:z})}})}function g(T,A){var D="REPLACE",N=ca(T,A,d(),C.location);c.confirmTransitionTo(N,D,n,function(I){I&&(C.entries[C.index]=N,u({action:D,location:N}))})}function b(T){var A=a_(C.index+T,0,C.entries.length-1),D="POP",N=C.entries[A];c.confirmTransitionTo(N,D,n,function(I){I?u({action:D,location:N,index:A}):u()})}function y(){b(-1)}function v(){b(1)}function x(T){var A=C.index+T;return A>=0&&A<C.entries.length}function w(T){return T===void 0&&(T=!1),c.setPrompt(T)}function $(T){return c.appendListener(T)}var C={length:p.length,action:"POP",location:p[h],index:h,entries:p,createHref:f,push:m,replace:g,go:b,goBack:y,goForward:v,canGo:x,block:w,listen:$};return C}var xh={exports:{}},tG=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},zy=tG;xh.exports=FM;xh.exports.parse=CI;xh.exports.compile=rG;xh.exports.tokensToFunction=RM;xh.exports.tokensToRegExp=DM;var nG=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function CI(e,t){for(var n=[],r=0,a=0,i="",s=t&&t.delimiter||"/",o;(o=nG.exec(e))!=null;){var l=o[0],c=o[1],u=o.index;if(i+=e.slice(a,u),a=u+l.length,c){i+=c[1];continue}var d=e[a],h=o[2],p=o[3],f=o[4],m=o[5],g=o[6],b=o[7];i&&(n.push(i),i="");var y=h!=null&&d!=null&&d!==h,v=g==="+"||g==="*",x=g==="?"||g==="*",w=o[2]||s,$=f||m;n.push({name:p||r++,prefix:h||"",delimiter:w,optional:x,repeat:v,partial:y,asterisk:!!b,pattern:$?sG($):b?".*":"[^"+iy(w)+"]+?"})}return a<e.length&&(i+=e.substr(a)),i&&n.push(i),n}function rG(e,t){return RM(CI(e,t),t)}function aG(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function iG(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function RM(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",EI(t)));return function(a,i){for(var s="",o=a||{},l=i||{},c=l.pretty?aG:encodeURIComponent,u=0;u<e.length;u++){var d=e[u];if(typeof d=="string"){s+=d;continue}var h=o[d.name],p;if(h==null)if(d.optional){d.partial&&(s+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(zy(h)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(h.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(p=c(h[f]),!n[u].test(p))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(p)+"`");s+=(f===0?d.prefix:d.delimiter)+p}continue}if(p=d.asterisk?iG(h):c(h),!n[u].test(p))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+p+'"');s+=d.prefix+p}return s}}function iy(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function sG(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function TI(e,t){return e.keys=t,e}function EI(e){return e&&e.sensitive?"":"i"}function oG(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return TI(e,t)}function lG(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(FM(e[a],t,n).source);var i=new RegExp("(?:"+r.join("|")+")",EI(n));return TI(i,t)}function uG(e,t,n){return DM(CI(e,n),t,n)}function DM(e,t,n){zy(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,a=n.end!==!1,i="",s=0;s<e.length;s++){var o=e[s];if(typeof o=="string")i+=iy(o);else{var l=iy(o.prefix),c="(?:"+o.pattern+")";t.push(o),o.repeat&&(c+="(?:"+l+c+")*"),o.optional?o.partial?c=l+"("+c+")?":c="(?:"+l+"("+c+"))?":c=l+"("+c+")",i+=c}}var u=iy(n.delimiter||"/"),d=i.slice(-u.length)===u;return r||(i=(d?i.slice(0,-u.length):i)+"(?:"+u+"(?=$))?"),a?i+="$":i+=r&&d?"":"(?="+u+"|$)",TI(new RegExp("^"+i,EI(n)),t)}function FM(e,t,n){return zy(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?oG(e,t):zy(e)?lG(e,t,n):uG(e,t,n)}var cG=xh.exports;const MM=Am(cG);var zt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ur=typeof Symbol=="function"&&Symbol.for,NI=ur?Symbol.for("react.element"):60103,_I=ur?Symbol.for("react.portal"):60106,Qv=ur?Symbol.for("react.fragment"):60107,e0=ur?Symbol.for("react.strict_mode"):60108,t0=ur?Symbol.for("react.profiler"):60114,n0=ur?Symbol.for("react.provider"):60109,r0=ur?Symbol.for("react.context"):60110,AI=ur?Symbol.for("react.async_mode"):60111,a0=ur?Symbol.for("react.concurrent_mode"):60111,i0=ur?Symbol.for("react.forward_ref"):60112,s0=ur?Symbol.for("react.suspense"):60113,dG=ur?Symbol.for("react.suspense_list"):60120,o0=ur?Symbol.for("react.memo"):60115,l0=ur?Symbol.for("react.lazy"):60116,hG=ur?Symbol.for("react.block"):60121,pG=ur?Symbol.for("react.fundamental"):60117,fG=ur?Symbol.for("react.responder"):60118,mG=ur?Symbol.for("react.scope"):60119;function qa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case NI:switch(e=e.type,e){case AI:case a0:case Qv:case t0:case e0:case s0:return e;default:switch(e=e&&e.$$typeof,e){case r0:case i0:case l0:case o0:case n0:return e;default:return t}}case _I:return t}}}function OM(e){return qa(e)===a0}zt.AsyncMode=AI;zt.ConcurrentMode=a0;zt.ContextConsumer=r0;zt.ContextProvider=n0;zt.Element=NI;zt.ForwardRef=i0;zt.Fragment=Qv;zt.Lazy=l0;zt.Memo=o0;zt.Portal=_I;zt.Profiler=t0;zt.StrictMode=e0;zt.Suspense=s0;zt.isAsyncMode=function(e){return OM(e)||qa(e)===AI};zt.isConcurrentMode=OM;zt.isContextConsumer=function(e){return qa(e)===r0};zt.isContextProvider=function(e){return qa(e)===n0};zt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===NI};zt.isForwardRef=function(e){return qa(e)===i0};zt.isFragment=function(e){return qa(e)===Qv};zt.isLazy=function(e){return qa(e)===l0};zt.isMemo=function(e){return qa(e)===o0};zt.isPortal=function(e){return qa(e)===_I};zt.isProfiler=function(e){return qa(e)===t0};zt.isStrictMode=function(e){return qa(e)===e0};zt.isSuspense=function(e){return qa(e)===s0};zt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Qv||e===a0||e===t0||e===e0||e===s0||e===dG||typeof e=="object"&&e!==null&&(e.$$typeof===l0||e.$$typeof===o0||e.$$typeof===n0||e.$$typeof===r0||e.$$typeof===i0||e.$$typeof===pG||e.$$typeof===fG||e.$$typeof===mG||e.$$typeof===hG)};zt.typeOf=qa;function PM(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var LM={exports:{}},Dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cr=typeof Symbol=="function"&&Symbol.for,RI=cr?Symbol.for("react.element"):60103,DI=cr?Symbol.for("react.portal"):60106,u0=cr?Symbol.for("react.fragment"):60107,c0=cr?Symbol.for("react.strict_mode"):60108,d0=cr?Symbol.for("react.profiler"):60114,h0=cr?Symbol.for("react.provider"):60109,p0=cr?Symbol.for("react.context"):60110,FI=cr?Symbol.for("react.async_mode"):60111,f0=cr?Symbol.for("react.concurrent_mode"):60111,m0=cr?Symbol.for("react.forward_ref"):60112,g0=cr?Symbol.for("react.suspense"):60113,gG=cr?Symbol.for("react.suspense_list"):60120,b0=cr?Symbol.for("react.memo"):60115,y0=cr?Symbol.for("react.lazy"):60116,bG=cr?Symbol.for("react.block"):60121,yG=cr?Symbol.for("react.fundamental"):60117,vG=cr?Symbol.for("react.responder"):60118,xG=cr?Symbol.for("react.scope"):60119;function Ka(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RI:switch(e=e.type,e){case FI:case f0:case u0:case d0:case c0:case g0:return e;default:switch(e=e&&e.$$typeof,e){case p0:case m0:case y0:case b0:case h0:return e;default:return t}}case DI:return t}}}function zM(e){return Ka(e)===f0}Dt.AsyncMode=FI;Dt.ConcurrentMode=f0;Dt.ContextConsumer=p0;Dt.ContextProvider=h0;Dt.Element=RI;Dt.ForwardRef=m0;Dt.Fragment=u0;Dt.Lazy=y0;Dt.Memo=b0;Dt.Portal=DI;Dt.Profiler=d0;Dt.StrictMode=c0;Dt.Suspense=g0;Dt.isAsyncMode=function(e){return zM(e)||Ka(e)===FI};Dt.isConcurrentMode=zM;Dt.isContextConsumer=function(e){return Ka(e)===p0};Dt.isContextProvider=function(e){return Ka(e)===h0};Dt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RI};Dt.isForwardRef=function(e){return Ka(e)===m0};Dt.isFragment=function(e){return Ka(e)===u0};Dt.isLazy=function(e){return Ka(e)===y0};Dt.isMemo=function(e){return Ka(e)===b0};Dt.isPortal=function(e){return Ka(e)===DI};Dt.isProfiler=function(e){return Ka(e)===d0};Dt.isStrictMode=function(e){return Ka(e)===c0};Dt.isSuspense=function(e){return Ka(e)===g0};Dt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===u0||e===f0||e===d0||e===c0||e===g0||e===gG||typeof e=="object"&&e!==null&&(e.$$typeof===y0||e.$$typeof===b0||e.$$typeof===h0||e.$$typeof===p0||e.$$typeof===m0||e.$$typeof===yG||e.$$typeof===vG||e.$$typeof===xG||e.$$typeof===bG)};Dt.typeOf=Ka;LM.exports=Dt;var wG=LM.exports,MI=wG,kG={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},SG={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},IG={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},BM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OI={};OI[MI.ForwardRef]=IG;OI[MI.Memo]=BM;function i_(e){return MI.isMemo(e)?BM:OI[e.$$typeof]||kG}var $G=Object.defineProperty,CG=Object.getOwnPropertyNames,s_=Object.getOwnPropertySymbols,TG=Object.getOwnPropertyDescriptor,EG=Object.getPrototypeOf,o_=Object.prototype;function WM(e,t,n){if(typeof t!="string"){if(o_){var r=EG(t);r&&r!==o_&&WM(e,r,n)}var a=CG(t);s_&&(a=a.concat(s_(t)));for(var i=i_(e),s=i_(t),o=0;o<a.length;++o){var l=a[o];if(!SG[l]&&!(n&&n[l])&&!(s&&s[l])&&!(i&&i[l])){var c=TG(t,l);try{$G(e,l,c)}catch(u){}}}}return e}var NG=WM;const _G=Am(NG);var Mw=1073741823,l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function AG(){var e="__global_unique_id__";return l_[e]=(l_[e]||0)+1}function RG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function DG(e){var t=[];return{on:function(r){t.push(r)},off:function(r){t=t.filter(function(a){return a!==r})},get:function(){return e},set:function(r,a){e=r,t.forEach(function(i){return i(e,a)})}}}function FG(e){return Array.isArray(e)?e[0]:e}function MG(e,t){var n,r,a="__create-react-context-"+AG()+"__",i=function(o){Ro(l,o);function l(){for(var u,d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return u=o.call.apply(o,[this].concat(h))||this,u.emitter=DG(u.props.value),u}var c=l.prototype;return c.getChildContext=function(){var d;return d={},d[a]=this.emitter,d},c.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var h=this.props.value,p=d.value,f;RG(h,p)?f=0:(f=typeof t=="function"?t(h,p):Mw,f|=0,f!==0&&this.emitter.set(d.value,f))}},c.render=function(){return this.props.children},l}(le.Component);i.childContextTypes=(n={},n[a]=JN.object.isRequired,n);var s=function(o){Ro(l,o);function l(){for(var u,d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return u=o.call.apply(o,[this].concat(h))||this,u.observedBits=void 0,u.state={value:u.getValue()},u.onUpdate=function(f,m){var g=u.observedBits|0;g&m&&u.setState({value:u.getValue()})},u}var c=l.prototype;return c.componentWillReceiveProps=function(d){var h=d.observedBits;this.observedBits=h==null?Mw:h},c.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d==null?Mw:d},c.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},c.getValue=function(){return this.context[a]?this.context[a].get():e},c.render=function(){return FG(this.props.children)(this.state.value)},l}(le.Component);return s.contextTypes=(r={},r[a]=JN.object,r),{Provider:i,Consumer:s}}var OG=le.createContext||MG,UM=function(t){var n=OG();return n.displayName=t,n},PG=UM("Router-History"),jd=UM("Router"),Pm=function(e){Ro(t,e),t.computeRootMatch=function(a){return{path:"/",url:"/",params:{},isExact:a==="/"}};function t(r){var a;return a=e.call(this,r)||this,a.state={location:r.history.location},a._isMounted=!1,a._pendingLocation=null,r.staticContext||(a.unlisten=r.history.listen(function(i){a._pendingLocation=i})),a}var n=t.prototype;return n.componentDidMount=function(){var a=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(i){a._isMounted&&a.setState({location:i})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return le.createElement(jd.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},le.createElement(PG.Provider,{children:this.props.children||null,value:this.props.history}))},t}(le.Component);le.Component;var LG=function(e){Ro(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(a){this.props.onUpdate&&this.props.onUpdate.call(this,this,a)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(le.Component),Ow={},zG=1e4,u_=0;function BG(e){if(Ow[e])return Ow[e];var t=MM.compile(e);return u_<zG&&(Ow[e]=t,u_++),t}function c_(e,t){return e===void 0&&(e="/"),t===void 0&&(t={}),e==="/"?e:BG(e)(t,{pretty:!0})}function WG(e){var t=e.computedMatch,n=e.to,r=e.push,a=r===void 0?!1:r;return le.createElement(jd.Consumer,null,function(i){i||yu(!1);var s=i.history,o=i.staticContext,l=a?s.push:s.replace,c=ca(t?typeof n=="string"?c_(n,t.params):ya({},n,{pathname:c_(n.pathname,t.params)}):n);return o?(l(c),null):le.createElement(LG,{onMount:function(){l(c)},onUpdate:function(d,h){var p=ca(h.to);H5(p,ya({},c,{key:p.key}))||l(c)},to:n})})}var d_={},UG=1e4,h_=0;function VG(e,t){var n=""+t.end+t.strict+t.sensitive,r=d_[n]||(d_[n]={});if(r[e])return r[e];var a=[],i=MM(e,a,t),s={regexp:i,keys:a};return h_<UG&&(r[e]=s,h_++),s}function Gl(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,i=a===void 0?!1:a,s=n.strict,o=s===void 0?!1:s,l=n.sensitive,c=l===void 0?!1:l,u=[].concat(r);return u.reduce(function(d,h){if(!h&&h!=="")return null;if(d)return d;var p=VG(h,{end:i,strict:o,sensitive:c}),f=p.regexp,m=p.keys,g=f.exec(e);if(!g)return null;var b=g[0],y=g.slice(1),v=e===b;return i&&!v?null:{path:h,url:h==="/"&&b===""?"/":b,isExact:v,params:m.reduce(function(x,w,$){return x[w.name]=y[$],x},{})}},null)}function jG(e){return le.Children.count(e)===0}var xl=function(e){Ro(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.render=function(){var a=this;return le.createElement(jd.Consumer,null,function(i){i||yu(!1);var s=a.props.location||i.location,o=a.props.computedMatch?a.props.computedMatch:a.props.path?Gl(s.pathname,a.props):i.match,l=ya({},i,{location:s,match:o}),c=a.props,u=c.children,d=c.component,h=c.render;return Array.isArray(u)&&jG(u)&&(u=null),le.createElement(jd.Provider,{value:l},l.match?u?typeof u=="function"?u(l):u:d?le.createElement(d,l):h?h(l):null:typeof u=="function"?u(l):null)})},t}(le.Component);function PI(e){return e.charAt(0)==="/"?e:"/"+e}function HG(e,t){return e?ya({},t,{pathname:PI(e)+t.pathname}):t}function GG(e,t){if(!e)return t;var n=PI(e);return t.pathname.indexOf(n)!==0?t:ya({},t,{pathname:t.pathname.substr(n.length)})}function p_(e){return typeof e=="string"?e:ei(e)}function Pw(e){return function(){yu(!1)}}function f_(){}le.Component;le.Component;function qG(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(a){var i=a.wrappedComponentRef,s=PM(a,["wrappedComponentRef"]);return le.createElement(jd.Consumer,null,function(o){return o||yu(!1),le.createElement(e,ya({},s,o,{ref:i}))})};return n.displayName=t,n.WrappedComponent=e,_G(n,e)}le.useContext;const KG="modulepreload",XG=function(e){return"/"+e},m_={},Da=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=XG(i),i in m_)return;m_[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!r)for(let u=a.length-1;u>=0;u--){const d=a[u];if(d.href===i&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(i,'"]').concat(o)))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":KG,s||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error("Unable to preload CSS for ".concat(i))))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},nd={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let rd,VM,v0,jM=!1,By=!1,LI=!1,Aa=!1,g_=null,ok=!1;const YG={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ql=(e,t="")=>()=>{},b_="http://www.w3.org/1999/xlink",y_={},JG="http://www.w3.org/2000/svg",ZG="http://www.w3.org/1999/xhtml",QG=e=>e!=null,zI=e=>(e=typeof e,e==="object"||e==="function");function e8(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const Ae=(e,t,...n)=>{let r=null,a=null,i=null,s=!1,o=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)r=d[h],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!zI(r))&&(r=String(r)),s&&o?l[l.length-1].$text$+=r:l.push(s?Wy(null,r):r),o=s)};if(c(n),t){t.key&&(a=t.key),t.name&&(i=t.name);{const d=t.className||t.class;d&&(t.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,n8);const u=Wy(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=a,u.$name$=i,u},Wy=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},Qn={},t8=e=>e&&e.$tag$===Qn,n8={forEach:(e,t)=>e.map(v_).forEach(t),map:(e,t)=>e.map(v_).map(t).map(r8)},v_=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),r8=e=>{if(typeof e.vtag=="function"){const n=Object.assign({},e.vattrs);return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),Ae(e.vtag,n,...e.vchildren||[])}const t=Wy(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},a8=e=>tO.map(t=>t(e)).find(t=>!!t),i8=e=>tO.push(e),s8=e=>wh(e).$modeName$,o8=(e,t)=>e!=null&&!zI(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,l8=e=>e,Tt=(e,t,n)=>{const r=l8(e);return{emit:a=>u8(r,t,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:a})}},u8=(e,t,n)=>{const r=vr.ce(t,n);return e.dispatchEvent(r),r},x_=new WeakMap,c8=(e,t,n)=>{let r=jy.get(e);P8&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,jy.set(e,r)},d8=(e,t,n,r)=>{var a;let i=HM(t,n);const s=jy.get(i);if(e=e.nodeType===11?e:Ai,s)if(typeof s=="string"){e=e.head||e;let o=x_.get(e),l;if(o||x_.set(e,o=new Set),!o.has(i)){{l=Ai.createElement("style"),l.innerHTML=s;const c=(a=vr.$nonce$)!==null&&a!==void 0?a:e8(Ai);c!=null&&l.setAttribute("nonce",c),e.insertBefore(l,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},h8=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,a=ql("attachStyles",t.$tagName$),i=d8(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);r&10&&(n["s-sc"]=i,n.classList.add(i+"-h"),r&2&&n.classList.add(i+"-s")),a()},HM=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),w_=(e,t,n,r,a,i)=>{if(n!==r){let s=$_(e,t),o=t.toLowerCase();if(t==="class"){const l=e.classList,c=k_(n),u=k_(r);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(t==="style"){for(const l in n)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!n||r[l]!==n[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):$_(x0,o)?t=o.slice(2):t=o[2]+t.slice(3),n&&vr.rel(e,t,n,!1),r&&vr.ael(e,t,r,!1);else{const l=zI(r);if((s||l&&r!==null)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{const u=r==null?"":r;t==="list"?s=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch(u){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,c=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(b_,t):e.removeAttribute(t)):(!s||i&4||a)&&!l&&(r=r===!0?"":r,c?e.setAttributeNS(b_,t,r):e.setAttribute(t,r))}}},p8=/\s/,k_=e=>e?e.split(p8):[],GM=(e,t,n,r)=>{const a=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||y_,s=t.$attrs$||y_;for(r in i)r in s||w_(a,r,i[r],void 0,n,t.$flags$);for(r in s)w_(a,r,i[r],s[r],n,t.$flags$)},Uy=(e,t,n,r)=>{const a=t.$children$[n];let i=0,s,o,l;if(jM||(LI=!0,a.$tag$==="slot"&&(rd&&r.classList.add(rd+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)s=a.$elm$=Ai.createTextNode(a.$text$);else if(a.$flags$&1)s=a.$elm$=Ai.createTextNode("");else{if(Aa||(Aa=a.$tag$==="svg"),s=a.$elm$=Ai.createElementNS(Aa?JG:ZG,a.$flags$&2?"slot-fb":a.$tag$),Aa&&a.$tag$==="foreignObject"&&(Aa=!1),GM(null,a,Aa),QG(rd)&&s["s-si"]!==rd&&s.classList.add(s["s-si"]=rd),a.$children$)for(i=0;i<a.$children$.length;++i)o=Uy(e,a,i,s),o&&s.appendChild(o);a.$tag$==="svg"?Aa=!1:s.tagName==="foreignObject"&&(Aa=!0)}return s["s-hn"]=v0,a.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=VM,s["s-sn"]=a.$name$||"",l=e&&e.$children$&&e.$children$[n],l&&l.$tag$===a.$tag$&&e.$elm$&&sm(e.$elm$,!1)),s},sm=(e,t)=>{vr.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const a=n[r];a["s-hn"]!==v0&&a["s-ol"]&&(XM(a).insertBefore(a,BI(a)),a["s-ol"].remove(),a["s-ol"]=void 0,LI=!0),t&&sm(a,t)}vr.$flags$&=-2},qM=(e,t,n,r,a,i)=>{let s=e["s-cr"]&&e["s-cr"].parentNode||e,o;for(s.shadowRoot&&s.tagName===v0&&(s=s.shadowRoot);a<=i;++a)r[a]&&(o=Uy(null,n,a,e),o&&(r[a].$elm$=o,s.insertBefore(o,BI(t))))},KM=(e,t,n)=>{for(let r=t;r<=n;++r){const a=e[r];if(a){const i=a.$elm$;ZM(a),i&&(By=!0,i["s-ol"]?i["s-ol"].remove():sm(i,!0),i.remove())}}},f8=(e,t,n,r)=>{let a=0,i=0,s=0,o=0,l=t.length-1,c=t[0],u=t[l],d=r.length-1,h=r[0],p=r[d],f,m;for(;a<=l&&i<=d;)if(c==null)c=t[++a];else if(u==null)u=t[--l];else if(h==null)h=r[++i];else if(p==null)p=r[--d];else if(kb(c,h))ad(c,h),c=t[++a],h=r[++i];else if(kb(u,p))ad(u,p),u=t[--l],p=r[--d];else if(kb(c,p))(c.$tag$==="slot"||p.$tag$==="slot")&&sm(c.$elm$.parentNode,!1),ad(c,p),e.insertBefore(c.$elm$,u.$elm$.nextSibling),c=t[++a],p=r[--d];else if(kb(u,h))(c.$tag$==="slot"||p.$tag$==="slot")&&sm(u.$elm$.parentNode,!1),ad(u,h),e.insertBefore(u.$elm$,c.$elm$),u=t[--l],h=r[++i];else{for(s=-1,o=a;o<=l;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===h.$key$){s=o;break}s>=0?(m=t[s],m.$tag$!==h.$tag$?f=Uy(t&&t[i],n,s,e):(ad(m,h),t[s]=void 0,f=m.$elm$),h=r[++i]):(f=Uy(t&&t[i],n,i,e),h=r[++i]),f&&XM(c.$elm$).insertBefore(f,BI(c.$elm$))}a>l?qM(e,r[d+1]==null?null:r[d+1].$elm$,n,r,i,d):i>d&&KM(t,a,l)},kb=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,BI=e=>e&&e["s-ol"]||e,XM=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ad=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$,i=t.$tag$,s=t.$text$;let o;s===null?(Aa=i==="svg"?!0:i==="foreignObject"?!1:Aa,i==="slot"||GM(e,t,Aa),r!==null&&a!==null?f8(n,r,t,a):a!==null?(e.$text$!==null&&(n.textContent=""),qM(n,null,t,a,0,a.length-1)):r!==null&&KM(r,0,r.length-1),Aa&&i==="svg"&&(Aa=!1)):(o=n["s-cr"])?o.parentNode.textContent=s:e.$text$!==s&&(n.data=s)},YM=e=>{const t=e.childNodes;let n,r,a,i,s,o;for(r=0,a=t.length;r<a;r++)if(n=t[r],n.nodeType===1){if(n["s-sr"]){for(s=n["s-sn"],n.hidden=!1,i=0;i<a;i++)if(o=t[i].nodeType,t[i]["s-hn"]!==n["s-hn"]||s!==""){if(o===1&&s===t[i].getAttribute("slot")){n.hidden=!0;break}}else if(o===1||o===3&&t[i].textContent.trim()!==""){n.hidden=!0;break}}YM(n)}},Ii=[],JM=e=>{let t,n,r,a,i,s,o=0;const l=e.childNodes,c=l.length;for(;o<c;o++){if(t=l[o],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,a=t["s-sn"],s=r.length-1;s>=0;s--)n=r[s],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==t["s-hn"]&&(S_(n,a)?(i=Ii.find(u=>u.$nodeToRelocate$===n),By=!0,n["s-sn"]=n["s-sn"]||a,i?i.$slotRefNode$=t:Ii.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&Ii.map(u=>{S_(u.$nodeToRelocate$,n["s-sn"])&&(i=Ii.find(d=>d.$nodeToRelocate$===n),i&&!u.$slotRefNode$&&(u.$slotRefNode$=i.$slotRefNode$))})):Ii.some(u=>u.$nodeToRelocate$===n)||Ii.push({$nodeToRelocate$:n}));t.nodeType===1&&JM(t)}},S_=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",ZM=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(ZM)},m8=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||Wy(null,null),i=t8(t)?t:Ae(null,null,t);v0=n.tagName,r.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},r.$attrsToReflect$.map(([s,o])=>i.$attrs$[o]=n[s])),i.$tag$=null,i.$flags$|=4,e.$vnode$=i,i.$elm$=a.$elm$=n.shadowRoot||n,rd=n["s-sc"],VM=n["s-cr"],jM=(r.$flags$&1)!==0,By=!1,ad(a,i);{if(vr.$flags$|=1,LI){JM(i.$elm$);let s,o,l,c,u,d,h=0;for(;h<Ii.length;h++)s=Ii[h],o=s.$nodeToRelocate$,o["s-ol"]||(l=Ai.createTextNode(""),l["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=l,o));for(h=0;h<Ii.length;h++)if(s=Ii[h],o=s.$nodeToRelocate$,s.$slotRefNode$){for(c=s.$slotRefNode$.parentNode,u=s.$slotRefNode$.nextSibling,l=o["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===o["s-sn"]&&c===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){u=d;break}(!u&&c!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),c.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}By&&YM(i.$elm$),vr.$flags$&=-2,Ii.length=0}},g8=(e,t)=>{},WI=(e,t)=>(e.$flags$|=16,g8(e,e.$ancestorComponent$),Li(()=>b8(e,t))),b8=(e,t)=>{const n=e.$hostElement$,r=ql("scheduleUpdate",e.$cmpMeta$.$tagName$),a=n;let i;return t?i=_d(a,"componentWillLoad"):i=_d(a,"componentWillUpdate"),i=I_(i,()=>_d(a,"componentWillRender")),r(),I_(i,()=>v8(e,a,t))},I_=(e,t)=>y8(e)?e.then(t):t(),y8=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",v8=async(e,t,n)=>{const r=e.$hostElement$,a=ql("update",e.$cmpMeta$.$tagName$);r["s-rc"],n&&h8(e);const i=ql("render",e.$cmpMeta$.$tagName$);x8(e,t,r),i(),a(),w8(e)},x8=(e,t,n)=>{try{g_=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(nd.hasRenderFn||nd.reflect)&&(nd.vdomRender||nd.reflect)&&(nd.hydrateServerSide||m8(e,t))}catch(o){Lm(o,e.$hostElement$)}return g_=null,null},w8=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=ql("postUpdate",t),a=n;e.$ancestorComponent$,_d(a,"componentDidRender"),e.$flags$&64?(_d(a,"componentDidUpdate"),r()):(e.$flags$|=64,_d(a,"componentDidLoad"),r())},Vy=e=>{{const t=wh(e),n=t.$hostElement$.isConnected;return n&&(t.$flags$&18)===2&&WI(t,!1),n}},_d=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){Lm(r)}},k8=(e,t)=>wh(e).$instanceValues$.get(t),S8=(e,t,n,r)=>{const a=wh(e),i=e,s=a.$instanceValues$.get(t),o=a.$flags$,l=i;n=o8(n,r.$members$[t][0]);const c=Number.isNaN(s)&&Number.isNaN(n);if(n!==s&&!c){a.$instanceValues$.set(t,n);{if(r.$watchers$&&o&128){const d=r.$watchers$[t];d&&d.map(h=>{try{l[h](n,s,t)}catch(p){Lm(p,i)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,s,t)===!1)return;WI(a,!1)}}}},I8=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),a=e.prototype;r.map(([i,[s]])=>{(s&31||s&32)&&Object.defineProperty(a,i,{get(){return k8(this,i)},set(o){S8(this,i,o,t)},configurable:!0,enumerable:!0})});{const i=new Map;a.attributeChangedCallback=function(s,o,l){vr.jmp(()=>{const c=i.get(s);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(a.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},e.observedAttributes=r.filter(([s,o])=>o[0]&15).map(([s,o])=>{const l=o[1]||s;return i.set(l,s),o[0]&512&&t.$attrsToReflect$.push([s,l]),l})}}return e},$8=async(e,t,n,r,a)=>{if(!(t.$flags$&32)&&(t.$flags$|=32,a=e.constructor,customElements.whenDefined(n.$tagName$).then(()=>t.$flags$|=128),a.style)){let s=a.style;typeof s!="string"&&(s=s[t.$modeName$=a8(e)]);const o=HM(n,t.$modeName$);if(!jy.has(o)){const l=ql("registerStyles",n.$tagName$);c8(o,s,!!(n.$flags$&1)),l()}}t.$ancestorComponent$,(()=>WI(t,!0))()},C8=e=>{},T8=e=>{if(!(vr.$flags$&1)){const t=wh(e),n=t.$cmpMeta$,r=ql("connectedCallback",n.$tagName$);t.$flags$&1?(QM(e,t,n.$listeners$),C8(t.$lazyInstance$)):(t.$flags$|=1,n.$flags$&12&&E8(e),n.$members$&&Object.entries(n.$members$).map(([a,[i]])=>{if(i&31&&e.hasOwnProperty(a)){const s=e[a];delete e[a],e[a]=s}}),$8(e,t,n)),r()}},E8=e=>{const t=e["s-cr"]=Ai.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},N8=e=>{if(!(vr.$flags$&1)){const t=wh(e);t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0)}},Pn=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){D8(this,n)},connectedCallback(){T8(this),r&&r.call(this)},disconnectedCallback(){N8(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),e.is=n.$tagName$,I8(e,n)},QM=(e,t,n,r)=>{n&&n.map(([a,i,s])=>{const o=A8(e,a),l=_8(t,s),c=R8(a);vr.ael(o,i,l,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>vr.rel(o,i,l,c))})},_8=(e,t)=>n=>{try{nd.lazyLoad||e.$hostElement$[t](n)}catch(r){Lm(r)}},A8=(e,t)=>t&4?Ai:t&8?x0:t&16?Ai.body:e,R8=e=>M8?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,eO=new WeakMap,wh=e=>eO.get(e),D8=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return QM(e,n,t.$listeners$),eO.set(e,n)},$_=(e,t)=>t in e,Lm=(e,t)=>(0,console.error)(e,t),jy=new Map,tO=[],x0=typeof window<"u"?window:{},Ai=x0.document||{head:{}},Ln=x0.HTMLElement||class{},vr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},F8=e=>{Object.assign(vr,e)},M8=(()=>{let e=!1;try{Ai.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(t){}return e})(),O8=e=>Promise.resolve(e),P8=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(e){}return!1})(),lk=[],nO=[],rO=(e,t)=>n=>{e.push(n),ok||(ok=!0,t&&vr.$flags$&4?L8(uk):vr.raf(uk))},C_=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Lm(n)}e.length=0},uk=()=>{C_(lk),C_(nO),(ok=lk.length>0)&&vr.raf(uk)},L8=e=>O8().then(e),om=rO(lk,!1),Li=rO(nO,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yt=typeof window<"u"?window:void 0,Lw=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Hd=(e,t)=>{e.componentOnReady?e.componentOnReady().then(n=>t(n)):Hr(()=>t(e))},aO=e=>e.componentOnReady!==void 0,zm=(e,t=[])=>{const n={};return t.forEach(r=>{e.hasAttribute(r)&&(e.getAttribute(r)!==null&&(n[r]=e.getAttribute(r)),e.removeAttribute(r))}),n},z8=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],iO=(e,t)=>{let n=z8;return t&&t.length>0&&(n=n.filter(r=>!t.includes(r))),zm(e,n)},ck=(e,t,n,r)=>{var a;if(typeof window<"u"){const i=window,s=(a=i==null?void 0:i.Ionic)===null||a===void 0?void 0:a.config;if(s){const o=s.get("_ael");if(o)return o(e,t,n,r);if(s._ael)return s._ael(e,t,n,r)}}return e.addEventListener(t,n,r)},dk=(e,t,n,r)=>{var a;if(typeof window<"u"){const i=window,s=(a=i==null?void 0:i.Ionic)===null||a===void 0?void 0:a.config;if(s){const o=s.get("_rel");if(o)return o(e,t,n,r);if(s._rel)return s._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)},Do=(e,t=e)=>e.shadowRoot||t,Hr=e=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(e):typeof requestAnimationFrame=="function"?requestAnimationFrame(e):setTimeout(e),B8=e=>!!e.shadowRoot&&!!e.attachShadow,W8=e=>{if(e.focus(),e.classList.contains("ion-focusable")){const t=e.closest("ion-app");t&&t.setFocus([e])}},Gd=(e,t,n)=>Math.max(e,Math.min(t,n)),aa=(e,t)=>{if(!e){const n="ASSERT: "+t;console.error(n);debugger;throw new Error(n)}},b3e=e=>e.timeStamp||Date.now(),y3e=e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const n=t[0];return{x:n.clientX,y:n.clientY}}if(e.pageX!==void 0)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}},sO=(e,t)=>{if(e!=null||(e={}),t!=null||(t={}),e===t)return!0;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!(r in t)||e[r]!==t[r])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let zw;const U8=e=>(e.forEach(t=>{for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];if(n==="easing"){const a="animation-timing-function";t[a]=r,delete t[n]}else{const a=V8(n);a!==n&&(t[a]=r,delete t[n])}}}),e),V8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UI=e=>{if(zw===void 0){const t=e.style.animationName!==void 0,n=e.style.webkitAnimationName!==void 0;zw=!t&&n?"-webkit-":""}return zw},nn=(e,t,n)=>{const r=t.startsWith("animation")?UI(e):"";e.style.setProperty(r+t,n)},vi=(e,t)=>{const n=t.startsWith("animation")?UI(e):"";e.style.removeProperty(n+t)},j8=(e,t)=>{let n;const r={passive:!0},a=()=>{n&&n()},i=s=>{e===s.target&&(a(),t(s))};return e&&(e.addEventListener("webkitAnimationEnd",i,r),e.addEventListener("animationend",i,r),n=()=>{e.removeEventListener("webkitAnimationEnd",i,r),e.removeEventListener("animationend",i,r)}),a},H8=(e=[])=>e.map(t=>{const n=t.offset,r=[];for(const a in t)t.hasOwnProperty(a)&&a!=="offset"&&r.push("".concat(a,": ").concat(t[a],";"));return"".concat(n*100,"% { ").concat(r.join(" ")," }")}).join(" "),T_=[],G8=e=>{let t=T_.indexOf(e);return t<0&&(t=T_.push(e)-1),"ion-animation-".concat(t)},q8=e=>{const t=e.getRootNode!==void 0?e.getRootNode():e;return t.head||t},K8=(e,t,n)=>{var r;const a=q8(n),i=UI(n),s=a.querySelector("#"+e);if(s)return s;const o=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement("style");return o.id=e,o.textContent="@".concat(i,"keyframes ").concat(e," { ").concat(t," } @").concat(i,"keyframes ").concat(e,"-alt { ").concat(t," }"),a.appendChild(o),o},Sb=(e=[],t)=>{if(t!==void 0){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},$n=e=>{let t,n,r,a,i,s,o=[],l=[],c=[],u=!1,d,h={},p=[],f=[],m={},g=0,b=!1,y=!1,v,x,w,$,C=!0,T=!1,A=!0,D,N,I=!1;const M=e,P=[],z=[],j=[],K=[],O=[],W=[],L=[],H=[],Z=[],J=[],ne=typeof AnimationEffect=="function"||yt!==void 0&&typeof yt.AnimationEffect=="function",re=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&ne,pe=100,de=()=>J,he=ae=>(K.forEach(ye=>{ye.destroy(ae)}),Ie(ae),j.length=0,K.length=0,o.length=0,st(),u=!1,A=!0,N),Ie=ae=>{Ge(),ae&&Ke()},Fe=()=>{b=!1,y=!1,A=!0,x=void 0,w=void 0,$=void 0,g=0,T=!1,C=!0,I=!1},ze=()=>g!==0&&!I,Pe=(ae,ye)=>((ye!=null&&ye.oneTimeCallback?z:P).push({c:ae,o:ye}),N),st=()=>(P.length=0,z.length=0,N),Ge=()=>{if(re)J.forEach(ae=>{ae.cancel()}),J.length=0;else{const ae=j.slice();Hr(()=>{ae.forEach(ye=>{vi(ye,"animation-name"),vi(ye,"animation-duration"),vi(ye,"animation-timing-function"),vi(ye,"animation-iteration-count"),vi(ye,"animation-delay"),vi(ye,"animation-play-state"),vi(ye,"animation-fill-mode"),vi(ye,"animation-direction")})})}},Ke=()=>{O.forEach(ae=>{ae!=null&&ae.parentNode&&ae.parentNode.removeChild(ae)}),O.length=0},We=ae=>(W.push(ae),N),ot=ae=>(L.push(ae),N),gt=ae=>(H.push(ae),N),Ft=ae=>(Z.push(ae),N),Ct=ae=>(l=Sb(l,ae),N),yn=ae=>(c=Sb(c,ae),N),Xt=(ae={})=>(h=ae,N),vn=(ae=[])=>{for(const ye of ae)h[ye]="";return N},hr=ae=>(p=Sb(p,ae),N),Bt=ae=>(f=Sb(f,ae),N),Bn=(ae={})=>(m=ae,N),Yt=(ae=[])=>{for(const ye of ae)m[ye]="";return N},un=()=>i!==void 0?i:d?d.getFill():"both",pr=()=>x!==void 0?x:s!==void 0?s:d?d.getDirection():"normal",Ia=()=>b?"linear":r!==void 0?r:d?d.getEasing():"linear",Mt=()=>y?0:w!==void 0?w:n!==void 0?n:d?d.getDuration():0,tr=()=>a!==void 0?a:d?d.getIterations():1,Wn=()=>$!==void 0?$:t!==void 0?t:d?d.getDelay():0,$a=()=>o,Ot=ae=>(s=ae,wt(!0),N),ji=ae=>(i=ae,wt(!0),N),Ca=ae=>(t=ae,wt(!0),N),Hi=ae=>(r=ae,wt(!0),N),mi=ae=>(!re&&ae===0&&(ae=1),n=ae,wt(!0),N),Ta=ae=>(a=ae,wt(!0),N),gi=ae=>(d=ae,N),Je=ae=>{if(ae!=null)if(ae.nodeType===1)j.push(ae);else if(ae.length>=0)for(let ye=0;ye<ae.length;ye++)j.push(ae[ye]);else console.error("Invalid addElement value");return N},bt=ae=>{if(ae!=null)if(Array.isArray(ae))for(const ye of ae)ye.parent(N),K.push(ye);else ae.parent(N),K.push(ae);return N},be=ae=>{const ye=o!==ae;return o=ae,ye&&xe(o),N},xe=ae=>{re?de().forEach(ye=>{if(ye.effect.setKeyframes)ye.effect.setKeyframes(ae);else{const De=new KeyframeEffect(ye.effect.target,ae,ye.effect.getTiming());ye.effect=De}}):ve()},te=()=>{W.forEach(wn=>wn()),L.forEach(wn=>wn());const ae=l,ye=c,De=h;j.forEach(wn=>{const Un=wn.classList;ae.forEach(Vn=>Un.add(Vn)),ye.forEach(Vn=>Un.remove(Vn));for(const Vn in De)De.hasOwnProperty(Vn)&&nn(wn,Vn,De[Vn])})},ce=()=>{Ki(),H.forEach(Un=>Un()),Z.forEach(Un=>Un());const ae=C?1:0,ye=p,De=f,wn=m;j.forEach(Un=>{const Vn=Un.classList;ye.forEach(bi=>Vn.add(bi)),De.forEach(bi=>Vn.remove(bi));for(const bi in wn)wn.hasOwnProperty(bi)&&nn(Un,bi,wn[bi])}),P.forEach(Un=>Un.c(ae,N)),z.forEach(Un=>Un.c(ae,N)),z.length=0,A=!0,C&&(T=!0),C=!0},Te=()=>{g!==0&&(g--,g===0&&(ce(),d&&d.animationFinish()))},ve=(ae=!0)=>{Ke();const ye=U8(o);j.forEach(De=>{if(ye.length>0){const wn=H8(ye);D=e!==void 0?e:G8(wn);const Un=K8(D,wn,De);O.push(Un),nn(De,"animation-duration","".concat(Mt(),"ms")),nn(De,"animation-timing-function",Ia()),nn(De,"animation-delay","".concat(Wn(),"ms")),nn(De,"animation-fill-mode",un()),nn(De,"animation-direction",pr());const Vn=tr()===1/0?"infinite":tr().toString();nn(De,"animation-iteration-count",Vn),nn(De,"animation-play-state","paused"),ae&&nn(De,"animation-name","".concat(Un.id,"-alt")),Hr(()=>{nn(De,"animation-name",Un.id||null)})}})},kt=()=>{j.forEach(ae=>{const ye=ae.animate(o,{id:M,delay:Wn(),duration:Mt(),easing:Ia(),iterations:tr(),fill:un(),direction:pr()});ye.pause(),J.push(ye)}),J.length>0&&(J[0].onfinish=()=>{Te()})},xt=(ae=!0)=>{te(),o.length>0&&(re?kt():ve(ae)),u=!0},Ve=ae=>{if(ae=Math.min(Math.max(ae,0),.9999),re)J.forEach(ye=>{ye.currentTime=ye.effect.getComputedTiming().delay+Mt()*ae,ye.pause()});else{const ye="-".concat(Mt()*ae,"ms");j.forEach(De=>{o.length>0&&(nn(De,"animation-delay",ye),nn(De,"animation-play-state","paused"))})}},Le=ae=>{J.forEach(ye=>{ye.effect.updateTiming({delay:Wn(),duration:Mt(),easing:Ia(),iterations:tr(),fill:un(),direction:pr()})}),ae!==void 0&&Ve(ae)},Wt=(ae=!0,ye)=>{Hr(()=>{j.forEach(De=>{nn(De,"animation-name",D||null),nn(De,"animation-duration","".concat(Mt(),"ms")),nn(De,"animation-timing-function",Ia()),nn(De,"animation-delay",ye!==void 0?"-".concat(ye*Mt(),"ms"):"".concat(Wn(),"ms")),nn(De,"animation-fill-mode",un()||null),nn(De,"animation-direction",pr()||null);const wn=tr()===1/0?"infinite":tr().toString();nn(De,"animation-iteration-count",wn),ae&&nn(De,"animation-name","".concat(D,"-alt")),Hr(()=>{nn(De,"animation-name",D||null)})})})},wt=(ae=!1,ye=!0,De)=>(ae&&K.forEach(wn=>{wn.update(ae,ye,De)}),re?Le(De):Wt(ye,De),N),kr=(ae=!1,ye)=>(K.forEach(De=>{De.progressStart(ae,ye)}),qi(),b=ae,u||xt(),wt(!1,!0,ye),N),Vr=ae=>(K.forEach(ye=>{ye.progressStep(ae)}),Ve(ae),N),Gi=(ae,ye,De)=>(b=!1,K.forEach(wn=>{wn.progressEnd(ae,ye,De)}),De!==void 0&&(w=De),T=!1,C=!0,ae===0?(x=pr()==="reverse"?"normal":"reverse",x==="reverse"&&(C=!1),re?(wt(),Ve(1-ye)):($=(1-ye)*Mt()*-1,wt(!1,!1))):ae===1&&(re?(wt(),Ve(ye)):($=ye*Mt()*-1,wt(!1,!1))),ae!==void 0&&(Pe(()=>{w=void 0,x=void 0,$=void 0},{oneTimeCallback:!0}),d||pl()),N),qi=()=>{u&&(re?J.forEach(ae=>{ae.pause()}):j.forEach(ae=>{nn(ae,"animation-play-state","paused")}),I=!0)},xn=()=>(K.forEach(ae=>{ae.pause()}),qi(),N),Ya=()=>{v=void 0,Te()},Ki=()=>{v&&clearTimeout(v)},qp=()=>{if(Ki(),Hr(()=>{j.forEach(ae=>{o.length>0&&nn(ae,"animation-play-state","running")})}),o.length===0||j.length===0)Te();else{const ae=Wn()||0,ye=Mt()||0,De=tr()||1;isFinite(De)&&(v=setTimeout(Ya,ae+ye*De+pe)),j8(j[0],()=>{Ki(),Hr(()=>{Zs(),Hr(Te)})})}},Zs=()=>{j.forEach(ae=>{vi(ae,"animation-duration"),vi(ae,"animation-delay"),vi(ae,"animation-play-state")})},Kp=()=>{J.forEach(ae=>{ae.play()}),(o.length===0||j.length===0)&&Te()},Xp=()=>{re?(Ve(0),Le()):Wt()},pl=ae=>new Promise(ye=>{ae!=null&&ae.sync&&(y=!0,Pe(()=>y=!1,{oneTimeCallback:!0})),u||xt(),T&&(Xp(),T=!1),A&&(g=K.length+1,A=!1),Pe(()=>ye(),{oneTimeCallback:!0}),K.forEach(De=>{De.play()}),re?Kp():qp(),I=!1}),fl=()=>{K.forEach(ae=>{ae.stop()}),u&&(Ge(),u=!1),Fe()},Jg=(ae,ye)=>{const De=o[0];return De!==void 0&&(De.offset===void 0||De.offset===0)?De[ae]=ye:o=[{offset:0,[ae]:ye},...o],N};return N={parentAnimation:d,elements:j,childAnimations:K,id:M,animationFinish:Te,from:Jg,to:(ae,ye)=>{const De=o[o.length-1];return De!==void 0&&(De.offset===void 0||De.offset===1)?De[ae]=ye:o=[...o,{offset:1,[ae]:ye}],N},fromTo:(ae,ye,De)=>Jg(ae,ye).to(ae,De),parent:gi,play:pl,pause:xn,stop:fl,destroy:he,keyframes:be,addAnimation:bt,addElement:Je,update:wt,fill:ji,direction:Ot,iterations:Ta,duration:mi,easing:Hi,delay:Ca,getWebAnimations:de,getKeyframes:$a,getFill:un,getDirection:pr,getDelay:Wn,getIterations:tr,getEasing:Ia,getDuration:Mt,afterAddRead:gt,afterAddWrite:Ft,afterClearStyles:Yt,afterStyles:Bn,afterRemoveClass:Bt,afterAddClass:hr,beforeAddRead:We,beforeAddWrite:ot,beforeClearStyles:vn,beforeStyles:Xt,beforeRemoveClass:yn,beforeAddClass:Ct,onFinish:Pe,isRunning:ze,progressStart:kr,progressStep:Vr,progressEnd:Gi}},X8="ionViewWillEnter",Y8="ionViewDidEnter",oO="ionViewWillLeave",lO="ionViewDidLeave",Bw="ionViewWillUnload",J8=()=>Da(()=>import("./ios.transition-a72f49f6.js"),[]),Z8=()=>Da(()=>import("./md.transition-84ea2ef1.js"),[]),uO=e=>new Promise((t,n)=>{Li(()=>{Q8(e),eq(e).then(r=>{r.animation&&r.animation.destroy(),E_(e),t(r)},r=>{E_(e),n(r)})})}),Q8=e=>{const t=e.enteringEl,n=e.leavingEl;oq(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),hk(t,!1),t.style.setProperty("pointer-events","none"),n&&(hk(n,!1),n.style.setProperty("pointer-events","none"))},eq=async e=>{const t=await tq(e);return t&&YG.isBrowser?nq(t,e):rq(e)},E_=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),n!==void 0&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},tq=async e=>!e.leavingEl||!e.animated||e.duration===0?void 0:e.animationBuilder?e.animationBuilder:e.mode==="ios"?(await J8()).iosTransitionAnimation:(await Z8()).mdTransitionAnimation,nq=async(e,t)=>{await cO(t,!0);const n=e(t.baseEl,t);dO(t.enteringEl,t.leavingEl);const r=await iq(n,t);return t.progressCallback&&t.progressCallback(void 0),r&&hO(t.enteringEl,t.leavingEl),{hasCompleted:r,animation:n}},rq=async e=>{const t=e.enteringEl,n=e.leavingEl;return await cO(e,!1),dO(t,n),hO(t,n),{hasCompleted:!0}},cO=async(e,t)=>{(e.deepWait!==void 0?e.deepWait:t)&&await Promise.all([Hy(e.enteringEl),Hy(e.leavingEl)]),await aq(e.viewIsReady,e.enteringEl)},aq=async(e,t)=>{e&&await e(t)},iq=(e,t)=>{const n=t.progressCallback,r=new Promise(a=>{e.onFinish(i=>a(i===1))});return n?(e.progressStart(!0),n(e)):e.play(),r},dO=(e,t)=>{Ts(t,oO),Ts(e,X8)},hO=(e,t)=>{Ts(e,Y8),Ts(t,lO)},Ts=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},sq=()=>new Promise(e=>Hr(()=>Hr(()=>e()))),Hy=async e=>{const t=e;if(t){if(t.componentOnReady!=null){if(await t.componentOnReady()!=null)return}else if(t.__registerHost!=null){await new Promise(r=>Hr(r));return}await Promise.all(Array.from(t.children).map(Hy))}},hk=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},oq=(e,t,n)=>{e!==void 0&&(e.style.zIndex=n==="back"?"99":"101"),t!==void 0&&(t.style.zIndex="100")},v3e=e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qd=(e,t,n,r,a)=>uq(e[1],t[1],n[1],r[1],a).map(i=>lq(e[0],t[0],n[0],r[0],i)),lq=(e,t,n,r,a)=>{const i=3*t*Math.pow(a-1,2),s=-3*n*a+3*n+r*a,o=e*Math.pow(a-1,3);return a*(i+a*s)-o},uq=(e,t,n,r,a)=>(e-=a,t-=a,n-=a,r-=a,dq(r-3*n+3*t-e,3*n-6*t+3*e,3*t-3*e,e).filter(s=>s>=0&&s<=1)),cq=(e,t,n)=>{const r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]},dq=(e,t,n,r)=>{if(e===0)return cq(t,n,r);t/=e,n/=e,r/=e;const a=(3*n-t*t)/3,i=(2*t*t*t-9*t*n+27*r)/27;if(a===0)return[Math.pow(-i,1/3)];if(i===0)return[Math.sqrt(-a),-Math.sqrt(-a)];const s=Math.pow(i/2,2)+Math.pow(a/3,3);if(s===0)return[Math.pow(i/2,1/2)-t/3];if(s>0)return[Math.pow(-(i/2)+Math.sqrt(s),1/3)-Math.pow(i/2+Math.sqrt(s),1/3)-t/3];const o=Math.sqrt(Math.pow(-(a/3),3)),l=Math.acos(-(i/(2*Math.sqrt(Math.pow(-(a/3),3))))),c=2*Math.pow(o,1/3);return[c*Math.cos(l/3)-t/3,c*Math.cos((l+2*Math.PI)/3)-t/3,c*Math.cos((l+4*Math.PI)/3)-t/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class hq{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(t){var n;return new pq(this,this.newID(),t.name,(n=t.priority)!==null&&n!==void 0?n:0,!!t.disableScroll)}createBlocker(t={}){return new fq(this,this.newID(),t.disable,!!t.disableScroll)}start(t,n,r){return this.canStart(t)?(this.requestedStart.set(n,r),!0):(this.requestedStart.delete(n),!1)}capture(t,n,r){if(!this.start(t,n,r))return!1;const a=this.requestedStart;let i=-1e4;if(a.forEach(s=>{i=Math.max(i,s)}),i===r){this.capturedId=n,a.clear();const s=new CustomEvent("ionGestureCaptured",{detail:{gestureName:t}});return document.dispatchEvent(s),!0}return a.delete(n),!1}release(t){this.requestedStart.delete(t),this.capturedId===t&&(this.capturedId=void 0)}disableGesture(t,n){let r=this.disabledGestures.get(t);r===void 0&&(r=new Set,this.disabledGestures.set(t,r)),r.add(n)}enableGesture(t,n){const r=this.disabledGestures.get(t);r!==void 0&&r.delete(n)}disableScroll(t){this.disabledScroll.add(t),this.disabledScroll.size===1&&document.body.classList.add(N_)}enableScroll(t){this.disabledScroll.delete(t),this.disabledScroll.size===0&&document.body.classList.remove(N_)}canStart(t){return!(this.capturedId!==void 0||this.isDisabled(t))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(t){const n=this.disabledGestures.get(t);return!!(n&&n.size>0)}newID(){return this.gestureId++,this.gestureId}}class pq{constructor(t,n,r,a,i){this.id=n,this.name=r,this.disableScroll=i,this.priority=a*1e6+n,this.ctrl=t}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class fq{constructor(t,n,r,a){this.id=n,this.disable=r,this.disableScroll=a,this.ctrl=t}block(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.disableGesture(t,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.enableGesture(t,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const N_="backdrop-no-scroll",VI=new hq;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ml=(e,t,n,r)=>{const a=mq(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let i,s;return e.__zone_symbol__addEventListener?(i="__zone_symbol__addEventListener",s="__zone_symbol__removeEventListener"):(i="addEventListener",s="removeEventListener"),e[i](t,n,a),()=>{e[s](t,n,a)}},mq=e=>{if(Ib===void 0)try{const t=Object.defineProperty({},"passive",{get:()=>{Ib=!0}});e.addEventListener("optsTest",()=>{},t)}catch(t){Ib=!1}return!!Ib};let Ib;const gq=2e3,bq=(e,t,n,r,a)=>{let i,s,o,l,c,u,d,h=0;const p=$=>{h=Date.now()+gq,t($)&&(!s&&n&&(s=ml(e,"touchmove",n,a)),o||(o=ml($.target,"touchend",m,a)),l||(l=ml($.target,"touchcancel",m,a)))},f=$=>{h>Date.now()||t($)&&(!u&&n&&(u=ml(__(e),"mousemove",n,a)),d||(d=ml(__(e),"mouseup",g,a)))},m=$=>{b(),r&&r($)},g=$=>{y(),r&&r($)},b=()=>{s&&s(),o&&o(),l&&l(),s=o=l=void 0},y=()=>{u&&u(),d&&d(),u=d=void 0},v=()=>{b(),y()},x=($=!0)=>{$?(i||(i=ml(e,"touchstart",p,a)),c||(c=ml(e,"mousedown",f,a))):(i&&i(),c&&c(),i=c=void 0,v())};return{enable:x,stop:v,destroy:()=>{x(!1),r=n=t=void 0}}},__=e=>e instanceof Document?e:e.ownerDocument,yq=(e,t,n)=>{const r=n*(Math.PI/180),a=e==="x",i=Math.cos(r),s=t*t;let o=0,l=0,c=!1,u=0;return{start(d,h){o=d,l=h,u=0,c=!0},detect(d,h){if(!c)return!1;const p=d-o,f=h-l,m=p*p+f*f;if(m<s)return!1;const g=Math.sqrt(m),b=(a?p:f)/g;return b>i?u=1:b<-i?u=-1:u=0,c=!1,!0},isGesture(){return u!==0},getDirection(){return u}}},jI=e=>{let t=!1,n=!1,r=!0,a=!1;const i=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),s=i.canStart,o=i.onWillStart,l=i.onStart,c=i.onEnd,u=i.notCaptured,d=i.onMove,h=i.threshold,p=i.passive,f=i.blurOnStart,m={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},g=yq(i.direction,i.threshold,i.maxAngle),b=VI.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),y=I=>{const M=fO(I);return n||!r||(pO(I,m),m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime=M,m.velocityX=m.velocityY=m.deltaX=m.deltaY=0,m.event=I,s&&s(m)===!1)||(b.release(),!b.start())?!1:(n=!0,h===0?w():(g.start(m.startX,m.startY),!0))},v=I=>{if(t){!a&&r&&(a=!0,Ww(m,I),requestAnimationFrame(x));return}Ww(m,I),g.detect(m.currentX,m.currentY)&&(!g.isGesture()||!w())&&N()},x=()=>{t&&(a=!1,d&&d(m))},w=()=>b.capture()?(t=!0,r=!1,m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime,o?o(m).then(C):C(),!0):!1,$=()=>{if(typeof document<"u"){const I=document.activeElement;I!=null&&I.blur&&I.blur()}},C=()=>{f&&$(),l&&l(m),r=!0},T=()=>{t=!1,n=!1,a=!1,r=!0,b.release()},A=I=>{const M=t,P=r;if(T(),!!P){if(Ww(m,I),M){c&&c(m);return}u&&u(m)}},D=bq(i.el,y,v,A,{capture:!1,passive:p}),N=()=>{T(),D.stop(),u&&u(m)};return{enable(I=!0){I||(t&&A(void 0),T()),D.enable(I)},destroy(){b.destroy(),D.destroy()}}},Ww=(e,t)=>{if(!t)return;const n=e.currentX,r=e.currentY,a=e.currentTime;pO(t,e);const i=e.currentX,s=e.currentY,l=(e.currentTime=fO(t))-a;if(l>0&&l<100){const c=(i-n)/l,u=(s-r)/l;e.velocityX=c*.7+e.velocityX*.3,e.velocityY=u*.7+e.velocityY*.3}e.deltaX=i-e.startX,e.deltaY=s-e.startY,e.event=t},pO=(e,t)=>{let n=0,r=0;if(e){const a=e.changedTouches;if(a&&a.length>0){const i=a[0];n=i.clientX,r=i.clientY}else e.pageX!==void 0&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},fO=e=>e.timeStamp||Date.now(),vq=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:VI,createGesture:jI},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class xq{constructor(){this.m=new Map}reset(t){this.m=new Map(Object.entries(t))}get(t,n){const r=this.m.get(t);return r!==void 0?r:n}getBoolean(t,n=!1){const r=this.m.get(t);return r===void 0?n:typeof r=="string"?r==="true":!!r}getNumber(t,n){const r=parseFloat(this.m.get(t));return isNaN(r)?n!==void 0?n:NaN:r}set(t,n){this.m.set(t,n)}}const qt=new xq,wq=e=>{try{const t=e.sessionStorage.getItem(mO);return t!==null?JSON.parse(t):{}}catch(t){return{}}},kq=(e,t)=>{try{e.sessionStorage.setItem(mO,JSON.stringify(t))}catch(n){return}},Sq=e=>{const t={};return e.location.search.slice(1).split("&").map(n=>n.split("=")).map(([n,r])=>[decodeURIComponent(n),decodeURIComponent(r)]).filter(([n])=>Iq(n,A_)).map(([n,r])=>[n.slice(A_.length),r]).forEach(([n,r])=>{t[n]=r}),t},Iq=(e,t)=>e.substr(0,t.length)===t,A_="ionic:",mO="ionic-persist-config",$q=e=>gO(e),po=(e,t)=>(typeof e=="string"&&(t=e,e=void 0),$q(e).includes(t)),gO=(e=window)=>{if(typeof e>"u")return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return t==null&&(t=e.Ionic.platforms=Cq(e),t.forEach(n=>e.document.documentElement.classList.add("plt-".concat(n)))),t},Cq=e=>{const t=qt.get("platform");return Object.keys(R_).filter(n=>{const r=t==null?void 0:t[n];return typeof r=="function"?r(e):R_[n](e)})},Tq=e=>w0(e)&&!yO(e),HI=e=>!!(Kl(e,/iPad/i)||Kl(e,/Macintosh/i)&&w0(e)),Eq=e=>Kl(e,/iPhone/i),Nq=e=>Kl(e,/iPhone|iPod/i)||HI(e),bO=e=>Kl(e,/android|sink/i),_q=e=>bO(e)&&!Kl(e,/mobile/i),Aq=e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return r>390&&r<520&&a>620&&a<800},Rq=e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return HI(e)||_q(e)||r>460&&r<820&&a>780&&a<1400},w0=e=>Oq(e,"(any-pointer:coarse)"),Dq=e=>!w0(e),yO=e=>vO(e)||xO(e),vO=e=>!!(e.cordova||e.phonegap||e.PhoneGap),xO=e=>{const t=e.Capacitor;return!!(t!=null&&t.isNative)},Fq=e=>Kl(e,/electron/i),Mq=e=>{var t;return!!(!((t=e.matchMedia)===null||t===void 0)&&t.call(e,"(display-mode: standalone)").matches||e.navigator.standalone)},Kl=(e,t)=>t.test(e.navigator.userAgent),Oq=(e,t)=>{var n;return(n=e.matchMedia)===null||n===void 0?void 0:n.call(e,t).matches},R_={ipad:HI,iphone:Eq,ios:Nq,android:bO,phablet:Aq,tablet:Rq,cordova:vO,capacitor:xO,electron:Fq,pwa:Mq,mobile:w0,mobileweb:Tq,desktop:Dq,hybrid:yO};let id;const Pt=e=>e&&s8(e)||id,Pq=(e={})=>{if(typeof window>"u")return;const t=window.document,n=window,r=n.Ionic=n.Ionic||{},a={};e._ael&&(a.ael=e._ael),e._rel&&(a.rel=e._rel),e._ce&&(a.ce=e._ce),F8(a);const i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wq(n)),{persistConfig:!1}),r.config),Sq(n)),e);qt.reset(i),qt.getBoolean("persistConfig")&&kq(n,i),gO(n),r.config=qt,r.mode=id=qt.get("mode",t.documentElement.getAttribute("mode")||(po(n,"ios")?"ios":"md")),qt.set("mode",id),t.documentElement.setAttribute("mode",id),t.documentElement.classList.add(id),qt.getBoolean("_testing")&&qt.set("animated",!1);const s=l=>{var c;return(c=l.tagName)===null||c===void 0?void 0:c.startsWith("ION-")},o=l=>["ios","md"].includes(l);i8(l=>{for(;l;){const c=l.mode||l.getAttribute("mode");if(c){if(o(c))return c;s(l)&&console.warn('Invalid ionic mode: "'+c+'", expected: "ios" or "md"')}l=l.parentElement}return id})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Lq=()=>{document.addEventListener("backbutton",()=>{})},zq=()=>{const e=document;let t=!1;e.addEventListener("backbutton",()=>{if(t)return;let n=0,r=[];const a=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(o,l){r.push({priority:o,handler:l,id:n++})}}});e.dispatchEvent(a);const i=async o=>{try{if(o!=null&&o.handler){const l=o.handler(s);l!=null&&await l}}catch(l){console.error(l)}},s=()=>{if(r.length>0){let o={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};r.forEach(l=>{l.priority>=o.priority&&(o=l)}),t=!0,r=r.filter(l=>l.id!==o.id),i(o).then(()=>t=!1)}};s()})},wO=100,Bq=99,Wq=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:Bq,OVERLAY_BACK_BUTTON_PRIORITY:wO,blockHardwareBackButton:Lq,startHardwareBackButton:zq},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const GI=async(e,t,n,r,a,i)=>{var s;if(e)return e.attachViewToDom(t,n,a,r);if(!i&&typeof n!="string"&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const o=typeof n=="string"?(s=t.ownerDocument)===null||s===void 0?void 0:s.createElement(n):n;return r&&r.forEach(l=>o.classList.add(l)),a&&Object.assign(o,a),t.appendChild(o),await new Promise(l=>Hd(o,l)),o},kO=(e,t)=>{if(t){if(e){const n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()},Uq=()=>{let e,t;return{attachViewToDom:async(a,i,s={},o=[])=>{var l,c;if(e=a,i){const d=typeof i=="string"?(l=e.ownerDocument)===null||l===void 0?void 0:l.createElement(i):i;o.forEach(h=>d.classList.add(h)),Object.assign(d,s),e.appendChild(d),await new Promise(h=>Hd(d,h))}else if(e.children.length>0&&(e.tagName==="ION-MODAL"||e.tagName==="ION-POPOVER")&&!e.children[0].classList.contains("ion-delegate-host")){const h=(c=e.ownerDocument)===null||c===void 0?void 0:c.createElement("div");h.classList.add("ion-delegate-host"),o.forEach(p=>h.classList.add(p)),h.append(...e.children),e.appendChild(h)}const u=document.querySelector("ion-app")||document.body;return t=document.createComment("ionic teleport"),e.parentNode.insertBefore(t,e),u.appendChild(e),e},removeViewFromDom:()=>(e&&t&&(t.parentNode.insertBefore(e,t),t.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ad=(e,...t)=>console.warn("[Ionic Warning]: ".concat(e),...t),Vq=(e,...t)=>console.error("<".concat(e.tagName.toLowerCase(),"> must be used inside ").concat(t.join(" or "),"."));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let pk=0,jq=0;const Gy=new WeakMap,Hq=e=>{typeof document<"u"&&Xq(document);const t=pk++;e.overlayIndex=t},Gq=e=>(e.hasAttribute("id")||(e.id="ion-overlay-".concat(++jq)),e.id),lm='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',D_=(e,t)=>{let n=e.querySelector(lm);const r=n==null?void 0:n.shadowRoot;r&&(n=r.querySelector(lm)||n),n?W8(n):t.focus()},qq=e=>e.classList.contains("overlay-hidden"),F_=(e,t)=>{const n=Array.from(e.querySelectorAll(lm));let r=n.length>0?n[n.length-1]:null;const a=r==null?void 0:r.shadowRoot;a&&(r=a.querySelector(lm)||r),r?r.focus():t.focus()},Kq=(e,t)=>{const n=fk(t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),r=e.target;if(!n||!r||n.classList.contains("ion-disable-focus-trap"))return;const a=()=>{if(n===r)n.lastFocus=void 0;else{const s=Do(n);if(!s.contains(r))return;const o=s.querySelector(".ion-overlay-wrapper");if(!o)return;if(o.contains(r)||r===s.querySelector("ion-backdrop"))n.lastFocus=r;else{const l=n.lastFocus;D_(o,n),l===t.activeElement&&F_(o,n),n.lastFocus=t.activeElement}}},i=()=>{if(n.contains(r))n.lastFocus=r;else{const s=n.lastFocus;D_(n,n),s===t.activeElement&&F_(n,n),n.lastFocus=t.activeElement}};n.shadowRoot?i():a()},Xq=e=>{pk===0&&(pk=1,e.addEventListener("focus",t=>{Kq(t,e)},!0),e.addEventListener("ionBackButton",t=>{const n=fk(e);n!=null&&n.backdropDismiss&&t.detail.register(wO,()=>n.dismiss(void 0,mk))}),e.addEventListener("keydown",t=>{if(t.key==="Escape"){const n=fk(e);n!=null&&n.backdropDismiss&&n.dismiss(void 0,mk)}}))},Yq=(e,t)=>(t===void 0&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter(n=>n.overlayIndex>0)),fk=(e,t,n)=>{const r=Yq(e,t).filter(a=>!qq(a));return n===void 0?r[r.length-1]:r.find(a=>a.id===n)},SO=(e=!1)=>{const n=eK(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");n&&(e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden"))},Jq=async(e,t,n,r,a)=>{var i,s;if(e.presented)return;SO(!0),e.presented=!0,e.willPresent.emit(),(i=e.willPresentShorthand)===null||i===void 0||i.emit();const o=Pt(e),l=e.enterAnimation?e.enterAnimation:qt.get(t,o==="ios"?n:r);await IO(e,l,e.el,a)&&(e.didPresent.emit(),(s=e.didPresentShorthand)===null||s===void 0||s.emit()),e.el.tagName!=="ION-TOAST"&&Zq(e.el),e.keyboardClose&&(document.activeElement===null||!e.el.contains(document.activeElement))&&e.el.focus()},Zq=async e=>{let t=document.activeElement;if(!t)return;const n=t==null?void 0:t.shadowRoot;n&&(t=n.querySelector(lm)||t),await e.onDidDismiss(),t.focus()},Qq=async(e,t,n,r,a,i,s)=>{var o,l;if(!e.presented)return!1;SO(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n}),(o=e.willDismissShorthand)===null||o===void 0||o.emit({data:t,role:n});const c=Pt(e),u=e.leaveAnimation?e.leaveAnimation:qt.get(r,c==="ios"?a:i);n!==Of&&await IO(e,u,e.el,s),e.didDismiss.emit({data:t,role:n}),(l=e.didDismissShorthand)===null||l===void 0||l.emit({data:t,role:n}),Gy.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),e.el.lastFocus!==void 0&&(e.el.lastFocus=void 0)}catch(c){console.error(c)}return e.el.remove(),!0},eK=e=>e.querySelector("ion-app")||e.body,IO=async(e,t,n,r)=>{n.classList.remove("overlay-hidden");const a=e.el,i=t(a,r);(!e.animated||!qt.getBoolean("animated",!0))&&i.duration(0),e.keyboardClose&&i.beforeAddWrite(()=>{const o=n.ownerDocument.activeElement;o!=null&&o.matches("input,ion-input, ion-textarea")&&o.blur()});const s=Gy.get(e)||[];return Gy.set(e,[...s,i]),await i.play(),!0},M_=(e,t)=>{let n;const r=new Promise(a=>n=a);return tK(e,t,a=>{n(a.detail)}),r},tK=(e,t,n)=>{const r=a=>{dk(e,t,r),n(a)};ck(e,t,r)},mk="backdrop",Of="gesture",nK=()=>{let e;const t=()=>{e&&(e(),e=void 0)};return{addClickListener:(r,a)=>{t();const i=a!==void 0?document.getElementById(a):null;if(!i){Ad('A trigger element with the ID "'.concat(a,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.'),r);return}e=((o,l)=>{const c=()=>{l.present()};return o.addEventListener("click",c),()=>{o.removeEventListener("click",c)}})(i,r)},removeClickListener:t}};function Ar(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const rK=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",aK=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",iK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=Tt(this,"ionBackdropTap",7),this.blocker=VI.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(t){this.emitTap(t)}emitTap(t){this.stopPropagation&&(t.preventDefault(),t.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const t=Pt(this);return Ae(Qn,{tabindex:"-1","aria-hidden":"true",class:{[t]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:rK,md:aK}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function sK(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(t=>{switch(t){case"ion-backdrop":customElements.get(t)||customElements.define(t,iK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ri=(e,t)=>t.closest(e)!==null,Xo=(e,t)=>typeof e=="string"&&e.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(e)]:!0},t):t,oK=e=>e!==void 0?(Array.isArray(e)?e:e.split(" ")).filter(n=>n!=null).map(n=>n.trim()).filter(n=>n!==""):[],lK=e=>{const t={};return oK(e).forEach(n=>t[n]=!0),t},uK=/^[a-z][a-z0-9+\-.]*:/,$O=async(e,t,n,r)=>{if(e!=null&&e[0]!=="#"&&!uK.test(e)){const a=document.querySelector("ion-router");if(a)return t!=null&&t.preventDefault(),a.push(e,n,r)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cK=":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:16px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(30px);backdrop-filter:saturate(180%) blur(30px)}}",dK=":host{--background:transparent;--color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:16px;padding-bottom:16px}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}",hK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.translucent=!1}render(){const t=Pt(this);return Ae(Qn,{class:Xo(this.color,{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[t]:!0})},Ae("slot",null))}static get style(){return{ios:cK,md:dK}}},[33,"ion-card-header",{color:[513],translucent:[4]}]);function pK(){if(typeof customElements>"u")return;["ion-card-header"].forEach(t=>{switch(t){case"ion-card-header":customElements.get(t)||customElements.define(t,hK);break}})}const fK=pK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mK=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:28px;font-weight:700;line-height:1.2}",gK=":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, #262626);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;line-height:1.2}",bK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const t=Pt(this);return Ae(Qn,{role:"heading","aria-level":"2",class:Xo(this.color,{"ion-inherit-color":!0,[t]:!0})},Ae("slot",null))}static get style(){return{ios:mK,md:gK}}},[33,"ion-card-title",{color:[513]}]);function yK(){if(typeof customElements>"u")return;["ion-card-title"].forEach(t=>{switch(t){case"ion-card-title":customElements.get(t)||customElements.define(t,bK);break}})}const vK=yK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xK=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",wK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(t,n){return new Promise(r=>{om(()=>{const a=this.el.getBoundingClientRect(),i=a.width,s=a.height,o=Math.sqrt(i*i+s*s),l=Math.max(s,i),c=this.unbounded?l:o+SK,u=Math.floor(l*IK),d=c/u;let h=t-a.left,p=n-a.top;this.unbounded&&(h=i*.5,p=s*.5);const f=h-u*.5,m=p-u*.5,g=i*.5-h,b=s*.5-p;Li(()=>{const y=document.createElement("div");y.classList.add("ripple-effect");const v=y.style;v.top=m+"px",v.left=f+"px",v.width=v.height=u+"px",v.setProperty("--final-scale","".concat(d)),v.setProperty("--translate-end","".concat(g,"px, ").concat(b,"px")),(this.el.shadowRoot||this.el).appendChild(y),setTimeout(()=>{r(()=>{kK(y)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const t=Pt(this);return Ae(Qn,{role:"presentation",class:{[t]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return xK}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),kK=e=>{e.classList.add("fade-out"),setTimeout(()=>{e.remove()},200)},SK=10,IK=.5;function CO(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(t=>{switch(t){case"ion-ripple-effect":customElements.get(t)||customElements.define(t,wK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $K={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},CK=e=>{if(e===void 0||e==="")return!0;if(window.matchMedia){const t=$K[e];return window.matchMedia(t).matches}return!1},TK=":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}",$b=typeof window<"u"?window:void 0,O_=$b&&!!($b.CSS&&$b.CSS.supports&&$b.CSS.supports("--a: 0")),EK=["","xs","sm","md","lg","xl"],NK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){Vy(this)}getColumns(t){let n;for(const r of EK){const a=CK(r),i=this[t+r.charAt(0).toUpperCase()+r.slice(1)];a&&i!==void 0&&(n=i)}return n}calculateSize(){const t=this.getColumns("size");if(!t||t==="")return;const n=t==="auto"?"auto":O_?"calc(calc(".concat(t," / var(--ion-grid-columns, 12)) * 100%)"):t/12*100+"%";return{flex:"0 0 ".concat(n),width:"".concat(n),"max-width":"".concat(n)}}calculatePosition(t,n){const r=this.getColumns(t);if(!r)return;const a=O_?"calc(calc(".concat(r," / var(--ion-grid-columns, 12)) * 100%)"):r>0&&r<12?r/12*100+"%":"auto";return{[n]:a}}calculateOffset(t){return this.calculatePosition("offset",t?"margin-right":"margin-left")}calculatePull(t){return this.calculatePosition("pull",t?"left":"right")}calculatePush(t){return this.calculatePosition("push",t?"right":"left")}render(){const t=document.dir==="rtl",n=Pt(this);return Ae(Qn,{class:{[n]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(t)),this.calculatePull(t)),this.calculatePush(t)),this.calculateSize())},Ae("slot",null))}static get style(){return TK}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);function _K(){if(typeof customElements>"u")return;["ion-col"].forEach(t=>{switch(t){case"ion-col":customElements.get(t)||customElements.define(t,NK);break}})}const AK=_K;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gk=e=>e&&e.dir!==""?e.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const RK=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',DK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Tt(this,"ionScrollStart",7),this.ionScroll=Tt(this,"ionScroll",7),this.ionScrollEnd=Tt(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:t}=this,n=Pt(this);return t===void 0?n==="ios"&&po("ios"):t}resize(){this.fullscreen?om(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,Vy(this))}readDimensions(){const t=MK(this.el),n=Math.max(this.el.offsetTop,0),r=Math.max(t.offsetHeight-n-this.el.offsetHeight,0);(n!==this.cTop||r!==this.cBottom)&&(this.cTop=n,this.cBottom=r,Vy(this))}onScroll(t){const n=Date.now(),r=!this.isScrolling;this.lastScroll=n,r&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,om(a=>{this.queued=!1,this.detail.event=t,OK(this.detail,this.scrollEl,a,r),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(t=>Hd(this.el,t)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(t=>Hd(this.el,t)),Promise.resolve(this.backgroundContentEl)}scrollToTop(t=0){return this.scrollToPoint(void 0,0,t)}async scrollToBottom(t=0){const n=await this.getScrollElement(),r=n.scrollHeight-n.clientHeight;return this.scrollToPoint(void 0,r,t)}async scrollByPoint(t,n,r){const a=await this.getScrollElement();return this.scrollToPoint(t+a.scrollLeft,n+a.scrollTop,r)}async scrollToPoint(t,n,r=0){const a=await this.getScrollElement();if(r<32){n!=null&&(a.scrollTop=n),t!=null&&(a.scrollLeft=t);return}let i,s=0;const o=new Promise(p=>i=p),l=a.scrollTop,c=a.scrollLeft,u=n!=null?n-l:0,d=t!=null?t-c:0,h=p=>{const f=Math.min(1,(p-s)/r)-1,m=Math.pow(f,3)+1;u!==0&&(a.scrollTop=Math.floor(m*u+l)),d!==0&&(a.scrollLeft=Math.floor(m*d+c)),m<1?requestAnimationFrame(h):i()};return requestAnimationFrame(p=>{s=p,h(p)}),o}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:t,scrollX:n,scrollY:r,el:a}=this,i=gk(a)?"rtl":"ltr",s=Pt(this),o=this.shouldForceOverscroll(),l=s==="ios",c=t?"main":"div";return this.resize(),Ae(Qn,{class:Xo(this.color,{[s]:!0,"content-sizing":Ri("ion-popover",this.el),overscroll:o,["content-".concat(i)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},Ae("div",{ref:u=>this.backgroundContentEl=u,id:"background-content",part:"background"}),Ae(c,{class:{"inner-scroll":!0,"scroll-x":n,"scroll-y":r,overscroll:(n||r)&&o},ref:u=>this.scrollEl=u,onScroll:this.scrollEvents?u=>this.onScroll(u):void 0,part:"scroll"},Ae("slot",null)),l?Ae("div",{class:"transition-effect"},Ae("div",{class:"transition-cover"}),Ae("div",{class:"transition-shadow"})):null,Ae("slot",{name:"fixed"}))}get el(){return this}static get style(){return RK}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),FK=e=>{var t;return e.parentElement?e.parentElement:!((t=e.parentNode)===null||t===void 0)&&t.host?e.parentNode.host:null},MK=e=>{const t=e.closest("ion-tabs");if(t)return t;const n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||FK(e)},OK=(e,t,n,r)=>{const a=e.currentX,i=e.currentY,s=e.currentTime,o=t.scrollLeft,l=t.scrollTop,c=n-s;if(r&&(e.startTime=n,e.startX=o,e.startY=l,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=o,e.currentY=e.scrollTop=l,e.deltaX=o-e.startX,e.deltaY=l-e.startY,c>0&&c<100){const u=(o-a)/c,d=(l-i)/c;e.velocityX=u*.7+e.velocityX*.3,e.velocityY=d*.7+e.velocityY*.3}};function PK(){if(typeof customElements>"u")return;["ion-content"].forEach(t=>{switch(t){case"ion-content":customElements.get(t)||customElements.define(t,DK);break}})}const LK=PK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const zK=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',BK=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',WK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Tt(this,"ionFocus",7),this.ionBlur=Tt(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.inheritedAttributes={},this.handleClick=t=>{const{el:n}=this;if(this.type==="button")$O(this.href,t,this.routerDirection,this.routerAnimation);else if(B8(n)){let r=this.findForm();const{form:a}=this;if(!r&&a!==void 0){Ad(typeof a=="string"?'Form with selector: "#'.concat(a,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'):'The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',n);return}if(r||(r=n.closest("form")),r){t.preventDefault();const i=document.createElement("button");i.type=this.type,i.style.display="none",r.appendChild(i),i.click(),i.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=iO(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:t}=this;if(t instanceof HTMLFormElement)return t;if(typeof t=="string"){const n=document.getElementById(t);if(n instanceof HTMLFormElement)return n}return null}render(){const t=Pt(this),{buttonType:n,type:r,disabled:a,rel:i,target:s,size:o,href:l,color:c,expand:u,hasIconOnly:d,shape:h,strong:p,inheritedAttributes:f}=this,m=o===void 0&&this.inItem?"small":o,g=l===void 0?"button":"a",b=g==="button"?{type:r}:{download:this.download,href:l,rel:i,target:s};let y=this.fill;return y==null&&(y=this.inToolbar||this.inListHeader?"clear":"solid"),Ae(Qn,{onClick:this.handleClick,"aria-disabled":a?"true":null,class:Xo(c,{[t]:!0,[n]:!0,["".concat(n,"-").concat(u)]:u!==void 0,["".concat(n,"-").concat(m)]:m!==void 0,["".concat(n,"-").concat(h)]:h!==void 0,["".concat(n,"-").concat(y)]:!0,["".concat(n,"-strong")]:p,"in-toolbar":Ri("ion-toolbar",this.el),"in-toolbar-color":Ri("ion-toolbar[color]",this.el),"in-buttons":Ri("ion-buttons",this.el),"button-has-icon-only":d,"button-disabled":a,"ion-activatable":!0,"ion-focusable":!0})},Ae(g,Object.assign({},b,{class:"button-native",part:"native",disabled:a,onFocus:this.onFocus,onBlur:this.onBlur},f),Ae("span",{class:"button-inner"},Ae("slot",{name:"icon-only"}),Ae("slot",{name:"start"}),Ae("slot",null),Ae("slot",{name:"end"})),t==="md"&&Ae("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:zK,md:BK}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const UK=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",VK='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',jK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.ionColor=Tt(this,"ionColor",7),this.ionStyle=Tt(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:t}=this;this.ionColor.emit({"item-label-color":t!==void 0,["ion-color-".concat(t)]:t!==void 0})}emitStyle(){const{inRange:t,position:n}=this;t||this.ionStyle.emit({label:!0,["label-".concat(n)]:n!==void 0})}render(){const t=this.position,n=Pt(this);return Ae(Qn,{class:Xo(this.color,{[n]:!0,"in-item-color":Ri("ion-item.ion-color",this.el),["label-".concat(t)]:t!==void 0,"label-no-animate":this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:UK,md:VK}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function HK(){if(typeof customElements>"u")return;["ion-label"].forEach(t=>{switch(t){case"ion-label":customElements.get(t)||customElements.define(t,jK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const GK="ION-CONTENT",TO="ion-content",EO=".ion-content-scroll-host",NO="".concat(TO,", ").concat(EO),Xl=e=>e.tagName===GK,P_=async e=>Xl(e)?(await new Promise(t=>Hd(e,t)),e.getScrollElement()):e,bk=e=>{const t=e.querySelector(EO);return t||e.querySelector(NO)},qK=e=>e.closest(NO),E3e=(e,t)=>Xl(e)?e.scrollToTop(t):Promise.resolve(e.scrollTo({top:0,left:0,behavior:t>0?"smooth":"auto"})),N3e=(e,t,n,r)=>Xl(e)?e.scrollByPoint(t,n,r):Promise.resolve(e.scrollBy({top:n,left:t,behavior:r>0?"smooth":"auto"})),yk=e=>Vq(e,TO),L_=e=>{if(Xl(e)){const t=e,n=t.scrollY;return t.scrollY=!1,n}else return e.style.setProperty("overflow","hidden"),!0},KK=(e,t)=>{Xl(e)?e.scrollY=t:e.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var vk;(function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"})(vk||(vk={}));const _O={getEngine(){var e;return((e=yt==null?void 0:yt.Capacitor)===null||e===void 0?void 0:e.isPluginAvailable("Keyboard"))&&(yt==null?void 0:yt.Capacitor.Plugins.Keyboard)},getResizeMode(){const e=this.getEngine();return e!=null&&e.getResizeMode?e.getResizeMode().catch(t=>{if(t.code!=="UNIMPLEMENTED")throw t}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const AO=e=>{if(Lw===void 0||e===vk.None||e===void 0)return null;const t=Lw.querySelector("ion-app");return t!=null?t:Lw.body},z_=e=>{const t=AO(e);return t===null?0:t.clientHeight},XK=async e=>{let t,n,r,a;const i=async()=>{const u=await _O.getResizeMode(),d=u===void 0?void 0:u.mode;t=()=>{a===void 0&&(a=z_(d)),r=!0,s(r,d)},n=()=>{r=!1,s(r,d)},yt==null||yt.addEventListener("keyboardWillShow",t),yt==null||yt.addEventListener("keyboardWillHide",n)},s=(u,d)=>{e&&e(u,o(d))},o=u=>{if(a===0||a===z_(u))return;const d=AO(u);if(d!==null)return new Promise(h=>{const p=()=>{d.clientHeight===a&&(f.disconnect(),h())},f=new ResizeObserver(p);f.observe(d)})},l=()=>{yt==null||yt.removeEventListener("keyboardWillShow",t),yt==null||yt.removeEventListener("keyboardWillHide",n),t=n=void 0},c=()=>r;return await i(),{init:i,destroy:l,isKeyboardVisible:c}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const YK=":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",JK=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const t=Pt(this);return Ae(Qn,{class:{[t]:!0,"grid-fixed":this.fixed}},Ae("slot",null))}static get style(){return YK}},[1,"ion-grid",{fixed:[4]}]);function ZK(){if(typeof customElements>"u")return;["ion-grid"].forEach(t=>{switch(t){case"ion-grid":customElements.get(t)||customElements.define(t,JK);break}})}const QK=ZK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const e7="all 0.2s ease-in-out",B_=e=>{const t=document.querySelector("".concat(e,".ion-cloned-element"));if(t!==null)return t;const n=document.createElement(e);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},W_=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map(n=>{const r=n.querySelector("ion-title");return{el:n,background:n.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:r,innerTitleEl:r?r.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(n.querySelectorAll("ion-buttons"))}})}},t7=(e,t,n)=>{om(()=>{const r=e.scrollTop,a=Gd(1,1+-r/500,1.1);n.querySelector("ion-refresher.refresher-native")===null&&Li(()=>{a7(t.toolbars,a)})})},qI=(e,t)=>{e.collapse!=="fade"&&(t===void 0?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},n7=(e,t,n)=>{if(!e[0].isIntersecting)return;const r=e[0].intersectionRatio>.9||n<=0?0:(1-e[0].intersectionRatio)*100/75;qI(t.el,r===1?void 0:r)},r7=(e,t,n,r)=>{Li(()=>{const a=r.scrollTop;n7(e,t,a);const i=e[0],s=i.intersectionRect,o=s.width*s.height,l=i.rootBounds.width*i.rootBounds.height,c=o===0&&l===0,u=Math.abs(s.left-i.boundingClientRect.left),d=Math.abs(s.right-i.boundingClientRect.right),h=o>0&&(u>=5||d>=5);c||h||(i.isIntersecting?(mf(t,!1),mf(n)):(s.x===0&&s.y===0||s.width!==0&&s.height!==0)&&a>0&&(mf(t),mf(n,!1),qI(t.el)))})},mf=(e,t=!0)=>{const n=e.el;t?(n.classList.remove("header-collapse-condense-inactive"),n.removeAttribute("aria-hidden")):(n.classList.add("header-collapse-condense-inactive"),n.setAttribute("aria-hidden","true"))},a7=(e=[],t=1,n=!1)=>{e.forEach(r=>{const a=r.ionTitleEl,i=r.innerTitleEl;!a||a.size!=="large"||(i.style.transition=n?e7:"",i.style.transform="scale3d(".concat(t,", ").concat(t,", 1)"))})},U_=(e,t,n)=>{om(()=>{const r=e.scrollTop,a=t.clientHeight,i=n?n.clientHeight:0;if(n!==null&&r<i){t.style.setProperty("--opacity-scale","0"),e.style.setProperty("clip-path","inset(".concat(a,"px 0px 0px 0px)"));return}const s=r-i,l=Gd(0,s/10,1);Li(()=>{e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",l.toString())})})},i7="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",s7="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",o7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(t,n)=>{const r=this.scrollEl=await P_(t);this.contentScrollCallback=()=>{U_(this.scrollEl,this.el,n)},r.addEventListener("scroll",this.contentScrollCallback),U_(this.scrollEl,this.el,n)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=iO(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(Pt(this)!=="ios")return;const{collapse:n}=this,r=n==="condense",a=n==="fade";if(this.destroyCollapsibleHeader(),r){const i=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),s=i?bk(i):null;Li(()=>{const o=B_("ion-title");o.size="large",B_("ion-back-button")}),await this.setupCondenseHeader(s,i)}else if(a){const i=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),s=i?bk(i):null;if(!s){yk(this.el);return}const o=s.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(s,o)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(t,n){if(!t||!n){yk(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await P_(t);const r=n.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(r).find(o=>o.collapse!=="condense"),!this.collapsibleMainHeader)return;const a=W_(this.collapsibleMainHeader),i=W_(this.el);if(!a||!i)return;mf(a,!1),qI(a.el,0);const s=o=>{r7(o,a,i,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(s,{root:t,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(i.toolbars[i.toolbars.length-1].el),this.contentScrollCallback=()=>{t7(this.scrollEl,i,t)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Li(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:t,inheritedAttributes:n}=this,r=Pt(this),a=this.collapse||"none",i=Ri("ion-menu",this.el)?"none":"banner";return Ae(Qn,Object.assign({role:i,class:{[r]:!0,["header-".concat(r)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(a)]:!0,["header-translucent-".concat(r)]:this.translucent}},n),r==="ios"&&t&&Ae("div",{class:"header-background"}),Ae("slot",null))}get el(){return this}static get style(){return{ios:i7,md:s7}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function l7(){if(typeof customElements>"u")return;["ion-header"].forEach(t=>{switch(t){case"ion-header":customElements.get(t)||customElements.define(t,o7);break}})}const u7=l7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const c7=HK,RO=1,DO=2,qy=3;class xk{constructor(t,n){this.component=t,this.params=n,this.state=RO}async init(t){if(this.state=DO,!this.element){const n=this.component;this.element=await GI(this.delegate,t,n,["ion-page","ion-page-invisible"],this.params)}}_destroy(){aa(this.state!==qy,"view state must be ATTACHED");const t=this.element;t&&(this.delegate?this.delegate.removeViewFromDom(t.parentElement,t):t.remove()),this.nav=void 0,this.state=qy}}const V_=(e,t,n)=>!e||e.component!==t?!1:sO(e.params,n),j_=(e,t)=>e?e instanceof xk?e:new xk(e,t):null,d7=e=>e.map(t=>t instanceof xk?t:"component"in t?j_(t.component,t.componentProps===null?void 0:t.componentProps):j_(t,void 0)).filter(t=>t!==null),h7=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",p7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Tt(this,"ionNavWillLoad",7),this.ionNavWillChange=Tt(this,"ionNavWillChange",3),this.ionNavDidChange=Tt(this,"ionNavDidChange",3),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const t=Pt(this);this.swipeGesture=qt.getBoolean("swipeBackEnabled",t==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await Da(()=>import("./swipe-back-e1b9d76c.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const t of this.views)Ts(t.element,Bw),t._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(t,n,r,a){return this.insert(-1,t,n,r,a)}insert(t,n,r,a,i){return this.insertPages(t,[{component:n,componentProps:r}],a,i)}insertPages(t,n,r,a){return this.queueTrns({insertStart:t,insertViews:n,opts:r},a)}pop(t,n){return this.removeIndex(-1,1,t,n)}popTo(t,n,r){const a={removeStart:-1,removeCount:-1,opts:n};return typeof t=="object"&&t.component?(a.removeView=t,a.removeStart=1):typeof t=="number"&&(a.removeStart=t+1),this.queueTrns(a,r)}popToRoot(t,n){return this.removeIndex(1,-1,t,n)}removeIndex(t,n=1,r,a){return this.queueTrns({removeStart:t,removeCount:n,opts:r},a)}setRoot(t,n,r,a){return this.setPages([{component:t,componentProps:n}],r,a)}setPages(t,n,r){return n!=null||(n={}),n.animated!==!0&&(n.animated=!1),this.queueTrns({insertStart:0,insertViews:t,removeStart:0,removeCount:-1,opts:n},r)}setRouteId(t,n,r,a){const i=this.getActiveSync();if(V_(i,t,n))return Promise.resolve({changed:!1,element:i.element});let s;const o=new Promise(u=>s=u);let l;const c={updateURL:!1,viewIsReady:u=>{let d;const h=new Promise(p=>d=p);return s({changed:!0,element:u,markVisible:async()=>{d(),await l}}),h}};if(r==="root")l=this.setRoot(t,n,c);else{const u=this.views.find(d=>V_(d,t,n));u?l=this.popTo(u,Object.assign(Object.assign({},c),{direction:"back",animationBuilder:a})):r==="forward"?l=this.push(t,n,Object.assign(Object.assign({},c),{animationBuilder:a})):r==="back"&&(l=this.setRoot(t,n,Object.assign(Object.assign({},c),{direction:"back",animated:!0,animationBuilder:a})))}return o}async getRouteId(){const t=this.getActiveSync();if(t)return{id:t.element.tagName,params:t.params,element:t.element}}async getActive(){return this.getActiveSync()}async getByIndex(t){return this.views[t]}async canGoBack(t){return this.canGoBackSync(t)}async getPrevious(t){return this.getPreviousSync(t)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(t=this.getActiveSync()){return!!(t&&this.getPreviousSync(t))}getPreviousSync(t=this.getActiveSync()){if(!t)return;const n=this.views,r=n.indexOf(t);return r>0?n[r-1]:void 0}async queueTrns(t,n){var r,a;if(this.isTransitioning&&(!((r=t.opts)===null||r===void 0)&&r.skipIfBusy))return!1;const i=new Promise((s,o)=>{t.resolve=s,t.reject=o});if(t.done=n,t.opts&&t.opts.updateURL!==!1&&this.useRouter){const s=document.querySelector("ion-router");if(s){const o=await s.canTransition();if(o===!1)return!1;if(typeof o=="string")return s.push(o,t.opts.direction||"back"),!1}}return((a=t.insertViews)===null||a===void 0?void 0:a.length)===0&&(t.insertViews=void 0),this.transInstr.push(t),this.nextTrns(),i}success(t,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}if(n.done&&n.done(t.hasCompleted,t.requiresTransition,t.enteringView,t.leavingView,t.direction),n.resolve(t.hasCompleted),n.opts.updateURL!==!1&&this.useRouter){const r=document.querySelector("ion-router");if(r){const a=t.direction==="back"?"back":"forward";r.navChanged(a)}}}failed(t,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}this.transInstr.length=0,this.fireError(t,n)}fireError(t,n){n.done&&n.done(!1,!1,t),n.reject&&!this.destroyed?n.reject(t):n.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const t=this.transInstr.shift();return t?(this.runTransition(t),!0):!1}async runTransition(t){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(t);const n=this.getActiveSync(),r=this.getEnteringView(t,n);if(!n&&!r)throw new Error("no views in the stack to be removed");r&&r.state===RO&&await r.init(this.el),this.postViewInit(r,n,t);const a=(t.enteringRequiresTransition||t.leavingRequiresTransition)&&r!==n;a&&t.opts&&n&&(t.opts.direction==="back"&&(t.opts.animationBuilder=t.opts.animationBuilder||(r==null?void 0:r.animationBuilder)),n.animationBuilder=t.opts.animationBuilder);let i;a?i=await this.transition(r,n,t):i={hasCompleted:!0,requiresTransition:!1},this.success(i,t),this.ionNavDidChange.emit()}catch(n){this.failed(n,t)}this.isTransitioning=!1,this.nextTrns()}prepareTI(t){var n,r,a;const i=this.views.length;if((n=t.opts)!==null&&n!==void 0||(t.opts={}),(r=(a=t.opts).delegate)!==null&&r!==void 0||(a.delegate=this.delegate),t.removeView!==void 0){aa(t.removeStart!==void 0,"removeView needs removeStart"),aa(t.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(t.removeView);if(l<0)throw new Error("removeView was not found");t.removeStart+=l}t.removeStart!==void 0&&(t.removeStart<0&&(t.removeStart=i-1),t.removeCount<0&&(t.removeCount=i-t.removeStart),t.leavingRequiresTransition=t.removeCount>0&&t.removeStart+t.removeCount===i),t.insertViews&&((t.insertStart<0||t.insertStart>i)&&(t.insertStart=i),t.enteringRequiresTransition=t.insertStart===i);const s=t.insertViews;if(!s)return;aa(s.length>0,"length can not be zero");const o=d7(s);if(o.length===0)throw new Error("invalid views to insert");for(const l of o){l.delegate=t.opts.delegate;const c=l.nav;if(c&&c!==this)throw new Error("inserted view was already inserted");if(l.state===qy)throw new Error("inserted view was already destroyed")}t.insertViews=o}getEnteringView(t,n){const r=t.insertViews;if(r!==void 0)return r[r.length-1];const a=t.removeStart;if(a!==void 0){const i=this.views,s=a+t.removeCount;for(let o=i.length-1;o>=0;o--){const l=i[o];if((o<a||o>=s)&&l!==n)return l}}}postViewInit(t,n,r){var a,i,s;aa(n||t,"Both leavingView and enteringView are null"),aa(r.resolve,"resolve must be valid"),aa(r.reject,"reject must be valid");const o=r.opts,{insertViews:l,removeStart:c,removeCount:u}=r;let d;if(c!==void 0&&u!==void 0){aa(c>=0,"removeStart can not be negative"),aa(u>=0,"removeCount can not be negative"),d=[];for(let p=c;p<c+u;p++){const f=this.views[p];f!==void 0&&f!==t&&f!==n&&d.push(f)}(a=o.direction)!==null&&a!==void 0||(o.direction="back")}const h=this.views.length+((i=l==null?void 0:l.length)!==null&&i!==void 0?i:0)-(u!=null?u:0);if(aa(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let p=r.insertStart;for(const f of l)this.insertViewAt(f,p),p++;r.enteringRequiresTransition&&((s=o.direction)!==null&&s!==void 0||(o.direction="forward"))}if(d&&d.length>0){for(const p of d)Ts(p.element,oO),Ts(p.element,lO),Ts(p.element,Bw);for(const p of d)this.destroyView(p)}}async transition(t,n,r){const a=r.opts,i=a.progressAnimation?d=>this.sbAni=d:void 0,s=Pt(this),o=t.element,l=n&&n.element,c=Object.assign(Object.assign({mode:s,showGoBack:this.canGoBackSync(t),baseEl:this.el,progressCallback:i,animated:this.animated&&qt.getBoolean("animated",!0),enteringEl:o,leavingEl:l},a),{animationBuilder:a.animationBuilder||this.animation||qt.get("navAnimation")}),{hasCompleted:u}=await uO(c);return this.transitionFinish(u,t,n,a)}transitionFinish(t,n,r,a){const i=t?n:r;return i&&this.unmountInactiveViews(i),{hasCompleted:t,requiresTransition:!0,enteringView:n,leavingView:r,direction:a.direction}}insertViewAt(t,n){const r=this.views,a=r.indexOf(t);a>-1?(aa(t.nav===this,"view is not part of the nav"),r.splice(a,1),r.splice(n,0,t)):(aa(!t.nav,"nav is used"),t.nav=this,r.splice(n,0,t))}removeView(t){aa(t.state===DO||t.state===qy,"view state should be loaded or destroyed");const n=this.views,r=n.indexOf(t);aa(r>-1,"view must be part of the stack"),r>=0&&n.splice(r,1)}destroyView(t){t._destroy(),this.removeView(t)}unmountInactiveViews(t){if(this.destroyed)return;const n=this.views,r=n.indexOf(t);for(let a=n.length-1;a>=0;a--){const i=n[a],s=i.element;s&&(a>r?(Ts(s,Bw),this.destroyView(i)):a<r&&hk(s,!0))}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.pop({direction:"back",progressAnimation:!0})}onMove(t){this.sbAni&&this.sbAni.progressStep(t)}onEnd(t,n,r){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish(()=>{this.animationEnabled=!0},{oneTimeCallback:!0});let a=t?-.001:.001;t?a+=qd([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),a+=qd([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.sbAni.progressEnd(t?1:0,a,r)}}render(){return Ae("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return h7}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function f7(){if(typeof customElements>"u")return;["ion-nav"].forEach(t=>{switch(t){case"ion-nav":customElements.get(t)||customElements.define(t,p7);break}})}const m7=f7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const g7=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",b7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return Ae(Qn,{class:Pt(this)},Ae("slot",null))}static get style(){return g7}},[1,"ion-row"]);function y7(){if(typeof customElements>"u")return;["ion-row"].forEach(t=>{switch(t){case"ion-row":customElements.get(t)||customElements.define(t,b7);break}})}const v7=y7,x7=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}",w7=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}",k7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=Tt(this,"ionChange",7),this.ionSelect=Tt(this,"ionSelect",7),this.ionStyle=Tt(this,"ionStyle",7),this.onClick=t=>{const n=t.target,r=this.checked;n.tagName!=="ION-SEGMENT"&&(this.value=n.value,n!==r&&this.emitValueChange(),(this.scrollable||!this.swipeGesture)&&(r?this.checkButton(r,n):this.setCheckedClasses()))},this.getSegmentButton=t=>{var n,r;const a=this.getButtons().filter(s=>!s.disabled),i=a.findIndex(s=>s===document.activeElement);switch(t){case"first":return a[0];case"last":return a[a.length-1];case"next":return(n=a[i+1])!==null&&n!==void 0?n:a[0];case"previous":return(r=a[i-1])!==null&&r!==void 0?r:a[a.length-1];default:return null}},this.activated=!1,this.color=void 0,this.disabled=!1,this.scrollable=!1,this.swipeGesture=!0,this.value=void 0,this.selectOnFocus=!1}colorChanged(t,n){(n===void 0&&t!==void 0||n!==void 0&&t===void 0)&&this.emitStyle()}swipeGestureChanged(){this.gestureChanged()}valueChanged(t){if(this.ionSelect.emit({value:t}),this.scrollable){const r=this.getButtons().find(a=>a.value===t);r!==void 0&&r.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}}disabledChanged(){this.gestureChanged();const t=this.getButtons();for(const n of t)n.disabled=this.disabled}gestureChanged(){this.gesture&&this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}connectedCallback(){this.emitStyle()}componentWillLoad(){this.emitStyle()}async componentDidLoad(){this.setCheckedClasses(),this.gesture=(await Da(()=>Promise.resolve().then(()=>vq),void 0)).createGesture({el:this.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:!1,onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.gestureChanged(),this.disabled&&this.disabledChanged()}onStart(t){this.valueBeforeGesture=this.value,this.activate(t)}onMove(t){this.setNextIndex(t)}onEnd(t){this.setActivated(!1),this.setNextIndex(t,!0),t.event.stopImmediatePropagation();const n=this.value;n!==void 0&&this.valueBeforeGesture!==n&&this.emitValueChange(),this.valueBeforeGesture=void 0}emitValueChange(){const{value:t}=this;this.ionChange.emit({value:t})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find(t=>t.value===this.value)}setActivated(t){this.getButtons().forEach(r=>{t?r.classList.add("segment-button-activated"):r.classList.remove("segment-button-activated")}),this.activated=t}activate(t){const n=t.event.target,a=this.getButtons().find(i=>i.value===this.value);n.tagName==="ION-SEGMENT-BUTTON"&&(a||(this.value=n.value,this.setCheckedClasses()),this.value===n.value&&this.setActivated(!0))}getIndicator(t){return(t.shadowRoot||t).querySelector(".segment-button-indicator")}checkButton(t,n){const r=this.getIndicator(t),a=this.getIndicator(n);if(r===null||a===null)return;const i=r.getBoundingClientRect(),s=a.getBoundingClientRect(),o=i.width/s.width,l=i.left-s.left,c="translate3d(".concat(l,"px, 0, 0) scaleX(").concat(o,")");Li(()=>{a.classList.remove("segment-button-indicator-animated"),a.style.setProperty("transform",c),a.getBoundingClientRect(),a.classList.add("segment-button-indicator-animated"),a.style.setProperty("transform","")}),this.value=n.value,this.setCheckedClasses()}setCheckedClasses(){const t=this.getButtons(),r=t.findIndex(a=>a.value===this.value)+1;for(const a of t)a.classList.remove("segment-button-after-checked");r<t.length&&t[r].classList.add("segment-button-after-checked")}setNextIndex(t,n=!1){const r=gk(this.el),a=this.activated,i=this.getButtons(),s=i.findIndex(v=>v.value===this.value),o=i[s];let l,c;if(s===-1)return;const u=o.getBoundingClientRect(),d=u.left,h=u.width,p=t.currentX,f=u.top+u.height/2,g=this.el.getRootNode().elementFromPoint(p,f),b=r?p>d+h:p<d,y=r?p<d:p>d+h;if(a&&!n){if(b){const v=s-1;v>=0&&(c=v)}else if(y&&a&&!n){const v=s+1;v<i.length&&(c=v)}c!==void 0&&!i[c].disabled&&(l=i[c])}if(!a&&n&&(l=g),l!=null){if(l.tagName==="ION-SEGMENT")return!1;o!==l&&this.checkButton(o,l)}return!0}emitStyle(){this.ionStyle.emit({segment:!0})}onKeyDown(t){const n=gk(this.el);let r=this.selectOnFocus,a;switch(t.key){case"ArrowRight":t.preventDefault(),a=n?this.getSegmentButton("previous"):this.getSegmentButton("next");break;case"ArrowLeft":t.preventDefault(),a=n?this.getSegmentButton("next"):this.getSegmentButton("previous");break;case"Home":t.preventDefault(),a=this.getSegmentButton("first");break;case"End":t.preventDefault(),a=this.getSegmentButton("last");break;case" ":case"Enter":t.preventDefault(),a=document.activeElement,r=!0}if(a){if(r){const i=this.checked;this.checkButton(i||a,a),a!==i&&this.emitValueChange()}a.setFocus()}}render(){const t=Pt(this);return Ae(Qn,{role:"tablist",onClick:this.onClick,class:Xo(this.color,{[t]:!0,"in-toolbar":Ri("ion-toolbar",this.el),"in-toolbar-color":Ri("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},Ae("slot",null))}get el(){return this}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}static get style(){return{ios:x7,md:w7}}},[33,"ion-segment",{color:[513],disabled:[4],scrollable:[4],swipeGesture:[4,"swipe-gesture"],value:[1032],selectOnFocus:[4,"select-on-focus"],activated:[32]},[[0,"keydown","onKeyDown"]]]);function S7(){if(typeof customElements>"u")return;["ion-segment"].forEach(t=>{switch(t){case"ion-segment":customElements.get(t)||customElements.define(t,k7);break}})}const I7=S7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $7=':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:none;--background-hover-opacity:0;--background-focused:none;--background-focused-opacity:0;--border-radius:7px;--border-width:1px;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--border-style:solid;--indicator-box-shadow:0 0 5px rgba(0, 0, 0, 0.16);--indicator-color:var(--ion-color-step-350, var(--ion-background-color, #fff));--indicator-height:100%;--indicator-transition:transform 260ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--transition:100ms all linear;--padding-top:0;--padding-end:13px;--padding-bottom:0;--padding-start:13px;margin-top:2px;margin-bottom:2px;position:relative;-ms-flex-direction:row;flex-direction:row;min-width:70px;min-height:28px;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-size:13px;font-weight:450;line-height:37px}:host::before{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;-webkit-transition:160ms opacity ease-in-out;transition:160ms opacity ease-in-out;-webkit-transition-delay:100ms;transition-delay:100ms;border-left:var(--border-width) var(--border-style) var(--border-color);content:"";opacity:1;will-change:opacity}:host(:first-of-type)::before{border-left-color:transparent}:host(.segment-button-disabled){opacity:0.3}::slotted(ion-icon){font-size:24px}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:2px;margin-inline-end:2px}.segment-button-indicator{-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;left:0;right:0;top:0;bottom:0}.segment-button-indicator-background{border-radius:var(--border-radius);background:var(--indicator-color)}.segment-button-indicator-background{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked)::before,:host(.segment-button-after-checked)::before{opacity:0}:host(.segment-button-checked){z-index:-1}:host(.segment-button-activated){--indicator-transform:scale(0.95)}:host(.ion-focused) .button-native{opacity:0.7}@media (any-hover: hover){:host(:hover) .button-native{opacity:0.5}:host(.segment-button-checked:hover) .button-native{opacity:1}}:host(.in-segment-color){background:none;color:var(--ion-text-color, #000)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-step-350, var(--ion-background-color, #fff))}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native,:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-text-color, #000)}}:host(.in-toolbar:not(.in-segment-color)){--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, var(--ion-toolbar-color), initial);--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-toolbar-color), initial);--indicator-color:var(--ion-toolbar-segment-indicator-color, var(--ion-color-step-350, var(--ion-background-color, #fff)))}:host(.in-toolbar-color) .segment-button-indicator-background{background:var(--ion-color-contrast)}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color):hover) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color):hover) .button-native{color:var(--ion-color-base)}}',C7=':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:var(--color-checked);--background-focused:var(--color-checked);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #3880ff);--indicator-box-shadow:none;--indicator-color:var(--color-checked);--indicator-height:2px;--indicator-transition:transform 250ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--padding-top:0;--padding-end:16px;--padding-bottom:0;--padding-start:16px;--transition:color 0.15s linear 0s, opacity 0.15s linear 0s;min-width:90px;min-height:48px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);font-size:14px;font-weight:500;letter-spacing:0.06em;line-height:40px;text-transform:uppercase}:host(.segment-button-disabled){opacity:0.3}:host(.in-segment-color){background:none;color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color) ion-ripple-effect{color:var(--ion-color-base)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked) .button-native{color:var(--ion-color-base)}:host(.in-segment-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color:hover) .button-native::after{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-segment-color)){--background:var(--ion-toolbar-segment-background, none);--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6));--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-color-primary, #3880ff));--indicator-color:var(--ion-toolbar-segment-color-checked, var(--color-checked))}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:rgba(var(--ion-color-contrast-rgb), 0.6)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color)) .button-native::after{background:var(--ion-color-contrast)}}::slotted(ion-icon){margin-top:12px;margin-bottom:12px;font-size:24px}::slotted(ion-label){margin-top:12px;margin-bottom:12px}:host(.segment-button-layout-icon-top) ::slotted(ion-label),:host(.segment-button-layout-icon-bottom) ::slotted(ion-icon){margin-top:0}:host(.segment-button-layout-icon-top) ::slotted(ion-icon),:host(.segment-button-layout-icon-bottom) ::slotted(ion-label){margin-bottom:0}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}:host(.segment-button-has-icon-only) ::slotted(ion-icon){margin-top:12px;margin-bottom:12px}:host(.segment-button-has-label-only) ::slotted(ion-label){margin-top:12px;margin-bottom:12px}.segment-button-indicator{left:0;right:0;bottom:0}.segment-button-indicator-background{background:var(--indicator-color)}:host(.in-toolbar:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-toolbar-segment-indicator-color, var(--indicator-color))}:host(.in-toolbar-color:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-color-contrast)}';let T7=0;const E7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.segmentEl=null,this.inheritedAttributes={},this.updateStyle=()=>{Vy(this)},this.updateState=()=>{const{segmentEl:t}=this;t&&(this.checked=t.value===this.value,t.disabled&&(this.disabled=!0))},this.checked=!1,this.disabled=!1,this.layout="icon-top",this.type="button",this.value="ion-sb-"+T7++}valueChanged(){this.updateState()}connectedCallback(){const t=this.segmentEl=this.el.closest("ion-segment");t&&(this.updateState(),ck(t,"ionSelect",this.updateState),ck(t,"ionStyle",this.updateStyle))}disconnectedCallback(){const t=this.segmentEl;t&&(dk(t,"ionSelect",this.updateState),dk(t,"ionStyle",this.updateStyle),this.segmentEl=null)}componentWillLoad(){this.inheritedAttributes=Object.assign({},zm(this.el,["aria-label"]))}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}async setFocus(){const{nativeEl:t}=this;t!==void 0&&t.focus()}render(){const{checked:t,type:n,disabled:r,hasIcon:a,hasLabel:i,layout:s,segmentEl:o}=this,l=Pt(this),c=()=>(o==null?void 0:o.color)!==void 0;return Ae(Qn,{class:{[l]:!0,"in-toolbar":Ri("ion-toolbar",this.el),"in-toolbar-color":Ri("ion-toolbar[color]",this.el),"in-segment":Ri("ion-segment",this.el),"in-segment-color":c(),"segment-button-has-label":i,"segment-button-has-icon":a,"segment-button-has-label-only":i&&!a,"segment-button-has-icon-only":a&&!i,"segment-button-disabled":r,"segment-button-checked":t,["segment-button-layout-".concat(s)]:!0,"ion-activatable":!0,"ion-activatable-instant":!0,"ion-focusable":!0}},Ae("button",Object.assign({"aria-selected":t?"true":"false",role:"tab",ref:u=>this.nativeEl=u,type:n,class:"button-native",part:"native",disabled:r},this.inheritedAttributes),Ae("span",{class:"button-inner"},Ae("slot",null)),l==="md"&&Ae("ion-ripple-effect",null)),Ae("div",{part:"indicator",class:{"segment-button-indicator":!0,"segment-button-indicator-animated":!0}},Ae("div",{part:"indicator-background",class:"segment-button-indicator-background"})))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:$7,md:C7}}},[33,"ion-segment-button",{disabled:[1028],layout:[1],type:[1],value:[8],checked:[32],setFocus:[64]}]);function N7(){if(typeof customElements>"u")return;["ion-segment-button","ion-ripple-effect"].forEach(t=>{switch(t){case"ion-segment-button":customElements.get(t)||customElements.define(t,E7);break;case"ion-ripple-effect":customElements.get(t)||CO();break}})}const _7=N7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const A7=WK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const R7=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:14px;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",D7=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:14px;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}",F7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=zm(this.el,["aria-label"])}isClickable(){return this.href!==void 0||this.button}renderCard(t){const n=this.isClickable();if(!n)return[Ae("slot",null)];const{href:r,routerAnimation:a,routerDirection:i,inheritedAriaAttributes:s}=this,o=n?r===void 0?"button":"a":"div",l=o==="button"?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return Ae(o,Object.assign({},l,s,{class:"card-native",part:"native",disabled:this.disabled,onClick:c=>$O(r,c,i,a)}),Ae("slot",null),n&&t==="md"&&Ae("ion-ripple-effect",null))}render(){const t=Pt(this);return Ae(Qn,{class:Xo(this.color,{[t]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(t))}get el(){return this}static get style(){return{ios:R7,md:D7}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]),M7=F7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ky="ionKeyboardDidShow",FO="ionKeyboardDidHide",O7=150;let Xy={},Ds={},kh=!1;const P7=()=>{Xy={},Ds={},kh=!1},L7=e=>{if(_O.getEngine())z7(e);else{if(!e.visualViewport)return;Ds=JI(e.visualViewport),e.visualViewport.onresize=()=>{PO(e),MO()||OO(e)?KI(e):YI(e)&&XI(e)}}},z7=e=>{e.addEventListener("keyboardDidShow",t=>KI(e,t)),e.addEventListener("keyboardDidHide",()=>XI(e))},KI=(e,t)=>{B7(e,t),kh=!0},XI=e=>{W7(e),kh=!1},MO=()=>{const e=(Xy.height-Ds.height)*Ds.scale;return!kh&&Xy.width===Ds.width&&e>O7},OO=e=>kh&&!YI(e),YI=e=>kh&&Ds.height===e.innerHeight,B7=(e,t)=>{const n=t?t.keyboardHeight:e.innerHeight-Ds.height,r=new CustomEvent(Ky,{detail:{keyboardHeight:n}});e.dispatchEvent(r)},W7=e=>{const t=new CustomEvent(FO);e.dispatchEvent(t)},PO=e=>{Xy=Object.assign({},Ds),Ds=JI(e.visualViewport)},JI=e=>({width:Math.round(e.width),height:Math.round(e.height),offsetTop:e.offsetTop,offsetLeft:e.offsetLeft,pageTop:e.pageTop,pageLeft:e.pageLeft,scale:e.scale}),U7=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE:FO,KEYBOARD_DID_OPEN:Ky,copyVisualViewport:JI,keyboardDidClose:YI,keyboardDidOpen:MO,keyboardDidResize:OO,resetKeyboardAssist:P7,setKeyboardClose:XI,setKeyboardOpen:KI,startKeyboardAssist:L7,trackViewportChanges:PO},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Kd;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Kd||(Kd={}));const um={getEngine(){var e;return((e=yt==null?void 0:yt.Capacitor)===null||e===void 0?void 0:e.isPluginAvailable("StatusBar"))&&(yt==null?void 0:yt.Capacitor.Plugins.StatusBar)},supportsDefaultStatusBarStyle(){var e;return!!(!((e=yt==null?void 0:yt.Capacitor)===null||e===void 0)&&e.PluginHeaders)},setStyle(e){const t=this.getEngine();t&&t.setStyle(e)},getStyle:async function(){const e=this.getEngine();if(!e)return Kd.Default;const{style:t}=await e.getInfo();return t}},wk=(e,t)=>{if(t===1)return 0;const n=1/(1-t),r=-(t*n);return e*n+r},LO=()=>{!yt||yt.innerWidth>=768||!um.supportsDefaultStatusBarStyle()||um.setStyle({style:Kd.Dark})},zO=(e=Kd.Default)=>{!yt||yt.innerWidth>=768||!um.supportsDefaultStatusBarStyle()||um.setStyle({style:e})},BO=async(e,t)=>{typeof e.canDismiss!="function"||!await e.canDismiss(void 0,Of)||(t.isRunning()?t.onFinish(()=>{e.dismiss(void 0,"handler")},{oneTimeCallback:!0}):e.dismiss(void 0,"handler"))},kk=e=>.00255275*2.71828**(-14.9619*e)-1.00255*2.71828**(-.0380968*e)+1,Yy={MIN_PRESENTING_SCALE:.93},V7=(e,t,n,r)=>{const i=e.offsetHeight;let s=!1,o=!1,l=null,c=null;const u=.2;let d=!0,h=0;const p=()=>l&&Xl(l)?l.scrollY:!0,y=jI({el:e,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:v=>{const x=v.event.target;return x===null||!x.closest?!0:(l=qK(x),l?(Xl(l)?c=Do(l).querySelector(".inner-scroll"):c=l,!!!l.querySelector("ion-refresher")&&c.scrollTop===0):x.closest("ion-footer")===null)},onStart:v=>{const{deltaY:x}=v;d=p(),o=e.canDismiss!==void 0&&e.canDismiss!==!0,x>0&&l&&L_(l),t.progressStart(!0,s?1:0)},onMove:v=>{const{deltaY:x}=v;x>0&&l&&L_(l);const w=v.deltaY/i,$=w>=0&&o,C=$?u:.9999,T=$?kk(w/C):w,A=Gd(1e-4,T,C);t.progressStep(A),A>=.5&&h<.5?zO(n):A<.5&&h>=.5&&LO(),h=A},onEnd:v=>{const x=v.velocityY,w=v.deltaY/i,$=w>=0&&o,C=$?u:.9999,T=$?kk(w/C):w,A=Gd(1e-4,T,C),D=(v.deltaY+x*1e3)/i,N=!$&&D>=.5;let I=N?-.001:.001;N?(t.easing("cubic-bezier(0.32, 0.72, 0, 1)"),I+=qd([0,0],[.32,.72],[0,1],[1,1],A)[0]):(t.easing("cubic-bezier(1, 0, 0.68, 0.28)"),I+=qd([0,0],[1,0],[.68,.28],[1,1],A)[0]);const M=H_(N?w*i:(1-A)*i,x);s=N,y.enable(!1),l&&KK(l,d),t.onFinish(()=>{N||y.enable(!0)}).progressEnd(N?1:0,I,M),$&&A>C/4?BO(e,t):N&&r()}});return y},H_=(e,t)=>Gd(400,e/Math.abs(t*1.1),500),WO=e=>{const{currentBreakpoint:t,backdropBreakpoint:n}=e,r=n===void 0||n<t,a=r?"calc(var(--backdrop-opacity) * ".concat(t,")"):"0",i=$n("backdropAnimation").fromTo("opacity",0,a);return r&&i.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:$n("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:"translateY(".concat(100-t*100,"%)")}]),backdropAnimation:i}},UO=e=>{const{currentBreakpoint:t,backdropBreakpoint:n}=e,r="calc(var(--backdrop-opacity) * ".concat(wk(t,n),")"),a=[{offset:0,opacity:r},{offset:1,opacity:0}],i=[{offset:0,opacity:r},{offset:n,opacity:0},{offset:1,opacity:0}],s=$n("backdropAnimation").keyframes(n!==0?i:a);return{wrapperAnimation:$n("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(".concat(100-t*100,"%)")},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:s}},j7=()=>{const e=$n().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),t=$n().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:e,wrapperAnimation:t}},G_=(e,t)=>{const{presentingEl:n,currentBreakpoint:r}=t,a=Do(e),{wrapperAnimation:i,backdropAnimation:s}=r!==void 0?WO(t):j7();s.addElement(a.querySelector("ion-backdrop")),i.addElement(a.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const o=$n("entering-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(i);if(n){const l=window.innerWidth<768,c=n.tagName==="ION-MODAL"&&n.presentingElement!==void 0,u=Do(n),d=$n().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),h=document.body;if(l){const p=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",f=c?"-10px":p,m=Yy.MIN_PRESENTING_SCALE,g="translateY(".concat(f,") scale(").concat(m,")");d.afterStyles({transform:g}).beforeAddWrite(()=>h.style.setProperty("background-color","black")).addElement(n).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:g,borderRadius:"10px 10px 0 0"}]),o.addAnimation(d)}else if(o.addAnimation(s),!c)i.fromTo("opacity","0","1");else{const p=c?Yy.MIN_PRESENTING_SCALE:1,f="translateY(-10px) scale(".concat(p,")");d.afterStyles({transform:f}).addElement(u.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:f}]);const m=$n().afterStyles({transform:f}).addElement(u.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:f}]);o.addAnimation([d,m])}}else o.addAnimation(s);return o},H7=()=>{const e=$n().fromTo("opacity","var(--backdrop-opacity)",0),t=$n().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:e,wrapperAnimation:t}},q_=(e,t,n=500)=>{const{presentingEl:r,currentBreakpoint:a}=t,i=Do(e),{wrapperAnimation:s,backdropAnimation:o}=a!==void 0?UO(t):H7();o.addElement(i.querySelector("ion-backdrop")),s.addElement(i.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const l=$n("leaving-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(n).addAnimation(s);if(r){const c=window.innerWidth<768,u=r.tagName==="ION-MODAL"&&r.presentingElement!==void 0,d=Do(r),h=$n().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(f=>{if(f!==1)return;r.style.setProperty("overflow",""),Array.from(p.querySelectorAll("ion-modal")).filter(g=>g.presentingElement!==void 0).length<=1&&p.style.setProperty("background-color","")}),p=document.body;if(c){const f=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",m=u?"-10px":f,g=Yy.MIN_PRESENTING_SCALE,b="translateY(".concat(m,") scale(").concat(g,")");h.addElement(r).keyframes([{offset:0,filter:"contrast(0.85)",transform:b,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),l.addAnimation(h)}else if(l.addAnimation(o),!u)s.fromTo("opacity","1","0");else{const f=u?Yy.MIN_PRESENTING_SCALE:1,m="translateY(-10px) scale(".concat(f,")");h.addElement(d.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:m},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const g=$n().addElement(d.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:m},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([h,g])}}else l.addAnimation(o);return l},G7=()=>{const e=$n().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),t=$n().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:e,wrapperAnimation:t}},q7=(e,t)=>{const{currentBreakpoint:n}=t,r=Do(e),{wrapperAnimation:a,backdropAnimation:i}=n!==void 0?WO(t):G7();return i.addElement(r.querySelector("ion-backdrop")),a.addElement(r.querySelector(".modal-wrapper")),$n().addElement(e).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([i,a])},K7=()=>{const e=$n().fromTo("opacity","var(--backdrop-opacity)",0),t=$n().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:e,wrapperAnimation:t}},X7=(e,t)=>{const{currentBreakpoint:n}=t,r=Do(e),{wrapperAnimation:a,backdropAnimation:i}=n!==void 0?UO(t):K7();return i.addElement(r.querySelector("ion-backdrop")),a.addElement(r.querySelector(".modal-wrapper")),$n().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([i,a])},Y7=(e,t,n,r,a,i,s=[],o,l,c)=>{const u=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],d=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-a,opacity:0},{offset:1,opacity:0}],h={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:a!==0?d:u},p=e.querySelector("ion-content"),f=n.clientHeight;let m=r,g=0,b=!1;const y=.95,v=i.childAnimations.find(z=>z.id==="wrapperAnimation"),x=i.childAnimations.find(z=>z.id==="backdropAnimation"),w=s[s.length-1],$=s[0],C=()=>{e.style.setProperty("pointer-events","auto"),t.style.setProperty("pointer-events","auto"),e.classList.remove("ion-disable-focus-trap")},T=()=>{e.style.setProperty("pointer-events","none"),t.style.setProperty("pointer-events","none"),e.classList.add("ion-disable-focus-trap")};v&&x&&(v.keyframes([...h.WRAPPER_KEYFRAMES]),x.keyframes([...h.BACKDROP_KEYFRAMES]),i.progressStart(!0,1-m),m>a?C():T()),p&&m!==w&&(p.scrollY=!1);const A=z=>{const j=z.event.target.closest("ion-content");return m=o(),!(m===1&&j)},D=()=>{b=e.canDismiss!==void 0&&e.canDismiss!==!0&&$===0,p&&(p.scrollY=!1),Hr(()=>{e.focus()}),i.progressStart(!0,1-m)},N=z=>{const j=1-m,K=s.length>1?1-s[1]:void 0,O=j+z.deltaY/f,W=K!==void 0&&O>=K&&b,L=W?y:.9999,H=W&&K!==void 0?K+kk((O-K)/(L-K)):O;g=Gd(1e-4,H,L),i.progressStep(g)},I=z=>{const j=z.velocityY,K=(z.deltaY+j*350)/f,O=m-K,W=s.reduce((L,H)=>Math.abs(H-O)<Math.abs(L-O)?H:L);M({breakpoint:W,breakpointOffset:g,canDismiss:b})},M=z=>{const{breakpoint:j,canDismiss:K,breakpointOffset:O}=z,W=K&&j===0,L=W?m:j,H=L!==0;return m=0,v&&x&&(v.keyframes([{offset:0,transform:"translateY(".concat(O*100,"%)")},{offset:1,transform:"translateY(".concat((1-L)*100,"%)")}]),x.keyframes([{offset:0,opacity:"calc(var(--backdrop-opacity) * ".concat(wk(1-O,a),")")},{offset:1,opacity:"calc(var(--backdrop-opacity) * ".concat(wk(L,a),")")}]),i.progressStep(0)),P.enable(!1),W?BO(e,i):H||l(),new Promise(Z=>{i.onFinish(()=>{H?v&&x?Hr(()=>{v.keyframes([...h.WRAPPER_KEYFRAMES]),x.keyframes([...h.BACKDROP_KEYFRAMES]),i.progressStart(!0,1-L),m=L,c(m),p&&m===s[s.length-1]&&(p.scrollY=!0),m>a?C():T(),P.enable(!0),Z()}):(P.enable(!0),Z()):Z()},{oneTimeCallback:!0}).progressEnd(1,0,500)})},P=jI({el:n,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:A,onStart:D,onMove:N,onEnd:I});return{gesture:P,moveSheetToBreakpoint:M}},J7=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-card) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-sheet) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}',Z7=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',Q7=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=Tt(this,"ionModalDidPresent",7),this.willPresent=Tt(this,"ionModalWillPresent",7),this.willDismiss=Tt(this,"ionModalWillDismiss",7),this.didDismiss=Tt(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=Tt(this,"ionBreakpointDidChange",7),this.didPresentShorthand=Tt(this,"didPresent",7),this.willPresentShorthand=Tt(this,"willPresent",7),this.willDismissShorthand=Tt(this,"willDismiss",7),this.didDismissShorthand=Tt(this,"didDismiss",7),this.ionMount=Tt(this,"ionMount",7),this.triggerController=nK(),this.coreDelegate=Uq(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:t,handleBehavior:n}=this;n!=="cycle"||t!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:t}=this;t===void 0&&this.dismiss(void 0,mk)},this.onLifecycle=t=>{const n=this.usersElement,r=eX[t.type];if(n&&r){const a=new CustomEvent(r,{bubbles:!1,cancelable:!1,detail:t.detail});n.dispatchEvent(a)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.canDismiss=!0}onIsOpenChange(t,n){t===!0&&n===!1?this.present():t===!1&&n===!0&&this.dismiss()}triggerChanged(){const{trigger:t,el:n,triggerController:r}=this;t&&r.addClickListener(n,t)}breakpointsChanged(t){t!==void 0&&(this.sortedBreakpoints=t.sort((n,r)=>n-r))}connectedCallback(){const{el:t}=this;Hq(t),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:t,initialBreakpoint:n,el:r}=this,a=this.isSheetModal=t!==void 0&&n!==void 0;this.inheritedAttributes=zm(r,["aria-label","role"]),a&&(this.currentBreakpoint=this.initialBreakpoint),t!==void 0&&n!==void 0&&!t.includes(n)&&Ad("Your breakpoints array must include the initialBreakpoint value."),Gq(r)}componentDidLoad(){this.isOpen===!0&&Hr(()=>this.present()),this.breakpointsChanged(this.breakpoints)}getDelegate(t=!1){if(this.workingDelegate&&!t)return{delegate:this.workingDelegate,inline:this.inline};const n=this.el.parentNode,r=this.inline=n!==null&&!this.hasController,a=this.workingDelegate=r?this.delegate||this.coreDelegate:this.delegate;return{inline:r,delegate:a}}async checkCanDismiss(t,n){const{canDismiss:r}=this;return typeof r=="function"?r(t,n):r}async present(){if(this.presented)return;const{presentingElement:t,el:n}=this;this.currentTransition!==void 0&&await this.currentTransition,this.currentBreakpoint=this.initialBreakpoint;const{inline:r,delegate:a}=this.getDelegate(!0);this.usersElement=await GI(a,n,this.component,["ion-page"],this.componentProps,r),this.ionMount.emit(),aO(n)?await Hy(this.usersElement):this.keepContentsMounted||await sq(),Li(()=>this.el.classList.add("show-modal")),this.currentTransition=Jq(this,"modalEnter",G_,q7,{presentingEl:t,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),Hr(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(Ky,this.keyboardOpenCallback));const i=t!==void 0;i&&Pt(this)==="ios"&&(this.statusBarStyle=await um.getStyle(),LO()),await this.currentTransition,this.isSheetModal?this.initSheetGesture():i&&this.initSwipeToClose(),this.currentTransition=void 0}initSwipeToClose(){var t;if(Pt(this)!=="ios")return;const{el:n}=this,r=this.leaveAnimation||qt.get("modalLeave",q_),a=this.animation=r(n,{presentingEl:this.presentingElement});if(!bk(n)){yk(n);return}const s=(t=this.statusBarStyle)!==null&&t!==void 0?t:Kd.Default;this.gesture=V7(n,a,s,()=>{this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{await this.dismiss(void 0,Of),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:t,initialBreakpoint:n,backdropBreakpoint:r}=this;if(!t||n===void 0)return;const a=this.enterAnimation||qt.get("modalEnter",G_),i=this.animation=a(this.el,{presentingEl:this.presentingElement,currentBreakpoint:n,backdropBreakpoint:r});i.progressStart(!0,1);const{gesture:s,moveSheetToBreakpoint:o}=Y7(this.el,this.backdropEl,t,n,r,i,this.sortedBreakpoints,()=>{var l;return(l=this.currentBreakpoint)!==null&&l!==void 0?l:0},()=>this.sheetOnDismiss(),l=>{this.currentBreakpoint!==l&&(this.currentBreakpoint=l,this.ionBreakpointDidChange.emit({breakpoint:l}))});this.gesture=s,this.moveSheetToBreakpoint=o,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,Of),this.gestureAnimationDismissing=!1})}async dismiss(t,n){var r;if(this.gestureAnimationDismissing&&n!==Of||n!=="handler"&&!await this.checkCanDismiss(t,n))return!1;const{presentingElement:a}=this;a!==void 0&&Pt(this)==="ios"&&zO(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(Ky,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0),this.currentTransition!==void 0&&await this.currentTransition;const s=Gy.get(this)||[];this.currentTransition=Qq(this,t,n,"modalLeave",q_,X7,{presentingEl:a,currentBreakpoint:(r=this.currentBreakpoint)!==null&&r!==void 0?r:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});const o=await this.currentTransition;if(o){const{delegate:l}=this.getDelegate();await kO(l,this.usersElement),Li(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),s.forEach(c=>c.destroy())}return this.currentBreakpoint=void 0,this.currentTransition=void 0,this.animation=void 0,o}onDidDismiss(){return M_(this.el,"ionModalDidDismiss")}onWillDismiss(){return M_(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(t){if(!this.isSheetModal){Ad("setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(t)){Ad("Attempted to set invalid breakpoint value ".concat(t,". Please double check that the breakpoint value is part of your defined breakpoints."));return}const{currentBreakpoint:n,moveSheetToBreakpoint:r,canDismiss:a,breakpoints:i}=this;n!==t&&r&&(this.sheetTransition=r({breakpoint:t,breakpointOffset:1-n,canDismiss:a!==void 0&&a!==!0&&i[0]===0}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:t,currentBreakpoint:n}=this;if(!t||n==null)return!1;const r=t.filter(o=>o!==0),i=(r.indexOf(n)+1)%r.length,s=r[i];return await this.setCurrentBreakpoint(s),!0}render(){const{handle:t,isSheetModal:n,presentingElement:r,htmlAttributes:a,handleBehavior:i,inheritedAttributes:s}=this,o=t!==!1&&n,l=Pt(this),c=r!==void 0&&l==="ios",u=i==="cycle";return Ae(Qn,Object.assign({"no-router":!0,tabindex:"-1"},a,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign({[l]:!0,"modal-default":!c&&!n,"modal-card":c,"modal-sheet":n,"overlay-hidden":!0},lK(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),Ae("ion-backdrop",{ref:d=>this.backdropEl=d,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),l==="ios"&&Ae("div",{class:"modal-shadow"}),Ae("div",Object.assign({role:"dialog"},s,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:d=>this.wrapperEl=d}),o&&Ae("button",{class:"modal-handle",tabIndex:u?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:u?this.onHandleClick:void 0,part:"handle"}),Ae("slot",null)))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:J7,md:Z7}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]}]),eX={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function tX(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(t=>{switch(t){case"ion-modal":customElements.get(t)||customElements.define(t,Q7);break;case"ion-backdrop":customElements.get(t)||sK();break}})}const nX=tX,rX="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",aX=Pn(class extends Ln{constructor(){super(),this.__registerHost()}componentDidLoad(){sX(async()=>{const t=po(window,"hybrid");if(qt.getBoolean("_testing")||Da(()=>import("./index9-ea5d04bd.js"),[]).then(r=>r.startTapClick(qt)),qt.getBoolean("statusTap",t)&&Da(()=>import("./status-tap-30dd22da.js"),[]).then(r=>r.startStatusTap()),qt.getBoolean("inputShims",iX())){const r=po(window,"ios")?"ios":"android";Da(()=>import("./input-shims-08a467cf.js"),[]).then(a=>a.startInputShims(qt,r))}const n=await Da(()=>Promise.resolve().then(()=>Wq),void 0);qt.getBoolean("hardwareBackButton",t)?n.startHardwareBackButton():n.blockHardwareBackButton(),typeof window<"u"&&Da(()=>Promise.resolve().then(()=>U7),void 0).then(r=>r.startKeyboardAssist(window)),Da(()=>import("./focus-visible-9c13edeb.js"),[]).then(r=>this.focusVisible=r.startFocusVisible())})}async setFocus(t){this.focusVisible&&this.focusVisible.setFocus(t)}render(){const t=Pt(this);return Ae(Qn,{class:{[t]:!0,"ion-page":!0,"force-statusbar-padding":qt.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return rX}},[0,"ion-app",{setFocus:[64]}]),iX=()=>!!(po(window,"ios")&&po(window,"mobile")||po(window,"android")&&po(window,"mobileweb")),sX=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)};function oX(){if(typeof customElements>"u")return;["ion-app"].forEach(t=>{switch(t){case"ion-app":customElements.get(t)||customElements.define(t,aX);break}})}const lX=oX,uX=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",cX=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Tt(this,"ionNavWillLoad",7),this.ionNavWillChange=Tt(this,"ionNavWillChange",3),this.ionNavDidChange=Tt(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=Pt(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const t=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Da(()=>import("./swipe-back-e1b9d76c.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>t(),n=>{var r;return(r=this.ani)===null||r===void 0?void 0:r.progressStep(n)},(n,r,a)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(n)},{oneTimeCallback:!0});let i=n?-.001:.001;n?i+=qd([0,0],[.32,.72],[0,1],[1,1],r)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=qd([0,0],[1,0],[.68,.28],[1,1],r)[0]),this.ani.progressEnd(n?1:0,i,a)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(t,n,r){const a=await this.lock();let i=!1;try{i=await this.transition(t,n,r)}catch(s){console.error(s)}return a(),i}async setRouteId(t,n,r,a){return{changed:await this.setRoot(t,n,{duration:r==="root"?0:void 0,direction:r==="back"?"back":"forward",animationBuilder:a}),element:this.activeEl}}async getRouteId(){const t=this.activeEl;return t?{id:t.tagName,element:t,params:this.activeParams}:void 0}async setRoot(t,n,r){if(this.activeComponent===t&&sO(n,this.activeParams))return!1;const a=this.activeEl,i=await GI(this.delegate,this.el,t,["ion-page","ion-page-invisible"],n);return this.activeComponent=t,this.activeEl=i,this.activeParams=n,await this.commit(i,a,r),await kO(this.delegate,a),!0}async transition(t,n,r={}){if(n===t)return!1;this.ionNavWillChange.emit();const{el:a,mode:i}=this,s=this.animated&&qt.getBoolean("animated",!0),o=r.animationBuilder||this.animation||qt.get("navAnimation");return await uO(Object.assign(Object.assign({mode:i,animated:s,enteringEl:t,leavingEl:n,baseEl:a,deepWait:aO(a),progressCallback:r.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},r),{animationBuilder:o})),this.ionNavDidChange.emit(),!0}async lock(){const t=this.waitPromise;let n;return this.waitPromise=new Promise(r=>n=r),t!==void 0&&await t,n}render(){return Ae("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return uX}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function dX(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(t=>{switch(t){case"ion-router-outlet":customElements.get(t)||customElements.define(t,cX);break}})}const hX=dX;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const pX=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",fX=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",mX=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Tt(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await XK(async(t,n)=>{t===!1&&n!==void 0&&await n,this.keyboardVisible=t})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:t,translucent:n,keyboardVisible:r}=this,a=Pt(this),i=r&&this.el.getAttribute("slot")!=="top";return Ae(Qn,{role:"tablist","aria-hidden":i?"true":null,class:Xo(t,{[a]:!0,"tab-bar-translucent":n,"tab-bar-hidden":i})},Ae("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:pX,md:fX}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function gX(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(t=>{switch(t){case"ion-tab-bar":customElements.get(t)||customElements.define(t,mX);break}})}const bX=gX;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yX=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',vX=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',xX=Pn(class extends Ln{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Tt(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=t=>{(t.key==="Enter"||t.key===" ")&&this.selectTab(t)},this.onClick=t=>{this.selectTab(t)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(t){const n=t.target,r=this.el.parentElement;(t.composedPath().includes(r)||n!=null&&n.contains(this.el))&&(this.selected=this.tab===t.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},zm(this.el,["aria-label"])),this.layout===void 0&&(this.layout=qt.get("tabButtonLayout","icon-top"))}selectTab(t){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),t.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:t,hasIcon:n,hasLabel:r,href:a,rel:i,target:s,layout:o,selected:l,tab:c,inheritedAttributes:u}=this,d=Pt(this),h={download:this.download,href:a,rel:i,target:s};return Ae(Qn,{onClick:this.onClick,onKeyup:this.onKeyUp,id:c!==void 0?"tab-button-".concat(c):null,class:{[d]:!0,"tab-selected":l,"tab-disabled":t,"tab-has-label":r,"tab-has-icon":n,"tab-has-label-only":r&&!n,"tab-has-icon-only":n&&!r,["tab-layout-".concat(o)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},Ae("a",Object.assign({},h,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":t?"true":null,tabindex:t?"-1":void 0},u),Ae("span",{class:"button-inner"},Ae("slot",null)),d==="md"&&Ae("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:yX,md:vX}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function wX(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(t=>{switch(t){case"ion-tab-button":customElements.get(t)||customElements.define(t,xX);break;case"ion-ripple-effect":customElements.get(t)||CO();break}})}const kX=wX,sd={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let od,VO,k0,jO=!1,Jy=!1,ZI=!1,Ra=!1,K_=null,Sk=!1;const SX=e=>{const t=new URL(e,Rr.$resourcesUrl$);return t.origin!==Wm.location.origin?t.href:t.pathname},Yl=(e,t="")=>()=>{},X_="http://www.w3.org/1999/xlink",Y_={},IX="http://www.w3.org/2000/svg",$X="http://www.w3.org/1999/xhtml",CX=e=>e!=null,QI=e=>(e=typeof e,e==="object"||e==="function");function TX(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const Pf=(e,t,...n)=>{let r=null,a=null,i=null,s=!1,o=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)r=d[h],Array.isArray(r)?c(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!QI(r))&&(r=String(r)),s&&o?l[l.length-1].$text$+=r:l.push(s?Zy(null,r):r),o=s)};if(c(n),t){t.key&&(a=t.key),t.name&&(i=t.name);{const d=t.className||t.class;d&&(t.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,NX);const u=Zy(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=a,u.$name$=i,u},Zy=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},HO={},EX=e=>e&&e.$tag$===HO,NX={forEach:(e,t)=>e.map(J_).forEach(t),map:(e,t)=>e.map(J_).map(t).map(_X)},J_=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),_X=e=>{if(typeof e.vtag=="function"){const n=Object.assign({},e.vattrs);return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),Pf(e.vtag,n,...e.vchildren||[])}const t=Zy(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},AX=e=>r9.map(t=>t(e)).find(t=>!!t),RX=(e,t)=>e!=null&&!QI(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Z_=new WeakMap,DX=(e,t,n)=>{let r=ev.get(e);o9&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,ev.set(e,r)},FX=(e,t,n,r)=>{var a;let i=GO(t,n);const s=ev.get(i);if(e=e.nodeType===11?e:Di,s)if(typeof s=="string"){e=e.head||e;let o=Z_.get(e),l;if(o||Z_.set(e,o=new Set),!o.has(i)){{l=Di.createElement("style"),l.innerHTML=s;const c=(a=Rr.$nonce$)!==null&&a!==void 0?a:TX(Di);c!=null&&l.setAttribute("nonce",c),e.insertBefore(l,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},MX=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,a=Yl("attachStyles",t.$tagName$),i=FX(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);r&10&&(n["s-sc"]=i,n.classList.add(i+"-h"),r&2&&n.classList.add(i+"-s")),a()},GO=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),Q_=(e,t,n,r,a,i)=>{if(n!==r){let s=rA(e,t),o=t.toLowerCase();if(t==="class"){const l=e.classList,c=eA(n),u=eA(r);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(t==="style"){for(const l in n)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!n||r[l]!==n[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):rA(Wm,o)?t=o.slice(2):t=o[2]+t.slice(3),n&&Rr.rel(e,t,n,!1),r&&Rr.ael(e,t,r,!1);else{const l=QI(r);if((s||l&&r!==null)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{const u=r==null?"":r;t==="list"?s=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch(u){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,c=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(X_,t):e.removeAttribute(t)):(!s||i&4||a)&&!l&&(r=r===!0?"":r,c?e.setAttributeNS(X_,t,r):e.setAttribute(t,r))}}},OX=/\s/,eA=e=>e?e.split(OX):[],qO=(e,t,n,r)=>{const a=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||Y_,s=t.$attrs$||Y_;for(r in i)r in s||Q_(a,r,i[r],void 0,n,t.$flags$);for(r in s)Q_(a,r,i[r],s[r],n,t.$flags$)},Qy=(e,t,n,r)=>{const a=t.$children$[n];let i=0,s,o,l;if(jO||(ZI=!0,a.$tag$==="slot"&&(od&&r.classList.add(od+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)s=a.$elm$=Di.createTextNode(a.$text$);else if(a.$flags$&1)s=a.$elm$=Di.createTextNode("");else{if(Ra||(Ra=a.$tag$==="svg"),s=a.$elm$=Di.createElementNS(Ra?IX:$X,a.$flags$&2?"slot-fb":a.$tag$),Ra&&a.$tag$==="foreignObject"&&(Ra=!1),qO(null,a,Ra),CX(od)&&s["s-si"]!==od&&s.classList.add(s["s-si"]=od),a.$children$)for(i=0;i<a.$children$.length;++i)o=Qy(e,a,i,s),o&&s.appendChild(o);a.$tag$==="svg"?Ra=!1:s.tagName==="foreignObject"&&(Ra=!0)}return s["s-hn"]=k0,a.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=VO,s["s-sn"]=a.$name$||"",l=e&&e.$children$&&e.$children$[n],l&&l.$tag$===a.$tag$&&e.$elm$&&cm(e.$elm$,!1)),s},cm=(e,t)=>{Rr.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const a=n[r];a["s-hn"]!==k0&&a["s-ol"]&&(YO(a).insertBefore(a,e$(a)),a["s-ol"].remove(),a["s-ol"]=void 0,ZI=!0),t&&cm(a,t)}Rr.$flags$&=-2},KO=(e,t,n,r,a,i)=>{let s=e["s-cr"]&&e["s-cr"].parentNode||e,o;for(s.shadowRoot&&s.tagName===k0&&(s=s.shadowRoot);a<=i;++a)r[a]&&(o=Qy(null,n,a,e),o&&(r[a].$elm$=o,s.insertBefore(o,e$(t))))},XO=(e,t,n,r,a)=>{for(;t<=n;++t)(r=e[t])&&(a=r.$elm$,QO(r),Jy=!0,a["s-ol"]?a["s-ol"].remove():cm(a,!0),a.remove())},PX=(e,t,n,r)=>{let a=0,i=0,s=0,o=0,l=t.length-1,c=t[0],u=t[l],d=r.length-1,h=r[0],p=r[d],f,m;for(;a<=l&&i<=d;)if(c==null)c=t[++a];else if(u==null)u=t[--l];else if(h==null)h=r[++i];else if(p==null)p=r[--d];else if(Cb(c,h))ld(c,h),c=t[++a],h=r[++i];else if(Cb(u,p))ld(u,p),u=t[--l],p=r[--d];else if(Cb(c,p))(c.$tag$==="slot"||p.$tag$==="slot")&&cm(c.$elm$.parentNode,!1),ld(c,p),e.insertBefore(c.$elm$,u.$elm$.nextSibling),c=t[++a],p=r[--d];else if(Cb(u,h))(c.$tag$==="slot"||p.$tag$==="slot")&&cm(u.$elm$.parentNode,!1),ld(u,h),e.insertBefore(u.$elm$,c.$elm$),u=t[--l],h=r[++i];else{for(s=-1,o=a;o<=l;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===h.$key$){s=o;break}s>=0?(m=t[s],m.$tag$!==h.$tag$?f=Qy(t&&t[i],n,s,e):(ld(m,h),t[s]=void 0,f=m.$elm$),h=r[++i]):(f=Qy(t&&t[i],n,i,e),h=r[++i]),f&&YO(c.$elm$).insertBefore(f,e$(c.$elm$))}a>l?KO(e,r[d+1]==null?null:r[d+1].$elm$,n,r,i,d):i>d&&XO(t,a,l)},Cb=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,e$=e=>e&&e["s-ol"]||e,YO=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ld=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$,i=t.$tag$,s=t.$text$;let o;s===null?(Ra=i==="svg"?!0:i==="foreignObject"?!1:Ra,i==="slot"||qO(e,t,Ra),r!==null&&a!==null?PX(n,r,t,a):a!==null?(e.$text$!==null&&(n.textContent=""),KO(n,null,t,a,0,a.length-1)):r!==null&&XO(r,0,r.length-1),Ra&&i==="svg"&&(Ra=!1)):(o=n["s-cr"])?o.parentNode.textContent=s:e.$text$!==s&&(n.data=s)},JO=e=>{const t=e.childNodes;let n,r,a,i,s,o;for(r=0,a=t.length;r<a;r++)if(n=t[r],n.nodeType===1){if(n["s-sr"]){for(s=n["s-sn"],n.hidden=!1,i=0;i<a;i++)if(o=t[i].nodeType,t[i]["s-hn"]!==n["s-hn"]||s!==""){if(o===1&&s===t[i].getAttribute("slot")){n.hidden=!0;break}}else if(o===1||o===3&&t[i].textContent.trim()!==""){n.hidden=!0;break}}JO(n)}},$i=[],ZO=e=>{let t,n,r,a,i,s,o=0;const l=e.childNodes,c=l.length;for(;o<c;o++){if(t=l[o],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,a=t["s-sn"],s=r.length-1;s>=0;s--)n=r[s],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==t["s-hn"]&&(tA(n,a)?(i=$i.find(u=>u.$nodeToRelocate$===n),Jy=!0,n["s-sn"]=n["s-sn"]||a,i?i.$slotRefNode$=t:$i.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&$i.map(u=>{tA(u.$nodeToRelocate$,n["s-sn"])&&(i=$i.find(d=>d.$nodeToRelocate$===n),i&&!u.$slotRefNode$&&(u.$slotRefNode$=i.$slotRefNode$))})):$i.some(u=>u.$nodeToRelocate$===n)||$i.push({$nodeToRelocate$:n}));t.nodeType===1&&ZO(t)}},tA=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",QO=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(QO)},LX=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||Zy(null,null),i=EX(t)?t:Pf(null,null,t);k0=n.tagName,r.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},r.$attrsToReflect$.map(([s,o])=>i.$attrs$[o]=n[s])),i.$tag$=null,i.$flags$|=4,e.$vnode$=i,i.$elm$=a.$elm$=n.shadowRoot||n,od=n["s-sc"],VO=n["s-cr"],jO=(r.$flags$&1)!==0,Jy=!1,ld(a,i);{if(Rr.$flags$|=1,ZI){ZO(i.$elm$);let s,o,l,c,u,d,h=0;for(;h<$i.length;h++)s=$i[h],o=s.$nodeToRelocate$,o["s-ol"]||(l=Di.createTextNode(""),l["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=l,o));for(h=0;h<$i.length;h++)if(s=$i[h],o=s.$nodeToRelocate$,s.$slotRefNode$){for(c=s.$slotRefNode$.parentNode,u=s.$slotRefNode$.nextSibling,l=o["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===o["s-sn"]&&c===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){u=d;break}(!u&&c!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),c.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}Jy&&JO(i.$elm$),Rr.$flags$&=-2,$i.length=0}},zX=(e,t)=>{},e3=(e,t)=>(e.$flags$|=16,zX(e,e.$ancestorComponent$),c9(()=>BX(e,t))),BX=(e,t)=>{const n=e.$hostElement$,r=Yl("scheduleUpdate",e.$cmpMeta$.$tagName$),a=n;let i;return t?i=Rd(a,"componentWillLoad"):i=Rd(a,"componentWillUpdate"),i=nA(i,()=>Rd(a,"componentWillRender")),r(),nA(i,()=>WX(e,a,t))},WX=async(e,t,n)=>{const r=e.$hostElement$,a=Yl("update",e.$cmpMeta$.$tagName$);r["s-rc"],n&&MX(e);const i=Yl("render",e.$cmpMeta$.$tagName$);UX(e,t,r),i(),a(),VX(e)},UX=(e,t,n)=>{try{K_=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(sd.hasRenderFn||sd.reflect)&&(sd.vdomRender||sd.reflect)&&(sd.hydrateServerSide||LX(e,t))}catch(o){Bm(o,e.$hostElement$)}return K_=null,null},VX=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Yl("postUpdate",t),a=n;e.$ancestorComponent$,Rd(a,"componentDidRender"),e.$flags$&64?(Rd(a,"componentDidUpdate"),r()):(e.$flags$|=64,Rd(a,"componentDidLoad"),r())},Rd=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){Bm(r)}},nA=(e,t)=>e&&e.then?e.then(t):t(),jX=(e,t)=>S0(e).$instanceValues$.get(t),HX=(e,t,n,r)=>{const a=S0(e),i=e,s=a.$instanceValues$.get(t),o=a.$flags$,l=i;n=RX(n,r.$members$[t][0]);const c=Number.isNaN(s)&&Number.isNaN(n);if(n!==s&&!c){a.$instanceValues$.set(t,n);{if(r.$watchers$&&o&128){const d=r.$watchers$[t];d&&d.map(h=>{try{l[h](n,s,t)}catch(p){Bm(p,i)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,s,t)===!1)return;e3(a,!1)}}}},GX=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),a=e.prototype;r.map(([i,[s]])=>{(s&31||s&32)&&Object.defineProperty(a,i,{get(){return jX(this,i)},set(o){HX(this,i,o,t)},configurable:!0,enumerable:!0})});{const i=new Map;a.attributeChangedCallback=function(s,o,l){Rr.jmp(()=>{const c=i.get(s);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(a.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},e.observedAttributes=r.filter(([s,o])=>o[0]&15).map(([s,o])=>{const l=o[1]||s;return i.set(l,s),o[0]&512&&t.$attrsToReflect$.push([s,l]),l})}}return e},qX=async(e,t,n,r,a)=>{if(!(t.$flags$&32)&&(a=e.constructor,t.$flags$|=32,customElements.whenDefined(n.$tagName$).then(()=>t.$flags$|=128),a.style)){let s=a.style;typeof s!="string"&&(s=s[t.$modeName$=AX(e)]);const o=GO(n,t.$modeName$);if(!ev.has(o)){const l=Yl("registerStyles",n.$tagName$);DX(o,s,!!(n.$flags$&1)),l()}}t.$ancestorComponent$,(()=>e3(t,!0))()},KX=e=>{},XX=e=>{if(!(Rr.$flags$&1)){const t=S0(e),n=t.$cmpMeta$,r=Yl("connectedCallback",n.$tagName$);t.$flags$&1?(t3(e,t,n.$listeners$),KX(t.$lazyInstance$)):(t.$flags$|=1,n.$flags$&12&&YX(e),n.$members$&&Object.entries(n.$members$).map(([a,[i]])=>{if(i&31&&e.hasOwnProperty(a)){const s=e[a];delete e[a],e[a]=s}}),qX(e,t,n)),r()}},YX=e=>{const t=e["s-cr"]=Di.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},JX=e=>{if(!(Rr.$flags$&1)){const t=S0(e);t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0)}},ZX=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){n9(this,n)},connectedCallback(){XX(this),r&&r.call(this)},disconnectedCallback(){JX(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),e.is=n.$tagName$,GX(e,n)},t3=(e,t,n,r)=>{n&&n.map(([a,i,s])=>{const o=e9(e,a),l=QX(t,s),c=t9(a);Rr.ael(o,i,l,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Rr.rel(o,i,l,c))})},QX=(e,t)=>n=>{try{sd.lazyLoad||e.$hostElement$[t](n)}catch(r){Bm(r)}},e9=(e,t)=>t&4?Di:t&8?Wm:t&16?Di.body:e,t9=e=>i9?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,n3=new WeakMap,S0=e=>n3.get(e),n9=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return t3(e,n,t.$listeners$),n3.set(e,n)},rA=(e,t)=>t in e,Bm=(e,t)=>(0,console.error)(e,t),ev=new Map,r9=[],Wm=typeof window<"u"?window:{},Di=Wm.document||{head:{}},a9=Wm.HTMLElement||class{},Rr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},i9=(()=>{let e=!1;try{Di.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(t){}return e})(),s9=e=>Promise.resolve(e),o9=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(e){}return!1})(),aA=[],r3=[],l9=(e,t)=>n=>{e.push(n),Sk||(Sk=!0,t&&Rr.$flags$&4?u9(Ik):Rr.raf(Ik))},iA=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Bm(n)}e.length=0},Ik=()=>{iA(aA),iA(r3),(Sk=aA.length>0)&&Rr.raf(Ik)},u9=e=>s9().then(e),c9=l9(r3,!0);let Uw;const d9=()=>{if(typeof window>"u")return new Map;if(!Uw){const e=window;e.Ionicons=e.Ionicons||{},Uw=e.Ionicons.map=e.Ionicons.map||new Map}return Uw},h9=e=>{let t=Vw(e.src);return t||(t=a3(e.name,e.icon,e.mode,e.ios,e.md),t?p9(t):e.icon&&(t=Vw(e.icon),t||(t=Vw(e.icon[e.mode]),t))?t:null)},p9=e=>{const t=d9().get(e);return t||SX("svg/".concat(e,".svg"))},a3=(e,t,n,r,a)=>(n=(n&&Tb(n))==="ios"?"ios":"md",r&&n==="ios"?e=Tb(r):a&&n==="md"?e=Tb(a):(!e&&t&&!i3(t)&&(e=t),tv(e)&&(e=Tb(e))),!tv(e)||e.trim()===""||e.replace(/[a-z]|-|\d/gi,"")!==""?null:e),Vw=e=>tv(e)&&(e=e.trim(),i3(e))?e:null,i3=e=>e.length>0&&/(\/|\.)/.test(e),tv=e=>typeof e=="string",Tb=e=>e.toLowerCase(),f9=(e,t=[])=>{const n={};return t.forEach(r=>{e.hasAttribute(r)&&(e.getAttribute(r)!==null&&(n[r]=e.getAttribute(r)),e.removeAttribute(r))}),n},m9=e=>e&&e.dir!==""?e.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",g9=e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].nodeName.toLowerCase()!=="svg"&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const r=n.getAttribute("class")||"";if(n.setAttribute("class",(r+" s-ion-icon").trim()),s3(n))return t.innerHTML}return""},s3=e=>{if(e.nodeType===1){if(e.nodeName.toLowerCase()==="script")return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(tv(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let t=0;t<e.childNodes.length;t++)if(!s3(e.childNodes[t]))return!1}return!0},b9=e=>e.startsWith("data:image/svg+xml"),y9=e=>e.indexOf(";utf8,")!==-1,Al=new Map,sA=new Map;let jw;const v9=(e,t)=>{let n=sA.get(e);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(b9(e)&&y9(e)){jw||(jw=new DOMParser);const a=jw.parseFromString(e,"text/html").querySelector("svg");return a&&Al.set(e,a.outerHTML),Promise.resolve()}else n=fetch(e).then(r=>{if(r.ok)return r.text().then(a=>{a&&t!==!1&&(a=g9(a)),Al.set(e,a||"")});Al.set(e,"")}),sA.set(e,n);else return Al.set(e,""),Promise.resolve();return n},x9=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",w9=ZX(class extends a9{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=k9(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=f9(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver(a=>{a[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())},{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=h9(this);e&&(Al.has(e)?this.svgContent=Al.get(e):v9(e,this.sanitize).then(()=>this.svgContent=Al.get(e)))}this.iconName=a3(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:n,el:r}=this,a=this.mode||"md",i=t?(t.includes("arrow")||t.includes("chevron"))&&e!==!1:!1,s=e||i;return Pf(HO,Object.assign({role:"img",class:Object.assign(Object.assign({[a]:!0},S9(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":s,"icon-rtl":s&&m9(r)})},n),this.svgContent?Pf("div",{class:"icon-inner",innerHTML:this.svgContent}):Pf("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return x9}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),k9=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",S9=e=>e?{"ion-color":!0,["ion-color-".concat(e)]:!0}:null;function I9(){if(typeof customElements>"u")return;["ion-icon"].forEach(t=>{switch(t){case"ion-icon":customElements.get(t)||customElements.define(t,w9);break}})}const $9=I9,t$=le.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),C9=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(e){if(e.id){const t=this.ionViewWillEnterCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(e=>e())}onIonViewDidEnter(e){if(e.id){const t=this.ionViewDidEnterCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(e=>e())}onIonViewWillLeave(e){if(e.id){const t=this.ionViewWillLeaveCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(e=>e())}onIonViewDidLeave(e){if(e.id){const t=this.ionViewDidLeaveCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(e=>e()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(e){this.componentCanBeDestroyedCallback=e}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},Hs=le.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:e=>{typeof window<"u"&&(typeof e=="string"?window.location.pathname=e:window.history.back())},navigate:e=>{typeof window<"u"&&(window.location.pathname=e)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(e,t)=>{typeof window<"u"&&(window.location.pathname=t)},resetTab:(e,t)=>{typeof window<"u"&&(window.location.pathname=t)}}),n$=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),I0=e=>e.replace(/([A-Z])/g,t=>"-".concat(t[0].toLowerCase())),r$=(e,t,n={})=>{if(e instanceof Element){const r=T9(e.classList,t,n);r!==""&&(e.className=r),Object.keys(t).forEach(a=>{if(!(a==="children"||a==="style"||a==="ref"||a==="class"||a==="className"||a==="forwardedRef"))if(a.indexOf("on")===0&&a[2]===a[2].toUpperCase()){const i=a.substring(2),s=i[0].toLowerCase()+i.substring(1);Um(s)||N9(e,s,t[a])}else e[a]=t[a],typeof t[a]==="string"&&e.setAttribute(I0(a),t[a])})}},T9=(e,t,n)=>{const r=t.className||t.class,a=n.className||n.class,i=Hw(e),s=Hw(r?r.split(" "):[]),o=Hw(a?a.split(" "):[]),l=[];return i.forEach(c=>{s.has(c)?(l.push(c),s.delete(c)):o.has(c)||l.push(c)}),s.forEach(c=>l.push(c)),l.join(" ")},E9=e=>{switch(e){case"doubleclick":return"dblclick"}return e};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const Um=e=>{if(typeof document>"u")return!0;{const t="on"+E9(e);let n=t in document;if(!n){const r=document.createElement("div");r.setAttribute(t,"return;"),n=typeof r[t]=="function"}return n}},N9=(e,t,n)=>{const r=e.__events||(e.__events={}),a=r[t];a&&e.removeEventListener(t,a),e.addEventListener(t,r[t]=function(s){n&&n.call(this,s)})},Hw=e=>{const t=new Map;return e.forEach(n=>t.set(n,n)),t},_9=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},$0=(...e)=>t=>{e.forEach(n=>{_9(n,t)})},A9=(e,t)=>{const n=(r,a)=>le.createElement(e,Object.assign({},r,{forwardedRef:a}));return n.displayName=t,le.forwardRef(n)},R9=(e,t)=>{t!==void 0&&typeof customElements<"u"&&!customElements.get(e)&&customElements.define(e,t)},Lr=(e,t,n,r)=>{r!==void 0&&r();const a=n$(e),i=class extends le.Component{constructor(s){super(s),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(s){r$(this.componentEl,this.props,s)}render(){const s=this.props,{children:o,forwardedRef:l,style:c,className:u,ref:d}=s,h=Ar(s,["children","forwardedRef","style","className","ref"]);let p=Object.keys(h).reduce((m,g)=>{const b=h[g];if(g.indexOf("on")===0&&g[2]===g[2].toUpperCase()){const y=g.substring(2).toLowerCase();typeof document<"u"&&Um(y)&&(m[g]=b)}else{const y=typeof b;(y==="string"||y==="boolean"||y==="number")&&(m[I0(g)]=b)}return m},{});n&&(p=n(this.props,p));const f=Object.assign(Object.assign({},p),{ref:$0(l,this.setComponentElRef),style:c});return oe.createElement(e,f,o)}static get displayName(){return a}};return t&&(i.contextType=t),A9(i,a)},oA=Lr("ion-card-header",void 0,void 0,fK),lA=Lr("ion-card-title",void 0,void 0,vK),lt=Lr("ion-col",void 0,void 0,AK),o3=Lr("ion-content",void 0,void 0,LK),br=Lr("ion-grid",void 0,void 0,QK),D9=Lr("ion-header",void 0,void 0,u7),uA=Lr("ion-label",void 0,void 0,c7),it=Lr("ion-row",void 0,void 0,v7),F9=Lr("ion-segment",void 0,void 0,I7),cA=Lr("ion-segment-button",void 0,void 0,_7),vu=(e,t)=>{const n=(r,a)=>le.createElement(e,Object.assign({},r,{forwardedRef:a}));return n.displayName=t,le.forwardRef(n)},a$=()=>{if(typeof window<"u"){const e=window.Ionic;if(e&&e.config)return e.config}return null},l3=(e,t)=>{R9(e,t);const n=n$(e),r=class extends le.Component{constructor(a){super(a),this.handleClick=i=>{const{routerLink:s,routerDirection:o,routerOptions:l,routerAnimation:c}=this.props;s!==void 0&&(i.preventDefault(),this.context.navigate(s,o,void 0,c,l))},this.ref=le.createRef(),this.stableMergedRefs=$0(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){const i=this.ref.current;r$(i,this.props,a)}render(){const a=this.props,{children:i,forwardedRef:s,style:o,className:l,ref:c}=a,u=Ar(a,["children","forwardedRef","style","className","ref"]),d=Object.keys(u).reduce((p,f)=>{if(f.indexOf("on")===0&&f[2]===f[2].toUpperCase()){const m=f.substring(2).toLowerCase();Um(m)&&(p[f]=u[f])}else["string","boolean","number"].includes(typeof u[f])&&(p[I0(f)]=u[f]);return p},{}),h=Object.assign(Object.assign({},d),{ref:this.stableMergedRefs,style:o});if(this.props.routerLink&&!this.props.href&&(h.href=this.props.routerLink),h.onClick){const p=h.onClick;h.onClick=f=>{p(f),f.defaultPrevented||this.handleClick(f)}}else h.onClick=this.handleClick;return oe.createElement(e,h,i)}static get displayName(){return n}static get contextType(){return Hs}};return vu(r,n)},Ye=l3("ion-button",A7),dA=l3("ion-card",M7),M9=(e,t)=>{e instanceof Element&&Object.keys(t).forEach(n=>{if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const r=n.substring(2),a=r[0].toLowerCase()+r.substring(1);Um(a)||O9(e,a)}})},O9=(e,t)=>{const n=e.__events||(e.__events={}),r=n[t];r&&(e.removeEventListener(t,r),n[t]=void 0)},P9=(e,t,n)=>{t&&t();const r=n$(e),a=class extends le.Component{constructor(i){super(i),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=s=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(s)},this.handleDidDismiss=s=>{const o=this.wrapperRef.current,l=this.ref.current;o&&l&&(l.append(o),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(s)},this.ref=le.createRef(),this.stableMergedRefs=$0(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=le.createRef()}componentDidMount(){var i,s,o;this.componentDidUpdate(this.props),(i=this.ref.current)===null||i===void 0||i.addEventListener("ionMount",this.handleIonMount),(s=this.ref.current)===null||s===void 0||s.addEventListener("willPresent",this.handleWillPresent),(o=this.ref.current)===null||o===void 0||o.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(i){const s=this.ref.current;r$(s,this.props,i)}componentWillUnmount(){const i=this.ref.current;i&&this.state.isOpen&&(i.removeEventListener("didDismiss",this.handleDidDismiss),i.remove(),M9(i,this.props))}render(){const i=this.props,{children:s,forwardedRef:o,style:l,className:c,ref:u}=i,d=Ar(i,["children","forwardedRef","style","className","ref"]),h=Object.keys(d).reduce((m,g)=>{if(g.indexOf("on")===0&&g[2]===g[2].toUpperCase()){const b=g.substring(2).toLowerCase();Um(b)&&(m[g]=d[g])}else["string","boolean","number"].includes(typeof d[g])&&(m[I0(g)]=d[g]);return m},{}),p=Object.assign(Object.assign({},h),{ref:this.stableMergedRefs,style:l}),f=()=>n?"".concat(hA," ion-page"):hA;return oe.createElement("template",{},oe.createElement(e,p,this.state.isOpen||this.props.keepContentsMounted?oe.createElement("div",{ref:this.wrapperRef,className:f()},s):null))}static get displayName(){return r}};return vu(a,r)},hA="ion-delegate-host",es=P9("ion-modal",nX,!0),L9=le.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),z9=({onAddOverlay:e,onRemoveOverlay:t})=>{const[n,r]=oe.useState({}),a=oe.useRef({});a.current=n,oe.useEffect(()=>{e(i),t(s)},[]);const i=(l,c,u)=>{const d=Object.assign({},a.current);d[l]={component:c,containerElement:u},r(d)},s=l=>{const c=Object.assign({},a.current);delete c[l],r(c)},o=Object.keys(n);return le.createElement(le.Fragment,null,o.map(l=>{const c=n[l];return M5.createPortal(c.component,c.containerElement,"overlay-".concat(l))}))},B9=Lr("ion-tab-button",void 0,void 0,kX),W9=Lr("ion-tab-bar",void 0,void 0,bX),$k=Lr("ion-router-outlet",void 0,void 0,hX),U9=Lr("ion-app",void 0,void 0,lX),V9=Lr("ion-icon",void 0,void 0,$9),j9=(()=>class extends le.Component{constructor(e){super(e),this.ionContext={addOverlay:(t,n,r)=>{this.addOverlayCallback&&this.addOverlayCallback(t,n,r)},removeOverlay:t=>{this.removeOverlayCallback&&this.removeOverlayCallback(t)}}}render(){return le.createElement(L9.Provider,{value:this.ionContext},le.createElement(U9,Object.assign({},this.props),this.props.children),le.createElement(z9,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}}))}static get displayName(){return"IonApp"}})(),i$=le.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class u3 extends le.PureComponent{constructor(t){super(t),this.ionPageElementRef=le.createRef(),this.stableMergedRefs=$0(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const t=this.props,{className:n,children:r,routeInfo:a,forwardedRef:i}=t,s=Ar(t,["className","children","routeInfo","forwardedRef"]);return le.createElement(t$.Consumer,null,o=>(this.ionLifeCycleContext=o,le.createElement("div",Object.assign({className:n?"".concat(n," ion-page"):"ion-page",ref:this.stableMergedRefs},s),r)))}static get contextType(){return i$}}class H9 extends le.Component{constructor(t){super(t)}render(){const t=this.props,{className:n,children:r,forwardedRef:a}=t,i=Ar(t,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?le.createElement(u3,Object.assign({className:n?"".concat(n):"",routeInfo:this.context.routeInfo,forwardedRef:a},i),r):le.createElement("div",Object.assign({className:n?"ion-page ".concat(n):"ion-page",ref:a},i),r)}static get displayName(){return"IonPage"}static get contextType(){return Hs}}vu(H9,"IonPage");const G9=(e,t)=>{const n=new WeakMap;return{attachViewToDom:async(i,s,o,l)=>{const c=document.createElement("div");l&&c.classList.add(...l),i.appendChild(c);const u=s(o),d=II.createPortal(u,c);return n.set(c,d),e(d),Promise.resolve(c)},removeViewFromDom:(i,s)=>{const o=n.get(s);return o&&t(o),s.remove(),Promise.resolve()}}},q9=Lr("ion-nav",void 0,void 0,m7),K9=e=>{var{children:t,forwardedRef:n}=e,r=Ar(e,["children","forwardedRef"]);const[a,i]=oe.useState([]),s=c=>i(u=>[...u,c]),o=c=>i(u=>u.filter(d=>d!==c)),l=oe.useMemo(()=>G9(s,o),[]);return le.createElement(q9,Object.assign({delegate:l,ref:n},r),a)},X9=vu(K9,"IonNav");le.createContext({activeTab:void 0,selectTab:()=>!1});const Y9=typeof HTMLElement<"u"?HTMLElement:class{};class J9 extends le.Component{constructor(t){super(t),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Hd(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const t=this.props,{StackManager:n,children:r,routeInfo:a}=t,i=Ar(t,["StackManager","children","routeInfo"]);return le.createElement(t$.Consumer,null,s=>(this.ionLifeCycleContext=s,le.createElement(n,{routeInfo:a},le.createElement($k,Object.assign({setRef:o=>this.ionRouterOutlet=o},i),r))))}static get contextType(){return i$}}class Z9 extends le.Component{constructor(t){super(t)}render(){const t=this.context.getStackManager(),n=this.props,{children:r,forwardedRef:a}=n,i=Ar(n,["children","forwardedRef"]);return this.context.hasIonicRouter()?i.ionPage?le.createElement(J9,Object.assign({StackManager:t,routeInfo:this.context.routeInfo},i),r):le.createElement(t,{routeInfo:this.context.routeInfo},le.createElement($k,Object.assign({},i,{forwardedRef:a}),r)):le.createElement($k,Object.assign({ref:a},this.props),this.props.children)}static get contextType(){return Hs}}const Q9=vu(Z9,"IonRouterOutlet"),Gw=(()=>class extends le.Component{constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const e=this.props,t=Ar(e,["onClick"]);return le.createElement(B9,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},t))}static get displayName(){return"IonTabButton"}})();class eY extends le.PureComponent{constructor(t){super(t),this.setActiveTabOnContext=r=>{};const n={};le.Children.forEach(t.children,r=>{var a,i,s,o;r!=null&&typeof r=="object"&&r.props&&(r.type===Gw||r.type.isTabButton)&&(n[r.props.tab]={originalHref:r.props.href,currentHref:r.props.href,originalRouteOptions:r.props.href===((a=t.routeInfo)===null||a===void 0?void 0:a.pathname)?(i=t.routeInfo)===null||i===void 0?void 0:i.routeOptions:void 0,currentRouteOptions:r.props.href===((s=t.routeInfo)===null||s===void 0?void 0:s.pathname)?(o=t.routeInfo)===null||o===void 0?void 0:o.routeOptions:void 0})}),this.state={tabs:n},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const t=this.state.tabs,r=Object.keys(t).find(a=>{const i=t[a].originalHref;return this.props.routeInfo.pathname.startsWith(i)});r&&this.setState({activeTab:r})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(t){const n=this.state.tabs[t];return n?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:n.currentHref,tab:t,selected:t===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(t,n){var r,a,i;const s=Object.assign({},n.tabs),l=Object.keys(n.tabs).find(u=>{const d=n.tabs[u].originalHref;return t.routeInfo.pathname.startsWith(d)});le.Children.forEach(t.children,u=>{if(u!=null&&typeof u=="object"&&u.props&&(u.type===Gw||u.type.isTabButton)){const d=s[u.props.tab];(!d||d.originalHref!==u.props.href)&&(s[u.props.tab]={originalHref:u.props.href,currentHref:u.props.href,originalRouteOptions:u.props.routeOptions,currentRouteOptions:u.props.routeOptions})}});const{activeTab:c}=n;if(l&&c){const u=n.tabs[c].currentHref,d=n.tabs[c].currentRouteOptions;(l!==c||u!==((r=t.routeInfo)===null||r===void 0?void 0:r.pathname)||d!==((a=t.routeInfo)===null||a===void 0?void 0:a.routeOptions))&&(s[l]={originalHref:s[l].originalHref,currentHref:t.routeInfo.pathname+(t.routeInfo.search||""),originalRouteOptions:s[l].originalRouteOptions,currentRouteOptions:(i=t.routeInfo)===null||i===void 0?void 0:i.routeOptions},t.routeInfo.routeAction==="pop"&&l!==c&&(s[c]={originalHref:s[c].originalHref,currentHref:s[c].originalHref,originalRouteOptions:s[c].originalRouteOptions,currentRouteOptions:s[c].currentRouteOptions}))}return l&&t.onSetCurrentTab(l,t.routeInfo),{activeTab:l,tabs:s}}onTabButtonClick(t,n){const r=this.state.tabs[t.detail.tab],a=r.originalHref,i=t.detail.href,{activeTab:s}=this.state;n&&n(t),s===t.detail.tab?a!==i&&this.context.resetTab(t.detail.tab,a,r.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:t.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:t.detail.tab}})),this.setActiveTabOnContext(t.detail.tab),this.context.changeTab(t.detail.tab,i,t.detail.routeOptions))}renderTabButton(t){return n=>{var r,a;if(n!=null&&n.props&&(n.type===Gw||n.type.isTabButton)){const i=n.props.tab===t?(r=this.props.routeInfo)===null||r===void 0?void 0:r.pathname:this.state.tabs[n.props.tab].currentHref,s=n.props.tab===t?(a=this.props.routeInfo)===null||a===void 0?void 0:a.routeOptions:this.state.tabs[n.props.tab].currentRouteOptions;return le.cloneElement(n,{href:i,routeOptions:s,onClick:o=>this.onTabButtonClick(o,n.props.onClick)})}return null}}render(){const{activeTab:t}=this.state;return le.createElement(W9,Object.assign({},this.props,{selectedTab:t}),le.Children.map(this.props.children,this.renderTabButton(t)))}static get contextType(){return Hs}}const tY=le.memo(e=>{var{forwardedRef:t}=e,n=Ar(e,["forwardedRef"]);const r=oe.useContext(Hs);return le.createElement(eY,Object.assign({ref:t},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)});vu(tY,"IonTabBar");class nY extends Y9{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",nY));class rY extends le.PureComponent{constructor(t){super(t),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var t,n;const r=this.props,{icon:a,ios:i,md:s,mode:o}=r,l=Ar(r,["icon","ios","md","mode"]);let c;const u=a$(),d=o||(u==null?void 0:u.get("mode"));return i||s?d==="ios"?c=(t=i!=null?i:s)!==null&&t!==void 0?t:a:c=(n=s!=null?s:i)!==null&&n!==void 0?n:a:c=a,le.createElement(V9,Object.assign({ref:this.props.forwardedRef,icon:c},l),this.props.children)}static get contextType(){return Hs}}const c3=vu(rY,"IonIcon");class s$ extends le.PureComponent{render(){const t=this.context.getIonRoute();return!this.context.hasIonicRouter()||!s$?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):le.createElement(t,Object.assign({},this.props))}static get contextType(){return Hs}}class d3 extends le.PureComponent{render(){const t=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!d3?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):le.createElement(t,Object.assign({},this.props))}static get contextType(){return Hs}}const aY=le.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class U3e extends le.PureComponent{constructor(t){super(t),this.nodes=new Map,this.animation=$n(t.id)}setupAnimation(t){const n=this.animation;this.nodes.size>0&&n.addElement(Array.from(this.nodes.values())),pA(n,t),fA(n,t)}componentDidMount(){const t=this.props;this.setupAnimation(t)}componentDidUpdate(t){const n=this.animation,r=this.props;pA(n,r,t),iY(n,r,t),fA(n,r,t)}render(){const{children:t}=this.props;return le.createElement(le.Fragment,null,le.Children.map(t,(n,r)=>le.cloneElement(n,{ref:a=>this.nodes.set(r,a)})))}}const pA=(e,t={},n={})=>{const r=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const l in t)t.hasOwnProperty(l)&&!r.includes(l)&&t[l]!==n[l]&&e[l](t[l]);const a=t.from;a&&a!==n.from&&(Array.isArray(a)?a:[a]).forEach(c=>e.from(c.property,c.value));const i=t.to;i&&i!==n.to&&(Array.isArray(i)?i:[i]).forEach(c=>e.to(c.property,c.value));const s=t.fromTo;s&&s!==n.fromTo&&(Array.isArray(s)?s:[s]).forEach(c=>e.fromTo(c.property,c.fromValue,c.toValue));const o=t.onFinish;o&&o!==n.onFinish&&(Array.isArray(o)?o:[o]).forEach(c=>e.onFinish(c.callback,c.opts))},iY=(e,t={},n={})=>{var r,a,i,s,o;const{progressStart:l,progressStep:c,progressEnd:u}=t;l&&(((r=n.progressStart)===null||r===void 0?void 0:r.forceLinearEasing)!==(l==null?void 0:l.forceLinearEasing)||((a=n.progressStart)===null||a===void 0?void 0:a.step)!==(l==null?void 0:l.step))&&e.progressStart(l.forceLinearEasing,l.step),c&&((i=n.progressStep)===null||i===void 0?void 0:i.step)!==(c==null?void 0:c.step)&&e.progressStep(c.step),u&&(((s=n.progressEnd)===null||s===void 0?void 0:s.playTo)!==(u==null?void 0:u.playTo)||((o=n.progressEnd)===null||o===void 0?void 0:o.step)!==(u==null?void 0:u.step)||(n==null?void 0:n.dur)!==(u==null?void 0:u.dur))&&e.progressEnd(u.playTo,u.step,u.dur)},fA=(e,t={},n={})=>{!n.play&&t.play&&e.play(),!n.pause&&t.pause&&e.pause(),!n.stop&&t.stop&&e.stop(),!n.destroy&&t.destroy&&e.destroy()},mA={main:0},nv=(e="main")=>{var t;const n=((t=mA[e])!==null&&t!==void 0?t:0)+1;return mA[e]=n,n.toString()},h3=(e={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),Pq(Object.assign({},e))},p3=le.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class gA extends le.Component{constructor(t){super(t),this.ionLifeCycleContext=new C9,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:t}=this.state;return le.createElement(t$.Provider,{value:this.ionLifeCycleContext},t&&this.props.children)}}class sY{constructor(){this.locationHistory=[],this.tabHistory={}}add(t){t.routeAction==="push"||t.routeAction==null?this._add(t):t.routeAction==="pop"?this._pop(t):t.routeAction==="replace"&&this._replace(t),t.routeDirection==="root"&&(this._clear(),this._add(t))}clearTabStack(t){const n=this._getRouteInfosByKey(t);n&&(n.forEach(r=>{this.locationHistory=this.locationHistory.filter(a=>a.id!==r.id)}),this.tabHistory[t]=[])}update(t){const n=this.locationHistory.findIndex(a=>a.id===t.id);n>-1&&this.locationHistory.splice(n,1,t);const r=this.tabHistory[t.tab||""];if(r){const a=r.findIndex(i=>i.id===t.id);a>-1?r.splice(a,1,t):r.push(t)}else t.tab&&(this.tabHistory[t.tab]=[t])}_add(t){const n=this._getRouteInfosByKey(t.tab);n&&(this._areRoutesEqual(n[n.length-1],t)&&n.pop(),n.push(t)),this.locationHistory.push(t)}_areRoutesEqual(t,n){return!t||!n?!1:t.pathname===n.pathname&&t.search===n.search}_pop(t){const n=this._getRouteInfosByKey(t.tab);n&&(n.pop(),n.pop(),n.push(t)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(t)}_replace(t){const n=this._getRouteInfosByKey(t.tab);n&&n.pop(),this.locationHistory.pop(),this._add(t)}_clear(){Object.keys(this.tabHistory).forEach(n=>this.tabHistory[n]=[]),this.locationHistory=[]}_getRouteInfosByKey(t){let n;return t&&(n=this.tabHistory[t],n||(n=this.tabHistory[t]=[])),n}getFirstRouteInfoForTab(t){const n=this._getRouteInfosByKey(t);if(n)return n[0]}getCurrentRouteInfoForTab(t){const n=this._getRouteInfosByKey(t);if(n)return n[n.length-1]}findLastLocation(t){const n=this._getRouteInfosByKey(t.tab);if(n)for(let r=n.length-2;r>=0;r--){const a=n[r];if(a&&a.pathname===t.pushedByRoute)return a}for(let r=this.locationHistory.length-2;r>=0;r--){const a=this.locationHistory[r];if(a&&a.pathname===t.pushedByRoute)return a}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class oY extends le.PureComponent{constructor(t){super(t),this.ionRouterContextValue={push:(n,r,a,i,s)=>{this.navigate(n,r,a,s,i)},back:n=>{this.goBack(void 0,n)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(t){t.detail.register(0,n=>{this.nativeGoBack(),n()})}goBack(t,n){this.props.onNavigateBack(t,n)}nativeGoBack(){this.props.onNativeBack()}navigate(t,n="forward",r="push",a,i,s){this.props.onNavigate(t,r,n,a,i,s)}getPageManager(){return u3}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return le.createElement(Hs.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},le.createElement(aY.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class lY{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(t){const{outletId:n}=t;this.viewStacks[n]?this.viewStacks[n].push(t):this.viewStacks[n]=[t]}clear(t){return setTimeout(()=>{delete this.viewStacks[t]},500)}getViewItemsForOutlet(t){return this.viewStacks[t]||[]}remove(t){const{outletId:n}=t,r=this.viewStacks[n];if(r){const a=r.find(i=>i.id===t.id);a&&(a.mount=!1,this.viewStacks[n]=r.filter(i=>i.id!==a.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const t=this.getStackIds(),n=[];return t.forEach(r=>{n.push(...this.viewStacks[r])}),n}}class uY extends le.PureComponent{render(){return le.createElement(xl,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}class cY extends lY{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(t,n,r,a){const i={id:nv("viewItem"),outletId:t,ionPageElement:a,reactElement:n,mount:!0,ionRoute:!1},s={exact:n.props.exact,path:n.props.path||n.props.from,component:n.props.component},o=Gl(r.pathname,s);return n.type===s$&&(i.ionRoute=!0,i.disableIonPageManagement=n.props.disableIonPageManagement),i.routeData={match:o,childProps:n.props},i}getChildrenToRender(t,n,r){const a=this.getViewItemsForOutlet(t);return le.Children.forEach(n.props.children,s=>{const o=a.find(l=>bA(s,l.routeData.childProps.path||l.routeData.childProps.from));o&&(o.reactElement=s)}),a.map(s=>{let o;if(s.ionRoute&&!s.disableIonPageManagement)o=le.createElement(gA,{key:"view-".concat(s.id),mount:s.mount,removeView:()=>this.remove(s)},le.cloneElement(s.reactElement,{computedMatch:s.routeData.match}));else{const l=bA(s.reactElement,r.pathname);o=le.createElement(gA,{key:"view-".concat(s.id),mount:s.mount,removeView:()=>this.remove(s)},le.cloneElement(s.reactElement,{computedMatch:s.routeData.match})),!l&&s.routeData.match&&(s.routeData.match=void 0,s.mount=!1)}return o})}findViewItemByRouteInfo(t,n,r){const{viewItem:a,match:i}=this.findViewItemByPath(t.pathname,n);return(r===void 0||r===!0)&&a&&i&&(a.routeData.match=i),a}findLeavingViewItemByRouteInfo(t,n,r=!0){const{viewItem:a}=this.findViewItemByPath(t.lastPathname,n,!1,r);return a}findViewItemByPathname(t,n){const{viewItem:r}=this.findViewItemByPath(t,n);return r}findViewItemByPath(t,n,r,a){let i,s,o;if(n)o=this.getViewItemsForOutlet(n),o.some(l),i||o.some(c);else{const u=this.getAllViewItems();u.some(l),i||u.some(c)}return{viewItem:i,match:s};function l(u){if(a&&!u.ionRoute)return!1;const d={exact:r?!0:u.routeData.childProps.exact,path:u.routeData.childProps.path||u.routeData.childProps.from,component:u.routeData.childProps.component},h=Gl(t,d);return h?(i=u,s=h,!0):!1}function c(u){return!u.routeData.childProps.path&&!u.routeData.childProps.from?(s={path:t,url:t,isExact:!0,params:{}},i=u,!0):!1}}}function bA(e,t,n){const r={exact:n?!0:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};return Gl(t,r)}function dY(e){let t;if(typeof e=="string"?t=e:t=e.outerHTML,document){const n=document.createElement("div");n.innerHTML=t,n.style.zIndex="";const r=n.getElementsByTagName("ion-back-button");return r[0]&&r[0].remove(),n.firstChild}}const yA=e=>!e.classList.contains("ion-page-invisible")&&!e.classList.contains("ion-page-hidden");class hY extends le.PureComponent{constructor(t){super(t),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=nv("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(t){const{pathname:n}=this.props.routeInfo,{pathname:r}=t.routeInfo;n!==r?(this.prevProps=t,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(t){var n,r;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let a=this.context.findViewItemByRouteInfo(t,this.id),i=this.context.findLeavingViewItemByRouteInfo(t,this.id);!i&&t.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(t.prevRouteLastPathname,this.id)),i&&(t.routeAction==="replace"?i.mount=!1:t.routeAction==="push"&&t.routeDirection==="forward"?!((n=t.routeOptions)===null||n===void 0)&&n.unmount&&(i.mount=!1):t.routeDirection!=="none"&&a!==i&&(i.mount=!1));const s=pY((r=this.ionRouterOutlet)===null||r===void 0?void 0:r.props.children,t);if(a?a.reactElement=s:s&&(a=this.context.createViewItem(this.id,s,t),this.context.addViewItem(a)),a&&a.ionPageElement){if(a===i&&a.routeData.match.url!==t.pathname||(!i&&this.props.routeInfo.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),yA(a.ionPageElement)&&i!==void 0&&!yA(i.ionPageElement)))return;this.transitionPage(t,a,i)}else i&&!s&&!a&&i.ionPageElement&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(t,n){const r=this.context.findViewItemByRouteInfo(n,this.id);if(r){const a=r.ionPageElement;if(r.ionPageElement=t,r.ionRoute=!0,a===t)return}this.handlePageTransition(n)}async setupRouterOutlet(t){const n=()=>{const i=a$();if(!(i&&i.get("swipeBackEnabled",t.mode==="ios")))return!1;const{routeInfo:o}=this.props,l=this.prevProps&&this.prevProps.routeInfo.pathname===o.pushedByRoute?this.prevProps.routeInfo:{pathname:o.pushedByRoute||""},c=this.context.findViewItemByRouteInfo(l,this.id,!1);return!!c&&c.mount&&c.routeData.match.path!==o.pathname},r=async()=>{const{routeInfo:i}=this.props,s=this.prevProps&&this.prevProps.routeInfo.pathname===i.pushedByRoute?this.prevProps.routeInfo:{pathname:i.pushedByRoute||""},o=this.context.findViewItemByRouteInfo(s,this.id,!1),l=this.context.findViewItemByRouteInfo(i,this.id,!1);return o&&l&&await this.transitionPage(i,o,l,"back",!0),Promise.resolve()},a=i=>{if(i)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:s}=this.props,o=this.prevProps&&this.prevProps.routeInfo.pathname===s.pushedByRoute?this.prevProps.routeInfo:{pathname:s.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(o,this.id,!1),c=this.context.findViewItemByRouteInfo(s,this.id,!1);if(l!==c&&(l==null?void 0:l.ionPageElement)!==void 0){const{ionPageElement:u}=l;u.setAttribute("aria-hidden","true"),u.classList.add("ion-page-hidden")}}};t.swipeHandler={canStart:n,onStart:r,onEnd:a}}async transitionPage(t,n,r,a,i=!1){const s=async(u,d)=>{const h=this.skipTransition;h?this.skipTransition=!1:(u.classList.add("ion-page"),u.classList.add("ion-page-invisible")),await o.commit(u,d,{duration:h||c===void 0?0:void 0,direction:c,showGoBack:!!t.pushedByRoute,progressAnimation:i,animationBuilder:t.routeAnimation})},o=this.routerOutletElement,l=t.routeDirection==="none"||t.routeDirection==="root"?void 0:t.routeDirection,c=a!=null?a:l;if(n&&n.ionPageElement&&this.routerOutletElement)if(r&&r.ionPageElement&&n===r)if(fY(r.reactElement,t.pathname,!0)){const d=dY(r.ionPageElement.outerHTML);d&&(this.routerOutletElement.appendChild(d),await s(n.ionPageElement,d),this.routerOutletElement.removeChild(d))}else await s(n.ionPageElement,void 0);else await s(n.ionPageElement,r==null?void 0:r.ionPageElement),r&&r.ionPageElement&&!i&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:t}=this.props,n=le.Children.only(t);this.ionRouterOutlet=n;const r=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return le.createElement(i$.Provider,{value:this.stackContextValue},le.cloneElement(n,{ref:a=>{n.props.setRef&&n.props.setRef(a),n.props.forwardedRef&&(n.props.forwardedRef.current=a),this.routerOutletElement=a;const{ref:i}=n;typeof i=="function"&&i(a)}},r))}static get contextType(){return p3}}function pY(e,t){let n;return le.Children.forEach(e,r=>{const a={exact:r.props.exact,path:r.props.path||r.props.from,component:r.props.component};Gl(t.pathname,a)&&(n=r)}),n||(le.Children.forEach(e,r=>{r.props.path||r.props.from||(n=r)}),n)}function fY(e,t,n){const r={exact:n?!0:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};return Gl(t,r)}class mY extends le.PureComponent{constructor(t){super(t),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new sY,this.viewStack=new cY,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const n={id:nv("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(n),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:n}}handleChangeTab(t,n,r){if(!n)return;const a=this.locationHistory.getCurrentRouteInfoForTab(t),[i,s]=n.split("?");a?(this.incomingRouteParams=Object.assign(Object.assign({},a),{routeAction:"push",routeDirection:"none"}),a.pathname===i?(this.incomingRouteParams.routeOptions=r,this.props.history.push(a.pathname+(a.search||""))):(this.incomingRouteParams.pathname=i,this.incomingRouteParams.search=s?"?"+s:void 0,this.incomingRouteParams.routeOptions=r,this.props.history.push(i+(s?"?"+s:"")))):this.handleNavigate(i,"push","none",void 0,r,t)}handleHistoryChange(t,n){var r,a,i;let s;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?s=this.locationHistory.previous():s=this.locationHistory.current():s=this.locationHistory.current(),s.pathname+s.search!==t.pathname){if(!this.incomingRouteParams){if(n==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),n==="POP"){const c=this.locationHistory.current();if(c&&c.pushedByRoute){const u=this.locationHistory.findLastLocation(c);this.incomingRouteParams=Object.assign(Object.assign({},u),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((r=t.state)===null||r===void 0?void 0:r.direction)||"forward",routeOptions:(a=t.state)===null||a===void 0?void 0:a.routerOptions,tab:this.currentTab})}let l;if(!((i=this.incomingRouteParams)===null||i===void 0)&&i.id)l=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:s.pathname}),this.locationHistory.add(l);else{const c=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(l=Object.assign(Object.assign({id:nv("routeInfo")},this.incomingRouteParams),{lastPathname:s.pathname,pathname:t.pathname,search:t.search,params:this.props.match.params,prevRouteLastPathname:s.lastPathname}),c)l.tab=s.tab,l.pushedByRoute=s.pathname;else if(l.routeAction==="pop"){const u=this.locationHistory.findLastLocation(l);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="push"&&l.tab!==s.tab){const u=this.locationHistory.getCurrentRouteInfoForTab(l.tab);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="replace"){const u=this.locationHistory.current(),d=u==null?void 0:u.pushedByRoute,h=d!==void 0&&d!==l.pathname?d:l.pushedByRoute;l.lastPathname=(u==null?void 0:u.pathname)||l.lastPathname,l.prevRouteLastPathname=u==null?void 0:u.lastPathname,l.pushedByRoute=h,l.routeDirection=(u==null?void 0:u.routeDirection)||l.routeDirection,l.routeAnimation=(u==null?void 0:u.routeAnimation)||l.routeAnimation}this.locationHistory.add(l)}this.setState({routeInfo:l})}this.incomingRouteParams=void 0}handleNativeBack(){const t=this.props.history;(t.goBack||t.back)()}handleNavigate(t,n,r,a,i,s){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:n,routeDirection:r,routeOptions:i,routeAnimation:a,tab:s}),n==="push"?this.props.history.push(t):this.props.history.replace(t)}handleNavigateBack(t="/",n){const r=a$();t=t||r&&r.get("backButtonDefaultHref");const a=this.locationHistory.current();if(a&&a.pushedByRoute){const i=this.locationHistory.findLastLocation(a);if(i)if(this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"pop",routeDirection:"back",routeAnimation:n||a.routeAnimation}),a.lastPathname===a.pushedByRoute||i.pathname===a.pushedByRoute&&a.tab===""&&i.tab===""){const s=this.props.history;(s.goBack||s.back)()}else this.handleNavigate(i.pathname+(i.search||""),"pop","back");else this.handleNavigate(t,"pop","back")}else this.handleNavigate(t,"pop","back")}handleResetTab(t,n,r){const a=this.locationHistory.getFirstRouteInfoForTab(t);if(a){const i=Object.assign({},a);i.pathname=n,i.routeOptions=r,this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(i.pathname+(i.search||""))}}handleSetCurrentTab(t){this.currentTab=t;const n=Object.assign({},this.locationHistory.current());n.tab!==t&&(n.tab=t,this.locationHistory.update(n))}render(){return le.createElement(p3.Provider,{value:this.routeMangerContextState},le.createElement(oY,{ionRoute:uY,ionRedirect:{},stackManager:hY,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const C0=qG(mY);C0.displayName="IonRouter";class gY extends le.Component{constructor(t){super(t);const{history:n}=t,r=Ar(t,["history"]);this.history=n||Y5(r),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(t,n){const r=t.location||t,a=t.action||n;this.historyListenHandler&&this.historyListenHandler(r,a)}registerHistoryListener(t){this.historyListenHandler=t}render(){const t=this.props,{children:n}=t,r=Ar(t,["children"]);return le.createElement(Pm,Object.assign({history:this.history},r),le.createElement(C0,{registerHistoryListener:this.registerHistoryListener},n))}}class V3e extends le.Component{constructor(t){super(t),this.history=t.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(t,n){const r=t.location||t,a=t.action||n;this.historyListenHandler&&this.historyListenHandler(r,a)}registerHistoryListener(t){this.historyListenHandler=t}render(){const t=this.props,{children:n}=t,r=Ar(t,["children"]);return le.createElement(Pm,Object.assign({},r),le.createElement(C0,{registerHistoryListener:this.registerHistoryListener},n))}}class j3e extends le.Component{constructor(t){super(t);const{history:n}=t,r=Ar(t,["history"]);this.history=n||Q5(r),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(t,n){const r=t.location||t,a=t.action||n;this.historyListenHandler&&this.historyListenHandler(r,a)}registerHistoryListener(t){this.historyListenHandler=t}render(){const t=this.props,{children:n}=t,r=Ar(t,["children"]);return le.createElement(Pm,Object.assign({history:this.history},r),le.createElement(C0,{registerHistoryListener:this.registerHistoryListener},n))}}/*! Capacitor: https://capacitorjs.com/ - MIT License */const bY=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(i,s)=>{n.platforms.set(i,s)},a=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=a,n},yY=e=>e.CapacitorPlatforms=bY(e),f3=yY(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});f3.addPlatform;f3.setPlatform;var Xd;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Xd||(Xd={}));class qw extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const vY=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},xY=e=>{var t,n,r,a,i;const s=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,u=()=>s!==null?s.name:vY(e),d=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||u,h=()=>d()!=="web",p=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||h,f=C=>{const T=x.get(C);return!!(T!=null&&T.platforms.has(d())||b(C))},m=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||f,g=C=>{var T;return(T=o.PluginHeaders)===null||T===void 0?void 0:T.find(A=>A.name===C)},b=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.getPluginHeader)||g,y=C=>e.console.error(C),v=(C,T,A)=>Promise.reject("".concat(A,' does not have an implementation of "').concat(T,'".')),x=new Map,w=(C,T={})=>{const A=x.get(C);if(A)return console.warn('Capacitor plugin "'.concat(C,'" already registered. Cannot register plugins twice.')),A.proxy;const D=d(),N=b(C);let I;const M=async()=>(!I&&D in T?I=typeof T[D]=="function"?I=await T[D]():I=T[D]:s!==null&&!I&&"web"in T&&(I=typeof T.web=="function"?I=await T.web():I=T.web),I),P=(L,H)=>{var Z,J;if(N){const ne=N==null?void 0:N.methods.find(re=>H===re.name);if(ne)return ne.rtype==="promise"?re=>o.nativePromise(C,H.toString(),re):(re,pe)=>o.nativeCallback(C,H.toString(),re,pe);if(L)return(Z=L[H])===null||Z===void 0?void 0:Z.bind(L)}else{if(L)return(J=L[H])===null||J===void 0?void 0:J.bind(L);throw new qw('"'.concat(C,'" plugin is not implemented on ').concat(D),Xd.Unimplemented)}},z=L=>{let H;const Z=(...J)=>{const ne=M().then(re=>{const pe=P(re,L);if(pe){const de=pe(...J);return H=de==null?void 0:de.remove,de}else throw new qw('"'.concat(C,".").concat(L,'()" is not implemented on ').concat(D),Xd.Unimplemented)});return L==="addListener"&&(ne.remove=async()=>H()),ne};return Z.toString=()=>"".concat(L.toString(),"() { [capacitor code] }"),Object.defineProperty(Z,"name",{value:L,writable:!1,configurable:!1}),Z},j=z("addListener"),K=z("removeListener"),O=(L,H)=>{const Z=j({eventName:L},H),J=async()=>{const re=await Z;K({eventName:L,callbackId:re},H)},ne=new Promise(re=>Z.then(()=>re({remove:J})));return ne.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await J()},ne},W=new Proxy({},{get(L,H){switch(H){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?O:j;case"removeListener":return K;default:return z(H)}}});return l[C]=W,x.set(C,{name:C,proxy:W,platforms:new Set([...Object.keys(T),...N?[D]:[]])}),W},$=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||w;return o.convertFileSrc||(o.convertFileSrc=C=>C),o.getPlatform=d,o.handleError=y,o.isNativePlatform=p,o.isPluginAvailable=m,o.pluginMethodNoop=v,o.registerPlugin=$,o.Exception=qw,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},wY=e=>e.Capacitor=xY(e),rv=wY(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),T0=rv.registerPlugin;rv.Plugins;class m3{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn('Capacitor WebPlugin "'.concat(t.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=t)}addListener(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a);const i=async()=>this.removeListener(t,n),s=Promise.resolve({remove:i});return Object.defineProperty(s,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),s}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n){const r=this.listeners[t];r&&r.forEach(a=>a(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new rv.Exception(t,Xd.Unimplemented)}unavailable(t="not available"){return new rv.Exception(t,Xd.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const a=r.indexOf(n);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const vA=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),xA=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class kY extends m3{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[a,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=xA(a).trim(),i=xA(i).trim(),n[a]=i}),n}async setCookie(t){try{const n=vA(t.key),r=vA(t.value),a="; expires=".concat((t.expires||"").replace("expires=","")),i=(t.path||"/").replace("path=",""),s=t.url!=null&&t.url.length>0?"domain=".concat(t.url):"";document.cookie="".concat(n,"=").concat(r||"").concat(a,"; path=").concat(i,"; ").concat(s,";")}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie="".concat(t.key,"=; Max-Age=0")}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}T0("CapacitorCookies",{web:()=>new kY});const SY=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(e)}),IY=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,i,s)=>(a[i]=e[t[s]],a),{})},$Y=(e,t=!0)=>e?Object.entries(e).reduce((r,a)=>{const[i,s]=a;let o,l;return Array.isArray(s)?(l="",s.forEach(c=>{o=t?encodeURIComponent(c):c,l+="".concat(i,"=").concat(o,"&")}),l.slice(0,-1)):(o=t?encodeURIComponent(s):s,l="".concat(i,"=").concat(o)),"".concat(r,"&").concat(l)},"").substr(1):null,CY=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),a=IY(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[s,o]of Object.entries(e.data||{}))i.set(s,o);n.body=i.toString()}else if(a.includes("multipart/form-data")){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((o,l)=>{i.append(l,o)});else for(const o of Object.keys(e.data))i.append(o,e.data[o]);n.body=i;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(a.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class TY extends m3{async request(t){const n=CY(t,t.webFetchExtra),r=$Y(t.params,t.shouldEncodeUrlParams),a=r?"".concat(t.url,"?").concat(r):t.url,i=await fetch(a,n),s=i.headers.get("content-type")||"";let{responseType:o="text"}=i.ok?t:{};s.includes("application/json")&&(o="json");let l,c;switch(o){case"arraybuffer":case"blob":c=await i.blob(),l=await SY(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const u={};return i.headers.forEach((d,h)=>{u[h]=d}),{data:l,headers:u,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}const As=T0("CapacitorHttp",{web:()=>new TY});var Ck;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Ck||(Ck={}));var wA;(function(e){e.Rear="REAR",e.Front="FRONT"})(wA||(wA={}));var Tk;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(Tk||(Tk={}));const EY=T0("Camera",{web:()=>Da(()=>import("./web-5cb841e9.js"),[]).then(e=>new e.CameraWeb)});const NY="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",_Y="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 176a80 80 0 1080 80 80.24 80.24 0 00-80-80zm172.72 80a165.53 165.53 0 01-1.64 22.34l48.69 38.12a11.59 11.59 0 012.63 14.78l-46.06 79.52a11.64 11.64 0 01-14.14 4.93l-57.25-23a176.56 176.56 0 01-38.82 22.67l-8.56 60.78a11.93 11.93 0 01-11.51 9.86h-92.12a12 12 0 01-11.51-9.53l-8.56-60.78A169.3 169.3 0 01151.05 393L93.8 416a11.64 11.64 0 01-14.14-4.92L33.6 331.57a11.59 11.59 0 012.63-14.78l48.69-38.12A174.58 174.58 0 0183.28 256a165.53 165.53 0 011.64-22.34l-48.69-38.12a11.59 11.59 0 01-2.63-14.78l46.06-79.52a11.64 11.64 0 0114.14-4.93l57.25 23a176.56 176.56 0 0138.82-22.67l8.56-60.78A11.93 11.93 0 01209.94 26h92.12a12 12 0 0111.51 9.53l8.56 60.78A169.3 169.3 0 01361 119l57.2-23a11.64 11.64 0 0114.14 4.92l46.06 79.52a11.59 11.59 0 01-2.63 14.78l-48.69 38.12a174.58 174.58 0 011.64 22.66z'/></svg>",AY=e=>{const[t,n]=oe.useState("99999"),[r,a]=oe.useState(null),[i,s]=oe.useState(null),[o,l]=oe.useState(""),[c,u]=oe.useState("BBBBBB");oe.useRef(null),oe.useState(!0);const d=async()=>{new FormData;const w=await h();console.log(w);const $=w;try{const C=await fetch("http://dev.wisevill.com/media/upload_image.php",{method:"POST",body:JSON.stringify({image:$,id:t,tel:r,pw:i,name:o,code:c}),headers:{"Content-Type":"application/json"}});C.ok?console.log("Upload successful:",C):console.error("Upload failed:",C.statusText)}catch(C){console.error("Error:",C)}},h=async()=>(await EY.getPhoto({resultType:Tk.Base64,source:Ck.Camera,quality:100})).base64String,p=()=>{e.setisJoinModalOpen(!1),console.log(""),console.log(e.isJoinModalOpen)};oe.useState(""),oe.useState(!0);function f(w){a(w.target.value)}function m(w){s(w.target.value)}console.log(o),console.log(c);const[g,b]=oe.useState(" ."),y=w=>{b(g===" ."?w:$=>$+w)},v=()=>{b("")},x=()=>{g!=null&&b(w=>w.slice(0,-1))};return document.getElementById("inner_pw"),_.jsxs(_.Fragment,{children:[_.jsx("input",{placeholder:"",onChange:f}),_.jsx("input",{placeholder:"PW : 6",onChange:m}),_.jsx(Ye,{onClick:()=>d(),children:_.jsx(c3,{icon:NY})}),_.jsx("p",{className:"pw_body3_box_input",children:g}),_.jsx(br,{children:_.jsx(it,{className:"input_padd",children:_.jsxs(lt,{className:"input_boxx",children:[_.jsx(it,{className:"input_roww",children:_.jsxs(lt,{children:[_.jsx(Ye,{className:"input_btnn",onClick:()=>y("1"),children:"1"}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("2"),children:"2"}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("3"),children:"3"})]})}),_.jsx(it,{className:"input_roww",children:_.jsxs(lt,{children:[_.jsx(Ye,{className:"input_btnn",onClick:()=>y("4"),children:"4"}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("5"),children:"5"}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("6"),children:"6"})]})}),_.jsx(it,{className:"input_roww",children:_.jsxs(lt,{children:[_.jsx(Ye,{className:"input_btnn",onClick:()=>y("7"),children:"7"}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("8"),children:"8"}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("9"),children:"9"})]})}),_.jsx(it,{className:"input_roww",children:_.jsxs(lt,{children:[_.jsx(Ye,{className:"input_btnn",style:{fontSize:"26px"},onClick:v,children:""}),_.jsx(Ye,{className:"input_btnn",onClick:()=>y("0"),children:"0"}),_.jsx(Ye,{className:"input_btnn",onClick:x,children:"X"})]})})]})})}),_.jsx(Ye,{onClick:()=>{p()},children:""})]})},RY=()=>_.jsxs("div",{children:[_.jsx("h1",{children:"Face Recognition App"}),_.jsx(AY,{})]}),Eb=T0("Preferences",{web:()=>Da(()=>import("./web-8d6ad30a.js"),[]).then(e=>new e.PreferencesWeb)}),kA="/assets/test-03c7e081.svg",g3=e=>{const[t,n]=oe.useState(window.innerWidth);oe.useState(window.innerHeight);const r=()=>{n(window.innerWidth)},[a,i]=oe.useState(""),[s,o]=oe.useState(!1),[l,c]=oe.useState(""),[u,d]=oe.useState(""),[h,p]=oe.useState(""),f=async()=>{console.log(u);const x={url:"http://dev.wisevill.com/kioskdb/check_gym.php",data:{code:u,pw:h},headers:{"Content-type":"application/json"}},w=await As.post(x),$=JSON.parse(w.data);console.log($),$[0]!=null?(console.log("."),await Eb.set({key:"code",value:$[0].code}),await Eb.set({key:"name",value:$[0].name}),e.setcode(l),i($[0].name),m(),o(!1)):alert("   .")},m=async()=>{const v=await Eb.get({key:"code"}),x=await Eb.get({key:"name"});console.log("Hello ".concat(v,"!"));const w=v.value,$=x.value;w&&$?(e.setcode(w),i($)):o(!0)};oe.useEffect(()=>(m(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);const g=async()=>{u.length>=6&&h.length>=1?await f():alert(" ")},b=v=>{d(v.target.value)},y=v=>{p(v.target.value)};return _.jsxs(_.Fragment,{children:[_.jsx("button",{style:{float:"right",backgroundColor:"transparent"},onClick:()=>{},children:_.jsx(c3,{icon:_Y,size:"large"})}),_.jsxs(es,{isOpen:s,backdropDismiss:!1,children:[_.jsx("p",{children:" "}),_.jsx("input",{type:"text",onChange:b}),_.jsx("p",{children:""}),_.jsx("input",{type:"text",onChange:y}),_.jsx("div",{style:{textAlign:"center"},children:_.jsx(Ye,{onClick:g,children:""})})]}),window.innerWidth<=window.innerHeight?_.jsxs(br,{style:{border:"0px"},children:[_.jsx(it,{style:{border:"0px"},children:_.jsx(lt,{size:"12",style:{border:"0px"},children:_.jsx("img",{style:{width:"13%",marginLeft:"45%",marginTop:"7.5%"},src:kA,alt:"Logo"})})}),_.jsx(it,{children:_.jsx(lt,{style:{border:"0px"},children:_.jsx("div",{style:{textAlign:"center",fontSize:"180%",fontWeight:700,letterSpacing:"-3.12%",color:"white",marginTop:"2%",marginBottom:"5%"},children:a})})})]}):_.jsx(br,{style:{border:"0px"},children:_.jsxs(it,{style:{border:"0px"},children:[_.jsx(lt,{size:"auto",style:{marginLeft:"3%",marginBottom:"18%",border:"0px"},children:_.jsx("img",{style:{width:"100%",marginLeft:"5%"},src:kA,alt:"Logo"})}),_.jsx(lt,{size:"auto",style:{marginLeft:"0.7%",marginBottom:"18%",border:"0px"},children:_.jsx("div",{style:{textAlign:"center",color:"white",fontWeight:700,letterSpacing:"-3.12%",fontSize:"190%",marginTop:"6%"},children:a})})]})})]})};h3({mode:"md"});const b3=e=>{const[t,n]=oe.useState(!1),[r,a]=oe.useState("  (5)"),[i,s]=oe.useState(!1),o=f=>{f=="clubID"?(n(!1),a("  (5)")):f=="Tel"&&(n(!0),a("010-")),s(!1)},l="   , \n (5)   .",c=f=>{t==!1?(e.settypeid(!1),u(f)):t==!0&&(e.settypeid(!0),d(f))},u=f=>{i==!1&&r.length>=6&&(a(""+f.target.textContent),s(!0)),r.length==5||(r.length>5?a(f.target.textContent):a(r+f.target.textContent))},d=f=>{i==!1&&(a(""+f.target.textContent),s(!0)),r.length==3||r.length==8?a(r+"-"+f.target.textContent):r.length>=13?r.length>13&&a(f.target.textContent):a(r+f.target.textContent),e.AlertFunc(r)},h=()=>{t==!0&&(r.length==5||r.length==10)?a(r.slice(0,-2)):a(r.slice(0,-1))},p=()=>{a("")};return oe.useEffect(()=>{e.AlertFunc(r)}),_.jsxs(_.Fragment,{children:[_.jsx(D9,{}),_.jsx(o3,{children:_.jsxs(br,{class:"input_box",children:[_.jsx(it,{class:"input_segment",children:_.jsxs(F9,{class:"input_segment",onIonChange:f=>o(f.target.value),children:[_.jsx(cA,{class:"input_segment",value:"clubID",children:_.jsx(uA,{children:""})}),_.jsx(cA,{class:"input_segment",value:"Tel",children:_.jsx(uA,{children:""})})]})}),_.jsx(it,{class:"input_div_row",children:_.jsx(lt,{class:"input_box",children:_.jsx("div",{className:"input_div ion-text-center",children:r})})}),_.jsxs(it,{class:"input_desc",children:[_.jsx("div",{className:"hr"}),_.jsx("div",{className:"input_desc",children:l})]}),_.jsxs(it,{class:"input_pad",children:[_.jsx(it,{class:"input_row",children:_.jsxs(lt,{class:"input_box",children:[_.jsx(Ye,{className:"input_btn",onClick:c,children:"1"}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"2"}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"3"})]})}),_.jsx(it,{class:"input_row",children:_.jsxs(lt,{class:"input_box",children:[_.jsx(Ye,{className:"input_btn",onClick:c,children:"4"}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"5"}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"6"})]})}),_.jsx(it,{class:"input_row",children:_.jsxs(lt,{class:"input_box",children:[_.jsx(Ye,{className:"input_btn",onClick:c,children:"7"}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"8"}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"9"})]})}),_.jsx(it,{class:"input_row",children:_.jsxs(lt,{class:"input_box",children:[_.jsx(Ye,{className:"input_btn",onClick:p,children:""}),_.jsx(Ye,{className:"input_btn",onClick:c,children:"0"}),_.jsx(Ye,{className:"input_btn",onClick:h,children:""})]})})]})]})})]})};const y3=e=>{const[t,n]=oe.useState(window.innerWidth);oe.useState(window.innerHeight);const[r,a]=oe.useState(""),i=()=>{n(window.innerWidth)};return oe.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[]),_.jsx(_.Fragment,{children:window.innerWidth<=window.innerHeight?_.jsx(br,{children:_.jsx(it,{style:{height:"280px"},children:_.jsx(lt,{style:{border:"0px",margin:"0px auto",padding:"5px 5px"},children:_.jsx("div",{style:{width:"710px",height:"300px",backgroundColor:"white",borderRadius:"1.2%",color:"black",textAlign:"left",paddingLeft:"6%",paddingTop:"5%",fontSize:"125%",fontWeight:400,lineHeight:"190%",marginTop:"-5.5%",marginLeft:"-1%"},children:r==""?_.jsx("p",{children:" ."}):_.jsx("div",{children:r})})})})}):_.jsx(br,{})})};var DY=Object.defineProperty,FY=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),o$=(e,t)=>{for(var n in t)DY(e,n,{get:t[n],enumerable:!0})},MY={};o$(MY,{Abs:()=>Ih,Acos:()=>wu,Acosh:()=>ku,AdadeltaOptimizer:()=>T2,AdagradOptimizer:()=>E2,AdamOptimizer:()=>N2,AdamaxOptimizer:()=>_2,Add:()=>Jo,AddN:()=>Su,All:()=>$h,Any:()=>Ch,ArgMax:()=>Th,ArgMin:()=>Eh,Asin:()=>Iu,Asinh:()=>$u,Atan:()=>Cu,Atan2:()=>Eu,Atanh:()=>Tu,AvgPool:()=>Nu,AvgPool3D:()=>Nh,AvgPool3DGrad:()=>Gm,AvgPoolGrad:()=>Hm,BackendWasm:()=>sj,BatchMatMul:()=>_u,BatchToSpaceND:()=>_h,Bincount:()=>Ah,BitwiseAnd:()=>Rh,BroadcastArgs:()=>qm,BroadcastTo:()=>D3,Callback:()=>cB,CallbackList:()=>hz,Cast:()=>Au,Ceil:()=>Ru,ClipByValue:()=>Zo,Complex:()=>R0,ComplexAbs:()=>Km,Concat:()=>Dh,Conv2D:()=>Du,Conv2DBackpropFilter:()=>D0,Conv2DBackpropInput:()=>Fu,Conv3D:()=>Mu,Conv3DBackpropFilterV2:()=>Fh,Conv3DBackpropInputV2:()=>Mh,Cos:()=>Ou,Cosh:()=>Pu,CropAndResize:()=>Ph,Cumprod:()=>Oh,Cumsum:()=>Lu,CustomCallback:()=>fz,DataStorage:()=>N0,DenseBincount:()=>Xm,DepthToSpace:()=>Lh,DepthwiseConv2dNative:()=>zu,DepthwiseConv2dNativeBackpropFilter:()=>F0,DepthwiseConv2dNativeBackpropInput:()=>M0,Diag:()=>Ym,Dilation2D:()=>Bu,Dilation2DBackpropFilter:()=>Zd,Dilation2DBackpropInput:()=>Jd,Draw:()=>f$,ENV:()=>h$,EarlyStopping:()=>dB,Einsum:()=>O0,Elu:()=>Uu,EluGrad:()=>zh,Environment:()=>A3,Equal:()=>Bh,Erf:()=>Vu,Exp:()=>ju,ExpandDims:()=>Wh,Expm1:()=>Hu,FFT:()=>P0,Fill:()=>Jm,FlipLeftRight:()=>Uh,Floor:()=>Gu,FloorDiv:()=>qu,FromPixels:()=>ov,FusedBatchNorm:()=>Ku,FusedConv2D:()=>Zl,FusedDepthwiseConv2D:()=>Ql,GPGPUContext:()=>py,GatherNd:()=>jh,GatherV2:()=>Vh,GraphModel:()=>mT,Greater:()=>Hh,GreaterEqual:()=>Xu,History:()=>pz,IFFT:()=>L0,Identity:()=>Yu,Imag:()=>z0,InputSpec:()=>In,IsFinite:()=>Ju,IsInf:()=>Zu,IsNan:()=>Qu,KernelBackend:()=>Vm,LRN:()=>rc,LRNGrad:()=>Zh,LayerVariable:()=>iz,LayersModel:()=>Ms,LeakyRelu:()=>ec,Less:()=>Gh,LessEqual:()=>qh,LinSpace:()=>Kh,Log:()=>tc,Log1p:()=>nc,LogSoftmax:()=>M3,LogicalAnd:()=>Xh,LogicalNot:()=>Yh,LogicalOr:()=>Jh,LogicalXor:()=>F3,LowerBound:()=>CJ,MathBackendCPU:()=>Hx,MathBackendWebGL:()=>Kx,MatrixBandPart:()=>TJ,Max:()=>ac,MaxPool:()=>sc,MaxPool3D:()=>Qh,MaxPool3DGrad:()=>Qm,MaxPoolGrad:()=>Zm,MaxPoolWithArgmax:()=>eg,Maximum:()=>ic,Mean:()=>oc,Min:()=>lc,Minimum:()=>uc,MirrorPad:()=>cc,Mod:()=>dc,MomentumOptimizer:()=>A2,Multinomial:()=>ep,Multiply:()=>hc,Neg:()=>tp,NonMaxSuppressionV3:()=>rp,NonMaxSuppressionV4:()=>ap,NonMaxSuppressionV5:()=>ip,NotEqual:()=>np,OP_SCOPE_SUFFIX:()=>b$,OneHot:()=>pc,OnesLike:()=>sp,Optimizer:()=>Ys,OptimizerConstructors:()=>UL,Pack:()=>op,PadV2:()=>fc,Pool:()=>EJ,Pow:()=>mc,Prelu:()=>gc,Prod:()=>bc,RMSPropOptimizer:()=>R2,RNN:()=>ys,RaggedGather:()=>B0,RaggedRange:()=>W0,RaggedTensorToTensor:()=>U0,Range:()=>tg,Rank:()=>_k,Real:()=>V0,RealDiv:()=>Wu,Reciprocal:()=>yc,Reduction:()=>Tr,Relu:()=>vc,Relu6:()=>kc,Reshape:()=>lp,ResizeBilinear:()=>wc,ResizeBilinearGrad:()=>cp,ResizeNearestNeighbor:()=>xc,ResizeNearestNeighborGrad:()=>up,Reverse:()=>Sc,RotateWithOffset:()=>$p,Round:()=>Ic,Rsqrt:()=>$c,SGDOptimizer:()=>$x,ScatterNd:()=>dp,SearchSorted:()=>pp,Select:()=>fp,Selu:()=>Cc,Sequential:()=>ch,Sigmoid:()=>_c,Sign:()=>Nc,Sin:()=>Tc,Sinh:()=>Ec,Slice:()=>mp,Softmax:()=>Fc,Softplus:()=>Ac,SpaceToBatchND:()=>gp,SparseFillEmptyRows:()=>ng,SparseReshape:()=>yp,SparseSegmentMean:()=>rg,SparseSegmentSum:()=>ag,SparseToDense:()=>vp,SplitV:()=>bp,Sqrt:()=>Rc,Square:()=>ig,SquaredDifference:()=>Mc,StaticRegexReplace:()=>sg,Step:()=>el,StridedSlice:()=>xp,StringNGrams:()=>og,StringSplit:()=>lg,StringToHashBucketFast:()=>ug,Sub:()=>Oc,Sum:()=>Dc,SymbolicTensor:()=>Ei,Tan:()=>Pc,Tanh:()=>Lc,Tensor:()=>qe,TensorBuffer:()=>Cn,TensorScatterUpdate:()=>hp,Tile:()=>Qo,TopK:()=>wp,Transform:()=>kp,Transpose:()=>Fs,Unique:()=>cg,Unpack:()=>Sp,UnsortedSegmentSum:()=>dg,UpperBound:()=>NJ,Variable:()=>eu,ZerosLike:()=>Ip,_FusedMatMul:()=>Jl,abs:()=>kn,acos:()=>w$,acosh:()=>k$,add:()=>ie,addN:()=>oP,all:()=>K0,any:()=>gm,argMax:()=>ru,argMin:()=>S$,asin:()=>I$,asinh:()=>$$,atan:()=>C$,atan2:()=>T$,atanh:()=>E$,avgPool:()=>qs,avgPool3d:()=>_$,backend:()=>sP,backend_util:()=>E,basicLSTMCell:()=>dP,batchNorm:()=>zc,batchNorm2d:()=>A$,batchNorm3d:()=>R$,batchNorm4d:()=>D$,batchToSpaceND:()=>yg,bincount:()=>F$,bitwiseAnd:()=>hP,booleanMaskAsync:()=>nL,broadcastArgs:()=>pP,broadcastTo:()=>Pl,broadcast_util:()=>Cp,browser:()=>_g,buffer:()=>nt,callbacks:()=>dhe,cast:()=>me,ceil:()=>M$,clipByValue:()=>xr,clone:()=>ls,complex:()=>Ws,concat:()=>_t,concat1d:()=>O$,concat2d:()=>P$,concat3d:()=>L$,concat4d:()=>z$,constraints:()=>lz,conv1d:()=>X0,conv2d:()=>Dr,conv2dTranspose:()=>Y0,conv3d:()=>W$,conv3dTranspose:()=>U$,copyRegisteredKernels:()=>DJ,cos:()=>vg,cosh:()=>J0,cosineWindow:()=>xx,cumprod:()=>vm,cumsum:()=>Z0,customGrad:()=>hs,data:()=>FB,denseBincount:()=>pv,deprecationWarn:()=>iP,depthToSpace:()=>V$,depthwiseConv2d:()=>Bc,deregisterOp:()=>fhe,device_util:()=>mg,diag:()=>mP,dilation2d:()=>j$,disableDeprecationWarnings:()=>VZ,dispose:()=>je,disposeVariables:()=>jZ,div:()=>Ce,divNoNan:()=>H$,dot:()=>G$,dropout:()=>k2,einsum:()=>bP,elu:()=>Tp,enableDebugMode:()=>UZ,enableProdMode:()=>WZ,enclosingPowerOfTwo:()=>S2,engine:()=>ni,ensureShape:()=>yP,env:()=>Q,equal:()=>va,erf:()=>q$,euclideanNorm:()=>Y$,exp:()=>Fr,expandDims:()=>rr,expm1:()=>J$,eye:()=>Q0,fft:()=>Eg,fill:()=>ga,findBackend:()=>JZ,findBackendFactory:()=>ZZ,floor:()=>Np,floorDiv:()=>q0,forceHalfFloat:()=>eU,fused:()=>sh,gather:()=>_p,gatherND:()=>sL,gather_util:()=>M2,getBackend:()=>XZ,getGradient:()=>Ek,getKernel:()=>lv,getKernelsForBackend:()=>uv,getThreadsCount:()=>mMe,gpgpu_util:()=>RW,grad:()=>Kee,grads:()=>Xee,greater:()=>Wr,greaterEqual:()=>Ks,ifft:()=>ih,imag:()=>xg,image:()=>Ma,inTopKAsync:()=>oL,initializers:()=>uz,input:()=>Ez,io:()=>sr,irfft:()=>px,isFinite:()=>Z$,isInf:()=>Q$,isNaN:()=>e2,keep:()=>An,kernel_impls:()=>bs,layers:()=>cz,leakyRelu:()=>wg,less:()=>th,lessEqual:()=>nl,linalg:()=>C2,linspace:()=>SP,loadGraphModel:()=>xpe,loadGraphModelSync:()=>wpe,loadLayersModel:()=>oce,localResponseNormalization:()=>t2,log:()=>xa,log1p:()=>kg,logSigmoid:()=>n2,logSoftmax:()=>tx,logSumExp:()=>nx,logicalAnd:()=>di,logicalNot:()=>Sg,logicalOr:()=>rx,logicalXor:()=>r2,losses:()=>vL,lowerBound:()=>$P,matMul:()=>Qe,math:()=>NL,max:()=>Ba,maxPool:()=>Hn,maxPool3d:()=>a2,maxPoolWithArgmax:()=>CP,maximum:()=>gs,mean:()=>an,memory:()=>hv,meshgrid:()=>TP,metrics:()=>oB,min:()=>eh,minimum:()=>Po,mirrorPad:()=>i2,mod:()=>s2,model:()=>cce,models:()=>lB,moments:()=>Ig,movingAverage:()=>rL,mul:()=>G,multiRNNCell:()=>EP,multinomial:()=>NP,neg:()=>jt,nextFrame:()=>O2,norm:()=>Ep,notEqual:()=>ou,oneHot:()=>nh,ones:()=>ha,onesLike:()=>wa,op:()=>V,outerProduct:()=>_P,pad:()=>Ui,pad1d:()=>AP,pad2d:()=>RP,pad3d:()=>DP,pad4d:()=>FP,pool:()=>o2,pow:()=>Us,prelu:()=>Cg,print:()=>x$,prod:()=>l2,profile:()=>HZ,raggedGather:()=>MP,raggedRange:()=>OP,raggedTensorToTensor:()=>PP,rand:()=>LP,randomGamma:()=>UP,randomNormal:()=>ix,randomStandardNormal:()=>VP,randomUniform:()=>rl,randomUniformInt:()=>jP,range:()=>lu,ready:()=>KZ,real:()=>rh,reciprocal:()=>p2,registerBackend:()=>G0,registerCallbackConstructor:()=>hce,registerGradient:()=>O3,registerKernel:()=>hg,registerOp:()=>phe,regularizers:()=>uB,relu:()=>It,relu6:()=>sx,removeBackend:()=>YZ,reshape:()=>q,reverse:()=>Va,reverse1d:()=>HP,reverse2d:()=>GP,reverse3d:()=>qP,reverse4d:()=>KP,rfft:()=>Ng,round:()=>ox,rsqrt:()=>lx,scalar:()=>Me,scatterND:()=>aL,scatter_util:()=>gx,searchSorted:()=>ax,selu:()=>ux,separableConv2d:()=>Ap,sequential:()=>dce,serialization:()=>ue,setBackend:()=>qZ,setPlatform:()=>QZ,setThreadsCount:()=>fMe,setWasmPath:()=>hMe,setWasmPaths:()=>pMe,setWebGLContext:()=>nW,setdiff1dAsync:()=>XP,shared:()=>vT,sigmoid:()=>li,sign:()=>f2,signal:()=>yL,sin:()=>cx,sinh:()=>dx,slice:()=>at,slice1d:()=>Tg,slice2d:()=>hx,slice3d:()=>Rp,slice4d:()=>ah,slice_util:()=>Fn,softmax:()=>al,softplus:()=>Wc,spaceToBatchND:()=>$g,sparse:()=>xL,sparseToDense:()=>iL,spectral:()=>bL,split:()=>Xr,sqrt:()=>lr,square:()=>Et,squaredDifference:()=>fx,squeeze:()=>il,stack:()=>Dn,step:()=>Uc,stridedSlice:()=>m2,string:()=>wL,sub:()=>Se,sum:()=>Ee,sumOutType:()=>H0,tan:()=>g2,tanh:()=>iu,tensor:()=>Nr,tensor1d:()=>St,tensor2d:()=>us,tensor3d:()=>mx,tensor4d:()=>Lo,tensor5d:()=>YP,tensor6d:()=>JP,tensorScatterUpdate:()=>QP,tensor_util:()=>Fi,test_util:()=>zP,tidy:()=>X,tile:()=>da,time:()=>GZ,topk:()=>y2,train:()=>kl,transpose:()=>tt,truncatedNormal:()=>yx,unique:()=>v2,unregisterGradient:()=>RJ,unregisterKernel:()=>AJ,unsortedSegmentSum:()=>vx,unstack:()=>fn,upcastType:()=>Ua,upperBound:()=>eL,util:()=>k,valueAndGrad:()=>Yee,valueAndGrads:()=>Jee,variable:()=>x2,variableGrads:()=>IP,version:()=>kMe,version_converter:()=>Spe,version_core:()=>gie,version_cpu:()=>wme,version_layers:()=>aC,version_wasm:()=>gMe,version_webgl:()=>c1e,webgl:()=>d1e,webgl_util:()=>tW,where:()=>Jn,whereAsync:()=>w2,zeros:()=>sn,zerosLike:()=>ut});var OY=Object.create,l$=Object.defineProperty,PY=Object.getOwnPropertyDescriptor,LY=Object.getOwnPropertyNames,zY=Object.getPrototypeOf,BY=Object.prototype.hasOwnProperty,En=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),He=(e,t)=>{for(var n in t)l$(e,n,{get:t[n],enumerable:!0})},WY=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of LY(t))!BY.call(e,a)&&a!==n&&l$(e,a,{get:()=>t[a],enumerable:!(r=PY(t,a))||r.enumerable});return e},Yo=(e,t,n)=>(n=e!=null?OY(zY(e)):{},WY(t||!e||!e.__esModule?l$(n,"default",{value:e,enumerable:!0}):n,e)),UY=En((e,t)=>{t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function r(I,M,P){this.low=I|0,this.high=M|0,this.unsigned=!!P}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0});function a(I){return(I&&I.__isLong__)===!0}r.isLong=a;var i={},s={};function o(I,M){var P,z,j;return M?(I>>>=0,(j=0<=I&&I<256)&&(z=s[I],z)?z:(P=c(I,(I|0)<0?-1:0,!0),j&&(s[I]=P),P)):(I|=0,(j=-128<=I&&I<128)&&(z=i[I],z)?z:(P=c(I,I<0?-1:0,!1),j&&(i[I]=P),P))}r.fromInt=o;function l(I,M){if(isNaN(I))return M?x:v;if(M){if(I<0)return x;if(I>=g)return A}else{if(I<=-b)return D;if(I+1>=b)return T}return I<0?l(-I,M).neg():c(I%m|0,I/m|0,M)}r.fromNumber=l;function c(I,M,P){return new r(I,M,P)}r.fromBits=c;var u=Math.pow;function d(I,M,P){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return v;if(typeof M=="number"?(P=M,M=!1):M=!!M,P=P||10,P<2||36<P)throw RangeError("radix");var z;if((z=I.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return d(I.substring(1),M,P).neg();for(var j=l(u(P,8)),K=v,O=0;O<I.length;O+=8){var W=Math.min(8,I.length-O),L=parseInt(I.substring(O,O+W),P);if(W<8){var H=l(u(P,W));K=K.mul(H).add(l(L))}else K=K.mul(j),K=K.add(l(L))}return K.unsigned=M,K}r.fromString=d;function h(I,M){return typeof I=="number"?l(I,M):typeof I=="string"?d(I,M):c(I.low,I.high,typeof M=="boolean"?M:I.unsigned)}r.fromValue=h;var p=65536,f=1<<24,m=p*p,g=m*m,b=g/2,y=o(f),v=o(0);r.ZERO=v;var x=o(0,!0);r.UZERO=x;var w=o(1);r.ONE=w;var $=o(1,!0);r.UONE=$;var C=o(-1);r.NEG_ONE=C;var T=c(-1,2147483647,!1);r.MAX_VALUE=T;var A=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=A;var D=c(0,-2147483648,!1);r.MIN_VALUE=D;var N=r.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},N.toString=function(I){if(I=I||10,I<2||36<I)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(D)){var M=l(I),P=this.div(M),z=P.mul(M).sub(this);return P.toString(I)+z.toInt().toString(I)}else return"-"+this.neg().toString(I);for(var j=l(u(I,6),this.unsigned),K=this,O="";;){var W=K.div(j),L=K.sub(W.mul(j)).toInt()>>>0,H=L.toString(I);if(K=W,K.isZero())return H+O;for(;H.length<6;)H="0"+H;O=""+H+O}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(D)?64:this.neg().getNumBitsAbs();for(var I=this.high!=0?this.high:this.low,M=31;M>0&&!(I&1<<M);M--);return this.high!=0?M+33:M+1},N.isZero=function(){return this.high===0&&this.low===0},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return(this.low&1)===1},N.isEven=function(){return(this.low&1)===0},N.equals=function(I){return a(I)||(I=h(I)),this.unsigned!==I.unsigned&&this.high>>>31===1&&I.high>>>31===1?!1:this.high===I.high&&this.low===I.low},N.eq=N.equals,N.notEquals=function(I){return!this.eq(I)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(I){return this.comp(I)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(I){return this.comp(I)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(I){return this.comp(I)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(I){return this.comp(I)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(I){if(a(I)||(I=h(I)),this.eq(I))return 0;var M=this.isNegative(),P=I.isNegative();return M&&!P?-1:!M&&P?1:this.unsigned?I.high>>>0>this.high>>>0||I.high===this.high&&I.low>>>0>this.low>>>0?-1:1:this.sub(I).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(D)?D:this.not().add(w)},N.neg=N.negate,N.add=function(I){a(I)||(I=h(I));var M=this.high>>>16,P=this.high&65535,z=this.low>>>16,j=this.low&65535,K=I.high>>>16,O=I.high&65535,W=I.low>>>16,L=I.low&65535,H=0,Z=0,J=0,ne=0;return ne+=j+L,J+=ne>>>16,ne&=65535,J+=z+W,Z+=J>>>16,J&=65535,Z+=P+O,H+=Z>>>16,Z&=65535,H+=M+K,H&=65535,c(J<<16|ne,H<<16|Z,this.unsigned)},N.subtract=function(I){return a(I)||(I=h(I)),this.add(I.neg())},N.sub=N.subtract,N.multiply=function(I){if(this.isZero())return v;if(a(I)||(I=h(I)),n){var M=n.mul(this.low,this.high,I.low,I.high);return c(M,n.get_high(),this.unsigned)}if(I.isZero())return v;if(this.eq(D))return I.isOdd()?D:v;if(I.eq(D))return this.isOdd()?D:v;if(this.isNegative())return I.isNegative()?this.neg().mul(I.neg()):this.neg().mul(I).neg();if(I.isNegative())return this.mul(I.neg()).neg();if(this.lt(y)&&I.lt(y))return l(this.toNumber()*I.toNumber(),this.unsigned);var P=this.high>>>16,z=this.high&65535,j=this.low>>>16,K=this.low&65535,O=I.high>>>16,W=I.high&65535,L=I.low>>>16,H=I.low&65535,Z=0,J=0,ne=0,re=0;return re+=K*H,ne+=re>>>16,re&=65535,ne+=j*H,J+=ne>>>16,ne&=65535,ne+=K*L,J+=ne>>>16,ne&=65535,J+=z*H,Z+=J>>>16,J&=65535,J+=j*L,Z+=J>>>16,J&=65535,J+=K*W,Z+=J>>>16,J&=65535,Z+=P*H+z*L+j*W+K*O,Z&=65535,c(ne<<16|re,Z<<16|J,this.unsigned)},N.mul=N.multiply,N.divide=function(I){if(a(I)||(I=h(I)),I.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&I.low===-1&&I.high===-1)return this;var M=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,I.low,I.high);return c(M,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?x:v;var P,z,j;if(this.unsigned){if(I.unsigned||(I=I.toUnsigned()),I.gt(this))return x;if(I.gt(this.shru(1)))return $;j=x}else{if(this.eq(D)){if(I.eq(w)||I.eq(C))return D;if(I.eq(D))return w;var K=this.shr(1);return P=K.div(I).shl(1),P.eq(v)?I.isNegative()?w:C:(z=this.sub(I.mul(P)),j=P.add(z.div(I)),j)}else if(I.eq(D))return this.unsigned?x:v;if(this.isNegative())return I.isNegative()?this.neg().div(I.neg()):this.neg().div(I).neg();if(I.isNegative())return this.div(I.neg()).neg();j=v}for(z=this;z.gte(I);){P=Math.max(1,Math.floor(z.toNumber()/I.toNumber()));for(var O=Math.ceil(Math.log(P)/Math.LN2),W=O<=48?1:u(2,O-48),L=l(P),H=L.mul(I);H.isNegative()||H.gt(z);)P-=W,L=l(P,this.unsigned),H=L.mul(I);L.isZero()&&(L=w),j=j.add(L),z=z.sub(H)}return j},N.div=N.divide,N.modulo=function(I){if(a(I)||(I=h(I)),n){var M=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,I.low,I.high);return c(M,n.get_high(),this.unsigned)}return this.sub(this.div(I).mul(I))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return c(~this.low,~this.high,this.unsigned)},N.and=function(I){return a(I)||(I=h(I)),c(this.low&I.low,this.high&I.high,this.unsigned)},N.or=function(I){return a(I)||(I=h(I)),c(this.low|I.low,this.high|I.high,this.unsigned)},N.xor=function(I){return a(I)||(I=h(I)),c(this.low^I.low,this.high^I.high,this.unsigned)},N.shiftLeft=function(I){return a(I)&&(I=I.toInt()),(I&=63)===0?this:I<32?c(this.low<<I,this.high<<I|this.low>>>32-I,this.unsigned):c(0,this.low<<I-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(I){return a(I)&&(I=I.toInt()),(I&=63)===0?this:I<32?c(this.low>>>I|this.high<<32-I,this.high>>I,this.unsigned):c(this.high>>I-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(I){if(a(I)&&(I=I.toInt()),I&=63,I===0)return this;var M=this.high;if(I<32){var P=this.low;return c(P>>>I|M<<32-I,M>>>I,this.unsigned)}else return I===32?c(M,0,this.unsigned):c(M>>>I-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},N.toBytes=function(I){return I?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var I=this.high,M=this.low;return[M&255,M>>>8&255,M>>>16&255,M>>>24,I&255,I>>>8&255,I>>>16&255,I>>>24]},N.toBytesBE=function(){var I=this.high,M=this.low;return[I>>>24,I>>>16&255,I>>>8&255,I&255,M>>>24,M>>>16&255,M>>>8&255,M&255]},r.fromBytes=function(I,M,P){return P?r.fromBytesLE(I,M):r.fromBytesBE(I,M)},r.fromBytesLE=function(I,M){return new r(I[0]|I[1]<<8|I[2]<<16|I[3]<<24,I[4]|I[5]<<8|I[6]<<16|I[7]<<24,M)},r.fromBytesBE=function(I,M){return new r(I[4]<<24|I[5]<<16|I[6]<<8|I[7],I[0]<<24|I[1]<<16|I[2]<<8|I[3],M)}}),VY=En(()=>{}),jY=En(()=>{}),HY=En((e,t)=>{(function(n,r,a){function i(c){var u=this,d=l();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=d(" "),u.s1=d(" "),u.s2=d(" "),u.s0-=d(c),u.s0<0&&(u.s0+=1),u.s1-=d(c),u.s1<0&&(u.s1+=1),u.s2-=d(c),u.s2<0&&(u.s2+=1),d=null}function s(c,u){return u.c=c.c,u.s0=c.s0,u.s1=c.s1,u.s2=c.s2,u}function o(c,u){var d=new i(c),h=u&&u.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&s(h,d),p.state=function(){return s(d,{})}),p}function l(){var c=4022871197,u=function(d){d=String(d);for(var h=0;h<d.length;h++){c+=d.charCodeAt(h);var p=.02519603282416938*c;c=p>>>0,p-=c,p*=c,c=p>>>0,p-=c,c+=p*4294967296}return(c>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.alea=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),GY=En((e,t)=>{(function(n,r,a){function i(l){var c=this,u="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(l|0)?c.x=l:u+=l;for(var d=0;d<u.length+64;d++)c.x^=u.charCodeAt(d)|0,c.next()}function s(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var u=new i(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xor128=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),qY=En((e,t)=>{(function(n,r,a){function i(l){var c=this,u="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(h^h<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(l|0)?c.x=l:u+=l;for(var d=0;d<u.length+64;d++)c.x^=u.charCodeAt(d)|0,d==u.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function s(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var u=new i(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xorwow=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),KY=En((e,t)=>{(function(n,r,a){function i(l){var c=this;c.next=function(){var d=c.x,h=c.i,p,f;return p=d[h],p^=p>>>7,f=p^p<<24,p=d[h+1&7],f^=p^p>>>10,p=d[h+3&7],f^=p^p>>>3,p=d[h+4&7],f^=p^p<<7,p=d[h+7&7],p=p^p<<13,f^=p^p<<9,d[h]=f,c.i=h+1&7,f};function u(d,h){var p,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,p=0;p<h.length;++p)f[p&7]=f[p&7]<<15^h.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],d.x=f,d.i=0,p=256;p>0;--p)d.next()}u(c,l)}function s(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){l==null&&(l=+new Date);var u=new i(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,d&&(d.x&&s(d,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xorshift7=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),XY=En((e,t)=>{(function(n,r,a){function i(l){var c=this;c.next=function(){var d=c.w,h=c.X,p=c.i,f,m;return c.w=d=d+1640531527|0,m=h[p+34&127],f=h[p=p+1&127],m^=m<<13,f^=f<<17,m^=m>>>15,f^=f>>>12,m=h[p]=m^f,c.i=p,m+(d^d>>>16)|0};function u(d,h){var p,f,m,g,b,y=[],v=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,v=Math.max(v,h.length)),m=0,g=-32;g<v;++g)h&&(f^=h.charCodeAt((g+32)%h.length)),g===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(b=b+1640531527|0,p=y[g&127]^=f+b,m=p==0?m+1:0);for(m>=128&&(y[(h&&h.length||0)&127]=-1),m=127,g=4*128;g>0;--g)f=y[m+34&127],p=y[m=m+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,y[m]=f^p;d.w=b,d.X=y,d.i=m}u(c,l)}function s(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){l==null&&(l=+new Date);var u=new i(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,d&&(d.X&&s(d,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xor4096=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),YY=En((e,t)=>{(function(n,r,a){function i(l){var c=this,u="";c.next=function(){var h=c.b,p=c.c,f=c.d,m=c.a;return h=h<<25^h>>>7^p,p=p-f|0,f=f<<24^f>>>8^m,m=m-h|0,c.b=h=h<<20^h>>>12^p,c.c=p=p-f|0,c.d=f<<16^p>>>16^m,c.a=m-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=l|0):u+=l;for(var d=0;d<u.length+20;d++)c.b^=u.charCodeAt(d)|0,c.next()}function s(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var u=new i(l),d=c&&c.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.tychei=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),JY=En(()=>{}),ZY=En((e,t)=>{(function(n,r,a){var i=256,s=6,o=52,l="random",c=a.pow(i,s),u=a.pow(2,o),d=u*2,h=i-1,p;function f(w,$,C){var T=[];$=$==!0?{entropy:!0}:$||{};var A=y(b($.entropy?[w,x(r)]:w==null?v():w,3),T),D=new m(T),N=function(){for(var I=D.g(s),M=c,P=0;I<u;)I=(I+P)*i,M*=i,P=D.g(1);for(;I>=d;)I/=2,M/=2,P>>>=1;return(I+P)/M};return N.int32=function(){return D.g(4)|0},N.quick=function(){return D.g(4)/4294967296},N.double=N,y(x(D.S),r),($.pass||C||function(I,M,P,z){return z&&(z.S&&g(z,D),I.state=function(){return g(D,{})}),P?(a[l]=I,M):I})(N,A,"global"in $?$.global:this==a,$.state)}function m(w){var $,C=w.length,T=this,A=0,D=T.i=T.j=0,N=T.S=[];for(C||(w=[C++]);A<i;)N[A]=A++;for(A=0;A<i;A++)N[A]=N[D=h&D+w[A%C]+($=N[A])],N[D]=$;(T.g=function(I){for(var M,P=0,z=T.i,j=T.j,K=T.S;I--;)M=K[z=h&z+1],P=P*i+K[h&(K[z]=K[j=h&j+M])+(K[j]=M)];return T.i=z,T.j=j,P})(i)}function g(w,$){return $.i=w.i,$.j=w.j,$.S=w.S.slice(),$}function b(w,$){var C=[],T=typeof w,A;if($&&T=="object")for(A in w)try{C.push(b(w[A],$-1))}catch(D){}return C.length?C:T=="string"?w:w+"\0"}function y(w,$){for(var C=w+"",T,A=0;A<C.length;)$[h&A]=h&(T^=$[h&A]*19)+C.charCodeAt(A++);return x($)}function v(){try{var w;return p&&(w=p.randomBytes)?w=w(i):(w=new Uint8Array(i),(n.crypto||n.msCrypto).getRandomValues(w)),x(w)}catch(T){var $=n.navigator,C=$&&$.plugins;return[+new Date,n,C,n.screen,x(r)]}}function x(w){return String.fromCharCode.apply(0,w)}if(y(a.random(),r),typeof t=="object"&&t.exports){t.exports=f;try{p=JY()}catch(w){}}else typeof define=="function"&&define.amd?define(function(){return f}):a["seed"+l]=f})(typeof self<"u"?self:e,[],Math)}),E0=En((e,t)=>{var n=HY(),r=GY(),a=qY(),i=KY(),s=XY(),o=YY(),l=ZY();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=i,l.xor4096=s,l.tychei=o,t.exports=l}),v3=En(()=>{}),u$=En(()=>{}),x3=En(()=>{}),QY=En(()=>{}),eJ=En(()=>{}),tJ=En(()=>{}),nJ=En((e,t)=>{var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};function i(){return O.buffer!=he&&Ge(O.buffer),Ie}function s(){return O.buffer!=he&&Ge(O.buffer),Fe}function o(){return O.buffer!=he&&Ge(O.buffer),ze}function l(){return O.buffer!=he&&Ge(O.buffer),Pe}function c(){return O.buffer!=he&&Ge(O.buffer),st}var u=typeof a<"u"?a:{},d,h;u.ready=new Promise(function(B,ee){d=B,h=ee});var p;typeof process<"u"&&process.listeners&&(p={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var f=Object.assign({},u),m=(B,ee)=>{throw ee},g=typeof window=="object",b=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v=u.ENVIRONMENT_IS_PTHREAD||!1,x="";function w(B){return u.locateFile?u.locateFile(B,x):x+B}var $,C,T;function A(B){B instanceof Ta||z("exiting due to exception: "+B)}if(y){var D=u$(),N=x3();b?x=N.dirname(x)+"/":x=__dirname+"/",$=(ee,ge)=>(ee=$a(ee)?new URL(ee):N.normalize(ee),D.readFileSync(ee,ge?void 0:"utf8")),T=ee=>{var ge=$(ee,!0);return ge.buffer||(ge=new Uint8Array(ge)),ge},C=(ee,ge,Be)=>{ee=$a(ee)?new URL(ee):N.normalize(ee),D.readFile(ee,function(Xe,Ze){Xe?Be(Xe):ge(Ze.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(ee){if(!(ee instanceof Ta))throw ee}),process.on("unhandledRejection",function(ee){throw ee}),m=(ee,ge)=>{if(Ct())throw process.exitCode=ee,ge;A(ge),process.exit(ee)},u.inspect=function(){return"[Emscripten Module object]"};let B;try{B=QY()}catch(ee){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ee}global.Worker=B.Worker}else(g||b)&&(b?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof r<"u"&&r&&(x=r),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",y||($=B=>{var ee=new XMLHttpRequest;return ee.open("GET",B,!1),ee.send(null),ee.responseText},b&&(T=B=>{var ee=new XMLHttpRequest;return ee.open("GET",B,!1),ee.responseType="arraybuffer",ee.send(null),new Uint8Array(ee.response)}),C=(B,ee,ge)=>{var Be=new XMLHttpRequest;Be.open("GET",B,!0),Be.responseType="arraybuffer",Be.onload=()=>{if(Be.status==200||Be.status==0&&Be.response){ee(Be.response);return}ge()},Be.onerror=ge,Be.send(null)}));y&&typeof performance>"u"&&(global.performance=eJ().performance);var I=console.log.bind(console),M=console.warn.bind(console);y&&(I=B=>D.writeSync(1,B+"\n"),M=B=>D.writeSync(2,B+"\n"));var P=u.print||I,z=u.printErr||M;Object.assign(u,f),f=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&(m=u.quit);var j;u.wasmBinary&&(j=u.wasmBinary);var K=u.noExitRuntime||!0;typeof WebAssembly!="object"&&Mt("no native wasm support detected");var O,W,L=!1,H;function Z(B,ee){B||Mt(ee)}var J=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ne(B,ee,ge){ee>>>=0;for(var Be=ee+ge,Xe=ee;B[Xe]&&!(Xe>=Be);)++Xe;if(Xe-ee>16&&B.buffer&&J)return J.decode(B.buffer instanceof SharedArrayBuffer?B.slice(ee,Xe):B.subarray(ee,Xe));for(var Ze="";ee<Xe;){var $e=B[ee++];if(!($e&128)){Ze+=String.fromCharCode($e);continue}var Oe=B[ee++]&63;if(($e&224)==192){Ze+=String.fromCharCode(($e&31)<<6|Oe);continue}var tn=B[ee++]&63;if(($e&240)==224?$e=($e&15)<<12|Oe<<6|tn:$e=($e&7)<<18|Oe<<12|tn<<6|B[ee++]&63,$e<65536)Ze+=String.fromCharCode($e);else{var Ea=$e-65536;Ze+=String.fromCharCode(55296|Ea>>10,56320|Ea&1023)}}return Ze}function re(B,ee){return B>>>=0,B?ne(s(),B,ee):""}function pe(B,ee,ge,Be){if(ge>>>=0,!(Be>0))return 0;for(var Xe=ge,Ze=ge+Be-1,$e=0;$e<B.length;++$e){var Oe=B.charCodeAt($e);if(Oe>=55296&&Oe<=57343){var tn=B.charCodeAt(++$e);Oe=65536+((Oe&1023)<<10)|tn&1023}if(Oe<=127){if(ge>=Ze)break;ee[ge++>>>0]=Oe}else if(Oe<=2047){if(ge+1>=Ze)break;ee[ge++>>>0]=192|Oe>>6,ee[ge++>>>0]=128|Oe&63}else if(Oe<=65535){if(ge+2>=Ze)break;ee[ge++>>>0]=224|Oe>>12,ee[ge++>>>0]=128|Oe>>6&63,ee[ge++>>>0]=128|Oe&63}else{if(ge+3>=Ze)break;ee[ge++>>>0]=240|Oe>>18,ee[ge++>>>0]=128|Oe>>12&63,ee[ge++>>>0]=128|Oe>>6&63,ee[ge++>>>0]=128|Oe&63}}return ee[ge>>>0]=0,ge-Xe}function de(B,ee,ge){return pe(B,s(),ee,ge)}var he,Ie,Fe,ze,Pe,st;v&&(he=u.buffer);function Ge(B){he=B,u.HEAP8=Ie=new Int8Array(B),u.HEAP16=new Int16Array(B),u.HEAP32=ze=new Int32Array(B),u.HEAPU8=Fe=new Uint8Array(B),u.HEAPU16=new Uint16Array(B),u.HEAPU32=Pe=new Uint32Array(B),u.HEAPF32=new Float32Array(B),u.HEAPF64=st=new Float64Array(B)}var Ke=u.INITIAL_MEMORY||16777216;if(v)O=u.wasmMemory,he=u.buffer;else if(u.wasmMemory)O=u.wasmMemory;else if(O=new WebAssembly.Memory({initial:Ke/65536,maximum:65536,shared:!0}),!(O.buffer instanceof SharedArrayBuffer))throw z("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&z("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");O&&(he=O.buffer),Ke=he.byteLength,Ge(he);var We,ot=[],gt=[],Ft=[];function Ct(){return K}function yn(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)hr(u.preRun.shift());kt(ot)}function Xt(){!v&&kt(gt)}function vn(){if(!v){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)Bn(u.postRun.shift());kt(Ft)}}function hr(B){ot.unshift(B)}function Bt(B){gt.unshift(B)}function Bn(B){Ft.unshift(B)}var Yt=0,un=null;function pr(B){Yt++,u.monitorRunDependencies&&u.monitorRunDependencies(Yt)}function Ia(B){if(Yt--,u.monitorRunDependencies&&u.monitorRunDependencies(Yt),Yt==0&&un){var ee=un;un=null,ee()}}function Mt(B){u.onAbort&&u.onAbort(B),B="Aborted("+B+")",z(B),L=!0,H=1,B+=". Build with -sASSERTIONS for more info.";var ee=new WebAssembly.RuntimeError(B);throw h(ee),ee}var tr="data:application/octet-stream;base64,";function Wn(B){return B.startsWith(tr)}function $a(B){return B.startsWith("file://")}var Ot;Ot="tfjs-backend-wasm-threaded-simd.wasm",Wn(Ot)||(Ot=w(Ot));function ji(B){try{if(B==Ot&&j)return new Uint8Array(j);if(T)return T(B);throw"both async and sync fetching of the wasm failed"}catch(ee){Mt(ee)}}function Ca(){if(!j&&(g||b)){if(typeof fetch=="function"&&!$a(Ot))return fetch(Ot,{credentials:"same-origin"}).then(function(B){if(!B.ok)throw"failed to load wasm binary file at '"+Ot+"'";return B.arrayBuffer()}).catch(function(){return ji(Ot)});if(C)return new Promise(function(B,ee){C(Ot,function(ge){B(new Uint8Array(ge))},ee)})}return Promise.resolve().then(function(){return ji(Ot)})}function Hi(){var B={env:DE,wasi_snapshot_preview1:DE};function ee($e,Oe){var tn=$e.exports;if(u.asm=tn,kr(u.asm._emscripten_tls_init),We=u.asm.__indirect_function_table,Bt(u.asm.__wasm_call_ctors),W=Oe,!v){var Ea=ve.unusedWorkers.length;ve.unusedWorkers.forEach(function(xs){ve.loadWasmModuleToWorker(xs,function(){--Ea||Ia()})})}}v||pr();function ge($e){ee($e.instance,$e.module)}function Be($e){return Ca().then(function(Oe){return WebAssembly.instantiate(Oe,B)}).then(function(Oe){return Oe}).then($e,function(Oe){z("failed to asynchronously prepare wasm: "+Oe),Mt(Oe)})}function Xe(){return!j&&typeof WebAssembly.instantiateStreaming=="function"&&!Wn(Ot)&&!$a(Ot)&&!y&&typeof fetch=="function"?fetch(Ot,{credentials:"same-origin"}).then(function($e){var Oe=WebAssembly.instantiateStreaming($e,B);return Oe.then(ge,function(tn){return z("wasm streaming compile failed: "+tn),z("falling back to ArrayBuffer instantiation"),Be(ge)})}):Be(ge)}if(u.instantiateWasm)try{var Ze=u.instantiateWasm(B,ee);return Ze}catch($e){z("Module.instantiateWasm callback failed with error: "+$e),h($e)}return Xe().catch(h),{}}var mi={};function Ta(B){this.name="ExitStatus",this.message="Program terminated with exit("+B+")",this.status=B}function gi(B){var ee=ve.pthreads[B];delete ve.pthreads[B],ee.terminate(),rw(B),ve.runningWorkers.splice(ve.runningWorkers.indexOf(ee),1),ee.pthread_ptr=0}function Je(B){var ee=ve.pthreads[B];ee.postMessage({cmd:"cancel"})}function bt(B){var ee=ve.pthreads[B];Z(ee),ve.returnWorkerToPool(ee)}function be(B){var ee=ve.getNewWorker();if(!ee)return 6;ve.runningWorkers.push(ee),ve.pthreads[B.pthread_ptr]=ee,ee.pthread_ptr=B.pthread_ptr;var ge={cmd:"run",start_routine:B.startRoutine,arg:B.arg,pthread_ptr:B.pthread_ptr};return ee.runPthread=()=>{y&&ee.ref(),ee.postMessage(ge,B.transferList),delete ee.runPthread},ee.loaded&&ee.runPthread(),0}function xe(B){if(v)return Vn(1,1,B);H=B,Ct()||(ve.terminateAllThreads(),u.onExit&&u.onExit(B),L=!0),m(B,new Ta(B))}function te(B,ee){if(H=B,!ee&&v)throw Ve(B),"unwind";xe(B)}var ce=te;function Te(B){if(B instanceof Ta||B=="unwind")return H;m(1,B)}var ve={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){v?ve.initWorker():ve.initMainThread()},initMainThread:function(){for(var B=8;B--;)ve.allocateUnusedWorker()},initWorker:function(){K=!1},setExitStatus:function(B){H=B},terminateAllThreads:function(){for(var B of Object.values(ve.pthreads))ve.returnWorkerToPool(B);for(var B of ve.unusedWorkers)B.terminate();ve.unusedWorkers=[]},returnWorkerToPool:function(B){var ee=B.pthread_ptr;delete ve.pthreads[ee],ve.unusedWorkers.push(B),ve.runningWorkers.splice(ve.runningWorkers.indexOf(B),1),B.pthread_ptr=0,y&&B.unref(),rw(ee)},receiveObjectTransfer:function(B){},threadInitTLS:function(){ve.tlsInitFunctions.forEach(B=>B())},loadWasmModuleToWorker:function(B,ee){B.onmessage=Ze=>{var $e=Ze.data,Oe=$e.cmd;if(B.pthread_ptr&&(ve.currentProxiedOperationCallerThread=B.pthread_ptr),$e.targetThread&&$e.targetThread!=Zg()){var tn=ve.pthreads[$e.targetThread];tn?tn.postMessage($e,$e.transferList):z('Internal error! Worker sent a message "'+Oe+'" to target pthread '+$e.targetThread+", but that thread no longer exists!"),ve.currentProxiedOperationCallerThread=void 0;return}Oe==="processProxyingQueue"?Zs($e.queue):Oe==="spawnThread"?be($e):Oe==="cleanupThread"?bt($e.thread):Oe==="killThread"?gi($e.thread):Oe==="cancelThread"?Je($e.thread):Oe==="loaded"?(B.loaded=!0,y&&B.unref(),ee&&ee(B),B.runPthread&&B.runPthread()):Oe==="print"?P("Thread "+$e.threadId+": "+$e.text):Oe==="printErr"?z("Thread "+$e.threadId+": "+$e.text):Oe==="alert"?alert("Thread "+$e.threadId+": "+$e.text):$e.target==="setimmediate"?B.postMessage($e):Oe==="callHandler"?u[$e.handler](...$e.args):Oe&&z("worker sent an unknown command "+Oe),ve.currentProxiedOperationCallerThread=void 0},B.onerror=Ze=>{var $e="worker sent an error!";throw z($e+" "+Ze.filename+":"+Ze.lineno+": "+Ze.message),Ze},y&&(B.on("message",function(Ze){B.onmessage({data:Ze})}),B.on("error",function(Ze){B.onerror(Ze)}),B.on("detachedExit",function(){}));var ge=[],Be=["onExit","onAbort","print","printErr"];for(var Xe of Be)u.hasOwnProperty(Xe)&&ge.push(Xe);B.postMessage({cmd:"load",handlers:ge,urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:O,wasmModule:W})},allocateUnusedWorker:function(){var B,ee=w("tfjs-backend-wasm-threaded-simd.worker.js");B=new Worker(ee),ve.unusedWorkers.push(B)},getNewWorker:function(){return ve.unusedWorkers.length==0&&(ve.allocateUnusedWorker(),ve.loadWasmModuleToWorker(ve.unusedWorkers[0])),ve.unusedWorkers.pop()}};u.PThread=ve;function kt(B){for(;B.length>0;)B.shift()(u)}function xt(){var B=Zg(),ee=o()[B+52>>>2],ge=o()[B+56>>>2],Be=ee-ge;LE(ee,Be),Qg(ee)}u.establishStackSpace=xt;function Ve(B){if(v)return Vn(2,0,B);try{ce(B)}catch(ee){Te(ee)}}var Le=[];function Wt(B){var ee=Le[B];return ee||(B>=Le.length&&(Le.length=B+1),Le[B]=ee=We.get(B)),ee}function wt(B,ee){var ge=Wt(B)(ee);Ct()?ve.setExitStatus(ge):PE(ge)}u.invokeEntryPoint=wt;function kr(B){ve.tlsInitFunctions.push(B)}function Vr(B){FE(B,!b,1,!g),ve.threadInitTLS()}function Gi(B){v?postMessage({cmd:"cleanupThread",thread:B}):bt(B)}function qi(B,ee,ge,Be){return v?Vn(3,1,B,ee,ge,Be):xn(B,ee,ge,Be)}function xn(B,ee,ge,Be){if(typeof SharedArrayBuffer>"u")return z("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Xe=[],Ze=0;if(v&&(Xe.length===0||Ze))return qi(B,ee,ge,Be);var $e={startRoutine:ge,pthread_ptr:B,arg:Be,transferList:Xe};return v?($e.cmd="spawnThread",postMessage($e,Xe),0):be($e)}function Ya(){return 65536}var Ki=!0;function qp(){return Ki}function Zs(B){Atomics.store(o(),B>>2,1),Zg()&&OE(B),Atomics.compareExchange(o(),B>>2,1,0)}u.executeNotifiedProxyingQueue=Zs;function Kp(B,ee,ge,Be){if(B==ee)setTimeout(()=>Zs(Be));else if(v)postMessage({targetThread:B,cmd:"processProxyingQueue",queue:Be});else{var Xe=ve.pthreads[B];if(!Xe)return;Xe.postMessage({cmd:"processProxyingQueue",queue:Be})}return 1}function Xp(B,ee,ge){return-1}function pl(){Mt("")}function fl(B){fl.shown||(fl.shown={}),fl.shown[B]||(fl.shown[B]=1,y&&(B="warning: "+B),z(B))}function Jg(){y||b||fl("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function EE(){return Date.now()}function nw(){return 4294901760}function ae(){return nw()}var ye;y?ye=()=>{var B=process.hrtime();return B[0]*1e3+B[1]/1e6}:ye=()=>performance.timeOrigin+performance.now();function De(B,ee,ge){s().copyWithin(B>>>0,ee>>>0,ee+ge>>>0)}function wn(){return y?tJ().cpus().length:navigator.hardwareConcurrency}function Un(B){var ee=aw(),ge=B();return Qg(ee),ge}function Vn(B,ee){var ge=arguments.length-2,Be=arguments;return Un(()=>{for(var Xe=ge,Ze=eb(Xe*8),$e=Ze>>3,Oe=0;Oe<ge;Oe++){var tn=Be[2+Oe];c()[$e+Oe>>>0]=tn}return ME(B,Xe,Ze,ee)})}var bi=[];function Qj(B,ee,ge){bi.length=ee;for(var Be=ge>>3,Xe=0;Xe<ee;Xe++)bi[Xe]=c()[Be+Xe>>>0];var Ze=B<0,$e=Ze?mi[-B-1]:lH[B];return $e.apply(null,bi)}function eH(B){try{return O.grow(B-he.byteLength+65535>>>16),Ge(O.buffer),1}catch(ee){}}function tH(B){var ee=s().length;if(B=B>>>0,B<=ee)return!1;var ge=nw();if(B>ge)return!1;let Be=(tn,Ea)=>tn+(Ea-tn%Ea)%Ea;for(var Xe=1;Xe<=4;Xe*=2){var Ze=ee*(1+.2/Xe);Ze=Math.min(Ze,B+100663296);var $e=Math.min(ge,Be(Math.max(B,Ze),65536)),Oe=eH($e);if(Oe)return!0}return!1}function nH(){throw"unwind"}function NE(B){return v?Vn(4,1,B):52}function _E(B,ee,ge,Be,Xe){return v?Vn(5,1,B,ee,ge,Be,Xe):70}var rH=[null,[],[]];function aH(B,ee){var ge=rH[B];ee===0||ee===10?((B===1?P:z)(ne(ge,0)),ge.length=0):ge.push(ee)}function AE(B,ee,ge,Be){if(v)return Vn(6,1,B,ee,ge,Be);for(var Xe=0,Ze=0;Ze<ge;Ze++){var $e=l()[ee>>>2],Oe=l()[ee+4>>>2];ee+=8;for(var tn=0;tn<Oe;tn++)aH(B,s()[$e+tn>>>0]);Xe+=Oe}return l()[Be>>>2]=Xe,0}function RE(B){var ee=u["_"+B];return ee}function iH(B,ee){i().set(B,ee>>>0)}function sH(B,ee,ge,Be,Xe){var Ze={string:Na=>{var Jc=0;if(Na!=null&&Na!==0){var WE=(Na.length<<2)+1;Jc=eb(WE),de(Na,Jc,WE)}return Jc},array:Na=>{var Jc=eb(Na.length);return iH(Na,Jc),Jc}};function $e(Na){return ee==="string"?re(Na):ee==="boolean"?!!Na:Na}var Oe=RE(B),tn=[],Ea=0;if(Be)for(var xs=0;xs<Be.length;xs++){var BE=Ze[ge[xs]];BE?(Ea===0&&(Ea=aw()),tn[xs]=BE(Be[xs])):tn[xs]=Be[xs]}var iw=Oe.apply(null,tn);function cH(Na){return Ea!==0&&Qg(Ea),$e(Na)}return iw=cH(iw),iw}function oH(B,ee,ge,Be){ge=ge||[];var Xe=ge.every($e=>$e==="number"||$e==="boolean"),Ze=ee!=="string";return Ze&&Xe&&!Be?RE(B):function(){return sH(B,ee,ge,arguments)}}ve.init();var lH=[null,xe,Ve,qi,NE,_E,AE],DE={__emscripten_init_main_thread_js:Vr,__emscripten_thread_cleanup:Gi,__pthread_create_js:xn,_emscripten_default_pthread_stack_size:Ya,_emscripten_get_now_is_monotonic:qp,_emscripten_notify_task_queue:Kp,_emscripten_set_offscreencanvas_size:Xp,abort:pl,emscripten_check_blocking_allowed:Jg,emscripten_date_now:EE,emscripten_get_heap_max:ae,emscripten_get_now:ye,emscripten_memcpy_big:De,emscripten_num_logical_cores:wn,emscripten_receive_on_main_thread_js:Qj,emscripten_resize_heap:tH,emscripten_unwind_to_js_event_loop:nH,exit:ce,fd_close:NE,fd_seek:_E,fd_write:AE,memory:O||u.wasmMemory};Hi(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.__wasm_call_ctors).apply(null,arguments)},u._init=function(){return(u._init=u.asm.init).apply(null,arguments)},u._init_with_threads_count=function(){return(u._init_with_threads_count=u.asm.init_with_threads_count).apply(null,arguments)},u._get_threads_count=function(){return(u._get_threads_count=u.asm.get_threads_count).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.register_tensor).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.dispose_data).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.dispose).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.Abs).apply(null,arguments)},u._Acos=function(){return(u._Acos=u.asm.Acos).apply(null,arguments)},u._Acosh=function(){return(u._Acosh=u.asm.Acosh).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.Add).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.AddN).apply(null,arguments)},u._All=function(){return(u._All=u.asm.All).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.Any).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.ArgMax).apply(null,arguments)},u._ArgMin=function(){return(u._ArgMin=u.asm.ArgMin).apply(null,arguments)},u._Asin=function(){return(u._Asin=u.asm.Asin).apply(null,arguments)},u._Asinh=function(){return(u._Asinh=u.asm.Asinh).apply(null,arguments)},u._Atan=function(){return(u._Atan=u.asm.Atan).apply(null,arguments)},u._Atan2=function(){return(u._Atan2=u.asm.Atan2).apply(null,arguments)},u._Atanh=function(){return(u._Atanh=u.asm.Atanh).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.AvgPool).apply(null,arguments)},u._AvgPool3D=function(){return(u._AvgPool3D=u.asm.AvgPool3D).apply(null,arguments)},u._AvgPool3DGrad=function(){return(u._AvgPool3DGrad=u.asm.AvgPool3DGrad).apply(null,arguments)},u._AvgPoolGrad=function(){return(u._AvgPoolGrad=u.asm.AvgPoolGrad).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.BatchMatMul).apply(null,arguments)},u._Bincount=function(){return(u._Bincount=u.asm.Bincount).apply(null,arguments)},u._BitwiseAnd=function(){return(u._BitwiseAnd=u.asm.BitwiseAnd).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.Ceil).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.ClipByValue).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Conv2D).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.Conv2DBackpropInput).apply(null,arguments)},u._Conv3D=function(){return(u._Conv3D=u.asm.Conv3D).apply(null,arguments)},u._Conv3DBackpropFilterV2=function(){return(u._Conv3DBackpropFilterV2=u.asm.Conv3DBackpropFilterV2).apply(null,arguments)},u._Conv3DBackpropInputV2=function(){return(u._Conv3DBackpropInputV2=u.asm.Conv3DBackpropInputV2).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.Cos).apply(null,arguments)},u._Cosh=function(){return(u._Cosh=u.asm.Cosh).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.CropAndResize).apply(null,arguments)},u._Cumprod=function(){return(u._Cumprod=u.asm.Cumprod).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.Cumsum).apply(null,arguments)},u._DenseBincount=function(){return(u._DenseBincount=u.asm.DenseBincount).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.DepthToSpace).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.DepthwiseConv2dNative).apply(null,arguments)},u._Diag=function(){return(u._Diag=u.asm.Diag).apply(null,arguments)},u._Dilation2D=function(){return(u._Dilation2D=u.asm.Dilation2D).apply(null,arguments)},u._Dilation2DBackpropFilter=function(){return(u._Dilation2DBackpropFilter=u.asm.Dilation2DBackpropFilter).apply(null,arguments)},u._Dilation2DBackpropInput=function(){return(u._Dilation2DBackpropInput=u.asm.Dilation2DBackpropInput).apply(null,arguments)},u._Elu=function(){return(u._Elu=u.asm.Elu).apply(null,arguments)},u._EluGrad=function(){return(u._EluGrad=u.asm.EluGrad).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.Equal).apply(null,arguments)},u._Erf=function(){return(u._Erf=u.asm.Erf).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Exp).apply(null,arguments)},u._Expm1=function(){return(u._Expm1=u.asm.Expm1).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.FlipLeftRight).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm.Floor).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.FloorDiv).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.FusedBatchNorm).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.FusedConv2D).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.FusedDepthwiseConv2D).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.Gather).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.GatherNd).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.Greater).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.GreaterEqual).apply(null,arguments)},u._IsFinite=function(){return(u._IsFinite=u.asm.IsFinite).apply(null,arguments)},u._IsInf=function(){return(u._IsInf=u.asm.IsInf).apply(null,arguments)},u._IsNan=function(){return(u._IsNan=u.asm.IsNan).apply(null,arguments)},u._LRN=function(){return(u._LRN=u.asm.LRN).apply(null,arguments)},u._LRNGrad=function(){return(u._LRNGrad=u.asm.LRNGrad).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.LeakyRelu).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.Less).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.LessEqual).apply(null,arguments)},u._LinSpace=function(){return(u._LinSpace=u.asm.LinSpace).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.Log).apply(null,arguments)},u._Log1p=function(){return(u._Log1p=u.asm.Log1p).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.LogicalAnd).apply(null,arguments)},u._LogicalNot=function(){return(u._LogicalNot=u.asm.LogicalNot).apply(null,arguments)},u._LogicalOr=function(){return(u._LogicalOr=u.asm.LogicalOr).apply(null,arguments)},u._LogicalXor=function(){return(u._LogicalXor=u.asm.LogicalXor).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.Max).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.MaxPool).apply(null,arguments)},u._MaxPool3D=function(){return(u._MaxPool3D=u.asm.MaxPool3D).apply(null,arguments)},u._MaxPool3DGrad=function(){return(u._MaxPool3DGrad=u.asm.MaxPool3DGrad).apply(null,arguments)},u._MaxPoolGrad=function(){return(u._MaxPoolGrad=u.asm.MaxPoolGrad).apply(null,arguments)},u._MaxPoolWithArgmax=function(){return(u._MaxPoolWithArgmax=u.asm.MaxPoolWithArgmax).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.Maximum).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.Mean).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.Min).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.Minimum).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.MirrorPad).apply(null,arguments)},u._Mod=function(){return(u._Mod=u.asm.Mod).apply(null,arguments)},u._Multinomial=function(){return(u._Multinomial=u.asm.Multinomial).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.Multiply).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.Neg).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.NonMaxSuppressionV3).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.NonMaxSuppressionV4).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.NonMaxSuppressionV5).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.NotEqual).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.OneHot).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.PadV2).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Pow).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Prelu).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Prod).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.RealDiv).apply(null,arguments)},u._Reciprocal=function(){return(u._Reciprocal=u.asm.Reciprocal).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Relu).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Relu6).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.ResizeBilinear).apply(null,arguments)},u._ResizeBilinearGrad=function(){return(u._ResizeBilinearGrad=u.asm.ResizeBilinearGrad).apply(null,arguments)},u._ResizeNearestNeighbor=function(){return(u._ResizeNearestNeighbor=u.asm.ResizeNearestNeighbor).apply(null,arguments)},u._ResizeNearestNeighborGrad=function(){return(u._ResizeNearestNeighborGrad=u.asm.ResizeNearestNeighborGrad).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Reverse).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.RotateWithOffset).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Round).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.Rsqrt).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.ScatterNd).apply(null,arguments)},u._SearchSorted=function(){return(u._SearchSorted=u.asm.SearchSorted).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.SelectV2).apply(null,arguments)},u._Selu=function(){return(u._Selu=u.asm.Selu).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Sigmoid).apply(null,arguments)},u._Sign=function(){return(u._Sign=u.asm.Sign).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Sin).apply(null,arguments)},u._Sinh=function(){return(u._Sinh=u.asm.Sinh).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Softmax).apply(null,arguments)},u._Softplus=function(){return(u._Softplus=u.asm.Softplus).apply(null,arguments)},u._SparseFillEmptyRows=function(){return(u._SparseFillEmptyRows=u.asm.SparseFillEmptyRows).apply(null,arguments)},u._SparseReshape=function(){return(u._SparseReshape=u.asm.SparseReshape).apply(null,arguments)},u._SparseSegmentReduction=function(){return(u._SparseSegmentReduction=u.asm.SparseSegmentReduction).apply(null,arguments)},u._SparseToDense=function(){return(u._SparseToDense=u.asm.SparseToDense).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Sqrt).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Square).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.SquaredDifference).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Step).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.StridedSlice).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Sub).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Sum).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Tan).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Tanh).apply(null,arguments)},u._TensorScatterUpdate=function(){return(u._TensorScatterUpdate=u.asm.TensorScatterUpdate).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm.Tile).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.TopK).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.Transform).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.Transpose).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm._FusedMatMul).apply(null,arguments)},u._malloc=function(){return(u._malloc=u.asm.malloc).apply(null,arguments)},u._free=function(){return(u._free=u.asm.free).apply(null,arguments)},u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm._emscripten_tls_init).apply(null,arguments)};var Zg=u._pthread_self=function(){return(Zg=u._pthread_self=u.asm.pthread_self).apply(null,arguments)};u.___errno_location=function(){return(u.___errno_location=u.asm.__errno_location).apply(null,arguments)};var FE=u.__emscripten_thread_init=function(){return(FE=u.__emscripten_thread_init=u.asm._emscripten_thread_init).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm._emscripten_thread_crashed).apply(null,arguments)},u._emscripten_main_thread_process_queued_calls=function(){return(u._emscripten_main_thread_process_queued_calls=u.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},u._emscripten_main_browser_thread_id=function(){return(u._emscripten_main_browser_thread_id=u.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var ME=u._emscripten_run_in_main_runtime_thread_js=function(){return(ME=u._emscripten_run_in_main_runtime_thread_js=u.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};u._emscripten_dispatch_to_thread_=function(){return(u._emscripten_dispatch_to_thread_=u.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var OE=u.__emscripten_proxy_execute_task_queue=function(){return(OE=u.__emscripten_proxy_execute_task_queue=u.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},rw=u.__emscripten_thread_free_data=function(){return(rw=u.__emscripten_thread_free_data=u.asm._emscripten_thread_free_data).apply(null,arguments)},PE=u.__emscripten_thread_exit=function(){return(PE=u.__emscripten_thread_exit=u.asm._emscripten_thread_exit).apply(null,arguments)},LE=u._emscripten_stack_set_limits=function(){return(LE=u._emscripten_stack_set_limits=u.asm.emscripten_stack_set_limits).apply(null,arguments)},aw=u.stackSave=function(){return(aw=u.stackSave=u.asm.stackSave).apply(null,arguments)},Qg=u.stackRestore=function(){return(Qg=u.stackRestore=u.asm.stackRestore).apply(null,arguments)},eb=u.stackAlloc=function(){return(eb=u.stackAlloc=u.asm.stackAlloc).apply(null,arguments)};u.dynCall_iijjiiii=function(){return(u.dynCall_iijjiiii=u.asm.dynCall_iijjiiii).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.dynCall_jiji).apply(null,arguments)},u.keepRuntimeAlive=Ct,u.wasmMemory=O,u.cwrap=oH,u.ExitStatus=Ta,u.PThread=ve;var tb;un=function B(){tb||zE(),tb||(un=B)};function zE(B){if(Yt>0)return;if(v){d(u),Xt(),startWorker(u);return}if(yn(),Yt>0)return;function ee(){tb||(tb=!0,u.calledRun=!0,!L&&(Xt(),d(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),vn()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),ee()},1)):ee()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();zE();var nb;p&&(nb={uncaughtException:process.listeners("uncaughtException").filter(function(B){return!p.uncaughtException.indexOf(B)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(B){return!p.unhandledRejection.indexOf(B)>-1})});var rb;if(typeof WasmBackendModule<"u")rb=WasmBackendModule;else if(typeof a<"u")rb=a;else throw new Error("Could not find wasm module in post.js");if(nb){var uH=rb._dispose;rb._dispose=function(){uH(),nb.uncaughtException.forEach(function(B){process.removeListener("uncaughtException",B)}),nb.unhandledRejection.forEach(function(B){process.removeListener("unhandledRejection",B)})}}return a.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&(e.WasmBackendModuleThreadedSimd=n)}),rJ=En((e,t)=>{t.exports.wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'}),aJ=En((e,t)=>{var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};var i=typeof a<"u"?a:{},s,o;i.ready=new Promise(function(te,ce){s=te,o=ce});var l;typeof process<"u"&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var c=Object.assign({},i),u=typeof window=="object",d=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",p="";function f(te){return i.locateFile?i.locateFile(te,p):p+te}var m,g,b;if(h){var y=u$(),v=x3();d?p=v.dirname(p)+"/":p=__dirname+"/",m=(te,ce)=>(te=Ke(te)?new URL(te):v.normalize(te),y.readFileSync(te,ce?void 0:"utf8")),b=te=>{var ce=m(te,!0);return ce.buffer||(ce=new Uint8Array(ce)),ce},g=(te,ce,Te)=>{te=Ke(te)?new URL(te):v.normalize(te),y.readFile(te,function(ve,kt){ve?Te(ve):ce(kt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(te){if(!(te instanceof Ct))throw te}),process.on("unhandledRejection",function(te){throw te}),i.inspect=function(){return"[Emscripten Module object]"}}else(u||d)&&(d?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),r&&(p=r),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",m=te=>{var ce=new XMLHttpRequest;return ce.open("GET",te,!1),ce.send(null),ce.responseText},d&&(b=te=>{var ce=new XMLHttpRequest;return ce.open("GET",te,!1),ce.responseType="arraybuffer",ce.send(null),new Uint8Array(ce.response)}),g=(te,ce,Te)=>{var ve=new XMLHttpRequest;ve.open("GET",te,!0),ve.responseType="arraybuffer",ve.onload=()=>{if(ve.status==200||ve.status==0&&ve.response){ce(ve.response);return}Te()},ve.onerror=Te,ve.send(null)});var x=i.print||console.log.bind(console),w=i.printErr||console.warn.bind(console);Object.assign(i,c),c=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var $;i.wasmBinary&&($=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&Pe("no native wasm support detected");var C,T=!1,A=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function D(te,ce,Te){ce>>>=0;for(var ve=ce+Te,kt=ce;te[kt]&&!(kt>=ve);)++kt;if(kt-ce>16&&te.buffer&&A)return A.decode(te.subarray(ce,kt));for(var xt="";ce<kt;){var Ve=te[ce++];if(!(Ve&128)){xt+=String.fromCharCode(Ve);continue}var Le=te[ce++]&63;if((Ve&224)==192){xt+=String.fromCharCode((Ve&31)<<6|Le);continue}var Wt=te[ce++]&63;if((Ve&240)==224?Ve=(Ve&15)<<12|Le<<6|Wt:Ve=(Ve&7)<<18|Le<<12|Wt<<6|te[ce++]&63,Ve<65536)xt+=String.fromCharCode(Ve);else{var wt=Ve-65536;xt+=String.fromCharCode(55296|wt>>10,56320|wt&1023)}}return xt}function N(te,ce){return te>>>=0,te?D(j,te,ce):""}function I(te,ce,Te,ve){if(Te>>>=0,!(ve>0))return 0;for(var kt=Te,xt=Te+ve-1,Ve=0;Ve<te.length;++Ve){var Le=te.charCodeAt(Ve);if(Le>=55296&&Le<=57343){var Wt=te.charCodeAt(++Ve);Le=65536+((Le&1023)<<10)|Wt&1023}if(Le<=127){if(Te>=xt)break;ce[Te++>>>0]=Le}else if(Le<=2047){if(Te+1>=xt)break;ce[Te++>>>0]=192|Le>>6,ce[Te++>>>0]=128|Le&63}else if(Le<=65535){if(Te+2>=xt)break;ce[Te++>>>0]=224|Le>>12,ce[Te++>>>0]=128|Le>>6&63,ce[Te++>>>0]=128|Le&63}else{if(Te+3>=xt)break;ce[Te++>>>0]=240|Le>>18,ce[Te++>>>0]=128|Le>>12&63,ce[Te++>>>0]=128|Le>>6&63,ce[Te++>>>0]=128|Le&63}}return ce[Te>>>0]=0,Te-kt}function M(te,ce,Te){return I(te,j,ce,Te)}var P,z,j,K;function O(te){P=te,i.HEAP8=z=new Int8Array(te),i.HEAP16=new Int16Array(te),i.HEAP32=new Int32Array(te),i.HEAPU8=j=new Uint8Array(te),i.HEAPU16=new Uint16Array(te),i.HEAPU32=K=new Uint32Array(te),i.HEAPF32=new Float32Array(te),i.HEAPF64=new Float64Array(te)}i.INITIAL_MEMORY;var W=[],L=[],H=[];function Z(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)re(i.preRun.shift());yn(W)}function J(){yn(L)}function ne(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)de(i.postRun.shift());yn(H)}function re(te){W.unshift(te)}function pe(te){L.unshift(te)}function de(te){H.unshift(te)}var he=0,Ie=null;function Fe(te){he++,i.monitorRunDependencies&&i.monitorRunDependencies(he)}function ze(te){if(he--,i.monitorRunDependencies&&i.monitorRunDependencies(he),he==0&&Ie){var ce=Ie;Ie=null,ce()}}function Pe(te){i.onAbort&&i.onAbort(te),te="Aborted("+te+")",w(te),T=!0,te+=". Build with -sASSERTIONS for more info.";var ce=new WebAssembly.RuntimeError(te);throw o(ce),ce}var st="data:application/octet-stream;base64,";function Ge(te){return te.startsWith(st)}function Ke(te){return te.startsWith("file://")}var We;We="tfjs-backend-wasm.wasm",Ge(We)||(We=f(We));function ot(te){try{if(te==We&&$)return new Uint8Array($);if(b)return b(te);throw"both async and sync fetching of the wasm failed"}catch(ce){Pe(ce)}}function gt(){if(!$&&(u||d)){if(typeof fetch=="function"&&!Ke(We))return fetch(We,{credentials:"same-origin"}).then(function(te){if(!te.ok)throw"failed to load wasm binary file at '"+We+"'";return te.arrayBuffer()}).catch(function(){return ot(We)});if(g)return new Promise(function(te,ce){g(We,function(Te){te(new Uint8Array(Te))},ce)})}return Promise.resolve().then(function(){return ot(We)})}function Ft(){var te={env:Ca,wasi_snapshot_preview1:Ca};function ce(Ve,Le){var Wt=Ve.exports;i.asm=Wt,C=i.asm.memory,O(C.buffer),i.asm.__indirect_function_table,pe(i.asm.__wasm_call_ctors),ze()}Fe();function Te(Ve){ce(Ve.instance)}function ve(Ve){return gt().then(function(Le){return WebAssembly.instantiate(Le,te)}).then(function(Le){return Le}).then(Ve,function(Le){w("failed to asynchronously prepare wasm: "+Le),Pe(Le)})}function kt(){return!$&&typeof WebAssembly.instantiateStreaming=="function"&&!Ge(We)&&!Ke(We)&&!h&&typeof fetch=="function"?fetch(We,{credentials:"same-origin"}).then(function(Ve){var Le=WebAssembly.instantiateStreaming(Ve,te);return Le.then(Te,function(Wt){return w("wasm streaming compile failed: "+Wt),w("falling back to ArrayBuffer instantiation"),ve(Te)})}):ve(Te)}if(i.instantiateWasm)try{var xt=i.instantiateWasm(te,ce);return xt}catch(Ve){w("Module.instantiateWasm callback failed with error: "+Ve),o(Ve)}return kt().catch(o),{}}function Ct(te){this.name="ExitStatus",this.message="Program terminated with exit("+te+")",this.status=te}function yn(te){for(;te.length>0;)te.shift()(i)}function Xt(){Pe("")}function vn(){return 4294901760}function hr(){return vn()}function Bt(te,ce,Te){j.copyWithin(te>>>0,ce>>>0,ce+Te>>>0)}function Bn(te){try{return C.grow(te-P.byteLength+65535>>>16),O(C.buffer),1}catch(ce){}}function Yt(te){var ce=j.length;te=te>>>0;var Te=vn();if(te>Te)return!1;let ve=(Wt,wt)=>Wt+(wt-Wt%wt)%wt;for(var kt=1;kt<=4;kt*=2){var xt=ce*(1+.2/kt);xt=Math.min(xt,te+100663296);var Ve=Math.min(Te,ve(Math.max(te,xt),65536)),Le=Bn(Ve);if(Le)return!0}return!1}function un(te){return 52}function pr(te,ce,Te,ve,kt){return 70}var Ia=[null,[],[]];function Mt(te,ce){var Te=Ia[te];ce===0||ce===10?((te===1?x:w)(D(Te,0)),Te.length=0):Te.push(ce)}function tr(te,ce,Te,ve){for(var kt=0,xt=0;xt<Te;xt++){var Ve=K[ce>>>2],Le=K[ce+4>>>2];ce+=8;for(var Wt=0;Wt<Le;Wt++)Mt(te,j[Ve+Wt>>>0]);kt+=Le}return K[ve>>>2]=kt,0}function Wn(te){var ce=i["_"+te];return ce}function $a(te,ce){z.set(te,ce>>>0)}function Ot(te,ce,Te,ve,kt){var xt={string:xn=>{var Ya=0;if(xn!=null&&xn!==0){var Ki=(xn.length<<2)+1;Ya=Ta(Ki),M(xn,Ya,Ki)}return Ya},array:xn=>{var Ya=Ta(xn.length);return $a(xn,Ya),Ya}};function Ve(xn){return ce==="string"?N(xn):ce==="boolean"?!!xn:xn}var Le=Wn(te),Wt=[],wt=0;if(ve)for(var kr=0;kr<ve.length;kr++){var Vr=xt[Te[kr]];Vr?(wt===0&&(wt=Hi()),Wt[kr]=Vr(ve[kr])):Wt[kr]=ve[kr]}var Gi=Le.apply(null,Wt);function qi(xn){return wt!==0&&mi(wt),Ve(xn)}return Gi=qi(Gi),Gi}function ji(te,ce,Te,ve){Te=Te||[];var kt=Te.every(Ve=>Ve==="number"||Ve==="boolean"),xt=ce!=="string";return xt&&kt&&!ve?Wn(te):function(){return Ot(te,ce,Te,arguments)}}var Ca={abort:Xt,emscripten_get_heap_max:hr,emscripten_memcpy_big:Bt,emscripten_resize_heap:Yt,fd_close:un,fd_seek:pr,fd_write:tr};Ft(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Acos=function(){return(i._Acos=i.asm.Acos).apply(null,arguments)},i._Acosh=function(){return(i._Acosh=i.asm.Acosh).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._ArgMin=function(){return(i._ArgMin=i.asm.ArgMin).apply(null,arguments)},i._Asin=function(){return(i._Asin=i.asm.Asin).apply(null,arguments)},i._Asinh=function(){return(i._Asinh=i.asm.Asinh).apply(null,arguments)},i._Atan=function(){return(i._Atan=i.asm.Atan).apply(null,arguments)},i._Atan2=function(){return(i._Atan2=i.asm.Atan2).apply(null,arguments)},i._Atanh=function(){return(i._Atanh=i.asm.Atanh).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._AvgPool3D=function(){return(i._AvgPool3D=i.asm.AvgPool3D).apply(null,arguments)},i._AvgPool3DGrad=function(){return(i._AvgPool3DGrad=i.asm.AvgPool3DGrad).apply(null,arguments)},i._AvgPoolGrad=function(){return(i._AvgPoolGrad=i.asm.AvgPoolGrad).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Bincount=function(){return(i._Bincount=i.asm.Bincount).apply(null,arguments)},i._BitwiseAnd=function(){return(i._BitwiseAnd=i.asm.BitwiseAnd).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Conv3D=function(){return(i._Conv3D=i.asm.Conv3D).apply(null,arguments)},i._Conv3DBackpropFilterV2=function(){return(i._Conv3DBackpropFilterV2=i.asm.Conv3DBackpropFilterV2).apply(null,arguments)},i._Conv3DBackpropInputV2=function(){return(i._Conv3DBackpropInputV2=i.asm.Conv3DBackpropInputV2).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DenseBincount=function(){return(i._DenseBincount=i.asm.DenseBincount).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Diag=function(){return(i._Diag=i.asm.Diag).apply(null,arguments)},i._Dilation2D=function(){return(i._Dilation2D=i.asm.Dilation2D).apply(null,arguments)},i._Dilation2DBackpropFilter=function(){return(i._Dilation2DBackpropFilter=i.asm.Dilation2DBackpropFilter).apply(null,arguments)},i._Dilation2DBackpropInput=function(){return(i._Dilation2DBackpropInput=i.asm.Dilation2DBackpropInput).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._EluGrad=function(){return(i._EluGrad=i.asm.EluGrad).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Erf=function(){return(i._Erf=i.asm.Erf).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._Expm1=function(){return(i._Expm1=i.asm.Expm1).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._IsFinite=function(){return(i._IsFinite=i.asm.IsFinite).apply(null,arguments)},i._IsInf=function(){return(i._IsInf=i.asm.IsInf).apply(null,arguments)},i._IsNan=function(){return(i._IsNan=i.asm.IsNan).apply(null,arguments)},i._LRN=function(){return(i._LRN=i.asm.LRN).apply(null,arguments)},i._LRNGrad=function(){return(i._LRNGrad=i.asm.LRNGrad).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._LinSpace=function(){return(i._LinSpace=i.asm.LinSpace).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._Log1p=function(){return(i._Log1p=i.asm.Log1p).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._MaxPool3D=function(){return(i._MaxPool3D=i.asm.MaxPool3D).apply(null,arguments)},i._MaxPool3DGrad=function(){return(i._MaxPool3DGrad=i.asm.MaxPool3DGrad).apply(null,arguments)},i._MaxPoolGrad=function(){return(i._MaxPoolGrad=i.asm.MaxPoolGrad).apply(null,arguments)},i._MaxPoolWithArgmax=function(){return(i._MaxPoolWithArgmax=i.asm.MaxPoolWithArgmax).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Mod=function(){return(i._Mod=i.asm.Mod).apply(null,arguments)},i._Multinomial=function(){return(i._Multinomial=i.asm.Multinomial).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Reciprocal=function(){return(i._Reciprocal=i.asm.Reciprocal).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._ResizeBilinearGrad=function(){return(i._ResizeBilinearGrad=i.asm.ResizeBilinearGrad).apply(null,arguments)},i._ResizeNearestNeighbor=function(){return(i._ResizeNearestNeighbor=i.asm.ResizeNearestNeighbor).apply(null,arguments)},i._ResizeNearestNeighborGrad=function(){return(i._ResizeNearestNeighborGrad=i.asm.ResizeNearestNeighborGrad).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SearchSorted=function(){return(i._SearchSorted=i.asm.SearchSorted).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Selu=function(){return(i._Selu=i.asm.Selu).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sign=function(){return(i._Sign=i.asm.Sign).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Sinh=function(){return(i._Sinh=i.asm.Sinh).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._Softplus=function(){return(i._Softplus=i.asm.Softplus).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._SparseToDense=function(){return(i._SparseToDense=i.asm.SparseToDense).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._TensorScatterUpdate=function(){return(i._TensorScatterUpdate=i.asm.TensorScatterUpdate).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)};var Hi=i.stackSave=function(){return(Hi=i.stackSave=i.asm.stackSave).apply(null,arguments)},mi=i.stackRestore=function(){return(mi=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},Ta=i.stackAlloc=function(){return(Ta=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.cwrap=ji;var gi;Ie=function te(){gi||Je(),gi||(Ie=te)};function Je(te){if(he>0||(Z(),he>0))return;function ce(){gi||(gi=!0,i.calledRun=!0,!T&&(J(),s(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),ne()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),ce()},1)):ce()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();Je();var bt;l&&(bt={uncaughtException:process.listeners("uncaughtException").filter(function(te){return!l.uncaughtException.indexOf(te)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(te){return!l.unhandledRejection.indexOf(te)>-1})});var be;if(typeof a<"u")be=a;else if(typeof WasmBackendModuleThreadedSimd<"u")be=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(bt){var xe=be._dispose;be._dispose=function(){xe(),bt.uncaughtException.forEach(function(te){process.removeListener("uncaughtException",te)}),bt.unhandledRejection.forEach(function(te){process.removeListener("unhandledRejection",te)})}}return a.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&(e.WasmBackendModule=n)}),N0=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},Vm=class{refCount(e){return ra("refCount")}incRef(e){return ra("incRef")}timerAvailable(){return!0}time(e){return ra("time")}read(e){return ra("read")}readSync(e){return ra("readSync")}readToGPU(e,t){return ra("readToGPU")}numDataIds(){return ra("numDataIds")}disposeData(e,t){return ra("disposeData")}write(e,t,n){return ra("write")}move(e,t,n,r,a){return ra("move")}createTensorFromGPUData(e,t,n){return ra("createTensorFromGPUData")}memory(){return ra("memory")}floatPrecision(){return ra("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return ra("dispose")}};function ra(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}function w3(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,av(e,t,n)}function iJ(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was ".concat(e.length,"Second array length was ").concat(t.length));let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,av(e,n,r),av(t,n,r)}function dm(e,t,n){return Math.max(e,Math.min(t,n))}function sJ(e){return e%2===0?e:e+1}function av(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function oJ(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function lJ(e,t){let n=Math.random();return t*n+(1-n)*e}function uJ(e,t){let n=0;for(let r=0;r<e.length;r++){let a=Number(e[r])-Number(t[r]);n+=a*a}return n}function F(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function zr(e,t,n=""){F(Gs(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function xu(e){F(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Vt(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function cJ(e){return e.length===0}function k3(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Gs(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Yd(e){return e%1===0}function dJ(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function hJ(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function pJ(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return w3(t),t}function Lf(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function fJ(e,t=a=>0,n,r){return new Promise((a,i)=>{let s=0,o=()=>{if(e()){a();return}s++;let l=t(s);if(n!=null&&s>=n){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function mJ(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(e[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(i));r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found ".concat(e[i]," at dim ").concat(i));if(r===-1){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(n===0)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!==0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));let a=e.slice();return a[r]=t/n,a}function hi(e,t){let n=t.length;return e=e==null?t.map((r,a)=>a):[].concat(e),F(e.every(r=>r>=-n&&r<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)),F(e.every(r=>Yd(r)),()=>"All values in axis param must be integers but got axis ".concat(e)),e.map(r=>r<0?n+r:r)}function S3(e,t){let n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:hi(t,e).sort(),s=0;for(let o=0;o<e.length;++o){if(i!=null){if(i[s]===o&&e[o]!==1)throw new Error("Can't squeeze axis ".concat(o," since its dim '").concat(e[o],"' is not 1"));(i[s]==null||i[s]>o)&&e[o]===1&&(n.push(e[o]),r.push(o)),i[s]<=o&&s++}e[o]!==1&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function I3(e,t){return c$(e,t)}function c$(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error("Unknown data type ".concat(e));return n}function $3(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function C3(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function gJ(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function iv(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype ".concat(e))}function T3(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function fo(e){return typeof e=="string"||e instanceof String}function E3(e){return typeof e=="boolean"}function N3(e){return typeof e=="number"}function jm(e){return Array.isArray(e)?jm(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":N3(e)?"float32":fo(e)?"string":E3(e)?"bool":"float32"}function Fo(e){return!!(e&&e.constructor&&e.call&&e.apply)}function sv(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Sh(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function _3(e,t,n,r=!1){let a=new Array;if(t.length===1){let i=t[0]*(r?2:1);for(let s=0;s<i;s++)a[s]=n[e+s]}else{let i=t[0],s=t.slice(1),o=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)a[l]=_3(e+l*o,s,n,r)}return a}function Dd(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return _3(0,e,t,n)}function bJ(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function d$(e,t){let n=_0(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function _0(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function yJ(e,t){let n=e.reduce((r,a)=>r*a,1);if(t==null||t==="float32")return Dd(e,new Float32Array(n));if(t==="int32")return Dd(e,new Int32Array(n));if(t==="bool")return Dd(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Sa(e){e.forEach(t=>{F(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"]."))})}function vJ(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function xJ(e,t,n){if(t===0)return[];if(t===1)return[e];let r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function A0(e){return e&&e.then&&typeof e.then=="function"}var SA="tfjsflags",A3=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=wJ,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},this.urlFlags[e]!=null){let r=this.urlFlags[e];Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(A0(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);SA in e&&e[SA].split(",").forEach(t=>{let[n,r]=t.split(":");this.urlFlags[n]=SJ(n,r)})}};function wJ(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(kJ(t,r[0],r[1]),r.join("="))),t}function kJ(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function SJ(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":"".concat(+n)===n?+n:t}function Q(){return h$}var h$=null;function IJ(e){h$=e}var Kw;function R3(){if(Kw==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");Kw=e}return Kw}function $J(){let e=R3();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function p$(e,t){let n=$J();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var Ih="Abs",wu="Acos",ku="Acosh",Jo="Add",Su="AddN",$h="All",Ch="Any",Th="ArgMax",Eh="ArgMin",Iu="Asin",$u="Asinh",Cu="Atan",Tu="Atanh",Eu="Atan2",Nu="AvgPool",Hm="AvgPoolGrad",Nh="AvgPool3D",Gm="AvgPool3DGrad",_u="BatchMatMul",_h="BatchToSpaceND",Ah="Bincount",Rh="BitwiseAnd",D3="BroadcastTo",qm="BroadcastArgs",Au="Cast",Ru="Ceil",Zo="ClipByValue",R0="Complex",Km="ComplexAbs",Dh="Concat",Du="Conv2D",D0="Conv2DBackpropFilter",Fu="Conv2DBackpropInput",Mu="Conv3D",Fh="Conv3DBackpropFilterV2",Mh="Conv3DBackpropInputV2",Ou="Cos",Pu="Cosh",Oh="Cumprod",Lu="Cumsum",Ph="CropAndResize",Xm="DenseBincount",Lh="DepthToSpace",zu="DepthwiseConv2dNative",F0="DepthwiseConv2dNativeBackpropFilter",M0="DepthwiseConv2dNativeBackpropInput",Ym="Diag",Bu="Dilation2D",Jd="Dilation2DBackpropInput",Zd="Dilation2DBackpropFilter",f$="Draw",Wu="RealDiv",O0="Einsum",Uu="Elu",zh="EluGrad",Vu="Erf",Bh="Equal",ju="Exp",Wh="ExpandDims",Hu="Expm1",P0="FFT",Jm="Fill",Uh="FlipLeftRight",Gu="Floor",qu="FloorDiv",Ku="FusedBatchNorm",Vh="GatherV2",jh="GatherNd",Hh="Greater",Xu="GreaterEqual",Yu="Identity",L0="IFFT",z0="Imag",Ju="IsFinite",Zu="IsInf",Qu="IsNan",ec="LeakyRelu",Gh="Less",qh="LessEqual",Kh="LinSpace",tc="Log",nc="Log1p",Xh="LogicalAnd",Yh="LogicalNot",Jh="LogicalOr",F3="LogicalXor",M3="LogSoftmax",CJ="LowerBound",rc="LRN",Zh="LRNGrad",TJ="MatrixBandPart",ac="Max",ic="Maximum",sc="MaxPool",Zm="MaxPoolGrad",Qh="MaxPool3D",Qm="MaxPool3DGrad",eg="MaxPoolWithArgmax",oc="Mean",lc="Min",uc="Minimum",cc="MirrorPad",dc="Mod",ep="Multinomial",hc="Multiply",tp="Neg",np="NotEqual",rp="NonMaxSuppressionV3",ap="NonMaxSuppressionV4",ip="NonMaxSuppressionV5",sp="OnesLike",pc="OneHot",op="Pack",fc="PadV2",EJ="Pool",mc="Pow",gc="Prelu",bc="Prod",B0="RaggedGather",W0="RaggedRange",U0="RaggedTensorToTensor",tg="Range",V0="Real",yc="Reciprocal",vc="Relu",lp="Reshape",xc="ResizeNearestNeighbor",up="ResizeNearestNeighborGrad",wc="ResizeBilinear",cp="ResizeBilinearGrad",kc="Relu6",Sc="Reverse",Ic="Round",$c="Rsqrt",dp="ScatterNd",hp="TensorScatterUpdate",pp="SearchSorted",fp="Select",Cc="Selu",mp="Slice",Tc="Sin",Ec="Sinh",Nc="Sign",_c="Sigmoid",Ac="Softplus",Rc="Sqrt",Dc="Sum",gp="SpaceToBatchND",bp="SplitV",Fc="Softmax",ng="SparseFillEmptyRows",yp="SparseReshape",rg="SparseSegmentMean",ag="SparseSegmentSum",vp="SparseToDense",Mc="SquaredDifference",ig="Square",sg="StaticRegexReplace",xp="StridedSlice",og="StringNGrams",lg="StringSplit",ug="StringToHashBucketFast",Oc="Sub",Pc="Tan",Lc="Tanh",Qo="Tile",wp="TopK",kp="Transform",Fs="Transpose",cg="Unique",Sp="Unpack",dg="UnsortedSegmentSum",NJ="UpperBound",Ip="ZerosLike",el="Step",ov="FromPixels",$p="RotateWithOffset",Jl="_FusedMatMul",Zl="FusedConv2D",Ql="FusedDepthwiseConv2D";function uo(...e){Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(...e)}function _J(...e){Q().getBool("IS_TEST")||Q().getBool("PROD")||console.log(...e)}var Qd=p$("kernelRegistry",()=>new Map),hm=p$("gradRegistry",()=>new Map);function lv(e,t){let n=m$(e,t);return Qd.get(n)}function Ek(e){return hm.get(e)}function uv(e){let t=Qd.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[i,s]=a,[o]=i.split("_");o===e&&n.push(s)}return n}function hg(e){let{kernelName:t,backendName:n}=e,r=m$(t,n);Qd.has(r)&&uo("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),Qd.set(r,e)}function O3(e){let{kernelName:t}=e;hm.has(t)&&Q().getBool("DEBUG")&&uo("Overriding the gradient for '".concat(t,"'")),hm.set(t,e)}function AJ(e,t){let n=m$(e,t);if(!Qd.has(n))throw new Error("The kernel '".concat(e,"' for backend '").concat(t,"' is not registered"));Qd.delete(n)}function RJ(e){if(!hm.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));hm.delete(e)}function DJ(e,t){uv(e).forEach(n=>{let r=Object.assign({},n,{backendName:t});hg(r)})}function m$(e,t){return"".concat(t,"_").concat(e)}var k={};He(k,{arraysEqual:()=>Gs,arraysEqualWithNull:()=>k3,assert:()=>F,assertNonNegativeIntegerDimensions:()=>Sa,assertNonNull:()=>xu,assertShapesMatch:()=>zr,bytesFromStringArray:()=>T3,bytesPerElement:()=>iv,checkConversionForErrors:()=>$3,clamp:()=>dm,computeStrides:()=>Sh,convertBackendValuesAndArrayBuffer:()=>bJ,createScalarValue:()=>zJ,createShuffledIndices:()=>pJ,decodeString:()=>cv,distSquared:()=>uJ,encodeString:()=>fg,fetch:()=>WJ,fingerPrint64:()=>LJ,flatten:()=>Mo,getArrayFromDType:()=>c$,getTypedArrayFromDType:()=>I3,hasEncodingLoss:()=>gJ,hexToLong:()=>pg,indexToLoc:()=>xJ,inferDtype:()=>jm,inferFromImplicitShape:()=>mJ,isBoolean:()=>E3,isFunction:()=>Fo,isInt:()=>Yd,isNumber:()=>N3,isPromise:()=>A0,isScalarShape:()=>cJ,isString:()=>fo,isTypedArray:()=>Kn,isValidDtype:()=>C3,locToIndex:()=>vJ,makeOnesTypedArray:()=>d$,makeZerosNestedTypedArray:()=>yJ,makeZerosTypedArray:()=>_0,nearestDivisor:()=>sv,nearestLargerEven:()=>sJ,now:()=>pm,parseAxisParam:()=>hi,randUniform:()=>lJ,repeatedTry:()=>fJ,rightPad:()=>Lf,shuffle:()=>w3,shuffleCombo:()=>iJ,sizeFromShape:()=>Vt,sizeToSquarishShape:()=>hJ,squeezeShape:()=>S3,sum:()=>oJ,swap:()=>av,tanh:()=>dJ,toNestedArray:()=>Dd,toTypedArray:()=>j0});function P3(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var IA=Yo(UY()),Sl=IA.default||IA;function pg(e){return Sl.fromString(e,!0,16)}var L3=pg("c3a5c85c97cb3127"),wl=pg("b492b66fbe98f273"),Cr=pg("9ae16a3b2f90404f");function Nk(e){return e.xor(e.shru(47))}function z3(e,t,n){let r=e.slice(t,t+n);return Sl.fromBytes(Array.from(r),!0,!0)}function Ut(e,t){return z3(e,t,8)}function $A(e,t){return z3(e,t,4)}function qn(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Co(e,t,n=pg("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function FJ(e,t,n,r,a,i){a=a.add(e),i=qn(i.add(a).add(r),21);let s=a;return a=a.add(t),a=a.add(n),i=i.add(qn(a,44)),[a.add(r),i.add(s)]}function Nb(e,t,n,r){return FJ(Ut(e,t),Ut(e,t+8),Ut(e,t+16),Ut(e,t+24),n,r)}function MJ(e,t=e.length){if(t>=8){let n=Cr.add(t*2),r=Ut(e,0).add(Cr),a=Ut(e,t-8),i=qn(a,37).mul(n).add(r),s=qn(r,25).add(a).mul(n);return Co(i,s,n)}if(t>=4){let n=Cr.add(t*2),r=$A(e,0);return Co(r.shl(3).add(t),$A(e,t-4),n)}if(t>0){let n=e[0],r=e[t>>1],a=e[t-1],i=n+(r<<8),s=t+(a<<2);return Nk(Cr.mul(i).xor(L3.mul(s))).mul(Cr)}return Cr}function OJ(e,t=e.length){let n=Cr.add(t*2),r=Ut(e,0).mul(wl),a=Ut(e,8),i=Ut(e,t-8).mul(n),s=Ut(e,t-16).mul(Cr);return Co(qn(r.add(a),43).add(qn(i,30)).add(s),r.add(qn(a.add(Cr),18)).add(i),n)}function PJ(e,t=e.length){let n=Cr.add(t*2),r=Ut(e,0).mul(Cr),a=Ut(e,8),i=Ut(e,t-8).mul(n),s=Ut(e,t-16).mul(Cr),o=qn(r.add(a),43).add(qn(i,30)).add(s),l=Co(o,r.add(qn(a.add(Cr),18)).add(i),n),c=Ut(e,16).mul(n),u=Ut(e,24),d=o.add(Ut(e,t-32)).mul(n),h=l.add(Ut(e,t-24)).mul(n);return Co(qn(c.add(u),43).add(qn(d,30)).add(h),c.add(qn(u.add(r),18)).add(d),n)}function LJ(e,t=e.length){let n=Sl.fromNumber(81,!0);if(t<=32)return t<=16?MJ(e,t):OJ(e,t);if(t<=64)return PJ(e,t);let r=n,a=n.mul(wl).add(113),i=Nk(a.mul(Cr).add(113)).mul(Cr),s=[Sl.UZERO,Sl.UZERO],o=[Sl.UZERO,Sl.UZERO];r=r.mul(Cr).add(Ut(e,0));let l=0,c=(t-1>>6)*64,u=c+(t-1&63)-63;do r=qn(r.add(a).add(s[0]).add(Ut(e,l+8)),37).mul(wl),a=qn(a.add(s[1]).add(Ut(e,l+48)),42).mul(wl),r=r.xor(o[1]),a=a.add(s[0]).add(Ut(e,l+40)),i=qn(i.add(o[0]),33).mul(wl),s=Nb(e,l,s[1].mul(wl),r.add(o[0])),o=Nb(e,l+32,i.add(o[1]),a.add(Ut(e,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let d=wl.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=qn(r.add(a).add(s[0]).add(Ut(e,l+8)),37).mul(d),a=qn(a.add(s[1]).add(Ut(e,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(Ut(e,l+40))),i=qn(i.add(o[0]),33).mul(d),s=Nb(e,l,s[1].mul(d),r.add(o[0])),o=Nb(e,l+32,i.add(o[1]),a.add(Ut(e,l+16))),[i,r]=[r,i],Co(Co(s[0],o[0],d).add(Nk(a).mul(L3)).add(i),Co(s[1],o[1],d).add(r),d)}function zJ(e,t){return t==="string"?fg(e):j0([e],t)}function BJ(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function j0(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Mo(e)),Q().getBool("DEBUG")&&$3(e,t),BJ(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error("Unknown data type ".concat(t))}function pm(){return Q().platform.now()}function WJ(e,t){return Q().platform.fetch(e,t)}function fg(e,t="utf-8"){return t=t||"utf-8",Q().platform.encode(e,t)}function cv(e,t="utf-8"){return t=t||"utf-8",Q().platform.decode(e,t)}function Kn(e){return Q().platform.isTypedArray!=null?Q().platform.isTypedArray(e):P3(e)}function Mo(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||A0(e)||e==null||Kn(e)&&n)t.push(e);else if(Array.isArray(e)||Kn(e))for(let r=0;r<e.length;++r)Mo(e[r],t,n);else{let r=-1;for(let a of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)Mo(e[a],t,n)}return t}var UJ=class{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new jJ)}profileKernel(e,t,n){let r,a=()=>{r=n()},i,s=pm();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(let o of r)o.dataSync();i=Promise.resolve({kernelMs:pm()-s})}if(Q().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let l=r[o];l.data().then(c=>{VJ(c,l.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then(o=>o.kernelMs),extraInfo:i.then(o=>o.getExtraProfileInfo!=null?o.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:i}=e;n.forEach(s=>{Promise.all([s.data(),r,i]).then(o=>{this.logger.logKernelProfile(t,s,o[0],o[1],a,o[2])})})}};function VJ(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var jJ=class{logKernelProfile(e,t,n,r,a,i){let s=typeof r=="number"?Lf("".concat(r,"ms"),9):r.error,o=Lf(e,25),l=t.rank,c=t.size,u=Lf(t.shape.toString(),14),d="";for(let h in a){let p=a[h];if(p!=null){let f=p.shape||t.shape,m=f.length;d+="".concat(h,": ").concat(m,"D ").concat(m>0?f:""," ")}}console.log("%c".concat(o,"	%c").concat(s,"	%c").concat(l,"D ").concat(u,"	%c").concat(c,"	%c").concat(d,"	%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function HJ(e,t,n){let r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let c=e[l],u=c.inputs;for(let d in u){let h=u[d],p=!1;for(let f=0;f<t.length;f++)if(r[h.id]){c.outputs.forEach(m=>r[m.id]=!0),p=!0,a[c.id]=!0;break}if(p)break}}let i={};i[n.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let c=e[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(let h in u)i[u[h].id]=!0,s[c.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let c=e[l];if(a[c.id]&&s[c.id]){let u={};for(let h in c.inputs){let p=c.inputs[h];r[p.id]&&(u[h]=p)}let d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,o.push(d)}}return o}function GJ(e,t,n,r){for(let a=t.length-1;a>=0;a--){let i=t[a],s=[];if(i.outputs.forEach(l=>{let c=e[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for ".concat(i.kernelName,"."));let o=i.gradient(s);for(let l in i.inputs){if(!(l in o))throw new Error("Cannot backprop through input ".concat(l,". Available gradients found: ").concat(Object.keys(o),"."));let c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ").concat(l," must have 'float32' dtype, but has '").concat(c.dtype,"'"));let u=i.inputs[l];if(!Gs(c.shape,u.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input '").concat(l,"' has shape '").concat(c.shape,"', which does not match the shape of the input '").concat(u.shape,"'"));if(e[u.id]==null)e[u.id]=c;else{let d=e[u.id];e[u.id]=r(d,c),d.dispose()}}}}var CA=20,sf=3,Xw=7;function qJ(e,t,n,r){let a=Sh(t),i=KJ(e,t,n,a),s=t.length,o=sy(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(s)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(o.map(c=>"    "+c).join("\n")),l.join("\n")}function KJ(e,t,n,r){let a=Vt(t),i=r[r.length-1],s=new Array(i).fill(0),o=t.length,l=n==="complex64"?bf(e):e;if(o>1)for(let c=0;c<a/i;c++){let u=c*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],gf(l[u+d],0,n).length)}return s}function gf(e,t,n){let r;return Array.isArray(e)?r="".concat(parseFloat(e[0].toFixed(Xw))," + ").concat(parseFloat(e[1].toFixed(Xw)),"j"):fo(e)?r="'".concat(e,"'"):n==="bool"?r=B3(e):r=parseFloat(e.toFixed(Xw)).toString(),Lf(r,t)}function B3(e){return e===0?"false":"true"}function sy(e,t,n,r,a,i=!0){let s=n==="complex64"?2:1,o=t[0],l=t.length;if(l===0){if(n==="complex64"){let m=bf(e);return[gf(m[0],0,n)]}return n==="bool"?[B3(e[0])]:[e[0].toString()]}if(l===1){if(o>CA){let m=sf*s,g=Array.from(e.slice(0,m)),b=Array.from(e.slice((o-sf)*s,o*s));return n==="complex64"&&(g=bf(g),b=bf(b)),["["+g.map((y,v)=>gf(y,a[v],n)).join(", ")+", ..., "+b.map((y,v)=>gf(y,a[o-sf+v],n)).join(", ")+"]"]}return["["+(n==="complex64"?bf(e):Array.from(e)).map((m,g)=>gf(m,a[g],n)).join(", ")+"]"]}let c=t.slice(1),u=r.slice(1),d=r[0]*s,h=[];if(o>CA){for(let m=0;m<sf;m++){let g=m*d,b=g+d;h.push(...sy(e.slice(g,b),c,n,u,a,!1))}h.push("...");for(let m=o-sf;m<o;m++){let g=m*d,b=g+d;h.push(...sy(e.slice(g,b),c,n,u,a,m===o-1))}}else for(let m=0;m<o;m++){let g=m*d,b=g+d;h.push(...sy(e.slice(g,b),c,n,u,a,m===o-1))}let p=l===2?",":"";h[0]="["+(o>0?h[0]+p:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":f),h}function bf(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Cn=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Vt(e),n!=null){let r=n.length;F(r===this.size,()=>"Length of values '".concat(r,"' does not match the size inferred by the shape '").concat(this.size,"'."))}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||c$(t,this.size),this.strides=Sh(e)}set(e,...t){t.length===0&&(t=[0]),F(t.length===this.rank,()=>"The number of provided coordinates (".concat(t.length,") must match the rank (").concat(this.rank,")"));let n=this.locToIndex(t);this.values[n]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(let r of e){if(r<0||r>=this.shape[t]){let a="Requested out of range element at ".concat(e,".   Buffer shape=").concat(this.shape);throw new Error(a)}t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Ci().makeTensor(this.values,this.shape,this.dtype)}},Ci=null,ud=null;function XJ(e){Ci=e}function YJ(e){ud=e}var qe=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Vt(e),this.strides=Sh(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return ud.buffer(this.shape,this.dtype,e)}bufferSync(){return ud.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return Dd(this.shape,e,this.dtype==="complex64")}arraySync(){return Dd(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=Ci().read(this.dataId);if(this.dtype==="string"){let t=await e;try{return t.map(n=>cv(n))}catch(n){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ci().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Ci().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>cv(t))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await Ci().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Ci().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return ud.print(this,e)}clone(){return this.throwIfDisposed(),ud.clone(this)}toString(e=!1){let t=this.dataSync();return qJ(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ud.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),Ci().makeVariable(this,e,t,n)}};Object.defineProperty(qe,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function se(){return p$("Tensor",()=>qe)}se();var eu=class extends qe{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!Gs(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));Ci().disposeTensor(this),this.dataId=e.dataId,Ci().incRef(this,null)}dispose(){Ci().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(eu,Symbol.hasInstance,{value:e=>e instanceof qe&&e.assign!=null&&e.assign instanceof Function});var Fi={};He(Fi,{assertTypesMatch:()=>V3,getTensorsInContainer:()=>g$,isTensorInList:()=>ZJ,makeTypesMatch:()=>ln});var _k;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(_k||(_k={}));var Ak;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Ak||(Ak={}));var Rk;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Rk||(Rk={}));var Dk;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Dk||(Dk={}));var Fk;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Fk||(Fk={}));var JJ={float32:Dk,int32:Ak,bool:Rk,complex64:Fk};function Ua(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return JJ[e][t]}function H0(e){return Ua(e,"int32")}function W3(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function U3(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function ln(e,t){if(e.dtype===t.dtype)return[e,t];let n=Ua(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function V3(e,t){F(e.dtype===t.dtype,()=>"The dtypes of the first(".concat(e.dtype,") and second(").concat(t.dtype,") input must match"))}function ZJ(e,t){return t.some(n=>n.id===e.id)}function g$(e){let t=[];return j3(e,t,new Set),t}function j3(e,t,n){if(e==null)return;if(e instanceof qe){t.push(e);return}if(!QJ(e))return;let r=e;for(let a in r){let i=r[a];n.has(i)||(n.add(i),j3(i,t,n))}}function QJ(e){return Array.isArray(e)||typeof e=="object"}function Yw(e){return e.kernelName!=null}var TA=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},fm=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new TA}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(this.backendInstance==null){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(uo("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new UJ(this.backendInstance),!0}setupRegisteredKernels(){uv(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){uv(e).forEach(t=>{t.disposeFunc!=null&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(t==null)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{let n=t.factory();if(n&&!(n instanceof Vm)&&typeof n.then=="function"){let r=++this.pendingBackendInitId,a=n.then(i=>r<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,uo("Initialization of backend ".concat(e," failed")),uo(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=n,{success:!0,asyncInit:!1}}catch(n){return uo("Initialization of backend ".concat(e," failed")),uo(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}let r;return this.scopedRun(()=>this.startScope(n),()=>this.endScope(r),()=>(r=t(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,t,n){e();try{let r=n();return t(),r}catch(r){throw t(),r}}nextTensorId(){return fm.nextTensorId++}nextVariableId(){return fm.nextVariableId++}clone(e){let t=U.runKernel(Yu,{x:e}),n={x:e},r=i=>({x:()=>{let s="float32",o={x:i},l={dtype:s};return U.runKernel(Au,o,l)}}),a=[];return this.addTapeNode(this.state.activeScope.name,n,[t],r,a,{}),t}runKernel(e,t,n){if(this.backendName==null&&this.backend,lv(e,this.backendName)==null)throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),a=0;n.forEach(o=>{a+=o.dtype==="complex64"?3:1});let i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-a-i;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[],r=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let o,l=Yw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Yw(e)){let{kernelName:p,inputs:f,attrs:m}=e;this.backendName==null&&this.backend;let g=lv(p,this.backendName);F(g!=null,()=>"Cannot find registered kernel '".concat(p,"' for backend '").concat(this.backendName,"'")),s=()=>{let b=this.backend.numDataIds();o=g.kernelFunc({inputs:f,attrs:m,backend:this.backend});let y=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,y);let v=y.map(x=>x.rank!=null?x:this.makeTensorFromTensorInfo(x));if(r){let x=this.getTensorsForGradient(p,f,v);n=this.saveTensorsForBackwardMode(x)}return v}}else{let{forwardFunc:p}=e,f=m=>{r&&(n=m.map(g=>this.keep(this.clone(g))))};s=()=>{let m=this.backend.numDataIds();o=this.tidy(()=>p(this.backend,f));let g=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,m,g),g}}let{inputs:c,attrs:u}=e,d=Yw(e)?null:e.backwardsFunc,h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=s():(h=this.profiler.profileKernel(l,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs)}),r&&this.addTapeNode(l,c,t,d,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:t.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(e,t,n){let r=Ek(e);if(r!=null){let a=r.inputsToSave||[],i=r.outputsToSave||[],s;r.saveAllInputs?(F(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(l=>t[l])):s=a.map(l=>t[l]);let o=n.filter((l,c)=>i[c]);return s.concat(o)}return[]}makeTensor(e,t,n,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;n==="string"&&fo(e[0])&&(a=e.map(o=>fg(o)));let i=r.write(a,t,n),s=new qe(t,n,i,this.nextTensorId());if(this.trackTensor(s,r),n==="string"){let o=this.state.tensorInfo.get(i),l=T3(a);this.state.numBytes+=l-o.bytes,o.bytes=l}return s}makeTensorFromDataId(e,t,n,r){n=n||"float32";let a={dataId:e,shape:t,dtype:n};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){let{dataId:n,shape:r,dtype:a}=e,i=new qe(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.cast(r));let a=new eu(e,t,n,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*iv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof eu||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let n=e.size*iv(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(r=>r.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,n,r,a,i){let s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=Ek(e);o!=null&&(r=o.gradFunc),r!=null&&(s.gradient=l=>(l=l.map((c,u)=>{if(c==null){let d=n[u],h=_0(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),r(l.length>1?l:l[0],a,i))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=g$(e),n=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let i=this.state.activeScope.track[a];!i.kept&&!n.has(i.id)&&i.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===r.id&&this.track(a)})}gradients(e,t,n,r=!1){if(F(t.length>0,()=>"gradients() received an empty list of xs."),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(a instanceof qe,()=>"The result y returned by f() must be a tensor.");let i=HJ(this.state.activeTape,t,a);if(!r&&i.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let s={};s[a.id]=n==null?eZ(a.shape):n,GJ(s,i,l=>this.tidy(l),tZ);let o=t.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(let c of l.saved)c.dispose()}),this.state.activeTape=null),{value:a,grads:o}})}customGrad(e){return F(Fo(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{F(t.every(s=>s instanceof qe),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,r={};t.forEach((s,o)=>{r[o]=s});let a=(s,o)=>(n=e(...t,o),F(n.value instanceof qe,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(Fo(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),i=(s,o)=>{let l=n.gradFunc(s,o),c=Array.isArray(l)?l:[l];F(c.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(c.every(d=>d instanceof qe),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let u={};return c.forEach((d,h)=>{u[h]=()=>d}),u};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=pm(),n=await this.backend.time(e);return n.wallMs=pm()-t,n}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new TA;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};fm.nextTensorId=0;fm.nextVariableId=0;function eZ(e){let t=d$(Vt(e),"float32");return U.makeTensor(t,e,"float32")}function H3(){let e=R3();if(e._tfengine==null){let t=new A3(e);e._tfengine=new fm(t)}return IJ(e._tfengine.ENV),XJ(()=>e._tfengine),e._tfengine}var U=H3();function tZ(e,t){let n={a:e,b:t};return U.runKernel(Jo,n)}var mg={};He(mg,{isBrowser:()=>G3,isMobile:()=>aZ,mockIsMobile:()=>rZ});function nZ(){return typeof navigator<"u"&&navigator!=null}var Mk;function rZ(e){Mk=e}function aZ(e){if(Mk!==void 0)return Mk;if(e||nZ()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){let n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function G3(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Jr=Q();Jr.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Jr.registerFlag("IS_BROWSER",()=>G3());Jr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Jr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Jr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Jr.registerFlag("PROD",()=>!1);Jr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Jr.getBool("DEBUG"));Jr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Jr.registerFlag("IS_TEST",()=>!1);Jr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Jr.getBool("DEBUG"));Jr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Jr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Jr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function ds(e,t){let n=e;if(Kn(e))return t==="string"?[]:[e.length];if(W3(e)){let a=e.channels||"RGBA";return[e.height,e.width*a.length]}else if(U3(e))return[e.buffer.size/(t==null?4:iv(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||Kn(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&Q().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&q3(e,r,[]),r}function q3(e,t,n){if(n=n||[],!Array.isArray(e)&&!Kn(e)){F(t.length===0,()=>"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements"));return}F(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")),F(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements"));let r=t.slice(1);for(let a=0;a<e.length;++a)q3(e[a],r,n.concat(a))}function EA(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function R(e,t,n,r="numeric"){if(e instanceof qe)return EA(r,e.dtype,t,n),e;let a=jm(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),EA(r,a,t,n),e==null||!Kn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let o=e==null?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(o,"'"))}let i=ds(e,a);!Kn(e)&&!Array.isArray(e)&&(e=[e]);let s=a!=="string"?j0(e,a):Mo(e,[],!0);return U.makeTensor(s,i,a)}function mm(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((a,i)=>R(a,"".concat(t,"[").concat(i,"]"),n,r))}var b$="__op";function V(e){let t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+b$;let a=(...i)=>{U.startScope(n);try{let s=r(...i);return A0(s)&&console.error("Cannot return a Promise inside of tidy."),U.endScope(s),s}catch(s){throw U.endScope(null),s}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}function iZ(e,t){let n=R(e,"real","complex"),r=R(t,"imag","complex");zr(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));let a={real:n,imag:r};return U.runKernel(R0,a)}var Ws=V({complex_:iZ});function tl(e,t,n,r){if(r==null)r=jm(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(U3(e)||W3(e)){if(r!=="float32"&&r!=="int32")throw new Error("Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return U.backend.createTensorFromGPUData(e,t||n,r)}if(!Kn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Sa(t);let a=Vt(t),i=Vt(n);F(a===i,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(i));for(let s=0;s<n.length;++s){let o=n[s],l=s===n.length-1?o!==Vt(t.slice(s)):!0;F(n[s]===t[s]||!l,()=>"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). "))}}return!Kn(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?j0(e,r):Mo(e,[],!0),U.makeTensor(e,t,r)}function Nr(e,t,n){let r=ds(e,n);return tl(e,t,r,n)}var Ok={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},fs=class{static join(e){return new fs(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(n=>Kn(n)?n.buffer:n),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){let r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);let n=this.findShardForByte(e);if(n===-1)throw new Error("Could not find start shard for byte ".concat(e));let r=t-e,a=new ArrayBuffer(r),i=new Uint8Array(a),s=0;for(let o=n;o<this.shards.length;o++){let l=this.shards[o],c=e+s-l.start,u=s,d=Math.min(t,l.end)-l.start,h=new Uint8Array(l.buffer,c,d-c);if(i.set(h,u),s+=h.length,t<l.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(r){return e<r.start?-1:e>=r.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let n=sZ(this.shards,t);return n===-1?-1:(this.previousShardIndex=n,this.previousShardIndex)}};function sZ(e,t){let n=0,r=e.length;for(;n<=r;){let a=Math.floor((r-n)/2)+n,i=t(e[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}var dv=4;async function oZ(e,t){let n=[],r=[],a=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<a.length;++s){let o=a[s],l=Array.isArray(e)?e[s].tensor:e[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l.dtype));let c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(async d=>{let h=await l.bytes(),p=h.reduce((g,b)=>g+b.length,0)+dv*h.length,f=new Uint8Array(p),m=0;for(let g=0;g<h.length;g++){let b=h[g],y=new Uint8Array(new Uint32Array([b.length]).buffer);f.set(y,m),m+=dv,f.set(b,m),m+=b.length}d(f)});r.push(u)}else r.push(l.data());t!=null&&(c.group=t),n.push(c)}let i=await Promise.all(r);return{data:lZ(i),specs:n}}function K3(e,t){let n=new fs(e),r={},a,i=0;for(let s of t){let o=s.name,l=s.dtype,c=s.shape,u=Vt(c),d;if("quantization"in s){let h=s.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error("Weight ".concat(s.name," with quantization ").concat(h.dtype," doesn't have corresponding metadata min and scale."))}else if(h.dtype==="float16"){if(l!=="float32")throw new Error("Weight ".concat(s.name," is quantized with ").concat(h.dtype," which only supports weights of type float32 not ").concat(l,"."))}else throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(h.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));let p=Ok[h.dtype],f=n.slice(i,i+u*p),m=h.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(l==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){d=new Float32Array(m.length);for(let g=0;g<m.length;g++){let b=m[g];d[g]=b*h.scale+h.min}}else if(h.dtype==="float16")a===void 0&&(a=mZ()),d=a(m);else throw new Error("Unsupported quantization type ".concat(h.dtype," for weight type float32."));else if(l==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Unsupported quantization type ".concat(h.dtype," for weight type int32."));d=new Int32Array(m.length);for(let g=0;g<m.length;g++){let b=m[g];d[g]=Math.round(b*h.scale+h.min)}}else throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l));i+=u*p}else if(l==="string"){let h=Vt(s.shape);d=[];for(let p=0;p<h;p++){let f=new Uint32Array(n.slice(i,i+dv))[0];i+=dv;let m=new Uint8Array(n.slice(i,i+f));d.push(m),i+=f}}else{let h=Ok[l],p=n.slice(i,i+u*h);if(l==="float32")d=new Float32Array(p);else if(l==="int32")d=new Int32Array(p);else if(l==="bool")d=new Uint8Array(p);else if(l==="complex64"){d=new Float32Array(p);let f=new Float32Array(d.length/2),m=new Float32Array(d.length/2);for(let y=0;y<f.length;y++)f[y]=d[y*2],m[y]=d[y*2+1];let g=Nr(f,c,"float32"),b=Nr(m,c,"float32");r[o]=Ws(g,b),g.dispose(),b.dispose()}else throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l));i+=u*h}l!=="complex64"&&(r[o]=Nr(d,c,l))}return r}function lZ(e){if(e===null)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0,n=[];e.forEach(i=>{if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(i.constructor.name))});let r=new Uint8Array(t),a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var y$=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function NA(e){return y$?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function uZ(e){if(y$)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function cZ(e){if(y$){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function dZ(e){return fs.join(e)}function _A(e){let t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);let n=e.split(t);return n[n.length-1]}function X3(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function Y3(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function v$(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),Y3(e,n,r)}function gg(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:NA(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:NA(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new fs(e.weightData).byteLength}}function J3(e){let t=[];for(let n of e)t.push(...n.weights);return t}function hZ(){let e=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function pZ(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function fZ(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function mZ(){let e=hZ(),t=pZ(),n=fZ();return r=>{let a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let s=0;s<r.length;s++){let o=r[s],l=e[n[o>>10]+(o&1023)]+t[o>>10];i[s]=l}return new Float32Array(a)}}var cn=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return cn.instance==null&&(cn.instance=new cn),cn.instance}static registerSaveRouter(e){cn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){cn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return cn.getHandlers(e,"save")}static getLoadHandlers(e,t){return cn.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[];return(t==="load"?cn.getInstance().loadRouters:cn.getInstance().saveRouters).forEach(a=>{let i=a(e,n);i!==null&&r.push(i)}),r}},gZ=e=>cn.registerSaveRouter(e),bZ=e=>cn.registerLoadRouter(e),yZ=e=>cn.getSaveHandlers(e),vZ=(e,t)=>cn.getLoadHandlers(e,t),Pk="tensorflowjs",Lk=1,Rl="models_store",mo="model_info_store";function Z3(){if(!Q().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function zk(e){let t=e.result;t.createObjectStore(Rl,{keyPath:"modelPath"}),t.createObjectStore(mo,{keyPath:"modelPath"})}var tu=class{constructor(e){if(this.indexedDB=Z3(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((n,r)=>{let a=this.indexedDB.open(Pk,Lk);a.onupgradeneeded=()=>zk(a),a.onsuccess=()=>{let i=a.result;if(t==null){let s=i.transaction(Rl,"readonly"),o=s.objectStore(Rl).get(this.modelPath);o.onsuccess=()=>{if(o.result==null)return i.close(),r(new Error("Cannot find model with path '".concat(this.modelPath,"' in IndexedDB.")));n(o.result.modelArtifacts)},o.onerror=l=>(i.close(),r(o.error)),s.oncomplete=()=>i.close()}else{t.weightData=fs.join(t.weightData);let s=gg(t),o=i.transaction(mo,"readwrite"),l=o.objectStore(mo),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(d){return r(d)}let u;c.onsuccess=()=>{u=i.transaction(Rl,"readwrite");let d=u.objectStore(Rl),h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s})}catch(p){return r(p)}h.onsuccess=()=>n({modelArtifactsInfo:s}),h.onerror=p=>{l=o.objectStore(mo);let f=l.delete(this.modelPath);f.onsuccess=()=>(i.close(),r(h.error)),f.onerror=m=>(i.close(),r(h.error))}},c.onerror=d=>(i.close(),r(c.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}}},a.onerror=i=>r(a.error)})}};tu.URL_SCHEME="indexeddb://";var Q3=e=>Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tu.URL_SCHEME)?xZ(e.slice(tu.URL_SCHEME.length)):null;cn.registerSaveRouter(Q3);cn.registerLoadRouter(Q3);function xZ(e){return new tu(e)}function wZ(e){return e.startsWith(tu.URL_SCHEME)?e.slice(tu.URL_SCHEME.length):e}var kZ=class{constructor(){this.indexedDB=Z3()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(Pk,Lk);n.onupgradeneeded=()=>zk(n),n.onsuccess=()=>{let r=n.result,a=r.transaction(mo,"readonly"),i=a.objectStore(mo).getAll();i.onsuccess=()=>{let s={};for(let o of i.result)s[o.modelPath]=o.modelArtifactsInfo;e(s)},i.onerror=s=>(r.close(),t(i.error)),a.oncomplete=()=>r.close()},n.onerror=r=>t(n.error)})}async removeModel(e){return e=wZ(e),new Promise((t,n)=>{let r=this.indexedDB.open(Pk,Lk);r.onupgradeneeded=()=>zk(r),r.onsuccess=()=>{let a=r.result,i=a.transaction(mo,"readwrite"),s=i.objectStore(mo),o=s.get(e),l;o.onsuccess=()=>{if(o.result==null)return a.close(),n(new Error("Cannot find model with path '".concat(e,"' in IndexedDB.")));{let c=s.delete(e),u=()=>{l=a.transaction(Rl,"readwrite");let d=l.objectStore(Rl).delete(e);d.onsuccess=()=>t(o.result.modelArtifactsInfo),d.onerror=h=>n(o.error)};c.onsuccess=u,c.onerror=d=>(u(),a.close(),n(o.error))}},o.onerror=c=>(a.close(),n(o.error)),i.oncomplete=()=>{l==null?a.close():l.oncomplete=()=>a.close()}},r.onerror=a=>n(r.error)})}},Es="/",cd="tensorflowjs_models",eP="info",SZ="model_topology",IZ="weight_specs",$Z="weight_data",CZ="model_metadata";function tP(e){return{info:[cd,e,eP].join(Es),topology:[cd,e,SZ].join(Es),weightSpecs:[cd,e,IZ].join(Es),weightData:[cd,e,$Z].join(Es),modelMetadata:[cd,e,CZ].join(Es)}}function nP(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function TZ(e){let t=e.split(Es);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Es)}function EZ(e){return e.startsWith(nu.URL_SCHEME)?e.slice(nu.URL_SCHEME.length):e}var nu=class{constructor(e){if(!Q().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=tP(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=gg(e),a=fs.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,uZ(a));let i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:r}}catch(i){throw nP(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(r.modelTopologyBytes,", weightSpecsBytes=").concat(r.weightSpecsBytes,", weightDataBytes=").concat(r.weightDataBytes,"."))}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(n==null)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));t.weightSpecs=r;let a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){let s=JSON.parse(a);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(t.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}let i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));return t.weightData=cZ(i),t}};nu.URL_SCHEME="localstorage://";var rP=e=>Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nu.URL_SCHEME)?NZ(e.slice(nu.URL_SCHEME.length)):null;cn.registerSaveRouter(rP);cn.registerLoadRouter(rP);function NZ(e){return new nu(e)}var _Z=class{constructor(){F(Q().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=cd+Es,n=Es+eP;for(let r=0;r<this.LS.length;++r){let a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){let i=TZ(a);e[i]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=EZ(e);let t=tP(e);if(this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '".concat(e,"'"));let n=JSON.parse(this.LS.getItem(t.info));return nP(t),n}},Fd="://",Gr=class{constructor(){this.managers={}}static getInstance(){return Gr.instance==null&&(Gr.instance=new Gr),Gr.instance}static registerManager(e,t){F(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Fd)&&(e=e.slice(0,e.indexOf(Fd))),F(e.length>0,()=>"scheme must not be an empty string.");let n=Gr.getInstance();F(n.managers[e]==null,()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){let t=Gr.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(Gr.getInstance().managers)}};function oy(e){if(e.indexOf(Fd)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: ".concat(Gr.getSchemes().join(",")));return{scheme:e.split(Fd)[0],path:e.split(Fd)[1]}}async function aP(e,t,n=!1){F(e!==t,()=>"Old path and new path are the same: '".concat(e,"'"));let r=cn.getLoadHandlers(e);F(r.length>0,()=>"Copying failed because no load handler is found for source URL ".concat(e,".")),F(r.length<2,()=>"Copying failed because more than one (".concat(r.length,") load handlers for source URL ").concat(e,"."));let a=r[0],i=cn.getSaveHandlers(t);F(i.length>0,()=>"Copying failed because no save handler is found for destination URL ".concat(t,".")),F(i.length<2,()=>"Copying failed because more than one (".concat(r.length,") save handlers for destination URL ").concat(t,"."));let s=i[0],o=oy(e).scheme,l=oy(e).path,c=o===oy(e).scheme,u=await a.load();n&&c&&await Gr.getManager(o).removeModel(l);let d=await s.save(u);return n&&!c&&await Gr.getManager(o).removeModel(l),d.modelArtifactsInfo}async function AZ(){let e=Gr.getSchemes(),t={};for(let n of e){let r=await Gr.getManager(n).listModels();for(let a in r){let i=n+Fd+a;t[i]=r[a]}}return t}async function RZ(e){let t=oy(e);return Gr.getManager(t.scheme).removeModel(t.path)}async function DZ(e,t){return aP(e,t,!1)}async function FZ(e,t){return aP(e,t,!0)}var MZ=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!Q().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",n=>{if(n.source===window&&n.data.name===this.messageName){n.stopPropagation();let r=this.functionRefs[n.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return P3(e)}};if(Q().get("IS_BROWSER")){Q().setPlatform("browser",new MZ);try{Gr.registerManager(nu.URL_SCHEME,new _Z)}catch(e){}try{Gr.registerManager(tu.URL_SCHEME,new kZ)}catch(e){}}var OZ={importFetch:()=>VY()},Jw,PZ=class{constructor(){this.util=jY(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return Q().global.fetch!=null?Q().global.fetch(e,t):(Jw==null&&(Jw=OZ.importFetch()),Jw(e,t))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};Q().get("IS_NODE")&&!Q().get("IS_BROWSER")&&Q().setPlatform("node",new PZ);function nt(e,t="float32",n){return t=t||"float32",Sa(e),new Cn(e,t,n)}function LZ(e,t){let n=R(e,"x","cast");if(!C3(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},a={dtype:t};return U.runKernel(Au,r,a)}var me=V({cast_:LZ});function zZ(e){let t={x:R(e,"x","clone","string_or_numeric")};return U.runKernel(Yu,t)}var ls=V({clone_:zZ});function x$(e,t=!1){console.log(e.toString(t))}H3();var BZ={buffer:nt,cast:me,clone:ls,print:x$};YJ(BZ);function WZ(){Q().set("PROD",!0)}function UZ(){Q().set("DEBUG",!0)}function VZ(){Q().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function iP(e){Q().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function jZ(){U.disposeVariables()}function ni(){return U}function hv(){return U.memory()}function HZ(e){return U.profile(e)}function X(e,t){return U.tidy(e,t)}function je(e){g$(e).forEach(t=>t.dispose())}function An(e){return U.keep(e)}function GZ(e){return U.time(e)}function qZ(e){return U.setBackend(e)}function KZ(){return U.ready()}function XZ(){return U.backendName}function YZ(e){U.removeBackend(e)}function JZ(e){return U.findBackend(e)}function ZZ(e){return U.findBackendFactory(e)}function G0(e,t,n=1){return U.registerBackend(e,t,n)}function sP(){return U.backend}function QZ(e,t){Q().setPlatform(e,t)}function eQ(e,t){let n=R(e,"a","add"),r=R(t,"b","add");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(Jo,a)}var ie=V({add_:eQ});function tQ(e,t){let n=R(e,"a","floorDiv"),r=R(t,"b","floorDiv");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(qu,a)}var q0=V({floorDiv_:tQ});function nQ(e,t){let n=R(e,"a","div"),r=R(t,"b","div");if([n,r]=ln(n,r),n.dtype==="int32"&&r.dtype==="int32")return q0(n,r);let a={a:n,b:r},i={};return U.runKernel(Wu,a,i)}var Ce=V({div_:nQ});function rQ(e,t){let n=R(e,"a","mul"),r=R(t,"b","mul");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(hc,a)}var G=V({mul_:rQ});function aQ(e){let t=R(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return U.runKernel(Km,n)}else{let n={x:t};return U.runKernel(Ih,n)}}var kn=V({abs_:aQ});function iQ(e){let t={x:R(e,"x","acos")};return U.runKernel(wu,t)}var w$=V({acos_:iQ});function sQ(e){let t={x:R(e,"x","acosh")};return U.runKernel(ku,t)}var k$=V({acosh_:sQ});function oQ(e){F(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),F(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got ".concat(e.length));let t=e.map((a,i)=>R(a,"tensors".concat(i),"addN")),n=t[0];t.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(a=>{if(!Gs(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return U.runKernel(Su,r)}var oP=V({addN_:oQ});function lQ(e,t=null,n=!1){let r={x:R(e,"x","all","bool")},a={axis:t,keepDims:n};return U.runKernel($h,r,a)}var K0=V({all_:lQ});function uQ(e,t=null,n=!1){let r={x:R(e,"x","any","bool")},a={axis:t,keepDims:n};return U.runKernel(Ch,r,a)}var gm=V({any_:uQ});function cQ(e,t=0){let n={x:R(e,"x","argMax")},r={axis:t};return U.runKernel(Th,n,r)}var ru=V({argMax_:cQ});function dQ(e,t=0){let n={x:R(e,"x","argMin")},r={axis:t};return U.runKernel(Eh,n,r)}var S$=V({argMin_:dQ});function hQ(e){let t={x:R(e,"x","asin")};return U.runKernel(Iu,t)}var I$=V({asin_:hQ});function pQ(e){let t={x:R(e,"x","asinh")};return U.runKernel($u,t)}var $$=V({asinh_:pQ});function fQ(e){let t={x:R(e,"x","atan")};return U.runKernel(Cu,t)}var C$=V({atan_:fQ});function mQ(e,t){let n=R(e,"a","atan2"),r=R(t,"b","atan2");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(Eu,a)}var T$=V({atan2_:mQ});function gQ(e){let t={x:R(e,"x","atanh")};return U.runKernel(Tu,t)}var E$=V({atanh_:gQ});function bQ(e,t,n,r,a="NHWC",i){let s=e[3],o=[...t,s],l=cP(a);return bg(e,o,n,i,r,null,null,l)}function lP(e,t,n,r,a,i,s="channelsLast"){let[o,l]=bm(t),c;if(s==="channelsLast")c=[o,l,e[3],e[3]];else if(s==="channelsFirst")c=[o,l,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(s));return bg(e,c,n,r,a,i,!1,s)}function yQ(e,t,n,r,a,i,s="NDHWC"){let[o,l,c]=Bk(t),u,d;if(s==="NDHWC")d="channelsLast",u=[o,l,c,e[4],e[4]];else if(s==="NCDHW")d="channelsFirst",u=[o,l,c,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(s));return uP(e,u,n,r,a,!1,d,i)}function bg(e,t,n,r,a,i,s=!1,o="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d]=e;else if(o==="channelsFirst")[l,d,c,u]=e;else throw new Error("Unknown dataFormat ".concat(o));let[h,p,,f]=t,[m,g]=bm(n),[b,y]=bm(r),v=Md(h,b),x=Md(p,y),{padInfo:w,outHeight:$,outWidth:C}=wQ(a,c,u,m,g,v,x,i,o),T=s?f*d:f,A;return o==="channelsFirst"?A=[l,T,$,C]:o==="channelsLast"&&(A=[l,$,C,T]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:$,outWidth:C,outChannels:T,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:x,dilationHeight:b,dilationWidth:y,inShape:e,outShape:A,filterShape:t}}function uP(e,t,n,r,a,i=!1,s="channelsLast",o){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,h]=e;else if(s==="channelsFirst")[l,h,c,u,d]=e;else throw new Error("Unknown dataFormat ".concat(s));let[p,f,m,,g]=t,[b,y,v]=Bk(n),[x,w,$]=Bk(r),C=Md(p,x),T=Md(f,w),A=Md(m,$),{padInfo:D,outDepth:N,outHeight:I,outWidth:M}=kQ(a,c,u,d,b,y,v,C,T,A,o),P=i?g*h:g,z;return s==="channelsFirst"?z=[l,P,N,I,M]:s==="channelsLast"&&(z=[l,N,I,M,P]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:N,outHeight:I,outWidth:M,outChannels:P,padInfo:D,strideDepth:b,strideHeight:y,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:T,effectiveFilterWidth:A,dilationDepth:x,dilationHeight:w,dilationWidth:$,inShape:e,outShape:z,filterShape:t}}function vQ(e,t,n,r,a){r==null&&(r=N$(e,t,n));let i=e[0],s=e[1],o=ym((i-t+2*r)/n+1,a),l=ym((s-t+2*r)/n+1,a);return[o,l]}function xQ(e,t,n,r,a,i){a==null&&(a=N$(e,t[0],r[0]));let s=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*a>=t[o]&&(s[o]=ym((e[o]-t[o]+2*a)/r[o]+1,i));return s}function N$(e,t,n,r=1){let a=Md(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function bm(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Bk(e){return typeof e=="number"?[e,e,e]:e}function Md(e,t){return t<=1?e:e+(e-1)*(t-1)}function wQ(e,t,n,r,a,i,s,o,l){let c,u,d;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let h=vQ([t,n],i,r,e,o);u=h[0],d=h[1]}else if(e==="same"){u=Math.ceil(t/r),d=Math.ceil(n/a);let h=Math.max(0,(u-1)*r+i-t),p=Math.max(0,(d-1)*a+s-n),f=Math.floor(h/2),m=h-f,g=Math.floor(p/2),b=p-g;c={top:f,bottom:m,left:g,right:b,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),d=Math.ceil((n-s+1)/a);else if(typeof e=="object"){let h=l==="channelsLast"?e[1][0]:e[2][0],p=l==="channelsLast"?e[1][1]:e[2][1],f=l==="channelsLast"?e[2][0]:e[3][0],m=l==="channelsLast"?e[2][1]:e[3][1];c={top:h,bottom:p,left:f,right:m,type:h===0&&p===0&&f===0&&m===0?"VALID":"EXPLICIT"},u=ym((t-i+h+p)/r+1,o),d=ym((n-s+f+m)/a+1,o)}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:c,outHeight:u,outWidth:d}}function kQ(e,t,n,r,a,i,s,o,l,c,u){let d,h,p,f;if(e==="valid"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let m=xQ([t,n,r,1],[o,l,c],1,[a,i,s],e,u);h=m[0],p=m[1],f=m[2]}else if(e==="same"){h=Math.ceil(t/a),p=Math.ceil(n/i),f=Math.ceil(r/s);let m=(h-1)*a+o-t,g=(p-1)*i+l-n,b=(f-1)*s+c-r,y=Math.floor(m/2),v=m-y,x=Math.floor(g/2),w=g-x,$=Math.floor(b/2),C=b-$;d={top:x,bottom:w,left:$,right:C,front:y,back:v,type:"SAME"}}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}function ym(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Oo(e){let[t,n,r]=bm(e);return t===1&&n===1&&r===1}function ms(e,t){return Oo(e)||Oo(t)}function au(e){return bm(e).every(t=>t>0)}function cP(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Br(e,t,n){if(n!=null){if(typeof t=="string")throw Error("Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));if(typeof t=="number")F(Yd(t),()=>"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));else if(typeof t=="object")t.forEach(r=>{r.forEach(a=>{F(Yd(a),()=>"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(a,"."))})});else throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t))}}function SQ(e,t){let n={x:R(e,"x","reshape","string_or_numeric")},r={shape:t};return U.runKernel(lp,n,r)}var q=V({reshape_:SQ});function IQ(e,t,n,r,a){let i=R(e,"x","avgPool","float32"),s=1;F(ms(n,s),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(s,"'"));let o=i,l=!1;i.rank===3&&(l=!0,o=q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(o.rank===4,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")),Br("avgPool",r,a);let c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},d=U.runKernel(Nu,c,u);return d=me(d,i.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var qs=V({avgPool_:IQ});function $Q(e,t,n,r,a,i="NDHWC"){let s=R(e,"x","avgPool3d","float32"),o=s,l=!1;s.rank===4&&(l=!0,o=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(o.rank===5,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),F(i==="NDHWC",()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)),F(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),Br("avgPool3d",r,a);let c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=U.runKernel(Nh,c,u);return d=me(d,o.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var _$=V({avgPool3d_:$Q});function CQ(e,t=0){F(e.length>=1,()=>"Pass at least one tensor to concat");let n=mm(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(i.dtype,". "))}),n.length===1)return ls(n[0]);let r=n,a={axis:t};return U.runKernel(Dh,r,a)}var _t=V({concat_:CQ});function TQ(e,t,n=!1,r=!1){let a=R(e,"a","matMul"),i=R(t,"b","matMul");[a,i]=ln(a,i);let s={a,b:i},o={transposeA:n,transposeB:r};return U.runKernel(_u,s,o)}var Qe=V({matMul_:TQ});function EQ(e){let t={x:R(e,"x","sigmoid","float32")};return U.runKernel(_c,t)}var li=V({sigmoid_:EQ});function NQ(e,t,n){let r=R(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let a={x:r},i={begin:t,size:n};return U.runKernel(mp,a,i)}var at=V({slice_:NQ});function _Q(e){let t={x:R(e,"x","tanh","float32")};return U.runKernel(Lc,t)}var iu=V({tanh_:_Q});function AQ(e,t,n,r,a,i){let s=R(e,"forgetBias","basicLSTMCell"),o=R(t,"lstmKernel","basicLSTMCell"),l=R(n,"lstmBias","basicLSTMCell"),c=R(r,"data","basicLSTMCell"),u=R(a,"c","basicLSTMCell"),d=R(i,"h","basicLSTMCell"),h=_t([c,d],1),p=Qe(h,o),f=ie(p,l),m=f.shape[0],g=f.shape[1]/4,b=[m,g],y=at(f,[0,0],b),v=at(f,[0,g],b),x=at(f,[0,g*2],b),w=at(f,[0,g*3],b),$=ie(G(li(y),iu(v)),G(u,li(ie(s,x)))),C=G(iu($),li(w));return[$,C]}var dP=V({basicLSTMCell_:AQ});function RQ(e,t,n){let r=R(e,"x","batchToSpaceND"),a=t.reduce((o,l)=>o*l);F(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),F(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),F(r.shape[0]%a===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a));let i={x:r},s={blockShape:t,crops:n};return U.runKernel(_h,i,s)}var yg=V({batchToSpaceND_:RQ});function DQ(e){let t;return e.rank===0||e.rank===1?t=q(e,[1,1,1,e.size]):e.rank===2?t=q(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function FQ(e,t,n,r,a,i){i==null&&(i=.001);let s=R(e,"x","batchNorm"),o=R(t,"mean","batchNorm"),l=R(n,"variance","batchNorm"),c;a!=null&&(c=R(a,"scale","batchNorm"));let u;r!=null&&(u=R(r,"offset","batchNorm")),F(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let d={x:DQ(s),scale:c,offset:u,mean:o,variance:l},h={varianceEpsilon:i},p=U.runKernel(Ku,d,h);return q(p,s.shape)}var zc=V({batchNorm_:FQ});function MQ(e,t,n,r,a,i){let s=R(e,"x","batchNorm"),o=R(t,"mean","batchNorm"),l=R(n,"variance","batchNorm"),c;a!=null&&(c=R(a,"scale","batchNorm"));let u;return r!=null&&(u=R(r,"offset","batchNorm")),F(s.rank===2,()=>"Error in batchNorm2D: x must be rank 2 but got rank ".concat(s.rank,".")),F(o.rank===2||o.rank===1,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ".concat(o.rank,".")),F(l.rank===2||l.rank===1,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ".concat(l.rank,".")),c!=null&&F(c.rank===2||c.rank===1,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ".concat(c.rank,".")),u!=null&&F(u.rank===2||u.rank===1,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ".concat(u.rank,".")),zc(s,o,l,u,c,i)}var A$=V({batchNorm2d_:MQ});function OQ(e,t,n,r,a,i){let s=R(e,"x","batchNorm"),o=R(t,"mean","batchNorm"),l=R(n,"variance","batchNorm"),c;a!=null&&(c=R(a,"scale","batchNorm"));let u;return r!=null&&(u=R(r,"offset","batchNorm")),F(s.rank===3,()=>"Error in batchNorm3D: x must be rank 3 but got rank ".concat(s.rank,".")),F(o.rank===3||o.rank===1,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ".concat(o.rank,".")),F(l.rank===3||l.rank===1,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ".concat(l.rank,".")),c!=null&&F(c.rank===3||c.rank===1,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ".concat(c.rank,".")),u!=null&&F(u.rank===3||u.rank===1,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ".concat(u.rank,".")),zc(s,o,l,u,c,i)}var R$=V({batchNorm3d_:OQ});function PQ(e,t,n,r,a,i){let s=R(e,"x","batchNorm"),o=R(t,"mean","batchNorm"),l=R(n,"variance","batchNorm"),c;a!=null&&(c=R(a,"scale","batchNorm"));let u;return r!=null&&(u=R(r,"offset","batchNorm")),F(s.rank===4,()=>"Error in batchNorm4D: x must be rank 4 but got rank ".concat(s.rank,".")),F(o.rank===4||o.rank===1,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ".concat(o.rank,".")),F(l.rank===4||l.rank===1,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ".concat(l.rank,".")),c!=null&&F(c.rank===4||c.rank===1,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ".concat(c.rank,".")),u!=null&&F(u.rank===4||u.rank===1,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ".concat(u.rank,".")),zc(s,o,l,u,c,i)}var D$=V({batchNorm4d_:PQ});function LQ(e,t,n){let r=R(e,"x","bincount"),a=R(t,"weights","bincount");F(r.dtype==="int32",()=>"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)),F(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),F(a.size===r.size||a.size===0,()=>"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,"."));let i={x:r,weights:a},s={size:n};return U.runKernel(Ah,i,s)}var F$=V({bincount_:LQ});function zQ(e,t){let n=R(e,"x","bitwiseAnd"),r=R(t,"y","bitwiseAnd");if(!Gs(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));let a={a:n,b:r};return U.runKernel(Rh,a)}var hP=V({bitwiseAnd_:zQ});function BQ(e,t){let n=R(e,"s0","broadcastArgs","int32"),r=R(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank ".concat(n.rank));if(r.rank!==1)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank ".concat(r.rank));let a={s0:n,s1:r};return U.runKernel(qm,a)}var pP=V({broadcastArgs_:BQ});function WQ(e,t){let n=R(e,"broadcastTo","x"),r=n.shape;if(Sa(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){let l=n.shape.slice();for(;l.length<t.length;)l.unshift(1);n=q(n,l)}let a=n.shape,i=Array.from(t);for(let l=t.length-1;l>=0;l--)if(a[l]===t[l])i[l]=1;else if(n.shape[l]!==1)throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(i.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return ls(n);let s={x:n},o={reps:i};return U.runKernel(Qo,s,o)}var Pl=V({broadcastTo_:WQ});function UQ(e){let t={x:R(e,"x","ceil","float32")};return U.runKernel(Ru,t)}var M$=V({ceil_:UQ});function ga(e,t,n){Sa(e),n=n||jm(t);let r={shape:e,value:t,dtype:n};return U.runKernel(Jm,{},r)}function VQ(e,t,n){let r=R(e,"x","clipByValue");if(F(t<=n,()=>"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")),t===n)return ga(r.shape,t,r.dtype);let a={x:r},i={clipValueMin:t,clipValueMax:n};return U.runKernel(Zo,a,i)}var xr=V({clipByValue_:VQ});function jQ(e){return _t(e,0)}var O$=V({concat1d_:jQ});function HQ(e,t){return _t(e,t)}var P$=V({concat2d_:HQ});function GQ(e,t){return _t(e,t)}var L$=V({concat3d_:GQ});function qQ(e,t){return _t(e,t)}var z$=V({concat4d_:qQ});function KQ(e,t,n,r,a="NHWC",i=[1,1],s){let o=R(e,"x","conv2d","float32"),l=R(t,"filter","conv2d","float32"),c=o,u=!1;o.rank===3&&(u=!0,c=q(o,[1,o.shape[0],o.shape[1],o.shape[2]])),F(c.rank===4,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),F(l.rank===4,()=>"Error in conv2d: filter must be rank 4, but got rank ".concat(l.rank,".")),Br("conv2d",r,s);let d=a==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>"Error in conv2d: depth of input (".concat(d,") must match input depth for filter ").concat(l.shape[2],".")),F(ms(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),F(au(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),F(au(n),()=>"Error in conv2D: Strides should be larger than 0.");let h={x:c,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},f=U.runKernel(Du,h,p);return u?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Dr=V({conv2d_:KQ});function XQ(e,t,n,r,a="NWC",i=1,s){let o=R(e,"x","conv1d"),l=R(t,"filter","conv1d"),c=o,u=!1;o.rank===2&&(u=!0,c=q(o,[1,o.shape[0],o.shape[1]])),F(c.rank===3,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),F(l.rank===3,()=>"Error in conv1d: filter must be rank 3, but got rank ".concat(l.rank,".")),Br("conv1d",r,s),F(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match input depth for filter ").concat(l.shape[1],".")),F(ms(n,i),()=>"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(i,"'")),F(au(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),F(au(n),()=>"Error in conv1D: Stride should be larger than 0."),F(a==="NWC",()=>"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported."));let d=q(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=q(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=Dr(h,d,[1,n],r,"NHWC",[1,i],s);return u?q(p,[p.shape[2],p.shape[3]]):q(p,[p.shape[0],p.shape[2],p.shape[3]])}var X0=V({conv1d_:XQ});function YQ(e,t,n,r,a,i="NHWC",s){F(e.length===t.rank,()=>"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,l=t,c=!1;t.rank===3&&(c=!0,l=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),F(o.length===4,()=>"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(o.length,".")),F(l.rank===4,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(l.rank)),F(n.rank===4,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank));let u=i==="NHWC"?o[3]:o[1],d=i==="NHWC"?l.shape[3]:l.shape[1];F(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must match input depth for filter ").concat(n.shape[2],".")),F(d===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(d,") must match output depth for filter ").concat(n.shape[3],".")),Br("conv2dDerInput",a,s);let h={dy:l,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},f=U.runKernel(Fu,h,p);return c?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var B$=V({conv2DBackpropInput_:YQ});function JQ(e,t,n,r,a,i){let s=R(e,"x","conv2dTranspose"),o=R(t,"filter","conv2dTranspose");return B$(n,s,o,r,a,"NHWC",i)}var Y0=V({conv2dTranspose_:JQ});function ZQ(e,t,n,r,a="NDHWC",i=[1,1,1]){let s=R(e,"x","conv3d"),o=R(t,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(l.rank===5,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),F(o.rank===5,()=>"Error in conv3d: filter must be rank 5, but got rank ".concat(o.rank,".")),F(l.shape[4]===o.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match input depth for filter ").concat(o.shape[3],".")),F(ms(n,i),()=>"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),F(a==="NDHWC",()=>"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")),F(au(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),F(au(n),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:o},d={strides:n,pad:r,dataFormat:a,dilations:i},h=U.runKernel(Mu,u,d);return c?q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var W$=V({conv3d_:ZQ});function QQ(e,t,n,r,a){F(e.length===t.rank,()=>"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let i=e,s=t,o=!1;t.rank===4&&(o=!0,s=q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let l=i[4],c=s.shape[4];F(i.length===5,()=>"Error in conv3dDerInput: inShape must be length 5, but got length ".concat(i.length,".")),F(s.rank===5,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank ".concat(s.rank)),F(n.rank===5,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank ".concat(n.rank)),F(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[3],".")),F(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must match output depth for filter ").concat(n.shape[4],"."));let u={dy:s,filter:n},d={pad:a,strides:r,inputShape:i},h=U.runKernel(Mh,u,d);return o?q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var fP=V({conv3DBackpropInput_:QQ});function eee(e,t,n,r,a){let i=R(e,"x","conv3dTranspose"),s=R(t,"filter","conv3dTranspose");return fP(n,i,s,r,a)}var U$=V({conv3dTranspose_:eee});function tee(e){let t={x:R(e,"x","cos","float32")};return U.runKernel(Ou,t)}var vg=V({cos_:tee});function nee(e){let t={x:R(e,"x","cosh","float32")};return U.runKernel(Pu,t)}var J0=V({cosh_:nee});function ree(e,t=0,n=!1,r=!1){let a={x:R(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return U.runKernel(Oh,a,i)}var vm=V({cumprod_:ree});function aee(e,t=0,n=!1,r=!1){let a={x:R(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return U.runKernel(Lu,a,i)}var Z0=V({cumsum_:aee});function iee(e,t,n,r=!1){let a=R(e,"x","denseBincount"),i=R(t,"weights","denseBincount");F(a.dtype==="int32",()=>"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)),F(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")),F(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),F(i.size===a.size||i.size===0,()=>"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(i.shape,"."));let s={x:a,weights:i},o={size:n,binaryOutput:r};return U.runKernel(Xm,s,o)}var pv=V({denseBincount_:iee});function see(e,t,n="NHWC"){let r=R(e,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];F(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),F(a*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),F(i*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),F(s%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(s," for depthToSpace with input shape ").concat(r.shape));let o={x:r},l={blockSize:t,dataFormat:n};return U.runKernel(Lh,o,l)}var V$=V({depthToSpace_:see});function oee(e,t,n,r,a="NHWC",i=[1,1],s){let o=R(e,"x","depthwiseConv2d","float32"),l=R(t,"filter","depthwiseConv2d","float32"),c=o,u=!1;o.rank===3&&(u=!0,c=q(o,[1,o.shape[0],o.shape[1],o.shape[2]])),F(c.rank===4,()=>"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(c.rank,".")),F(l.rank===4,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(l.rank,"."));let d=a==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels (".concat(d,") must match the inChannels dimension in filter ").concat(l.shape[2],".")),Br("depthwiseConv2d",r,s);let h={x:c,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},f=U.runKernel(zu,h,p);return u?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Bc=V({depthwiseConv2d_:oee});function lee(e){let t={x:R(e,"x","diag")};return U.runKernel(Ym,t)}var mP=V({diag_:lee});function uee(e,t,n,r,a=[1,1],i="NHWC"){let s=R(e,"x","dilation2d"),o=R(t,"filter","dilation2d");F(s.rank===3||s.rank===4,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(s.rank,".")),F(o.rank===3,()=>"Error in dilation2d: filter must be rank 3, but got rank ".concat(o.rank,".")),F(i==="NHWC",()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(i));let l=s,c=!1;s.rank===3&&(l=q(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),F(l.shape[3]===o.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(o.shape[2]));let u={x:l,filter:o},d={strides:n,pad:r,dilations:a},h=U.runKernel(Bu,u,d);return c?q(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var j$=V({dilation2d_:uee}),Cp={};He(Cp,{assertAndGetBroadcastShape:()=>At,getBroadcastDims:()=>gP,getReductionAxes:()=>Tn});function gP(e,t){let n=e.length,r=[];for(let a=0;a<n;a++){let i=n-1-a,s=e[i]||1;(t[t.length-1-a]||1)>1&&s===1&&r.unshift(i)}return r}function Tn(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],i=t.length-r-1,s=t[i];(a==null||a===1&&s>1)&&n.unshift(i)}return n}function At(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let i=e[e.length-a-1];i==null&&(i=1);let s=t[t.length-a-1];if(s==null&&(s=1),i===1)r[n-a-1]=s;else if(s===1)r[n-a-1]=i;else if(i!==s){let o="Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,".");throw Error(o)}else r[n-a-1]=i}return r}function cee(e,t){let n=R(e,"a","equal","string_or_numeric"),r=R(t,"b","equal","string_or_numeric");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(Bh,a)}var va=V({equal_:cee});function dee(e,t,n){let r=R(t,"a","where"),a=R(n,"b","where"),i=R(e,"condition","where","bool"),s=At(At(i.shape,r.shape),a.shape),o=Pl(i,s),l=Pl(r,s),c=Pl(a,s),u={condition:o,t:l,e:c};return U.runKernel(fp,u)}var Jn=V({where_:dee});function hee(e){let t={x:R(e,"x","zerosLike")};return U.runKernel(Ip,t)}var ut=V({zerosLike_:hee});function pee(e,t){let n=R(e,"a","div"),r=R(t,"b","div");[n,r]=ln(n,r);let a=Ce(n,r),i=ut(a),s=va(r,i);return Jn(s,i,a)}var H$=V({divNoNan_:pee});function fee(e,t){let n=R(e,"t1","dot"),r=R(t,"t2","dot");F((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks ".concat(n.rank," and ").concat(r.rank,"."));let a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(F(a===i,()=>"Error in dot: inner dimensions of inputs must match, but got ".concat(a," and ").concat(i,".")),n.rank===1&&r.rank===1){let s=q(n,[1,-1]),o=q(r,[-1,1]),l=Qe(s,o);return q(l,[])}else if(n.rank===1&&r.rank===2){let s=q(n,[1,-1]),o=q(r,[r.shape[0],r.shape[1]]),l=Qe(s,o);return q(l,[l.size])}else if(n.rank===2&&r.rank===1){let s=q(r,[-1,1]),o=Qe(n,s);return q(o,[o.size])}else{let s=q(r,[r.shape[0],r.shape[1]]);return Qe(n,s)}}var G$=V({dot_:fee});function mee(e,...t){let n=t.map((a,i)=>R(a,"tensors".concat(i),"einsum")),r={equation:e};return U.runKernel(O0,n,r)}var bP=V({einsum_:mee});function gee(e){let t={x:R(e,"x","elu","float32")};return U.runKernel(Uu,t)}var Tp=V({elu_:gee});function bee(e,t){let n=R(e,"x","ensureShape","string_or_numeric");if(!k3(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}var yP=V({ensureShape_:bee});function yee(e){let t=R(e,"x","erf");F(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=me(t,"float32"));let n={x:t};return U.runKernel(Vu,n)}var q$=V({erf_:yee});function K$(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function vP(e,t,n){let r=e.length+t.length,a=[],i=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?a.push(e[i++]):a.push(t[s++]);return a}function xP(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)t.indexOf(i)===-1&&n.push(e[i]);let a=t.map(i=>e[i]);return[n,a]}function su(e,t){let n=t.map(r=>1);return vP(e,n,t)}function vee(e,t,n){F(K$(t,n),()=>"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input."))}function wP(e,t){if(K$(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function X$(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function xee(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}function wee(e,t=null,n=!1){let r={x:R(e,"x","max")},a={reductionIndices:t,keepDims:n};return U.runKernel(ac,r,a)}var Ba=V({max_:wee});function kee(e,t=null,n=!1){let r={x:R(e,"x","min")},a={axis:t,keepDims:n};return U.runKernel(lc,r,a)}var eh=V({min_:kee});function See(e,t){let n=R(e,"base","pow"),r=R(t,"exp","pow");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(mc,a)}var Us=V({pow_:See});function Me(e,t){if((Kn(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Kn(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return tl(e,[],[],t)}function Iee(e){let t={x:R(e,"x","sqrt","float32")};return U.runKernel(Rc,t)}var lr=V({sqrt_:Iee});function $ee(e){let t=R(e,"x","square"),n={};return U.runKernel("Square",{x:t},n)}var Et=V({square_:$ee});function Cee(e,t=null,n=!1){let r=R(e,"x","sum");r.dtype==="bool"&&(r=me(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return U.runKernel(Dc,a,i)}var Ee=V({sum_:Cee});function Tee(e,t="euclidean",n=null,r=!1){e=R(e,"x","norm");let a=kP(e,t,n),i=a.shape;if(r){let s=hi(n,e.shape);i=su(a.shape,s)}return q(a,i)}function kP(e,t,n=null){if(e.rank===0)return kn(e);if(e.rank!==1&&n===null)return kP(q(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Ee(kn(e),n);if(t===1/0)return Ba(kn(e),n);if(t===-1/0)return eh(kn(e),n);if(t==="euclidean"||t===2)return lr(Ee(Us(kn(e),Me(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&n.length===2){if(t===1)return Ba(Ee(kn(e),n[0]),n[1]-1);if(t===1/0)return Ba(Ee(kn(e),n[1]),n[0]);if(t===-1/0)return eh(Ee(kn(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return lr(Ee(Et(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Ep=V({norm_:Tee});function Eee(e,t=null,n=!1){return Ep(e,"euclidean",t,n)}var Y$=V({euclideanNorm_:Eee});function Nee(e){let t={x:R(e,"x","exp")};return U.runKernel(ju,t)}var Fr=V({exp_:Nee});function _ee(e,t=0){let n=R(e,"x","expandDims","string_or_numeric");F(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},a={dim:t};return U.runKernel(Wh,r,a)}var rr=V({expandDims_:_ee});function Aee(e){let t={x:R(e,"x","expm1")};return U.runKernel(Hu,t)}var J$=V({expm1_:Aee});function Ree(e,t){let n=R(e,"x","tile","string_or_numeric");F(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,"."));let r={x:n},a={reps:t};return U.runKernel(Qo,r,a)}var da=V({tile_:Ree});function Dee(e,t,n,r="float32"){t==null&&(t=e);let a=nt([e,t],r),i=e<=t?e:t;for(let o=0;o<i;++o)a.set(1,o,o);let s=q(a.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return da(rr(s,0),[n[0],1,1]);if(n.length===2)return da(rr(rr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return da(rr(rr(rr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received ".concat(n.length,"D."))}var Q0=V({eye_:Dee});function Fee(e){let t={x:R(e,"x","floor","float32")};return U.runKernel(Gu,t)}var Np=V({floor_:Fee});function Mee(e,t,n=0,r=0){let a=R(e,"x","gather"),i=R(t,"indices","gather","int32"),s={x:a,indices:i},o={axis:n,batchDims:r};return U.runKernel(Vh,s,o)}var _p=V({gather_:Mee});function Oee(e,t){let n=R(e,"a","greater","string_or_numeric"),r=R(t,"b","greater","string_or_numeric");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(Hh,a)}var Wr=V({greater_:Oee});function Pee(e,t){let n=R(e,"a","greaterEqual","string_or_numeric"),r=R(t,"b","greaterEqual","string_or_numeric");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(Xu,a)}var Ks=V({greaterEqual_:Pee});function Lee(e){let t={input:R(e,"input","imag")};return U.runKernel(z0,t)}var xg=V({imag_:Lee});function zee(e){let t={x:R(e,"x","isFinite")};return U.runKernel(Ju,t)}var Z$=V({isFinite_:zee});function Bee(e){let t={x:R(e,"x","isInf")};return U.runKernel(Zu,t)}var Q$=V({isInf_:Bee});function Wee(e){let t={x:R(e,"x","isNaN")};return U.runKernel(Qu,t)}var e2=V({isNaN_:Wee});function Uee(e,t=.2){let n={x:R(e,"x","leakyRelu")},r={alpha:t};return U.runKernel(ec,n,r)}var wg=V({leakyRelu_:Uee});function Vee(e,t){let n=R(e,"a","less","string_or_numeric"),r=R(t,"b","less","string_or_numeric");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(Gh,a)}var th=V({less_:Vee});function jee(e,t){let n=R(e,"a","lessEqual","string_or_numeric"),r=R(t,"b","lessEqual","string_or_numeric");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(qh,a)}var nl=V({lessEqual_:jee});function SP(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return U.runKernel(Kh,{},r)}function Hee(e,t=5,n=1,r=1,a=.5){let i=R(e,"x","localResponseNormalization");F(i.rank===4||i.rank===3,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")),F(Yd(t),()=>"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,"."));let s=i,o=!1;i.rank===3&&(o=!0,s=q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:t,bias:n,alpha:r,beta:a},u=U.runKernel(rc,l,c);return o?q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var t2=V({localResponseNormalization_:Hee});function Gee(e){let t={x:R(e,"x","log","float32")};return U.runKernel(tc,t)}var xa=V({log_:Gee});function qee(e){let t={x:R(e,"x","log1p")};return U.runKernel(nc,t)}var kg=V({log1p_:qee});function Kee(e){return F(Fo(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=R(t,"x","tf.grad","string_or_numeric"),a=n!=null?R(n,"dy","tf.grad"):null;return U.tidy(()=>{let{value:i,grads:s}=U.gradients(()=>e(r),[r],a);return a!=null&&zr(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ex(s),s[0]})}}function Xee(e){return F(Fo(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{F(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=mm(t,"args","tf.grads","string_or_numeric"),a=n!=null?R(n,"dy","tf.grads"):null;return U.tidy(()=>{let{value:i,grads:s}=U.gradients(()=>e(...r),r,a);return a!=null&&zr(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ex(s),s})}}function Yee(e){return F(Fo(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{F(t instanceof qe,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),F(n==null||n instanceof qe,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:a}=U.gradients(()=>e(t),[t],n);return ex(r),{grad:r[0],value:a}}}function Jee(e){return F(Fo(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{F(Array.isArray(t)&&t.every(a=>a instanceof qe),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),F(n==null||n instanceof qe,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=U.gradients(()=>e(...t),t,n);return n!=null&&zr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ex(r.grads),r}}function IP(e,t){F(Fo(e),()=>"The f passed in variableGrads(f) must be a function"),F(t==null||Array.isArray(t)&&t.every(c=>c instanceof eu),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let c in U.registeredVariables)t.push(U.registeredVariables[c])}let r=n?t.filter(c=>!c.trainable):null,a=t.length;t=t.filter(c=>c.trainable),F(t.length>0,()=>"variableGrads() expects at least one of the input variables to be trainable, but none of the ".concat(a," variables is trainable."));let i=!0,{value:s,grads:o}=U.gradients(e,t,null,i);F(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(s.rank===0,()=>"The f passed in variableGrads(f) must return a scalar, but it returned a rank-".concat(s.rank," tensor"));let l={};return t.forEach((c,u)=>{o[u]!=null&&(l[c.name]=o[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:s,grads:l}}function hs(e){return U.customGrad(e)}function ex(e){if(e.filter(t=>t==null).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function Zee(e){let t={x:R(e,"x","neg")};return U.runKernel(tp,t)}var jt=V({neg_:Zee});function Qee(e){let t={x:R(e,"x","softplus")};return U.runKernel(Ac,t)}var Wc=V({softplus_:Qee});function ete(e){let t=R(e,"x","logSigmoid");return hs(n=>({value:jt(Wc(jt(n))),gradFunc:r=>G(r,li(jt(n)))}))(t)}var n2=V({logSigmoid_:ete});function tte(e,t){let n=R(e,"a","sub"),r=R(t,"b","sub");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(Oc,a)}var Se=V({sub_:tte});function nte(e,t=-1){let n=R(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return hs((r,a)=>{let i=Ba(r,t,!0),s=Se(r,i),o=Se(me(s,"float32"),xa(Ee(Fr(s),t,!0)));return a([o]),{value:o,gradFunc:(l,c)=>{let[u]=c,d=!0,h=Fr(u);return Se(l,G(Ee(l,t,d),h))}}})(n)}var tx=V({logSoftmax_:nte});function rte(e,t=null,n=!1){let r=R(e,"x","logSumExp"),a=hi(t,r.shape),i=Ba(r,a,!0),s=Se(r,i),o=Fr(s),l=Ee(o,a),c=xa(l),u=ie(q(i,c.shape),c);if(n){let d=su(u.shape,a);return q(u,d)}return u}var nx=V({logSumExp_:rte});function ate(e,t){let n=R(e,"a","logicalAnd","bool"),r=R(t,"b","logicalAnd","bool");At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(Xh,a)}var di=V({logicalAnd_:ate});function ite(e){let t={x:R(e,"x","logicalNot","bool")};return U.runKernel(Yh,t)}var Sg=V({logicalNot_:ite});function ste(e,t){let n=R(e,"a","logicalOr","bool"),r=R(t,"b","logicalOr","bool");At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(Jh,a)}var rx=V({logicalOr_:ste});function ote(e,t){let n=R(e,"a","logicalXor","bool"),r=R(t,"b","logicalXor","bool");return At(n.shape,r.shape),di(rx(e,t),Sg(di(e,t)))}var r2=V({logicalXor_:ote}),_b=2147483648;function lte(e,t,n="left"){let r=R(e,"sortedSequence","searchSorted"),a=R(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=a.shape[a.shape.length-1],o=q(r,[-1,i]),l=q(a,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Vt(l.shape)>=_b)throw new Error("values tensor size must less than ".concat(_b));if(o.shape[1]>=_b)throw new Error("trailing dim_size must less than ".concat(_b," for int32 output type, was ").concat(o.shape[1]));let c={sortedSequence:o,values:l},u={side:n};return U.runKernel(pp,c,u)}var ax=V({searchSorted_:lte});function $P(e,t){return ax(e,t,"left")}function ute(e,t,n,r,a){let i=R(e,"x","maxPool"),s=1,o=i,l=!1;i.rank===3&&(l=!0,o=q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(o.rank===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")),F(ms(n,s),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(s,"'")),Br("maxPool",r,a);let c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},d=U.runKernel(sc,c,u);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Hn=V({maxPool_:ute});function cte(e,t=[1,1,1],n,r,a,i="NDHWC"){let s=R(e,"x","maxPool3d"),o=s,l=!1;s.rank===4&&(l=!0,o=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(o.rank===5,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),F(i==="NDHWC",()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)),Br("maxPool3d",r,a);let c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=U.runKernel(Qh,c,u);return l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var a2=V({maxPool3d_:cte});function dte(e,t,n,r,a=!1){let i={x:R(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},o=U.runKernel(eg,i,s);return{result:o[0],indexes:o[1]}}var CP=V({maxPoolWithArgmax_:dte});function hte(e,t){let n=R(e,"a","maximum"),r=R(t,"b","maximum");[n,r]=ln(n,r),n.dtype==="bool"&&(n=me(n,"int32"),r=me(r,"int32")),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(ic,a)}var gs=V({maximum_:hte});function pte(e,t=null,n=!1){let r={x:R(e,"x","mean")},a={axis:t,keepDims:n};return U.runKernel(oc,r,a)}var an=V({mean_:pte});function sn(e,t="float32"){if(Sa(e),t==="complex64"){let r=sn(e,"float32"),a=sn(e,"float32");return Ws(r,a)}let n=_0(Vt(e),t);return U.makeTensor(n,e,t)}function ha(e,t="float32"){if(Sa(e),t==="complex64"){let r=ha(e,"float32"),a=sn(e,"float32");return Ws(r,a)}let n=d$(Vt(e),t);return U.makeTensor(n,e,t)}function TP(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(e===void 0)return[];let r=R(e,"x","meshgrid",e instanceof qe?e.dtype:"float32");if(t===void 0)return[r];let a=R(t,"y","meshgrid",t instanceof qe?t.dtype:"float32"),i=Vt(r.shape),s=Vt(a.shape);return n==="xy"?(r=q(r,[1,-1]),a=q(a,[-1,1]),[Qe(ha([s,1],r.dtype),r),Qe(a,ha([1,i],a.dtype))]):(r=q(r,[-1,1]),a=q(a,[1,-1]),[Qe(r,ha([1,s],r.dtype)),Qe(ha([i,1],a.dtype),a)])}function fte(e,t){let n=R(e,"a","minimum"),r=R(t,"b","minimum");[n,r]=ln(n,r),n.dtype==="bool"&&(n=me(n,"int32"),r=me(r,"int32")),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(uc,a)}var Po=V({minimum_:fte});function mte(e,t,n){F(n==="reflect"||n==="symmetric",()=>"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,"."));let r=R(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,"."));let a=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)F(t[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(t[o][0]>=0&&t[o][0]<=r.shape[o]-a&&t[o][1]>=0&&t[o][1]<=r.shape[o]-a,()=>"Padding in dimension ".concat(o," cannot be greater than or equal to ").concat(r.shape[o]-a," or less than 0 for input of shape ").concat(r.shape));let i={paddings:t,mode:n},s={x:r};return U.runKernel(cc,s,i)}var i2=V({mirrorPad_:mte});function gte(e,t){let n=R(e,"a","mod"),r=R(t,"b","mod");[n,r]=ln(n,r);let a={a:n,b:r};return U.runKernel(dc,a)}var s2=V({mod_:gte});function bte(e,t=null,n=!1){e=R(e,"x","moments");let r=hi(t,e.shape),a=an(e,r,n),i=a.shape;n||(i=su(a.shape,r));let s=Et(Se(me(e,"float32"),q(a,i))),o=an(s,r,n);return{mean:a,variance:o}}var Ig=V({moments_:bte});function yte(e,t,n,r){let a=R(t,"data","multiRNNCell"),i=mm(n,"c","multiRNNCell"),s=mm(r,"h","multiRNNCell"),o=a,l=[];for(let d=0;d<e.length;d++){let h=e[d](o,i[d],s[d]);l.push(h[0]),l.push(h[1]),o=h[1]}let c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}var EP=V({multiRNNCell_:yte});function vte(e,t,n,r=!1){let a=R(e,"logits","multinomial"),i=a.size,s=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(i,"."));if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(s));n=n||Math.random();let o={logits:s===1?q(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},c=U.runKernel(ep,o,l);return s===1?q(c,[c.size]):c}var NP=V({multinomial_:vte});function xte(e,t){let n=R(e,"a","notEqual","string_or_numeric"),r=R(t,"b","notEqual","string_or_numeric");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r};return U.runKernel(np,a)}var ou=V({notEqual_:xte});function wte(e,t,n=1,r=0,a="int32"){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));let i={indices:R(e,"indices","oneHot","int32")},s={dtype:a,depth:t,onValue:n,offValue:r};return U.runKernel(pc,i,s)}var nh=V({oneHot_:wte});function kte(e){let t={x:R(e,"x","onesLike")};return U.runKernel(sp,t)}var wa=V({onesLike_:kte});function Ste(e,t){let n=R(e,"v1","outerProduct"),r=R(t,"v2","outerProduct");F(n.rank===1&&r.rank===1,()=>"Error in outerProduct: inputs must be rank 1, but got ranks ".concat(n.rank," and ").concat(r.rank,"."));let a=q(n,[-1,1]),i=q(r,[1,-1]);return Qe(a,i)}var _P=V({outerProduct_:Ste});function Ite(e,t,n=0){let r=R(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let a={paddings:t,constantValue:n},i={x:r};return U.runKernel(fc,i,a)}var Ui=V({pad_:Ite});function $te(e,t,n=0){return F(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Ui(e,[t],n)}var AP=V({pad1d_:$te});function Cte(e,t,n=0){return F(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ui(e,t,n)}var RP=V({pad2d_:Cte});function Tte(e,t,n=0){return F(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ui(e,t,n)}var DP=V({pad3d_:Tte});function Ete(e,t,n=0){return F(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ui(e,t,n)}var FP=V({pad4d_:Ete});function Nte(e,t,n){let r=R(e,"x","spaceToBatchND");F(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),F(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),F(r.shape.reduce((s,o,l)=>l>0&&l<=t.length?s&&(o+n[l-1][0]+n[l-1][1])%t[l-1]===0:s,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));let a={x:r},i={blockShape:t,paddings:n};return U.runKernel(gp,a,i)}var $g=V({spaceToBatchND_:Nte});function _te(e,t,n,r,a,i,s){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");let o=R(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=q(o,[1,o.shape[0],o.shape[1],o.shape[2]])),F(ms(i,a),()=>"Error in pool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(a,"'"));let u=lP(l.shape,t,i,a,r),d=[u.dilationHeight,u.dilationWidth],h;r==="same"?h=Rte([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];let p=d[0]===1&&d[1]===1,[f,m]=Ate([u.inHeight,u.inWidth],d,h),g=p?r:"valid",b=p?l:$g(l,d,f),y=(n==="avg"?()=>qs(b,t,i,g,s):()=>Hn(b,t,i,g,s))(),v=p?y:yg(y,d,m);return c?q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}function Ate(e,t,n){let r=n.map(u=>u[0]),a=n.map(u=>u[1]),i=e.concat(r,a),s=t.map((u,d)=>(u-i[d]%u)%u),o=a.map((u,d)=>u+s[d]),l=t.map((u,d)=>[r[d],o[d]]),c=t.map((u,d)=>[0,s[d]]);return[l,c]}function Rte(e,t){let n=e.map((i,s)=>i+(i-1)*(t[s]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,s)=>i-r[s]);return n.map((i,s)=>[r[s],a[s]])}var o2=V({pool_:_te});function Dte(e,t){let n=R(e,"x","prelu"),r=R(t,"alpha","prelu"),a={x:n,alpha:r};return U.runKernel(gc,a)}var Cg=V({prelu_:Dte});function Fte(e,t=null,n=!1){let r=R(e,"x","prod");r.dtype==="bool"&&(r=me(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return U.runKernel(bc,a,i)}var l2=V({prod_:Fte});function Mte(e,t,n,r){let a=e.map((u,d)=>R(u,"tensors".concat(d),"raggedGather","int32")),i=R(t,"paramsDenseValues","raggedGather"),s=R(n,"indices","raggedGather","int32"),o={paramsNestedSplits:a,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=U.runKernel(B0,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var MP=V({raggedGather_:Mte});function Ote(e,t,n){let r=R(e,"starts","raggedRange"),a=R(t,"limits","raggedRange",r.dtype),i=R(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:a,deltas:i},o=U.runKernel(W0,s);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}var OP=V({raggedRange_:Ote});function Pte(e,t,n,r,a){let i=R(e,"shape","raggedTensorToTensor","int32"),s=R(t,"values","raggedTensorToTensor"),o=R(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((d,h)=>R(d,"tensors".concat(h),"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:a};return U.runKernel(U0,c,u)}var PP=V({raggedTensorToTensor_:Pte});function Lte(e,t,n){Sa(e);let r=Vt(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error("Unknown data type ".concat(n));for(let i=0;i<r;i++)a[i]=t();return U.makeTensor(a,e,n)}var LP=V({rand_:Lte}),u2=Yo(E0()),zP={};He(zP,{TEST_EPSILON_FLOAT16:()=>BP,createVideoElement:()=>Gte,encodeStrings:()=>WP,expectArrayBuffersEqual:()=>Hte,expectArraysClose:()=>Bte,expectArraysEqual:()=>Ute,expectNumbersClose:()=>Vte,expectPromiseToFail:()=>Wte,expectValuesInRange:()=>jte,play:()=>qte,testEpsilon:()=>c2});var zte=.001,BP=.1;function Bte(e,t,n){return n==null&&(n=c2()),Wk(e,t,(r,a)=>d2(r,a,n))}function c2(){return U.backend.floatPrecision()===32?zte:BP}function Wk(e,t,n){let r=!0;if((Kn(e)||Kn(t))&&(r=!1),Kn(e)&&Kn(t)&&(r=!0),r){let s=e.constructor.name,o=t.constructor.name;if(s!==o)throw new Error("Arrays are of different type. Actual: ".concat(s,". Expected: ").concat(o))}if(Array.isArray(e)&&Array.isArray(t)){let s=ds(e),o=ds(t);if(!Gs(s,o))throw new Error("Arrays have different shapes. Actual: [".concat(s,"]. Expected: [").concat(o,"]"))}let a=Kn(e)?e:Mo(e),i=Kn(t)?t:Mo(t);if(a.length!==i.length)throw new Error("Arrays have different lengths actual: ".concat(a.length," vs expected: ").concat(i.length,".\nActual:   ").concat(a,".\nExpected: ").concat(i,"."));for(let s=0;s<i.length;++s){let o=a[s],l=i[s];if(!n(o,l))throw new Error("Arrays differ: actual[".concat(s,"] = ").concat(o,", expected[").concat(s,"] = ").concat(l,".\nActual:   ").concat(a,".\nExpected: ").concat(i,"."))}typeof expect<"u"&&expect().nothing()}function Wte(e,t){e().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function Ute(e,t){let n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return fo(e)||fo(e[0])||fo(t)||fo(t[0])?Wk(e,n,(r,a)=>r==a):Wk(e,t,(r,a)=>d2(r,a,0))}function Vte(e,t,n){if(n==null&&(n=c2()),!d2(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));typeof expect<"u"&&expect().nothing()}function d2(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function jte(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function Hte(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length ".concat(r.length,", but it was ").concat(n.length));for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ").concat(r[a]," but got ").concat(n[a]," instead"))}function WP(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?WP(n):e[t]=fg(n)}return e}function Gte(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(n=>{t.addEventListener("loadeddata",r=>n(t)),t.load()})}async function qte(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}var h2=class{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let i=a||Math.random();this.random=u2.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let e,t,n=!1;for(;!n;){let r,a,i;do r=2*this.random()-1,a=2*this.random()-1,i=r*r+a*a;while(i>=1||i===0);let s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},Kte=class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let a=r||Math.random();this.randu=u2.alea(a.toString()),this.randn=new h2(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,i;for(;;){do r=this.randn.nextValue(),i=1+this.c*r;while(i<=0);if(i*=i*i,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},Xte=class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=n,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=u2.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function Yte(e,t,n=1,r="float32",a){if(Sa(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type ".concat(r));let i=new Kte(t,n,r,a),s=nt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var UP=V({randomGamma_:Yte});function Jte(e,t=0,n=1,r,a){if(Sa(e),r!=null&&r==="bool")throw new Error("Unsupported data type ".concat(r));let i=new h2(t,n,r,!1,a),s=nt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var ix=V({randomNormal_:Jte});function Zte(e,t,n){if(t!=null&&t==="bool")throw new Error("Unsupported data type ".concat(t));return ix(e,0,1,t,n)}var VP=V({randomStandardNormal_:Zte});function Qte(e,t=0,n=1,r="float32",a){Sa(e);let i=nt(e,r),s=new Xte(t,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}var rl=V({randomUniform_:Qte});function ene(e,t,n,r){return rl(e,t,n,"int32",r)}var jP=V({randomUniformInt_:ene});function lu(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let a={start:e,stop:t,step:n,dtype:r};return U.runKernel(tg,{},a)}function tne(e){let t={input:R(e,"input","real")};return U.runKernel(V0,t)}var rh=V({real_:tne});function nne(e){let t={x:R(e,"x","reciprocal")};return U.runKernel(yc,t)}var p2=V({reciprocal_:nne});function rne(e){let t={x:R(e,"x","relu")};return U.runKernel(vc,t)}var It=V({relu_:rne});function ane(e){let t={x:R(e,"x","relu6")};return U.runKernel(kc,t)}var sx=V({relu6_:ane});function ine(e,t){let n={x:R(e,"x","reverse")},r={dims:t};return U.runKernel(Sc,n,r)}var Va=V({reverse_:ine});function sne(e){let t=R(e,"x","reverse");return F(t.rank===1,()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")),Va(t,0)}var HP=V({reverse1d_:sne});function one(e,t){let n=R(e,"x","reverse");return F(n.rank===2,()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")),Va(n,t)}var GP=V({reverse2d_:one});function lne(e,t){let n=R(e,"x","reverse");return F(n.rank===3,()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")),Va(n,t)}var qP=V({reverse3d_:lne});function une(e,t){let n=R(e,"x","reverse");return F(n.rank===4,()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")),Va(n,t)}var KP=V({reverse4d_:une});function cne(e){let t={x:R(e,"x","round")};return U.runKernel(Ic,t)}var ox=V({round_:cne});function dne(e){let t={x:R(e,"x","rsqrt","float32")};return U.runKernel($c,t)}var lx=V({rsqrt_:dne});function hne(e){let t={x:R(e,"x","selu")};return U.runKernel(Cc,t)}var ux=V({selu_:hne});function pne(e,t,n,r,a,i=[1,1],s="NHWC"){let o=R(e,"x","separableConv2d"),l=R(t,"depthwiseFilter","separableConv2d"),c=R(n,"pointwiseFilter","separableConv2d"),u=o,d=!1;if(o.rank===3&&(d=!0,u=q(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(u.rank===4,()=>"Error in separableConv2d: input must be rank 4, but got rank ".concat(u.rank,".")),F(l.rank===4,()=>"Error in separableConv2d: depthwise filter must be rank 4, but got rank ".concat(l.rank,".")),F(c.rank===4,()=>"Error in separableConv2d: pointwise filter must be rank 4, but got rank ".concat(l.rank,".")),F(c.shape[0]===1,()=>"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ".concat(c.shape[0],".")),F(c.shape[1]===1,()=>"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ".concat(c.shape[1],"."));let h=l.shape[2],p=l.shape[3];F(c.shape[2]===h*p,()=>"Error in separableConv2d: the third dimension of pointwise filter must be ".concat(h*p,", but got ").concat(c.shape[2],"."));let f=Bc(u,l,r,a,s,i),m=Dr(f,c,1,"valid",s);return d?q(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var Ap=V({separableConv2d_:pne});async function fne(e,t){let n=R(e,"x","setdiff1d"),r=R(t,"y","setdiff1d");F(n.dtype===r.dtype,()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")),F(n.rank===1,()=>"x should be 1D tensor, but got x (".concat(n.shape,").")),F(r.rank===1,()=>"y should be 1D tensor, but got y (".concat(r.shape,")."));let a=await n.data(),i=await r.data(),s=new Set(i),o=0;for(let u=0;u<a.length;u++)s.has(a[u])||o++;let l=new Cn([o],n.dtype),c=new Cn([o],"int32");for(let u=0,d=0;u<a.length;u++)s.has(a[u])||(l.values[d]=a[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}var XP=fne;function mne(e){let t={x:R(e,"x","sign")};return U.runKernel(Nc,t)}var f2=V({sign_:mne});function gne(e){let t={x:R(e,"x","sin","float32")};return U.runKernel(Tc,t)}var cx=V({sin_:gne});function bne(e){let t={x:R(e,"x","sinh")};return U.runKernel(Ec,t)}var dx=V({sinh_:bne});function yne(e,t,n){let r=R(e,"x","slice1d");return F(r.rank===1,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),at(r,[t],[n])}var Tg=V({slice1d_:yne});function vne(e,t,n){let r=R(e,"x","slice2d");return F(r.rank===2,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),at(r,t,n)}var hx=V({slice2d_:vne});function xne(e,t,n){let r=R(e,"x","slice3d");return F(r.rank===3,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),at(r,t,n)}var Rp=V({slice3d_:xne});function wne(e,t,n){let r=R(e,"x","slice4d");return F(r.rank===4,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),at(r,t,n)}var ah=V({slice4d_:wne});function kne(e,t=-1){let n=R(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));let r={logits:n},a={dim:t};return U.runKernel(Fc,r,a)}var al=V({softmax_:kne});function Sne(e){F(e.dtype==="complex64",()=>"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,"."));let t={input:e};return U.runKernel(P0,t)}var Eg=V({fft_:Sne});function Ine(e){F(e.dtype==="complex64",()=>"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,"."));let t={input:e};return U.runKernel(L0,t)}var ih=V({ifft_:Ine});function $ne(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let a=q(e,[n,t]);r=ih(a)}else{let a=[n,2*(t-1)],i=q(rh(e),[n,t]),s=q(xg(e),[n,t]),o=Va(at(i,[0,1],[n,t-2]),1),l=G(Va(at(s,[0,1],[n,t-2]),1),Me(-1)),c=_t([i,o],1),u=_t([s,l],1),d=q(Ws(c,u),[a[0],a[1]]);r=ih(d)}if(r=rh(r),e.rank===3&&e.shape[0]!==0){let a=r,i=e.shape[0];r=q(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}var px=V({irfft_:$ne});function Cne(e,t,n=0){let r={x:R(e,"x","split")},a={numOrSizeSplits:t,axis:n};return U.runKernel(bp,r,a)}var Xr=V({split_:Cne});function Tne(e,t){F(e.dtype==="float32",()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1],r=e.size/n,a;if(t!=null&&t<n){let f=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=t,a=at(e,f,m),n=t}else if(t!=null&&t>n){let f=e.shape.map(m=>m);f[e.shape.length-1]=t-n,a=_t([e,sn(f)],e.shape.length-1),n=t}else a=e;let i=ut(a),s=q(Ws(a,i),[r,n]),o=Eg(s),l=Math.floor(n/2)+1,c=rh(o),u=xg(o),d=Xr(c,[l,n-l],c.shape.length-1),h=Xr(u,[l,n-l],u.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=l,q(Ws(d[0],h[0]),p)}var Ng=V({rfft_:Tne});function Ene(e,t){let n=R(e,"a","squaredDifference"),r=R(t,"b","squaredDifference");[n,r]=ln(n,r),At(n.shape,r.shape);let a={a:n,b:r},i={};return U.runKernel(Mc,a,i)}var fx=V({squaredDifference_:Ene});function Nne(e,t){let n=R(e,"x","squeeze","string_or_numeric");return q(n,S3(n.shape,t).newShape)}var il=V({squeeze_:Nne});function _ne(e,t=0){let n=mm(e,"tensors","stack","string_or_numeric");F(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&F(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,a={axis:t};return U.runKernel(op,r,a)}var Dn=V({stack_:_ne});function Ane(e,t=0){let n={x:R(e,"x","step")},r={alpha:t};return U.runKernel(el,n,r)}var Uc=V({step_:Ane});function Rne(e,t,n,r,a=0,i=0,s=0,o=0,l=0){let c={x:R(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return U.runKernel(xp,c,u)}var m2=V({stridedSlice_:Rne});function Dne(e){let t={x:R(e,"x","tan","float32")};return U.runKernel(Pc,t)}var g2=V({tan_:Dne});function St(e,t){xu(e);let n=ds(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return tl(e,null,n,t)}function us(e,t,n){if(xu(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=ds(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return tl(e,t,r,n)}function mx(e,t,n){if(xu(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=ds(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return tl(e,t,r,n)}function Lo(e,t,n){if(xu(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=ds(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return tl(e,t,r,n)}function YP(e,t,n){if(xu(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=ds(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return tl(e,t,r,n)}function JP(e,t,n){if(xu(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=ds(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,tl(e,t,r,n)}var gx={};He(gx,{calculateShapes:()=>ZP,validateInput:()=>bx,validateUpdateShape:()=>b2});function b2(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(let s=0;s<a;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function bx(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(e.size===0)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}b2(n,t,e)}function ZP(e,t,n){let r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,s=1;for(let d=a;d<i;++d)s*=n[d];let o=a<1?1:a,l=Vt(t.shape)/o,c=[...Sh(n.slice(0,a)),1],u=Vt(n);return{sliceRank:a,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function Fne(e,t,n){let r=R(e,"tensor","tensorScatterupdate"),a=R(t,"indices","tensorScatterupdate","int32"),i=R(n,"updates","tensorScatterupdate");if(bx(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));let s={tensor:r,indices:a,updates:i},o={};return U.runKernel(hp,s,o)}var QP=V({tensorScatterUpdate_:Fne});function Mne(e,t=1,n=!0){let r=R(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));let i={x:r},s={k:t,sorted:n},[o,l]=U.runKernel(wp,i,s);return{values:o,indices:l}}var y2=V({topk_:Mne});function One(e,t=0,n=1,r,a){if(Sa(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new h2(t,n,r,!0,a),s=nt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var yx=V({truncatedNormal_:One});function Pne(e,t=0){let n=R(e,"x","unique","string_or_numeric");F(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},a={axis:t},[i,s]=U.runKernel(cg,r,a);return{values:i,indices:s}}var v2=V({unique_:Pne});function Lne(e,t,n){let r=R(e,"x","unsortedSegmentSum"),a=R(t,"segmentIds","unsortedSegmentSum","int32");F(Yd(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:a},s={numSegments:n};return U.runKernel(dg,i,s)}var vx=V({unsortedSegmentSum_:Lne});function zne(e,t=0){let n=R(e,"x","unstack","string_or_numeric");F(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));let r={value:n},a={axis:t};return U.runKernel(Sp,r,a)}var fn=V({unstack_:zne});function eL(e,t){return ax(e,t,"right")}function x2(e,t=!0,n,r){return U.makeVariable(e,t,n,r)}function tL(e,t){let n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);let r=nt(e,"int32"),a=nt([n.length,e.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),o=i*e.length;a.values.set(s,o)}return a.toTensor()}async function Bne(e){let t=R(e,"condition","whereAsync","bool"),n=await t.data(),r=tL(t.shape,n);return e!==t&&t.dispose(),r}var w2=Bne;async function Wne(e,t,n){let r=R(e,"tensor","boolMask"),a=R(t,"mask","boolMask","bool"),i=n==null?0:n,s=a.rank,o=r.shape;F(s>0,()=>"mask cannot be scalar"),zr(o.slice(i,i+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=o[m];let c=o.slice(0,i).concat([l],o.slice(i+s)),u=q(r,c),d=q(a,[-1]),h=await w2(d),p=il(h,[1]),f=_p(u,p,i);return e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),u.dispose(),d.dispose(),h.dispose(),f}var nL=Wne;function Une(e,t,n){let r=R(e,"x","transpose");if(t==null&&(t=r.shape.map((s,o)=>o).reverse()),F(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," must match length of perm ").concat(t,".")),t.forEach(s=>{F(s>=0&&s<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1," but got ").concat(t))}),r.rank<=1)return r.clone();let a={x:r},i={perm:t};return r.dtype==="complex64"?X(()=>{let s=rh(r),o=xg(r);return s=U.runKernel(Fs,{x:s},i),o=U.runKernel(Fs,{x:o},i),n&&(o=jt(o)),Ws(s,o)}):U.runKernel(Fs,a,i)}var tt=V({transpose_:Une});function Vne(e,t,n,r,a=!0){let i=R(e,"v","movingAverage"),s=R(t,"x","movingAverage"),o=R(n,"decay","movingAverage");V3(i,s),F(Gs(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=Me(1),c=Se(l,o),u=G(Se(s,i),c);if(a){F(r!=null,()=>"When using zeroDebias: true, step is required.");let d=R(r,"step","movingAverage");u=Ce(u,Se(l,Us(o,d)))}return ie(i,u)}var rL=V({movingAverage_:Vne});function jne(e,t,n){Sa(n);let r=R(e,"indices","scatterND","int32"),a=R(t,"updates","scatterND");bx(a,r,n);let i={indices:r,updates:a},s={shape:n};return U.runKernel(dp,i,s)}var aL=V({scatterND_:jne});function Hne(e,t,n,r){if(e.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));let a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(i,"."));let s=t.size;if(!(t.rank===0||t.rank===1&&s===a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function Gne(e,t,n,r=0){Sa(n);let a=R(e,"sparseIndices","sparseToDense","int32"),i=R(t,"sparseValues","sparseToDense","string_or_numeric"),s=R(r,"defaultValue","sparseToDense",i.dtype);Hne(a,i,n,s);let o={sparseIndices:a,sparseValues:i,defaultValue:s},l={outputShape:n};return U.runKernel(vp,o,l)}var iL=V({sparseToDense_:Gne});function qne(e,t){let n=R(t,"indices","gatherND","int32"),r={params:R(e,"x","gatherND","string_or_numeric"),indices:n};return U.runKernel(jh,r)}var sL=V({gatherND_:qne});function Kne(e,t){if(t==null)return e.shape.slice();if(Gs(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function Xne(e,t,n,r){let a=R(e,"x","dropout");if(F(a.dtype==="float32",()=>"x has to be a floating point tensor since it's going to be scaled, but got a ".concat(a.dtype," tensor instead.")),F(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),t===0)return e instanceof qe?a.clone():a;let i=Kne(a,n),s=1-t,o=Ce(Np(ie(rl(i,0,1,"float32",r),s)),s);return G(a,o)}var k2=V({dropout_:Xne});function S2(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function xx(e,t,n){let r=1-e%2,a=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(s)}return St(a,"float32")}async function Yne(e,t,n=1){let r=R(e,"predictions","inTopK"),a=R(t,"targets","inTopK");F(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got ".concat(r.rank)),F(r.rank-1===a.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank ".concat(r.rank," and targets rank ").concat(a.rank)),zr(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];F(n>0&&n<=i,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last dimension (".concat(i,"), but got ").concat(n));let s=await r.data(),o=await a.data(),[l,c]=[s.length/i,i],u=I3("bool",l);for(let d=0;d<l;d++){let h=d*c,p=s.subarray(h,h+c),f=[];for(let m=0;m<p.length;m++)f.push({value:p[m],index:m});f.sort((m,g)=>g.value-m.value),u[d]=0;for(let m=0;m<n;m++)if(f[m].index===o[d]){u[d]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),Nr(u,a.shape,"bool")}var oL=Yne,sh={};He(sh,{conv2d:()=>Qne,depthwiseConv2d:()=>rre,matMul:()=>ire});function Jne(e,t,n,r,a,i="NHWC",s){let o=e;e.rank===3&&(o=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=q(t,[1,t.shape[0],t.shape[1],t.shape[2]])),F(o.rank===4,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(o.shape,".")),F(l.rank===4,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(l.shape,".")),F(n.length===4,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,"."));let c=i==="NHWC"?o.shape[3]:o.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];F(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must match input depth in filter (").concat(n[2],".")),F(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must match output depth for filter (").concat(n[3],").")),Br("conv2dDerFilter",a,s);let d={x:o,dy:l},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return U.runKernel(D0,d,h)}var I2=V({conv2DBackpropFilter_:Jne});function wx(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return G(e,Uc(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function kx(e,t){let n=t,r=Tn(e.shape,t.shape);return r.length>0&&(n=Ee(n,r)),q(n,e.shape)}function Sx(e,t,n,r){if(t==="linear")return e;if(t==="relu")return It(e);if(t==="elu")return Tp(e);if(t==="relu6")return sx(e);if(t==="prelu")return Cg(e,n);if(t==="leakyrelu")return wg(e,r);if(t==="sigmoid")return li(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Ix=(e,t)=>!(e>0)||t==="linear";function Zne({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",Ix(U.state.gradientDepth,l)===!1){F(a==="NHWC",()=>"Error in fused conv2d: got dataFormat of ".concat(a," but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let $=Dr(e,t,n,r,a,i,s);return o!=null&&($=ie($,o)),Sx($,l,c,u)}let d=R(e,"x","conv2d","float32"),h=R(t,"filter","conv2d","float32"),p=d,f=!1;d.rank===3&&(f=!0,p=q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(p.rank===4,()=>"Error in fused conv2d: input must be rank 4, but got rank ".concat(p.rank,".")),F(h.rank===4,()=>"Error in fused conv2d: filter must be rank 4, but got rank ".concat(h.rank,".")),Br("fused conv2d",r,s);let m=a==="NHWC"?p.shape[3]:p.shape[1];F(h.shape[2]===m,()=>"Error in conv2d: depth of input (".concat(m,") must match input depth for filter ").concat(h.shape[2],".")),F(ms(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'"));let g=bg(p.shape,h.shape,n,i,r,s),b;o!=null&&(b=R(o,"bias","fused conv2d"),[b]=ln(b,d),a==="NHWC"?At(g.outShape,b.shape):(F(b.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-".concat(b.shape.length,".")),F(b.shape.length===0||b.shape[0]===g.outChannels||b.shape[0]===1,()=>"Error in fused conv2d: bias shape (".concat(b.shape,") is not compatible with the number of output channels (").concat(g.outChannels,")"))));let y;if(c!=null){let $=c.shape;if(F($.length<=1||$.length===3,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-".concat($.length,".")),$.length===1)F($[0]===1||$[0]===g.outChannels,()=>"Error in fused conv2d: PReLU activation weights (".concat($,") is not compatible with the number of output channels (").concat(g.outChannels,")."));else if($.length===3)try{At($,g.outShape)}catch(C){let T="Error in fused conv2d: PReLU activation weights (".concat($,") is not compatible with the output shape of the conv2d (").concat(g.outShape,").");throw Error(T)}y=R(c,"prelu weights","fused conv2d")}let v=($,C)=>{F(a==="NHWC",()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(a," but only NHWC is currently supported."));let[T,A,D,N]=C,I=wx($,D,l);F(Oo(i),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(i,"'"));let M=B$(A.shape,I,T,n,r),P=I2(A,I,T.shape,n,r),z=[M,P];if(N!=null){let j=kx(N,I);z.push(j)}return z},x={x:p,filter:h,bias:b,preluActivationWeights:y},w={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return o==null?hs(($,C,T)=>{let A=U.runKernel(Zl,x,w);return T([C,$,A]),f&&(A=q(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:v}})(p,h):hs(($,C,T,A)=>{let D=U.runKernel(Zl,x,w);return A([C,$,D,T]),f&&(D=q(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:v}})(p,h,b)}var Qne=V({fusedConv2d_:Zne});function ere(e,t,n,r,a,i=[1,1],s){let o=e;e.rank===3&&(o=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={x:o,dy:l},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return U.runKernel(F0,c,u)}var lL=V({depthwiseConv2dNativeBackpropFilter_:ere});function tre(e,t,n,r,a,i=[1,1],s){let o=t,l=!1;t.rank===3&&(l=!0,o=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={dy:o,filter:n},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:e},d=U.runKernel(M0,c,u);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var uL=V({depthwiseConv2dNativeBackpropInput_:tre});function nre({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(Ix(U.state.gradientDepth,l)===!1){let w=Bc(e,t,n,r,a,i,s);return o!=null&&(w=ie(w,o)),Sx(w,l,c,u)}let d=R(e,"x","depthwiseConv2d","float32"),h=R(t,"filter","depthwiseConv2d","float32"),p=d,f=!1;d.rank===3&&(f=!0,p=q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(p.rank===4,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(p.rank,".")),F(h.rank===4,()=>"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(h.rank,".")),F(p.shape[3]===h.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels (".concat(p.shape[3],") must match the inChannels dimension in filter ").concat(h.shape[2],".")),i==null&&(i=[1,1]),F(ms(n,i),()=>"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),Br("fused depthwiseConv2d",r,s);let m=bg(p.shape,h.shape,n,i,r,s,!0),g;o!=null&&(g=R(o,"bias","fused conv2d"),[g]=ln(g,d),At(m.outShape,g.shape));let b;c!=null&&(b=R(c,"prelu weights","fused depthwiseConv2d"));let y=(w,$)=>{F(Oo(i),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(i,"'"));let[C,T,A,D]=$,N=wx(w,A,l),I=uL(T.shape,N,C,n,r,i,s),M=lL(T,N,C.shape,n,r,i,s);if(D!=null){let P=kx(g,N);return[I,M,P]}return[I,M]},v={x:p,filter:h,bias:g,preluActivationWeights:b},x={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return o==null?hs((w,$,C)=>{let T=U.runKernel(Ql,v,x);return C([$,w,T]),f&&(T=q(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:y}})(p,h):hs((w,$,C,T)=>{let A=U.runKernel(Ql,v,x);return T([$,w,A,C]),f&&(A=q(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:y}})(p,h,g)}var rre=V({fusedDepthwiseConv2d_:nre});function are({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(Ix(U.state.gradientDepth,i)===!1){let D=Qe(e,t,n,r);return a!=null&&(D=ie(D,a)),Sx(D,i,s,o)}let l=R(e,"a","fused matMul"),c=R(t,"b","fused matMul");[l,c]=ln(l,c);let u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],f=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=Vt(f),b=Vt(m);F(u===d,()=>"Error in fused matMul: inner shapes (".concat(u,") and (").concat(d,") of Tensors with shapes ").concat(l.shape," and ").concat(c.shape," and transposeA=").concat(n," and transposeB=").concat(r," must match."));let y=At(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,p]),v=n?q(l,[g,u,h]):q(l,[g,h,u]),x=r?q(c,[b,p,d]):q(c,[b,d,p]),w;a!=null&&(w=R(a,"bias","fused matMul"),[w]=ln(w,l),At(y,w.shape));let $;s!=null&&($=R(s,"prelu weights","fused matMul"));let C=(D,N)=>{let[I,M,P,z]=N,j=wx(q(D,P.shape),P,i),K,O;if(!n&&!r?(K=Qe(j,M,!1,!0),O=Qe(I,j,!0,!1)):!n&&r?(K=Qe(j,M,!1,!1),O=Qe(j,I,!0,!1)):n&&!r?(K=Qe(M,j,!1,!0),O=Qe(I,j,!1,!1)):(K=Qe(M,j,!0,!0),O=Qe(j,I,!0,!0)),a!=null){let W=kx(z,j);return[K,O,W]}else return[K,O]},T={a:v,b:x,bias:w,preluActivationWeights:$},A={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return a==null?hs((D,N,I)=>{let M=U.runKernel(Jl,T,A);return I([D,N,M]),{value:q(M,y),gradFunc:C}})(v,x):hs((D,N,I,M)=>{let P=U.runKernel(Jl,T,A);return M([D,N,P,I]),{value:q(P,y),gradFunc:C}})(v,x,w)}var ire=V({fusedMatMul_:are});function sre(e){return xx(e,.54,.46)}var ore=V({hammingWindow_:sre});function lre(e){return xx(e,.5,.5)}var cL=V({hannWindow_:lre});function ure(e,t,n,r=!1,a=0){let i=0,s=[];for(;i+t<=e.size;)s.push(at(e,i,t)),i+=n;if(r)for(;i<e.size;){let o=i+t-e.size,l=_t([at(e,i,t-o),ga([o],a)]);s.push(l),i+=n}return s.length===0?us([],[0,t]):q(_t(s),[s.length,t])}var dL=V({frame_:ure});function cre(e,t,n,r,a=cL){r==null&&(r=S2(t));let i=dL(e,t,n),s=G(i,a(t));return Ng(s,r)}var dre=V({stft_:cre});function hre(e,t,n,r,a="bilinear",i=0){let s=R(e,"image","cropAndResize"),o=R(t,"boxes","cropAndResize","float32"),l=R(n,"boxInd","cropAndResize","int32"),c=o.shape[0];F(s.rank===4,()=>"Error in cropAndResize: image must be rank 4,but got rank ".concat(s.rank,".")),F(o.rank===2&&o.shape[1]===4,()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] but had shape ").concat(o.shape,".")),F(l.rank===1&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] but had shape ").concat(o.shape,".")),F(r.length===2,()=>"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")),F(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),F(a==="bilinear"||a==="nearest",()=>"method must be bilinear or nearest, but was ".concat(a));let u={image:s,boxes:o,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return U.runKernel(Ph,u,d)}var pre=V({cropAndResize_:hre});function fre(e){let t=R(e,"image","flipLeftRight","float32");F(t.rank===4,()=>"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,"."));let n={image:t};return U.runKernel(Uh,n,{})}var mre=V({flipLeftRight_:fre});function gre(e){let t=R(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];F(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, but got rank ".concat(t.rank,".")),F(r===1,()=>"Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ".concat(r,"."));let a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,da(t,a)}var bre=V({grayscaleToRGB_:gre});function yre(e,t,n=0,r=.5){let a=R(e,"image","rotateWithOffset","float32");F(a.rank===4,()=>"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,"."));let i={image:a},s={radians:t,fillValue:n,center:r};return U.runKernel($p,i,s)}var vre=V({rotateWithOffset_:yre});function Dp(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=e.shape[0];return n=Math.min(n,s),F(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),F(e.rank===2,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),F(e.shape[1]===4,()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),F(t.rank===1,()=>"scores must be a 1D tensor"),F(t.shape[0]===s,()=>"scores has incompatible shape with boxes. Expected ".concat(s,", but was ").concat(t.shape[0])),F(0<=i&&i<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(i,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}function xre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let i=R(e,"boxes","nonMaxSuppression","float32"),s=R(t,"scores","nonMaxSuppression","float32"),o=Dp(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return U.runKernel(rp,{boxes:i,scores:s},l)}var wre=V({nonMaxSuppression_:xre});function kre(e,t,n){let r=Sre(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Sre(e,t,n){return $re(e,t,n||Ire)}function Ire(e,t){return e>t?1:e<t?-1:0}function $re(e,t,n){let r=0,a=e.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);let o=n(t,e[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}function hL(e,t,n,r,a){return $2(e,t,n,r,a,0)}function pL(e,t,n,r,a,i){return $2(e,t,n,r,a,0,!1,i,!0)}function fL(e,t,n,r,a,i){return $2(e,t,n,r,a,i,!0)}function $2(e,t,n,r,a,i,s=!1,o=!1,l=!1){let c=[];for(let g=0;g<t.length;g++)t[g]>a&&c.push({score:t[g],boxIndex:g,suppressBeginIndex:0});c.sort(AA);let u=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){let g=c.pop(),{score:b,boxIndex:y,suppressBeginIndex:v}=g;if(b<a)break;let x=!1;for(let w=d.length-1;w>=v;--w){let $=Cre(e,y,d[w]);if($>=r){x=!0;break}if(g.score=g.score*Tre(r,u,$),g.score<=a)break}g.suppressBeginIndex=d.length,x||(g.score===b?(d.push(y),h.push(g.score)):g.score>a&&kre(c,g,AA))}let p=d.length,f=n-p;o&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));let m={selectedIndices:d};return s&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function Cre(e,t,n){let r=e.subarray(t*4,t*4+4),a=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(o-i)*(l-s),f=(d-c)*(h-u);if(p<=0||f<=0)return 0;let m=Math.max(i,c),g=Math.max(s,u),b=Math.min(o,d),y=Math.min(l,h),v=Math.max(b-m,0)*Math.max(y-g,0);return v/(p+f-v)}function Tre(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function AA(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function Ere(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let i=R(e,"boxes","nonMaxSuppressionAsync"),s=R(t,"scores","nonMaxSuppressionAsync"),o=Dp(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:d}=hL(c,u,n,r,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),St(d,"int32")}var Nre=Ere;function _re(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){let s=R(e,"boxes","nonMaxSuppression"),o=R(t,"scores","nonMaxSuppression"),l=Dp(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},d=U.runKernel(ip,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}var Are=V({nonMaxSuppressionWithScore_:_re});async function Rre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){let s=R(e,"boxes","nonMaxSuppressionAsync"),o=R(t,"scores","nonMaxSuppressionAsync"),l=Dp(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;let c=await Promise.all([s.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=fL(u,d,n,r,a,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:St(h,"int32"),selectedScores:St(p)}}var Dre=Rre;function Fre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){let s=R(e,"boxes","nonMaxSuppression"),o=R(t,"scores","nonMaxSuppression"),l=Dp(s,o,n,r,a,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:s,scores:o},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},f=U.runKernel(ap,h,p);return{selectedIndices:f[0],validOutputs:f[1]}}var Mre=V({nonMaxSuppressionPadded_:Fre});async function Ore(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){let s=R(e,"boxes","nonMaxSuppressionAsync"),o=R(t,"scores","nonMaxSuppressionAsync"),l=Dp(s,o,n,r,a,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=await Promise.all([s.data(),o.data()]),{selectedIndices:f,validOutputs:m}=pL(h,p,c,u,d,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:St(f,"int32"),validOutputs:Me(m,"int32")}}var Pre=Ore;function Lre(e,t,n=!1,r=!1){let a=R(e,"images","resizeBilinear");F(a.rank===3||a.rank===4,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")),F(t.length===2,()=>"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")),F(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=q(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=U.runKernel(wc,o,l);return s?q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var mL=V({resizeBilinear_:Lre});function zre(e,t,n=!1,r=!1){let a=R(e,"images","resizeNearestNeighbor");F(a.rank===3||a.rank===4,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")),F(t.length===2,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")),F(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=q(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=U.runKernel(xc,o,l);return s?q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var gL=V({resizeNearestNeighbor_:zre});function Bre(e,t="binary",n=!1,r=.5){let a=R(e,"image","threshold"),i=.2989,s=.587,o=.114,l=a.shape[0]*a.shape[1],c=G(St([r]),255),u,d,h,p;if(F(a.rank===3,()=>"Error in threshold: image must be rank 3,but got rank ".concat(a.rank,".")),F(a.shape[2]===3||a.shape[2]===1,()=>"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(a.shape[2],".")),F(a.dtype==="int32"||a.dtype==="float32",()=>"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(a.dtype,".")),F(t==="otsu"||t==="binary",()=>"Method must be binary or otsu, but was ".concat(t)),a.shape[2]===3){[u,d,h]=Xr(a,[1,1,1],-1);let m=G(u,i),g=G(d,s),b=G(h,o);p=ie(ie(m,g),b)}else p=e;if(t==="otsu"){let m=F$(me(ox(p),"int32"),Nr([]),256);c=Wre(m,l)}let f=n?nl(p,c):Wr(p,c);return me(G(f,255),"int32")}function Wre(e,t){let n=St([-1]),r=St([0]),a=St([0]),i,s,o,l,c,u;for(let d=0;d<e.size-1;d++){i=at(e,0,d+1),s=at(e,d+1),c=Ce(Ee(i),t),u=Ce(Ee(s),t);let h=Ee(G(i,lu(0,i.size)));o=Ce(h,Ee(i));let p=ga(s.shape,i.size),f=ie(lu(0,s.size),p),m=G(s,f);l=Ce(Ee(m),Ee(s));let g=Se(o,l),b=Se(o,l),y=G(c,u);a=G(G(y,g),b);let v=Wr(a,r);r=Jn(v,a,r),n=Jn(v,St([d]),n)}return n}var Ure=V({threshold_:Bre});function Vre(e,t,n="nearest",r="constant",a=0,i){let s=R(e,"image","transform","float32"),o=R(t,"transforms","transform","float32");F(s.rank===4,()=>"Error in transform: image must be rank 4,but got rank ".concat(s.rank,".")),F(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(i==null||i.length===2,()=>"Error in transform: outputShape must be [height, width] or null, but got ".concat(i,"."));let l={image:s,transforms:o},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return U.runKernel(kp,l,c)}var jre=V({transform_:Vre});function Hre(e,t,n){let r=R(e,"a","bandPart");F(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));let a=r.shape,[i,s]=r.shape.slice(-2),o,l;typeof t=="number"?(F(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),F(t<=i,()=>"bandPart(): numLower (".concat(t,") must not be greater than the number of rows (").concat(i,").")),o=R(t<0?i:t,"numLower","bandPart")):(F(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Jn(th(t,0),i,Po(t,i))),typeof n=="number"?(F(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),F(n<=s,()=>"bandPart(): numUpper (".concat(n,") must not be greater than the number of columns (").concat(s,").")),l=R(n<0?s:n,"numUpper","bandPart")):(F(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Jn(th(n,0),s,Po(n,s)));let c=q(lu(0,i,1,"int32"),[-1,1]),u=lu(0,s,1,"int32"),d=Se(c,u),h=di(nl(d,o),Ks(d,jt(l))),p=sn([i,s],r.dtype);return q(Dn(fn(q(r,[-1,i,s])).map(f=>Jn(h,f,p))),a)}var Gre=V({bandPart_:Hre});function qre(e){let t;if(Array.isArray(e)){t=!1,F(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let a=e[0].shape[0];for(let i=1;i<e.length;++i)F(e[i].shape[0]===a,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: (".concat(e[i].shape[0]," vs. ").concat(a,")"))}else t=!0,e=Xr(e,e.shape[0],0).map(a=>il(a,[0]));F(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds number of dimensions (").concat(e[0].shape[0],")."));let n=[],r=e;for(let a=0;a<e.length;++a)n.push(U.tidy(()=>{let i=r[a];if(a>0)for(let s=0;s<a;++s){let o=G(Ee(G(n[s],i)),n[s]);i=Se(i,o)}return Ce(i,Ep(i,"euclidean"))}));return t?Dn(n,0):n}var Kre=V({gramSchmidt_:qre});function Xre(e,t=!1){if(F(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),e.rank===2)return RA(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((l,c)=>l*c),r=fn(q(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{let[c,u]=RA(l,t);a.push(c),i.push(u)});let s=q(Dn(a,0),e.shape),o=q(Dn(i,0),e.shape);return[s,o]}}function RA(e,t=!1){return U.tidy(()=>{F(e.shape.length===2,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));let n=e.shape[0],r=e.shape[1],a=Q0(n),i=ls(e),s=us([[1]],[1,1]),o=ls(s),l=n>=r?r:n;for(let c=0;c<l;++c){let u=i,d=o,h=a;[o,i,a]=U.tidy(()=>{let p=at(i,[c,c],[n-c,1]),f=Ep(p),m=at(i,[c,c],[1,1]),g=Jn(Wr(m,0),us([[-1]]),us([[1]])),b=Se(m,G(g,f)),y=Ce(p,b);y.shape[0]===1?o=ls(s):o=_t([s,at(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);let v=jt(Ce(Qe(g,b),f)),x=at(i,[c,0],[n-c,r]),w=G(v,o),$=tt(o);if(c===0)i=Se(x,Qe(w,Qe($,x)));else{let A=Se(x,Qe(w,Qe($,x)));i=_t([at(i,[0,0],[c,r]),A],0)}let C=tt(w),T=at(a,[0,c],[n,a.shape[1]-c]);if(c===0)a=Se(T,Qe(Qe(T,o),C));else{let A=Se(T,Qe(Qe(T,o),C));a=_t([at(a,[0,0],[n,c]),A],1)}return[o,i,a]}),je([u,d,h])}return!t&&n>r&&(a=at(a,[0,0],[n,r]),i=at(i,[0,0],[r,r])),[a,i]})}var Yre=V({qr_:Xre}),Tr;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Tr||(Tr={}));function Jre(e,t,n=Tr.SUM_BY_NONZERO_WEIGHTS){let r=R(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=R(t,"weights","computeWeightedLoss"));let i=a==null?r:G(r,a);if(n===Tr.NONE)return i;if(n===Tr.SUM)return Ee(i);if(n===Tr.MEAN){if(a==null)return an(i);{let s=r.size/a.size,o=Ce(Ee(i),Ee(a));return s>1?Ce(o,Me(s)):o}}if(n===Tr.SUM_BY_NONZERO_WEIGHTS){if(a==null)return Ce(Ee(i),Me(r.size));{let s=G(a,ha(r.shape)),o=me(Ee(ou(s,Me(0))),"float32");return Ce(Ee(i),o)}}throw Error("Unknown reduction: ".concat(n))}var Xs=V({computeWeightedLoss_:Jre});function Zre(e,t,n,r=Tr.SUM_BY_NONZERO_WEIGHTS){let a=R(e,"labels","absoluteDifference"),i=R(t,"predictions","absoluteDifference"),s=null;n!=null&&(s=R(n,"weights","absoluteDifference")),zr(a.shape,i.shape,"Error in absoluteDifference: ");let o=kn(Se(a,i));return Xs(o,s,r)}var Qre=V({absoluteDifference_:Zre});function eae(e,t,n,r,a=Tr.SUM_BY_NONZERO_WEIGHTS){let i=R(e,"labels","cosineDistance"),s=R(t,"predictions","cosineDistance"),o=null;r!=null&&(o=R(r,"weights","cosineDistance")),zr(i.shape,s.shape,"Error in cosineDistance: ");let l=Me(1),c=Se(l,Ee(G(i,s),n,!0));return Xs(c,o,a)}var tae=V({cosineDistance_:eae});function nae(e,t,n,r=Tr.SUM_BY_NONZERO_WEIGHTS){let a=R(e,"labels","hingeLoss"),i=R(t,"predictions","hingeLoss"),s=null;n!=null&&(s=R(n,"weights","hingeLoss")),zr(a.shape,i.shape,"Error in hingeLoss: ");let o=Me(1);a=Se(G(Me(2),a),o);let l=It(Se(o,G(a,i)));return Xs(l,s,r)}var rae=V({hingeLoss_:nae});function aae(e,t,n,r=1,a=Tr.SUM_BY_NONZERO_WEIGHTS){let i=R(e,"labels","huberLoss"),s=R(t,"predictions","huberLoss"),o=null;n!=null&&(o=R(n,"weights","huberLoss")),zr(i.shape,s.shape,"Error in huberLoss: ");let l=Me(r),c=kn(Se(s,i)),u=Po(c,l),d=Se(c,u),h=ie(G(Me(.5),Et(u)),G(l,d));return Xs(h,o,a)}var iae=V({huberLoss_:aae});function sae(e,t,n,r=1e-7,a=Tr.SUM_BY_NONZERO_WEIGHTS){let i=R(e,"labels","logLoss"),s=R(t,"predictions","logLoss"),o=null;n!=null&&(o=R(n,"weights","logLoss")),zr(i.shape,s.shape,"Error in logLoss: ");let l=Me(1),c=Me(r),u=jt(G(i,xa(ie(s,c)))),d=G(Se(l,i),xa(ie(Se(l,s),c))),h=Se(u,d);return Xs(h,o,a)}var oae=V({logLoss_:sae});function lae(e,t,n,r=Tr.SUM_BY_NONZERO_WEIGHTS){let a=R(e,"labels","meanSquaredError"),i=R(t,"predictions","meanSquaredError"),s=null;n!=null&&(s=R(n,"weights","meanSquaredError")),zr(a.shape,i.shape,"Error in meanSquaredError: ");let o=fx(a,i);return Xs(o,s,r)}var uae=V({meanSquaredError_:lae});function cae(e,t){let n=R(e,"labels","sigmoidCrossEntropyWithLogits"),r=R(t,"logits","sigmoidCrossEntropyWithLogits");zr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let a=It(r),i=G(r,n),s=kg(Fr(jt(kn(r))));return ie(Se(a,i),s)}function dae(e,t,n,r=0,a=Tr.SUM_BY_NONZERO_WEIGHTS){let i=R(e,"multiClassLabels","sigmoidCrossEntropy"),s=R(t,"logits","sigmoidCrossEntropy"),o=null;if(n!=null&&(o=R(n,"weights","sigmoidCrossEntropy")),zr(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=Me(r),u=Me(1),d=Me(.5);i=ie(G(i,Se(u,c)),G(d,c))}let l=cae(i,s);return Xs(l,o,a)}var hae=V({sigmoidCrossEntropy_:dae});function pae(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ".concat(t.rank," and dim was ").concat(n));return hs((r,a,i)=>{let s=nx(a,[n],!0),o=Se(me(a,"float32"),s);i([r,o]);let l=jt(G(o,r));return{value:Ee(l,[n]),gradFunc:(c,u)=>{let[d,h]=u,p=su(c.shape,[n]);return[G(q(c,p),Se(me(d,"float32"),Fr(h))),G(q(c,p),Se(Fr(h),me(d,"float32")))]}}})(e,t)}function fae(e,t,n,r=0,a=Tr.SUM_BY_NONZERO_WEIGHTS){let i=R(e,"onehotLabels","softmaxCrossEntropy"),s=R(t,"logits","softmaxCrossEntropy"),o=null;if(n!=null&&(o=R(n,"weights","softmaxCrossEntropy")),zr(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=Me(r),u=Me(1),d=Me(i.shape[1]);i=ie(G(i,Se(u,c)),Ce(c,d))}let l=pae(i,s);return Xs(l,o,a)}var mae=V({softmaxCrossEntropy_:fae});function gae(e,t,n,r){let a=R(e,"indices","sparseFillEmptyRows","int32"),i=R(t,"values","sparseFillEmptyRows"),s=R(n,"denseShape","sparseFillEmptyRows","int32"),o=R(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(i.rank!==1)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(s.rank!==1)throw new Error("Dense shape should be Tensor1D but received shape ".concat(s.shape));if(o.rank!==0)throw new Error("Default value should be a scalar but received shape ".concat(o.shape));let l={indices:a,values:i,denseShape:s,defaultValue:o},c=U.runKernel(ng,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var bae=V({sparseFillEmptyRows_:gae});function yae(e,t,n){let r=R(e,"inputIndices","sparseReshape","int32"),a=R(t,"inputShape","sparseReshape","int32"),i=R(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(a.rank!==1)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(i.rank!==1)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));let s={inputIndices:r,inputShape:a,newShape:i},o=U.runKernel(yp,s);return{outputIndices:o[0],outputShape:o[1]}}var vae=V({sparseReshape_:yae});function xae(e,t,n){let r=R(e,"data","sparseSegmentMean"),a=R(t,"indices","sparseSegmentMean","int32"),i=R(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(i.rank!==1)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));let s={data:r,indices:a,segmentIds:i};return U.runKernel(rg,s)}var wae=V({sparseSegmentMean_:xae});function kae(e,t,n){let r=R(e,"data","sparseSegmentSum"),a=R(t,"indices","sparseSegmentSum","int32"),i=R(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(i.rank!==1)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));let s={data:r,indices:a,segmentIds:i};return U.runKernel(ag,s)}var Sae=V({sparseSegmentSum_:kae});function Iae(e,t,n,r,a,i,s,o){let l=R(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error("Data must be a vector, saw: ".concat(l.shape));let c=R(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:s,preserveShortSequences:o},d={data:l,dataSplits:c},h=U.runKernel(og,d,u);return{nGrams:h[0],nGramsSplits:h[1]}}var $ae=V({stringNGrams_:Iae});function Cae(e,t,n=!0){let r=R(e,"input","stringSplit","string"),a=R(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(a.rank!==0)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));let i={skipEmpty:n},s={input:r,delimiter:a},o=U.runKernel(lg,s,i);return{indices:o[0],values:o[1],shape:o[2]}}var Tae=V({stringSplit_:Cae});function Eae(e,t){let n=R(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let a={input:n};return U.runKernel(ug,a,r)}var Nae=V({stringToHashBucketFast_:Eae});function _ae(e,t,n,r=!0){let a=R(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return U.runKernel(sg,{x:a},i)}var Aae=V({staticRegexReplace_:_ae}),bL={fft:Eg,ifft:ih,rfft:Ng,irfft:px},yL={hammingWindow:ore,hannWindow:cL,frame:dL,stft:dre},Ma={flipLeftRight:mre,grayscaleToRGB:bre,resizeNearestNeighbor:gL,resizeBilinear:mL,rotateWithOffset:vre,cropAndResize:pre,nonMaxSuppression:wre,nonMaxSuppressionAsync:Nre,nonMaxSuppressionWithScore:Are,nonMaxSuppressionWithScoreAsync:Dre,nonMaxSuppressionPadded:Mre,nonMaxSuppressionPaddedAsync:Pre,threshold:Ure,transform:jre},C2={bandPart:Gre,gramSchmidt:Kre,qr:Yre},vL={absoluteDifference:Qre,computeWeightedLoss:Xs,cosineDistance:tae,hingeLoss:rae,huberLoss:iae,logLoss:oae,meanSquaredError:uae,sigmoidCrossEntropy:hae,softmaxCrossEntropy:mae},xL={sparseFillEmptyRows:bae,sparseReshape:vae,sparseSegmentMean:wae,sparseSegmentSum:Sae},wL={stringNGrams:$ae,stringSplit:Tae,stringToHashBucketFast:Nae,staticRegexReplace:Aae},ue={};He(ue,{Serializable:()=>kL,SerializationMap:()=>Il,registerClass:()=>SL});var kL=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},Il=class{constructor(){this.classNameMap={}}static getMap(){return Il.instance==null&&(Il.instance=new Il),Il.instance}static register(e){Il.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function SL(e){F(e.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),F(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Il.register(e)}var Ys=class extends kL{minimize(e,t=!1,n){let{value:r,grads:a}=this.computeGradients(e,n);if(n!=null){let i=n.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(i)}else this.applyGradients(a);return je(a),t?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return IP(e,t)}dispose(){this.iterations_!=null&&je(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Me(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class ".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Ys,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var T2=class extends Ys{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],n==null&&(this.epsilon=U.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=U.registeredVariables[t],a=!1;this.accumulatedGrads[n]==null&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:X(()=>ut(r).variable(a))}),this.accumulatedUpdates[n]==null&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:X(()=>ut(r).variable(a))});let i=Array.isArray(e)?e[n].tensor:e[t];if(i==null)return;let s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;X(()=>{let l=ie(G(s,this.rho),G(Et(i),1-this.rho)),c=G(Ce(lr(ie(o,this.epsilon)),lr(ie(s,this.epsilon))),i),u=ie(G(o,this.rho),G(Et(c),1-this.rho));s.assign(l),o.assign(u);let d=ie(G(c,-this.learningRate),r);r.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(je(this.accumulatedGrads.map(e=>e.variable)),je(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},E2=class extends Ys{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=U.registeredVariables[t];this.accumulatedGrads[n]==null&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:X(()=>ga(r.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(a==null)return;let i=this.accumulatedGrads[n].variable;X(()=>{let s=ie(i,Et(a));i.assign(s);let o=ie(G(Ce(a,lr(ie(s,U.backend.epsilon()))),-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&je(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulatedGrads=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},N2=class extends Ys{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],X(()=>{this.accBeta1=Me(t).variable(),this.accBeta2=Me(n).variable()}),r==null&&(this.epsilon=U.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);X(()=>{let n=Se(1,this.accBeta1),r=Se(1,this.accBeta2);t.forEach((a,i)=>{let s=U.registeredVariables[a],o=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:"".concat(a,"/m"),variable:X(()=>ut(s).variable(o))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:"".concat(a,"/v"),variable:X(()=>ut(s).variable(o))});let l=Array.isArray(e)?e[i].tensor:e[a];if(l==null)return;let c=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,d=ie(G(c,this.beta1),G(l,1-this.beta1)),h=ie(G(u,this.beta2),G(Et(l),1-this.beta2)),p=Ce(d,n),f=Ce(h,r);c.assign(d),u.assign(h);let m=ie(G(Ce(p,ie(lr(f),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(G(this.accBeta1,this.beta1)),this.accBeta2.assign(G(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&je(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),X(()=>{this.accBeta1.assign(Us(this.beta1,this.iterations_+1)),this.accBeta2.assign(Us(this.beta2,this.iterations_+1))});let t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},_2=class extends Ys{static get className(){return"Adamax"}constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],X(()=>{this.iteration=Me(0).variable(),this.accBeta1=Me(t).variable()}),r==null&&(this.epsilon=U.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);X(()=>{let n=Se(1,this.accBeta1),r=Ce(-this.learningRate,ie(G(this.iteration,this.decay),1));t.forEach((a,i)=>{let s=U.registeredVariables[a],o=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:"".concat(a,"/m"),variable:ut(s).variable(o)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:"".concat(a,"/v"),variable:ut(s).variable(o)});let l=Array.isArray(e)?e[i].tensor:e[a];if(l==null)return;let c=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,d=ie(G(c,this.beta1),G(l,1-this.beta1)),h=G(u,this.beta2),p=kn(l),f=gs(h,p);c.assign(d),u.assign(f);let m=ie(G(Ce(r,n),Ce(d,ie(f,this.epsilon))),s);s.assign(m)}),this.iteration.assign(ie(this.iteration,1)),this.accBeta1.assign(G(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&je(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&je(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},$x=class extends Ys{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(r==null)return;let a=U.registeredVariables[t];X(()=>{let i=ie(G(this.c,r),a);a.assign(i)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=An(Me(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}},A2=class extends $x{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Me(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=U.registeredVariables[t];this.accumulations[n]==null&&(this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:X(()=>ut(r).variable(!1))});let a=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];i!=null&&X(()=>{let s,o=ie(G(this.m,a),i);this.useNesterov?s=ie(G(this.c,ie(i,G(o,this.m))),r):s=ie(G(this.c,o),r),a.assign(o),r.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&je(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulations=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},R2=class extends Ys{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,r==null&&(this.epsilon=U.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=U.registeredVariables[t],a=!1;this.accumulatedMeanSquares[n]==null&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:X(()=>ut(r).variable(a))}),this.accumulatedMoments[n]==null&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:X(()=>ut(r).variable(a))}),this.accumulatedMeanGrads[n]==null&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:X(()=>ut(r).variable(a))});let i=Array.isArray(e)?e[n].tensor:e[t];if(i==null)return;let s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;X(()=>{let l=ie(G(s,this.decay),G(Et(i),1-this.decay));if(this.centered){let c=this.accumulatedMeanGrads[n].variable,u=ie(G(c,this.decay),G(i,1-this.decay)),d=Ce(G(i,this.learningRate),lr(Se(l,ie(Et(u),this.epsilon)))),h=ie(G(o,this.momentum),d);s.assign(l),c.assign(u),o.assign(h);let p=Se(r,h);r.assign(p)}else{let c=ie(G(s,this.decay),G(Et(i),1-this.decay)),u=ie(G(o,this.momentum),Ce(G(i,this.learningRate),lr(ie(c,this.epsilon))));s.assign(c),o.assign(u);let d=Se(r,u);r.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&je(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&je(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&je(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},Rae=[T2,E2,N2,_2,A2,R2,$x];function Dae(){for(let e of Rae)SL(e)}var sr={};He(sr,{CompositeArrayBuffer:()=>fs,browserFiles:()=>Bae,browserHTTPRequest:()=>Hae,concatenateArrayBuffers:()=>dZ,copyModel:()=>DZ,decodeWeights:()=>K3,encodeWeights:()=>oZ,fromMemory:()=>qae,fromMemorySync:()=>EL,getLoadHandlers:()=>vZ,getModelArtifactsForJSON:()=>v$,getModelArtifactsForJSONSync:()=>Y3,getModelArtifactsInfoForJSON:()=>gg,getSaveHandlers:()=>yZ,getWeightSpecs:()=>J3,http:()=>F2,isHTTPScheme:()=>Uk,listModels:()=>AZ,loadWeights:()=>Wae,moveModel:()=>FZ,registerLoadRouter:()=>bZ,registerSaveRouter:()=>gZ,removeModel:()=>RZ,weightsLoaderFactory:()=>$L,withSaveHandler:()=>Kae,withSaveHandlerSync:()=>Xae});var Fae="model",Mae=".json",Oae=".weights.bin";function DA(e){return new Promise(t=>setTimeout(t)).then(e)}var oh=class{constructor(e){if(!Q().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(oh.URL_SCHEME)&&(e=e.slice(oh.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Fae),this.modelJsonFileName=e+Mae,this.weightDataFileName=e+Oae}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=fs.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=X3(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=i,await DA(()=>s.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let o=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;o.download=this.weightDataFileName,o.href=n,await DA(()=>o.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:gg(e)}}}};oh.URL_SCHEME="downloads://";var Pae=class{constructor(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=r=>{let a=JSON.parse(r.target.result),i=a.modelTopology;if(i==null){t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));return}if(a.weightsManifest==null){t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}let s=v$(a,o=>this.loadWeights(o));e(s)},n.onerror=r=>t("Failed to read model topology and weights manifest JSON from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let i of e)t.push(...i.weights),n.push(...i.paths);let r=this.checkManifestAndWeightFiles(e),a=n.map(i=>this.loadWeightsFile(i,r[i]));return Promise.all(a).then(i=>[t,i])}loadWeightsFile(e,t){return new Promise((n,r)=>{let a=new FileReader;a.onload=i=>{let s=i.target.result;n(s)},a.onerror=i=>r("Failed to weights data from file of path '".concat(e,"'.")),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(a=>_A(a.name)),r={};for(let a of e)a.paths.forEach(i=>{let s=_A(i);if(t.indexOf(s)!==-1)throw new Error("Duplicate file basename found in weights manifest: '".concat(s,"'"));if(t.push(s),n.indexOf(s)===-1)throw new Error("Weight file with basename '".concat(s,"' is not provided."));r[i]=this.weightsFiles[n.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest (".concat(t.length,") and the number of weight files provided (").concat(this.weightsFiles.length,")."));return r}},Lae=e=>Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(oh.URL_SCHEME)?zae(e.slice(oh.URL_SCHEME.length)):null;cn.registerSaveRouter(Lae);function zae(e="model"){return new oh(e)}function Bae(e){return new Pae(e)}function FA(e,t,n,r){s(e),n=n==null?0:n,r=r==null?1:r,o(n,r);let a=0,i=l=>(l.then(c=>{let u=n+ ++a/e.length*(r-n);return t(u),c}),l);function s(l){F(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){F(l>=0&&l<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction ".concat(l)),F(c>=0&&c<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction ".concat(c)),F(c>=l,()=>"startFraction must be no more than endFraction, but got startFraction ".concat(l," and endFraction ").concat(c))}return Promise.all(e.map(i))}async function IL(e,t){t==null&&(t={});let n=t.fetchFunc==null?Q().platform.fetch:t.fetchFunc,r=e.map(c=>n(c,t.requestInit,{isBinary:!0})),a=0,i=.5,s=(t.onProgress==null?await Promise.all(r):await FA(r,t.onProgress,a,i)).map(c=>c.arrayBuffer()),o=.5,l=1;return t.onProgress==null?await Promise.all(s):await FA(s,t.onProgress,o,l)}async function Wae(e,t="",n,r){return $L(a=>IL(a,{requestInit:r}))(e,t,n)}function $L(e){return async(t,n="",r)=>{let a=t.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],o=[];if(t.forEach((p,f)=>{let m=0;p.weights.forEach(g=>{let b="quantization"in g?g.quantization.dtype:g.dtype,y=Ok[b]*Vt(g.shape),v=()=>{a[f]=!0,i[f]==null&&(i[f]=[]),i[f].push({manifestEntry:g,groupOffset:m,sizeBytes:y})};r!=null?r.forEach((x,w)=>{x===g.name&&(v(),s[w]=!0)}):v(),o.push(g.name),m+=y})}),!s.every(p=>p)){let p=r.filter((f,m)=>!s[m]);throw new Error("Could not find weights in manifest with names: ".concat(p.join(", "),". \nManifest JSON has weights with names: ").concat(o.join(", "),"."))}let l=a.reduce((p,f,m)=>(f&&p.push(m),p),[]),c=[];l.forEach(p=>{t[p].paths.forEach(f=>{let m=n+(n.endsWith("/")?"":"/")+f;c.push(m)})});let u=await e(c),d={},h=0;return l.forEach(p=>{let f=t[p].paths.length,m=new fs(u.slice(h,h+f));i[p].forEach(g=>{let b=m.slice(g.groupOffset,g.groupOffset+g.sizeBytes),y=K3(b,[g.manifestEntry]);for(let v in y)d[v]=y[v]}),h+=f}),d}}var Uae="application/octet-stream",Vae="application/json",D2=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(F(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Q().platform.fetch,F(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&F(e.length===2,()=>"URL paths for http must have a length of 2, (actual length is ".concat(e.length,").")),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=X3(e,n);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:Vae}),"model.json"),e.weightData!=null){let i=fs.join(e.weightData);t.body.append("model.weights.bin",new Blob([i],{type:Uae}),"model.weights.bin")}let a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:gg(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(a.status,"."))}async load(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ").concat(e.status,". Please verify this URL points to the model JSON of the model to load."));let t;try{t=await e.json()}catch(a){let i="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}let n=t.modelTopology,r=t.weightsManifest;if(n==null&&r==null)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));return v$(t,a=>this.loadWeights(a))}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=jae(t),a=this.weightPathPrefix||n,i=J3(e),s=[],o=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(u)):s.push(a+u+r);this.weightUrlConverter&&s.push(...await Promise.all(o));let l=await IL(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,l]}};D2.URL_SCHEME_REGEX=/^https?:\/\//;function jae(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}function Uk(e){return e.match(D2.URL_SCHEME_REGEX)!=null}var CL=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>Uk(r)):n=Uk(e),n)return F2(e,t)}return null};cn.registerSaveRouter(CL);cn.registerLoadRouter(CL);function F2(e,t){return new D2(e,t)}function Hae(e,t){return F2(e,t)}var Zw=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},TL=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},Gae=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}};function qae(e,t,n,r){let a=arguments;return new Gae(EL(...a))}function EL(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new Zw(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zw({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zw({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Kae(e){return new TL(e)}function Xae(e){return new TL(e)}var NL={};He(NL,{confusionMatrix:()=>Jae});function Yae(e,t,n){let r=R(e,"labels","confusionMatrix"),a=R(t,"predictions","confusionMatrix");F(n==null||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got ".concat(n)),F(r.rank===1,()=>"Expected the rank of labels to be 1, but got ".concat(r.rank)),F(a.rank===1,()=>"Expected the rank of predictions to be 1, but got ".concat(a.rank)),F(r.shape[0]===a.shape[0],()=>"Mismatch in the number of examples: ".concat(r.shape[0]," vs. ").concat(a.shape[0],". Labels and predictions should have the same number of elements.")),F(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got ".concat(n));let i=nh(me(r,"int32"),n),s=nh(me(a,"int32"),n),o=tt(i),l=Qe(o,s);return me(l,"int32")}var Jae=V({confusionMatrix_:Yae}),_g={};He(_g,{draw:()=>iie,fromPixels:()=>sie,fromPixelsAsync:()=>nie,toPixels:()=>aie});var gl,MA=!1;function _L(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,s=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)o=!0;else throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));if(lv(ov,U.backendName)!=null){let h={pixels:e},p={numChannels:t};return U.runKernel(ov,h,p)}let[l,c]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],u;if(s)u=e.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)u=e.data;else if(i||a||o){if(gl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")gl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else gl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});gl.canvas.width=l,gl.canvas.height=c,gl.drawImage(e,0,0,l,c),u=gl.getImageData(0,0,l,c).data}let d;if(t===4)d=new Int32Array(u);else{let h=l*c;d=new Int32Array(h*t);for(let p=0;p<h;p++)for(let f=0;f<t;++f)d[p*t+f]=u[p*4+f]}return mx(d,[c,l,t],"int32")}function Zae(e){return e!=null&&e.data instanceof Uint8Array}function Qae(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function eie(e){return e!=null&&e.width!==0&&e.height!==0}function tie(e){return Qae()&&!(e instanceof ImageBitmap)&&eie(e)&&!Zae(e)}async function nie(e,t=3){let n=null;if(Q().getBool("WRAP_TO_IMAGEBITMAP")&&tie(e)){let r;try{r=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(a){r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return _L(n,t)}function AL(e){if(e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));let t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got ".concat(t));if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error("Unsupported type for toPixels: ".concat(e.dtype,". Please use float32 or int32 tensors."))}function rie(e){let t=(e==null?void 0:e.alpha)||1;if(t>1||t<0)throw new Error("Alpha value ".concat(t," is suppoed to be in range [0 - 1]."))}async function aie(e,t){let n=R(e,"img","toPixels");if(!(e instanceof qe)){let c=n;n=me(c,"int32"),c.dispose()}AL(n);let[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let c=0;c<r*a;++c){let u=[0,0,0,255];for(let h=0;h<i;h++){let p=s[c*i+h];if(n.dtype==="float32"){if(p<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(p,"."))}else if(n.dtype==="int32"&&(p<0||p>255))throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(p,"."));i===1?(u[0]=p*o,u[1]=p*o,u[2]=p*o):u[h]=p*o}let d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(t!=null){MA||(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),MA=!0),t.width=a,t.height=r;let c=t.getContext("2d"),u=new ImageData(l,a,r);c.putImageData(u,0,0)}return n!==e&&n.dispose(),l}function iie(e,t,n){let r=R(e,"img","draw");if(!(e instanceof qe)){let s=r;r=me(s,"int32"),s.dispose()}AL(r),rie(n==null?void 0:n.imageOptions);let a={image:r},i={canvas:t,options:n};U.runKernel(f$,a,i)}var sie=V({fromPixels_:_L}),M2={};He(M2,{prepareAndValidate:()=>RL});function RL(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(Vt(e.shape)===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));let a=t.shape,i=a[a.length-1],s=1;for(let d=0;d<a.length-1;++d)s*=a[d];let o=e.shape,l=a.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=o[d],l.push(o[d]);let u=[...Sh(e.shape).map(d=>d/c),1].slice(0,i);return[l,s,c,u]}var Fn={};He(Fn,{assertParamsValid:()=>lie,computeFlatOffset:()=>pie,computeOutShape:()=>cie,getNormalizedAxes:()=>die,isSliceContinous:()=>hie,maskToAxes:()=>uie,parseSliceParams:()=>WL,sliceInfo:()=>fie,startForAxis:()=>zL,startIndicesWithElidedDims:()=>OL,stopForAxis:()=>BL,stopIndicesWithElidedDims:()=>PL,stridesForAxis:()=>LL,stridesWithElidedDims:()=>DL});var Vk=-2,oie=-1;function lie(e,t,n){let r=e.shape.length;F(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")),F(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,")."));for(let a=0;a<r;++a)F(t[a]+n[a]<=e.shape[a],()=>"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")"))}function uie(e){let t=[],n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function cie(e,t,n){let r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function DL(e,t,n,r){let a=[...e];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[t]=1:(a.splice(t,0,1),a.pop());return a}function FL(e,t,n){return n<=e?n:n-(t-1)}function ML(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function die(e,t,n,r,a,i,s,o,l){let c=e.length,u=new Array(c),d=new Array(c),h=new Array(c);if(t.length&&n>0){let p=t[0],f=n+1;u=OL(s,p,f,r,e),d=PL(o,p,f,a,e),h=DL(i,p,f,e)}else for(let p=0;p<c;p++)u[p]=zL(s,r,i,e,p,l),d[p]=BL(o,a,i,e,p,l),h[p]=LL(i,p,l);return{begin:u,end:d,strides:h}}function OL(e,t,n,r,a){let i=[...a],s=ML(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{let l=FL(t,n,o),c=r[l];e&1<<l&&(c=0),i[o]=c}return i}function PL(e,t,n,r,a){let i=[...a],s=ML(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{let l=FL(t,n,o),c=r[l];e&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[o]=c}for(let o=0;o<i.length;o++){let l=a[o];i[o]<0&&(i[o]+=l),i[o]=dm(0,i[o],a[o])}return i}function LL(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function zL(e,t,n,r,a,i){let s=t[a],o=n[a]||1;(e&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[a];return s<0&&(s+=l),s=dm(0,s,l-1),s}function BL(e,t,n,r,a,i){let s=t[a],o=n[a]||1;(e&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[a];return s<0&&(s+=l),o>0?s=dm(0,s,l):s=dm(-1,s,l-1),s}function hie(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function pie(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function WL(e,t,n){let r,a=e.shape.length;typeof t=="number"?r=[t,...new Array(a-1).fill(0)]:t.length<a?r=t.concat(new Array(a-t.length).fill(0)):r=t.slice(),r.forEach(s=>{F(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((s,o)=>s>=0?s:(F(s===-1,()=>"Negative size values should be exactly -1 but got ".concat(s," for the slice() size at index ").concat(o,".")),e.shape[o]-r[o])),[r,i]}function fie(e,t,n,r,a,i,s,o,l){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)u&&1<<y&o&&d.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);let h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};mie(d,h);let p=!0,f=!0,m=!0,g=[],b=[];for(let y=0;y<e.length;++y){if(h.strides[y]===0)throw Error("strides[".concat(y,"] must be non-zero"));let v=!!(h.shrinkAxisMask&1<<y),x=e[y];if(x===-1){g.push(v?1:-1);continue}let w=[h.beginMask&1<<y,h.endMask&1<<y],$=[h.strides[y]>0?0:-1,h.strides[y]>0?x:x-1];if(v&&h.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[y]===1;let C=!!(h.beginMask&1<<y&&h.endMask&1<<y);if(h.beginValid&&h.endValid){if(v){let N=h.begin[y]<0?x+h.begin[y]:h.begin[y];if(h.begin[y]=N,h.end[y]=h.begin[y]+1,N<0||N>=x)throw Error("slice index ".concat(h.begin[y]," of dimension ").concat(y," out of bounds."))}else h.begin[y]=OA(h.begin[y],0,h.strides[y],x,w,$),h.end[y]=OA(h.end[y],1,h.strides[y],x,w,$);let D=h.strides[y]===1&&h.begin[y]===0&&h.end[y]===x;p=p&&D,f=f&&(y===0&&h.strides[y]===1||D)}else p=p&&h.strides[y]===1&&C,f=f&&(y===0&&h.strides[y]===1||C);let T,A=!1;if(h.beginValid&&h.endValid?(T=h.end[y]-h.begin[y],A=!0):v?(T=1,A=!0):C&&x>=0&&(h.strides[y]<0?T=-x:T=x,A=!0),A){let D;T===0||T<0!=h.strides[y]<0?D=0:D=Math.trunc(T/h.strides[y])+(T%h.strides[y]!==0?1:0),g.push(D)}else g.push(-1)}for(let y=0;y<h.finalShapeGatherIndices.length;++y){let v=h.finalShapeGatherIndices[y];v>=0?b.push(g[v]):v===Vk&&b.push(1)}return{finalShapeSparse:b.filter((y,v)=>h.finalShapeGatherIndices[v]!==Vk),finalShape:b,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function mie(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(Vk),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input has only ").concat(t.dims," dims, ").concat(t.begin.length,"."));e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(oie),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function OA(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{let s=e<0?r+e:e;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var gie="4.7.0",UL=class{static sgd(e){return new $x(e)}static momentum(e,t,n=!1){return new A2(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new R2(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new N2(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new T2(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new _2(e,t,n,r,a)}static adagrad(e,t=.1){return new E2(e,t)}},kl=UL,bie=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e())();function O2(){return new Promise(e=>bie(()=>e()))}var E={};He(E,{ERF_A1:()=>Rie,ERF_A2:()=>Die,ERF_A3:()=>Fie,ERF_A4:()=>Mie,ERF_A5:()=>Oie,ERF_P:()=>Aie,PARALLELIZE_THRESHOLD:()=>P2,RowPartitionType:()=>ts,SELU_SCALE:()=>jL,SELU_SCALEALPHA:()=>VL,applyActivation:()=>Sx,assertAndGetBroadcastShape:()=>At,assertAxesAreInnerMostDims:()=>vee,assertParamsConsistent:()=>yie,assignToTypedArray:()=>Uie,axesAreInnerMostDims:()=>K$,calculateShapes:()=>ZP,checkEinsumDimSizes:()=>Kie,checkPadOnDimRoundingMode:()=>Br,combineLocations:()=>vP,combineRaggedTensorToTensorShapes:()=>xie,complexWithEvenIndex:()=>zie,complexWithOddIndex:()=>Bie,computeConv2DInfo:()=>bg,computeConv3DInfo:()=>uP,computeDefaultPad:()=>N$,computeDilation2DInfo:()=>bQ,computeOptimalWindowSize:()=>Iie,computeOutAndReduceShapes:()=>xP,computeOutShape:()=>vie,computePool2DInfo:()=>lP,computePool3DInfo:()=>yQ,convertConv2DDataFormat:()=>cP,decodeEinsumEquation:()=>Gie,eitherStridesOrDilationsAreOne:()=>ms,expandShapeToKeepDim:()=>su,exponent:()=>jie,exponents:()=>Vie,fromStringArrayToUint8:()=>mse,fromUint8ToStringArray:()=>fse,getAxesPermutation:()=>wP,getBroadcastDims:()=>gP,getComplexWithIndex:()=>Wie,getEinsumComputePath:()=>Xie,getEinsumPermutation:()=>qie,getFusedBiasGradient:()=>kx,getFusedDyActivation:()=>wx,getImageCenter:()=>$ie,getInnerMostAxes:()=>xee,getPermuted:()=>Tie,getRaggedRank:()=>kie,getReductionAxes:()=>Tn,getReshaped:()=>Cie,getReshapedPermuted:()=>Eie,getRowPartitionTypesHelper:()=>wie,getSliceBeginCoords:()=>Nie,getSliceSize:()=>_ie,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Qie,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>ese,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>tse,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>ase,getSparseReshapeInputOutputMismatchErrorMessage:()=>sse,getSparseReshapeInputOutputMultipleErrorMessage:()=>ise,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>nse,getSparseReshapeNegativeOutputDimErrorMessage:()=>rse,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>cse,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>ose,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>lse,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>use,getUndoAxesPermutation:()=>X$,isIdentityPermutation:()=>Yie,log:()=>_J,mergeRealAndImagArrays:()=>Pie,prepareAndValidate:()=>RL,prepareSplitSize:()=>Zie,segment_util:()=>HL,shouldFuse:()=>Ix,slice_util:()=>Fn,splitRealAndImagArrays:()=>Lie,stridesOrDilationsArePositive:()=>au,tupleValuesAreOne:()=>Oo,upcastType:()=>Ua,validateDefaultValueShape:()=>Sie,validateInput:()=>bx,validateUpdateShape:()=>b2,warn:()=>uo});function yie(e,t){let n=e[0].length;e.forEach((a,i)=>{F(a.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(i,"] must be the same as the rank of the rest (").concat(n,")"))}),F(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));let r=e[0];e.forEach((a,i)=>{for(let s=0;s<n;s++)F(s===t||a[s]===r[s],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(i,"] (").concat(a,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(i,"."))})}function vie(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var ts;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(ts||(ts={}));function xie(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let a=1;a<n.length;++a){let i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(o))}else r[s]=i}return r}function wie(e){let t={FIRST_DIM_SIZE:ts.FIRST_DIM_SIZE,VALUE_ROWIDS:ts.VALUE_ROWIDS,ROW_LENGTHS:ts.ROW_LENGTHS,ROW_SPLITS:ts.ROW_SPLITS,ROW_LIMITS:ts.ROW_LIMITS,ROW_STARTS:ts.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function kie(e){return e.length===0?0:e[0]===ts.FIRST_DIM_SIZE?e.length-1:e.length}function Sie(e,t){if(e==null||t==null)return;let n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let a=0;a<Math.min(n,r-1);++a){let i=e[a],s=t[a+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(s))}}var P2=30;function Iie(e){return e<=P2?e:sv(e,Math.floor(Math.sqrt(e)))}function $ie(e,t,n){let r=n*(typeof e=="number"?e:e[0]),a=t*(typeof e=="number"?e:e[1]);return[r,a]}function Cie(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);let i=t.length;for(let s=0;s<i;++s)a=a.concat([e[s+1]/t[s],t[s]]);a=a.concat(e.slice(i+1))}return a}function Tie(e,t,n=!0){let r=[];if(n){r.push(t);for(let a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{let a=[],i=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?i.push(s):a.push(s);r.push(...a),r.push(0),r.push(...i)}return r}function Eie(e,t,n,r=!0){let a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Nie(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function _ie(e,t,n){let r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var VL=1.7580993408473768,jL=1.0507009873554805,Aie=.3275911,Rie=.254829592,Die=-.284496736,Fie=1.421413741,Mie=-1.453152027,Oie=1.061405429;function Pie(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));let n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Lie(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function zie(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Bie(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Wie(e,t){let n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function Uie(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function Vie(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function jie(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}var Qw="->",Hie=/->/g,PA=",",LA="...";function Gie(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace(Hie,"").length)/Qw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Qw,'").'));let[r,a]=e.split(Qw);F(r.indexOf(LA)===-1,()=>'The ellipsis notation ("'.concat(LA,'") is not supported yet.'));let i=r.split(PA),s=i.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let h=0;h<a.length;++h){let p=a[h];if(!i.some(f=>f.indexOf(p)!==-1))throw new Error("Output subscripts contain the label ".concat(p," not present in the input subscripts."));o.indexOf(p)===-1&&o.push(p)}for(let h=0;h<r.length;++h){let p=r[h];o.indexOf(p)===-1&&p!==PA&&o.push(p)}let l=new Array(i.length);for(let h=0;h<s;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error("Found duplicate axes in input component ".concat(i[h],". Support for duplicate axes in input is not implemented yet."));l[h]=[];for(let p=0;p<i[h].length;++p)l[h].push(o.indexOf(i[h][p]))}let c=o.length,u=a.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:o,summedDims:d,idDims:l}}function qie(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;let r=[];for(let a=0;a<e;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function Kie(e,t,n){let r=new Array(e);for(let a=0;a<n.length;++a){let i=n[a].shape;for(let s=0;s<t[a].length;++s)r[t[a][s]]===void 0?r[t[a][s]]=i[s]:F(r[t[a][s]]===i[s],()=>"Expected dimension ".concat(r[t[a][s]]," at axis ").concat(s," of input shaped ").concat(JSON.stringify(i),", but got dimension ").concat(i[s]))}}function Xie(e,t){let n=e,r=[],a=0;e.length===0&&n.push(-1),a=e.length+1;for(let s=0;s<a;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let o=n[s],l=Jie(t,o);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function Yie(e){return e.every((t,n)=>t===n)}function Jie(e,t){let n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function Zie(e,t,n=0){let r=[];if(typeof t=="number")F(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let a=t.reduce((s,o)=>(o===-1&&(s+=1),s),0);F(a<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(i!==-1){let s=t.reduce((o,l)=>l>0?o+l:o);t[i]=e.shape[n]-s}F(e.shape[n]===t.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function Qie(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function ese(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function tse(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function nse(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function rse(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function ase(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function ise(e,t){let n=Vt(e),r=Vt(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function sse(e,t){let n=Vt(e),r=Vt(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function ose(){return"segment ids must be >= 0"}function lse(){return"segment ids are not increasing"}function use(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function cse(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}var HL={};He(HL,{collectGatherOpShapeInfo:()=>pse,computeOutShape:()=>hse,segOpComputeOptimalWindowSize:()=>dse});function dse(e,t){let n=!1,r;for(e<=P2?(r=e,n=!0):r=sv(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=sv(e,r+1);return r}function hse(e,t,n){let r=[],a=e.length;for(let i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function pse(e,t,n,r){let a=t.shape.length,i=e.shape.length;if(r!==0&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error("x.shape[".concat(d,"]: ").concat(e.shape[d]," should be equal to indices.shape[").concat(d,"]: ").concat(t.shape[d],"."));let s=e.shape[n],o=[],l=1,c=1,u=1;for(let d=0;d<r;++d)o.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)o.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<a;d++)o.push(t.shape[d]);for(let d=n+1;d<i;d++)o.push(e.shape[d]),u*=e.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:o}}function fse(e){try{return e.map(t=>cv(t))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(t))}}function mse(e){return e.map(t=>fg(t))}var bs={};He(bs,{nonMaxSuppressionV3Impl:()=>hL,nonMaxSuppressionV4Impl:()=>pL,nonMaxSuppressionV5Impl:()=>fL,whereImpl:()=>tL});Dae();var GL={kernelName:Ih,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,Uc(me(n,"float32"),-1))}}},gse={kernelName:wu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Et(me(n,"float32")),a=lr(Se(Me(1),r));return jt(Ce(e,a))}}}},bse={kernelName:ku,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=lr(Se(Et(me(n,"float32")),1));return Ce(e,r)}}}},yse={kernelName:Jo,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=e,s=Tn(n.shape,a);return s.length>0&&(i=Ee(i,s)),q(i,n.shape)},b:()=>{let i=e,s=Tn(r.shape,a);return s.length>0&&(i=Ee(i,s)),q(i,r.shape)}}}},vse={kernelName:Su,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((r,a)=>{n[a]=()=>e.clone()}),n}},xse={kernelName:Th,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ut(n)}}},wse={kernelName:Eh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ut(n)}}},kse={kernelName:Iu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,lr(Se(Me(1),Et(me(n,"float32")))))}}},Sse={kernelName:$u,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=lr(ie(Me(1),Et(me(n,"float32"))));return Ce(e,r)}}}},Ise={kernelName:Eu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=ie(Et(n),Et(r)),s=G(e,Ce(r,i)),o=Tn(n.shape,a);return o.length>0&&(s=Ee(s,o)),q(s,n.shape)},b:()=>{let i=ie(Et(n),Et(r)),s=jt(G(e,Ce(n,i))),o=Tn(r.shape,a);return o.length>0&&(s=Ee(s,o)),q(s,r.shape)}}}},$se={kernelName:Cu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,ie(Et(me(n,"float32")),1))}}},Cse={kernelName:Tu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,Se(Me(1),Et(me(n,"float32"))))}}};function Tse(e,t,n,r,a,i){let s=R(e,"dy","avgPool3dGrad"),o=R(t,"input","avgPool3dGrad"),l=s,c=o,u=!1;o.rank===4&&(u=!0,l=q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(l.rank===5,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank ".concat(l.rank,".")),F(c.rank===5,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank ".concat(c.rank,".")),Br("avgPool3dGrad",a,i);let d={dy:l,input:c},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=U.runKernel(Gm,d,h);return u?q(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Ese=V({avgPool3dGrad_:Tse}),Nse={kernelName:Nh,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>Ese(e,r,a,i,s,o)}}};function _se(e,t,n,r,a){let i=R(e,"dy","avgPoolGrad"),s=R(t,"input","avgPoolGrad");F(s.rank===i.rank,()=>"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(i.rank,")"));let o=s,l=i,c=!1;s.rank===3&&(c=!0,o=q(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(l.rank===4,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank ".concat(l.rank,".")),F(o.rank===4,()=>"Error in avgPoolGrad: input must be rank 4 but got rank ".concat(o.rank,"."));let u={dy:l,input:o},d={filterSize:n,strides:r,pad:a},h=U.runKernel(Hm,u,d);return c?q(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Ase=V({avgPoolGrad_:_se}),Rse={kernelName:Nu,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>Ase(e,r,a,i,s)}}},Dse={kernelName:_u,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:i,transposeB:s}=n;return!i&&!s?{a:()=>Qe(e,a,!1,!0),b:()=>Qe(r,e,!0,!1)}:!i&&s?{a:()=>Qe(e,a,!1,!1),b:()=>Qe(e,r,!0,!1)}:i&&!s?{a:()=>Qe(a,e,!1,!0),b:()=>Qe(r,e,!1,!1)}:{a:()=>Qe(a,e,!0,!0),b:()=>Qe(e,r,!0,!0)}}},Fse={kernelName:_h,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>$g(e,r,a)}}},Mse={kernelName:D3,gradFunc:(e,t,n)=>{let r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let l=a.length-1;l>=0;l--)if(a[l]===i[l])s[l]=1;else if(a[l]!==1)throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));let o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>Ee(e,o,!0)}}},Ose={kernelName:Au,gradFunc:e=>({x:()=>e.clone()})},Pse={kernelName:Ru,gradFunc:e=>({x:()=>ut(e)})},Lse={kernelName:Zo,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>Jn(di(Ks(r,a),nl(r,i)),e,ut(e))}}},zse={kernelName:Km,inputsToSave:["x"],gradFunc:GL.gradFunc},Bse={kernelName:Dh,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(o=>o.shape),{axis:a}=n,i=hi(a,t[0].shape)[0],s=r.map(o=>o[i]);return Xr(e,s,i).map(o=>()=>o)}},Wse={kernelName:Du,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:i,strides:s,pad:o,dataFormat:l}=n;return F(Oo(i),()=>"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(i,"'")),{x:()=>B$(r.shape,e,a,s,o,l),filter:()=>I2(r,e,a.shape,s,o,l)}}},Use={kernelName:Fu,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:i,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Dr(e,a,i,s,o,1,l),filter:()=>I2(e,r,a.shape,i,s,o,l)}}};function Vse(e,t,n,r,a){let i=e;e.rank===4&&(i=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;s.rank===4&&(s=q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),F(i.rank===5,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape ".concat(i.shape,".")),F(s.rank===5,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape ".concat(s.shape,".")),F(n.length===5,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got ".concat(n,".")),F(i.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must match input depth in filter (").concat(n[3],".")),F(s.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(s.shape[4],") must match output depth for filter (").concat(n[4],")."));let o={x:i,dy:s},l={strides:r,pad:a,filterShape:n};return U.runKernel(Fh,o,l)}var jse=V({conv3DBackpropFilter_:Vse}),Hse={kernelName:Mu,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i}=n;F(Oo(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(r,"'"));let[s,o]=t;return{x:()=>fP(s.shape,e,o,a,i),filter:()=>jse(s,e,o.shape,a,i)}}},Gse={kernelName:Ou,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(jt(cx(me(n,"float32"))),e)}}},qse={kernelName:Pu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(dx(me(n,"float32")),e)}}},Kse={kernelName:Lu,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{let o=wP([a],r.rank),l=Z0(e,a,i,!s);return o!=null&&(l=tt(l,o)),l}}}},Xse={kernelName:zu,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=r==null?[1,1]:r;F(Oo(o),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '".concat(o,"'"));let[l,c]=t;return F(l.rank===4,()=>"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ".concat(l.rank,".")),F(c.rank===4,()=>"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ".concat(c.rank,".")),F(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input channels (".concat(l.shape[3],") must match the inChannels dimension in filter ").concat(c.shape[2],".")),F(ms(a,o),()=>"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ".concat(a," and dilations '").concat(o,"'.")),Br("depthwiseConv2d",i,s),{x:()=>uL(l.shape,e,c,a,i,o,s),filter:()=>lL(l,e,c.shape,a,i,o,s)}}},Yse={kernelName:Bu,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,i={x:r,filter:a,dy:e},s={x:r,filter:a,dy:e};return{x:()=>U.runKernel(Jd,i,n),filter:()=>U.runKernel(Zd,s,n)}}},Jse={kernelName:Uu,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>U.runKernel(zh,r)}}},Zse={kernelName:Vu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=G(Fr(jt(Et(n))),2/Math.sqrt(Math.PI));return{x:()=>G(e,r)}}},Qse={kernelName:ju,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,n)}}},eoe={kernelName:Wh,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>q(e,n.shape)}}},toe={kernelName:Hu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,Fr(n))}}},noe={kernelName:Gu,gradFunc:e=>({x:()=>ut(e)})},roe={kernelName:qu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=Ce(e,me(r,"float32")),s=Tn(n.shape,a);return s.length>0?q(Ee(i,s),n.shape):i},b:()=>{let i=G(e,me(n,"float32")),s=Tn(r.shape,a);s.length>0&&(i=q(Ee(i,s),r.shape));let o=Et(r);return jt(Ce(i,me(o,"float32")))}}}},aoe={kernelName:Ku,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,i,s,o]=t,l=o==null?Me(1):o,c=Tn(i.shape,a.shape),u=[];if(i.rank===1){for(let m=0;m<a.shape.length-1;++m)u.push(a.shape[m]);u.push(1)}let d=Se(a,i),h=G(e,l),p=lx(ie(s,Me(r))),f=G(G(G(p,p),p),Me(-.5));return{x:()=>i.rank===1?q(G(G(e,da(q(p,[1,1,1,i.shape[0]]),u)),l),a.shape):q(G(G(e,p),l),a.shape),mean:()=>{let m=G(G(p,Me(-1)),h);return i.rank===1&&(m=Ee(m,c)),q(m,i.shape)},variance:()=>{let m=G(G(f,d),h);return i.rank===1&&(m=Ee(m,c)),q(m,i.shape)},scale:()=>{let m=G(d,p),g=G(e,m);return i.rank===1&&(g=Ee(g,c)),q(g,i.shape)},offset:()=>{let m=e;return i.rank===1&&(m=Ee(m,c)),q(m,i.shape)}}}},ioe={kernelName:Vh,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:i}=n,s=hi(i,r.shape)[0];return{x:()=>{let o=r.shape,l=a.size,c=o.slice(0,s),u=c.length,d=o.slice(i,o.length).slice(1),h=d.length,p=zA(0,u),f=zA(u+1,u+1+h),m=BA([c,[l],d]),g=q(e,m),b=q(a,[l]),y=BA([[u],p,f]),v=tt(g,y),x=vx(v,b,r.shape[s]),w=X$(y);return x=tt(x,w),x},indices:()=>a}}};function zA(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function BA(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var soe={kernelName:Xu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>ut(n),b:()=>ut(r)}}},ooe={kernelName:Yu,gradFunc:e=>({x:()=>me(e,"float32")})},loe={kernelName:Ju,gradFunc:e=>({x:()=>ut(e)})},uoe={kernelName:Zu,gradFunc:e=>({x:()=>ut(e)})},coe={kernelName:Qu,gradFunc:e=>({x:()=>ut(e)})},doe={kernelName:ec,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,i=Wr(r,0);return{x:()=>Jn(i,e,G(e,a))}}},hoe={kernelName:nc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,ie(n,1))}}},poe={kernelName:tc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,me(n,"float32"))}}},foe={kernelName:M3,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let i=Fr(r);return Se(e,G(Ee(e,a,!0),i))}}}};function moe(e,t,n,r=5,a=1,i=1,s=.5){let o={x:e,y:t,dy:n},l={depthRadius:r,bias:a,alpha:i,beta:s};return U.runKernel(Zh,o,l)}var goe=V({localResponseNormalizationBackprop_:moe}),boe={kernelName:rc,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:i,bias:s,alpha:o,beta:l}=n;return{x:()=>goe(r,a,e,i,s,o,l)}}};function qL(e,t,n,r){return t.rank<n.rank&&(t=q(t,su(t.shape,r))),e.rank<n.rank&&(e=q(e,su(e.shape,r))),{x:()=>G(e,me(va(n,t),e.dtype))}}var WA={kernelName:ac,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:a}=r,i=t[0],s=t[1],o=hi(a,i.shape),l=qL(e,s,i,o);return{x:()=>l.x()}}},yoe={kernelName:ic,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>G(e,me(Ks(n,r),"float32")),b:()=>G(e,me(th(n,r),"float32"))}}};function voe(e,t,n,r,a,i,s){let o=R(e,"dy","maxPool3dGrad"),l=R(t,"input","maxPool3dGrad"),c=R(n,"output","maxPool3dGrad"),u=o,d=l,h=c,p=!1;l.rank===4&&(p=!0,u=q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=q(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=q(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),F(u.rank===5,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank ".concat(u.rank,".")),F(d.rank===5,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank ".concat(d.rank,".")),F(h.rank===5,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank ".concat(h.rank,".")),Br("maxPool3dGrad",i,s);let f={dy:u,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:s},g=U.runKernel(Qm,f,m);return p?q(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var xoe=V({maxPool3dGrad_:voe}),woe={kernelName:Qh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>xoe(e,r,a,i,s,o,l)}}};function koe(e,t,n,r,a,i,s){let o=R(e,"dy","maxPoolGrad"),l=R(t,"input","maxPoolGrad"),c=R(n,"output","maxPoolGrad");F(l.rank===o.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy (").concat(o.rank,")")),F(o.rank===4,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank ".concat(o.rank,".")),F(l.rank===4,()=>"Error in maxPoolGrad: input must be rank 4 but got rank ".concat(l.rank,".")),Br("maxPoolGrad",i,s);let u={dy:o,input:l,output:c},d={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return U.runKernel(Zm,u,d)}var Soe=V({maxPoolGrad_:koe}),Ioe={kernelName:sc,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:s,pad:o}=n;return{x:()=>Soe(e,r,a,i,s,o)}}},$oe={kernelName:oc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=hi(a,r.shape),s=xP(r.shape,i)[1],o=Vt(s);return{x:()=>{let l=r.shape.slice();i.forEach(u=>{l[u]=1});let c=q(e,l);return Ce(G(c,ha(r.shape,"float32")),o)}}}},Coe={kernelName:lc,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:a}=r,[i,s]=t,o=hi(a,i.shape),l=qL(e,s,i,o);return{x:()=>l.x()}}},Toe={kernelName:uc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>G(e,me(nl(n,r),"float32")),b:()=>G(e,me(Wr(n,r),"float32"))}}},Eoe={kernelName:cc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>at(e,i,r.shape)}}},Noe={kernelName:dc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=Tn(n.shape,a);return i.length>0?q(Ee(e,i),n.shape):e},b:()=>{let i=G(e,jt(Np(Ce(n,r)))),s=Tn(r.shape,a);return s.length>0?q(Ee(i,s),r.shape):i}}}},_oe={kernelName:hc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=G(e,me(r,"float32")),s=Tn(n.shape,a);return s.length>0?q(Ee(i,s),n.shape):i},b:()=>{let i=G(e,me(n,"float32")),s=Tn(r.shape,a);return s.length>0?q(Ee(i,s),r.shape):i}}}},Aoe={kernelName:tp,gradFunc:e=>({x:()=>jt(e)})},Roe={kernelName:pc,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>sn(n.shape,"float32")}}},Doe={kernelName:sp,gradFunc:e=>({x:()=>ut(e)})},Foe={kernelName:op,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return fn(e,r).map(a=>()=>a)}},UA={kernelName:fc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>at(e,i,r.shape)}}},Moe={kernelName:mc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,i=n,s=r,o=At(i.shape,s.shape);return{a:()=>{let l=me(s,"float32"),c=G(e,G(l,Us(i,Se(l,Me(1))))),u=Tn(i.shape,o);return u.length>0&&(c=Ee(c,u)),q(c,i.shape)},b:()=>{let l=Wr(i,0),c=Jn(l,xa(i),ut(i)),u=G(e,G(a,c)),d=Tn(s.shape,o);return d.length>0&&(u=Ee(u,d)),q(u,s.shape)}}}},Ooe={kernelName:gc,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=Wr(n,0);return{x:()=>Jn(a,e,G(e,r)),alpha:()=>{let i=Jn(a,ut(e),G(e,n)),s=Tn(r.shape,e.shape);return s.length>0&&(i=Ee(i,s)),q(i,r.shape)}}}};function Poe(e,t,n){let r=e.shape.slice();r[n]=1;let a=q(t,r),i=vm(e,n,!0,!1),s=vm(e,n,!0,!0),o=G(i,s);return G(a,o)}function Loe(e,t,n){let r=e.shape.length,a=r-n.length,i=E.getAxesPermutation(n,r),s=e;i!=null&&(s=tt(e,i));let o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);o.push(l);let c=s.reshape(o),u=Poe(c,t,a);if(u=u.reshape(s.shape),i!=null){let d=E.getUndoAxesPermutation(i);u=tt(u,d)}return u}var zoe={kernelName:bc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=[];return a==null?i=r.shape.map((s,o)=>o):typeof a=="number"?i=[a]:i=a,{x:()=>Loe(r,e,i)}}},Boe={kernelName:Wu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=Ce(e,me(r,"float32")),s=Tn(n.shape,a);return s.length>0?q(Ee(i,s),n.shape):i},b:()=>{let i=G(e,me(n,"float32")),s=Tn(r.shape,a);s.length>0&&(i=q(Ee(i,s),r.shape));let o=Et(r);return jt(Ce(i,me(o,"float32")))}}}},Woe={kernelName:yc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,jt(Et(n)))}}},Uoe={kernelName:kc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=G(nl(n,6),Uc(n));return{x:()=>G(e,me(r,"float32"))}}},Voe={kernelName:vc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,me(Uc(n),"float32"))}}},joe={kernelName:lp,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>q(e,n.shape)}}},Hoe={kernelName:wc,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>U.runKernel(cp,a,n)}}},Goe={kernelName:xc,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>U.runKernel(up,a,n)}}},qoe={kernelName:Sc,gradFunc:(e,t,n)=>{let{dims:r}=n,a=hi(r,e.shape);return{x:()=>Va(e,a)}}},Koe={kernelName:Ic,gradFunc:e=>({x:()=>ut(e)})},Xoe={kernelName:$c,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>jt(Ce(e,G(Us(n,1.5),2)))}}},Yoe={kernelName:fp,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>me(ut(n),"float32"),t:()=>G(e,me(n,e.dtype)),e:()=>G(e,me(Sg(n),e.dtype))}}},Joe={kernelName:Cc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Wr(n,Me(0)),a=Me(VL),i=Me(jL),s=G(e,i),o=G(G(e,a),Fr(me(n,"float32")));return Jn(r,s,o)}}}},Zoe={kernelName:_c,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,G(n,Se(Me(1),n)))}}},Qoe={kernelName:Nc,gradFunc:e=>({x:()=>ut(e)})},ele={kernelName:Tc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(vg(me(n,"float32")),e)}}},tle={kernelName:Ec,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(J0(me(n,"float32")),e)}}},nle={kernelName:mp,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:i}=n,s=r.shape,[o,l]=WL(r,a,i),c=[];for(let u=0;u<e.rank;u++)c.push([o[u],s[u]-o[u]-l[u]]);return{x:()=>Ui(e,c)}}},rle={kernelName:Fc,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,i=!0,s=G(e,r);return{logits:()=>Se(s,G(Ee(s,[a],i),r))}}},ale={kernelName:Ac,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,li(n))}}},VA={kernelName:gp,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>yg(e,r,a)}}},jA={kernelName:bp,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>_t(e,r)}}},ile={kernelName:Rc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,G(lr(me(n,"float32")),2))}}},sle={kernelName:ig,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(e,G(me(n,"float32"),2))}}},ole={kernelName:Mc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=Me(2);return{a:()=>G(e,G(a,Se(n,r))),b:()=>G(e,G(a,Se(r,n)))}}},lle={kernelName:el,gradFunc:e=>({x:()=>ut(e)})},ule={kernelName:Oc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=At(n.shape,r.shape);return{a:()=>{let i=e,s=Tn(n.shape,a);return s.length>0&&(i=Ee(i,s)),q(i,n.shape)},b:()=>{let i=e,s=Tn(r.shape,a);return s.length>0&&(i=Ee(i,s)),q(jt(i),r.shape)}}}},cle={kernelName:Dc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:i}=n;hi(i,r.shape).forEach(l=>{a[l]=1});let s=q(e,a),o=G(s,ha(r.shape,"float32"));return{x:()=>o}}},dle={kernelName:Pc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ce(e,Et(vg(n)))}}},hle={kernelName:Lc,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>G(Se(Me(1),Et(n)),e)}}},ple={kernelName:Qo,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n;return{x:()=>{let i=ut(r);if(r.rank===1)for(let s=0;s<a[0];++s)i=ie(i,at(e,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<a[0];++s)for(let o=0;o<a[1];++o)i=ie(i,at(e,[s*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<a[0];++s)for(let o=0;o<a[1];++o)for(let l=0;l<a[2];++l)i=ie(i,at(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<a[0];++s)for(let o=0;o<a[1];++o)for(let l=0;l<a[2];++l)for(let c=0;c<a[3];++c)i=ie(i,at(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error("Gradient for tile operation is not implemented for rank-".concat(r.rank," tensors yet."));return i}}}},fle={kernelName:Fs,gradFunc:(e,t,n)=>{let r=n,{perm:a}=r,i=X$(a);return{x:()=>tt(e,i)}}},mle={kernelName:Sp,gradFunc:(e,t,n)=>{let r=n,{axis:a}=r;return{value:()=>Dn(e,a)}}},gle={kernelName:dg,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ble(e,n)}}};function ble(e,t){let n=gs(t,ut(t)),r=_p(e,n),a=Ks(t,Me(0,"int32")),i=r.rank-a.rank;for(let o=0;o<i;++o)a=rr(a,o+1);a=di(a,ha(r.shape,"bool"));let s=ut(r);return Jn(a,r,s)}var yle={kernelName:Ip,gradFunc:e=>({x:()=>ut(e)})},vle=[GL,gse,bse,yse,vse,xse,wse,kse,Sse,Ise,$se,Cse,Nse,Rse,Dse,Fse,Mse,Ose,Pse,Lse,zse,Bse,Use,Wse,Hse,Gse,qse,Kse,Xse,Yse,Boe,Jse,Zse,Qse,eoe,toe,roe,noe,aoe,ioe,soe,ooe,loe,uoe,coe,doe,hoe,poe,foe,boe,WA,WA,yoe,woe,Ioe,$oe,Coe,Toe,Eoe,Noe,_oe,Aoe,Roe,Doe,Foe,UA,UA,Moe,Ooe,zoe,Woe,Uoe,Voe,joe,Hoe,Goe,qoe,Koe,Xoe,Yoe,Joe,Zoe,Qoe,ele,tle,nle,rle,ale,VA,VA,jA,jA,ile,ole,sle,lle,ule,cle,dle,hle,ple,fle,mle,gle,yle];for(let e of vle)O3(e);se().prototype.abs=function(){return this.throwIfDisposed(),kn(this)};se().prototype.acos=function(){return this.throwIfDisposed(),w$(this)};se().prototype.acosh=function(){return this.throwIfDisposed(),k$(this)};se().prototype.add=function(e){return this.throwIfDisposed(),ie(this,e)};se().prototype.all=function(e,t){return this.throwIfDisposed(),K0(this,e,t)};se().prototype.any=function(e,t){return this.throwIfDisposed(),gm(this,e,t)};se().prototype.argMax=function(e){return this.throwIfDisposed(),ru(this,e)};se().prototype.argMin=function(e){return this.throwIfDisposed(),S$(this,e)};se().prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,()=>"The array must have only 1 element."),q(this,[])};se().prototype.asType=function(e){return this.throwIfDisposed(),me(this,e)};se().prototype.as1D=function(){return this.throwIfDisposed(),q(this,[this.size])};se().prototype.as2D=function(e,t){return this.throwIfDisposed(),q(this,[e,t])};se().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),q(this,[e,t,n])};se().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),q(this,[e,t,n,r])};se().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),q(this,[e,t,n,r,a])};se().prototype.asin=function(){return this.throwIfDisposed(),I$(this)};se().prototype.asinh=function(){return this.throwIfDisposed(),$$(this)};se().prototype.atan=function(){return this.throwIfDisposed(),C$(this)};se().prototype.atan2=function(e){return this.throwIfDisposed(),T$(this,e)};se().prototype.atanh=function(){return this.throwIfDisposed(),E$(this)};se().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),qs(this,e,t,n,r)};se().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),yg(this,e,t)};se().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),zc(this,e,t,n,r,a)};se().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Pl(this,e)};se().prototype.cast=function(e){return this.throwIfDisposed(),me(this,e)};se().prototype.ceil=function(){return this.throwIfDisposed(),M$(this)};se().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),xr(this,e,t)};se().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof qe&&(e=[e]),_t([this,...e],t)};se().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),X0(this,e,t,n,r,a,i)};se().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Y0(this,e,t,n,r,a)};se().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Dr(this,e,t,n,r,a,i)};se().prototype.cos=function(){return this.throwIfDisposed(),vg(this)};se().prototype.cosh=function(){return this.throwIfDisposed(),J0(this)};se().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),vm(this,e,t,n)};se().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Z0(this,e,t,n)};se().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),V$(this,e,t)};se().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Bc(this,e,t,n,r,a,i)};se().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),j$(this,e,t,n,r,a)};se().prototype.divNoNan=function(e){return this.throwIfDisposed(),H$(this,e)};se().prototype.div=function(e){return this.throwIfDisposed(),Ce(this,e)};se().prototype.dot=function(e){return this.throwIfDisposed(),G$(this,e)};se().prototype.elu=function(){return this.throwIfDisposed(),Tp(this)};se().prototype.equal=function(e){return this.throwIfDisposed(),va(this,e)};se().prototype.erf=function(){return this.throwIfDisposed(),q$(this)};se().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Y$(this,e,t)};se().prototype.exp=function(){return this.throwIfDisposed(),Fr(this)};se().prototype.expandDims=function(e){return this.throwIfDisposed(),rr(this,e)};se().prototype.expm1=function(){return this.throwIfDisposed(),J$(this)};se().prototype.fft=function(){return this.throwIfDisposed(),Eg(this)};se().prototype.flatten=function(){return this.throwIfDisposed(),q(this,[this.size])};se().prototype.floor=function(){return this.throwIfDisposed(),Np(this)};se().prototype.floorDiv=function(e){return this.throwIfDisposed(),q0(this,e)};se().prototype.gather=function(e,t,n){return this.throwIfDisposed(),_p(this,e,t,n)};se().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ks(this,e)};se().prototype.greater=function(e){return this.throwIfDisposed(),Wr(this,e)};se().prototype.ifft=function(){return this.throwIfDisposed(),ih(this)};se().prototype.irfft=function(){return this.throwIfDisposed(),px(this)};se().prototype.isFinite=function(){return this.throwIfDisposed(),Z$(this)};se().prototype.isInf=function(){return this.throwIfDisposed(),Q$(this)};se().prototype.isNaN=function(){return this.throwIfDisposed(),e2(this)};se().prototype.leakyRelu=function(e){return this.throwIfDisposed(),wg(this,e)};se().prototype.lessEqual=function(e){return this.throwIfDisposed(),nl(this,e)};se().prototype.less=function(e){return this.throwIfDisposed(),th(this,e)};se().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),t2(this,e,t,n,r)};se().prototype.logSigmoid=function(){return this.throwIfDisposed(),n2(this)};se().prototype.logSoftmax=function(e){return this.throwIfDisposed(),tx(this,e)};se().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),nx(this,e,t)};se().prototype.log=function(){return this.throwIfDisposed(),xa(this)};se().prototype.log1p=function(){return this.throwIfDisposed(),kg(this)};se().prototype.logicalAnd=function(e){return this.throwIfDisposed(),di(this,e)};se().prototype.logicalNot=function(){return this.throwIfDisposed(),Sg(this)};se().prototype.logicalOr=function(e){return this.throwIfDisposed(),rx(this,e)};se().prototype.logicalXor=function(e){return this.throwIfDisposed(),r2(this,e)};se().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Qe(this,e,t,n)};se().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Hn(this,e,t,n,r)};se().prototype.max=function(e,t){return this.throwIfDisposed(),Ba(this,e,t)};se().prototype.maximum=function(e){return this.throwIfDisposed(),gs(this,e)};se().prototype.mean=function(e,t){return this.throwIfDisposed(),an(this,e,t)};se().prototype.min=function(e,t){return this.throwIfDisposed(),eh(this,e,t)};se().prototype.minimum=function(e){return this.throwIfDisposed(),Po(this,e)};se().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),i2(this,e,t)};se().prototype.mod=function(e){return this.throwIfDisposed(),s2(this,e)};se().prototype.mul=function(e){return this.throwIfDisposed(),G(this,e)};se().prototype.neg=function(){return this.throwIfDisposed(),jt(this)};se().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Ep(this,e,t,n)};se().prototype.notEqual=function(e){return this.throwIfDisposed(),ou(this,e)};se().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),nh(this,e,t,n)};se().prototype.onesLike=function(){return this.throwIfDisposed(),wa(this)};se().prototype.pad=function(e,t){return this.throwIfDisposed(),Ui(this,e,t)};se().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),o2(this,e,t,n,r,a,i)};se().prototype.pow=function(e){return this.throwIfDisposed(),Us(this,e)};se().prototype.prelu=function(e){return this.throwIfDisposed(),Cg(this,e)};se().prototype.prod=function(e,t){return this.throwIfDisposed(),l2(this,e,t)};se().prototype.reciprocal=function(){return this.throwIfDisposed(),p2(this)};se().prototype.relu=function(){return this.throwIfDisposed(),It(this)};se().prototype.relu6=function(){return this.throwIfDisposed(),sx(this)};se().prototype.reshapeAs=function(e){return this.throwIfDisposed(),q(this,e.shape)};se().prototype.reshape=function(e){return this.throwIfDisposed(),q(this,e)};se().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),mL(this,e,t,n)};se().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),gL(this,e,t,n)};se().prototype.reverse=function(e){return this.throwIfDisposed(),Va(this,e)};se().prototype.rfft=function(){return this.throwIfDisposed(),Ng(this)};se().prototype.round=function(){return this.throwIfDisposed(),ox(this)};se().prototype.rsqrt=function(){return this.throwIfDisposed(),lx(this)};se().prototype.selu=function(){return this.throwIfDisposed(),ux(this)};se().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ap(this,e,t,n,r,a,i)};se().prototype.sigmoid=function(){return this.throwIfDisposed(),li(this)};se().prototype.sign=function(){return this.throwIfDisposed(),f2(this)};se().prototype.sin=function(){return this.throwIfDisposed(),cx(this)};se().prototype.sinh=function(){return this.throwIfDisposed(),dx(this)};se().prototype.slice=function(e,t){return this.throwIfDisposed(),at(this,e,t)};se().prototype.softmax=function(e){return this.throwIfDisposed(),al(this,e)};se().prototype.softplus=function(){return this.throwIfDisposed(),Wc(this)};se().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),$g(this,e,t)};se().prototype.split=function(e,t){return this.throwIfDisposed(),Xr(this,e,t)};se().prototype.sqrt=function(){return this.throwIfDisposed(),lr(this)};se().prototype.square=function(){return this.throwIfDisposed(),Et(this)};se().prototype.squaredDifference=function(e){return this.throwIfDisposed(),fx(this,e)};se().prototype.squeeze=function(e){return this.throwIfDisposed(),il(this,e)};se().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof qe?[this,e]:[this,...e];return Dn(n,t)};se().prototype.step=function(e){return this.throwIfDisposed(),Uc(this,e)};se().prototype.stridedSlice=function(e,t,n,r,a,i,s,o){return this.throwIfDisposed(),m2(this,e,t,n,r,a,i,s,o)};se().prototype.sub=function(e){return this.throwIfDisposed(),Se(this,e)};se().prototype.sum=function(e,t){return this.throwIfDisposed(),Ee(this,e,t)};se().prototype.tan=function(){return this.throwIfDisposed(),g2(this)};se().prototype.tanh=function(){return this.throwIfDisposed(),iu(this)};se().prototype.tile=function(e){return this.throwIfDisposed(),da(this,e)};se().prototype.toBool=function(){return this.throwIfDisposed(),me(this,"bool")};se().prototype.toFloat=function(){return this.throwIfDisposed(),me(this,"float32")};se().prototype.toInt=function(){return this.throwIfDisposed(),me(this,"int32")};se().prototype.topk=function(e,t){return this.throwIfDisposed(),y2(this,e,t)};se().prototype.transpose=function(e){return this.throwIfDisposed(),tt(this,e)};se().prototype.unique=function(e){return this.throwIfDisposed(),v2(this,e)};se().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),vx(this,e,t)};se().prototype.unstack=function(e){return this.throwIfDisposed(),fn(this,e)};se().prototype.where=function(e,t){return this.throwIfDisposed(),Jn(e,this,t)};se().prototype.zerosLike=function(){return this.throwIfDisposed(),ut(this)};var Ss=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ss.prototype)}},Ti=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ti.prototype)}},Y=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Y.prototype)}},et=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,et.prototype)}},KL=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,KL.prototype)}},XL=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}};function uu(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}else{let n=new Array(t);return n.fill(e),n}}function ns(e,t){if(!e)throw new KL(t)}function HA(e,t){let n=0;for(let r of e)r===t&&n++;return n}function qr(e){return e.length===1?e[0]:e}function Gt(e){return Array.isArray(e)?e:[e]}function Is(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function $l(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}var Ja={};function L2(e){if(e==null)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function jk(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>jk(t));else{let t=Object.keys(e);for(let n of t){let r=e[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?e[n]=r.value:jk(r))}}}function Ag(e,t={},n={},r="object",a=!1){if(typeof e=="string"){let i=e,s;if(i in n)s=n[i];else if(i in Ja)s=Ja[i];else if(s=t[i],s==null)throw new Y("Unknown ".concat(r,": ").concat(e,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));return s}else{let i=e;if(i.className==null||i.config==null)throw new Y("".concat(r,": Improper config format: ").concat(JSON.stringify(i),".\n'className' and 'config' must set."));let s=i.className,o,l;if(s in n?[o,l]=n[s]:s in Ja?[o,l]=Ja.className:s in t&&([o,l]=t[s]),o==null)throw new Y("Unknown ".concat(r,": ").concat(s,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));if(l!=null){let c={};for(let p of Object.keys(Ja))c[p]=Ja[p];for(let p of Object.keys(n))c[p]=n[p];let u=i.config;u.customObjects=c;let d=Object.assign({},Ja);for(let p of Object.keys(n))Ja[p]=n[p];jk(i.config);let h=l(o,i.config,n,a);return Ja=Object.assign({},d),h}else{let c=Object.assign({},Ja);for(let d of Object.keys(n))Ja[d]=n[d];let u=new o(i.config);return Ja=Object.assign({},c),u}}}function xle(e,t){return e<t?-1:e>t?1:0}function Ab(e,t){return-1*xle(e,t)}function To(e){if(e==null)return e;let t=[];for(let n of e)t.indexOf(n)===-1&&t.push(n);return t}function wle(e){if(e==null)throw new Y("Invalid value in obj: ".concat(JSON.stringify(e)));for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function Vc(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new Y("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function z2(e,t,n=0,r=1/0){return ns(n>=0),ns(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(a=>typeof a===t)}function Yn(e,t){Array.isArray(e)?(k.assert(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((n,r)=>Yn(n,"element ".concat(r+1," of ").concat(t)))):k.assert(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ").concat(YL(e),"."))}function YL(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>YL(t)).join(",")+"]":typeof e=="string"?'"'.concat(e,'"'):"".concat(e)}function kle(e,t,n){let r=n!=null?n():k.now(),a;return(...i)=>{let s=n!=null?n():k.now();return s-r<t||(r=s,a=e(...i)),a}}function JL(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}var Sle=0;function ZL(){return Sle++}var Rb={};function Cx(e=""){return e in Rb||(Rb[e]=0),Rb[e]+=1,e+Rb[e].toString()}var Ile=["channelsFirst","channelsLast"],$le=["nearest","bilinear"],Cle=["valid","same","causal"],Tle=["max","avg"],Ele=["sum","mul","concat","ave"],Qc=new Map;function gn(e){Vc(Ile,"DataFormat",e)}function Nle(e){Vc($le,"InterpolationFormat",e)}function Xa(e){Vc(Cle,"PaddingMode",e)}function QL(e){Vc(Tle,"PoolMode",e)}var zf=[],GA="/";function Ll(e,t){zf.push(e);try{let n=t();return zf.pop(),n}catch(n){throw zf.pop(),n}}function _le(){return zf.length===0?"":zf.join(GA)+GA}function ez(e){if(!nz(e))throw new Error("Not a valid tensor name: '"+e+"'");return _le()+e}function tz(e){if(!nz(e))throw new Error("Not a valid tensor name: '"+e+"'");Qc.has(e)||Qc.set(e,0);let t=Qc.get(e);if(Qc.set(e,Qc.get(e)+1),t>0){let n="".concat(e,"_").concat(t);return Qc.set(n,1),n}else return e}var Ale=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function nz(e){return!!e.match(Ale)}function Rle(e){return e===parseInt(e.toString(),10)}function Eo(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function lh(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function zo(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function zi(e,t){if(t<e)throw new Y("end (".concat(t,") < begin (").concat(e,") is forbidden."));let n=[];for(let r=e;r<t;++r)n.push(r);return n}var e1;function Rn(){return e1==null&&(e1=sP().epsilon()),e1}function Bi(){return"channelsLast"}function Vs(e,t){return me(e,t)}function Rg(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),q(e,n)}function Dle(e,t){return X(()=>{if(e.shape.length!==2)throw new Y("repeat() expects a rank-2 tensor, but received a rank-".concat(e.shape.length," tensor."));let n=Rg(e,1);return Hk(n,[1,t,1])})}function Fle(e){let t=[Eo(e.shape)];return q(e,t)}function Mle(e){if(e.rank<=1)throw new Y("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));let t=[e.shape[0],Eo(e.shape,1)];return q(e,t)}function zl(e,t,n){return X(()=>{switch(e.rank){case 1:return Tg(e,t,n);case 2:return hx(e,[t,0],[n,e.shape[1]]);case 3:return Rp(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return ah(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return at(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return at(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Y("sliceAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function t1(e,t,n){return X(()=>{switch(e.rank){case 1:return Tg(e,t,n);case 2:return hx(e,[0,t],[e.shape[0],n]);case 3:return Rp(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return ah(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Y("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function Db(e,t,n,r){return X(()=>{switch(e.rank){case 1:return Tg(e,t,n);case 2:switch(r){case 1:return zl(e,t,n);case 2:return t1(e,t,n);default:throw new Y("The axis is not within the rank of the tensor ".concat(r))}case 3:switch(r){case 1:return zl(e,t,n);case 2:return Rp(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return t1(e,t,n);default:throw new Y("The axis is not within the rank of the tensor ".concat(r))}case 4:switch(r){case 1:return zl(e,t,n);case 2:return ah(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return ah(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return t1(e,t,n);default:throw new Y("The axis is not within the rank of the tensor ".concat(r))}default:throw new Y("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function B2(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),_t(e,t)}function qA(e,t){switch(e.rank){case 1:return O$([e,t]);case 2:return P$([e,t],0);case 3:return L$([e,t],0);case 4:return z$([e,t],0);default:throw new Y("concatAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}function Hk(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Y("The length of input n (".concat(t.length,") does not match the number of dimensions in input x (").concat(e.rank,")"));return da(e,t)}function Tx(e,t=0,n=1,r,a){return ix(e,t,n,r,a)}function cs(e,t,n,r){if(e.rank<2||t.rank<2)throw new et("dot requires both inputs to be rank >= 2 but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){let a=e.shape.slice(-1)[0],i=t.shape.slice(-2)[0];if(a!==i)throw new et("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ".concat(e.shape," and  y shape = ").concat(t.shape))}if(e.rank===2&&t.rank===2)return sh.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Gk(e.rank,r,Bi()):null,activation:n});{let a=e.shape.slice(),i=a.pop();e=q(e,[-1,i]);let s=t.shape.slice(),o=s.pop(),l=s.pop(),c=[...s,o],u=Array.from({length:t.rank},(f,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=q(tt(t,u),[l,-1]);let d=[...a,...c],h=!1,p=!1;return q(sh.matMul({a:e,b:t,transposeA:h,transposeB:p,bias:r?Gk(e.rank,r,Bi()):null,activation:n}),d)}}function rz(e,t,n){return X(()=>(Array.isArray(t)?t=St(t,"int32"):t=me(t,"int32"),_p(e,t,n)))}function Dg(e){return G(e,e)}function Gk(e,t,n){let r=t.shape;if(t.rank!==1&&t.rank!==e)throw new Y("Unexpected bias dimensions: ".concat(t.rank,"; expected it to be 1 or ").concat(e));if(e===5){if(n==="channelsFirst")return r.length===1?q(t,[1,r[0],1,1,1]):q(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?q(t,[1,1,1,1,r[0]]):q(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?q(t,[1,r[0],1,1]):q(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?q(t,[1,1,1,r[0]]):q(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?q(t,[1,r[0],1]):q(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?q(t,[1,1,r[0]]):q(t,[1].concat(r))}else if(e<3)return t;throw new Y("Unsupported input rank by biasAdd: ".concat(t.rank))}function Vi(e,t,n){return X(()=>(n==null&&(n=Bi()),gn(n),ie(e,Gk(e.rank,t,n))))}function Ole(e,t=1){if(t!==1)throw new et("Support for alpha values other than 1 (".concat(t,") is not implemented yet."));return Tp(e)}function Ple(e){return X(()=>Ce(e,ie(kn(e),1)))}function az(e,t,n,r){return X(()=>k2(e,t,n,r))}function Lle(e){return X(()=>{let t=ie(.5,G(.2,e));return xr(t,0,1)})}function Fg(e,t,n=!1){return n?e():t()}var zle=["fanIn","fanOut","fanAvg"],Ble=["normal","uniform","truncatedNormal"];function Wle(e){Vc(zle,"FanMode",e)}function Ule(e){Vc(Ble,"Distribution",e)}var pi=class extends ue.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},W2=class extends pi{apply(e,t){return sn(e,t)}};W2.className="Zeros";ue.registerClass(W2);var Ex=class extends pi{apply(e,t){return ha(e,t)}};Ex.className="Ones";ue.registerClass(Ex);var U2=class extends pi{constructor(e){if(super(),typeof e!="object")throw new Y("Expected argument of type ConstantConfig but got ".concat(e));if(e.value===void 0)throw new Y("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return X(()=>G(Me(this.value),ha(e,t)))}getConfig(){return{value:this.value}}};U2.className="Constant";ue.registerClass(U2);var V2=class extends pi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return rl(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};V2.className="RandomUniform";ue.registerClass(V2);var j2=class extends pi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new et("randomNormal does not support dType ".concat(t,"."));return Tx(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};j2.className="RandomNormal";ue.registerClass(j2);var H2=class extends pi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new et("truncatedNormal does not support dType ".concat(t,"."));return yx(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};H2.className="TruncatedNormal";ue.registerClass(H2);var G2=class extends pi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return X(()=>{if(e.length!==2||e[0]!==e[1])throw new Y("Identity matrix initializer can only be used for 2D square matrices.");return G(this.gain,Q0(e[0]))})}getConfig(){return{gain:this.gain}}};G2.className="Identity";ue.registerClass(G2);function Vle(e,t="channelsLast"){let n,r;if(gn(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){let a=Eo(e,2);n=e[1]*a,r=e[0]*a}else if(t==="channelsLast"){let a=Eo(e,0,e.length-2);n=e[e.length-2]*a,r=e[e.length-1]*a}}else{let a=Eo(e);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}var Zr=class extends pi{constructor(e){if(super(),e.scale<0)throw new Y("scale must be a positive float. Got: ".concat(e.scale));this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Wle(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Ule(this.distribution),this.seed=e.seed}apply(e,t){let n=Vle(e),r=n[0],a=n[1],i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,r):this.mode==="fanOut"?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),this.distribution==="normal"){let s=Math.sqrt(i);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new et("".concat(this.getClassName()," does not support dType ").concat(t,"."));return yx(e,0,s,t,this.seed)}else{let s=Math.sqrt(3*i);return rl(e,-s,s,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Zr.className="VarianceScaling";ue.registerClass(Zr);var Nx=class extends Zr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Zr.className}};Nx.className="GlorotUniform";ue.registerClass(Nx);var _x=class extends Zr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Zr.className}};_x.className="GlorotNormal";ue.registerClass(_x);var Ax=class extends Zr{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Zr.className}};Ax.className="HeNormal";ue.registerClass(Ax);var Rx=class extends Zr{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Zr.className}};Rx.className="HeUniform";ue.registerClass(Rx);var Dx=class extends Zr{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Zr.className}};Dx.className="LeCunNormal";ue.registerClass(Dx);var Fx=class extends Zr{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Zr.className}};Fx.className="LeCunUniform";ue.registerClass(Fx);var q2=class extends pi{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return X(()=>{if(e.length<2)throw new et("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError("Unsupported data type ".concat(t,"."));t=t;let n=k.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(a,") elements: Slowness may result."));let i=[Math.max(r,n),Math.min(r,n)],s=Tx(i,0,1,t,this.seed),o=C2.qr(s,!1),l=o[0],c=o[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return l=G(l,c.sign()),n<r&&(l=l.transpose()),G(Me(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}};q2.className="Orthogonal";ue.registerClass(q2);var KA={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function XA(e,t={}){return Ag(e,ue.SerializationMap.getMap().classNameMap,t,"initializer")}function on(e){return L2(e)}function Qt(e){if(typeof e=="string"){let t=e in KA?KA[e]:e;if(t==="GlorotNormal")return new _x;if(t==="GlorotUniform")return new Nx;if(t==="HeNormal")return new Ax;if(t==="HeUniform")return new Rx;if(t==="LeCunNormal")return new Dx;if(t==="LeCunUniform")return new Fx;{let n={};return n.className=t,n.config={},XA(n)}}else return e instanceof pi?e:XA(e)}function qk(e){return Array.isArray(e)&&Array.isArray(e[0])}function fv(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function Ue(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new Y("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function ft(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new Y("Expected exactly 1 Shape; got ".concat(e.length))}else return e}function mv(e){let t=0;for(let n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((r,a)=>r*a);return t}var YA="Variable",iz=class{constructor(e,t="float32",n=YA,r=!0,a=null){this.dtype=t==null?"float32":t,this.shape=e.shape,this.id=ZL(),n=n==null?YA:n,this.originalName=ez(n),this.name=tz(this.originalName),this.trainable_=r,this.constraint=a,this.val=x2(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),jle(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function jle(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function Kk(e){return e.map(t=>t.read())}function K2(e){e.forEach(t=>{t[0].write(t[1])})}var In=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},Ei=class{constructor(e,t,n,r,a,i,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=s,this.id=ZL(),i!=null&&(this.originalName=ez(i),this.name=tz(this.originalName)),this.rank=t.length}},Hle=0,Mx=class{constructor(e,t){this.callArgs=t,this.id=Hle++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)n!=null&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Gle=0,rt=class extends ue.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Gle++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let n=this.getClassName();t=Is(n)+"_"+Cx(n)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let n;if(e.batchInputShape!=null)n=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),n=[a].concat(e.inputShape)}this.batchInputShape=n;let r=e.dtype;r==null&&(r=e.inputDType),r==null&&(r="float32"),this.dtype=r}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Ti("The layer has never been called and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new Y("Asked to get ".concat(t," at node ").concat(e,", but the layer has only ").concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return qr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return qr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ss("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.'));if(this.inboundNodes.length===0)throw new Ss("Layer ".concat(this.name," is not connected, no input to return."));return qr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ss("Layer ".concat(this.name," has no inbound nodes."));if(this.inboundNodes.length>1)throw new Ss("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.'));return qr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=Gt(e),this.inputSpec==null||this.inputSpec.length===0)return;let t=Gt(this.inputSpec);if(e.length!==t.length)throw new Y("Layer ".concat(this.name," expects ").concat(t.length," inputs, but it received ").concat(e.length," input tensors. Input received: ").concat(e));for(let n=0;n<e.length;n++){let r=e[n],a=t[n];if(a==null)continue;let i=r.rank;if(a.ndim!=null&&i!==a.ndim)throw new Y("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected ndim=").concat(a.ndim,", found ndim=").concat(i));if(a.maxNDim!=null&&i>a.maxNDim)throw new Y("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected max_ndim=").concat(a.maxNDim,", found ndim=").concat(i));if(a.minNDim!=null&&i<a.minNDim)throw new Y("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected min_ndim=").concat(a.minNDim,", found ndim=").concat(i,"."));if(a.dtype!=null&&r.dtype!==a.dtype)throw new Y("Input ".concat(n," is incompatible with layer ").concat(this.name," : expected dtype=").concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){let s=r.shape;for(let o in a.axes){let l=Number(o),c=a.axes[o],u=l>=0?s[l]:s[s.length+l];if(c!=null&&[c,null].indexOf(u)===-1)throw new Y("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected axis ").concat(l," of input shape to have value ").concat(c," but got shape ").concat(s,"."))}}if(a.shape!=null)for(let s=0;s<a.shape.length;++s){let o=a.shape[s],l=r.shape[s];if(o!=null&&l!=null&&o!==l)throw new Y("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected shape=").concat(a.shape,", found shape=").concat(r.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=Gt(e),r=!0;for(let i of n)if(!(i instanceof Ei)){r=!1;break}let a=!0;for(let i of n)if(i instanceof Ei){a=!1;break}if(r===a)throw new Y("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ll(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let i=[];for(let s of Gt(e))i.push(s.shape);this.build(qr(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let i=this.call(e,t),s=Gt(i),o=[];for(let l of s)n.indexOf(l)!==-1&&(l=l.clone()),o.push(l);if(i=qr(o),this.activityRegularizer!=null)throw new et("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{let i=qle(e),s=this.computeOutputShape(i),o,l=Kle(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),s!=null&&s.length>0&&Array.isArray(s[0])?o=s.map((c,u)=>new Ei(l,c,this,Gt(e),t,this.name,u)):o=new Ei(l,s,this,Gt(e),t,this.name),this.addInboundNode(e,o,null,null,i,s,t),this._refCount++,this.activityRegularizer!=null)throw new et("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: ".concat(JSON.stringify(e),") does not match that of the batchInputShape (").concat(JSON.stringify(this.batchInputShape),") of the layer ").concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{n!=null&&e[r]!=null&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor (".concat(JSON.stringify(e),") does not match the expectation of layer ").concat(this.name,": ").concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ss("The layer ".concat(this.name," has never been called and thus has no defined output shape."));let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);e.indexOf(n)===-1&&e.push(n)}if(e.length===1){let t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Ss("The layer ".concat(this.name,' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.'))}countParams(){if(!this.built)throw new Ti("You tried to call countParams() on ".concat(this.name,", but the layer is not built yet. Build it first by calling build(batchInputShape)."));return mv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Kk(e?this.trainableWeights:this.weights)}setWeights(e){X(()=>{let t=this.weights;if(t.length!==e.length)throw new Y('You called setWeights(weights) on layer "'.concat(this.name,'" with a weight list of length ').concat(e.length,", but the layer was expecting ").concat(t.length," weights. Provided weights: ").concat(e,"..."));if(t.length===0)return;let n=[],r=Kk(t);for(let a=0;a<r.length;++a){let i=r[a],s=t[a],o=e[a];if(!k.arraysEqual(i.shape,o.shape))throw new Y("Layer weight shape ".concat(i.shape," not compatible with provided weight shape ").concat(o.shape));n.push([s,o])}K2(n)})}addWeight(e,t,n,r,a,i,s,o){if(this._addedWeightNames.indexOf(e)!==-1)throw new Y("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),n==null&&(n="float32"),this.fastWeightInitDuringBuild&&(r=o!=null?o():Qt("zeros"));let l=r.apply(t,n),c=new iz(l,n,e,i,s);return l.dispose(),a!=null&&this.addLoss(()=>a.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Gt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(n=>{if(n!=null)throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."))});else throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."));return null}return t}addInboundNode(e,t,n,r,a,i,s=null){let o=Gt(e);t=Gt(t),n=Gt(n),r=Gt(r),a=fv(a),i=fv(i);let l=[],c=[],u=[];for(let d of o)l.push(d.sourceLayer),c.push(d.nodeIndex),u.push(d.tensorIndex);new Mx({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},s);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been built yet."));if(this._refCount===null)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used yet."));this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function qle(e){e=Gt(e);let t=[];for(let n of e)t.push(n.shape);return qr(t)}function Kle(e){return"float32"}function sz(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{let r=t.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{let a=[];for(let i=0;i<r.inboundLayers.length;i++){let s=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],c=sz(s,o,l);for(let u of c)a.indexOf(u)===-1&&a.push(u)}return a}}}var Fp=class extends rt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Cx("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Y("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new Y("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Y("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new Ei(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Mx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Y("Cannot pass any input to an InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};Fp.className="InputLayer";ue.registerClass(Fp);function oz(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new Y("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new Fp({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function Xle(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return me(t,e.dtype)}catch(n){throw new Y("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype of the key '").concat(e.name,"' (").concat(e.dtype,")."))}}var Dl=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Dl)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Xle(e,t),this.name2Id[e.name]=e.id,n!=null&&(this.id2Mask[e.id]=n);else throw new Y("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Ei){if(this.id2Value[e.id]==null)throw new Y("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}else{let t=this.name2Id[e];if(t==null)throw new Y("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof Ei){if(this.id2Value[e.id]==null)throw new Y("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}else{let t=this.name2Id[e];if(t==null)throw new Y("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&je(this.id2Mask)}},gv=new XL,bv=new XL;function Yle(e){gv!=null&&gv.setMaxEntries(e),bv!=null&&bv.setMaxEntries(e)}function yf(e,t,n,r){let a=n==null?!1:n.training,i=Array.isArray(e),s=i?e:[e],o=s.map(f=>f.name),l=[],c=t.names();for(let f of o)c.indexOf(f)!==-1?l.push(t.getValue(f)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u=o.join(",")+"|"+t.names().sort().join(","),d=gv.get(u),h;if(d==null){let f=Jle(s,t);d=f.sorted,h=f.recipientCounts,gv.put(u,d),bv.put(u,h)}h={},a||Object.assign(h,bv.get(u));let p=new Dl(t);for(let f=0;f<d.length;++f){if(r!=null){let A=hv().numTensors;A>r.maxNumTensors&&(r.maxNumTensors=A),A<r.minNumTensors&&(r.minNumTensors=A)}let m=d[f],g=m.sourceLayer;if(g instanceof Fp)continue;let b=[],y=[],v=[],x=!1;for(let A of m.inputs){let D=p.getValue(A),N=p.getMask(A);b.push(D),y.push(N),N!=null&&(x=!0),a||(h[A.name]--,h[A.name]===0&&!t.hasKey(A)&&o.indexOf(A.name)===-1&&!D.isDisposed&&A.sourceLayer.stateful!==!0&&v.push(D))}x&&(n=n||{},n.mask=y[0]);let w=Gt(g.apply(b,n)),$=null;g.supportsMasking&&($=g.computeMask(b,y));let C=Qle(m),T=Array.isArray(C)?C:[C];for(let A=0;A<T.length;++A){p.hasKey(T[A])||p.add(T[A],w[A],Array.isArray($)?$[0]:$);let D=o.indexOf(T[A].name);D!==-1&&(l[D]=w[A])}a||je(v)}return p.disposeMasks(),i?l:l[0]}function Jle(e,t){k.assert(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(e.length===1){let a=JA(e[0],t);n=a.sorted,r=a.recipientMap}else{let a=new Set;for(let i of e){let{sorted:s,recipientMap:o}=JA(i,t);for(let l of s)a.has(l.name)||(n.push(l),a.add(l.name));for(let l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:Zle(r)}}function Zle(e){let t={};for(let n in e)t[n]=e[n].size;return t}function JA(e,t){let n=new Set,r=[],a={};for(let o of t.names())n.add(o);let i=[],s=[];for(i.push(e);i.length>0;){let o=i[i.length-1];if(n.has(o.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),n.add(o.name),l&&s.pop();else{s.push(i.length-1);for(let c of o.inputs)a[c.name]==null&&(a[c.name]=new Set),a[c.name].add(o.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:a}}function Qle(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(let a of e.sourceLayer.inboundNodes[r].outputTensors)if(a.id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}var eue=Q();eue.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Yle);var lz={};He(lz,{maxNorm:()=>tue,minMaxNorm:()=>aue,nonNeg:()=>rue,unitNorm:()=>nue});function X2(e,t){return X(()=>lr(Ee(G(e,e),t,!0)))}var Mg=class extends ue.Serializable{getConfig(){return{}}},Y2=class extends Mg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return X(()=>{let t=X2(e,this.axis),n=xr(t,0,this.maxValue);return G(e,Ce(n,ie(Rn(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};Y2.className="MaxNorm";ue.registerClass(Y2);var J2=class extends Mg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return X(()=>Ce(e,ie(Rn(),X2(e,this.axis))))}getConfig(){return{axis:this.axis}}};J2.className="UnitNorm";ue.registerClass(J2);var Z2=class extends Mg{apply(e){return It(e)}};Z2.className="NonNeg";ue.registerClass(Z2);var Q2=class extends Mg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return X(()=>{let t=X2(e,this.axis),n=ie(G(this.rate,xr(t,this.minValue,this.maxValue)),G(1-this.rate,t));return G(e,Ce(n,ie(Rn(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};Q2.className="MinMaxNorm";ue.registerClass(Q2);var ZA={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Mn(e){return L2(e)}function QA(e,t={}){return Ag(e,ue.SerializationMap.getMap().classNameMap,t,"constraint")}function On(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in ZA?ZA[e]:e,config:{}};return QA(t)}else return e instanceof Mg?e:QA(e)}function tue(e){return new Y2(e)}function nue(e){return new J2(e)}function rue(){return new Z2}function aue(e){return new Q2(e)}var uz={};He(uz,{constant:()=>oue,glorotNormal:()=>fue,glorotUniform:()=>pue,heNormal:()=>mue,heUniform:()=>gue,identity:()=>due,leCunNormal:()=>bue,leCunUniform:()=>yue,ones:()=>sue,orthogonal:()=>vue,randomNormal:()=>uue,randomUniform:()=>lue,truncatedNormal:()=>cue,varianceScaling:()=>hue,zeros:()=>iue});function iue(){return new W2}function sue(){return new Ex}function oue(e){return new U2(e)}function lue(e){return new V2(e)}function uue(e){return new j2(e)}function cue(e){return new H2(e)}function due(e){return new G2(e)}function hue(e){return new Zr(e)}function pue(e){return new Nx(e)}function fue(e){return new _x(e)}function mue(e){return new Ax(e)}function gue(e){return new Rx(e)}function bue(e){return new Dx(e)}function yue(e){return new Fx(e)}function vue(e){return new q2(e)}var cz={};He(cz,{Layer:()=>rt,RNN:()=>ys,RNNCell:()=>Bg,activation:()=>qce,add:()=>nde,alphaDropout:()=>zde,average:()=>rde,averagePooling1d:()=>cT,averagePooling2d:()=>dT,averagePooling3d:()=>hT,avgPool1d:()=>hde,avgPool2d:()=>fde,avgPool3d:()=>gde,avgPooling1d:()=>pde,avgPooling2d:()=>mde,avgPooling3d:()=>bde,batchNormalization:()=>ude,bidirectional:()=>Ade,categoryEncoding:()=>jde,centerCrop:()=>Ude,concatenate:()=>ade,conv1d:()=>Lce,conv2d:()=>zce,conv2dTranspose:()=>Bce,conv3d:()=>Wce,conv3dTranspose:()=>Uce,convLstm2d:()=>Tde,convLstm2dCell:()=>Ede,cropping2D:()=>jce,dense:()=>Kce,depthwiseConv2d:()=>Gce,dot:()=>lde,dropout:()=>Xce,elu:()=>Rce,embedding:()=>tde,flatten:()=>Jce,gaussianDropout:()=>Lde,gaussianNoise:()=>Pde,globalAveragePooling1d:()=>yde,globalAveragePooling2d:()=>vde,globalMaxPool1d:()=>Dde,globalMaxPool2d:()=>Fde,globalMaxPooling1d:()=>rB,globalMaxPooling2d:()=>aB,gru:()=>wde,gruCell:()=>kde,input:()=>Ez,inputLayer:()=>Ace,layerNormalization:()=>cde,leakyReLU:()=>Fce,lstm:()=>Sde,lstmCell:()=>Ide,masking:()=>Bde,maxPool1d:()=>Mde,maxPool2d:()=>Ode,maxPooling1d:()=>iB,maxPooling2d:()=>sB,maxPooling3d:()=>xde,maximum:()=>ide,minimum:()=>sde,multiply:()=>ode,permute:()=>ede,prelu:()=>Mce,randomWidth:()=>Hde,reLU:()=>Dce,repeatVector:()=>Zce,rescaling:()=>Wde,reshape:()=>Qce,resizing:()=>Vde,rnn:()=>Nde,separableConv2d:()=>Vce,simpleRNN:()=>$de,simpleRNNCell:()=>Cde,softmax:()=>Oce,spatialDropout1d:()=>Yce,stackedRNNCells:()=>_de,thresholdedReLU:()=>Pce,timeDistributed:()=>Rde,upSampling2d:()=>Hce,zeroPadding2d:()=>dde});async function no(e){if(e==null)return;let t=[],n=[],r=[];for(let a in e){let i=e[a];if(typeof i!="number"){let s=i;t.push(s.data()),n.push(a),r.push(s)}}if(t.length>0){let a=await Promise.all(t);for(let i=0;i<a.length;++i)e[n[i]]=a[i][0];je(r)}}function dz(e){if(e!=null)for(let t in e){let n=e[t];typeof n!="number"&&n.dispose()}}var eR;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(eR||(eR={}));var xue=125,uh=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},hz=class{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},wue=class extends uh{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});let n=t.size==null?0:t.size;this.seen+=n;for(let r in t){let a=t[r];if(typeof a=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+a*n;else{let i;r in this.totals?i=this.totals[r]:this.totals[r]=0;let s=X(()=>ie(this.totals[r],G(a,n)));this.totals[r]=s,i!=null&&i.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(let n of this.params.metrics)this.totals[n]!=null&&(typeof this.totals[n]=="number"?t[n]=this.totals[n]/this.seen:X(()=>{let r=G(Ce(1,this.seen),this.totals[n]);t[n]=r,this.totals[n].dispose(),An(t[n])}))}},pz=class extends uh{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(let n in t)this.history[n]==null&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let a in this.history){let i=this.history[a];for(let s=0;s<i.length;++s)if(typeof i[s]!="number"){let o=i[s];e.push(o.data()),t.push(a),n.push(s)}}let r=await Promise.all(e);for(let a=0;a<r.length;++a)this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}},fz=class extends uh{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||O2,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=xue),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");k.isNumber(this.yieldEvery)&&(this.maybeWait=kle(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];this.yield!=null&&(await no(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await no(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];this.epochEnd!=null&&(await no(t),n.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){this.batchBegin!=null&&(await no(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];this.batchEnd!=null&&(await no(t),n.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?n.push(this.nextFrameFunc()):k.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){this.trainBegin!=null&&(await no(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await no(e),await this.trainEnd(e))}};function mz(e,t){return e==null&&(e={}),e instanceof uh?[e]:Array.isArray(e)&&e[0]instanceof uh?e:Gt(e).map(n=>new fz(n,t))}var ti=class{constructor(){}static registerCallbackConstructor(e,t){k.assert(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, but got ".concat(e)),ti.checkForDuplicate(t),ti.constructors[e]==null&&(ti.constructors[e]=[]),ti.constructors[e].push(t)}static checkForDuplicate(e){for(let t in ti.constructors)ti.constructors[+t].forEach(n=>{if(n===e)throw new Y("Duplicate callback constructor.")})}static clear(){ti.constructors={}}static createCallbacks(e){let t=[];for(let n in ti.constructors){let r=+n;e>=r&&t.push(...ti.constructors[r])}return t.map(n=>new n)}};ti.constructors={};function gz(e,t,n,r,a,i,s,o,l){let c=new pz,u=[new wue,...ti.createCallbacks(t)];e!=null&&u.push(...e),u.push(c);let d=new hz(u);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:d,history:c}}function Mi(e,t={},n=!1){return Ag(e,ue.SerializationMap.getMap().classNameMap,t,"layer",n)}function yv(e,t){return X(()=>{e.dtype!=="float32"&&(e=me(e,"float32"));let n=Ee(Dg(e),t,!0),r=ga(n.shape,Rn()),a=lr(gs(n,r));return Ce(e,a)})}function jc(e,t){return X(()=>an(Dg(Se(t,e)),-1))}function Ox(e,t){return X(()=>an(kn(Se(t,e)),-1))}function Mp(e,t){return X(()=>{let n=Se(e,t),r=xr(kn(e),Rn(),Number.MAX_VALUE),a=kn(Ce(n,r));return G(100,an(a,-1))})}function kue(e,t){return X(()=>{let n=xr(t,Rn(),Number.MAX_VALUE),r=xa(ie(1,n)),a=xr(e,Rn(),Number.MAX_VALUE),i=xa(ie(1,a));return an(Dg(Se(r,i)),-1)})}function Sue(e,t){return X(()=>{let n=gs(0,Se(1,G(e,t)));return an(Dg(n),-1)})}function Iue(e,t){return X(()=>{let n=gs(0,Se(1,G(e,t)));return an(n,-1)})}function $ue(e,t){return X(()=>{let n=Ee(G(e,t),-1),r=Ba(G(Se(1,e),t),-1);return gs(0,ie(1,Se(r,n)))})}function Cue(e,t){return X(()=>{let n=Math.log(2),r=Se(t,e),a=Se(ie(r,Wc(G(-2,r))),n);return an(a,-1)})}function xm(e,t,n=!1){return X(()=>{if(n)t=al(t);else{let r=Ee(t,t.shape.length-1,!0);t=Ce(t,r)}return t=xr(t,Rn(),1-Rn()),jt(Ee(G(me(e,"float32"),xa(t)),t.shape.length-1))})}function vv(e,t,n=!1){return X(()=>{let r=me(Np(Fle(e)),"int32");t=xr(t,Rn(),1-Rn());let a=t.shape,i=q(nh(r,a[a.length-1]),a);return xm(i,t,n)})}function Tue(e,t){if(!k.arraysEqual(e.shape,t.shape))throw new Y("logits and labels must have the same shape, but got shapes ".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return X(()=>{let n=It(t),r=jt(kn(t));return ie(Se(n,G(t,e)),kg(Fr(r)))})}function Px(e,t){return X(()=>{let n;return n=xr(t,Rn(),1-Rn()),n=xa(Ce(n,Se(1,n))),an(Tue(e,n),-1)})}function Eue(e,t){return X(()=>{let n=xr(e,Rn(),1),r=xr(t,Rn(),1);return Ee(G(e,xa(Ce(n,r))),-1)})}function Nue(e,t){return X(()=>{let n=xa(ie(Rn(),t));return an(Se(t,G(e,n)),-1)})}function eC(e,t){return X(()=>{let n=yv(e,-1),r=yv(t,-1),a=G(n,r);return jt(Ee(a,-1))})}var xv={meanSquaredError:jc,meanAbsoluteError:Ox,meanAbsolutePercentageError:Mp,meanSquaredLogarithmicError:kue,squaredHinge:Sue,hinge:Iue,categoricalHinge:$ue,logcosh:Cue,categoricalCrossentropy:xm,sparseCategoricalCrossentropy:vv,binaryCrossentropy:Px,kullbackLeiblerDivergence:Eue,poisson:Nue,cosineProximity:eC};function n1(e){if(typeof e=="string"){if(e in xv)return xv[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy')),new Y(t)}else return e}function tC(e,t){return X(()=>{let n=G(.5,wa(t)),r=Vs(Wr(t,n),e.dtype);return an(va(e,r),-1)})}function nC(e,t){return X(()=>Vs(va(ru(e,-1),ru(t,-1)),"float32"))}function bz(e,t){return X(()=>me(Ee(di(va(e,1),va(t,1))),"float32"))}function _ue(e,t){return X(()=>me(Ee(di(va(e,1),va(t,0))),"float32"))}function Aue(e,t){return X(()=>me(Ee(di(va(e,0),va(t,1))),"float32"))}function yz(e,t){return X(()=>{let n=bz(e,t),r=Aue(e,t),a=ie(n,r);return me(Jn(Wr(a,0),Ce(n,a),0),"float32")})}function Rue(e,t){return X(()=>{let n=bz(e,t),r=_ue(e,t),a=ie(n,r);return me(Jn(Wr(a,0),Ce(n,a),0),"float32")})}function vz(e,t){return Px(e,t)}function xz(e,t){return e.rank===t.rank&&(e=il(e,[e.rank-1])),t=ru(t,-1),t.dtype!==e.dtype&&(t=me(t,e.dtype)),me(va(e,t),"float32")}var Due=jc,Fue=jc,Mue=Ox,Oue=Ox,Pue=Mp,Lue=Mp,rC=xm,zue=eC,wz=vv,wv={binaryAccuracy:tC,categoricalAccuracy:nC,precision:yz,categoricalCrossentropy:rC,sparseCategoricalCrossentropy:wz,mse:Due,MSE:Fue,mae:Mue,MAE:Oue,mape:Pue,MAPE:Lue,cosine:zue};function Bue(e){if(typeof e=="string"&&e in wv)return wv[e];if(typeof e!="string"&&e!=null)return e;throw new Y("Unknown metric ".concat(e))}function Fb(e){if(ns(e!==null,"Unknown LossOrMetricFn ".concat(e)),typeof e=="string")return e;{let t;for(let n of Object.keys(xv))if(xv[n]===e){t=n;break}if(t!==void 0)return t;for(let n of Object.keys(wv))if(wv[n]===e){t=n;break}return t!==void 0?t:e.name}}function Wue(e){let t={Adagrad:()=>kl.adagrad(.01),Adadelta:()=>kl.adadelta(1,.95,Rn()),Adam:()=>kl.adam(.001,.9,.999,Rn()),Adamax:()=>kl.adamax(.002,.9,.999,Rn(),0),RMSProp:()=>kl.rmsprop(.001,.9,0,Rn()),SGD:()=>kl.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Y("Unknown Optimizer ".concat(e))}function tR(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!Xk(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let r=JSON.stringify(e);r.length>1048576&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in size (length=').concat(r.length," when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576."))}}function Xk(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){let t=Object.keys(e);for(let n of t)if(typeof n!="string"||!Xk(e[n]))return!1;return!0}else if(Array.isArray(e)){for(let t of e)if(!Xk(t))return!1;return!0}else return!1;else{let t=typeof e;return t==="string"||t==="number"||t==="boolean"}}function Uue(e,t,n,r=console.log){let a=jue(e),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(t*u)));let s;if(!a){i.push("Receives inputs"),s=[];for(let u in e.nodesByDepth)s.push(...e.nodesByDepth[u])}r("_".repeat(t)),kv(i,n,r),r("=".repeat(t));let o=e.layers;for(let u=0;u<o.length;++u)a?Hue(o[u],n,r):Gue(o[u],n,s,r),r((u===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=Vue(e),c=mv(e.nonTrainableWeights);r("Total params: ".concat(l+c)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(c)),r("_".repeat(t))}function Vue(e){let t;return e.collectedTrainableWeights!=null?t=mv(e.collectedTrainableWeights):t=mv(e.trainableWeights),t}function jue(e){let t=!0,n=[],r=[];for(let a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(let a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(let a of e.layers){let i=!1;for(let s of a.inboundNodes)if(r.indexOf(s)!==-1)if(i){t=!1;break}else i=!0;if(!t)break}return t}function kv(e,t,n=console.log){let r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function Hue(e,t,n){let r,a;try{a=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch(l){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(l){r="multiple"}let i=e.name,s=e.getClassName(),o=["".concat(i," (").concat(s,")"),a,r,e.countParams().toString()];kv(o,t,n)}function Gue(e,t,n,r){let a,i;try{i=e.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch(d){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(d){a="multiple"}let s=[];for(let d of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){let p=d.inboundLayers[h].name,f=d.nodeIndices[h],m=d.tensorIndices[h];s.push("".concat(p,"[").concat(f,"][").concat(m,"]"))}let o=e.name,l=e.getClassName(),c=s.length===0?"":s[0],u=["".concat(o," (").concat(l,")"),i,a,e.countParams().toString(),c];kv(u,t,r);for(let d=1;d<s.length;++d)kv(["","","","",s[d]],t,r)}function kz(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function wm(e,t){if(e===null)return null;if(typeof e=="string")return $l(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let i=e[a];kz(t,a,i)?n.push(i):n.push(wm(i,t))}return n}else{let n={};for(let r of Object.keys(e)){let a=e[r];if(r==="name"&&typeof a=="string")n[r]=a;else{let i=$l(r);n[i]=wm(a,i)}}return n}}function Yk(e,t){if(e==null)return null;if(typeof e=="string")return Is(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let i=e[a];kz(t,a,i)?n.push(i):n.push(Yk(i,t))}return n}else{let n={};for(let r of Object.keys(e)){let a=e[r],i=Is(r);(r==="name"||r==="className")&&typeof a=="string"?n[i]=a:n[i]=Yk(a,r)}return n}}var aC="4.7.0",Ji=class extends rt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){let b=this.getClassName().toLowerCase();this.name=Cx(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],To(this.inputs).length!==this.inputs.length)throw new Y("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ".concat(this.inputs.map(b=>b.name)));To(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ".concat(this.outputs.map(b=>b.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let y=b.sourceLayer,v=b.nodeIndex,x=b.tensorIndex;this.outputLayers.push(y),this.outputLayersNodeIndices.push(v),this.outputLayersTensorIndices.push(x)}for(let b of this.inputs){let y=b.sourceLayer,v=b.nodeIndex,x=b.tensorIndex;ns(v===0,"input layer has >1 nodes"),ns(x===0,"input layer has >1 tensors"),this.inputLayers.push(y),this.inputLayersNodeIndices.push(v),this.inputLayersTensorIndices.push(x)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let y=this.inputLayers[b];if(!(y instanceof Fp))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: ".concat(e.inputs,". Input ").concat(b," (0-based) originates from layer type ").concat(y.getClassName(),"."));this.inputNames.push(y.name),this.feedInputShapes.push(y.batchInputShape),this.feedInputNames.push(y.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let t={},n={},r={},a={},i={},s=[],o=(b,y,v,x,w,$)=>{(x==null||w==null||$==null)&&(x=b.sourceLayer,w=b.nodeIndex,$=b.tensorIndex);let C=x.inboundNodes[w];if(v.indexOf(C)!==-1)throw new Ti("The tensor ".concat(b.name,' at layer "').concat(x.name,'" is part of a cycle.'));if(y.indexOf(C)!==-1)return;this.containerNodes.add(Ji.nodeKey(x,w)),x.id in i||(i[x.id]=Object.keys(i).length),v.indexOf(C)===-1&&v.push(C);let T=C.inboundLayers.length;for(let A=0;A<T;A++){let D=C.inputTensors[A],N=C.inboundLayers[A],I=C.nodeIndices[A],M=C.tensorIndices[A];o(D,y,v,N,I,M)}for(y.push(C);v.indexOf(C)>=0;)v.splice(v.indexOf(C),1);s.push(C)},l=[],c=[];for(let b of this.outputs)o(b,l,c);let u=s.slice().reverse();for(let b of u){n[b.id]=b,b.id in t||(t[b.id]=0);let y=t[b.id],v=r[b.outboundLayer.id]==null?0:r[b.outboundLayer.id];y=Math.max(y,v),r[b.outboundLayer.id]=y,a[b.outboundLayer.id]=b.outboundLayer,t[b.id]=y;for(let x=0;x<b.inboundLayers.length;x++){let w=b.inboundLayers[x],$=b.nodeIndices[x],C=w.inboundNodes[$],T=t[C.id]==null?0:t[C.id];t[C.id]=Math.max(y+1,T),n[C.id]=C}}let d={};for(let b in t){let y=t[b];y in d||(d[y]=[]),d[y].push(n[b])}let h={};for(let b in r){let y=r[b];y in h||(h[y]=[]),h[y].push(a[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(Ab);this.layers=[];for(let b of p){let y=h[b];y.sort((v,x)=>{let w=i[v.id],$=i[x.id];return w<$?-1:w>$?1:0});for(let v of y)v instanceof Ji&&this.internalContainerRefs.push(v),this.layers.push(v)}this.layersByDepth=h,p=Object.keys(d).map(b=>parseInt(b,10)).sort(Ab);let f=this.inputs.slice(),m=[];for(let b of p)for(let y of d[b]){let v=y.outboundLayer;if(v!=null){for(let x of y.inputTensors)if(f.indexOf(x)===-1)throw new Ti("Graph disconnected: cannot obtain value for tensor ".concat(x,' at layer "').concat(v.name,'". The following previous layers were accessed without issue: ').concat(m));for(let x of y.outputTensors)f.push(x);m.push(v.name)}}this.nodesByDepth=d;let g=this.layers.map(b=>b.name);for(let b of g){let y=g.filter(v=>v===b).length;if(y!==1)throw new Ti('The name "'.concat(b,'" is used ').concat(y," times in the model. All layer names should be unique. Layer names: ")+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Mx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(n=>n.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Y("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.layers)t.push(...n.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let n={},r=0;for(let i of this.layers)for(let s of i.weights){if(n[s.originalName]!=null)throw new Y("Duplicate weight name: ".concat(s.originalName));n[s.originalName]=s,r++}let a=[];for(let i in e){let s=i;if(n[i]==null){let o=i.split("/");s=o.slice(0,-2).concat([o[o.length-1]]).join("/")}if(n[s]!=null)a.push([n[s],e[i]]);else if(t)throw new Y("Provided weight data has no target variable: ".concat(i));delete n[s]}if(t){let i=[];for(let s in n)i.push(s);if(i.length>0)throw new Y("".concat(i.length," of ").concat(r," weights are not set: ").concat(i))}K2(a)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(aC),t.backend="TensorFlow.js",t}toJSON(e,t=!0){let n=Yk(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return X(()=>{e=Gt(e);let n=new Dl;for(let r=0;r<this.inputs.length;++r)n.add(this.inputs[r],e[r]);return yf(this.outputs,n,t)})}computeMask(e,t){return X(()=>{e=Gt(e);let n;return t==null?n=uu(null,e.length):n=Gt(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=fv(e);if(t.length!==this.inputLayers.length)throw new Y("Invalid inputShape argument ".concat(e,": model has ").concat(this.inputLayers.length," tensor inputs."));let n={};for(let s=0;s<t.length;s++){let o=this.inputLayers[s],l=t[s],c=o.name+"_0_0";n[c]=l}let r=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(Ab);if(r.length>1)for(let s of r){let o=this.nodesByDepth[s];for(let l of o){let c=l.outboundLayer;if(this.inputLayers.map(f=>f.id).indexOf(c.id)!==-1)continue;let u=[];for(let f=0;f<l.inboundLayers.length;f++){let m=l.inboundLayers[f],g=l.nodeIndices[f],b=l.tensorIndices[f],y="".concat(m.name,"_").concat(g,"_").concat(b),v=n[y];u.push(v)}let d=c.computeOutputShape(qr(u)),h=fv(d),p=c.inboundNodes.indexOf(l);for(let f=0;f<h.length;f++){let m="".concat(c.name,"_").concat(p,"_").concat(f);n[m]=h[f]}}}let a=[],i=[];for(let s=0;s<this.outputLayers.length;s++){let o=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=this.outputLayersTensorIndices[s],u="".concat(o.name,"_").concat(l,"_").concat(c);i.push(u)}for(let s=0;s<i.length;s++){let o=i[s];ns(o in n),a.push(n[o])}return qr(a)}runInternalGraph(e,t){t==null&&(t=uu(null,e.length));let n={};for(let o=0;o<this.inputs.length;++o){let l=this.inputs[o],c=e[o],u=t[o];n[l.id]=[c,u]}let r=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Ab);for(let o of r){let l=this.nodesByDepth[o];for(let c of l){let u=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,p=new Array;for(let f of d)f.id in n&&p.push(n[f.id]);if(p.length===d.length){let f={},m,g,b,y;if(c.callArgs!=null&&(f=c.callArgs),p.length===1){let[v,x]=p[0];f.mask==null&&(f.mask=x),b=Gt(u.call(v,f)),y=Gt(u.computeMask(v,x)),m=[v],g=[x]}else m=p.map(v=>v[0]),g=p.map(v=>v[1]),f.mask==null&&(f.mask=g),b=Gt(u.call(m,f)),y=Gt(u.computeMask(m,g));if(u.activityRegularizer)throw new et("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let v=0;v<h.length;++v){let x=h[v],w=b[v],$=y[v];n[x.id]=[w,$]}}}}let a=[],i=[],s=[];for(let o of this.outputs){ns(o.id in n,"Could not compute output ".concat(o.name," : ").concat(o.id));let[l,c]=n[o.id];s.push(l.shape),a.push(l),i.push(c)}return[a,i,s]}buildNodeConversionMap(e){let t={},n;for(let r of this.layers){n=r instanceof Ji?1:0;for(let a=0;a<r.inboundNodes.length;a++){let i=Ji.nodeKey(r,a);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new Y("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(let n of this.layers)if(n.name===e)return n;throw new Y("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new Y("Was asked to retrieve layer at index ".concat(e,", but model only has ").concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return X(()=>{let e=[];for(let t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){let r=Ji.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(let i of this.layers){let s=i.getClassName(),o=i.getConfig(),l=[];for(let u=0;u<i.inboundNodes.length;u++){let d=i.inboundNodes[u],h=Ji.nodeKey(i,u),p={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch(f){console.warn("Layer ".concat(i.name," was passed non-serializable keyword arguments: ").concat(d.callArgs,". They will not be included in the serialized model (and thus will be missing at deserialization time).")),p={}}if(d.inboundLayers.length>0){let f=[];for(let m=0;m<d.inboundLayers.length;m++){let g=d.inboundLayers[m],b=d.nodeIndices[m],y=d.tensorIndices[m],v=Ji.nodeKey(g,b),x=t[v];x==null&&(x=0),f.push([g.name,x,y,p])}l.push(f)}}}let c={};c.name=i.name,c.className=s,c.config=o,c.inboundNodes=l,n.push(c)}e.layers=n;let r=[];for(let i=0;i<this.inputLayers.length;i++){let s=this.inputLayers[i],o=this.inputLayersNodeIndices[i],l=Ji.nodeKey(s,o);if(!this.containerNodes.has(l))continue;let c=t[l];c==null&&(c=0);let u=this.inputLayersTensorIndices[i];r.push([s.name,c,u])}e.inputLayers=r;let a=[];for(let i=0;i<this.outputLayers.length;i++){let s=this.outputLayers[i],o=this.outputLayersNodeIndices[i],l=Ji.nodeKey(s,o);if(!this.containerNodes.has(l))continue;let c=t[l];c==null&&(c=0);let u=this.outputLayersTensorIndices[i];a.push([s.name,c,u])}return e.outputLayers=a,e}static fromConfig(e,t,n={},r=!1){let a={},i={};function s(m,g){m.name in i?i[m.name].push(g):i[m.name]=[g]}function o(m,g){let b=[],y;for(let v of g){let x=v[0],w=v[1],$=v[2];if(y=v[3]==null?{}:v[3],!(x in a)){s(m,g);return}let C=a[x];if(C.inboundNodes.length<=w){s(m,g);return}let T=C.inboundNodes[w];b.push(T.outputTensors[$])}b.length>0&&m.apply(qr(b),y)}function l(m){let g=m.name,b=Mi(m,t.customObjects!=null?t.customObjects:{});b.setFastWeightInitDuringBuild(r),a[g]=b,m.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new Y("Corrupted configuration, expected array for nodeData: ".concat(y));s(b,y)})}let c=t.name,u=t.layers;for(let m of u)l(m);for(;!wle(i);)for(let m of u){let g=a[m.name];if(g.name in i){let b=i[g.name];delete i[g.name];for(let y of b)o(g,y)}}let d=[],h=[],p=t.inputLayers;for(let m of p){let g=m[0],b=m[1],y=m[2];ns(g in a);let v=a[g].inboundNodes[b].outputTensors;d.push(v[y])}let f=t.outputLayers;for(let m of f){let g=m[0],b=m[1],y=m[2];ns(g in a);let v=a[g].inboundNodes[b].outputTensors;h.push(v[y])}return new e({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new Y("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){X(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function que(e,t,n){let r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(a=>null);if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," element(s), but the model has ").concat(r," outputs. Make sure a set of weights is provided for each model output."));return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){let a=[];return t.forEach(i=>{i in e?a.push(e[i]):a.push(null)}),a}else throw new Error("The model has multiple (".concat(r,") outputs, so ").concat(n," must be either an array with ").concat(r," elements or an object with ").concat(t," keys. Provided ").concat(n," not understood: ").concat(JSON.stringify(e)))}function Sz(e,t){return que(e,t,"classWeight")}async function Iz(e,t,n,r){if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let a=X(()=>{if(e.shape.length===1)return ls(e);if(e.shape.length===2){if(e.shape[1]>1)return ru(e,1);if(e.shape[1]===1)return q(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") during handling of class weights. The size is expected to be >= 1."))}else throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during handling of class weights. The rank is expected to be 1 or 2."))}),i=Array.from(await a.data());je(a);let s=[];return i.forEach(o=>{if(n[o]==null)throw new Error("classWeight must contain all classes in the training data. The class ".concat(o," exists in the data but not in classWeight"));s.push(n[o])}),St(s,"float32")}else return null}function Kue(e,t){return G(e,t)}var Xue=32;function $z(e,t){let n,r,a=t;n=a.xs,r=a.ys,k.assert(n!=null&&r!=null,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ".concat(t));let i=nR("input",e.inputNames,n),s=nR("output",e.outputNames,r),o=i[0].shape[0];k.assert(i.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset provides ").concat(i.length," inputs.  (Expected input keys: ").concat(JSON.stringify(e.inputNames),")")),k.assert(s.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset provides ").concat(s.length," outputs.  (Expected output keys: ").concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<i.length;l++)k.assert(i[l].shape[0]===o,()=>"Batch size mismatch: input ".concat(e.inputNames[l]," has ").concat(i[l].shape[0],"; expected  ").concat(o," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<s.length;l++)k.assert(s[l].shape[0]===o,()=>"Batch size mismatch: output ".concat(e.outputNames[l]," has ").concat(s[l].shape[0],"; expected  ").concat(o," based on input ").concat(e.inputNames[0],"."));return{xs:i,ys:s}}function nR(e,t,n){if(n instanceof qe)return[n];if(Array.isArray(n))return k.assert(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{let r=[];for(let a of t){if(n[a]==null)throw new Y("The feature data generated by the dataset lacks the required ".concat(e," key '").concat(a,"'."));r.push(n[a])}return r}}function Yue(e){if(e.length===3)throw new et("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function Jue(e,t,n){let r=n.batchesPerEpoch!=null;if(k.assert(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),k.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),k.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got ".concat(n.epochs)),k.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ".concat(n.batchesPerEpoch)),k.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let a=n.validationData!=null,i,s;if(a)if(rR(n.validationData))k.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ".concat(n.validationBatches));else{let g=Yue(n.validationData);i=g.xs,s=g.ys}let o=e.makeTrainFunction(),l=e.getDedupedMetricsNames(),c;a?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();let u=mz(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:p}=gz(u,d,n.epochs,null,null,Zue(t,n),null,a,c);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=n.initialEpoch==null?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){let g={};await h.onEpochBegin(f);let b=0,y=0;for(r||(m=await t.iterator());!r||b<n.batchesPerEpoch;){let v=await m.next();if(r&&v.done){console.warn("You provided `batchesPerEpoch` as ".concat(n.batchesPerEpoch,", but your dataset iterator ran out of data after ").concat(b," batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, ").concat(n.batchesPerEpoch*n.epochs," batches). You may need to use the repeat() function when building your dataset."));break}if(v.value!=null){let{xs:x,ys:w}=$z(e,v.value),$={};$.batch=y,$.size=x[0].shape[0],await h.onBatchBegin(y,$);let C=[];if(n.classWeight!=null){let D=Sz(n.classWeight,e.outputNames);for(let N=0;N<D.length;++N)C.push(await Iz(w[N],null,D[N]))}let T=x.concat(w).concat(C),A=o(T);je(T);for(let D=0;D<l.length;++D){let N=l[D],I=A[D];$[N]=I,An(I)}await h.onBatchEnd(y,$),dz($),y++,b++}if(r?b>=n.batchesPerEpoch:v.done){if(a){let x;rR(n.validationData)?x=Gt(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=Gt(e.evaluate(i,s,{batchSize:n.validationBatchSize==null?Xue:n.validationBatchSize,verbose:0}));for(let w=0;w<e.metricsNames.length;++w)g["val_".concat(e.metricsNames[w])]=x[w]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,g),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function Zue(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function rR(e){return typeof e.iterator=="function"}function Que(e){return typeof e.next=="function"}async function ece(e,t,n){n=n||{};let r=n.batches!=null,a=e.testFunction,i=[];if(n.verbose>0)throw new et("Verbose mode is not implemented yet.");k.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received ".concat(JSON.stringify(n.batches)));let s=Que(t)?t:await t.iterator(),o=0,l=0;for(;!r||l<n.batches;){let c=await s.next();if(i=X(()=>{if(c.value){let{xs:u,ys:d}=$z(e,c.value),h=u.concat(d),p=X(()=>a(h));if(je(h),l===0)for(let m=0;m<p.length;++m)i.push(Me(0));let f=h[0].shape[0];for(let m=0;m<p.length;++m){let g=p[m],b=i[m];i[m]=X(()=>ie(i[m],G(f,g))),l>0&&je(b)}je(p),o+=f,++l}return i}),c.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, ".concat(n.batches," batches). You may need to use the repeat() function when building your dataset."));break}}for(let c=0;c<i.length;++c){let u=i[c];i[c]=Ce(i[c],o),je(u)}return qr(i)}function r1(e){k.assert(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function of(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(r=>zl(r,t,n-t)):zl(e,t,n-t)}function Jk(e,t){return X(()=>e==null?null:Array.isArray(e)?e.map(n=>Jk(n,t)):rz(e,t.dtype==="int32"?t:me(t,"int32")))}function a1(e,t){let n=[],r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function Cz(e){let t=[];e instanceof qe&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(r.rank===1)t.push(Rg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function xi(e,t){if(e==null)return;let n=[];if(t instanceof qe)n.push(t.id);else if(Array.isArray(t))t.forEach(a=>n.push(a.id));else if(t!=null)for(let a in t){let i=t[a];n.push(i.id)}let r=[];if(e instanceof qe)n.indexOf(e.id)===-1&&r.push(e);else if(Array.isArray(e))e.forEach(a=>{n.indexOf(a.id)===-1&&r.push(a)});else if(e!=null)for(let a in e){let i=e[a];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(a=>{a.isDisposed||a.dispose()})}function tce(e){return e instanceof qe}function Zk(e){return Array.isArray(e)}function aR(e){return!tce(e)&&!Zk(e)}function iR(e,t,n,r=!0,a=""){if(t==null||t.length===0){if(e!=null){let s=!1;if(Zk(e)&&e.length>0)s=!0;else if(aR(e)){for(let o in e)if(e.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new Y("Error when checking model ".concat(a," expected no data, but got ").concat(e))}return[]}if(e==null)return t.map(s=>null);let i;if(aR(e)){e=e,i=[];for(let s of t){if(e[s]==null)throw new Y('No data provided for "'.concat(s,'". Need data for each key in: ').concat(t));i.push(e[s])}}else if(Zk(e)){if(e=e,e.length!==t.length)throw new Y("Error when checking model ".concat(a,": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got the following list of Tensor(s): ").concat(e));i=e}else{if(e=e,t.length>1)throw new Y("The model ".concat(a," expects ").concat(t.length," Tensor(s), but only received one Tensor. Found: Tensor with shape ").concat(e.shape));i=[e]}if(i=Cz(i),n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;let o=i[s];if(o.shape.length!==n[s].length)throw new Y("Error when checking ".concat(a,": expected ").concat(t[s]," to have ").concat(n[s].length," dimension(s). but got array with shape ").concat(o.shape));for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;let c=o.shape[l],u=n[s][l];if(u!=null&&u>=0&&c!==u)throw new Y("".concat(a," expected a batch of elements where each example has shape [").concat(n[s].slice(1,n[s].length),"] (i.e.,tensor shape [*,").concat(n[s].slice(1,n[s].length),"]) but the ").concat(a," received an input with ").concat(o.shape[0]," examples, each with shape [").concat(o.shape.slice(1,o.shape.length),"] (tensor shape [").concat(o.shape,"])"))}}return i}function nce(e,t,n){let r=To(e.map(i=>i.shape[0]));r.sort();let a=To(t.map(i=>i.shape[0]));if(a.sort(),r.length>1)throw new Y("All input Tensors (x) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(e.map(i=>i.shape))));if(a.length>1)throw new Y("All target Tensors (y) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(t.map(i=>i.shape))));if(r.length>0&&a.length>0&&!k.arraysEqual(r,a))throw new Y("Input Tensors should have the same number of samples as target Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target sample(s)."))}function rce(e,t,n){let r=[jc,Px,xm];for(let a=0;a<e.length;++a){let i=e[a],s=t[a],o=n[a];if(s!=null){if(s===xm&&i.shape[i.shape.length-1]===1)throw new Y("You are passing a target array of shape ".concat(i.shape," while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes]."));if(r.indexOf(s)!==-1){let l=i.shape.slice(1),c=o.slice(1);for(let u=0;u<l.length;++u){let d=l[u],h=c[u];if(h!=null&&d!==h)throw new Y("A target Tensor with shape ".concat(i.shape," was passed for an output of shape ").concat(o,", while using a loss function that expects targets to have the same shape as the output."))}}}}}function sR(e,t,n,r=!0,a=""){let i;if(Array.isArray(e)){if(e.length!==t.length)throw new Y("Error when checking model ".concat(a,": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got ").concat(e.length," Tensors(s)."));i=e}else{if(t.length>1)throw new Y("The model expects ".concat(t.length," ").concat(a," Tensors, but only received one Tensor. Found: array with shape ").concat(JSON.stringify(e.shape),"."));i=[e]}if(n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;let o=i[s];if(o.shape.length!==n[s].length)throw new Y("Error when checking ".concat(a,": expected ").concat(t[s]," to have ").concat(n[s].length," dimension(s), but got array with shape ").concat(JSON.stringify(o.shape)));for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;let c=o.shape[l],u=n[s][l];if(u!=null&&u!==c)throw new Y("Error when checking ".concat(a,": expected ").concat(t[s]," to have shape ").concat(JSON.stringify(n[s])," but got array with shape ").concat(JSON.stringify(o.shape),"."))}}}function ace(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(r=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ".concat(e));if(Array.isArray(n))return t.map(r=>n);{let r=[];for(let a of t){let i=n.hasOwnProperty(a)?n[a]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}var ice="layers-model",Ms=class extends Ji{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new Y("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Uue(this,e,t,n)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Wue(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Ys))throw new Y("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new Y('Unknown entry in loss dictionary: "'.concat(i,'". Only expected the following keys: ').concat(this.outputNames));for(let i of this.outputNames)e.loss[i]==null&&console.warn('Output "'.concat(i,'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ').concat(i," during training")),t.push(n1(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Y("When passing an Array as loss, it should have one entry per model output. The model has ".concat(this.outputs.length," output(s), but you passed loss=").concat(e.loss,"."));t=e.loss.map(i=>n1(i))}else{let i=n1(e.loss);this.outputs.forEach(s=>{t.push(i)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){let s=this.internalOutputShapes[i],o=this.outputNames[i];this.feedOutputNames.push(o),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[i])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ll("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(n.indexOf(i)!==-1)continue;let s=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([s,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});let r=ace(e.metrics,this.outputNames),a=(i,s,o)=>{this.outputNames.length>1&&(s=this.outputNames[i]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([o,i])};Ll("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(n.indexOf(i)!==-1)continue;let s=r[i];(o=>{let l="",c,u,d;for(let h of o){if(typeof h=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(h)!==-1){let f=this.internalOutputShapes[i];f[f.length-1]===1||this.lossFunctions[i]===Px?["accuracy","acc"].indexOf(h)!==-1?u=tC:["crossentropy","ce"].indexOf(h)!==-1&&(u=vz):this.lossFunctions[i]===vv?["accuracy","acc"].indexOf(h)!==-1?u=xz:["crossentropy","ce"].indexOf(h)!==-1&&(u=wz):["accuracy","acc"].indexOf(h)!==-1?u=nC:["crossentropy","ce"].indexOf(h)!==-1&&(u=rC);let m;["accuracy","acc"].indexOf(h)!==-1?m="acc":["crossentropy","ce"].indexOf(h)!==-1&&(m="ce"),d=u,c=l+m}else d=Bue(h),c=l+Fb(h);let p;Ll(c,()=>{p=d}),a(i,c,p)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let r=n.batchSize==null?32:n.batchSize;r1(r);let a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{let s=i[0].concat(i[1]);this.makeTestFunction();let o=this.testFunction,l=this.testLoop(o,s,r,n.verbose,n.steps);return qr(l)}finally{xi(i[0],e),xi(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),ece(this,e,t)}checkNumSamples(e,t,n,r="steps"){let a;if(n!=null){if(a=null,t!=null)throw new Y("If ".concat(r," is set, batchSize must be null or undefined.Got batchSize = ").concat(t))}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new Y("Either the input data should have a defined shape, or ".concat(r," shoud be specified."));return a}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new Y("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new Dl;if(e instanceof qe&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Y("The number of inputs provided (".concat(e.length,") does not match the number of inputs of this model (").concat(this.inputs.length,")."));for(let o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else for(let o of this.inputs){let l=e[o.name];if(l==null)throw new Y("No value is provided for the model's input ".concat(o.name));i.add(o,l)}let s=yf(a,i);return n?s:s[0]}retrieveSymbolicTensors(e){let t=uu(null,e.length),n=e.length;for(let r of this.layers){let a=Array.isArray(r.output)?r.output:[r.output],i=a.map(s=>s.name);for(let s=0;s<e.length;++s){let o=i.indexOf(e[s]);if(o!==-1&&(t[s]=a[o],n--),n===0)break}if(n===0)break}if(n>0){let r=[];throw t.forEach((a,i)=>{a==null&&r.push(e[i])}),new Y("Cannot find SymbolicTensors for output name(s): ".concat(JSON.stringify(r)))}return t}predictLoop(e,t=32,n=!1){return X(()=>{let r=this.checkNumSamples(e);if(n)throw new et("Verbose predictLoop() is not implemented yet.");let a=a1(r,t),i=this.outputs.map(s=>[]);for(let s=0;s<a.length;++s)X(()=>{let o=a[s][0],l=a[s][1],c=of(e,o,l),u=[];if(Array.isArray(c))for(let h=0;h<c.length;++h)u.push({key:this.inputs[h],value:c[h]});else u.push({key:this.inputs[0],value:c});let d=new Dl(u);return yf(this.outputs,d)}).forEach((o,l)=>i[l].push(o));return qr(i.map(s=>_t(s,0)))})}predict(e,t={}){let n=Cz(e);sR(n,this.inputNames,this.feedInputShapes,!1);try{let r=t.batchSize==null?32:t.batchSize;return r1(r),this.predictLoop(n,r)}finally{xi(n,e)}}predictOnBatch(e){sR(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(this.optimizer_==null)throw new Ti("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let i=0;i<this.feedOutputShapes.length;++i){let s=this.feedOutputShapes[i];this.feedLossFns[i]===vv?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(e=iR(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=iR(t,this.feedOutputNames,a,!1,"target"),nce(e,t),rce(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&r!=null&&r>0&&e[0].shape[0]%r!==0)throw new Y("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ".concat(r,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r,a=!0,i){let[s,o]=this.standardizeUserDataXY(e,t,a,i);if(n!=null)throw new Error("sample weight is not supported yet.");let l=null;if(r!=null){let c=Sz(r,this.outputNames);l=[];for(let u=0;u<c.length;++u)l.push(await Iz(o[u],null,c[u]))}return[s,o,l]}testLoop(e,t,n,r=0,a){return X(()=>{let i=this.checkNumSamples(t,n,a,"steps"),s=[];if(r>0)throw new et("Verbose mode is not implemented yet.");if(a!=null)throw new et("steps mode in testLoop() is not implemented yet");{let o=a1(i,n),l=St(zi(0,i));for(let c=0;c<o.length;++c){let u=o[c][0],d=o[c][1],h=zl(l,u,d-u),p=Jk(t,h),f=e(p);if(c===0)for(let m=0;m<f.length;++m)s.push(Me(0));for(let m=0;m<f.length;++m){let g=f[m];s[m]=ie(s[m],G(d-u,g))}}for(let c=0;c<s.length;++c)s[c]=Ce(s[c],i)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let r=e[n],a=r;if(HA(e,r)>1){let i=HA(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],s=()=>{let c=[];for(let p=0;p<this.inputs.length;++p)c.push({key:this.inputs[p],value:n[p]});let u=new Dl(c),d=yf(this.outputs,u,{training:!0}),h;for(let p=0;p<this.lossFunctions.length;++p){let f=this.lossFunctions[p],m=f(r[p],d[p]);a[p]!=null&&(m=Kue(m,a[p]));let g=an(m);t.push(g),p===0?h=m:h=ie(h,m)}for(let p=0;p<this.metricsTensors.length;++p){let f;if(this.outputs.length>1&&p<this.outputs.length)f=t[p];else{let m=this.metricsTensors[p][0],g=this.metricsTensors[p][1];f=an(m(r[g],d[g]))}An(f),i.push(f)}return h=an(h),this.calculateLosses().forEach(p=>{h=ie(h,p)}),h},o=this.collectedTrainableWeights.map(c=>c.read()),l=!0;return[this.optimizer_.minimize(s,l,o)].concat(i)}}makeTestFunction(){this.testFunction=e=>X(()=>{let t=[],n,r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:r[l]});let s=new Dl(i),o=yf(this.outputs,s);for(let l=0;l<this.lossFunctions.length;++l){let c=this.lossFunctions[l],u=an(c(a[l],o[l]));l===0?n=u:n=ie(n,u),t.push(n)}for(let l=0;l<this.metricsTensors.length;++l){let c=this.metricsTensors[l][0],u=this.metricsTensors[l][1],d=an(c(a[u],o[u]));t.push(d)}return t})}async fit(e,t,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let r,a,i,s,o,l,c,u,d;try{let h=n.batchSize==null?32:n.batchSize;r1(h);let p=!1,f=await this.standardizeUserData(e,t,n.sampleWeight,n.classWeight,p,h);r=f[0],a=f[1],d=f[2];let m=!1,g;if(n.validationData!=null&&n.validationData.length>0){if(m=!0,n.validationData.length===2)o=n.validationData[0],l=n.validationData[1];else throw n.validationData.length===3?new et("validationData including sample weights is not supported yet."):new Y("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ".concat(n.validationData," is invalid."));let C=!0,T=await this.standardizeUserData(o,l,null,null,C,h);c=T[0],u=T[1],g=c.concat(u)}else if(n.validationSplit!=null&&n.validationSplit>0&&n.validationSplit<1){m=!0;let C=Math.floor(r[0].shape[0]*(1-n.validationSplit)),T=r[0].shape[0];c=of(r,C,T),i=r,r=of(r,0,C),u=of(a,C,T),s=a,a=of(a,0,C),g=c.concat(u)}else n.validationSteps!=null&&(m=!0);let b=r.concat(a).concat(d);this.checkTrainableWeightsConsistency();let y=this.makeTrainFunction(),v=this.getDedupedMetricsNames(),x,w;m?(this.makeTestFunction(),x=this.testFunction,w=v.slice().concat(v.map(C=>"val_"+C))):(x=null,g=[],w=v.slice());let $=mz(n.callbacks,n.yieldEvery);return await this.fitLoop(y,b,v,h,n.epochs,n.verbose,$,x,g,n.shuffle,w,n.initialEpoch,null,null)}finally{this.isTraining=!1,xi(r,e),xi(a,t),xi(i,e),xi(s,t),xi(c,o),xi(u,l),d!=null&&je(d)}}async fitLoop(e,t,n,r,a,i,s,o,l,c,u,d,h,p){r==null&&(r=32),a==null&&(a=1),c==null&&(c=!0),d==null&&(d=0);let f=!1;if(o!=null&&l!=null&&(f=!0),p!=null&&(f=!0,h==null))throw new Y("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let m=this.checkNumSamples(t,r,h,"steps_per_epoch"),g;m!=null&&(g=zi(0,m)),i==null&&(i=1);let{callbackList:b,history:y}=gz(s,i,a,d,m,h,r,f,u);b.setModel(this),this.history=y,await b.onTrainBegin(),this.stopTraining_=!1;for(let v=d;v<a;++v){await b.onEpochBegin(v);let x={};if(h!=null)throw new et("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new et("batch shuffling is not implemneted yet");c&&k.shuffle(g);let w=St(g),$=a1(m,r);for(let C=0;C<$.length;++C){let T={};if(await b.onBatchBegin(C,T),X(()=>{let A=$[C][0],D=$[C][1],N=zl(w,A,D-A);T.batch=C,T.size=D-A;let I=Jk(t,N),M=e(I);for(let P=0;P<n.length;++P){let z=n[P],j=M[P];T[z]=j,An(j)}if(C===$.length-1&&f){let P=this.testLoop(o,l,r);for(let z=0;z<n.length;++z){let j=n[z],K=P[z];An(K),x["val_"+j]=K}}}),await b.onBatchEnd(C,T),dz(T),this.stopTraining_)break}w.dispose()}if(await b.onEpochEnd(v,x),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return Jue(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),r=n[0],a=n[1],i=this.makeTrainFunction()(r.concat(a)),s=[];for(let o of i){let l=await o.data();s.push(l[0])}return je(i),xi(n[0],e),xi(n[1],t),qr(s)}getNamedWeights(e){let t=[],n=e!=null&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let t=hv().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-hv().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Is(this.loss);else if(Array.isArray(this.loss)){for(let t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Is(t))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let r of t)if(typeof n[r]=="string")e[r]=Is(n[r]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Is(Fb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Is(Fb(e)));{let e={};for(let t in this.metrics)e[t]=Is(Fb(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let t=wm(e.optimizer_config),n=Mi(t),r;if(typeof e.loss=="string")r=$l(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(i=>$l(i));else if(e.loss!=null){r={};for(let i in e.loss)r[i]=$l(e.loss[i])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(i=>$l(i));else if(e.metrics!=null){a={};for(let i in e.metrics)a[i]=$l(e.metrics[i])}this.compile({loss:r,metrics:a,optimizer:n})}async save(e,t){if(typeof e=="string"){let s=sr.getSaveHandlers(e);if(s.length===0)throw new Y("Cannot find any save handlers for URL '".concat(e,"'"));if(s.length>1)throw new Y("Found more than one (".concat(s.length,") save handlers for URL '").concat(e,"'"));e=s[0]}if(e.save==null)throw new Y("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await sr.encodeWeights(this.getNamedWeights(t)),r=!1,a=null,i={modelTopology:this.toJSON(a,r),format:ice,generatedBy:"TensorFlow.js tfjs-layers v".concat(aC),convertedBy:null};if(t!=null&&t.includeOptimizer&&this.optimizer!=null){i.trainingConfig=this.getTrainingConfig();let s="optimizer",{data:o,specs:l}=await sr.encodeWeights(await this.optimizer.getWeights(),s);n.specs.push(...l),n.data=sr.concatenateArrayBuffers([n.data,o])}return this.userDefinedMetadata!=null&&(tR(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=n.data,i.weightSpecs=n.specs,e.save(i)}setUserDefinedMetadata(e){tR(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Ms.className="Model";ue.registerClass(Ms);var Tz=class extends Ms{};Tz.className="Functional";ue.registerClass(Tz);async function sce(e,t){"modelTopology"in e||(e={modelTopology:e}),e=e;let n=e.modelTopology;n.model_config!=null&&(n=n.model_config);let r=wm(n),a=Mi(r,t);if(e.weightsManifest!=null){let i=await sr.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map(o=>o.originalName)),s={};for(let o of a.weights)s[o.originalName]=i[o.originalName];a.loadWeights(s),je(i)}return a}async function oce(e,t){if(t==null&&(t={}),typeof e=="string"){let n=sr.getLoadHandlers(e,t);if(n.length===0)n.push(sr.browserHTTPRequest(e,t));else if(n.length>1)throw new Y("Found more than one (".concat(n.length,") load handlers for URL '").concat(e,"'"));e=n[0]}return lce(e,void 0,t)}async function lce(e,t,n){if(n==null&&(n={}),e.load==null)throw new Y("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),a=r.modelTopology;a.model_config!=null&&(a=a.model_config);let i=n.strict==null?!0:n.strict,s=r.weightData!=null&&r.weightSpecs!=null&&i,o=Mi(wm(a),t,s),l=r.trainingConfig;if(l!=null&&o.loadTrainingConfig(l),r.userDefinedMetadata!=null&&o.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new Y("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=uce(r.weightData,r.weightSpecs);o.loadWeights(c,i),o.optimizer!=null&&u.length>0&&await o.optimizer.setWeights(u),je(c),je(u.map(d=>d.tensor))}return o}function uce(e,t){let n=sr.decodeWeights(e,t),r={},a=[];return t.forEach(i=>{i.group==="optimizer"?a.push({name:i.name,tensor:n[i.name]}):r[i.name]=n[i.name]}),{modelWeights:r,optimizerWeights:a}}var ch=class extends Ms{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Cx("sequential_"),e.layers!=null)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new Y("Negative dimension size caused by adding layer ".concat(e.name," with input shape [").concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){let t=e instanceof ch||e instanceof Ms,n;if(t){if(n=e,n.outputs.length!==1)throw new Y("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(n.inputs.length!==1)throw new Y("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Y("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let r=oz({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(e.inboundNodes.length!==1)throw new Y("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ".concat(e.name," which has ").concat(e.inboundNodes.length," pre-existing inbound connections."));if(e.inboundNodes[0].outputTensors.length!==1)throw new Y("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=sz(this.outputs[0])}this.inboundNodes=[],new Mx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:uu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{let r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(ft(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ms({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new Ti("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Ti("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new Ti("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Ti("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a,i={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new Y("Legacy serialization format not supported yet.");a=t}else k.assert(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,i=t;let s=new e(i);if(!(s instanceof ch))throw new et("Sequential.fromConfig called on non-Sequential input: ".concat(s));for(let o of a){let l=Mi(o,void 0,r);r&&l.setFastWeightInitDuringBuild(!0),s.add(l)}return s}set stopTraining(e){if(this.model==null)throw new Y("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Y("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};ch.className="Sequential";ue.registerClass(ch);function cce(e){return new Ms(e)}function dce(e){return new ch(e)}function Ez(e){return oz(e)}function hce(e,t){ti.registerCallbackConstructor(e,t)}var na=class extends ue.Serializable{getConfig(){return{}}},Nz=class extends na{apply(e,t=1){return Ole(e,t)}};Nz.className="elu";ue.registerClass(Nz);var _z=class extends na{apply(e){return ux(e)}};_z.className="selu";ue.registerClass(_z);var Az=class extends na{apply(e){return It(e)}};Az.className="relu";ue.registerClass(Az);var Rz=class extends na{apply(e){return X(()=>Po(6,It(e)))}};Rz.className="relu6";ue.registerClass(Rz);var Dz=class extends na{apply(e){return e}};Dz.className="linear";ue.registerClass(Dz);var Fz=class extends na{apply(e){return li(e)}};Fz.className="sigmoid";ue.registerClass(Fz);var Mz=class extends na{apply(e){return Lle(e)}};Mz.className="hardSigmoid";ue.registerClass(Mz);var Oz=class extends na{apply(e){return Wc(e)}};Oz.className="softplus";ue.registerClass(Oz);var Pz=class extends na{apply(e){return Ple(e)}};Pz.className="softsign";ue.registerClass(Pz);var Lz=class extends na{apply(e){return iu(e)}};Lz.className="tanh";ue.registerClass(Lz);var iC=class extends na{apply(e,t=-1){return al(e,t)}};iC.className="softmax";ue.registerClass(iC);var zz=class extends na{apply(e,t=-1){return tx(e,t)}};zz.className="logSoftmax";ue.registerClass(zz);var Bz=class extends na{apply(e,t=1){return X(()=>G(li(G(e,t)),e))}};Bz.className="swish";ue.registerClass(Bz);var Wz=class extends na{apply(e){return X(()=>G(e,iu(Wc(e))))}};Wz.className="mish";ue.registerClass(Wz);function Bo(e){return e.getClassName()}function i1(e,t={}){return Ag(e,ue.SerializationMap.getMap().classNameMap,t,"activation")}function Wo(e){if(e==null){let t={};return t.className="linear",t.config={},i1(t)}if(typeof e=="string"){let t={};return t.className=e,t.config={},i1(t)}else return e instanceof na?e:i1(e)}function sC(e){if(e!=null&&typeof e!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: ".concat(e))}var Uz=class extends ue.Serializable{},Og=class extends Uz{constructor(e){super(),sC(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return X(()=>{let t=sn([1]);return this.hasL1&&(t=ie(t,Ee(G(this.l1,kn(e))))),this.hasL2&&(t=ie(t,Ee(G(this.l2,Dg(e))))),q(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};Og.className="L1L2";ue.registerClass(Og);function pce(e){return sC(e),new Og({l1:e!=null?e.l1:null,l2:0})}function fce(e){return sC(e),new Og({l2:e!=null?e.l2:null,l1:0})}var oR={l1l2:"L1L2"};function Lt(e){return L2(e)}function lR(e,t={}){return Ag(e,ue.SerializationMap.getMap().classNameMap,t,"regularizer")}function en(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in oR?oR[e]:e,config:{}};return lR(t)}else return e instanceof Uz?e:lR(e)}var oC=class extends rt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=Ue(e);let n=It(e);return this.maxValue!=null&&(n=xr(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};oC.className="ReLU";ue.registerClass(oC);var lC=class extends rt{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=Ue(e);return wg(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};lC.className="LeakyReLU";ue.registerClass(lC);var uC=class extends rt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Qt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=en(e.alphaRegularizer),this.alphaConstraint=On(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Y("Expected sharedAxes to be a number or an array of numbers, but got ".concat(e.sharedAxes))}build(e){e=ft(e);let t=e.slice(1);if(this.sharedAxes!=null)for(let r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(this.sharedAxes!=null)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new In({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Ue(e),Cg(e,this.alpha.read())}getConfig(){let e={alphaInitializer:on(this.alphaInitializer),alphaRegularizer:Lt(this.alphaRegularizer),alphaConstraint:Mn(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};uC.className="PReLU";ue.registerClass(uC);var cC=class extends rt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new et("Non-default alpha value (".concat(e.alpha,") is not supported by the ELU layer yet."));this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=Ue(e);return Tp(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};cC.className="ELU";ue.registerClass(cC);var dC=class extends rt{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){let n=Ue(e);return G(n,me(Wr(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};dC.className="ThresholdedReLU";ue.registerClass(dC);var hC=class extends rt{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new iC().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){let n=Ue(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};hC.className="Softmax";ue.registerClass(hC);function Od(e,t,n){if(typeof e=="number")return uu(e,t);if(e.length!==t)throw new Y("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(e.length," elements."));for(let r=0;r<t;++r){let a=e[r];if(!Rle(a))throw new Y("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(JSON.stringify(e)," including a non-integer number ").concat(a))}return e}function Oi(e,t,n,r,a=1){if(e==null)return e;let i=t+(t-1)*(a-1),s;return n==="same"?s=e:s=e-i+1,Math.floor((s+r-1)/r)}function rs(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+zo([n-t,0]);else if(r==="same")e=e*t;else throw new Y("Unsupport padding mode: ".concat(r,"."));return e}function pC(e,t){return X(()=>(gn(t),t==="channelsFirst"?tt(e,[0,2,3,1]):e))}function Vz(e,t){return X(()=>(gn(t),t==="channelsFirst"?tt(e,[0,2,3,4,1]):e))}function mce(e,t,n,r=1,a="valid",i,s=1){return X(()=>{if(i==null&&(i=Bi()),gn(i),e.shape.length!==3)throw new Y("The input of a conv1dWithBias operation should be 3, but is ".concat(e.shape.length," instead."));if(t.shape.length!==3)throw new Y("The kernel for a conv1dWithBias operation should be 3, but is ".concat(t.shape.length," instead"));if(n!=null&&n.shape.length!==1)throw new Y("The bias for a conv1dWithBias operation should be 1, but is ".concat(t.shape.length," instead"));if(i==="channelsFirst"&&(e=tt(e,[0,2,1])),a==="causal")throw new et("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=X0(e,t,r,a==="same"?"same":"valid","NWC",s);return n!=null&&(o=Vi(o,n)),o})}function uR(e,t,n,r=[1,1],a="valid",i,s,o=null){return X(()=>{if(i==null&&(i=Bi()),gn(i),e.rank!==3&&e.rank!==4)throw new Y("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ".concat(e.rank,"."));if(t.rank!==3&&t.rank!==4)throw new Y("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ".concat(e.rank,"."));let l=pC(e,i);if(a==="causal")throw new et("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=sh.conv2d({x:l,filter:t,strides:r,pad:a==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(l=tt(l,[0,3,1,2])),l})}function gce(e,t,n,r=[1,1,1],a="valid",i,s){return X(()=>{if(i==null&&(i=Bi()),gn(i),e.rank!==4&&e.rank!==5)throw new Y("conv3dWithBias expects input to be of rank 4 or 5, but received ".concat(e.rank,"."));if(t.rank!==4&&t.rank!==5)throw new Y("conv3dWithBias expects kernel to be of rank 4 or 5, but received ".concat(e.rank,"."));let o=Vz(e,i);if(a==="causal")throw new et("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=W$(o,t,r,a==="same"?"same":"valid","NDHWC",s),n!=null&&(o=Vi(o,n)),i==="channelsFirst"&&(o=tt(o,[0,4,1,2,3])),o})}var fC=class extends rt{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",fC.verifyArgs(t),this.rank=e,Yn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new et("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is not implemented yet."));if(this.kernelSize=Od(t.kernelSize,e,"kernelSize"),this.strides=Od(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,Xa(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,gn(this.dataFormat),this.activation=Wo(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=Qt(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=On(t.biasConstraint),this.biasRegularizer=en(t.biasRegularizer),this.activityRegularizer=en(t.activityRegularizer),this.dilationRate=Od(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Y("dilationRate must be a number or an array of a single number for 1D convolution, but received ".concat(JSON.stringify(this.dilationRate)));if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Y("dilationRate must be a number or array of two numbers for 2D convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Y("dilationRate must be a number or array of three numbers for 3D convolution, but received ".concat(JSON.stringify(this.dilationRate)))}}static verifyArgs(e){if(ns("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!z2(e.kernelSize,"number",1,3))throw new Y("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Bo(this.activation),useBias:this.useBias,biasInitializer:on(this.biasInitializer),biasRegularizer:Lt(this.biasRegularizer),activityRegularizer:Lt(this.activityRegularizer),biasConstraint:Mn(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},Pg=class extends fC{constructor(e,t){super(e,t),this.kernel=null,Pg.verifyArgs(t),this.filters=t.filters,Yn(this.filters,"filters"),this.kernelInitializer=Qt(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=On(t.kernelConstraint),this.kernelRegularizer=en(t.kernelRegularizer)}build(e){e=ft(e);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Y("The channel dimension of the input should be defined. Found ".concat(e[t]));let n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return X(()=>{e=Ue(e);let n,r=this.bias==null?null:this.bias.read(),a=JL(this.activation.getClassName());if(a!=null&&this.rank===2)n=uR(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)n=mce(e,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)n=uR(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)n=gce(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new et("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(n=this.activation.apply(n))}return n})}computeOutputShape(e){e=ft(e);let t=[],n=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){let i=Oi(n[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);t.push(i)}let r=[e[0]];return this.dataFormat==="channelsLast"?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){let e={filters:this.filters,kernelInitializer:on(this.kernelInitializer),kernelRegularizer:Lt(this.kernelRegularizer),kernelConstraint:Mn(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Y("Convolution layer expected config.filters to be a 'number' > 0 but got ".concat(JSON.stringify(e.filters)))}},Lg=class extends Pg{constructor(e){super(2,e),Lg.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!z2(e.kernelSize,"number",1,2))throw new Y("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}};Lg.className="Conv2D";ue.registerClass(Lg);var zg=class extends Pg{constructor(e){super(3,e),zg.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Y("Conv3D expects config.kernelSize to be number or [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}};zg.className="Conv3D";ue.registerClass(zg);var mC=class extends Lg{constructor(e){if(super(e),this.inputSpec=[new In({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Y("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(this.padding))}build(e){if(e=ft(e),e.length!==4)throw new Y("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Y("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new In({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return X(()=>{let n=Ue(e);if(n.shape.length!==4)throw new Y("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(n.shape.length));let r=n.shape,a=r[0],i,s;this.dataFormat==="channelsFirst"?(i=2,s=3):(i=1,s=2);let o=r[i],l=r[s],c=this.kernelSize[0],u=this.kernelSize[1],d=this.strides[0],h=this.strides[1],p=rs(o,d,c,this.padding),f=rs(l,h,u,this.padding),m=[a,p,f,this.filters];this.dataFormat!=="channelsLast"&&(n=tt(n,[0,2,3,1]));let g=Y0(n,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=tt(g,[0,3,1,2])),this.bias!=null&&(g=Vi(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=ft(e);let t=e.slice(),n,r,a;this.dataFormat==="channelsFirst"?(n=1,r=2,a=3):(n=3,r=1,a=2);let i=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=rs(t[r],o,i,this.padding),t[a]=rs(t[a],l,s,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};mC.className="Conv2DTranspose";ue.registerClass(mC);var gC=class extends zg{constructor(e){if(super(e),this.inputSpec=[new In({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Y("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(this.padding))}build(e){if(e=ft(e),e.length!==5)throw new Y("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new Y("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new In({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return X(()=>{let n=Ue(e);if(n.shape.length!==5)throw new Y("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(n.shape.length));let r=n.shape,a=r[0],i,s,o;this.dataFormat==="channelsFirst"?(o=2,i=3,s=4):(o=1,i=2,s=3);let l=r[o],c=r[i],u=r[s],d=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],f=this.strides[0],m=this.strides[1],g=this.strides[2],b=rs(l,f,d,this.padding),y=rs(c,m,h,this.padding),v=rs(u,g,p,this.padding),x=[a,b,y,v,this.filters];this.dataFormat!=="channelsLast"&&(n=tt(n,[0,2,3,4,1]));let w=U$(n,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=tt(w,[0,4,1,2,3])),this.bias!==null&&(w=Vi(w,this.bias.read(),this.dataFormat)),this.activation!==null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=ft(e);let t=e.slice(),n,r,a,i;this.dataFormat==="channelsFirst"?(n=1,r=2,a=3,i=4):(n=4,r=1,a=2,i=3);let s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=rs(t[r],c,s,this.padding),t[a]=rs(t[a],u,o,this.padding),t[i]=rs(t[i],d,l,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};gC.className="Conv3DTranspose";ue.registerClass(gC);var jz=class extends Pg{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new Y("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new Y("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new Y("SeparableConv".concat(this.rank,"D supports only padding modes: 'same' and 'valid', but received ").concat(JSON.stringify(t.padding)));this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Qt(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=en(t.depthwiseRegularizer),this.depthwiseConstraint=On(t.depthwiseConstraint),this.pointwiseInitializer=Qt(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=en(t.pointwiseRegularizer),this.pointwiseConstraint=On(t.pointwiseConstraint)}build(e){if(e=ft(e),e.length<this.rank+2)throw new Y("Inputs to SeparableConv".concat(this.rank,"D should have rank ").concat(this.rank+2,", but received input shape: ").concat(JSON.stringify(e)));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new Y("The channel dimension of the inputs should be defined, but found ".concat(JSON.stringify(e[t])));let n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(n*this.depthMultiplier,this.filters);let i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new In({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return X(()=>{e=Ue(e);let n;if(this.rank===1)throw new et("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=tt(e,[0,2,3,1])),n=Ap(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(n=Vi(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),this.dataFormat==="channelsFirst"&&(n=tt(n,[0,3,1,2])),n})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=on(this.depthwiseInitializer),e.pointwiseInitializer=on(this.pointwiseInitializer),e.depthwiseRegularizer=Lt(this.depthwiseRegularizer),e.pointwiseRegularizer=Lt(this.pointwiseRegularizer),e.depthwiseConstraint=Mn(this.depthwiseConstraint),e.pointwiseConstraint=Mn(this.pointwiseConstraint),e}};jz.className="SeparableConv";var bC=class extends jz{constructor(e){super(2,e)}};bC.className="SeparableConv2D";ue.registerClass(bC);var Lx=class extends Pg{constructor(e){super(1,e),Lx.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!z2(e.kernelSize,"number",1,1))throw new Y("Conv1D expects config.kernelSize to be number or number[] with length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}};Lx.className="Conv1D";ue.registerClass(Lx);var yC=class extends rt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return X(()=>{if(e=Ue(e),this.dataFormat==="channelsLast"){let n=Db(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Db(n,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let n=Db(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Db(n,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};yC.className="Cropping2D";ue.registerClass(yC);var vC=class extends rt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Nle(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let t=e[2]==null?null:this.size[0]*e[2],n=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,n]}else{let t=e[1]==null?null:this.size[0]*e[1],n=e[2]==null?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return X(()=>{let n=Ue(e),r=n.shape;if(this.dataFormat==="channelsFirst"){n=tt(n,[0,2,3,1]);let a=this.size[0]*r[2],i=this.size[1]*r[3],s=this.interpolation==="nearest"?Ma.resizeNearestNeighbor(n,[a,i]):Ma.resizeBilinear(n,[a,i]);return tt(s,[0,3,1,2])}else{let a=this.size[0]*r[1],i=this.size[1]*r[2];return this.interpolation==="nearest"?Ma.resizeNearestNeighbor(n,[a,i]):Ma.resizeBilinear(n,[a,i])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}};vC.className="UpSampling2D";ue.registerClass(vC);function bce(e,t,n=[1,1],r="valid",a,i){return X(()=>{a==null&&(a=Bi()),gn(a);let s=pC(e,a);if(e.rank!==4)throw new Y("Input for depthwiseConv2d is required to be 4-D, but is instead ".concat(e.rank,"-D"));if(t.rank!==4)throw new Y("depthwiseKernel is required to be 4-D, but is instead ".concat(t.rank,"-D"));return s=Bc(s,t,n,r==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(s=tt(s,[0,3,1,2])),s})}var xC=class extends fC{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Qt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=On(e.depthwiseConstraint),this.depthwiseRegularizer=en(e.depthwiseRegularizer)}build(e){if(e=ft(e),e.length<4)throw new Y("Inputs to DepthwiseConv2D should have rank 4. Received input shape: ".concat(JSON.stringify(e),"."));let t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new Y("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (".concat(e[t],")."));let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return X(()=>{e=Ue(e);let n=bce(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(n=Vi(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),n})}computeOutputShape(e){e=ft(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Oi(t,this.kernelSize[0],this.padding,this.strides[0]),i=Oi(n,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=on(this.depthwiseInitializer),e.depthwiseRegularizer=Lt(this.depthwiseRegularizer),e.depthwiseConstraint=Mn(this.depthwiseRegularizer),e}};xC.className="DepthwiseConv2D";ue.registerClass(xC);function Hz(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new Y("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return t=a(t),n=a(n),{inputs:e,initialState:t,constants:n}}function Gz(e,t,n,r=!1,a,i,s=!1,o=!1){return X(()=>{let l=t.shape.length;if(l<3)throw new Y("Input should be at least 3D, but is ".concat(l,"D."));let c=[1,0].concat(zi(2,l));if(t=tt(t,c),i!=null)throw new et("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=me(me(a,"bool"),"float32"),a.rank===l-1&&(a=rr(a,-1)),a=tt(a,c)),r&&(t=Va(t,0),a!=null&&(a=Va(a,0)));let u=[],d,h=n,p=t.shape[0],f=fn(t),m;a!=null&&(m=fn(a));for(let b=0;b<p;++b){let y=f[b],v=X(()=>e(y,h));if(a==null)d=v[0],h=v[1];else{let x=X(()=>{let w=m[b],$=Se(wa(w),w),C=ie(G(v[0],w),G(h[0],$)),T=h.map((A,D)=>ie(G(v[1][D],w),G(A,$)));return{output:C,newStates:T}});d=x.output,h=x.newStates}o&&u.push(d)}let g;return o&&(g=Dn(u,1)),[d,g,h]})}var ys=class extends rt{constructor(e){super(e);let t;if(e.cell==null)throw new Y("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new Wx({cells:e.cell}):t=e.cell,t.stateSize==null)throw new Y("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new In({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return zi(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){qk(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n=t[0],r;if(this.returnSequences?r=[e[0],e[1],n]:r=[e[0],n],this.returnState){let a=[];for(let i of t)a.push([e[0],i]);return[r].concat(a)}else return r}computeMask(e,t){return X(()=>{Array.isArray(t)&&(t=t[0]);let n=this.returnSequences?t:null;if(this.returnState){let r=this.states.map(a=>null);return[n].concat(r)}else return n})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new et("Constants support is not implemented in RNN yet.");qk(e)&&(e=e[0]),e=e;let t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new In({shape:[t,null,...n]});let r=[e[0]].concat(e.slice(2));this.cell.build(r);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!k.arraysEqual(this.stateSpec.map(i=>i.shape[i.shape.length-1]),a))throw new Y("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; However cell.stateSize is ").concat(this.cell.stateSize))}else this.stateSpec=a.map(i=>new In({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){X(()=>{if(!this.stateful)throw new Ss("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(n==null)throw new Y("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>sn([n,r])):this.states_=[sn([n,this.cell.stateSize])];else if(e==null)je(this.states_),this.keptStates!=null&&(je(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>sn([n,r])):this.states_[0]=sn([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Y("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));t===!0?this.keptStates.push(this.states_.slice()):je(this.states_);for(let r=0;r<this.states_.length;++r){let a=e[r],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,s=[n,i];if(!k.arraysEqual(a.shape,s))throw new Y("State ".concat(r," is incompatible with layer ").concat(this.name,": expected shape=").concat(s,", received shape=").concat(a.shape));this.states_[r]=a}}this.states_=this.states_.map(r=>An(r.clone()))})}apply(e,t){let n=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});let a=Hz(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let i=[],s=[];if(n!=null){t.initialState=n,i=i.concat(n),this.stateSpec=[];for(let o of n)this.stateSpec.push(new In({shape:o.shape}));s=s.concat(this.stateSpec)}if(r!=null&&(t.constants=r,i=i.concat(r),this.numConstants=r.length),i[0]instanceof Ei){let o=[e].concat(i),l=this.inputSpec.concat(s),c=this.inputSpec;this.inputSpec=l;let u=super.apply(o,t);return this.inputSpec=c,u}else return super.apply(e,t)}call(e,t){return X(()=>{let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;e=Ue(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));let i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new Y("RNN Layer has ".concat(i," state(s) but was passed ").concat(a.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let s={training:r},o=Gz((h,p)=>{let f=this.cell.call([h].concat(p),s);return[f[0],f.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],c=o[1],u=o[2];this.stateful&&this.resetStates(u,r);let d=this.returnSequences?c:l;return this.returnState?[d].concat(u):d})}getInitialState(e){return X(()=>{let t=sn(e.shape);return t=Ee(t,[1,2]),t=Rg(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(n=>n>1?Hk(t,[1,n]):t):this.cell.stateSize>1?[Hk(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===ys.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t,n={}){let r=t.cell,a=Mi(r,n);return new e(Object.assign(t,{cell:a}))}};ys.className="RNN";ue.registerClass(ys);var Bg=class extends rt{},zx=class extends Bg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Yn(this.units,"units"),this.activation=Wo(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Qt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=On(e.kernelConstraint),this.recurrentConstraint=On(e.recurrentConstraint),this.biasConstraint=On(e.biasConstraint),this.dropout=lh([1,zo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=lh([1,zo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ft(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return X(()=>{if(e=e,e.length!==2)throw new Y("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];let r=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uo({ones:()=>wa(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uo({ones:()=>wa(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let a,i=this.dropoutMask,s=this.recurrentDropoutMask;i!=null?a=cs(G(e,i),this.kernel.read()):a=cs(e,this.kernel.read()),this.bias!=null&&(a=Vi(a,this.bias.read())),s!=null&&(n=G(n,s));let o=ie(a,cs(n,this.recurrentKernel.read()));return this.activation!=null&&(o=this.activation.apply(o)),[o,o]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:Bo(this.activation),useBias:this.useBias,kernelInitializer:on(this.kernelInitializer),recurrentInitializer:on(this.recurrentInitializer),biasInitializer:on(this.biasInitializer),kernelRegularizer:Lt(this.kernelRegularizer),recurrentRegularizer:Lt(this.recurrentRegularizer),biasRegularizer:Lt(this.biasRegularizer),activityRegularizer:Lt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}};zx.className="SimpleRNNCell";ue.registerClass(zx);var wC=class extends ys{constructor(e){e.cell=new zx(e),super(e)}call(e,t){return X(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}};wC.className="SimpleRNN";ue.registerClass(wC);var Bx=class extends Bg{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Y("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Yn(this.units,"units"),this.activation=Wo(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Wo(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Qt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=On(e.kernelConstraint),this.recurrentConstraint=On(e.recurrentConstraint),this.biasConstraint=On(e.biasConstraint),this.dropout=lh([1,zo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=lh([1,zo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ft(e);let t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return X(()=>{if(e=e,e.length!==2)throw new Y("GRUCell expects 2 input Tensors (inputs, h, c), got ".concat(e.length,"."));let n=t.training==null?!1:t.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uo({ones:()=>wa(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uo({ones:()=>wa(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,i=this.recurrentDropoutMask,s,o,l;0<this.dropout&&this.dropout<1&&(e=G(e,a[0]));let c=cs(e,this.kernel.read());this.useBias&&(c=Vi(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=G(r,i[0]));let u=this.recurrentKernel.read(),[d,h]=Xr(u,[2*this.units,this.units],u.rank-1),p=cs(r,d),[f,m,g]=Xr(c,3,c.rank-1),[b,y]=Xr(p,2,p.rank-1);s=this.recurrentActivation.apply(ie(f,b)),o=this.recurrentActivation.apply(ie(m,y));let v=cs(G(o,r),h);l=this.activation.apply(ie(g,v));let x=ie(G(s,r),G(ie(1,jt(s)),l));return[x,x]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:Bo(this.activation),recurrentActivation:Bo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:on(this.kernelInitializer),recurrentInitializer:on(this.recurrentInitializer),biasInitializer:on(this.biasInitializer),kernelRegularizer:Lt(this.kernelRegularizer),recurrentRegularizer:Lt(this.recurrentRegularizer),biasRegularizer:Lt(this.biasRegularizer),activityRegularizer:Lt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}};Bx.className="GRUCell";ue.registerClass(Bx);var kC=class extends ys{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Bx(e),super(e)}call(e,t){return X(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};kC.className="GRU";ue.registerClass(kC);var Wg=class extends Bg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Yn(this.units,"units"),this.activation=Wo(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Wo(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Qt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Qt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Qt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=On(e.kernelConstraint),this.recurrentConstraint=On(e.recurrentConstraint),this.biasConstraint=On(e.biasConstraint),this.dropout=lh([1,zo([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=lh([1,zo([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=ft(e);let n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let r;if(this.useBias){if(this.unitForgetBias){let a=this.biasInitializer,i=this.units;r=new(t=class extends pi{apply(s,o){let l=a.apply([i]),c=new Ex().apply([i]),u=a.apply([i*2]);return qA(qA(l,c),u)}},t.className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return X(()=>{let n=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new Y("LSTMCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));let r=e[1],a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uo({ones:()=>wa(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uo({ones:()=>wa(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let i=this.dropoutMask,s=this.recurrentDropoutMask,o,l,c,u;0<this.dropout&&this.dropout<1&&(e=G(e,i[0]));let d=cs(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=G(r,s[0])),d=ie(d,cs(r,this.recurrentKernel.read())),this.useBias&&(d=Vi(d,this.bias.read()));let[h,p,f,m]=Xr(d,4,d.rank-1);o=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),c=ie(G(l,a),G(o,this.activation.apply(f))),u=this.recurrentActivation.apply(m);let g=G(u,this.activation.apply(c));return[g,g,c]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:Bo(this.activation),recurrentActivation:Bo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:on(this.kernelInitializer),recurrentInitializer:on(this.recurrentInitializer),biasInitializer:on(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Lt(this.kernelRegularizer),recurrentRegularizer:Lt(this.recurrentRegularizer),biasRegularizer:Lt(this.biasRegularizer),activityRegularizer:Lt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),recurrentConstraint:Mn(this.recurrentConstraint),biasConstraint:Mn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}};Wg.className="LSTMCell";ue.registerClass(Wg);var SC=class extends ys{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Wg(e),super(e)}call(e,t){return X(()=>{this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};SC.className="LSTM";ue.registerClass(SC);var Wx=class extends Bg{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return X(()=>{e=e;let n=e.slice(1),r=[];for(let s of this.cells.slice().reverse())Array.isArray(s.stateSize)?r.push(n.splice(0,s.stateSize.length)):r.push(n.splice(0,1));r.reverse();let a=[],i;for(let s=0;s<this.cells.length;++s){let o=this.cells[s];n=r[s],s===0?i=[e[0]].concat(n):i=[i[0]].concat(n),i=o.call(i,t),a.push(i.slice(1))}n=[];for(let s of a.slice().reverse())n.push(...s);return[i[0]].concat(n)})}build(e){qk(e)&&(e=e[0]),e=e;let t;this.cells.forEach((n,r)=>{Ll("RNNCell_".concat(r),()=>{n.build(e),Array.isArray(n.stateSize)?t=n.stateSize[0]:t=n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t=r=>({className:r.getClassName(),config:r.getConfig()}),n={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),n)}static fromConfig(e,t,n={}){let r=[];for(let a of t.cells)r.push(Mi(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.cells)t.push(...n.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return Kk(e)}setWeights(e){let t=[];for(let n of this.cells){let r=n.weights.length,a=e.splice(r);for(let i=0;i<n.weights.length;++i)t.push([n.weights[i],a[i]])}K2(t)}};Wx.className="StackedRNNCells";ue.registerClass(Wx);function Uo(e){let{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=e,s=()=>i!=null?i(t(),n):az(t(),n),o=()=>Fg(s,t,r);return!a||a<=1?An(o().clone()):Array(a).fill(void 0).map(o).map(l=>An(l.clone()))}var yce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},qz=class extends ys{constructor(e){if(e.unroll)throw new et("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new et("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new In({ndim:5})]}call(e,t){return X(()=>{if(this.cell.dropoutMask!=null&&(je(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(je(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Y("ConvRNN2D cell does not support constants");let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return X(()=>{let{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)],i=sn(a);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){X(()=>{if(!this.stateful)throw new Ss("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(n[0]==null)throw new Y("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>sn(a)):this.states_=[sn(a)];else if(e==null)je(this.states_),this.keptStates!=null&&(je(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>sn(a)):this.states_[0]=sn(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Y("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));t?this.keptStates.push(this.states_.slice()):je(this.states_);for(let i=0;i<this.states_.length;++i){let s=e[i],o=a;if(!k.arraysEqual(s.shape,o))throw new Y("State ".concat(i," is incompatible with layer ").concat(this.name,": expected shape=").concat(o,", received shape=").concat(s.shape));this.states_[i]=s}}this.states_=this.states_.map(i=>An(i.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:i,dilationRate:s}=this.cell,o=t==="channelsFirst",l=e[o?3:2],c=e[o?4:3],u=Oi(l,r[0],a,i[0],s[0]),d=Oi(c,r[1],a,i[1],s[1]);return[...e.slice(0,2),...o?[n,u,d]:[u,d,n]]}};qz.className="ConvRNN2D";var Ux=class extends Wg{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Yn(this.filters,"filters"),this.kernelSize=Od(n,2,"kernelSize"),this.kernelSize.forEach(o=>Yn(o,"kernelSize")),this.strides=Od(r||1,2,"strides"),this.strides.forEach(o=>Yn(o,"strides")),this.padding=a||"valid",Xa(this.padding),this.dataFormat=i||"channelsLast",gn(this.dataFormat),this.dilationRate=Od(s||1,2,"dilationRate"),this.dilationRate.forEach(o=>Yn(o,"dilationRate"))}build(e){var t;e=ft(e);let n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Y("The channel dimension of the input should be defined. Found ".concat(e[n]));let r=e[n],a=4,i=this.kernelSize.concat([r,this.filters*a]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let s=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let o;if(this.unitForgetBias){let l=this.biasInitializer,c=this.filters;o=new(t=class extends pi{apply(u,d){let h=l.apply([c]),p=ha([c]),f=l.apply([c*2]);return B2([h,p,f])}},t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return X(()=>{if(e.length!==3)throw new Y("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));let n=t.training||!1,r=e[0],a=e[1],i=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Uo({ones:()=>wa(r),rate:this.dropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,l=(W,L,H)=>!L||!L[H]?W:G(L[H],W),c=l(r,o,0),u=l(r,o,1),d=l(r,o,2),h=l(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Uo({ones:()=>wa(a),rate:this.recurrentDropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let p=this.recurrentDropoutMask,f=l(a,p,0),m=l(a,p,1),g=l(a,p,2),b=l(a,p,3),y=3,[v,x,w,$]=Xr(this.kernel.read(),s,y),[C,T,A,D]=this.useBias?Xr(this.bias.read(),s):[null,null,null,null];c=this.inputConv(c,v,C,this.padding),u=this.inputConv(u,x,T,this.padding),d=this.inputConv(d,w,A,this.padding),h=this.inputConv(h,$,D,this.padding);let[N,I,M,P]=Xr(this.recurrentKernel.read(),s,y);f=this.recurrentConv(f,N),m=this.recurrentConv(m,I),g=this.recurrentConv(g,M),b=this.recurrentConv(b,P);let z=this.recurrentActivation.apply(ie(c,f)),j=this.recurrentActivation.apply(ie(u,m)),K=ie(G(j,i),G(z,this.activation.apply(ie(d,g)))),O=G(this.recurrentActivation.apply(ie(h,b)),this.activation.apply(K));return[O,O,K]})}getConfig(){let e=super.getConfig(),t=yce(e,["units"]),n={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),n)}inputConv(e,t,n,r){let a=Dr(e,t,this.strides,r||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return n?Vi(a,n,this.dataFormat):a}recurrentConv(e,t){return Dr(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};Ux.className="ConvLSTM2DCell";ue.registerClass(Ux);var IC=class extends qz{constructor(e){let t=new Ux(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}};IC.className="ConvLSTM2D";ue.registerClass(IC);var Vx=class extends rt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(this.noiseShape[r]==null?t[r]:this.noiseShape[r]);return n}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e);if(0<this.rate&&this.rate<1){let r=t.training==null?!1:t.training,a=this.getNoiseShape(n);return Fg(()=>az(n,this.rate,a,this.seed),()=>n,r)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};Vx.className="Dropout";ue.registerClass(Vx);var $C=class extends Vx{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};$C.className="SpatialDropout1D";ue.registerClass($C);var CC=class extends rt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Yn(this.units,"units"),this.activation=Wo(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Qt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Qt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=On(e.kernelConstraint),this.biasConstraint=On(e.biasConstraint),this.kernelRegularizer=en(e.kernelRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.activityRegularizer=en(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=ft(e);let t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=ft(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e),r=JL(this.activation.getClassName()),a;return r!=null?a=cs(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=cs(n,this.kernel.read()),this.bias!=null&&(a=Vi(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){let e={units:this.units,activation:Bo(this.activation),useBias:this.useBias,kernelInitializer:on(this.kernelInitializer),biasInitializer:on(this.biasInitializer),kernelRegularizer:Lt(this.kernelRegularizer),biasRegularizer:Lt(this.biasRegularizer),activityRegularizer:Lt(this.activityRegularizer),kernelConstraint:Mn(this.kernelConstraint),biasConstraint:Mn(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};CC.className="Dense";ue.registerClass(CC);var TC=class extends rt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=ft(e);for(let t of e.slice(1))if(t==null)throw new Y('The shape of the input to "Flatten" is not fully defined (got '.concat(e.slice(1),'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.'));return[e[0],Eo(e,1)]}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e);if(this.dataFormat==="channelsFirst"&&n.rank>1){let r=[0];for(let a=2;a<n.rank;++a)r.push(a);r.push(1),n=tt(n,r)}return Mle(n)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};TC.className="Flatten";ue.registerClass(TC);var EC=class extends rt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Wo(e.activation)}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e);return this.activation.apply(n)})}getConfig(){let e={activation:Bo(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};EC.className="Activation";ue.registerClass(EC);var NC=class extends rt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return X(()=>(e=Ue(e),Dle(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};NC.className="RepeatVector";ue.registerClass(NC);var _C=class extends rt{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null;for(let o=0;o<r.length;++o){let l=r[o];if(this.isUnknown(l))if(i===null)i=o;else throw new Y("Can only specifiy one unknown dimension.");else a*=l}let s=Eo(e);if(i!==null){if(a===0||s%a!==0)throw new Y(n);r[i]=s/a}else if(s!==a)throw new Y(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return q(n,a)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};_C.className="Reshape";ue.registerClass(_C);var AC=class extends rt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received ".concat(e.dims," instead."));let t=zi(1,e.dims.length+1);if(!k.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new In({ndim:this.dims.length+1})]}computeOutputShape(e){e=ft(e);let t=e.slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return tt(Ue(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};AC.className="Permute";ue.registerClass(AC);var RC=class extends rt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=Ue(e),r=-1;return gm(ou(n,this.maskValue),r)}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e),r=-1,a=!0,i=gm(ou(n,this.maskValue),r,a);return G(n,me(i,n.dtype))})}};RC.className="Masking";ue.registerClass(RC);var DC=class extends rt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Gt(e.inputLength))}this.inputDim=e.inputDim,Yn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Yn(this.outputDim,"outputDim"),this.embeddingsInitializer=Qt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=en(e.embeddingsRegularizer),this.activityRegularizer=en(e.activityRegularizer),this.embeddingsConstraint=On(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return X(()=>this.maskZero?(e=Ue(e),ou(e,ut(e))):null)}computeOutputShape(e){if(e=ft(e),this.inputLength==null)return[...e,this.outputDim];let t=Gt(this.inputLength);if(t.length!==e.length-1)throw new Y('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));{let n=0;for(let r=0;r<t.length;++r){let a=t[r],i=e[r+1];if(a!=null&&i!=null&&a!==i)throw new Y('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));a==null&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e);n.dtype!=="int32"&&(n=Vs(n,"int32"));let r=rz(this.embeddings.read(),q(n,[n.size]));return q(r,ft(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:on(this.embeddingsInitializer),embeddingsRegularizer:Lt(this.embeddingsRegularizer),activityRegularizer:Lt(this.activityRegularizer),embeddingsConstraint:Mn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};DC.className="Embedding";ue.registerClass(DC);var Hc=class extends rt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new et}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let a=e[e.length-t.length+r],i=t[r];if(a==null||i==null||a<0||i<0)n.push(null);else if(a===1)n.push(i);else if(i===1)n.push(a);else{if(a!==i)throw new Y("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[ft(e)]),e=e,e.length<2)throw new Y("A merge layer should be called on an Array of at least 2 inputs. Got ".concat(e.length," input(s)."));let t=[];for(let a of e)a!=null&&a[0]!==null&&t.push(a[0]);if(t=To(t),t.length>1)throw new Y("Can not merge tensors with different batch sizes. Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){let i=e[a]==null?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=e.map(a=>a.length);e.indexOf(null)===-1&&To(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return X(()=>{if(e=e,this.reshapeRequired){let n=[],r=e.map(a=>a.rank);if(r.indexOf(null)===-1){let a=zo(r);for(let i of e){let s=i.rank;for(let o=0;o<a-s;++o)i=Rg(i,1);n.push(i)}return this.mergeFunction(n)}else{let a=!1;for(let o of e){let l=o.rank;if(l==null){let c=o.shape,u=c[0],d=c.slice(1).concat([u]),h=q(o,[u].concat(Eo(c.slice(1))));h=tt(h,[1,0]),h=q(h,d),n.push(h),a=!0}else if(l>1){let c=zi(1,l).concat([0]);n.push(tt(o,c)),a=!0}else n.push(o)}let i=this.mergeFunction(n),s=i.rank;if(a){if(s==null){let o=i.shape,l=o.length,c=o[l-1],u=[c].concat(o.slice(0,o.length-1));i=q(tt(q(i,[-1,c]),[1,0]),u)}else if(s>1){let o=[s-1].concat(zi(0,s-1));i=tt(i,o)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let r=1;r<e.length;++r){let a=e[r]==null?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let n=[];for(let r of e)r!=null&&r[0]!==null&&n.push(r[0]);return n=To(n),n.length===1?t=n.concat(t):t=[null].concat(t),t}computeMask(e,t){return X(()=>{if(t==null)return null;if(!Array.isArray(t))throw new Y("`mask` should be an Array");if(!Array.isArray(e))throw new Y("`inputs` should be an Array");if(t.length!==e.length)throw new Y("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (".concat(e.length," vs ").concat(t.length,")"));if(t.every(r=>r==null))return null;t=t.map(r=>r==null?r:rr(r,0));let n=t[0];for(let r=1;r<t.length-1;++r)n=di(n,t[r]);return n})}},FC=class extends Hc{constructor(e){super(e)}mergeFunction(e){return X(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ie(t,e[n]);return t})}};FC.className="Add";ue.registerClass(FC);var MC=class extends Hc{constructor(e){super(e)}mergeFunction(e){return X(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=G(t,e[n]);return t})}};MC.className="Multiply";ue.registerClass(MC);var OC=class extends Hc{constructor(e){super(e)}mergeFunction(e){return X(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ie(t,e[n]);return G(1/e.length,t)})}};OC.className="Average";ue.registerClass(OC);var PC=class extends Hc{constructor(e){super(e)}mergeFunction(e){return X(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=gs(t,e[n]);return t})}};PC.className="Maximum";ue.registerClass(PC);var LC=class extends Hc{constructor(e){super(e)}mergeFunction(e){return X(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Po(t,e[n]);return t})}};LC.className="Minimum";ue.registerClass(LC);var zC=class extends Hc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Y("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let r of e)if(r!=null){t=!1;break}if(t)return;let n=[];for(let r=0;r<e.length;++r){let a=e[r].slice();a.splice(this.axis,1);let i=!1;for(let s of n)if(k.arraysEqual(s,a)){i=!0;break}i||n.push(a)}if(n.length>1)throw new Y("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return X(()=>B2(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Y("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(let a of t.slice(1)){if(n[r]==null||a[r]==null){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new Y("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Y("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Y("Mismatch in the length of mask (".concat(t.length,") and the legnth of inputs (").concat(e.length,")"));return X(()=>{let n=!0;if(t.forEach(i=>{if(i!=null){n=!1;return}}),n)return null;let r=[];for(let i=0;i<e.length;++i)t[i]==null?r.push(me(wa(e[i]),"bool")):t[i].rank<e[i].rank?r.push(rr(t[i],-1)):r.push(t[i]);let a=_t(r,this.axis);return K0(a,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};zC.className="Concatenate";ue.registerClass(zC);function lf(e,t){for(;e<0;)e+=t;return e}function vce(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new et("batchDot is not implemented for tensors of 4D or higher rank yet");if(k.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got ".concat(e.shape.length)),k.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got ".concat(t.shape.length)),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new et("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,a=t.shape.length;n==null&&(n=[r-1,a-2]);let i=n;return X(()=>{let s;if(r>a){s=r-a;let l=[];for(let c=0;c<s;++c)l.push(1);t=q(t,t.shape.concat(l))}else if(a>r){s=a-r;let l=[];for(let c=0;c<s;++c)l.push(1);e=q(e,e.shape.concat(l))}else s=0;let o;if(e.shape.length===2&&t.shape.length===2)i[0]===i[1]?o=Ee(G(e,t),i[0]):o=Ee(G(tt(e,[1,0]),t),i[1]);else{let l=i[0]!==e.shape.length-1,c=i[1]===t.shape.length-1;o=Qe(e,t,l,c)}if(s>0){let l;r>a?l=r+a-3:l=r-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);o=il(o,c)}return o.shape.length===1&&(o=rr(o,1)),o})}var BC=class extends Hc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){k.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new et("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Y("Dimension incompatibility: ".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(e.length!==2)throw new Y("A `Dot` layer must be called on exactly 2 inputs, but received ".concat(e.length," input(s)."));let t=e[0],n=e[1],r;return Array.isArray(this.axes)?r=this.axes.map((a,i)=>lf(a,e[i].shape.length)):r=[lf(this.axes,t.shape.length),lf(this.axes,n.shape.length)],this.normalize&&(t=yv(t,r[0]),n=yv(n,r[1])),vce(t,n,r)}interpretAxes(e,t){let n;return Array.isArray(this.axes)?n=this.axes:n=[lf(this.axes,e.length),lf(this.axes,t.length)],n}computeOutputShape(e){k.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new et("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let a=t.concat(n);return a.length===1&&a.push(1),a}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};BC.className="Dot";ue.registerClass(BC);var WC=class extends rt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e);return Fg(()=>ie(Tx(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}};WC.className="GaussianNoise";ue.registerClass(WC);var UC=class extends rt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return X(()=>{this.invokeCallHook(e,t);let n=Ue(e);return this.rate>0&&this.rate<1?Fg(()=>{let r=Math.sqrt(this.rate/(1-this.rate));return G(n,Tx(n.shape,1,r))},()=>n,t.training||!1):n})}};UC.className="GaussianDropout";ue.registerClass(UC);var VC=class extends rt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ue(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return X(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return Fg(()=>{let r=Ue(e),a=1.6732632423543772,i=1.0507009873554805,s=-a*i,o=Ks(rl(n),this.rate);o=Vs(o,"float32");let l=((1-this.rate)*(1+this.rate*s**2))**-.5,c=-l*s*this.rate,u=ie(G(r,o),G(ie(o,-1),s));return ie(G(u,l),c)},()=>Ue(e),t.training||!1)}return e})}};VC.className="AlphaDropout";ue.registerClass(VC);function km(e,t,n,r,a,i=.001){let s;if(e.rank===2)s=A$(e,t,n,r,a,i);else if(e.rank===3)s=R$(e,t,n,r,a,i);else if(e.rank===4)s=D$(e,t,n,r,a,i);else throw new et("batchNormalization is not implemented for array of rank ".concat(e.rank," yet"));return s}function xce(e,t,n,r,a=.001){return X(()=>{let i=Ig(e,r),s=i.mean,o=i.variance;return[km(e,s,o,n,t,a),s,o]})}function wce(e,t,n,r,a=.001){return X(()=>{let i=Ig(e,r),s=i.mean,o=i.variance,l=[];for(let p of zi(0,e.rank))r.indexOf(p)!==-1?l.push(1):l.push(e.shape[p]);let c=q(s,l),u=q(o,l),d=t==null?null:q(t,l),h=n==null?null:q(n,l);return[km(e,c,u,h,d,a),s,o]})}function kce(e,t,n,r,a=.001){return k.arraysEqual(r.slice().sort(),zi(0,e.rank-1))?xce(e,t,n,r,a):wce(e,t,n,r,a)}var jC=class extends rt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Qt(e.betaInitializer||"zeros"),this.gammaInitializer=Qt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Qt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Qt(e.movingVarianceInitializer||"ones"),this.betaConstraint=On(e.betaConstraint),this.gammaConstraint=On(e.gammaConstraint),this.betaRegularizer=en(e.betaRegularizer),this.gammaRegularizer=en(e.gammaRegularizer)}build(e){e=ft(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(n==null)throw new Y("Axis ".concat(t," of input tensor should have a defined dimension but the layer received an input with shape ").concat(JSON.stringify(e),"."));this.inputSpec=[new In({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return X(()=>{let n=t.training==null?!1:t.training,r=Ue(e),a=r.shape,i=a.length,s=zi(0,i),o=this.axis>=0?this.axis:this.axis+i;s.splice(o,1);let l=uu(1,i);l[o]=a[o];let c=s.slice();c.sort();let u=!k.arraysEqual(c,zi(0,i).slice(0,i-1)),d=()=>{if(u){let g=q(this.movingMean.read(),l),b=q(this.movingVariance.read(),l),y=this.center?q(this.beta.read(),l):null,v=this.scale?q(this.gamma.read(),l):null;return km(r,g,b,y,v,this.epsilon)}else return km(r,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!n)return d();let[h,p,f]=kce(r,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(g,b,y)=>{X(()=>{let v=1-y,x=g.read(),w=G(Se(x,b),v);g.write(Se(x,w))})};return m(this.movingMean,p,this.momentum),m(this.movingVariance,f,this.momentum),h})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:on(this.betaInitializer),gammaInitializer:on(this.gammaInitializer),movingMeanInitializer:on(this.movingMeanInitializer),movingVarianceInitializer:on(this.movingVarianceInitializer),betaRegularizer:Lt(this.betaRegularizer),gammaRegularizer:Lt(this.gammaRegularizer),betaConstraint:Mn(this.betaConstraint),gammaConstraint:Mn(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};jC.className="BatchNormalization";ue.registerClass(jC);var HC=class extends rt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else if(Array.isArray(this.axis)){for(let t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, but received ".concat(JSON.stringify(this.axis)))}else throw new Error("Expected axis to be an integer or an array of integers, but received ".concat(JSON.stringify(this.axis)));this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Qt(e.betaInitializer||"zeros"),this.gammaInitializer=Qt(e.gammaInitializer||"ones"),this.betaRegularizer=en(e.betaRegularizer),this.gammaRegularizer=en(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=ft(e);let t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(let a of this.axis)if(a<0||a>=t)throw new Error("Invalid axis: ".concat(a));if(this.axis.length!==To(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));let n=this.axis.map(a=>e[a]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){let n=Ue(e),r=n.shape,a=r.length;return X(()=>{let{mean:i,variance:s}=Ig(n,this.axis,!0),o=uu(1,a);for(let p of this.axis)o[p]=r[p];let l=p=>p!=null&&p.shape.length!==a?q(p,o):p,c=this.scale?l(this.gamma.read()):null,u=this.center?l(this.beta.read()):null,d=[],h=[];for(let p=0;p<a;++p)this.axis.indexOf(p)!==-1?(d.push(r[p]),h.push(1)):(d.push(1),h.push(r[p]));return i=da(i,d),s=da(s,d),c!=null&&(c=da(c,h)),u!=null&&(u=da(u,h)),km(n,i,s,u,c,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:on(this.betaInitializer),gammaInitializer:on(this.gammaInitializer),betaRegularizer:Lt(this.betaRegularizer),gammaRegularizer:Lt(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};HC.className="LayerNormalization";ue.registerClass(HC);function Sce(e,t,n){return X(()=>{if(e.rank!==4)throw new Y("temporalPadding expects input tensor to be 4-D, but received a ".concat(e.rank,"-D tensor."));if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new Y("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Bi()),n!=="channelsLast"&&n!=="channelsFirst")throw new Y("Unknown data format: ".concat(n,". Supported data formats are 'channelsLast' and 'channelsFirst."));let r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],Ui(e,r)})}var GC=class extends rt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Bi():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Y("ZeroPadding2D expects padding to be a length-2 array, but received a length-".concat(e.padding.length," array."));let t,n;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Y("ZeroPadding2D expects height padding to be a length-2 array, but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],e.padding[1].length!==2)throw new Y("ZeroPadding2D expects width padding to be a length-2 array, but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new In({ndim:4})]}computeOutputShape(e){e=ft(e);let t,n;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?n=e[3]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],e[1],t,n]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?n=e[2]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],t,n,e[3]])}call(e,t){return X(()=>Sce(Ue(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};GC.className="ZeroPadding2D";ue.registerClass(GC);function jx(e,t,n,r,a,i){return X(()=>{gn(a),QL(i),Xa(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=Bi()),i==null&&(i="max"),e=pC(e,a);let s,o=r==="same"?"same":"valid";return i==="max"?s=Hn(e,t,n,o):s=qs(e,t,n,o),a==="channelsFirst"&&(s=tt(s,[0,3,1,2])),s})}function Kz(e,t,n,r,a,i){return X(()=>{gn(a),QL(i),Xa(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=Bi()),i==null&&(i="max"),e=Vz(e,a);let s,o=r==="same"?"same":"valid";return i==="max"?s=a2(e,t,n,o):s=_$(e,t,n,o),a==="channelsFirst"&&(s=tt(s,[0,4,1,2,3])),s})}var Xz=class extends rt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Y("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.poolSize)));if(Yn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Y("strides for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.strides)));Yn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Xa(this.padding),this.inputSpec=[new In({ndim:3})]}computeOutputShape(e){e=ft(e);let t=Oi(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return X(()=>{this.invokeCallHook(e,t),e=Rg(Ue(e),2);let n=this.poolingFunction(Ue(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return il(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},qC=class extends Xz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return gn(a),Xa(r),jx(e,t,n,r,a,"max")}};qC.className="MaxPooling1D";ue.registerClass(qC);var KC=class extends Xz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return gn(a),Xa(r),jx(e,t,n,r,a,"avg")}};KC.className="AveragePooling1D";ue.registerClass(KC);var Yz=class extends rt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Y("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];Yn(this.poolSize,"poolSize"),Yn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),Xa(this.padding),this.inputSpec=[new In({ndim:4})]}computeOutputShape(e){e=ft(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=Oi(t,this.poolSize[0],this.padding,this.strides[0]),n=Oi(n,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return X(()=>(this.invokeCallHook(e,t),this.poolingFunction(Ue(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},XC=class extends Yz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return gn(a),Xa(r),jx(e,t,n,r,a,"max")}};XC.className="MaxPooling2D";ue.registerClass(XC);var YC=class extends Yz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return gn(a),Xa(r),jx(e,t,n,r,a,"avg")}};YC.className="AveragePooling2D";ue.registerClass(YC);var Jz=class extends rt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Y("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Yn(this.poolSize,"poolSize"),Yn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),Xa(this.padding),this.inputSpec=[new In({ndim:5})]}computeOutputShape(e){e=ft(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=Oi(t,this.poolSize[0],this.padding,this.strides[0]),n=Oi(n,this.poolSize[1],this.padding,this.strides[1]),r=Oi(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return X(()=>(this.invokeCallHook(e,t),this.poolingFunction(Ue(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},JC=class extends Jz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return gn(a),Xa(r),Kz(e,t,n,r,a,"max")}};JC.className="MaxPooling3D";ue.registerClass(JC);var ZC=class extends Jz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return gn(a),Xa(r),Kz(e,t,n,r,a,"avg")}};ZC.className="AveragePooling3D";ue.registerClass(ZC);var Zz=class extends rt{constructor(e){super(e),this.inputSpec=[new In({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new et}},QC=class extends Zz{constructor(e){super(e||{})}call(e,t){return X(()=>{let n=Ue(e);return an(n,1)})}};QC.className="GlobalAveragePooling1D";ue.registerClass(QC);var eT=class extends Zz{constructor(e){super(e||{})}call(e,t){return X(()=>{let n=Ue(e);return Ba(n,1)})}};eT.className="GlobalMaxPooling1D";ue.registerClass(eT);var Qz=class extends rt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),this.inputSpec=[new In({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new et}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},tT=class extends Qz{call(e,t){return X(()=>{let n=Ue(e);return this.dataFormat==="channelsLast"?an(n,[1,2]):an(n,[2,3])})}};tT.className="GlobalAveragePooling2D";ue.registerClass(tT);var nT=class extends Qz{call(e,t){return X(()=>{let n=Ue(e);return this.dataFormat==="channelsLast"?Ba(n,[1,2]):Ba(n,[2,3])})}};nT.className="GlobalMaxPooling2D";ue.registerClass(nT);var eB=class extends rt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=t.layer,a=Mi(r,n);delete t.layer;let i={layer:a};return Object.assign(i,t),new e(i)}},rT=class extends eB{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=ft(e),e.length<3)throw new Y("TimeDistributed layer expects an input shape >= 3D, but received input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=ft(e);let t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return X(()=>(e=Ue(e),Gz((n,r)=>[Ue(this.layer.call(n,t)),[]],e,[],!1,null,null,!1,!0)[1]))}};rT.className="TimeDistributed";ue.registerClass(rT);function Ice(e){Vc(Ele,"BidirectionalMergeMode",e)}var $ce="concat",aT=class extends eB{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=Mi(n),t.goBackwards=t.goBackwards!==!0;let r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=Mi(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?$ce:e.mergeMode,Ice(this.mergeMode),e.weights)throw new et("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let n,r,a;return this.returnState&&(a=t.slice(1)),n=t[0],n=n,this.mergeMode==="concat"?(n[n.length-1]*=2,r=[n]):this.mergeMode==null?r=[n,n.slice()]:r=[n],this.returnState?this.mergeMode==null?r.concat(a).concat(a.slice()):[n].concat(a).concat(a.slice()):qr(r)}apply(e,t){let n=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});let a=Hz(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(n==null||n.length===0)&&r==null)return super.apply(e,t);let i=[],s=[];if(n!=null){let l=n.length;if(l%2>0)throw new Y("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);let c=n.map(u=>new In({shape:u.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),s.push(...c)}if(r!=null)throw new et("Support for constants in Bidirectional layers is not implemented yet.");let o=i[0]instanceof Ei;for(let l of i)if(l instanceof Ei!==o)throw new Y("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let l=[e].concat(i),c=this.inputSpec.concat(s),u=this.inputSpec;this.inputSpec=c;let d=super.apply(l,t);return this.inputSpec=u,d}else return super.apply(e,t)}call(e,t){return X(()=>{let n=t.initialState,r,a;if(n==null)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{let o=n.slice(0,n.length/2),l=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:l}))}let i;this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=Va(a,1));let s;return this.mergeMode==="concat"?s=B2([r,a]):this.mergeMode==="sum"?s=ie(r,a):this.mergeMode==="ave"?s=G(.5,ie(r,a)):this.mergeMode==="mul"?s=G(r,a):this.mergeMode==null&&(s=[r,a]),this.returnState?this.mergeMode==null?s.concat(i):[s].concat(i):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ll(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ll(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let n;if(this.returnSequences?this.mergeMode==null?n=[t,t]:n=t:this.mergeMode==null?n=[null,null]:n=null,this.returnState){let r=this.forwardLayer.states.map(a=>null);return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}else return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=Mi(t.layer);if(delete t.layer,t.numConstants!=null)throw new et("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}};aT.className="Bidirectional";ue.registerClass(aT);var iT=class extends rt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return X(()=>(e=Ue(e),e.dtype!=="float32"&&(e=Vs(e,"float32")),ie(G(e,this.scale),this.offset)))}};iT.className="Rescaling";ue.registerClass(iT);var{resizeBilinear:Cce,cropAndResize:Tce}=Ma,sT=class extends rt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,i,s,o){return X(()=>{let l,c=!1,u=t/i,d=n/s,h=(r+t)/i,p=(a+n)/s,f=[u,d,h,p],m=[];e.rank===3?(c=!0,l=Dn([e])):l=e;for(let v=0;v<l.shape[0];v++)m.push(f);let g=Nr(m,[m.length,4]),b=lu(0,m.length,1,"int32"),y=Tce(l,g,b,[r,a],"nearest");return Vs(c?Ue(fn(y)):y,o)})}upsize(e,t,n,r){return X(()=>{let a=Cce(e,[t,n]);return Vs(a,r)})}call(e,t){return X(()=>{let n=Ue(e),r=n.dtype,a=n.shape,i=a[a.length-3],s=a[a.length-2],o=0;i!==this.height&&(o=Math.floor((i-this.height)/2));let l=0;return s!==this.width&&(l=Math.floor((s-this.width)/2),l===0&&(l=1)),o>=0&&l>=0?this.centerCrop(n,o,l,this.height,this.width,i,s,r):this.upsize(e,this.height,this.width,r)})}getConfig(){let e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=ft(e);let t=e.length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}};sT.className="CenterCrop";ue.registerClass(sT);function Ece(e,t,n,r){let a=Ue(e);if(a.dtype!=="int32"&&(a=Vs(a,"int32")),t==="int")return a;let i=a.shape;if(a.rank===0&&(a=rr(a,-1)),t==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=rr(a,-1)),a.rank>2)throw new Y("When outputMode is not int, maximum output rank is 2 Received outputMode ".concat(t," and input shape ").concat(i," which would result in output rank ").concat(a.rank,"."));let s=["multiHot","oneHot"].includes(t),o=a,l;if(typeof r<"u"&&t==="count"?l=pv(o,r,n,s):l=pv(o,[],n,s),t!=="tfIdf")return l;if(r)return G(l,r);throw new Y("When outputMode is 'tfIdf', weights must be provided.")}var oT=class extends rt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=ft(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return X(()=>{e=Ue(e),e.dtype!=="int32"&&(e=Vs(e,"int32"));let n;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new Y("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=Ue(t.countWeights)}let r=Ba(e),a=eh(e),i=Wr(this.numTokens,r).bufferSync().get(0),s=Ks(a,0).bufferSync().get(0);if(!(i&&s))throw new Y("Input values must be between 0 < values <= numTokens with numTokens=".concat(this.numTokens));return Ece(e,this.outputMode,this.numTokens,n)})}};oT.className="CategoryEncoding";ue.registerClass(oT);var Nce=["bilinear","nearest"],cR=new Set(Nce),lT=class extends rt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(cR.has(e.interpolation))this.interpolation=e.interpolation;else throw new Y("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=ft(e);let t=e[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return X(()=>{let n=[this.height,this.width];if(this.interpolation==="bilinear")return Ma.resizeBilinear(e,n,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ma.resizeNearestNeighbor(e,n,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...cR]," are supported"))})}};lT.className="Resizing";ue.registerClass(lT);var tB=class{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}};tB.className="RandomSeed";var nB=class extends rt{constructor(e){super(e),this.randomGenerator=new tB(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}};nB.className="BaseRandomLayer";var _ce=["bilinear","nearest"],dR=new Set(_ce),uT=class extends nB{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Y("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));if(this.widthLower<-1||this.widthUpper<-1)throw new Y("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new Y("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n)if(dR.has(n))this.interpolation=n;else throw new Y("Invalid interpolation parameter: ".concat(n," is not implemented"))}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=ft(e);let t=e[2];return[this.imgHeight,-1,t]}call(e,t){return X(()=>{let n=Ue(e);this.imgHeight=n.shape[n.shape.length-3];let r=n.shape[n.shape.length-2];this.widthFactor=rl([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*r;a=Math.round(a);let i=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return Ma.resizeBilinear(e,i);case"nearest":return Ma.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...dR]," are supported"))}})}};uT.className="RandomWidth";ue.registerClass(uT);function Ace(e){return new Fp(e)}function Rce(e){return new cC(e)}function Dce(e){return new oC(e)}function Fce(e){return new lC(e)}function Mce(e){return new uC(e)}function Oce(e){return new hC(e)}function Pce(e){return new dC(e)}function Lce(e){return new Lx(e)}function zce(e){return new Lg(e)}function Bce(e){return new mC(e)}function Wce(e){return new zg(e)}function Uce(e){return new gC(e)}function Vce(e){return new bC(e)}function jce(e){return new yC(e)}function Hce(e){return new vC(e)}function Gce(e){return new xC(e)}function qce(e){return new EC(e)}function Kce(e){return new CC(e)}function Xce(e){return new Vx(e)}function Yce(e){return new $C(e)}function Jce(e){return new TC(e)}function Zce(e){return new NC(e)}function Qce(e){return new _C(e)}function ede(e){return new AC(e)}function tde(e){return new DC(e)}function nde(e){return new FC(e)}function rde(e){return new OC(e)}function ade(e){return new zC(e)}function ide(e){return new PC(e)}function sde(e){return new LC(e)}function ode(e){return new MC(e)}function lde(e){return new BC(e)}function ude(e){return new jC(e)}function cde(e){return new HC(e)}function dde(e){return new GC(e)}function cT(e){return new KC(e)}function hde(e){return cT(e)}function pde(e){return cT(e)}function dT(e){return new YC(e)}function fde(e){return dT(e)}function mde(e){return dT(e)}function hT(e){return new ZC(e)}function gde(e){return hT(e)}function bde(e){return hT(e)}function yde(e){return new QC(e)}function vde(e){return new tT(e)}function rB(e){return new eT(e)}function aB(e){return new nT(e)}function iB(e){return new qC(e)}function sB(e){return new XC(e)}function xde(e){return new JC(e)}function wde(e){return new kC(e)}function kde(e){return new Bx(e)}function Sde(e){return new SC(e)}function Ide(e){return new Wg(e)}function $de(e){return new wC(e)}function Cde(e){return new zx(e)}function Tde(e){return new IC(e)}function Ede(e){return new Ux(e)}function Nde(e){return new ys(e)}function _de(e){return new Wx(e)}function Ade(e){return new aT(e)}function Rde(e){return new rT(e)}var Dde=rB,Fde=aB,Mde=iB,Ode=sB;function Pde(e){return new WC(e)}function Lde(e){return new UC(e)}function zde(e){return new VC(e)}function Bde(e){return new RC(e)}function Wde(e){return new iT(e)}function Ude(e){return new sT(e)}function Vde(e){return new lT(e)}function jde(e){return new oT(e)}function Hde(e){return new uT(e)}var oB={};He(oB,{MAPE:()=>nhe,MSE:()=>ihe,binaryAccuracy:()=>Gde,binaryCrossentropy:()=>qde,categoricalAccuracy:()=>Xde,categoricalCrossentropy:()=>Yde,cosineProximity:()=>Qde,mape:()=>rhe,meanAbsoluteError:()=>ehe,meanAbsolutePercentageError:()=>the,meanSquaredError:()=>ahe,mse:()=>she,precision:()=>Jde,recall:()=>Zde,sparseCategoricalAccuracy:()=>Kde});function Gde(e,t){return tC(e,t)}function qde(e,t){return vz(e,t)}function Kde(e,t){return xz(e,t)}function Xde(e,t){return nC(e,t)}function Yde(e,t){return rC(e,t)}function Jde(e,t){return yz(e,t)}function Zde(e,t){return Rue(e,t)}function Qde(e,t){return eC(e,t)}function ehe(e,t){return Ox(e,t)}function the(e,t){return Mp(e,t)}function nhe(e,t){return Mp(e,t)}function rhe(e,t){return Mp(e,t)}function ahe(e,t){return jc(e,t)}function ihe(e,t){return jc(e,t)}function she(e,t){return jc(e,t)}var lB={};He(lB,{modelFromJSON:()=>sce});var uB={};He(uB,{l1:()=>lhe,l1l2:()=>ohe,l2:()=>uhe});function ohe(e){return new Og(e)}function lhe(e){return pce(e)}function uhe(e){return fce(e)}var cB=class extends uh{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Ms))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function Mb(e,t){return e<t}function hR(e,t){return e>t}var dB=class extends cB{constructor(e){if(super(),e==null&&(e={}),e.restoreBestWeights)throw new et("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn("EarlyStopping mode '".concat(this.mode,"' is invalid. Falling back to mode 'auto'.")),this.mode="auto"),this.mode==="min"?this.monitorFunc=Mb:this.mode==="max"?this.monitorFunc=hR:this.monitor.indexOf("acc")!==-1?this.monitorFunc=hR:this.monitorFunc=Mb,this.monitorFunc===Mb&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===Mb?1/0:-1/0}async onEpochEnd(e,t){await no(t);let n=this.getMonitorValue(t);n!=null&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."))}getMonitorValue(e){e==null&&(e={});let t=e[this.monitor];return t==null&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. Available metrics are: ").concat(Object.keys(e))),t}};function che(e){return new dB(e)}var dhe={earlyStopping:che},hhe=Q();hhe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Qa;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(Qa||(Qa={}));var pR;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(pR||(pR={}));var pT={};function phe(e,t){let n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};pT[e]=n}function hB(e){return pT[e]}function fhe(e){delete pT[e]}function S(e,t,n,r,a){let i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){let o=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,c=o<0?t.inputNames.length+o:o;if(i.type==="tensor")return ar(t.inputNames[c],n,r,a);if(i.type==="tensors"){let h=t.inputs.slice(o,l);return t.inputNames.slice(o,l).filter((p,f)=>{var m;return((m=h[f])===null||m===void 0?void 0:m.op)!=="NoOp"}).map(p=>ar(p,n,r,a))}let u=ar(t.inputNames[c],n,r,a),d=u.dataSync();return i.type==="number"?d[0]:k.toNestedArray(u.shape,d)}let s=t.attrParams[e];return s&&s.value}function ar(e,t,n,r){let[a,i]=sa(e,n);if(r!=null){let o=r.getHashTableHandleByName(a);if(o!=null)return o}let s=n.currentContextIds.find(o=>!!t[Sv(a,o)]);return s!==void 0?t[Sv(a,s)][i]:void 0}function fR(e,t,n){return t[Sv(e,n.currentContextId)]}function $s(e,t){let[n,r,a]=sa(e,t);return[Sv(n,t&&t.currentContextId),r,a]}function Sv(e,t){return t?"".concat(e,"-").concat(t):e}function sa(e,t){if(e==="")return["",0,void 0];let n=t!=null&&t.parseNodeNameCache!=null;if(n){let i=t.parseNodeNameCache.get(e);if(i!=null)return i}let r=e.split(":"),a;if(r.length===1)a=[e,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);a=[i,o,s]}return n&&t.parseNodeNameCache.set(e,a),a}function ly(e,t,n){let r=S("pad",e,t,n);if(r==="explicit"){r=S("explicitPaddings",e,t,n);let a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Cs(e){return e.kept?e:ls(e)}var pB={};He(pB,{json:()=>mhe});var mhe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fB={};He(fB,{json:()=>ghe});var ghe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mB={};He(mB,{json:()=>bhe});var bhe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],gB={};He(gB,{json:()=>yhe});var yhe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],bB={};He(bB,{json:()=>vhe});var vhe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],yB={};He(yB,{json:()=>xhe});var xhe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],vB={};He(vB,{json:()=>whe});var whe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],xB={};He(xB,{json:()=>khe});var khe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],wB={};He(wB,{json:()=>She});var She=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],kB={};He(kB,{json:()=>Ihe});var Ihe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],SB={};He(SB,{json:()=>$he});var $he=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],IB={};He(IB,{json:()=>Che});var Che=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],$B={};He($B,{json:()=>The});var The=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],CB={};He(CB,{json:()=>Ehe});var Ehe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],TB={};He(TB,{json:()=>Nhe});var Nhe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],EB={};He(EB,{json:()=>_he});var _he=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],NB={};He(NB,{json:()=>Ahe});var Ahe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],_B={};He(_B,{json:()=>Rhe});var Rhe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],AB={};He(AB,{json:()=>Dhe});var Dhe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],mR=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[pB,fB,mB,gB,bB,yB,vB,xB,wB,kB,SB,IB,$B,CB,TB,EB,NB,_B,AB],t=[].concat(...e.map(n=>n.json));this.opMappers=t.reduce((n,r)=>(n[r.tfOpName]=r,n),{})}transformGraph(e,t={}){let n=e.node,r=[],a=[],i=[],s=n.reduce((f,m)=>(f[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?r.push(f[m.name]):m.op==="Const"?a.push(f[m.name]):(m.input==null||m.input.length===0)&&i.push(f[m.name]),f),{}),o=[],l=[],c={},u={};t!=null&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));let d=Object.keys(s);d.forEach(f=>{let m=s[f];m.inputNames.forEach((g,b)=>{let[y,,v]=$s(g),x=s[y];if(x.outputs!=null){let w=x.outputs.indexOf(v);if(w!==-1){let $="".concat(y,":").concat(w);m.inputNames[b]=$}}m.inputs.push(x),x.children.push(m)})}),Object.keys(u).length===0?d.forEach(f=>{let m=s[f];m.children.length===0&&l.push(m)}):Object.keys(u).forEach(f=>{let[m]=$s(f),g=s[m];g!=null&&(g.signatureKey=u[f],l.push(g))}),Object.keys(c).length>0?Object.keys(c).forEach(f=>{let[m]=$s(f),g=s[m];g&&(g.signatureKey=c[f],o.push(g))}):o=r;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((f,m)=>(f[m.signature.name]=this.mapFunction(m),f),{}));let p={nodes:s,inputs:o,outputs:l,weights:a,placeholders:r,signature:t,functions:h};return i.length>0&&(p.initNodes=i),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=hB(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(n.inputParams=t.inputs.reduce((r,a)=>(r[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},r),{})),t.attrs!=null&&(n.attrParams=t.attrs.reduce((r,a)=>{let i=a.type,s;switch(a.type){case"string":s=Qk(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=Qk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":s=sS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=sS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":s=tS(e.attr,a.tfName,a.defaultValue||0),s===void 0&&a.tfDeprecatedName&&(s=tS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":s=iS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=iS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":s=eS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=eS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":s=lS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=lS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":s=aS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=aS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":s=oS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=oS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":s=nS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=nS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":s=rS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=rS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":s=gR(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=gR(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(a.type," for op: ").concat(e.op))}return r[a.name]={value:s,type:i},r},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r=[],a={};t!=null&&(a=t.reduce((c,u)=>(c[u.name]=this.mapNode(u),u.op==="Const"&&r.push(c[u.name]),c),{}));let i=[],s=[];e.signature.inputArg.forEach(c=>{let[u]=$s(c.name),d={name:u,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:fT(c.type),type:"dtype"}},children:[]};d.signatureKey=c.name,i.push(d),a[u]=d}),Object.keys(a).forEach(c=>{let u=a[c];u.inputNames.forEach((d,h)=>{let[p,,f]=$s(d),m=a[p];if(m.outputs!=null){let g=m.outputs.indexOf(f);if(g!==-1){let b="".concat(p,":").concat(g);u.inputNames[h]=b}}u.inputs.push(m),m.children.push(u)})});let o=e.ret;e.signature.outputArg.forEach(c=>{let[u,d]=$s(o[c.name]),h=a[u];h!=null&&(h.defaultOutput=d,s.push(h))});let l=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:s,weights:r,placeholders:n,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n),t),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return t!=null&&(n=t[n]),{name:n,dtype:e.type}}};function Fhe(e){let t=Q().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function RB(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):Fhe(e);return t?n:n.toLowerCase()}function Qk(e,t,n,r=!1){let a=e[t];return a!=null?RB(a.s,r):n}function eS(e,t,n){let r=e[t];return r?r.b:n}function tS(e,t,n){let r=e[t]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function fT(e){switch(typeof e=="string"&&(e=Qa[e]),e){case Qa.DT_FLOAT:case Qa.DT_HALF:return"float32";case Qa.DT_INT32:case Qa.DT_INT64:case Qa.DT_INT8:case Qa.DT_UINT8:return"int32";case Qa.DT_BOOL:return"bool";case Qa.DT_DOUBLE:return"float32";case Qa.DT_STRING:return"string";default:return null}}function gR(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function nS(e,t,n){let r=e[t];return r&&r.type?fT(r.type):n}function rS(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(a=>fT(a)):n}function DB(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function aS(e,t,n){let r=e[t];return r&&r.shape?DB(r.shape):n}function iS(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function sS(e,t,n,r=!1){let a=e[t];return a&&a.list&&a.list.s?a.list.s.map(i=>RB(i,r)):n}function oS(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(a=>DB(a)):n}function lS(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Mhe=class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,a)=>(r[a]=this.getAttr(a),r),{}))}getInput(e){return ar(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(n.tensor!=null)return ar(e,this.tensorMap,this.context);if(n.i!=null||n.f!=null)return tS(this.node.rawAttrs,e,t);if(n.s!=null)return Qk(this.node.rawAttrs,e,t);if(n.b!=null)return eS(this.node.rawAttrs,e,t);if(n.shape!=null)return aS(this.node.rawAttrs,e,t);if(n.type!=null)return nS(this.node.rawAttrs,e,t);if(n.list!=null){if(n.list.i!=null||n.list.f!=null)return iS(this.node.rawAttrs,e,t);if(n.list.s!=null)return sS(this.node.rawAttrs,e,t);if(n.list.shape!=null)return oS(this.node.rawAttrs,e,t);if(n.list.b!=null)return lS(this.node.rawAttrs,e,t);if(n.list.type!=null)return rS(this.node.rawAttrs,e,t)}return t}},er={};He(er,{OP_SCOPE_SUFFIX:()=>b$,abs:()=>kn,acos:()=>w$,acosh:()=>k$,add:()=>ie,addN:()=>oP,all:()=>K0,any:()=>gm,argMax:()=>ru,argMin:()=>S$,asin:()=>I$,asinh:()=>$$,atan:()=>C$,atan2:()=>T$,atanh:()=>E$,avgPool:()=>qs,avgPool3d:()=>_$,basicLSTMCell:()=>dP,batchNorm:()=>zc,batchNorm2d:()=>A$,batchNorm3d:()=>R$,batchNorm4d:()=>D$,batchToSpaceND:()=>yg,bincount:()=>F$,bitwiseAnd:()=>hP,booleanMaskAsync:()=>nL,broadcastArgs:()=>pP,broadcastTo:()=>Pl,buffer:()=>nt,cast:()=>me,ceil:()=>M$,clipByValue:()=>xr,clone:()=>ls,complex:()=>Ws,concat:()=>_t,concat1d:()=>O$,concat2d:()=>P$,concat3d:()=>L$,concat4d:()=>z$,conv1d:()=>X0,conv2d:()=>Dr,conv2dTranspose:()=>Y0,conv3d:()=>W$,conv3dTranspose:()=>U$,cos:()=>vg,cosh:()=>J0,cosineWindow:()=>xx,cumprod:()=>vm,cumsum:()=>Z0,denseBincount:()=>pv,depthToSpace:()=>V$,depthwiseConv2d:()=>Bc,diag:()=>mP,dilation2d:()=>j$,div:()=>Ce,divNoNan:()=>H$,dot:()=>G$,dropout:()=>k2,einsum:()=>bP,elu:()=>Tp,enclosingPowerOfTwo:()=>S2,ensureShape:()=>yP,equal:()=>va,erf:()=>q$,euclideanNorm:()=>Y$,exp:()=>Fr,expandDims:()=>rr,expm1:()=>J$,eye:()=>Q0,fft:()=>Eg,fill:()=>ga,floor:()=>Np,floorDiv:()=>q0,fused:()=>sh,gather:()=>_p,gatherND:()=>sL,greater:()=>Wr,greaterEqual:()=>Ks,ifft:()=>ih,imag:()=>xg,image:()=>Ma,inTopKAsync:()=>oL,irfft:()=>px,isFinite:()=>Z$,isInf:()=>Q$,isNaN:()=>e2,leakyRelu:()=>wg,less:()=>th,lessEqual:()=>nl,linalg:()=>C2,linspace:()=>SP,localResponseNormalization:()=>t2,log:()=>xa,log1p:()=>kg,logSigmoid:()=>n2,logSoftmax:()=>tx,logSumExp:()=>nx,logicalAnd:()=>di,logicalNot:()=>Sg,logicalOr:()=>rx,logicalXor:()=>r2,losses:()=>vL,lowerBound:()=>$P,matMul:()=>Qe,max:()=>Ba,maxPool:()=>Hn,maxPool3d:()=>a2,maxPoolWithArgmax:()=>CP,maximum:()=>gs,mean:()=>an,meshgrid:()=>TP,min:()=>eh,minimum:()=>Po,mirrorPad:()=>i2,mod:()=>s2,moments:()=>Ig,movingAverage:()=>rL,mul:()=>G,multiRNNCell:()=>EP,multinomial:()=>NP,neg:()=>jt,norm:()=>Ep,notEqual:()=>ou,oneHot:()=>nh,ones:()=>ha,onesLike:()=>wa,op:()=>V,outerProduct:()=>_P,pad:()=>Ui,pad1d:()=>AP,pad2d:()=>RP,pad3d:()=>DP,pad4d:()=>FP,pool:()=>o2,pow:()=>Us,prelu:()=>Cg,print:()=>x$,prod:()=>l2,raggedGather:()=>MP,raggedRange:()=>OP,raggedTensorToTensor:()=>PP,rand:()=>LP,randomGamma:()=>UP,randomNormal:()=>ix,randomStandardNormal:()=>VP,randomUniform:()=>rl,randomUniformInt:()=>jP,range:()=>lu,real:()=>rh,reciprocal:()=>p2,relu:()=>It,relu6:()=>sx,reshape:()=>q,reverse:()=>Va,reverse1d:()=>HP,reverse2d:()=>GP,reverse3d:()=>qP,reverse4d:()=>KP,rfft:()=>Ng,round:()=>ox,rsqrt:()=>lx,scalar:()=>Me,scatterND:()=>aL,searchSorted:()=>ax,selu:()=>ux,separableConv2d:()=>Ap,setdiff1dAsync:()=>XP,sigmoid:()=>li,sign:()=>f2,signal:()=>yL,sin:()=>cx,sinh:()=>dx,slice:()=>at,slice1d:()=>Tg,slice2d:()=>hx,slice3d:()=>Rp,slice4d:()=>ah,softmax:()=>al,softplus:()=>Wc,spaceToBatchND:()=>$g,sparse:()=>xL,sparseToDense:()=>iL,spectral:()=>bL,split:()=>Xr,sqrt:()=>lr,square:()=>Et,squaredDifference:()=>fx,squeeze:()=>il,stack:()=>Dn,step:()=>Uc,stridedSlice:()=>m2,string:()=>wL,sub:()=>Se,sum:()=>Ee,tan:()=>g2,tanh:()=>iu,tensor:()=>Nr,tensor1d:()=>St,tensor2d:()=>us,tensor3d:()=>mx,tensor4d:()=>Lo,tensor5d:()=>YP,tensor6d:()=>JP,tensorScatterUpdate:()=>QP,tile:()=>da,topk:()=>y2,transpose:()=>tt,truncatedNormal:()=>yx,unique:()=>v2,unsortedSegmentSum:()=>vx,unstack:()=>fn,upperBound:()=>eL,variable:()=>x2,where:()=>Jn,whereAsync:()=>w2,zeros:()=>sn,zerosLike:()=>ut});var Ohe=(e,t,n,r=er)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(S("a",e,t,n),S("b",e,t,n))];case"AddN":return[r.addN(S("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(S("a",e,t,n),S("b",e,t,n))];case"Mul":return[r.mul(S("a",e,t,n),S("b",e,t,n))];case"RealDiv":case"Div":return[r.div(S("a",e,t,n),S("b",e,t,n))];case"DivNoNan":return[r.divNoNan(S("a",e,t,n),S("b",e,t,n))];case"FloorDiv":return[r.floorDiv(S("a",e,t,n),S("b",e,t,n))];case"Sub":return[r.sub(S("a",e,t,n),S("b",e,t,n))];case"Minimum":return[r.minimum(S("a",e,t,n),S("b",e,t,n))];case"Maximum":return[r.maximum(S("a",e,t,n),S("b",e,t,n))];case"Pow":return[r.pow(S("a",e,t,n),S("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(S("a",e,t,n),S("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Phe=(e,t,n,r=er)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(S("x",e,t,n))];case"Acos":return[r.acos(S("x",e,t,n))];case"Acosh":return[r.acosh(S("x",e,t,n))];case"Asin":return[r.asin(S("x",e,t,n))];case"Asinh":return[r.asinh(S("x",e,t,n))];case"Atan":return[r.atan(S("x",e,t,n))];case"Atan2":return[r.atan2(S("x",e,t,n),S("y",e,t,n))];case"Atanh":return[r.atanh(S("x",e,t,n))];case"Ceil":return[r.ceil(S("x",e,t,n))];case"Complex":return[r.complex(S("real",e,t,n),S("imag",e,t,n))];case"Cos":return[r.cos(S("x",e,t,n))];case"Cosh":return[r.cosh(S("x",e,t,n))];case"Elu":return[r.elu(S("x",e,t,n))];case"Erf":return[r.erf(S("x",e,t,n))];case"Exp":return[r.exp(S("x",e,t,n))];case"Expm1":return[r.expm1(S("x",e,t,n))];case"Floor":return[r.floor(S("x",e,t,n))];case"Log":return[r.log(S("x",e,t,n))];case"Log1p":return[r.log1p(S("x",e,t,n))];case"Imag":return[r.imag(S("x",e,t,n))];case"Neg":return[r.neg(S("x",e,t,n))];case"Reciprocal":return[r.reciprocal(S("x",e,t,n))];case"Real":return[r.real(S("x",e,t,n))];case"Relu":return[r.relu(S("x",e,t,n))];case"Round":return[r.round(S("x",e,t,n))];case"Selu":return[r.selu(S("x",e,t,n))];case"Sigmoid":return[r.sigmoid(S("x",e,t,n))];case"Sin":return[r.sin(S("x",e,t,n))];case"Sign":return[r.sign(S("x",e,t,n))];case"Sinh":return[r.sinh(S("x",e,t,n))];case"Softplus":return[r.softplus(S("x",e,t,n))];case"Sqrt":return[r.sqrt(S("x",e,t,n))];case"Square":return[r.square(S("x",e,t,n))];case"Tanh":return[r.tanh(S("x",e,t,n))];case"Tan":return[r.tan(S("x",e,t,n))];case"ClipByValue":return[r.clipByValue(S("x",e,t,n),S("clipValueMin",e,t,n),S("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(S("x",e,t,n))];case"Rsqrt":return[r.rsqrt(ar(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(S("x",e,t,n),S("alpha",e,t,n))];case"Prelu":return[r.prelu(S("x",e,t,n),S("alpha",e,t,n))];case"IsNan":return[r.isNaN(ar(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(ar(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(ar(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function ri(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){k.assert(e.length===t.length,()=>n+" Shapes ".concat(e," and ").concat(t," must match"));for(let r=0;r<e.length;r++){let a=e[r],i=t[r];k.assert(a<0||i<0||a===i,()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}}}function bR(e){return!(typeof e=="number"||e.some(t=>t<0))}function uf(e,t,n){let r=uS(e,n),a=!bR(r);if(a&&t.length===0)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach(i=>{r=uS(i.shape,r)}),!bR(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function uS(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));let n=[];for(let r=0;r<e.length;++r){let a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var Lhe=class{constructor(e,t,n,r,a,i,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Me(0),An(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));let t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),ri(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,An(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((n,r)=>this.write(n,t[r]))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return Nr([],[0].concat(this.elementShape));let n=this.readMany(e);return ri(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Dn(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(this.size()===0)return Nr([],[0].concat(this.elementShape));let t=[];for(let r=0;r<this.size();r++)t.push(r);let n=this.readMany(t);return ri(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),_t(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,fn(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0,r=e.map(o=>(n+=o,n));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));let a=n===0?0:t.size/n,i=[];X(()=>{t=q(t,[1,n,a]);for(let o=0;o<e.length;++o){let l=[0,o===0?0:r[o-1],0],c=[1,e[o],a];i[o]=q(at(t,l,c),this.elementShape)}return i});let s=[];for(let o=0;o<e.length;o++)s[o]=o;this.writeMany(s,i)}},dh=class{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,e!=null&&e.forEach(a=>{if(n!==a.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(a.dtype));ri(t,a.shape,"TensorList shape mismatch: "),An(a)}),this.idTensor=Me(0),this.maxNumElements=r,An(this.idTensor)}copy(){return new dh([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(n!==-1&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));ri(e,this.elementShape,"TensorList shape mismatch: ");let r=uf(this.elementShape,this.tensors,e);return X(()=>{let a=this.tensors.map(i=>q(i,r));return Dn(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(this.size()===0)throw new Error("Trying to pop from an empty list.");let n=uf(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,ri(r.shape,e,"TensorList shape mismatch: "),q(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(ri(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");An(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));let t=new dh([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(this.tensors[e]==null)throw new Error("element at index ".concat(e," is null."));ri(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=uf(this.elementShape,this.tensors,t);return q(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));ri(this.elementShape,t.shape,"TensorList shape mismatch: "),An(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));ri(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=uf(this.elementShape,this.tensors,n);return e.length===0?Nr([],[0].concat(r)):X(()=>{let a=e.map(i=>q(this.tensors[i],r));return Dn(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));ri(this.elementShape,t,"TensorList shape mismatch: ");let n=uf(this.elementShape,this.tensors,t);return this.size()===0?Nr([],[0].concat(n)):X(()=>{let r=this.tensors.map(a=>q(a,n));return _t(r,0)})}};function zhe(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));let a=e.shape.slice(1);ri(a,t,"TensorList shape mismatch: ");let i=fn(e);return new dh(i,t,r)}function Bhe(e,t,n,r){return new dh([],e,t,r)}function Whe(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));let a=Math.max(...t);if(r!=null&&r!==-1&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));let i=new dh([],n,e.dtype,r),s=fn(e,0);return t.forEach((o,l)=>{i.setItem(o,s[l])}),i}function Uhe(e,t,n){let r=0,a=t.map(u=>(r+=u,r));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));let i=e.shape.slice(1),s=uS(i,n),o=r===0?0:e.size/r,l=X(()=>{let u=[];e=q(e,[1,r,o]);for(let d=0;d<t.length;++d){let h=[0,d===0?0:a[d-1],0],p=[1,t[d],o];u[d]=q(at(e,h,p),s)}return e.dispose(),u}),c=new dh([],n,e.dtype,t.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var Vhe=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=S("thenBranch",e,t,n),a=S("elseBranch",e,t,n),i=S("cond",e,t,n),s=S("args",e,t,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=S("body",e,t,n),a=S("cond",e,t,n),i=S("args",e,t,n),s=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(u=>u.id),l=await s[0].data();s.forEach(u=>{!u.kept&&o.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let d=c.map(p=>p.id);u.forEach(p=>{!p.kept&&o.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});let h=await n.functionMap[a].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(p=>{!p.kept&&o.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return c}case"LoopCond":{let r=S("pred",e,t,n);return[Cs(r)]}case"Switch":{let r=S("pred",e,t,n),a=S("data",e,t,n);return a.kept||(a=Cs(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let r=e.inputNames.find(a=>ar(a,t,n)!==void 0);if(r){let a=ar(r,t,n);return[Cs(a)]}return}case"Enter":{let r=S("frameName",e,t,n),a=S("tensor",e,t,n);return n.enterFrame(r),[Cs(a)]}case"Exit":{let r=S("tensor",e,t,n);return n.exitFrame(),[Cs(r)]}case"NextIteration":{let r=S("tensor",e,t,n);return n.nextIteration(),[Cs(r)]}case"TensorArrayV3":{let r=S("size",e,t,n),a=S("dtype",e,t,n),i=S("elementShape",e,t,n),s=S("dynamicSize",e,t,n),o=S("clearAfterRead",e,t,n),l=S("identicalElementShapes",e,t,n),c=S("name",e,t,n),u=new Lhe(c,a,r,i,l,s,o);return n.addTensorArray(u),[u.idTensor,Me(1)]}case"TensorArrayWriteV3":{let r=S("tensorArrayId",e,t,n),a=S("index",e,t,n),i=S("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(a,i),[s.idTensor]}case"TensorArrayReadV3":{let r=S("tensorArrayId",e,t,n),a=S("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{let r=S("tensorArrayId",e,t,n),a=S("indices",e,t,n),i=S("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{let r=S("tensorArrayId",e,t,n),a=S("indices",e,t,n),i=S("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(a,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=S("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),i=S("dtype",e,t,n);return[a.concat(i)]}case"TensorArraySplitV3":{let r=S("tensorArrayId",e,t,n),a=S("tensor",e,t,n),i=S("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,a),[s.idTensor]}case"TensorArraySizeV3":{let r=S("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return[Me(a.size(),"int32")]}case"TensorArrayCloseV3":{let r=S("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let r=S("tensorListId",e,t,n),a=S("index",e,t,n),i=S("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(a,i),[s.idTensor]}case"TensorListGetItem":{let r=S("tensorListId",e,t,n),a=S("index",e,t,n),i=S("elementShape",e,t,n),s=S("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=S("indices",e,t,n),a=S("tensor",e,t,n),i=S("elementShape",e,t,n),s=S("numElements",e,t,n),o=Whe(a,r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=S("elementShape",e,t,n),a=S("elementDType",e,t,n),i;e.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=S(i,e,t,n),o=e.op==="TensorListReserve"?-1:s,l=Bhe(r,a,s,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=S("tensorListId",e,t,n),a=S("indices",e,t,n),i=S("elementShape",e,t,n),s=S("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,s,i)]}case"TensorListStack":{let r=S("tensorListId",e,t,n),a=S("elementShape",e,t,n),i=S("elementDType",e,t,n),s=S("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,i,s)]}case"TensorListFromTensor":{let r=S("tensor",e,t,n),a=S("elementShape",e,t,n),i=S("elementDType",e,t,n),s=zhe(r,a,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=S("tensorListId",e,t,n),a=n.getTensorList(r.id),i=S("dtype",e,t,n),s=S("elementShape",e,t,n);return[a.concat(i,s)]}case"TensorListPushBack":{let r=S("tensorListId",e,t,n),a=S("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{let r=S("tensorListId",e,t,n),a=S("elementShape",e,t,n),i=S("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{let r=S("tensor",e,t,n),a=S("elementShape",e,t,n),i=S("lengths",e,t,n),s=Uhe(r,i,a);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=S("tensorListId",e,t,n),a=n.getTensorList(r.id);return[Me(a.size(),"int32")]}case"TensorListResize":{let r=S("tensorListId",e,t,n),a=S("size",e,t,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function yR(e,t,n){let[r,a]=S("fusedOps",e,t,n),i=r==="biasadd",s=!i,o=a==="prelu",l=r==="fusedbatchnorm",c=S("numArgs",e,t,n);if(i){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=S("strides",e,t,n),d=ly(e,t,n),h=S("dataFormat",e,t,n).toUpperCase(),p=S("dilations",e,t,n),[f,m]=S("args",e,t,n);s&&(m=f,f=void 0);let g=S("leakyreluAlpha",e,t,n);return{stride:u,pad:d,dataFormat:h,dilations:p,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:g}}var jhe=(e,t,n,r=er)=>{switch(e.op){case"Conv1D":{let a=S("stride",e,t,n),i=S("pad",e,t,n),s=S("dataFormat",e,t,n).toUpperCase(),o=S("dilation",e,t,n);return[r.conv1d(S("x",e,t,n),S("filter",e,t,n),a,i,s,o)]}case"Conv2D":{let a=S("strides",e,t,n),i=ly(e,t,n),s=S("dataFormat",e,t,n).toUpperCase(),o=S("dilations",e,t,n);return[r.conv2d(S("x",e,t,n),S("filter",e,t,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":{let{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=yR(e,t,n);return[r.fused.conv2d({x:S("x",e,t,n),filter:S("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=yR(e,t,n);return[r.fused.depthwiseConv2d({x:S("x",e,t,n),filter:S("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=S("outputShape",e,t,n),i=S("strides",e,t,n),s=ly(e,t,n);return[r.conv2dTranspose(S("x",e,t,n),S("filter",e,t,n),a,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=S("strides",e,t,n),i=ly(e,t,n),s=S("dilations",e,t,n),o=S("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(S("input",e,t,n),S("filter",e,t,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"Conv3D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("dataFormat",e,t,n).toUpperCase(),o=S("dilations",e,t,n);return[r.conv3d(S("x",e,t,n),S("filter",e,t,n),[a[1],a[2],a[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.avgPool(S("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPool":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.maxPool(S("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n),o=S("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(S("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i,o);return[l,c]}case"AvgPool3D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.avgPool3d(S("x",e,t,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.maxPool3d(S("x",e,t,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("dilations",e,t,n),o=a[1],l=a[2],c=s[1],u=s[2];return[r.dilation2d(S("x",e,t,n),S("filter",e,t,n),[o,l],i,[c,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Hhe=(e,t,n,r=er)=>{switch(e.op){case"Fill":{let a=S("shape",e,t,n),i=S("dtype",e,t,n),s=S("value",e,t,n);return[r.fill(a,s,i)]}case"LinSpace":{let a=S("start",e,t,n),i=S("stop",e,t,n),s=S("num",e,t,n);return[r.linspace(a,i,s)]}case"Multinomial":{let a=S("logits",e,t,n),i=S("numSamples",e,t,n),s=S("seed",e,t,n);return[r.multinomial(a,i,s)]}case"OneHot":{let a=S("indices",e,t,n),i=S("depth",e,t,n),s=S("onValue",e,t,n),o=S("offValue",e,t,n),l=S("dtype",e,t,n);return[r.oneHot(a,i,s,o,l)]}case"Ones":return[r.ones(S("shape",e,t,n),S("dtype",e,t,n))];case"OnesLike":return[r.onesLike(S("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(S("shape",e,t,n),S("dtype",e,t,n),S("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(S("shape",e,t,n),S("minval",e,t,n),S("maxval",e,t,n),S("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(S("shape",e,t,n),S("minval",e,t,n),S("maxval",e,t,n),S("seed",e,t,n))];case"Range":{let a=S("start",e,t,n),i=S("stop",e,t,n),s=S("step",e,t,n);return[r.range(a,i,s,S("dtype",e,t,n))]}case"TruncatedNormal":{let a=S("shape",e,t,n),i=S("mean",e,t,n),s=S("stdDev",e,t,n),o=S("seed",e,t,n);return[r.truncatedNormal(a,i,s,S("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(S("shape",e,t,n),S("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(S("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function s1(e,t,n){let r=S("boxes",e,t,n),a=S("scores",e,t,n),i=S("maxOutputSize",e,t,n),s=S("iouThreshold",e,t,n),o=S("scoreThreshold",e,t,n),l=S("softNmsSigma",e,t,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:o,softNmsSigma:l}}var Ghe=async(e,t,n,r,a=er)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:i,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=s1(e,t,n),d=await a.image.nonMaxSuppressionWithScoreAsync(i,s,o,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:i,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=s1(e,t,n),u=S("padToMaxOutputSize",e,t,n),d=await a.image.nonMaxSuppressionPaddedAsync(i,s,o,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:i,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=s1(e,t,n);return[await a.image.nonMaxSuppressionAsync(i,s,o,l,c)]}case"Where":{let i=a.cast(S("condition",e,t,n),"bool"),s=[await a.whereAsync(i)];return i.dispose(),s}case"ListDiff":return a.setdiff1dAsync(S("x",e,t,n),S("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},qhe=(e,t,n,r=er)=>{switch(e.op){case"LowerBound":{let a=S("sortedSequence",e,t,n),i=S("values",e,t,n);return[r.lowerBound(a,i)]}case"TopKV2":{let a=S("x",e,t,n),i=S("k",e,t,n),s=S("sorted",e,t,n),o=r.topk(a,i,s);return[o.values,o.indices]}case"UpperBound":{let a=S("sortedSequence",e,t,n),i=S("values",e,t,n);return[r.upperBound(a,i)]}case"Unique":{let a=S("x",e,t,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{let a=S("x",e,t,n),i=S("axis",e,t,n),s=r.unique(a,i);return[s.values,s.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Khe=(e,t,n,r=er)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=S("default",e,t,n);return[ar(e.name,t,n)||a];case"Placeholder":return[ar(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=S("x",e,t,n);return[Cs(u)]}case"IdentityN":return S("x",e,t,n).map(u=>Cs(u));case"Snapshot":let i=S("x",e,t,n);return[Cs(i)];case"Shape":return[r.tensor1d(S("x",e,t,n).shape,"int32")];case"ShapeN":return S("x",e,t,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(S("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(S("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=S("x",e,t,n),o=S("data",e,t,n),l=S("message",e,t,n),c=S("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,c));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Xhe=class{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Me(0),this.tensorMap=new Map,An(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Me(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),X(()=>{let r=fn(t),a=n.length,i=r.length;k.assert(a===i,()=>"The number of elements doesn't match, keys has ".concat(a," elements, the values has ").concat(i," elements."));for(let s=0;s<a;s++){let o=n[s],l=r[s];An(l),this.tensorMap.set(o,l)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return X(()=>{let r=[];for(let a=0;a<n.length;a++){let i=n[a],s=this.findWithDefault(i,t);r.push(s)}return Dn(r)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return n!=null?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}},Yhe=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=r.getHashTableHandleByName(e.name);if(a!=null)return[a];{let i=S("keyDType",e,t,n),s=S("valueDType",e,t,n),o=new Xhe(i,s);return r.addHashTable(e.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let a=S("tableHandle",e,t,n,r),i=S("keys",e,t,n),s=S("values",e,t,n);return[await r.getHashTableById(a.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let a=S("tableHandle",e,t,n,r),i=S("keys",e,t,n),s=S("defaultValue",e,t,n);return[await r.getHashTableById(a.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=S("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Jhe=(e,t,n,r=er)=>{switch(e.op){case"ResizeBilinear":{let a=S("images",e,t,n),i=S("size",e,t,n),s=S("alignCorners",e,t,n),o=S("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],s,o)]}case"ResizeNearestNeighbor":{let a=S("images",e,t,n),i=S("size",e,t,n),s=S("alignCorners",e,t,n),o=S("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],s,o)]}case"CropAndResize":{let a=S("image",e,t,n),i=S("boxes",e,t,n),s=S("boxInd",e,t,n),o=S("cropSize",e,t,n),l=S("method",e,t,n),c=S("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,i,s,o,l,c)]}case"ImageProjectiveTransformV3":{let a=S("images",e,t,n),i=S("transforms",e,t,n),s=S("outputShape",e,t,n),o=S("fillValue",e,t,n),l=S("interpolation",e,t,n),c=S("fillMode",e,t,n);return[r.image.transform(a,i,l.toLowerCase(),c.toLowerCase(),o,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Zhe=(e,t,n,r=er)=>{switch(e.op){case"Equal":return[r.equal(S("a",e,t,n),S("b",e,t,n))];case"NotEqual":return[r.notEqual(S("a",e,t,n),S("b",e,t,n))];case"Greater":return[r.greater(S("a",e,t,n),S("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(S("a",e,t,n),S("b",e,t,n))];case"Less":return[r.less(S("a",e,t,n),S("b",e,t,n))];case"LessEqual":return[r.lessEqual(S("a",e,t,n),S("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(S("a",e,t,n),S("b",e,t,n))];case"LogicalNot":return[r.logicalNot(S("a",e,t,n))];case"LogicalOr":return[r.logicalOr(S("a",e,t,n),S("b",e,t,n))];case"Select":case"SelectV2":return[r.where(S("condition",e,t,n),S("a",e,t,n),S("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(S("a",e,t,n),S("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Qhe=(e,t,n,r=er)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(S("a",e,t,n),S("b",e,t,n),S("transposeA",e,t,n),S("transposeB",e,t,n))];case"Einsum":return[r.einsum(S("equation",e,t,n),...S("tensors",e,t,n))];case"Transpose":return[r.transpose(S("x",e,t,n),S("perm",e,t,n))];case"_FusedMatMul":let[a,i]=S("fusedOps",e,t,n),s=a==="biasadd",o=i==="prelu",l=S("numArgs",e,t,n),c=S("leakyreluAlpha",e,t,n);if(s){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,d]=S("args",e,t,n);return[r.fused.matMul({a:S("a",e,t,n),b:S("b",e,t,n),transposeA:S("transposeA",e,t,n),transposeB:S("transposeB",e,t,n),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(S("a",e,t,n),S("numLower",e,t,n),S("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},epe=(e,t,n,r=er)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(S("x",e,t,n),S("axis",e,t,n),S("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(S("x",e,t,n),S("mean",e,t,n),S("variance",e,t,n),S("offset",e,t,n),S("scale",e,t,n),S("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(S("x",e,t,n),S("mean",e,t,n),S("variance",e,t,n),S("offset",e,t,n),S("scale",e,t,n),S("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(S("x",e,t,n),S("radius",e,t,n),S("bias",e,t,n),S("alpha",e,t,n),S("beta",e,t,n))];case"Softmax":return[r.softmax(S("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(S("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},tpe=(e,t,n,r=er)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:a,outputDenseValues:i}=r.raggedGather(S("paramsNestedSplits",e,t,n),S("paramsDenseValues",e,t,n),S("indices",e,t,n),S("outputRaggedRank",e,t,n));return a.concat(i)}case"RaggedRange":{let{rtNestedSplits:a,rtDenseValues:i}=r.raggedRange(S("starts",e,t,n),S("limits",e,t,n),S("splits",e,t,n));return[a,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(S("shape",e,t,n),S("values",e,t,n),S("defaultValue",e,t,n),S("rowPartitionTensors",e,t,n),S("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},npe=(e,t,n,r=er)=>{switch(e.op){case"Max":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.max(S("x",e,t,n),o,l)]}case"Mean":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.mean(S("x",e,t,n),o,l)]}case"Min":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.min(S("x",e,t,n),o,l)]}case"Sum":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.sum(S("x",e,t,n),o,l)]}case"All":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.all(S("x",e,t,n),o,l)]}case"Any":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.any(S("x",e,t,n),o,l)]}case"ArgMax":{let o=S("axis",e,t,n);return[r.argMax(S("x",e,t,n),o)]}case"ArgMin":{let o=S("axis",e,t,n);return[r.argMin(S("x",e,t,n),o)]}case"Prod":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.prod(S("x",e,t,n),o,l)]}case"Cumprod":{let o=S("axis",e,t,n),l=S("exclusive",e,t,n),c=S("reverse",e,t,n);return[r.cumprod(S("x",e,t,n),o,l,c)]}case"Cumsum":{let o=S("axis",e,t,n),l=S("exclusive",e,t,n),c=S("reverse",e,t,n);return[r.cumsum(S("x",e,t,n),o,l,c)]}case"Bincount":let a=S("x",e,t,n),i=S("weights",e,t,n),s=S("size",e,t,n);return[r.bincount(a,i,s)];case"DenseBincount":{let o=S("x",e,t,n),l=S("weights",e,t,n),c=S("size",e,t,n),u=S("binaryOutput",e,t,n);return[r.denseBincount(o,l,c,u)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},rpe=(e,t,n,r=er)=>{switch(e.op){case"ConcatV2":case"Concat":{let a=S("n",e,t,n),i=S("axis",e,t,n),s=S("tensors",e,t,n);return s=s.slice(0,a),[r.concat(s,i)]}case"Gather":{let a=S("x",e,t,n),i=S("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{let a=S("axis",e,t,n),i=S("batchDims",e,t,n),s=S("x",e,t,n),o=S("indices",e,t,n);return[r.gather(s,r.cast(o,"int32"),a,i)]}case"Reverse":{let a=S("dims",e,t,n),i=[];for(let o=0;o<a.length;o++)a[o]&&i.push(o);let s=S("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{let a=S("axis",e,t,n),i=S("x",e,t,n);return[r.reverse(i,a)]}case"Slice":{let a=S("begin",e,t,n),i=S("size",e,t,n);return[r.slice(S("x",e,t,n),a,i)]}case"StridedSlice":{let a=S("begin",e,t,n),i=S("end",e,t,n),s=S("strides",e,t,n),o=S("beginMask",e,t,n),l=S("endMask",e,t,n),c=S("ellipsisMask",e,t,n),u=S("newAxisMask",e,t,n),d=S("shrinkAxisMask",e,t,n),h=S("x",e,t,n);return[r.stridedSlice(h,a,i,s,o,l,c,u,d)]}case"Pack":return X(()=>{let a=S("axis",e,t,n),i=S("tensors",e,t,n),s=i[0].shape,o=r.squeeze(i[0]).shape,l=i.map(c=>{let u=k.arraysEqual(c.shape,s);if(!u&&!k.arraysEqual(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,a)]});case"Unpack":{let a=S("axis",e,t,n),i=S("tensor",e,t,n);return r.unstack(i,a)}case"Tile":{let a=S("reps",e,t,n);return[r.tile(S("x",e,t,n),a)]}case"Split":case"SplitV":{let a=S("axis",e,t,n),i=S("numOrSizeSplits",e,t,n),s=S("x",e,t,n);return r.split(s,i,a)}case"ScatterNd":{let a=S("indices",e,t,n),i=S("values",e,t,n),s=S("shape",e,t,n);return[r.scatterND(a,i,s)]}case"GatherNd":{let a=S("x",e,t,n),i=S("indices",e,t,n);return[r.gatherND(a,i)]}case"SparseToDense":{let a=S("sparseIndices",e,t,n),i=S("outputShape",e,t,n),s=S("sparseValues",e,t,n),o=S("defaultValue",e,t,n);return[r.sparseToDense(a,s,i,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{let a=S("indices",e,t,n),i=S("values",e,t,n),s=S("tensor",e,t,n);return[r.tensorScatterUpdate(s,a,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ape=(e,t,n,r=er)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:i,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(S("indices",e,t,n),S("values",e,t,n),S("denseShape",e,t,n),S("defaultValue",e,t,n));return[a,i,s,o]}case"SparseReshape":{let{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(S("inputIndices",e,t,n),S("inputShape",e,t,n),S("newShape",e,t,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(S("data",e,t,n),S("indices",e,t,n),S("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(S("data",e,t,n),S("indices",e,t,n),S("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ipe=(e,t,n,r=er)=>{switch(e.op){case"FFT":return[r.fft(S("x",e,t,n))];case"IFFT":return[r.ifft(S("x",e,t,n))];case"RFFT":return[r.rfft(S("x",e,t,n))];case"IRFFT":return[r.irfft(S("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},spe=(e,t,n,r=er)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(S("input",e,t,n),S("pattern",e,t,n),S("rewrite",e,t,n),S("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(S("data",e,t,n),S("dataSplits",e,t,n),S("separator",e,t,n),S("nGramWidths",e,t,n),S("leftPad",e,t,n),S("rightPad",e,t,n),S("padWidth",e,t,n),S("preserveShortSequences",e,t,n));return[a,i]}case"StringSplit":{let{indices:a,values:i,shape:s}=r.string.stringSplit(S("input",e,t,n),S("delimiter",e,t,n),S("skipEmpty",e,t,n));return[a,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(S("input",e,t,n),S("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ope=(e,t,n,r=er)=>{switch(e.op){case"Cast":return[r.cast(S("x",e,t,n),S("dtype",e,t,n))];case"ExpandDims":{let a=S("axis",e,t,n);return[r.expandDims(S("x",e,t,n),a)]}case"Squeeze":{let a=S("axis",e,t,n);return[r.squeeze(S("x",e,t,n),a)]}case"Reshape":return[r.reshape(S("x",e,t,n),S("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(S("x",e,t,n),S("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(S("x",e,t,n),S("padding",e,t,n),S("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(S("x",e,t,n),S("padding",e,t,n),S("constantValue",e,t,n))];case"SpaceToBatchND":{let a=S("blockShape",e,t,n),i=S("paddings",e,t,n);return[r.spaceToBatchND(S("x",e,t,n),a,i)]}case"BatchToSpaceND":{let a=S("blockShape",e,t,n),i=S("crops",e,t,n);return[r.batchToSpaceND(S("x",e,t,n),a,i)]}case"DepthToSpace":{let a=S("blockSize",e,t,n),i=S("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(S("x",e,t,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(S("x",e,t,n),S("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(S("s0",e,t,n),S("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function vR(e,t,n,r,a=X){let i=((s,o,l)=>{switch(s.category){case"arithmetic":return a(()=>Ohe(s,o,l));case"basic_math":return a(()=>Phe(s,o,l));case"control":return Vhe(s,o,l);case"convolution":return a(()=>jhe(s,o,l));case"creation":return a(()=>Hhe(s,o,l));case"dynamic":return Ghe(s,o,l);case"evaluation":return a(()=>qhe(s,o,l));case"image":return a(()=>Jhe(s,o,l));case"graph":return a(()=>Khe(s,o,l));case"logical":return a(()=>Zhe(s,o,l));case"matrices":return a(()=>Qhe(s,o,l));case"normalization":return a(()=>epe(s,o,l));case"ragged":return a(()=>tpe(s,o,l));case"reduction":return a(()=>npe(s,o,l));case"slice_join":return a(()=>rpe(s,o,l));case"sparse":return a(()=>ape(s,o,l));case"spectral":return a(()=>ipe(s,o,l));case"string":return a(()=>spe(s,o,l));case"transformation":return a(()=>ope(s,o,l));case"hash_table":return Yhe(s,o,l,r);case"custom":let c=hB(s.op);if(c&&c.customExecutor)return c.customExecutor(new Mhe(s,o,l));throw TypeError("Custom op ".concat(s.op," is not registered."));default:throw TypeError("Unknown op '".concat(s.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}})(e,t,n);return k.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var xR=class{constructor(e={},t={},n={},r={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":"".concat(t.frameName,"-").concat(t.iterationId)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function wR(e,t,n,r){let a=new Set,i=[],s=null,o=null,l=new Set,c=new Set(Object.keys(e).map(h=>sa(h)[0]));r=r||[];let u=new Set(r.map(h=>sa(h.name)[0])),d=[...t];for(;d.length>0;){let h=d.pop();if((Cl(h)||mpe(h)||gpe(h))&&s==null&&(s=h,o=s.children.map(p=>p.name).filter(p=>a.has(p))),a.add(h.name),n[h.name]==null&&!c.has(h.name)&&!u.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),d.push(p))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:s,syncInputs:o}}function lpe(e,t){let{usedNodes:n,inputs:r}=t,a=Object.keys(r).map(g=>sa(g)[0]).map(g=>e.nodes[g]),i=e.initNodes||[],s=g=>n.has(typeof g=="string"?g:g.name);function o(g){return[...new Map(g.map(b=>[b.name,b])).values()]}let l=o([...a,...e.weights,...i]).filter(s),c=o([...l,...Object.values(e.nodes)]).filter(s),u=new Map(c.map(g=>[g.name,g])),d={};for(let g of c){d[g.name]=d[g.name]||0;for(let b of g.children)s(b)||(d[b.name]=Number.POSITIVE_INFINITY),d[b.name]=(d[b.name]||0)+1}let h=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),p=[...h];for(;h.length>0;){let g=h.pop(),b=u.get(g);for(let y of b.children.filter(s))--d[y.name]===0&&(p.push(y.name),h.push(y.name))}let f=p.map(g=>u.get(g)),m=upe(f,l);return cpe(m,l),m}function upe(e,t){let n=new Map(e.map(i=>[i.name,i])),r=t.map(i=>i.name),a=new Set(r);for(;r.length>0;){let i=r.pop(),s=n.get(i);for(let o of s.children)!n.has(o.name)||a.has(o.name)||(a.add(o.name),r.push(o.name))}return e.filter(i=>a.has(i.name))}var Ob=class extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}};function cpe(e,t){let n=new Map(e.map((o,l)=>[o.name,l])),r=new Set(t.map(o=>o.name)),a=o=>r.has(typeof o=="string"?o:o.name),i=new Set(e.map(o=>o.name)),s=o=>i.has(typeof o=="string"?o:o.name);for(let o of e){for(let l of o.children.filter(s)){if(!n.has(l.name))throw new Ob("Child ".concat(l.name," of node ").concat(o.name," is unreachable."));if(n.get(o.name)>n.get(l.name))throw new Ob("Node ".concat(o.name," is scheduled to run after its child ").concat(l.name,"."))}if(!a(o))for(let l of o.inputs){if(!n.has(l.name))throw new Ob("Input ".concat(l.name," of node ").concat(o.name," is unreachable."));if(n.get(l.name)>n.get(o.name))throw new Ob("Node ".concat(o.name," is scheduled to run before its input ").concat(l.name,"."))}}}function dpe(e){let t=new Map(e.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=e.map((o,l)=>Cl(o)?n:l),a=o=>{let l=r[t.get(o.name)];return l==null?-1:l},i=e.map((o,l)=>o.children.map(a).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let o=0;o<e.length;++o){let l=i[o];if(l===n)continue;let c=e[o],u=e[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var hpe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),ppe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),fpe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Cl(e){return hpe.has(e.op)}function mpe(e){return ppe.has(e.op)}function gpe(e){return fpe.has(e.op)}var cS=class{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(n=>e[n].map(r=>r.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(n=>{this._functionExecutorMap[n]=new cS(e.functions[n],this)})}getCompilationKey(e,t){let n=e.map(a=>a.name).sort(),r=t.map(a=>a.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){let n=wR(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:i}=n;if(a!=null)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(i,"]"));if(r.length>0){let l=t.map(u=>u.name),c=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(l,"] from the provided inputs [").concat(c,"]. Missing the following inputs: [").concat(r,"]"))}let s=lpe(this.graph,n),o=dpe(s);return{orderedNodes:s,nodeLiveUntilMap:o}}cloneAndKeepTensor(e){if(e==null)return null;let t=e.clone();return An(t),t}cloneTensorList(e){return e?e.map(t=>this.cloneAndKeepTensor(t)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,this.cloneTensorList(n)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(d=>this.graph.nodes[sa(d)[0]]),a=t.map(d=>sa(d)[0]),i=new Set(a),s=a.map(d=>this.graph.nodes[d]);s.length===0&&(s=this._outputs);let o=this.getCompilationKey(r,s),l=this.compiledMap.get(o);l==null&&(l=this.compile(e,s),this.compiledMap.set(o,l));try{this.keepIntermediateTensors=Q().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}let c={},u={};return X(()=>{let d=new xR(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(g=>{let[b,y]=sa(g,d),v=[];v[y]=e[g],h[b]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(v))});let p=this.getFrozenTensorIds(h),{orderedNodes:f,nodeLiveUntilMap:m}=l;for(let g of f){if(h[g.name])continue;let b=vR(g,h,d,this._resourceManager);if(k.isPromise(b))throw new Error("The execution of the op '".concat(g.op,"' returned a promise. Please use model.executeAsync() instead."));h[g.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,h,d,p,i,m.get(g.name))}return this.parent==null&&d.dispose(p),t.map(g=>ar(g,h,d))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(n=>e[n]).map(n=>n.map(r=>r.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,i,s){if(!(Cl(t)||i.has(e))){for(let o of n[e])o!=null&&(s[o.id]=(s[o.id]||0)+t.children.length);for(let o of t.inputs){if(Cl(o))continue;let l=fR(o.name,n,r);if(l!=null)for(let c of l){if(!c||c.kept||a.has(c.id))continue;let u=s[c.id];u===1?(c.dispose(),delete s[c.id]):u!=null&&s[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,a,i){function s(o){return Cl(o)||a.has(o.name)}if(!(Cl(e)||i==null))for(let o of i){if(s(o))continue;let l=fR(o.name,t,n);for(let c of l)!c||c.kept||r.has(c.id)||c.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},a={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Q().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}let i=new xR(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let s=await this.executeWithControlFlow(e,i,t,n),o=t.map(d=>ar(d,s,i)),l=o.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),u=new Set([...l,...c,...this.weightIds]);return Object.values(s).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!u.has(h.id)&&h.dispose()})}),this.parent==null&&i.dispose(u),o}async executeFunctionAsync(e,t,n){let r=e.reduce((a,i,s)=>(a[this.inputs[s].name]=i,a),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let a=Object.keys(e),i=a.map(v=>this.graph.nodes[sa(v)[0]]),s=n.map(v=>sa(v)[0]),o=new Set(s),l=s.map(v=>this.graph.nodes[v]);l.length===0&&(l=this._outputs);let{usedNodes:c,missingInputs:u,dynamicNode:d,syncInputs:h}=wR(e,l,this.weightMap,this._initNodes),p=[...i,...this.graph.weights,...this._initNodes||[]].map(v=>({node:v,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(v=>{let[x,w]=sa(v),$=[];$[w]=e[v],f[x]=$});let m={},g=this.getFrozenTensorIds(f),b={};for(;p.length>0;){let v=this.processStack(i,p,t,f,b,g,o,m,c);await Promise.all(v)}d==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=l.filter(v=>!Cl(v)&&!ar(v.name,f,t)).map(v=>v.name);if(y.length>0){let v="";throw d!=null&&(v="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(h,"]")),new Error("Cannot compute the outputs [".concat(y,"] from the provided inputs [").concat(a,"]. Consider providing the following inputs: [").concat(u,"]. ").concat(v))}return f}processStack(e,t,n,r,a,i,s,o,l){let c=[];for(;t.length>0;){let u=t.pop();n.currentContext=u.contexts;let d="";if(u.node.op==="Enter"&&S("isConstant",u.node,r,n)&&([d]=$s(u.node.name,n)),r[u.node.name]==null){let h=vR(u.node,r,n,this._resourceManager);d||([d]=$s(u.node.name,n));let p=n.currentContext;k.isPromise(h)?c.push(h.then(f=>(r[d]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(f)),n.currentContext=p,this.checkTensorForDisposal(d,u.node,r,n,i,s,o),this.processChildNodes(u.node,t,n,r,a,l),f))):(r[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,u.node,r,n,i,s,o),this.processChildNodes(u.node,t,n,r,a,l))}else this.processChildNodes(u.node,t,n,r,a,l)}return c}processChildNodes(e,t,n,r,a,i){e.children.forEach(s=>{let[o]=$s(s.name,n);a[o]||!i.has(s.name)||(s.op==="Merge"?s.inputNames.some(l=>!!ar(l,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:s})):s.inputNames.every(l=>!!ar(l,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=sa(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){let i=a.attrParams.shape.value,s=i.length===n.shape.length&&n.shape.every((o,l)=>i[l]===-1||i[l]===o);k.assert(s,()=>"The shape of dict['".concat(a.name,"'] provided in model.execute(dict) must be [").concat(i,"], but was [").concat(n.shape,"]"))}a.attrParams.dtype&&a.attrParams.dtype.value&&k.assert(n.dtype===a.attrParams.dtype.value,()=>"The dtype of dict['".concat(a.name,"'] provided in model.execute(dict) must be ").concat(a.attrParams.dtype.value,", but was ").concat(n.dtype))})}mapInputs(e){var t,n;let r={};for(let a in e){let i=(n=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||n===void 0?void 0:n[a];i!=null?r[i.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){let t=Object.keys(e).filter(n=>{let[r]=sa(n);return this.graph.nodes[r]==null});if(t.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map(t=>{var n,r;let a=(r=(n=this._signature)===null||n===void 0?void 0:n.outputs)===null||r===void 0?void 0:r[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{let[n]=sa(t);if(!this.graph.nodes[n])throw new Error("The output '".concat(t,"' is not found in the graph"))})}},bpe=class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}},ype="?tfjs-format=file",vpe="model.json",mT=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=sr){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,t==null&&(this.loadOptions={}),this.resourceManager=new bpe}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for URL '").concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return k.isPromise(e)?e.then(t=>this.loadSync(t)):this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,n=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let a=this.artifacts.userDefinedMetadata;a.signature!=null&&(n=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);let r=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new cS(mR.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let a=mR.Instance.transformGraph(e.modelInitializer);this.initializer=new cS(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){let n=this.io.getSaveHandlers(e);if(n.length===0)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(n.length>1)throw new Error("Found more than one (".concat(n.length,") save handlers for URL '").concat(e,"'"));e=n[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t=e instanceof qe?[e]:e,n={};return t.forEach((r,a)=>n[this.structuredOutputKeys[a]]=r),n}return e}predict(e,t){let n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){let n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof qe)&&!Array.isArray(e)){let a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(let i in a){let s=a[i];s.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)?e:[e];let n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce((a,i)=>{var s,o,l;let c=(l=(o=(s=this.signature)===null||s===void 0?void 0:s.inputs)===null||o===void 0?void 0:o[i])===null||l===void 0?void 0:l.resourceId;return c!=null?a[i]=this.resourceIdToCapturedInput[c]:a[i]=e[r++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){let a=n[r],i=t[a];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&je(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function xpe(e,t={},n=sr){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=kpe(e));let r=new mT(e,t,n);return await r.load(),r}function wpe(e){if(e==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){let[r,a]=e;if(!r)throw new Error("modelJSON must be the first element of the array");if(!a||!(a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let i=sr.getWeightSpecs(r.weightsManifest),s=sr.getModelArtifactsForJSONSync(r,i,a);t=sr.fromMemorySync(s)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=sr.fromMemorySync(e);else throw new Error("Unknown model format");let n=new mT(t);return n.load(),n}function kpe(e){return e.endsWith("/")||(e=e+"/"),"".concat(e).concat(vpe).concat(ype)}var Spe="4.7.0",FB={};He(FB,{CSVDataset:()=>VB,Dataset:()=>Op,FileDataSource:()=>YB,TextLineDataset:()=>UB,URLDataSource:()=>JB,array:()=>Gpe,csv:()=>rfe,func:()=>afe,generator:()=>ife,microphone:()=>ofe,version_data:()=>lfe,webcam:()=>sfe,zip:()=>qpe});var Ipe=Yo(E0()),$pe=Yo(E0());function Cpe(e,t){return Iv(e,t)}function Iv(e,t,n=new Map,r=new Set){if(e==null)return null;if(typeof Blob=="function"&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);let a=t(e);if(a.recurse&&a.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse)if(hh(e)){let i=Array.isArray(e)?[]:{};r.add(e);for(let s in e){let o=e[s],l=Iv(o,t,n,r);i[s]=l}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}else throw new Error("Can't recurse into non-iterable type: ".concat(e));else return n.set(e,a.value),a.value}function Tpe(e,t=OB){return MB(e,t)}function MB(e,t,n=new Set){let r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");let a=t(e);if(a.recurse&&a.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse)if(hh(r)){let i=Array.isArray(r)?[]:{};n.add(r);for(let s in r){let o=e.map(c=>c[s]),l=MB(o,t,n);i[s]=l}return n.delete(r),i}else throw new Error("Can't recurse into non-iterable type: ".concat(r));else return a.value}function OB(e){return e===null?null:hh(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function PB(e,t){let n=new Map;Iv(e,t,n);for(let r of Array.from(n.keys())){let a=n.get(r);if(k.isPromise(a)){let i=await a;n.set(r,i)}}return Iv(e,t,n)}function hh(e){let t=!1;if(Q().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:n}=v3();t=e instanceof n}return e!=null&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||typeof e=="object"&&!(e instanceof qe)&&!(e instanceof Promise)&&!t)}function Epe(e){return e==null||Npe(e)||Array.isArray(e)||typeof e=="object"&&e instanceof qe||k.isTypedArray(e)}function Npe(e){return e===null||typeof e!="object"&&typeof e!="function"}function _pe(e){return Cpe(e,Ape)}function Ape(e){return e instanceof qe?{value:e.clone(),recurse:!1}:hh(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var LB=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},gT=class extends LB{constructor(){super(gT.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}};gT.INITIAL_CAPACITY=32;function zB(e){return new Fpe(e)}function bT(e){return new Mpe(e)}function Rpe(e,t){return new BB(e,t)}function Dpe(e,t=go.FAIL){return new jpe(e,t)}var Zn=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new Upe(this,e)}filter(e){return new Bpe(this,e)}map(e){return new Wpe(this,e)}mapAsync(e){return new kR(this,e)}serialMapAsync(e){return new kR(this,e).serial()}flatmap(e){return new Vpe(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(t=>t===!0)}rowMajorBatch(e,t=!0){return new zpe(this,e,t)}columnMajorBatch(e,t=!0,n=OB){return this.rowMajorBatch(e,t).map(r=>Tpe(r,n))}concatenate(e,t){return new BB(zB([this,e]),t)}take(e){return e<0||e==null?this:new Lpe(this,e)}skip(e){return e<0||e==null?this:new Ppe(this,e)}prefetch(e){return new WB(this,e)}shuffle(e,t){return new Hpe(this,e,t)}serial(){return new Ope(this)}},Fpe=class extends Zn{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:_pe(e),done:!1}}},Mpe=class extends Zn{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}},Ope=class extends Zn{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},Ppe=class extends Zn{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;je(e.value)}return this.upstream.next()}},Lpe=class extends Zn{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},zpe=class extends Zn{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},Bpe=class extends Zn{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;je(e.value)}}},Wpe=class extends Zn{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Fi.getTensorsInContainer(e.value),n=this.transform(e.value),r=Fi.getTensorsInContainer(n);for(let a of t)Fi.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},Upe=class extends Zn{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},kR=class extends Zn{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Fi.getTensorsInContainer(e.value),n=await this.transform(e.value),r=Fi.getTensorsInContainer(n);for(let a of t)Fi.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},yT=class extends Zn{constructor(){super(),this.outputQueue=new gT,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},Vpe=class extends yT{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=Fi.getTensorsInContainer(e.value),n=this.transform(e.value),r=Fi.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let a of t)Fi.isTensorInList(a,r)||a.dispose();return!0}},BB=class extends Zn{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){let n=await this.moreIterators.next();if(n.done)return{value:null,done:!0};this.iterator=n.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}},go;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(go||(go={}));var jpe=class extends Zn{constructor(e,t=go.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;function r(i){return i instanceof Zn?{value:i.next().then(s=>(t++,s.done&&n++,s.value)),recurse:!1}:{value:null,recurse:!0}}let a=await PB(this.iterators,r);if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case go.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element ".concat(this.count,"."));case go.SHORTEST:return{value:null,done:!0};case go.LONGEST:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},WB=class extends Zn{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new LB(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},Hpe=class extends WB{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=$pe.alea(n||k.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(t.done)this.upstreamExhausted=!0;else return this.refill(),t}return{value:null,done:!0}}},Op=class{constructor(){this.size=null}batch(e,t=!0){let n=this;k.assert(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e));let r;return this.size===1/0||this.size==null?r=this.size:t?r=Math.ceil(this.size/e):r=Math.floor(this.size/e),ia(async()=>(await n.iterator()).columnMajorBatch(e,t,Kpe),r)}concatenate(e){let t=this,n;return this.size===1/0||e.size===1/0?n=1/0:this.size!=null&&e.size!=null?n=this.size+e.size:n=null,ia(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){let t=this,n;return this.size===1/0?n=1/0:n=null,ia(async()=>(await t.iterator()).filter(r=>X(()=>e(r))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return ia(async()=>(await t.iterator()).map(n=>X(()=>e(n))),this.size)}mapAsync(e){let t=this;return ia(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return ia(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this,n;return this.size!=null&&e>0?n=this.size*e:e===0?n=0:this.size!=null&&(e===void 0||e<0)?n=1/0:n=null,ia(async()=>{let r=bT(async()=>({value:await t.iterator(),done:!1}));return Rpe(r.take(e))},n)}skip(e){let t=this,n;return this.size!=null&&e>=0&&this.size>=e?n=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?n=0:n=null,ia(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t,n=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size (".concat(this.size," elements)"));let r=this,a=Ipe.alea(t||k.now().toString());return ia(async()=>{let i=a.int32();return n&&(i+=a.int32()),(await r.iterator()).shuffle(e,i.toString())},this.size)}take(e){let t=this,n;return this.size!=null&&this.size>e?n=e:this.size!=null&&this.size<=e?n=this.size:n=null,ia(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};Op.MAX_BUFFER_SIZE=1e4;function ia(e,t=null){return new class extends Op{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function Gpe(e){return ia(async()=>zB(e),e.length)}function qpe(e){if(!hh(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=t==null?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=t==null?e[n].size:Math.min(t,e[n].size);return ia(async()=>{let n=await PB(e,r=>{if(r instanceof Op)return{value:r.iterator(),recurse:!1};if(hh(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Dpe(n,go.SHORTEST)},t)}function Kpe(e){if(e===null)return null;let t=e[0];return Epe(t)?{value:Xpe(e),recurse:!1}:{value:null,recurse:!0}}function Xpe(e){if(e.length===0)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof qe?Dn(e):Nr(e)}var UB=class extends Op{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},Pb='"',cf=Symbol("out"),SR=Symbol("field"),Lb=Symbol("quote"),o1=Symbol("quoteafterquote"),IR=Symbol("quoteinquote"),VB=class extends Op{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&k.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((r,a)=>(r[a]=r[a]+1||1,r),{}),n=Object.keys(t).filter(r=>t[r]>1);if(k.assert(n.length===0,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs){for(let r of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(r)===-1)throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let t=e.value;return this.parseRow(t,!1)}else return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new UB(e),t||(t={}),this.hasHeader=t.hasHeader!==!1,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(k.assert(t.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(t=>this.makeDataElement(t))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){let i=this.fullColumnNames[a],s=this.columnConfigs?this.columnConfigs[i]:null;if(!(this.configuredColumnsOnly&&!s)){let o=t[a],l=null;if(o==="")if(s&&s.default!==void 0)l=s.default;else{if(s&&(s.required||s.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));l=void 0}else{let c=Number(o);if(isNaN(c))s&&s.dtype==="bool"?l=this.getBoolean(o):l=o;else if(!s||!s.dtype)l=c;else switch(s.dtype){case"float32":l=c;break;case"int32":l=Math.floor(c);break;case"bool":l=this.getBoolean(o);break;default:l=c}}s&&s.isLabel?r[i]=l:n[i]=l}}return Object.keys(r).length===0?n:{xs:n,ys:r}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,t=!0){let n=[],r=0,a=e.length,i=cf;for(let s=0;s<a;s++)switch(i){case cf:switch(e.charAt(s)){case Pb:r=s+1,i=Lb;break;case this.delimiter:if(r=s+1,this.delimiter===" "&&this.delimWhitespace)break;n.push(""),i=cf;break;default:i=SR,r=s;break}break;case SR:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s)),i=cf,r=s+1;break}break;case Lb:switch(e.charAt(s)){case Pb:i=o1;break}break;case o1:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s-1)),i=cf,r=s+1;break;case Pb:i=Lb;break;default:i=IR;break}break;case IR:switch(e.charAt(s)){case Pb:i=Lb;break}break}if(i===o1?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}},jB=class extends Zn{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ".concat(this.fftSize));if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=e.includeSpectrogram!==!1,this.includeWaveform=e.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!Q().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let t=new jB(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: ".concat(n.message))}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: ".concat(this.sampleRateHz,"; Actual: ").concat(this.audioContext.sampleRate));let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,n=await this.getAudioData();if(this.includeSpectrogram){let r=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(r,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let r=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(r,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((r,a)=>n.set(r,a*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(k.sizeFromShape(t));return n.set(e,n.length-e.length),Nr(n,t)}},HB=class extends Zn{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=St([0],"int32"),this.webcamConfig.centerCrop){let n=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,r=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,a=(1-n)/2,i=(1-r)/2,s=a+n,o=r+i;this.cropBox=us([i,a,o,s],[1,4])}else this.cropBox=us([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(!Q().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new HB(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&k.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>"Invalid webcam facing mode: ".concat(this.webcamConfig.facingMode,". Please provide 'user' or 'environment'"));try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message="Error thrown while initializing video stream: ".concat(e.message),e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=_g.fromPixels(this.webcamVideoElement)}catch(t){throw new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(t)))}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error("Error thrown cropping the video: ".concat(t.message))}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return X(()=>{let t=rr(me(e,"float32"),0),n;n=Ma.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let r=n.shape;return q(n,r.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},GB=class{},qB=class extends Zn{split(e){return new Ype(this,e)}},Ype=class extends qB{constructor(e,t){super(),this.upstream=e,this.impl=new Jpe(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},Jpe=class extends yT{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}async pump(){let e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}},Zpe=class extends Zn{decodeUTF8(){return new Qpe(this)}},Qpe=class extends qB{constructor(e){super(),this.upstream=e,this.impl=new efe(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},efe=class extends yT{constructor(e){if(super(),this.upstream=e,Q().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:t}=v3();this.decoder=new t("utf8")}}summary(){return"".concat(this.upstream.summary()," -> Utf8")}async pump(){let e=await this.upstream.next(),t;if(e.done)return!1;t=e.value;let n;return Q().get("IS_BROWSER")?n=this.decoder.decode(t,{stream:!0}):n=this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0}},KB=class extends Zpe{constructor(e,t={}){super(),this.file=e,this.options=t,k.assert(e instanceof Uint8Array||(Q().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1024*1024}summary(){return"FileChunks ".concat(this.file)}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=i=>{let s=r.result;if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),!(s instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(s)},r.onabort=i=>t(new Error("Aborted")),r.onerror=i=>t(new Error(i.type));let a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n}),done:!1}}};async function tfe(e,t={},n){let r,a;typeof e=="string"?r=e:(r=e.url,a=nfe(e));let i=await(n||k.fetch)(r,a);if(i.ok){let s=new Uint8Array(await i.arrayBuffer());return new KB(s,t)}else throw new Error(i.statusText)}var nfe=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function XB(e){return typeof e=="string"&&e.slice(0,7)==="file://"}var YB=class extends GB{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(XB(this.input)&&Q().get("IS_NODE")){let e=u$();this.input=e.readFileSync(this.input.slice(7))}return new KB(this.input,this.options)}},JB=class extends GB{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return XB(this.url)?new YB(this.url,this.fileOptions).iterator():tfe(this.url,this.fileOptions)}};function rfe(e,t={}){return new VB(new JB(e),t)}function afe(e){let t=bT(e);return ia(async()=>t)}function ife(e){return ia(async()=>{let t=await e();return bT(()=>t.next())})}async function sfe(e,t){return HB.create(e,t)}async function ofe(e){return jB.create(e)}var lfe="4.7.0";function _e(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&k.assert(n.dtype!=="complex64",()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}var ufe=bs.whereImpl,Hx=class extends Vm{nextDataId(){return Hx.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new N0(this,ni())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Q().get("IS_NODE")&&E.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if(t==="string"&&n!=null&&n.length>0&&k.isString(n[0])){let a=n.map(i=>k.encodeString(i));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if(t==="complex64"){let r=this.readSync(n.real.dataId),a=this.readSync(n.imag.dataId);return E.mergeRealAndImagArrays(r,a)}return k.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if(e.dtype==="string")try{let n=t.map(r=>k.decodeString(r));return nt(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return nt(e.shape,e.dtype,t)}makeOutput(e,t,n){return ni().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);n!=null&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=k.now();return e(),{kernelMs:k.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){_e([e],"where");let t=this.readSync(e.dataId);return ufe(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};Hx.nextDataId=0;var vT={};He(vT,{addImpl:()=>e4,bincountImpl:()=>wT,bincountReduceImpl:()=>t4,bitwiseAndImpl:()=>n4,castImpl:()=>QB,ceilImpl:()=>r4,concatImpl:()=>kT,equalImpl:()=>a4,expImpl:()=>s4,expm1Impl:()=>l4,floorDivImpl:()=>c4,floorImpl:()=>u4,gatherNdImpl:()=>d4,gatherV2Impl:()=>h4,greaterEqualImpl:()=>f4,greaterImpl:()=>p4,lessEqualImpl:()=>g4,lessImpl:()=>m4,linSpaceImpl:()=>b4,logImpl:()=>y4,maxImpl:()=>v4,maximumImpl:()=>x4,minimumImpl:()=>w4,multiplyImpl:()=>ST,negImpl:()=>k4,notEqualImpl:()=>S4,prodImpl:()=>I4,raggedGatherImpl:()=>$4,raggedRangeImpl:()=>C4,raggedTensorToTensorImpl:()=>T4,rangeImpl:()=>$T,rsqrtImpl:()=>E4,scatterImpl:()=>Fl,sigmoidImpl:()=>ome,simpleAbsImpl:()=>ZB,sliceImpl:()=>Cv,sparseFillEmptyRowsImpl:()=>_4,sparseReshapeImpl:()=>A4,sparseSegmentReductionImpl:()=>CT,sqrtImpl:()=>cme,squaredDifferenceImpl:()=>R4,staticRegexReplaceImpl:()=>D4,stridedSliceImpl:()=>F4,stringNGramsImpl:()=>TT,stringSplitImpl:()=>ET,stringToHashBucketFastImpl:()=>NT,subImpl:()=>M4,tileImpl:()=>O4,topKImpl:()=>L4,transposeImpl:()=>IT,uniqueImpl:()=>AT});function ZB(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var cfe=e=>{let{x:t}=e.inputs,n=e.backend;_e(t,"abs");let r=new Float32Array(k.sizeFromShape(t.shape)),a=n.data.get(t.dataId).values;return r=ZB(a),n.makeOutput(r,t.shape,t.dtype)},dfe={kernelName:Ih,backendName:"cpu",kernelFunc:cfe};function bn(e){return(t,n,r,a,i)=>{let s=E.assertAndGetBroadcastShape(t,n),o=s.length,l=k.computeStrides(s),c=k.sizeFromShape(s),u=k.getTypedArrayFromDType(i,c),d=t.length,h=n.length,p=k.computeStrides(t),f=k.computeStrides(n),m=E.getBroadcastDims(t,s),g=E.getBroadcastDims(n,s);if(m.length+g.length===0)for(let b=0;b<u.length;++b)u[b]=e(r[b%r.length],a[b%a.length]);else for(let b=0;b<u.length;++b){let y=k.indexToLoc(b,o,l),v=y.slice(-d);m.forEach(C=>v[C]=0);let x=k.locToIndex(v,d,p),w=y.slice(-h);g.forEach(C=>w[C]=0);let $=k.locToIndex(w,h,f);u[b]=e(r[x],a[$])}return[u,s]}}function la(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}var hfe={kernelName:R0,backendName:"cpu",kernelFunc:la};function $v(e,t,n="float32"){if(n==="complex64"){let a=$v(e,t,"float32"),i=$v(e,t,"float32");return la({inputs:{real:a,imag:i},backend:e})}let r=k.makeZerosTypedArray(k.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function ps(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var pfe={kernelName:Yu,backendName:"cpu",kernelFunc:ps};function cu(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var ffe={kernelName:V0,backendName:"cpu",kernelFunc:cu};function QB(e,t,n,r){if(r==="int32"){let a=Int32Array.from(e);return[t,"int32",a]}if(r==="bool"){let a=k.toTypedArray([0],n),[i,s]=bn((o,l)=>o!==l?1:0)(t,[],e,a,"bool");return[s,"bool",i]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Vo(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return ps({inputs:{x:a},backend:n});let u=$v(n,a.shape,a.dtype),d=Vo({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),h=la({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(a.dtype==="complex64"){let u=cu({inputs:{input:a},backend:n}),d=Vo({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),d}if(!k.hasEncodingLoss(a.dtype,i)){let u=ps({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}let s=n.data.get(a.dataId).values,[o,l,c]=QB(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,c)}var mfe={kernelName:Au,backendName:"cpu",kernelFunc:Vo};function zn(e,t,n,r){return n==null?({inputs:a,backend:i})=>{let{a:s,b:o}=a,l=i;_e([s,o],e);let c=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,d=s.dtype==="string"?E.fromUint8ToStringArray(c):c,h=s.dtype==="string"?E.fromUint8ToStringArray(u):u,p=r||s.dtype,[f,m]=t(s.shape,o.shape,d,h,p);return l.makeTensorInfo(m,p,f)}:({inputs:a,backend:i})=>{let{a:s,b:o}=a,l=i;if(s.dtype==="complex64"||o.dtype==="complex64"){let c=Vo({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,p=l.data.get(d.dataId).values,f=l.data.get(h.dataId).values,m=Vo({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),b=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,v=l.data.get(b.dataId).values,x=l.data.get(y.dataId).values,[w,$,C]=n(s.shape,o.shape,p,f,v,x),T=l.makeTensorInfo(C,"float32",w),A=l.makeTensorInfo(C,"float32",$),D=la({inputs:{real:T,imag:A},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo(A),D}else{let c=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,d=r||s.dtype,[h,p]=t(s.shape,o.shape,c,u,d);return l.makeTensorInfo(p,d,h)}}}function xT(e){return(t,n,r,a,i,s)=>{let o=E.assertAndGetBroadcastShape(t,n),l=k.sizeFromShape(o),c=o.length,u=k.computeStrides(o),d=k.getTypedArrayFromDType("float32",l),h=k.getTypedArrayFromDType("float32",l),p=E.getBroadcastDims(t,o),f=E.getBroadcastDims(n,o),m=E.mergeRealAndImagArrays(r,a),g=E.mergeRealAndImagArrays(i,s),b=t.length,y=k.computeStrides(t),v=n.length,x=k.computeStrides(n);if(p.length+f.length===0)for(let w=0;w<d.length;w++){let $=w%m.length,C=w%g.length,T=e(m[$*2],m[$*2+1],g[C*2],g[C*2+1]);d[w]=T.real,h[w]=T.imag}else for(let w=0;w<d.length;w++){let $=k.indexToLoc(w,c,u),C=$.slice(-b);p.forEach(I=>C[I]=0);let T=k.locToIndex(C,b,y),A=$.slice(-v);f.forEach(I=>A[I]=0);let D=k.locToIndex(A,v,x),N=e(m[T*2],m[T*2+1],g[D*2],g[D*2+1]);d[w]=N.real,h[w]=N.imag}return[d,h,o]}}var e4=bn((e,t)=>e+t),gfe=xT((e,t,n,r)=>({real:e+n,imag:t+r})),ph=zn(Jo,e4,gfe),bfe={kernelName:Jo,backendName:"cpu",kernelFunc:ph};function wT(e,t,n,r,a){let i=k.sizeFromShape(r),s=k.makeZerosTypedArray(a,n);for(let o=0;o<e.length;o++){let l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?s[l]+=t[o]:s[l]+=1)}return s}function t4(e,t,n,r=!1){let a=e.shape[0],i=e.shape[1],s=nt([a,n],t.dtype);for(let o=0;o<a;o++)for(let l=0;l<i;l++){let c=e.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?s.set(1,o,c):t.size>0?s.set(s.get(o,c)+t.get(o,l),o,c):s.set(s.get(o,c)+1,o,c))}return s}var n4=bn((e,t)=>e&t),yfe=zn(Rh,n4),vfe={kernelName:Rh,backendName:"cpu",kernelFunc:yfe};function vs(e){return(t,n,r)=>{let a=k.getArrayFromDType(n,t.length);for(let i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function $t(e,t,n){let r=vs(t);return sl(e,r,n)}function sl(e,t,n){return({inputs:r,attrs:a,backend:i})=>{let{x:s}=r;_e(s,e);let o=i,l=o.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=E.fromUint8ToStringArray(l)}else c=l;let u=n||s.dtype,d=t(c,u,a);return o.makeTensorInfo(s.shape,u,d)}}var r4=vs(e=>Math.ceil(e)),xfe=sl(Ru,r4),wfe={kernelName:Ru,backendName:"cpu",kernelFunc:xfe};function kT(e,t,n,r){let a=k.getArrayFromDType(n,k.sizeFromShape(t));if(r&&n!=="string"){let i=0;e.forEach(s=>{let o=k.sizeFromShape(s.shape);a.set(s.vals,i),i+=o})}else{let i=0;e.forEach(s=>{let o=n==="string"?E.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*t[1]+i;for(let d=0;d<s.shape[1];++d)a[u+d]=o[l++]}i+=s.shape[1]})}return a}var a4=bn((e,t)=>e===t?1:0),i4=zn(Bh,a4,null,"bool"),kfe={kernelName:Bh,backendName:"cpu",kernelFunc:i4},s4=vs(e=>Math.exp(e)),o4=sl(ju,s4,"float32"),Sfe={kernelName:ju,backendName:"cpu",kernelFunc:o4},l4=vs(e=>Math.expm1(e)),Ife=sl(Hu,l4),$fe={kernelName:Hu,backendName:"cpu",kernelFunc:Ife},u4=vs(e=>Math.floor(e)),Cfe=sl(Gu,u4),Tfe={kernelName:Gu,backendName:"cpu",kernelFunc:Cfe},c4=bn((e,t)=>Math.floor(e/t)),Efe=zn(qu,c4,null,"int32"),Nfe={kernelName:qu,backendName:"cpu",kernelFunc:Efe};function d4(e,t,n,r,a,i,s,o,l){let c=nt([r,i],n);for(let u=0;u<r;u++){let d=[],h=0;for(let p=0;p<a;p++){let f=e[u*a+p];h+=f*s[p],d.push(f)}if(h<0||h>=l/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(o));for(let p=0;p<i;p++)c.values[u*i+p]=t.get(...t.indexToLoc(h*i+p))}return c}function h4(e,t,n){let r=nt(n,e.dtype);for(let a=0;a<r.size;++a){let i=r.indexToLoc(a).slice(),s=i[0],o=i[2],l=t.locToIndex([s,o]);i[2]=t.values[l];let c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var p4=bn((e,t)=>e>t?1:0),_fe=zn(Hh,p4,null,"bool"),Afe={kernelName:Hh,backendName:"cpu",kernelFunc:_fe},f4=bn((e,t)=>e>=t?1:0),Rfe=zn(Xu,f4,null,"bool"),Dfe={kernelName:Xu,backendName:"cpu",kernelFunc:Rfe},m4=bn((e,t)=>e<t?1:0),Ffe=zn(Gh,m4,null,"bool"),Mfe={kernelName:Gh,backendName:"cpu",kernelFunc:Ffe},g4=bn((e,t)=>e<=t?1:0),Ofe=zn(qh,g4,null,"bool"),Pfe={kernelName:qh,backendName:"cpu",kernelFunc:Ofe};function b4(e,t,n){let r=(t-e)/(n-1),a=k.makeZerosTypedArray(n,"float32");a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var y4=vs(e=>Math.log(e)),Lfe=sl(tc,y4),zfe={kernelName:tc,backendName:"cpu",kernelFunc:Lfe};function v4(e,t,n,r){let a=k.getTypedArrayFromDType(r,k.sizeFromShape(n));for(let i=0;i<a.length;++i){let s=i*t,o=e[s];for(let l=0;l<t;++l){let c=e[s+l];(Number.isNaN(c)||c>o)&&(o=c)}a[i]=o}return a}var x4=bn((e,t)=>Math.max(e,t)),Bfe=zn(ic,x4),Wfe={kernelName:ic,backendName:"cpu",kernelFunc:Bfe},w4=bn((e,t)=>Math.min(e,t)),Ufe=zn(uc,w4),Vfe={kernelName:uc,backendName:"cpu",kernelFunc:Ufe},ST=bn((e,t)=>e*t),jfe=xT((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),Gx=zn(hc,ST,jfe),Hfe={kernelName:hc,backendName:"cpu",kernelFunc:Gx};function k4(e,t,n){let r=k.createScalarValue(-1,n);return ST([],t,r,e,n)}function Gfe(e){let{inputs:t,backend:n}=e,{x:r}=t;_e(r,"neg");let a=n.data.get(r.dataId).values,[i,s]=k4(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}var qfe={kernelName:tp,backendName:"cpu",kernelFunc:Gfe},S4=bn((e,t)=>e!==t?1:0),Kfe=zn(np,S4,null,"bool"),Xfe={kernelName:np,backendName:"cpu",kernelFunc:Kfe};function IT(e,t,n,r,a){let i=t.length,s=k.sizeFromShape(t),o=k.computeStrides(t),l=k.computeStrides(a),c=k.getTypedArrayFromDType(n,k.sizeFromShape(a));for(let u=0;u<s;++u){let d=k.indexToLoc(u,i,o),h=new Array(d.length);for(let f=0;f<h.length;f++)h[f]=d[r[f]];let p=k.locToIndex(h,i,l);c[p]=e[u]}return c}function Qr(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:i}=n;_e(a,"transpose");let s=a.shape.length,o=new Array(s);for(let u=0;u<o.length;u++)o[u]=a.shape[i[u]];let l=r.data.get(a.dataId).values,c=IT(l,a.shape,a.dtype,i,o);return{dataId:r.write(c,o,a.dtype),shape:o,dtype:a.dtype}}var Yfe={kernelName:Fs,backendName:"cpu",kernelFunc:Qr};function I4(e,t,n,r){let[a,i]=E.computeOutAndReduceShapes(e,r),s=Ua(t,"int32"),o=k.makeZerosTypedArray(k.sizeFromShape(a),s),l=k.sizeFromShape(i);for(let c=0;c<o.length;++c){let u=c*l,d=1;for(let h=0;h<l;++h)d*=n[u+h];o[c]=d}return{outVals:o,outShape:a,outDtype:s}}function Jfe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;_e(a,"prod");let o=a.shape.length,l=k.parseAxisParam(i,a.shape),c=E.getAxesPermutation(l,o),u=l,d=a,h=[];c!=null&&(d=Qr({inputs:{x:a},backend:n,attrs:{perm:c}}),h.push(d),u=E.getInnerMostAxes(u.length,o));let p=n.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=I4(d.shape,d.dtype,p,u),b=m;return s&&(b=E.expandShapeToKeepDim(m,l)),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(b,g,f)}var Zfe={kernelName:bc,backendName:"cpu",kernelFunc:Jfe};function Qfe(e,t,n){e.forEach((r,a)=>{if(r<0||r>=n){let i=k.indexToLoc(a,t.length,k.computeStrides(t)).join(",");throw new Error("indices[".concat(i,"] = ").concat(r," is not in [0, ").concat(n,")"))}})}function eme(e,t){for(let n=0;n<e.length;++n){let r=e[n],a=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function tme(e,t,n,r){let a=[],i=0,s=t.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);eme(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];let u=t[c+1];for(let d=1;d<l+1;++d)o[c].push(d*u)}for(let c=0;c<e.length;++c){let u=e[c],d=e[c]+1;for(let h=0;h<n.length;++h){let p=n[h],f=h+t.length-1;if(f>=0){let m=o[f],g=m[m.length-1]-p[u];for(let b=u;b<d;++b)o[f].push(p[b+1]+g)}u=p[u],d=p[d]}d!==u&&(a.push([u,d]),i+=d-u)}return{outSplits:o,valueSlices:a,numValues:i}}function nme(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,a=k.getArrayFromDType("int32",r);t.push(a),e[n].forEach((i,s)=>a[s]=i)}return t}function $R(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function rme(e,t,n,r,a,i){let s=$R(t,2)[1],o=$R(i,2)[1],l=0;for(let c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)a[l*o+d]=e[u*s+d];++l}}function ame(e,t,n,r,a){let i=t.slice();i[0]=a;let s=k.getArrayFromDType(n,k.sizeFromShape(i)),o=e.length,l=o===0?0:o/t[0];return rme(e,t,r,l,s,i),[s,i]}function $4(e,t,n,r,a,i,s,o){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");let l=t[0][0]-1;if(Qfe(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:u,valueSlices:d,numValues:h}=tme(i,s,e,c),p=nme(u),f=ame(n,r,a,d,h);return[p,f[0],f[1]]}var CR=2147483647;function C4(e,t,n,r,a,i,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let o=t.length===0,l=a.length===0,c=s.length===0,u=[];o||u.push(t[0]),l||u.push(a[0]),c||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let d=u.length===0?1:u[0],h=k.getArrayFromDType("int32",d+1);h[0]=0;for(let g=0;g<d;++g){let b=o?e[0]:e[g],y=l?r[0]:r[g],v=c?i[0]:i[g];if(v===0)throw new Error("Requires delta != 0");let x;if(v>0&&y<b||v<0&&y>b)x=0;else if(x=Math.ceil(Math.abs((y-b)/v)),x>CR)throw new Error("Requires ((limit - start) / delta) <= ".concat(CR));h[g+1]=h[g]+x}let p=h[d],f=k.getArrayFromDType(n,p),m=0;for(let g=0;g<d;++g){let b=h[g+1]-h[g],y=o?e[0]:e[g],v=c?i[0]:i[g];for(let x=0;x<b;++x)f[m++]=y,y+=v}return[h,f]}var Za=E.RowPartitionType,dS=class{constructor(e,t,n,r,a,i,s,o,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=E.getRowPartitionTypesHelper(c),this.raggedRank=E.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Za.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Za.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){let t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Za.VALUE_ROWIDS:return dS.getMaxWidthValueRowID(t);case Za.ROW_SPLITS:return dS.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(Za[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){let t=e.length;if(t===0||t===1)return 0;let n=0;for(let r=0;r<t-1;++r){let a=e[r+1]-e[r];a>n&&(n=a)}return n}static getMaxWidthValueRowID(e){let t=e.length;if(t===0)return 0;let n=0,r=e[0],a=0;for(let i=1;i<t;++i){let s=e[i];s!==r&&(r=s,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t,n=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return ER(e,n)}calculateOutputSize(e){let t=this.valuesShape,n=this.defaultValueShape;E.validateDefaultValueShape(n,t);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=E.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);a[0]<0&&(a[0]=e);for(let i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}calculateFirstParentOutputIndex(e,t,n){let r=Math.min(e,n),a=[],i=0;for(let s=0;s<r;++s,i+=t)a.push(i);for(let s=r;s<e;++s)a.push(-1);return k.assert(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){let a=e.length,i=[];for(let s=0;s<a-1;++s){let o=e[s+1]-e[s],l=Math.min(r,o),c=t[s];c===-1&&(l=0);for(let u=0;u<l;++u)i.push(c),c+=n;for(let u=0;u<o-l;++u)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){let a=e.length,i=[];if(a===0)return[];let s=0,o=e[0];if(o>=t.length)throw new Error("Got currentValueRowId=".concat(o,", which is not less than ").concat(t.length));let l=t[o];i.push(l);for(let c=1;c<a;++c){let u=e[c];if(u===o)l>=0&&(++s,s<r?l+=n:l=-1);else{if(s=0,o=u,u>=t.length)throw new Error("Got nextValueRowId=".concat(u," which is not less than ").concat(t.length));l=t[u]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){let a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Za.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case Za.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Za[i]))}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case Za.FIRST_DIM_SIZE:return e[0];case Za.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Za.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Za[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let i=n.length-2;i>=0;--i)n[i]=n[i+1]*t[i+1];let r=ER(t,!1),a=k.getArrayFromDType(this.valuesDType,k.sizeFromShape(r));if(n[0]*t[0]>0){let i=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let s=1;s<=this.raggedRank;++s)i=this.calculateOutputIndex(s-1,i,n[s],t[s]);this.setOutput(this.raggedRank,i,a,r)}return[r,a]}setOutput(e,t,n,r){if(n.length===0)return;let a=this.values,i=n,s=r.slice();s=s.slice(e+1);let o=k.sizeFromShape(s),l=t.length,c=this.defaultValue;if(c.length!==o&&c.length!==1){let p=this.defaultValueShape;X(()=>{let f=q(c,p);c=Pl(f,s).dataSync()})}let u=0,d=0,h=0;for(let p=0;p<=l;++p){let f=p<l?t[p]:-1;if(f===h){++h;continue}if(d<h){let m=a.subarray(u*o),g=i.subarray(d*o),b=(h-d)*o;TR(g,m,b)}if(p>=l){let m=n.length;f=Math.floor(m/o)}if(f>h)if(this.defaultValue.length===1)i.subarray(h*o,f*o).fill(this.defaultValue[0]),h=f;else for(;f>h;){let m=i.slice(h*o);TR(m,c,o),++h}f<0?(u=p+1,d=h):(u=p,d=h,h=d+1)}}};function TR(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function ER(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function T4(e,t,n,r,a,i,s,o,l,c){return new dS(e,t,n,r,a,i,s,o,l,c).compute()}function $T(e,t,n,r){let a=e===t,i=e<t&&n<0,s=t<e&&n>1;if(a||i||s)return k.makeZerosTypedArray(0,r);let o=Math.abs(Math.ceil((t-e)/n)),l=k.makeZerosTypedArray(o,r);t<e&&n===1&&(n=-1),l[0]=e;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}var E4=vs(e=>1/Math.sqrt(e)),ime=sl($c,E4),sme={kernelName:$c,backendName:"cpu",kernelFunc:ime};function Fl(e,t,n,r,a,i,s,o,l,c){let u=[r/a,a],d=e.values,h=t.values;if(r===0)return nt(n,t.dtype);let p=l instanceof Cn?l:nt(u,t.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let f=0;f<i;f++){let m=[],g=0;for(let b=0;b<s;b++){let y=d[f*s+b];m.push(y),g+=y*o[b]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(let b=0;b<a;b++)c?p.values[g*a+b]+=h[f*a+b]:p.values[g*a+b]=t.rank===0?h[0]:h[f*a+b]}return p}var ome=vs(e=>1/(1+Math.exp(-e))),N4=$t(_c,e=>1/(1+Math.exp(-e))),lme={kernelName:_c,backendName:"cpu",kernelFunc:N4};function Cv(e,t,n,r,a){let i=Fn.isSliceContinous(r,t,n),s=k.sizeFromShape(n),o=k.computeStrides(r);if(i){let d=Fn.computeFlatOffset(t,o);return a==="string"?e.slice(d,d+s):e.subarray(d,d+s)}let l=a==="string"?E.fromUint8ToStringArray(e):e,c=nt(r,a,l),u=nt(n,a);for(let d=0;d<u.size;++d){let h=u.indexToLoc(d),p=h.map((f,m)=>f+t[m]);u.set(c.get(...p),...h)}return a==="string"?E.fromStringArrayToUint8(u.values):u.values}function du(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r;_e(a,"slice");let[o,l]=Fn.parseSliceParams(a,i,s);Fn.assertParamsValid(a,o,l);let c=n.data.get(a.dataId).values,u=Cv(c,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,u)}var ume={kernelName:mp,backendName:"cpu",kernelFunc:du};function _4(e,t,n,r,a,i,s){let o=t[0],l=i[0],c=new Array(l),u=new Array(o),d=t[1];if(l===0){if(o!==0)throw new Error(E.getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));let g=k.getArrayFromDType(n,0),b=k.getArrayFromDType(a,0);return[g,[0,d],b,c,u]}let h=!0,p=0,f=new Array(l).fill(0);for(let g=0;g<o;++g){let b=e[g*d];if(b<0)throw new Error(E.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,b));if(b>=l)throw new Error(E.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,b,l));++f[b],h=h&&b>=p,p=b}let m=!0;for(let g=0;g<l;++g){let b=f[g]===0;c[g]=b,m=m&&!b,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&h){let g=e,b=r;for(let y=0;y<o;++y)u[y]=y;return[g,[o,d],b,c,u]}else{let g=f[l-1],b=k.getArrayFromDType(n,g*d),y=k.getArrayFromDType(a,g),v=new Array(l).fill(0);for(let x=0;x<o;++x){let w=e[x*d],$=v[w],C=(w===0?0:f[w-1])+$;v[w]++;for(let T=0;T<d;++T)b[C*d+T]=e[x*d+T];y[C]=r[x],u[x]=C}for(let x=0;x<l;++x)if(v[x]===0){let w=x===0?0:f[x-1];b[w*d+0]=x;for(let $=1;$<d;++$)b[w*d+$]=0;y[w]=s}return[b,[g,d],y,c,u]}}function A4(e,t,n,r,a){let i=k.sizeFromShape(r),s=t[0],o=a.length,l=[],c=1,u=-1;for(let m=0;m<o;++m){let g=a[m];if(g===-1){if(u!==-1)throw new Error(E.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,m));u=m,l.push(1)}else{if(g<0)throw new Error(E.getSparseReshapeNegativeOutputDimErrorMessage(m,g));c*=g,l.push(g)}}if(u!==-1){if(c<=0)throw new Error(E.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let m=Math.trunc(i/c);if(c*m!==i)throw new Error(E.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=m}if(k.sizeFromShape(l)!==i)throw new Error(E.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let d=r.length,h=[];if(d>0){h[d-1]=1;for(let m=d-2;m>=0;--m)h[m]=h[m+1]*r[m+1]}let p=[];if(o>0){p[o-1]=1;for(let m=o-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}let f=k.getArrayFromDType(n,s*o);for(let m=0;m<s;++m){let g=0;for(let b=0;b<d;++b)g+=e[m*d+b]*h[b];for(let b=0;b<o;++b)f[m*o+b]=Math.trunc(g/p[b]),g%=p[b]}return[f,[s,o],l]}function CT(e,t,n,r,a,i=!1,s=0){let o=r.length,l=[t[0],e.length/t[0]],c=l[1],u=o>0?a[o-1]+1:0;if(u<0)throw new Error(E.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let d=t.slice();d[0]=u;let h=d.reduce((y,v)=>y*v,1),p=k.getArrayFromDType(n,h);if(o===0)return u>0&&p.fill(s),[p,d];if(u<=0)throw new Error(E.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let f=0,m=1,g=0,b=a[f];for(;;){let y=0;if(m<o){if(y=a[m],b===y){++m;continue}if(b>=y)throw new Error(E.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=u)throw new Error(E.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,u));b>g&&p.fill(s,g*c,b*c);for(let v=f;v<m;++v){let x=r[v];if(x<0||x>=l[0])throw new Error(E.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(v,r[v],l[0]));for(let w=0;w<c;w++)p[b*c+w]+=e[x*c+w]}if(i)for(let v=0;v<c;v++)p[b*c+v]/=m-f;if(f=m,++m,g=b+1,b=y,m>o)break}return g<u&&p.fill(s,g*c,u*c),[p,d]}var cme=vs(e=>Math.sqrt(e)),dme=$t(Rc,e=>Math.sqrt(e)),hme={kernelName:Rc,backendName:"cpu",kernelFunc:dme},R4=bn((e,t)=>{let n=e-t;return n*n}),pme=zn(Mc,R4),fme={kernelName:Mc,backendName:"cpu",kernelFunc:pme},D4=vs((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)}),mme=sl(sg,D4),gme={kernelName:sg,backendName:"cpu",kernelFunc:mme};function F4(e,t,n,r){let a=nt(e,t.dtype);for(let i=0;i<a.size;i++){let s=a.indexToLoc(i),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*n[l]+r[l];a.set(t.get(...o),...s)}return a}var bme=class{constructor(e,t,n,r,a,i){this.separator=k.encodeString(e),this.nGramWidths=t,this.leftPad=k.encodeString(n),this.rightPad=k.encodeString(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,i){for(let s=0;s<a;++s){let o=this.getPadWidth(i),l=Math.max(0,o-s),c=Math.max(0,o-(a-(s+1))),u=i-(l+c),d=t+(l>0?0:s-o),h=0;h+=l*this.leftPad.length;for(let b=0;b<u;++b)h+=e[d+b].length;h+=c*this.rightPad.length;let p=l+c+u-1;h+=p*this.separator.length,n[r+s]=new Uint8Array(h);let f=n[r+s],m=0,g=b=>b.forEach(y=>f[m++]=y);for(let b=0;b<l;++b)g(this.leftPad),g(this.separator);for(let b=0;b<u-1;++b)g(e[d+b]),g(this.separator);if(u>0){g(e[d+u-1]);for(let b=0;b<c;++b)g(this.separator),g(this.rightPad)}else{for(let b=0;b<c-1;++b)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let o=t[0];if(o!==0)throw new Error("First split value must be 0, got ".concat(o));for(let l=1;l<r;++l){let c=t[l]>=o;if(c=c&&t[l]<=n,!c)throw new Error("Invalid split value ".concat(t[l],", must be in [").concat(o,", ").concat(n,"]"));o=t[l]}if(o!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(o))}let a=r-1,i=k.getArrayFromDType("int32",r);if(n===0||r===0){let o=new Array(n);for(let l=0;l<=a;++l)i[l]=0;return[o,i]}i[0]=0;for(let o=1;o<=a;++o){let l=t[o]-t[o-1],c=0;this.nGramWidths.forEach(u=>{c+=this.getNumNGrams(l,u)}),this.preserveShort&&l>0&&c===0&&(c=1),i[o]=i[o-1]+c}let s=new Array(i[a]);for(let o=0;o<a;++o){let l=t[o],c=i[o];if(this.nGramWidths.forEach(u=>{let d=t[o+1]-t[o],h=this.getNumNGrams(d,u);this.createNGrams(e,l,s,c,h,u),c+=h}),this.preserveShort&&c===i[o]){let u=t[o+1]-t[o];if(u===0)continue;let d=u+2*this.padWidth,h=1;this.createNGrams(e,l,s,c,h,d)}}return[s,i]}};function TT(e,t,n,r,a,i,s,o){return new bme(n,r,a,i,s,o).compute(e,t)}function yme(e,t,n,r){if(!e.length)return;if(t.length===0){for(let i=0;i<e.length;++i)r.push(e.subarray(i,i+1));return}if(t.length===1){let i=t[0],s=e.indexOf(i);for(;s!==-1;){let o=e.subarray(0,s);(!n||o.length!==0)&&r.push(o),e=e.subarray(s+1),s=e.indexOf(i)}(!n||e.length!==0)&&r.push(e);return}let a=0;for(let i=0;i<e.length+1;i++)if(i===e.length||t.indexOf(e[i])!==-1){let s=e.subarray(a,i);(!n||s.length!==0)&&r.push(s),a=i+1}}function ET(e,t,n){let r=e.length,a=[],i=0,s=0,o=new Array(r);for(let h=0;h<r;++h){let p=a.length;yme(e[h],t,n,a);let f=a.length-p;o[h]=f,i+=f,s=Math.max(s,f)}let l=k.getArrayFromDType("int32",i*2),c=new Array(i),u=[r,s],d=0;for(let h=0;h<r;++h)for(let p=0;p<o[h];++p)l[d*2]=h,l[d*2+1]=p,c[d]=a[d],++d;return[l,c,u]}function NT(e,t){let n=k.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=k.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var M4=bn((e,t)=>e-t),vme=xT((e,t,n,r)=>({real:e-n,imag:t-r})),_T=zn(Oc,M4,vme),xme={kernelName:Oc,backendName:"cpu",kernelFunc:_T};function O4(e,t){let n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];let r=nt(n,e.dtype);for(let a=0;a<r.values.length;++a){let i=r.indexToLoc(a),s=new Array(e.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%e.shape[l];let o=e.locToIndex(s);r.values[a]=e.values[o]}return r}var vf=(e,t)=>{let n=t.value-e.value;return n===0?e.index-t.index:n};function P4(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){let o=r-n+1,l=t-n+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2),h=Math.max(n,Math.floor(t-l*u/o+d)),p=Math.min(r,Math.floor(t+(o-l)*u/o+d));P4(e,t,h,p)}let a=e[t],i=n,s=r;for(k.swap(e,n,t),vf(e[r],a)>0&&k.swap(e,n,r);i<s;){for(k.swap(e,i,s),i++,s--;vf(e[i],a)<0;)i=i+1;for(;vf(e[s],a)>0;)s=s-1}vf(e[n],a)===0?k.swap(e,n,s):(s=s+1,k.swap(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function L4(e,t,n,r,a){let i=t[t.length-1],[s,o]=[e.length/i,i],l=k.getTypedArrayFromDType(n,s*r),c=k.getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){let h=d*o,p=e.subarray(h,h+o),f=new Array(p.length);p.forEach((y,v)=>f[v]={value:y,index:v}),r<f.length&&(P4(f,r),f=f.slice(0,r)),a&&f.sort(vf);let m=d*r,g=l.subarray(m,m+r),b=c.subarray(m,m+r);for(let y=0;y<r;y++)g[y]=f[y].value,b[y]=f[y].index}let u=t.slice();return u[u.length-1]=r,[nt(u,n,l),nt(u,"int32",c)]}function AT(e,t,n,r){let a=k.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let f=0;f<a;f++)i[0]*=n[f];i[1]=n[a];for(let f=a+1;f<n.length;f++)i[2]*=n[f];let s=new Map,o=new Int32Array(n[a]),l=new Cn(i,r,e),c=[],u=i[0]===1&&i[2]===1;for(let f=0;f<n[a];f++){let m;if(u)m=e[f].toString();else{let b=[];for(let y=0;y<i[0];y++)for(let v=0;v<i[2];v++)b.push(l.get(y,f,v));m=b.join(",")}let g=s.get(m);if(g!=null)o[f]=g;else{let b=s.size;s.set(m,b),o[f]=b,c.push(f)}}let d=i.slice();d[1]=s.size;let h=new Cn(d,r);c.forEach((f,m)=>{for(let g=0;g<i[0];g++)for(let b=0;b<i[2];b++)h.set(l.get(g,f,b),g,m,b)});let p=n.slice();return p[a]=d[1],{outputValues:h.values,outputShape:p,indices:o}}var wme="4.7.0";G0("cpu",()=>new Hx,1);var z4=$t(Uu,e=>e>=0?e:Math.exp(e)-1),kme={kernelName:Uu,backendName:"cpu",kernelFunc:z4};function B4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r;_e([a],"leakyRelu");let s=k.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,l=k.getTypedArrayFromDType("float32",s);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return n.makeTensorInfo(a.shape,"float32",l)}var Sme={kernelName:ec,backendName:"cpu",kernelFunc:B4},Ime=bn((e,t)=>e<0?t*e:e);function W4(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t;_e([r,a],"prelu");let i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,l]=Ime(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(l,"float32",o)}var $me={kernelName:gc,backendName:"cpu",kernelFunc:W4},U4=$t(vc,e=>Math.max(0,e)),Cme={kernelName:vc,backendName:"cpu",kernelFunc:U4},V4=$t(kc,e=>Math.min(Math.max(0,e),6)),Tme={kernelName:kc,backendName:"cpu",kernelFunc:V4};function Tv(e,t,n,r,a){if(n==="linear")return ps({inputs:{x:t},backend:e});if(n==="relu")return U4({inputs:{x:t},backend:e});if(n==="elu")return z4({inputs:{x:t},backend:e});if(n==="relu6")return V4({inputs:{x:t},backend:e});if(n==="prelu")return W4({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return B4({inputs:{x:t},backend:e,attrs:{alpha:a}});if(n==="sigmoid")return N4({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Ht(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=k.sizeFromShape(a.shape),o=k.inferFromImplicitShape(i,s),l=k.sizeFromShape(o);k.assert(s===l,()=>"The new shape (".concat(o,") has ").concat(l," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")),n.incRef(a.dataId);let c=n.data.get(a.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=o,d.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}var Eme={kernelName:lp,backendName:"cpu",kernelFunc:Ht};function j4(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:s,transposeB:o}=r;_e([a,i],"matMul");let l=a.shape.length,c=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],d=o?i.shape[c-1]:i.shape[c-2],h=s?a.shape[l-1]:a.shape[l-2],p=o?i.shape[c-2]:i.shape[c-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=k.sizeFromShape(f),b=k.sizeFromShape(m),y=Cp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);k.assert(u===d,()=>"Error in matMul: inner shapes (".concat(u,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(s," and transposeB=").concat(o," must match."));let v=s?[g,u,h]:[g,h,u],x=o?[b,p,d]:[b,d,p],w=Ht({inputs:{x:a},backend:n,attrs:{shape:v}}),$=Ht({inputs:{x:i},backend:n,attrs:{shape:x}}),C=s?w.shape[1]:w.shape[2],T=s?w.shape[2]:w.shape[1],A=o?$.shape[1]:$.shape[2],D=Math.max(g,b),N=n.data.get(w.dataId).values,I=n.data.get($.dataId).values,M=k.computeStrides(w.shape),P=k.computeStrides($.shape),[z,j,K]=s?[M[0],1,M[1]]:[M[0],M[1],1],[O,W,L]=o?[1,P[1],P[0]]:[P[1],1,P[0]],H=T*A,Z=nt([D,T,A],w.dtype),J=Z.values,ne=n.blockSize;for(let re=0;re<D;re++){let pe=re%g,de=re%b;for(let he=0;he<T;he+=ne){let Ie=Math.min(he+ne,T);for(let Fe=0;Fe<A;Fe+=ne){let ze=Math.min(Fe+ne,A);for(let Pe=0;Pe<C;Pe+=ne){let st=Math.min(Pe+ne,C);for(let Ge=he;Ge<Ie;Ge++)for(let Ke=Fe;Ke<ze;Ke++){let We=0;for(let ot=Pe;ot<st;ot++){let gt=N[pe*z+Ge*j+ot*K],Ft=I[ot*O+Ke*W+de*L];We+=gt*Ft}J[re*H+(Ge*A+Ke)]+=We}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(y,Z.dtype,Z.values)}var Nme={kernelName:_u,backendName:"cpu",kernelFunc:j4};function _me(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r,h,p,f,m=[];h=j4({inputs:{a,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),s&&(p=ph({inputs:{a:h,b:s},backend:n}),m.push(h),h=p),u&&(f=Tv(n,h,u,o,d),m.push(h),h=f);for(let g of m)n.disposeIntermediateTensorInfo(g);return h}var Ame={kernelName:Jl,backendName:"cpu",kernelFunc:_me},Rme=$t(wu,e=>Math.acos(e)),Dme={kernelName:wu,backendName:"cpu",kernelFunc:Rme},Fme=$t(ku,e=>Math.acosh(e)),Mme={kernelName:ku,backendName:"cpu",kernelFunc:Fme};function Ome(e){let{inputs:t,backend:n}=e,r=t;_e(t,"addN");let a=r.map(o=>n.data.get(o.dataId).values),i=nt(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){let l=a[o];for(let c=0;c<s.length;c++)s[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}var Pme={kernelName:Su,backendName:"cpu",kernelFunc:Ome};function Lme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;_e(a,"all");let o=k.parseAxisParam(i,a.shape),l=o,c=E.getAxesPermutation(l,a.shape.length),u=a;c!=null&&(u=Qr({inputs:{x:a},backend:n,attrs:{perm:c}}),l=E.getInnerMostAxes(l.length,a.shape.length)),E.assertAxesAreInnerMostDims("all",l,u.shape.length);let[d,h]=E.computeOutAndReduceShapes(u.shape,l),p=k.sizeFromShape(h),f=k.makeZerosTypedArray(k.sizeFromShape(d),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<f.length;++b){let y=b*p,v=m[y];for(let x=0;x<p;++x){let w=m[y+x];v=v&&w}f[b]=v}c!=null&&n.disposeIntermediateTensorInfo(u);let g=n.makeTensorInfo(d,u.dtype,f);if(s){let b=E.expandShapeToKeepDim(d,o),y=Ht({inputs:{x:g},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(g),y}return g}var zme={kernelName:$h,backendName:"cpu",kernelFunc:Lme};function Bme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;_e(a,"any");let o=k.parseAxisParam(i,a.shape),l=o,c=E.getAxesPermutation(l,a.shape.length),u=a;c!=null&&(u=Qr({inputs:{x:a},backend:n,attrs:{perm:c}}),l=E.getInnerMostAxes(l.length,a.shape.length)),E.assertAxesAreInnerMostDims("any",l,u.shape.length);let[d,h]=E.computeOutAndReduceShapes(u.shape,l),p=k.sizeFromShape(h),f=k.makeZerosTypedArray(k.sizeFromShape(d),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<f.length;++b){let y=b*p,v=m[y];for(let x=0;x<p;++x){let w=m[y+x];v=v||w}f[b]=v}c!=null&&n.disposeIntermediateTensorInfo(u);let g=n.makeTensorInfo(d,u.dtype,f);if(s){let b=E.expandShapeToKeepDim(d,o),y=Ht({inputs:{x:g},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(g),y}return g}var Wme={kernelName:Ch,backendName:"cpu",kernelFunc:Bme};function Ume(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;_e(a,"argMax");let s=k.parseAxisParam(i,a.shape),o=E.getAxesPermutation(s,a.shape.length),l=a,c=[];o!=null&&(l=Qr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=E.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],E.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,d]=E.computeOutAndReduceShapes(l.shape,s),h=k.sizeFromShape(u),p=k.makeZerosTypedArray(h,"int32"),f=k.sizeFromShape(d),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let b=g*f,y=m[b],v=0;for(let x=0;x<f;++x){let w=m[b+x];w>y&&(y=w,v=x)}p[g]=v}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",p)}var Vme={kernelName:Th,backendName:"cpu",kernelFunc:Ume};function jme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;_e(a,"argMin");let s=k.parseAxisParam(i,a.shape),o=E.getAxesPermutation(s,a.shape.length),l=a,c=[];o!=null&&(l=Qr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=E.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],E.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,d]=E.computeOutAndReduceShapes(l.shape,s),h=k.sizeFromShape(u),p=k.makeZerosTypedArray(h,"int32"),f=k.sizeFromShape(d),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let b=g*f,y=m[b],v=0;for(let x=0;x<f;++x){let w=m[b+x];w<y&&(y=w,v=x)}p[g]=v}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",p)}var Hme={kernelName:Eh,backendName:"cpu",kernelFunc:jme},Gme=$t(Iu,e=>Math.asin(e)),qme={kernelName:Iu,backendName:"cpu",kernelFunc:Gme},Kme=$t($u,e=>Math.asinh(e)),Xme={kernelName:$u,backendName:"cpu",kernelFunc:Kme},Yme=$t(Cu,e=>Math.atan(e)),Jme={kernelName:Cu,backendName:"cpu",kernelFunc:Yme},Zme=bn((e,t)=>Math.atan2(e,t)),Qme=zn(Eu,Zme),ege={kernelName:Eu,backendName:"cpu",kernelFunc:Qme},tge=$t(Tu,e=>Math.atanh(e)),nge={kernelName:Tu,backendName:"cpu",kernelFunc:tge};function RT(e,t,n,r,a,i){let s=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,u=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=nt(a.outShape,n),g=m.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],v=a.outShape[3];for(let x=0;x<a.batchSize;++x){let w=x*b,$=x*r[0];for(let C=0;C<a.inChannels;++C)for(let T=0;T<a.outHeight;++T){let A=T*s-h,D=Math.max(0,A),N=Math.min(a.inHeight,u+A),I=w+T*y;for(let M=0;M<a.outWidth;++M){let P=M*o-p,z=Math.max(0,P),j=Math.min(a.inWidth,d+P),K=f,O=0,W=0;for(let H=D;H<N;H+=l){let Z=$+H*r[1];for(let J=z;J<j;J+=c){let ne=Z+J*r[2],re=e[ne+C];i==="max"&&re>K?K=re:i==="avg"&&(O+=re,W++)}if(isNaN(K))break}let L=I+M*v+C;g[L]=i==="avg"?O/W:K}}}return m}function H4(e,t,n,r,a=!1,i=!1){let s=nt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=nt(t,n,e);for(let g=0;g<r.batchSize;++g)for(let b=0;b<r.inChannels;++b)for(let y=0;y<r.outHeight;++y){let v=y*o-p,x=v;for(;x<0;)x+=c;let w=Math.min(r.inHeight,d+v);for(let $=0;$<r.outWidth;++$){let C=$*l-f,T=C;for(;T<0;)T+=u;let A=Math.min(r.inWidth,h+C),D=Number.NEGATIVE_INFINITY,N=-1;for(let I=x;I<w;I+=c){let M=I-v;for(let P=T;P<A;P+=u){let z=P-C,j=m.get(g,I,P,b);j>D&&(D=j,a?N=i?((g*r.inHeight+I)*r.inWidth+P)*r.inChannels+b:(I*r.inWidth+P)*r.inChannels+b:N=M*h+z)}}s.set(N,g,y,$,b)}}return s}function G4(e,t,n,r,a,i){let s=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,u=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,b=a.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=nt(a.outShape,n),x=v.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],$=a.outShape[2]*a.outShape[3]*a.outShape[4],C=a.outShape[3]*a.outShape[4],T=a.outShape[4];for(let A=0;A<a.batchSize;++A){let D=A*w,N=A*r[0];for(let I=0;I<a.inChannels;++I)for(let M=0;M<a.outDepth;++M){let P=M*s-m,z=P;for(;z<0;)z+=c;let j=Math.min(a.inDepth,h+P),K=D+M*$;for(let O=0;O<a.outHeight;++O){let W=O*o-g,L=W;for(;L<0;)L+=u;let H=Math.min(a.inHeight,p+W),Z=K+O*C;for(let J=0;J<a.outWidth;++J){let ne=J*l-b,re=ne;for(;re<0;)re+=d;let pe=Math.min(a.inWidth,f+ne),de=Z+J*T,he=y,Ie=0,Fe=0;for(let Pe=z;Pe<j;Pe+=c){let st=N+Pe*r[1];for(let Ge=L;Ge<H;Ge+=u){let Ke=st+Ge*r[2];for(let We=re;We<pe;We+=d){let ot=Ke+We*r[3],gt=e[ot+I];if(i==="max"&&gt>he?he=gt:i==="avg"&&(Ie+=gt,Fe++),isNaN(he))break}if(isNaN(he))break}if(isNaN(he))break}let ze=de+I;x[ze]=i==="avg"?Ie/Math.max(Fe,1):he}}}}return v}function rge(e,t){let n=nt(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let b=0;b<t.outDepth;++b){let y=b*r-h,v=y;for(;v<0;)v+=s;let x=Math.min(t.inDepth,c+y);for(let w=0;w<t.outHeight;++w){let $=w*a-p,C=$;for(;C<0;)C+=o;let T=Math.min(t.inHeight,u+$);for(let A=0;A<t.outWidth;++A){let D=A*i-f,N=D;for(;N<0;)N+=l;let I=Math.min(t.inWidth,d+D),M=Number.NEGATIVE_INFINITY,P=-1;for(let z=v;z<x;z+=s){let j=z-y;for(let K=C;K<T;K+=o){let O=K-$;for(let W=N;W<I;W+=l){let L=W-D,H=e.get(m,z,K,W,g);H>=M&&(M=H,P=j*u*d+O*u+L)}}}n.set(P,m,b,w,A,g)}}}return n}function age(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;_e(a,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;k.assert(E.eitherStridesOrDilationsAreOne(s,c),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(c,"'"));let u=E.computePool2DInfo(a.shape,i,s,c,o,l),d;if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))d=ps({inputs:{x:a},backend:n});else{let h=n.data.get(a.dataId).values,p=k.computeStrides(a.shape),f=RT(h,a.shape,a.dtype,p,u,"avg");d=n.makeTensorInfo(u.outShape,a.dtype,f.values)}return d}var ige={kernelName:Nu,backendName:"cpu",kernelFunc:age};function sge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;_e(a,"avgPool3d");let u=E.computePool3DInfo(a.shape,i,s,1,o,l,c),d=n.data.get(a.dataId).values,h=G4(d,a.shape,a.dtype,k.computeStrides(a.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}var oge={kernelName:Nh,backendName:"cpu",kernelFunc:sge};function lge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;_e([a,i],"avgPool3DGrad");let u=E.computePool3DInfo(i.shape,s,o,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,b=u.dilationDepth,y=u.dilationHeight,v=u.dilationWidth,x=u.effectiveFilterDepth,w=u.effectiveFilterHeight,$=u.effectiveFilterWidth,C=x-1-u.padInfo.front,T=$-1-u.padInfo.left,A=w-1-u.padInfo.top,D=nt(i.shape,"float32"),N=1/(f*m*g),I=n.bufferSync(a);for(let M=0;M<u.batchSize;++M)for(let P=0;P<u.inChannels;++P)for(let z=0;z<u.inDepth;++z)for(let j=0;j<u.inHeight;++j)for(let K=0;K<u.inWidth;++K){let O=z-C,W=j-A,L=K-T,H=0;for(let Z=0;Z<x;Z+=b){let J=(O+Z)/d;if(!(J<0||J>=u.outDepth||Math.floor(J)!==J))for(let ne=0;ne<w;ne+=y){let re=(W+ne)/h;if(!(re<0||re>=u.outHeight||Math.floor(re)!==re))for(let pe=0;pe<$;pe+=v){let de=(L+pe)/p;if(de<0||de>=u.outWidth||Math.floor(de)!==de)continue;let he=I.get(M,J,re,de,P);H+=he}}}D.set(H*N,M,z,j,K,P)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}var uge={kernelName:Gm,backendName:"cpu",kernelFunc:lge};function cge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;_e([a,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:c}=r,u=E.computePool2DInfo(s.shape,o,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,b=u.effectiveFilterHeight,y=u.effectiveFilterWidth,v=y-1-u.padInfo.left,x=b-1-u.padInfo.top,w=nt(s.shape,"float32"),$=1/(p*f),C=n.data.get(a.dataId).values,T=nt(a.shape,"float32",C);for(let A=0;A<u.batchSize;++A)for(let D=0;D<u.inChannels;++D)for(let N=0;N<u.inHeight;++N)for(let I=0;I<u.inWidth;++I){let M=N-x,P=I-v,z=0;for(let j=0;j<b;j+=m){let K=(M+j)/d;if(!(K<0||K>=u.outHeight||Math.floor(K)!==K))for(let O=0;O<y;O+=g){let W=(P+O)/h;if(W<0||W>=u.outWidth||Math.floor(W)!==W)continue;let L=T.get(A,K,W,D);z+=L}}w.set(z*$,A,N,I,D)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var dge={kernelName:Hm,backendName:"cpu",kernelFunc:cge};function hge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,scale:i,offset:s,mean:o,variance:l}=t;k.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),k.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),k.assert(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),_e([a,o,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);let u=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=s?n.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,b=p.length,y=h.length,v=d.length,x=0,w=0,$=0,C=0;for(let T=0;T<u.length;++T)m[T]=f[x++]+(u[T]-d[w++])*p[$++]/Math.sqrt(h[C++]+c),x>=g&&(x=0),w>=v&&(w=0),$>=b&&($=0),C>=y&&(C=0);return n.makeTensorInfo(a.shape,a.dtype,m)}var pge={kernelName:Ku,backendName:"cpu",kernelFunc:hge};function fge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;_e([a],"batchToSpaceND");let o=i.reduce((b,y)=>b*y),l=E.getReshaped(a.shape,i,o),c=E.getPermuted(l.length,i.length),u=E.getReshapedPermuted(a.shape,i,o),d=E.getSliceBeginCoords(s,i.length),h=E.getSliceSize(u,s,i.length),p=Ht({inputs:{x:a},backend:n,attrs:{shape:l}}),f=Qr({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Ht({inputs:{x:f},backend:n,attrs:{shape:u}}),g=du({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var mge={kernelName:_h,backendName:"cpu",kernelFunc:fge};function gge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=wT(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}var bge={kernelName:Ah,backendName:"cpu",kernelFunc:gge};function yge(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=E.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var vge={kernelName:qm,backendName:"cpu",kernelFunc:yge},xge=$t(Zo,(e,t)=>{let n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),wge={kernelName:Zo,backendName:"cpu",kernelFunc:xge},kge=e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(k.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<o.length;c++){let u=o[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,t.shape,"float32")},Sge={kernelName:Km,backendName:"cpu",kernelFunc:kge};function fh(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Ige={kernelName:z0,backendName:"cpu",kernelFunc:fh};function mh(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=k.parseAxisParam(a,t[0].shape)[0],s=t.map(m=>m.shape);E.assertParamsConsistent(s,i);let o=E.computeOutShape(t.map(m=>m.shape),i);if(k.sizeFromShape(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(m=>k.sizeFromShape(m.shape)>0);if(l.length===1)return ps({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){let m=l.map(x=>cu({inputs:{input:x},backend:n})),g=l.map(x=>fh({inputs:{input:x},backend:n})),b=mh({inputs:m,backend:n,attrs:{axis:i}}),y=mh({inputs:g,backend:n,attrs:{axis:i}}),v=la({inputs:{real:b,imag:y},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),v}let c=l.map(m=>{let g=[-1,k.sizeFromShape(m.shape.slice(i))];return Ht({inputs:{x:m},backend:n,attrs:{shape:g}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));o=E.computeOutShape(c.map(m=>m.shape),1);let d=c[0].shape[0]===1,h=kT(u,o,t[0].dtype,d),p=E.computeOutShape(l.map(m=>m.shape),i),f=n.makeTensorInfo(p,t[0].dtype,h);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}var $ge={kernelName:Dh,backendName:"cpu",kernelFunc:mh};function q4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;_e([a,i],"conv2d");let d=E.convertConv2DDataFormat(l),h=E.computeConv2DInfo(a.shape,i.shape,s,c,o,u,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,b=h.padInfo.left,y=h.padInfo.top,v=h.dataFormat==="channelsLast",x=new Cn(h.outShape,a.dtype),w=k.computeStrides(a.shape),$=k.computeStrides(i.shape),C=w[0],T=v?w[1]:w[2],A=v?w[2]:1,D=v?1:w[1],N=x.strides[0],I=v?x.strides[1]:x.strides[2],M=v?x.strides[2]:1,P=v?1:x.strides[1],z=n.data.get(a.dataId).values,j=n.data.get(i.dataId).values,K=x.values;for(let O=0;O<h.batchSize;++O){let W=O*C,L=O*N;for(let H=0;H<h.outHeight;++H){let Z=L+H*I,J=H*h.strideHeight-y;for(let ne=0;ne<p;++ne){let re=J+ne*m;if(re<0||re>=h.inHeight)continue;let pe=ne*$[0],de=W+re*T;for(let he=0;he<h.outWidth;++he){let Ie=Z+he*M,Fe=he*h.strideWidth-b;for(let ze=0;ze<f;++ze){let Pe=Fe+ze*g;if(Pe<0||Pe>=h.inWidth)continue;let st=pe+ze*$[1],Ge=de+Pe*A,Ke=st;for(let We=0;We<h.inChannels;++We){let ot=z[Ge+We*D];for(let gt=0;gt<h.outChannels;++gt)K[Ie+gt*P]+=ot*j[Ke+gt];Ke+=h.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,K)}var Cge={kernelName:Du,backendName:"cpu",kernelFunc:q4};function Tge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;_e([a,i],"conv2dBackpropFilter");let d=E.convertConv2DDataFormat(l),h=E.computeConv2DInfo(a.shape,u,s,1,o,c,!1,d),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,b=h.dataFormat==="channelsLast",y=new Cn(h.filterShape,"float32"),v=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,$=n.data.get(i.dataId).values,C=new Cn(a.shape,a.dtype,w),T=new Cn(i.shape,i.dtype,$);for(let A=0;A<m;++A){let D=Math.max(0,Math.ceil((x-A)/p)),N=Math.min(h.outHeight,(h.inHeight+x-A)/p);for(let I=0;I<g;++I){let M=Math.max(0,Math.ceil((v-I)/f)),P=Math.min(h.outWidth,(h.inWidth+v-I)/f);for(let z=0;z<h.inChannels;++z)for(let j=0;j<h.outChannels;++j){let K=0;for(let O=0;O<h.batchSize;++O)for(let W=D;W<N;++W){let L=A+W*p-x;for(let H=M;H<P;++H){let Z=I+H*f-v;b?K+=C.get(O,L,Z,z)*T.get(O,W,H,j):K+=C.get(O,z,L,Z)*T.get(O,j,W,H)}}y.set(K,A,I,z,j)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var Ege={kernelName:D0,backendName:"cpu",kernelFunc:Tge};function Nge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;_e([a,i],"conv2dBackpropInput");let d=k.computeStrides(i.shape),h=k.computeStrides(a.shape),p=E.convertConv2DDataFormat(c),f=E.computeConv2DInfo(s,i.shape,o,1,l,u,!1,p),m=new Cn(f.inShape,"float32"),g=m.values,b=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,[v,x,w]=d,{batchSize:$,filterHeight:C,filterWidth:T,inChannels:A,inHeight:D,inWidth:N,outChannels:I,outHeight:M,outWidth:P,strideHeight:z,strideWidth:j}=f;p=f.dataFormat;let K=C-1-f.padInfo.top,O=T-1-f.padInfo.left,W=p==="channelsLast",L=m.strides[0],H=W?m.strides[1]:m.strides[2],Z=W?m.strides[2]:1,J=W?1:m.strides[1],ne=h[0],re=W?h[1]:h[2],pe=W?h[2]:1,de=W?1:h[1];for(let he=0;he<$;++he)for(let Ie=0;Ie<A;++Ie)for(let Fe=0;Fe<D;++Fe){let ze=Fe-K,Pe=Math.max(0,Math.ceil(ze/z)),st=Math.min(M,(C+ze)/z);for(let Ge=0;Ge<N;++Ge){let Ke=Ge-O,We=Math.max(0,Math.ceil(Ke/j)),ot=Math.min(P,(T+Ke)/j),gt=0;for(let Ct=Pe;Ct<st;++Ct){let yn=Ct*z-ze;for(let Xt=We;Xt<ot;++Xt){let vn=Xt*j-Ke,hr=ne*he+re*Ct+pe*Xt,Bt=v*(C-1-yn)+x*(T-1-vn)+w*Ie;for(let Bn=0;Bn<I;++Bn){let Yt=b[hr+de*Bn],un=y[Bt+Bn];gt+=Yt*un}}}let Ft=L*he+H*Fe+Z*Ge+J*Ie;g[Ft]=gt}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var _ge={kernelName:Fu,backendName:"cpu",kernelFunc:Nge};function Age(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;_e([a,i],"conv3d");let c=E.computeConv3DInfo(a.shape,i.shape,s,l,o),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,b=g.front,y=g.left,v=g.top,x=new Cn(c.outShape,a.dtype),w=n.data.get(a.dataId).values,$=n.data.get(i.dataId).values,C=x.values,T=k.computeStrides(a.shape),A=k.computeStrides(i.shape);for(let D=0;D<c.batchSize;++D){let N=D*T[0],I=D*x.strides[0];for(let M=0;M<c.outDepth;++M){let P=I+M*x.strides[1],z=M*c.strideDepth-b;for(let j=0;j<u;++j){let K=z+j*p;if(K<0||K>=c.inDepth)continue;let O=j*A[0],W=N+K*T[1];for(let L=0;L<c.outHeight;++L){let H=P+L*x.strides[2],Z=L*c.strideHeight-v;for(let J=0;J<d;++J){let ne=Z+J*f;if(ne<0||ne>=c.inHeight)continue;let re=O+J*A[1],pe=W+ne*T[2];for(let de=0;de<c.outWidth;++de){let he=H+de*c.outChannels,Ie=de*c.strideWidth-y;for(let Fe=0;Fe<h;++Fe){let ze=Ie+Fe*m;if(ze<0||ze>=c.inWidth)continue;let Pe=re+Fe*A[2],st=pe+ze*c.inChannels,Ge=Pe;for(let Ke=0;Ke<c.inChannels;++Ke){let We=w[st+Ke];for(let ot=0;ot<c.outChannels;++ot)C[he+ot]+=We*$[Ge+ot];Ge+=c.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var Rge={kernelName:Mu,backendName:"cpu",kernelFunc:Age};function Dge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;_e([a,i],"conv3dBackpropFilterV2");let c=k.computeStrides(a.shape),u=k.computeStrides(i.shape),d=E.computeConv3DInfo(a.shape,l,s,1,o),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,b=d.filterWidth,y=new Cn(d.filterShape,"float32"),v=y.values,[x,w,$,C]=y.strides,T=n.data.get(i.dataId).values,[A,D,N,I]=u,M=n.data.get(a.dataId).values,[P,z,j,K]=c,O=d.padInfo.front,W=d.padInfo.left,L=d.padInfo.top;for(let H=0;H<m;++H){let Z=Math.max(0,Math.ceil((O-H)/h)),J=Math.min(d.outDepth,(d.inDepth+O-H)/h),ne=H*x;for(let re=0;re<g;++re){let pe=Math.max(0,Math.ceil((L-re)/p)),de=Math.min(d.outHeight,(d.inHeight+L-re)/p),he=re*w+ne;for(let Ie=0;Ie<b;++Ie){let Fe=Math.max(0,Math.ceil((W-Ie)/f)),ze=Math.min(d.outWidth,(d.inWidth+W-Ie)/f),Pe=Ie*$+he;for(let st=0;st<d.inChannels;++st){let Ge=st*C+Pe;for(let Ke=0;Ke<d.outChannels;++Ke){let We=0;for(let ot=0;ot<d.batchSize;++ot){let gt=ot*P,Ft=ot*A;for(let Ct=Z;Ct<J;++Ct){let yn=(H+Ct*h-O)*z+gt,Xt=Ct*D+Ft;for(let vn=pe;vn<de;++vn){let hr=(re+vn*p-L)*j+yn,Bt=vn*N+Xt;for(let Bn=Fe;Bn<ze;++Bn){let Yt=(Ie+Bn*f-W)*K+hr,un=Bn*I+Bt;We+=M[Yt+st]*T[un+Ke]}}}}v[Ge+Ke]=We}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var Fge={kernelName:Fh,backendName:"cpu",kernelFunc:Dge};function Mge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;_e([a],"conv3dBackpropInputV2");let c=k.computeStrides(a.shape),u=k.computeStrides(i.shape),d=E.computeConv3DInfo(l,i.shape,o,1,s),h=new Cn(d.inShape,"float32"),p=h.values,[f,m,g,b]=h.strides,y=n.data.get(a.dataId).values,[v,x,w,$]=c,C=n.data.get(i.dataId).values,[T,A,D,N]=u,{batchSize:I,filterDepth:M,filterHeight:P,filterWidth:z,inChannels:j,inDepth:K,inHeight:O,inWidth:W,outChannels:L,outDepth:H,outHeight:Z,outWidth:J,strideDepth:ne,strideHeight:re,strideWidth:pe}=d,de=M-1-d.padInfo.front,he=P-1-d.padInfo.top,Ie=z-1-d.padInfo.left;for(let Fe=0;Fe<I;++Fe)for(let ze=0;ze<j;++ze)for(let Pe=0;Pe<K;++Pe){let st=Pe-de,Ge=Math.max(0,Math.ceil(st/ne)),Ke=Math.min(H,(M+st)/ne);for(let We=0;We<O;++We){let ot=We-he,gt=Math.max(0,Math.ceil(ot/re)),Ft=Math.min(Z,(P+ot)/re);for(let Ct=0;Ct<W;++Ct){let yn=Ct-Ie,Xt=Math.max(0,Math.ceil(yn/pe)),vn=Math.min(J,(z+yn)/pe),hr=0;for(let Bt=Ge;Bt<Ke;++Bt){let Bn=Bt*ne-st;for(let Yt=gt;Yt<Ft;++Yt){let un=Yt*re-ot;for(let pr=Xt;pr<vn;++pr){let Ia=pr*pe-yn,Mt=v*Fe+x*Bt+w*Yt+$*pr,tr=T*(M-1-Bn)+A*(P-1-un)+D*(z-1-Ia)+N*ze;for(let Wn=0;Wn<L;++Wn){let $a=y[Mt+Wn],Ot=C[tr+Wn];hr+=$a*Ot}}}}p[f*Fe+m*Pe+g*We+b*Ct+ze]=hr}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}var Oge={kernelName:Mh,backendName:"cpu",kernelFunc:Mge},Pge=$t(Ou,e=>Math.cos(e)),Lge={kernelName:Ou,backendName:"cpu",kernelFunc:Pge},zge=$t(Pu,e=>Math.cosh(e)),Bge={kernelName:Pu,backendName:"cpu",kernelFunc:zge};function Wge(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,[u,d,h,p]=a.shape,f=i.shape[0],[m,g]=o,b=nt([f,m,g,p],"float32"),y=n.data.get(i.dataId).values,v=n.data.get(s.dataId).values,x=n.data.get(a.dataId).values,w=k.computeStrides(a.shape),$=k.computeStrides(b.shape);for(let C=0;C<f;C++){let T=C*4,A=y[T],D=y[T+1],N=y[T+2],I=y[T+3],M=v[C];if(M>=u)continue;let P=m>1?(N-A)*(d-1)/(m-1):0,z=g>1?(I-D)*(h-1)/(g-1):0;for(let j=0;j<m;j++){let K=m>1?A*(d-1)+j*P:.5*(A+N)*(d-1);if(K<0||K>d-1){for(let O=0;O<g;O++)for(let W=0;W<p;W++){let L=W+O*$[2]+j*$[1]+C*$[0];b.values[L]=c}continue}if(l==="bilinear"){let O=Math.floor(K),W=Math.ceil(K),L=K-O;for(let H=0;H<g;H++){let Z=g>1?D*(h-1)+H*z:.5*(D+I)*(h-1);if(Z<0||Z>h-1){for(let pe=0;pe<p;pe++){let de=pe+H*$[2]+j*$[1]+C*$[0];b.values[de]=c}continue}let J=Math.floor(Z),ne=Math.ceil(Z),re=Z-J;for(let pe=0;pe<p;pe++){let de=pe+J*w[2]+O*w[1]+M*w[0],he=x[de];de=pe+ne*w[2]+O*w[1]+M*w[0];let Ie=x[de];de=pe+J*w[2]+W*w[1]+M*w[0];let Fe=x[de];de=pe+ne*w[2]+W*w[1]+M*w[0];let ze=x[de],Pe=he+(Ie-he)*re,st=Fe+(ze-Fe)*re;de=pe+H*$[2]+j*$[1]+C*$[0],b.values[de]=Pe+(st-Pe)*L}}}else for(let O=0;O<g;++O){let W=g>1?D*(h-1)+O*z:.5*(D+I)*(h-1);if(W<0||W>h-1){for(let Z=0;Z<p;Z++){let J=Z+O*$[2]+j*$[1]+C*$[0];b.values[J]=c}continue}let L=Math.round(W),H=Math.round(K);for(let Z=0;Z<p;Z++){let J=Z+L*w[2]+H*w[1]+M*w[0],ne=Z+O*$[2]+j*$[1]+C*$[0];b.values[ne]=x[J]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var Uge={kernelName:Ph,backendName:"cpu",kernelFunc:Wge};function Vge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;_e(a,"cumprod");let l=E.getAxesPermutation([i],a.shape.length),c=a;l!=null&&(c=Qr({inputs:{x:a},backend:n,attrs:{perm:l}}));let u=E.getInnerMostAxes(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(u));let d=Ua(c.dtype,"int32"),h=k.makeOnesTypedArray(k.sizeFromShape(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(b,y)=>b+f-y-1:(b,y)=>b+y;for(let b=0;b<p.length;b+=f)for(let y=0;y<f;y++){let v=m(b,y);if(y===0)h[v]=s?1:p[v];else{let x=m(b,y-1);h[v]=s?p[x]*h[x]:p[v]*h[x]}}let g=n.makeTensorInfo(c.shape,d,h);if(l!=null){let b=E.getUndoAxesPermutation(l),y=Qr({inputs:{x:g},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),y}return g}var jge={kernelName:Oh,backendName:"cpu",kernelFunc:Vge};function Hge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;_e(a,"cumsum");let l=E.getAxesPermutation([i],a.shape.length),c=a;l!=null&&(c=Qr({inputs:{x:a},backend:n,attrs:{perm:l}}));let u=E.getInnerMostAxes(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(u));let d=Ua(c.dtype,"int32"),h=k.makeZerosTypedArray(k.sizeFromShape(c.shape),d),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(b,y)=>b+f-y-1:(b,y)=>b+y;for(let b=0;b<p.length;b+=f)for(let y=0;y<f;y++){let v=m(b,y);if(y===0)h[v]=s?0:p[v];else{let x=m(b,y-1);h[v]=s?p[x]+h[x]:p[v]+h[x]}}let g=n.makeTensorInfo(c.shape,d,h);if(l!=null){let b=E.getUndoAxesPermutation(l),y=Qr({inputs:{x:g},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),y}return g}var Gge={kernelName:Lu,backendName:"cpu",kernelFunc:Hge};function qge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(a.shape.length===1){let l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=wT(l,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}else if(a.shape.length===2){let l=n.bufferSync(a),c=n.bufferSync(i),u=t4(l,c,s,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}var Kge={kernelName:Xm,backendName:"cpu",kernelFunc:qge};function Xge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r;k.assert(s==="NHWC",()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s));let o=a.shape[0],l=a.shape[1],c=a.shape[2],u=a.shape[3],d=l*i,h=c*i,p=u/(i*i),f=n.data.get(a.dataId).values,m=new Float32Array(o*d*h*p),g=0;for(let b=0;b<o;++b)for(let y=0;y<d;++y){let v=Math.floor(y/i),x=y%i;for(let w=0;w<h;++w){let $=Math.floor(w/i),C=w%i,T=(x*i+C)*p;for(let A=0;A<p;++A){let D=A+T+u*($+c*(v+l*b));m[g++]=f[D]}}}return n.makeTensorInfo([o,d,h,p],a.dtype,m)}var Yge={kernelName:Lh,backendName:"cpu",kernelFunc:Xge};function K4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;_e([a,i],"depthwiseConv2DNative");let u=k.computeStrides(a.shape),d=k.computeStrides(i.shape),h=l;h==null&&(h=[1,1]),k.assert(E.eitherStridesOrDilationsAreOne(s,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(h,"'"));let p=E.computeConv2DInfo(a.shape,i.shape,s,h,o,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:b,padInfo:y}=p,v=y.left,x=y.top,w=p.outChannels/p.inChannels,$=new Cn(p.outShape,a.dtype),C=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,A=$.values;for(let D=0;D<p.batchSize;++D){let N=D*u[0],I=D*$.strides[0];for(let M=0;M<p.outHeight;++M){let P=I+M*$.strides[1],z=M*p.strideHeight-x;for(let j=0;j<f;++j){let K=z+j*g;if(K<0||K>=p.inHeight)continue;let O=j*d[0],W=N+K*u[1];for(let L=0;L<p.outWidth;++L){let H=P+L*$.strides[2],Z=L*p.strideWidth-v;for(let J=0;J<m;++J){let ne=Z+J*b;if(ne<0||ne>=p.inWidth)continue;let re=O+J*d[1],pe=W+ne*p.inChannels,de=H,he=re;for(let Ie=0;Ie<p.inChannels;++Ie){let Fe=C[pe+Ie];for(let ze=0;ze<w;++ze)A[de+ze]+=Fe*T[he+ze];de+=w,he+=w}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}var Jge={kernelName:zu,backendName:"cpu",kernelFunc:K4};function Zge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;_e([a,i],"depthwiseConv2dNativeBackpropFilter");let d=E.computeConv2DInfo(a.shape,u,s,o,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=d,g=new Cn(d.filterShape,"float32"),b=d.padInfo.left,y=d.padInfo.top,v=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,w=new Cn(a.shape,a.dtype,x),$=n.data.get(i.dataId).values,C=new Cn(i.shape,i.dtype,$);for(let T=0;T<f;++T){let A=Math.max(0,Math.ceil((y-T)/h)),D=Math.min(d.outHeight,(d.inHeight+y-T)/h);for(let N=0;N<m;++N){let I=Math.max(0,Math.ceil((b-N)/p)),M=Math.min(d.outWidth,(d.inWidth+b-N)/p);for(let P=0;P<d.outChannels;++P){let z=Math.trunc(P/v),j=P%v,K=0;for(let O=0;O<d.batchSize;++O)for(let W=A;W<D;++W){let L=T+W*h-y;for(let H=I;H<M;++H){let Z=N+H*p-b;K+=w.get(O,L,Z,z)*C.get(O,W,H,P)}}g.set(K,T,N,z,j)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var Qge={kernelName:F0,backendName:"cpu",kernelFunc:Zge};function ebe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;_e([a,i],"depthwiseConv2DNativeBackpropInput");let d=k.computeStrides(a.shape),h=k.computeStrides(i.shape),p=E.computeConv2DInfo(u,i.shape,s,o,l,c,!0),f=new Cn(p.inShape,"float32"),m=f.values,[g,b,y]=f.strides,v=n.data.get(a.dataId).values,[x,w,$]=d,C=n.data.get(i.dataId).values,[T,A,D]=h,{batchSize:N,filterHeight:I,filterWidth:M,inChannels:P,inHeight:z,inWidth:j,outChannels:K,outHeight:O,outWidth:W,strideHeight:L,strideWidth:H}=p,Z=I-1-p.padInfo.top,J=M-1-p.padInfo.left,ne=K/P;for(let re=0;re<N;++re)for(let pe=0;pe<P;++pe)for(let de=0;de<z;++de){let he=de-Z,Ie=Math.max(0,Math.ceil(he/L)),Fe=Math.min(O,(I+he)/L);for(let ze=0;ze<j;++ze){let Pe=ze-J,st=Math.max(0,Math.ceil(Pe/H)),Ge=Math.min(W,(M+Pe)/H),Ke=0;for(let We=Ie;We<Fe;++We){let ot=We*L-he;for(let gt=st;gt<Ge;++gt){let Ft=gt*H-Pe,Ct=x*re+w*We+$*gt,yn=T*(I-1-ot)+A*(M-1-Ft)+D*pe;for(let Xt=0;Xt<ne;++Xt){let vn=pe*ne+Xt,hr=v[Ct+vn],Bt=C[yn+Xt];Ke+=hr*Bt}}}m[g*re+b*de+y*ze+pe]=Ke}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}var tbe={kernelName:M0,backendName:"cpu",kernelFunc:ebe};function nbe(e){let{inputs:t,backend:n}=e,{x:r}=t,a=k.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,s=nt([a,a],r.dtype),o=s.values;for(let c=0;c<i.length;c++)o[c*a+c]=i[c];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}var rbe={kernelName:Ym,backendName:"cpu",kernelFunc:nbe},abe={kernelName:Bu,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a}=e,{strides:i,pad:s,dilations:o}=n,l=t,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(a.dataId).values,h=a.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:$,filterWidth:C,dilationHeight:T,dilationWidth:A,outShape:D}=E.computeDilation2DInfo(r.shape,a.shape,i,s,"NHWC",o),N=k.sizeFromShape(D),I=D.length,M=k.getArrayFromDType(r.dtype,N);for(let P=0;P<p;++P)for(let z=0;z<b;++z){let j=z*x-v.top;for(let K=0;K<y;++K){let O=K*w-v.left;for(let W=0;W<g;++W){let L=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<$;++Z){let J=j+Z*T;if(J>=0&&J<f)for(let ne=0;ne<C;++ne){let re=O+ne*A;if(re>=0&&re<m){let pe=k.locToIndex([P,J,re,W],u,k.computeStrides(r.shape)),de=k.locToIndex([Z,ne,W],h,k.computeStrides(a.shape)),he=c[pe]+d[de];he>L&&(L=he)}}}let H=k.locToIndex([P,z,K,W],I,k.computeStrides(D));M[H]=L}}}return{dataId:l.write(k.toTypedArray(M,r.dtype),D,r.dtype),shape:D,dtype:r.dtype}}},ibe={kernelName:Zd,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:i}=e,{strides:s,pad:o,dilations:l}=n,c=t,u=k.toNestedArray(r.shape,c.data.get(r.dataId).values),d=k.toNestedArray(a.shape,c.data.get(a.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:b,padInfo:y,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:$,dilationHeight:C,dilationWidth:T,outShape:A}=E.computeDilation2DInfo(r.shape,a.shape,s,o,"NHWC",l);k.assert(i.rank===A.length,()=>"Error in ".concat(Zd,", dy must have the same rank as output ").concat(A.length,", but got ").concat(i.rank));let D=k.toNestedArray(A,c.data.get(i.dataId).values),N=k.makeZerosNestedTypedArray(a.shape,a.dtype);for(let I=0;I<h;++I)for(let M=0;M<g;++M){let P=M*v-y.top;for(let z=0;z<b;++z){let j=z*x-y.left;for(let K=0;K<m;++K){let O=Number.MIN_SAFE_INTEGER,W=0,L=0;for(let H=0;H<w;++H){let Z=P+H*C;if(Z>=0&&Z<p)for(let J=0;J<$;++J){let ne=j+J*T;if(ne>=0&&ne<f){let re=u[I][Z][ne][K]+d[H][J][K];re>O&&(O=re,W=H,L=J)}}}N[W][L][K]+=D[I][M][z][K]}}}return{dataId:c.write(k.toTypedArray(N,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},sbe={kernelName:Jd,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:i}=e,{strides:s,pad:o,dilations:l}=n,c=t,u=k.toNestedArray(r.shape,c.data.get(r.dataId).values),d=k.toNestedArray(a.shape,c.data.get(a.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:b,padInfo:y,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:$,dilationHeight:C,dilationWidth:T,outShape:A}=E.computeDilation2DInfo(r.shape,a.shape,s,o,"NHWC",l);k.assert(i.rank===A.length,()=>"Error in ".concat(Jd,", dy must have the same rank as output ").concat(A.length,", but got ").concat(i.rank));let D=k.toNestedArray(A,c.data.get(i.dataId).values),N=k.makeZerosNestedTypedArray(r.shape,r.dtype);for(let I=0;I<h;++I)for(let M=0;M<g;++M){let P=M*v-y.top;for(let z=0;z<b;++z){let j=z*x-y.left;for(let K=0;K<m;++K){let O=Number.MIN_SAFE_INTEGER,W=P<0?0:P,L=j<0?0:j;for(let H=0;H<w;++H){let Z=P+H*C;if(Z>=0&&Z<p)for(let J=0;J<$;++J){let ne=j+J*T;if(ne>=0&&ne<f){let re=u[I][Z][ne][K]+d[H][J][K];re>O&&(O=re,W=Z,L=ne)}}}N[I][W][L][K]+=D[I][M][z][K]}}}return{dataId:c.write(k.toTypedArray(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function obe(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},c=(l==null?void 0:l.alpha)||1,u=(o==null?void 0:o.contextType)||"2d";if(u!=="2d")throw new Error("Context type ".concat(o.contextType," is not supported by the CPU backend."));let d=i.getContext(u,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error("Could not get the context with ".concat(u," type."));let[h,p]=a.shape.slice(0,2),f=a.shape.length===2?1:a.shape[2],m=n.data.get(a.dataId).values,g=a.dtype==="float32"?255:1,b=new Uint8ClampedArray(p*h*4);for(let v=0;v<h*p;++v){let x=[0,0,0,255*c];for(let $=0;$<f;$++){let C=m[v*f+$];if(a.dtype==="float32"){if(C<0||C>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(C,"."))}else if(a.dtype==="int32"&&(C<0||C>255))throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(C,"."));f===1?(x[0]=C*g,x[1]=C*g,x[2]=C*g):x[$]=C*g}let w=v*4;b[w+0]=Math.round(x[0]),b[w+1]=Math.round(x[1]),b[w+2]=Math.round(x[2]),b[w+3]=Math.round(x[3])}i.width=p,i.height=h;let y=new ImageData(b,p,h);return d.putImageData(y,0,0),a}var lbe={kernelName:f$,backendName:"cpu",kernelFunc:obe};function Ug(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;_e(a,"sum");let o;a.dtype==="bool"?o=Vo({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):o=ps({inputs:{x:a},backend:n});let l=o.shape.length,c=k.parseAxisParam(i,o.shape),u=E.getAxesPermutation(c,l),d=c,h=o;u!=null&&(h=Qr({inputs:{x:o},backend:n,attrs:{perm:u}}),d=E.getInnerMostAxes(d.length,l)),E.assertAxesAreInnerMostDims("sum",d,h.shape.length);let[p,f]=E.computeOutAndReduceShapes(h.shape,d),m=E.upcastType(h.dtype,"int32"),g=$v(n,p,m),b=k.sizeFromShape(f),y=n.data.get(g.dataId).values,v=n.data.get(h.dataId).values;for(let x=0;x<y.length;++x){let w=x*b,$=0;for(let C=0;C<b;++C)$+=v[w+C];y[x]=$}if(s){let x=E.expandShapeToKeepDim(g.shape,c),w=g;g=Ht({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(o),u!=null&&n.disposeIntermediateTensorInfo(h),g}var ube={kernelName:Dc,backendName:"cpu",kernelFunc:Ug};function cbe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=E.decodeEinsumEquation(a,i.length);E.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=E.getEinsumComputePath(o,l),d=u.length,h=null,p=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:b,expandDims:y}=E.getEinsumPermutation(p,l[g]),v;E.isIdentityPermutation(b)?v=i[g]:(v=Qr({inputs:{x:i[g]},backend:n,attrs:{perm:b}}),f.push(v));let x=v.shape.slice();for(let w=0;w<y.length;++w)x.splice(y[w],0,1);k.arraysEqual(v.shape,x)||(v=Ht({inputs:{x:v},backend:n,attrs:{shape:x}}),f.push(v)),h===null?h=v:(h=Gx({inputs:{a:v,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=Ug({inputs:{x:h},backend:n,attrs:{axis:c[m]-(s.length-p),keepDims:!1}}),f.push(h)),p--)}for(let m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}var dbe={kernelName:O0,backendName:"cpu",kernelFunc:cbe};function hbe(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t;_e([r,a],"eluGrad");let i=new Float32Array(k.sizeFromShape(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];c>=0?i[l]=o[l]:i[l]=o[l]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}var pbe={kernelName:zh,backendName:"cpu",kernelFunc:hbe},fbe=E.ERF_P,mbe=E.ERF_A1,gbe=E.ERF_A2,bbe=E.ERF_A3,ybe=E.ERF_A4,vbe=E.ERF_A5,xbe=$t(Vu,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+fbe*n);return t*(1-((((vbe*r+ybe)*r+bbe)*r+gbe)*r+mbe)*r*Math.exp(-n*n))}),wbe={kernelName:Vu,backendName:"cpu",kernelFunc:xbe};function Ev(e){let{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:i}=r,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(k.assert(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),Ht({inputs:{x:a},backend:n,attrs:{shape:o}})}var kbe={kernelName:Wh,backendName:"cpu",kernelFunc:Ev},Sbe=bn((e,t)=>e/t),DT=zn(Wu,Sbe),hS={kernelName:Wu,backendName:"cpu",kernelFunc:DT};function X4(e,t,n){let r=e.shape,a=r[0],i=r[1],s=n.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[a,i],u=k.sizeFromShape(c),d=k.getTypedArrayFromDType("float32",u),h=k.getTypedArrayFromDType("float32",u);for(let g=0;g<a;g++){let b=du({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,i]}}),y=du({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=la({inputs:{real:b,imag:y},backend:n}),{real:x,imag:w}=Ibe(v,t,n),$=E.mergeRealAndImagArrays(x,w);for(let C=0;C<i;C++){let T=E.getComplexWithIndex($,C);d[g*i+C]=T.real,h[g*i+C]=T.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v)}let p=n.makeTensorInfo(c,"float32",d),f=n.makeTensorInfo(c,"float32",h),m=la({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function Ibe(e,t,n){let r=k.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if($be(r)){let o=pS(i,s,r,t,n),l=[e.shape[0],e.shape[1]];if(t){let c=n.makeTensorInfo(l,"float32",o.real),u=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",k.createScalarValue(r,"float32")),h=ps({inputs:{x:d},backend:n}),p=hS.kernelFunc({inputs:{a:c,b:d},backend:n}),f=hS.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(f.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return o}else{let o=E.mergeRealAndImagArrays(i,s),l=Cbe(o,r,t);return E.splitRealAndImagArrays(l)}}function $be(e){return(e&e-1)===0}function pS(e,t,n,r,a){if(n===1)return{real:e,imag:t};let i=E.mergeRealAndImagArrays(e,t),s=n/2,o=E.complexWithEvenIndex(i),l=o.real,c=o.imag,u=[l.length],d=a.makeTensorInfo(u,"float32",l),h=a.makeTensorInfo(u,"float32",c),p=la({inputs:{real:d,imag:h},backend:a}),f=E.complexWithOddIndex(i),m=f.real,g=f.imag,b=[m.length],y=a.makeTensorInfo(b,"float32",m),v=a.makeTensorInfo(b,"float32",g),x=la({inputs:{real:y,imag:v},backend:a}),w=pS(l,c,s,r,a),$=w.real,C=w.imag,T=[$.length],A=a.makeTensorInfo(T,"float32",$),D=a.makeTensorInfo(T,"float32",C),N=la({inputs:{real:A,imag:D},backend:a}),I=pS(m,g,s,r,a),M=I.real,P=I.imag,z=[M.length],j=a.makeTensorInfo(z,"float32",M),K=a.makeTensorInfo(z,"float32",P),O=la({inputs:{real:j,imag:K},backend:a}),W=E.exponents(n,r),L=[W.real.length],H=a.makeTensorInfo(L,"float32",W.real),Z=a.makeTensorInfo(L,"float32",W.imag),J=la({inputs:{real:H,imag:Z},backend:a}),ne=Gx({inputs:{a:J,b:O},backend:a}),re=ph({inputs:{a:N,b:ne},backend:a}),pe=_T({inputs:{a:N,b:ne},backend:a}),de=cu({inputs:{input:re},backend:a}),he=cu({inputs:{input:pe},backend:a}),Ie=fh({inputs:{input:re},backend:a}),Fe=fh({inputs:{input:pe},backend:a}),ze=mh({inputs:[de,he],backend:a,attrs:{axis:0}}),Pe=mh({inputs:[Ie,Fe],backend:a,attrs:{axis:0}}),st=a.data.get(ze.dataId).values,Ge=a.data.get(Pe.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(J),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(re),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(de),a.disposeIntermediateTensorInfo(Ie),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(Fe),a.disposeIntermediateTensorInfo(ze),a.disposeIntermediateTensorInfo(Pe),{real:st,imag:Ge}}function Cbe(e,t,n){let r=new Float32Array(t*2);for(let a=0;a<t;a++){let i=0,s=0;for(let o=0;o<t;o++){let l=E.exponent(a*o,t,n),c=E.getComplexWithIndex(e,o);i+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}n&&(i/=t,s/=t),E.assignToTypedArray(r,i,s,a)}return r}function Tbe(e){let{inputs:t,backend:n}=e,{input:r}=t,a=k.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Ht({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=X4(o,!1,n),c=Ht({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}var Ebe={kernelName:P0,backendName:"cpu",kernelFunc:Tbe};function FT(e){let{backend:t,attrs:n}=e,{shape:r,value:a,dtype:i}=n,s=i||k.inferDtype(a),o=k.getArrayFromDType(s,k.sizeFromShape(r));return _be(o,a),t.makeTensorInfo(r,s,o)}var Nbe={kernelName:Jm,backendName:"cpu",kernelFunc:FT};function _be(e,t,n){e.fill(t)}var Abe={kernelName:Uh,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,a=n,i=k.getTypedArrayFromDType(r.dtype,k.sizeFromShape(r.shape)),[s,o,l,c]=r.shape,u=a.data.get(r.dataId).values;for(let d=0;d<s;d++){let h=d*l*o*c;for(let p=0;p<o;p++){let f=p*(l*c);for(let m=0;m<l;m++){let g=m*c;for(let b=0;b<c;b++){let y=Math.round(l-m-1),v=h+f+g+b,x=u[v];if(y>=0&&y<l){let w=y*c,$=h+f+w+b;x=u[$]}i[v]=x}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function Rbe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=q4({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(s){let g=m;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let b=Ht({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=ph({inputs:{a:m,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else m=ph({inputs:{a:m,b:s},backend:n});n.disposeIntermediateTensorInfo(g)}if(p){let g=m;if(u==="NCHW"&&p==="prelu"&&o.shape.length===1&&o.shape[0]!==1){let b=Ht({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Tv(n,m,p,b,f),n.disposeIntermediateTensorInfo(b)}else m=Tv(n,m,p,o,f);n.disposeIntermediateTensorInfo(g)}return m}var Dbe={kernelName:Zl,backendName:"cpu",kernelFunc:Rbe};function Fbe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=K4({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(s){let g=m;m=ph({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){let g=m;m=Tv(n,m,p,o,f),n.disposeIntermediateTensorInfo(g)}return m}var Mbe={kernelName:Ql,backendName:"cpu",kernelFunc:Fbe};function Obe(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=k.sizeFromShape(r.shape),s=a.shape,o=s[s.length-1],[l,c,u,d]=E.prepareAndValidate(r,a);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);let h=n.data.get(a.dataId).values,p=n.bufferSync(r),f=d4(h,p,r.dtype,c,o,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,f.values)}var Pbe={kernelName:jh,backendName:"cpu",kernelFunc:Obe};function Lbe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r;_e([a,i],"gatherV2");let l=k.parseAxisParam(s,a.shape)[0],c=n.data.get(i.dataId).values,u=a.shape[l];for(let x=0;x<c.length;++x){let w=c[x];k.assert(w<=u-1&&w>=0,()=>"GatherV2: the index value ".concat(w," is not in [0, ").concat(u-1,"]"))}let d=o;o==null&&(d=0);let h=k.sizeFromShape(i.shape),p=E.segment_util.collectGatherOpShapeInfo(a,i,l,d),f=Ht({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Ht({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],b=n.bufferSync(m),y=n.bufferSync(f),v=h4(y,b,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}var zbe={kernelName:Vh,backendName:"cpu",kernelFunc:Lbe};function Bbe(e){let{inputs:t,backend:n}=e,{input:r}=t,a=k.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Ht({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=X4(o,!0,n),c=Ht({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}var Wbe={kernelName:L0,backendName:"cpu",kernelFunc:Bbe},Ube=$t(Ju,e=>Number.isFinite(e)?1:0,"bool"),Vbe={kernelName:Ju,backendName:"cpu",kernelFunc:Ube},jbe=$t(Zu,e=>Math.abs(e)===1/0?1:0,"bool"),Hbe={kernelName:Zu,backendName:"cpu",kernelFunc:jbe},Gbe=$t(Qu,e=>Number.isNaN(e)?1:0,"bool"),qbe={kernelName:Qu,backendName:"cpu",kernelFunc:Gbe};function Kbe(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=b4(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}var Xbe={kernelName:Kh,backendName:"cpu",kernelFunc:Kbe},Ybe=$t(nc,e=>Math.log1p(e)),Jbe={kernelName:nc,backendName:"cpu",kernelFunc:Ybe},Zbe=bn((e,t)=>e&&t),Qbe=zn(Xh,Zbe,null,"bool"),eye={kernelName:Xh,backendName:"cpu",kernelFunc:Qbe},tye=$t(Yh,e=>e?0:1,"bool"),nye={kernelName:Yh,backendName:"cpu",kernelFunc:tye},rye=bn((e,t)=>e||t),aye=zn(Jh,rye,null,"bool"),iye={kernelName:Jh,backendName:"cpu",kernelFunc:aye};function sye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;_e(a,"LRN");let c=a.shape[3],u=c-1,d=n.data.get(a.dataId).values,h=k.sizeFromShape(a.shape),p=new Float32Array(h);function f(m){let g=m%c,b=m-g+Math.max(0,g-i),y=m-g+Math.min(g+i,u),v=0;for(;b<=y;b++){let x=d[b];v+=x*x}return v}for(let m=0;m<h;m++){let g=f(m),b=d[m]*Math.pow(s+o*g,-l);p[m]=b}return n.makeTensorInfo(a.shape,a.dtype,p)}var oye={kernelName:rc,backendName:"cpu",kernelFunc:sye};function lye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r;_e(s,"LRNGrad");let d=k.sizeFromShape(s.shape),h=s.shape[3],p=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(d),b=d;for(let y=0;y<b;y++){let v=y%h,x=y-v+Math.max(0,v-o),w=y-v+Math.min(h,v+o+1),$=0;for(let C=x;C<w;C++)$+=Math.pow(f[C],2);$=c*$+l;for(let C=x;C<w;C++){let T=-2*c*u*f[C]*m[y]/$;y===C&&(T+=Math.pow($,-u)),T*=p[y],g[C]+=T}}return n.makeTensorInfo(s.shape,a.dtype,g)}var uye={kernelName:Zh,backendName:"cpu",kernelFunc:lye};function Y4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=n,l=a.shape,c=l.length,u=k.parseAxisParam(i,l),d=u,h=E.getAxesPermutation(d,c),p=o.data.get(a.dataId).values;if(h!=null){let x=new Array(c);for(let w=0;w<x.length;w++)x[w]=l[h[w]];p=IT(p,l,a.dtype,h,x),d=E.getInnerMostAxes(d.length,c),l=x}_e(a,"max"),E.assertAxesAreInnerMostDims("max",d,c);let[f,m]=E.computeOutAndReduceShapes(l,d),g=k.sizeFromShape(m),b=v4(p,g,f,a.dtype),y=o.write(b,f,a.dtype),v=f;return s&&(v=E.expandShapeToKeepDim(f,u)),{dataId:y,shape:v,dtype:a.dtype}}var cye={kernelName:ac,backendName:"cpu",kernelFunc:Y4};function dye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;_e(a,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;k.assert(E.eitherStridesOrDilationsAreOne(s,c),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(c,"'"));let u=E.computePool2DInfo(a.shape,i,s,c,o,l),d;if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))d=ps({inputs:{x:a},backend:n});else{let h=n.data.get(a.dataId).values,p=k.computeStrides(a.shape),f=RT(h,a.shape,a.dtype,p,u,"max");d=n.makeTensorInfo(u.outShape,a.dtype,f.values)}return d}var hye={kernelName:sc,backendName:"cpu",kernelFunc:dye};function pye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;_e(a,"maxPool3d");let u=E.computePool3DInfo(a.shape,i,s,1,o,l,c),d=n.data.get(a.dataId).values,h=G4(d,a.shape,a.dtype,k.computeStrides(a.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}var fye={kernelName:Qh,backendName:"cpu",kernelFunc:pye};function mye(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;_e([a,i],"maxPool3DGrad");let u=E.computePool3DInfo(i.shape,s,o,1,l,c),d=n.bufferSync(i),h=rge(d,u),p=u.strideDepth,f=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,b=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterDepth,x=u.effectiveFilterHeight,w=u.effectiveFilterWidth,$=v-1-u.padInfo.front,C=w-1-u.padInfo.left,T=x-1-u.padInfo.top,A=nt(i.shape,"float32"),D=n.bufferSync(a);for(let N=0;N<u.batchSize;++N)for(let I=0;I<u.inChannels;++I)for(let M=0;M<u.inDepth;++M)for(let P=0;P<u.inHeight;++P)for(let z=0;z<u.inWidth;++z){let j=M-$,K=P-T,O=z-C,W=0;for(let L=0;L<v;L+=g){let H=(j+L)/p;if(!(H<0||H>=u.outDepth||Math.floor(H)!==H))for(let Z=0;Z<x;Z+=b){let J=(K+Z)/f;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let ne=0;ne<w;ne+=y){let re=(O+ne)/m;if(re<0||re>=u.outWidth||Math.floor(re)!==re)continue;let pe=v*x*w-1-h.get(N,H,J,re,I),de=L*x*w+Z*w+ne,he=pe===de?1:0;if(he===0)continue;let Ie=D.get(N,H,J,re,I);W+=Ie*he}}}A.set(W,N,M,P,z,I)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}var gye={kernelName:Qm,backendName:"cpu",kernelFunc:mye};function bye(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;_e([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=E.computePool2DInfo(o.shape,l,c,1,u,d),p=n.data.get(o.dataId).values,f=nt(h.outShape,o.dtype,H4(p,o.shape,o.dtype,h).values),m=h.strideHeight,g=h.strideWidth,b=h.dilationHeight,y=h.dilationWidth,v=h.effectiveFilterHeight,x=h.effectiveFilterWidth,w=x-1-h.padInfo.left,$=v-1-h.padInfo.top,C=nt(o.shape,"float32"),T=n.data.get(a.dataId).values,A=nt(a.shape,"float32",T);for(let D=0;D<h.batchSize;++D)for(let N=0;N<h.inChannels;++N)for(let I=0;I<h.inHeight;++I)for(let M=0;M<h.inWidth;++M){let P=I-$,z=M-w,j=0;for(let K=0;K<v;K+=b){let O=(P+K)/m;if(!(O<0||O>=h.outHeight||Math.floor(O)!==O))for(let W=0;W<x;W+=y){let L=(z+W)/g;if(L<0||L>=h.outWidth||Math.floor(L)!==L)continue;let H=v*x-1-f.get(D,O,L,N),Z=K*x+W,J=H===Z?1:0;if(J===0)continue;let ne=A.get(D,O,L,N);j+=ne*J}}C.set(j,D,I,M,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var yye={kernelName:Zm,backendName:"cpu",kernelFunc:bye};function vye(e,t,n,r,a){let i=k.computeStrides(t),s=RT(e,t,n,i,a,"max"),o=H4(e,t,n,a,!0,r);return[s.values,o.values]}var xye={kernelName:eg,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=t,l=n;_e(r,"MaxPoolWithArgmax");let c=l.data.get(r.dataId).values,u=E.computePool2DInfo(r.shape,a,i,[1,1],s),[d,h]=vye(c,r.shape,r.dtype,o,u),p=l.write(d,u.outShape,r.dtype),f=l.write(h,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}};function wye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=k.parseAxisParam(i,a.shape),l=E.computeOutAndReduceShapes(a.shape,o)[1],c=k.sizeFromShape(l),u=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));u.push(d);let h=Vo({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});u.push(h);let p=DT({inputs:{a:h,b:d},backend:n});u.push(p);let f=Ug({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:s}});return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}var kye={kernelName:oc,backendName:"cpu",kernelFunc:wye};function Sye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;_e(a,"min");let o=k.parseAxisParam(i,a.shape),l=o,c=E.getAxesPermutation(l,a.shape.length),u=a;c!=null&&(u=Qr({inputs:{x:a},backend:n,attrs:{perm:c}}),l=E.getInnerMostAxes(l.length,a.shape.length)),E.assertAxesAreInnerMostDims("min",l,u.shape.length);let[d,h]=E.computeOutAndReduceShapes(u.shape,l),p=k.sizeFromShape(h),f=k.makeZerosTypedArray(k.sizeFromShape(d),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<f.length;++b){let y=b*p,v=m[y];for(let x=0;x<p;++x){let w=m[y+x];(Number.isNaN(w)||w<v)&&(v=w)}f[b]=v}c!=null&&n.disposeIntermediateTensorInfo(u);let g=n.makeTensorInfo(d,u.dtype,f);if(s){let b=E.expandShapeToKeepDim(d,o),y=Ht({inputs:{x:g},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(g),y}return g}var Iye={kernelName:lc,backendName:"cpu",kernelFunc:Sye};function $ye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:s}=r;_e(a,"mirrorPad");let o=i.map((y,v)=>y[0]+a.shape[v]+y[1]),l=i.map(y=>y[0]),c=i.map((y,v)=>y[0]+a.shape[v]),u=s==="reflect"?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,p=k.computeStrides(a.shape),f=k.sizeFromShape(o),m=o.length,g=k.computeStrides(o),b=k.getTypedArrayFromDType(a.dtype,f);for(let y=0;y<f;y++){let v=k.indexToLoc(y,m,g);for(let w=0;w<m;w++)v[w]<l[w]?v[w]=l[w]*2-v[w]-u:v[w]>=c[w]&&(v[w]=(c[w]-1)*2-v[w]+u);v=v.map((w,$)=>w-l[$]);let x=k.locToIndex(v,h,p);b[y]=d[x]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}var Cye={kernelName:cc,backendName:"cpu",kernelFunc:$ye},Tye=bn((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),Eye=zn(dc,Tye),Nye={kernelName:dc,backendName:"cpu",kernelFunc:Eye},_ye=Yo(E0());function J4(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=a.shape.length,o=i;if(o===-1&&(o=s-1),o!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(s," and dim was ").concat(o));let l=k.parseAxisParam([o],a.shape),c=Y4({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=E.expandShapeToKeepDim(c.shape,l),d=Ht({inputs:{x:c},backend:n,attrs:{shape:u}}),h=_T({inputs:{a,b:d},backend:n}),p=o4({inputs:{x:h},backend:n}),f=Ug({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=Ht({inputs:{x:f},backend:n,attrs:{shape:u}}),g=DT({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var Aye={kernelName:Fc,backendName:"cpu",kernelFunc:J4};function Rye(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;_e(a,"multinomial");let l=o?a:J4({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,i],p=k.makeZerosTypedArray(k.sizeFromShape(h),"int32");for(let f=0;f<c;++f){let m=f*u,g=new Float32Array(u-1);g[0]=d[m];for(let v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];let b=_ye.alea(s.toString()),y=f*i;for(let v=0;v<i;++v){let x=b();p[y+v]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){p[y+v]=w;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}var Dye={kernelName:ep,backendName:"cpu",kernelFunc:Rye},Fye=bs.nonMaxSuppressionV3Impl;function Mye(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;_e(a,"NonMaxSuppression");let c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=Fye(c,u,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Oye={kernelName:rp,backendName:"cpu",kernelFunc:Mye},Pye=bs.nonMaxSuppressionV4Impl;function Lye(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;_e(a,"NonMaxSuppressionPadded");let u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:p}=Pye(u,d,s,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}var zye={kernelName:ap,backendName:"cpu",kernelFunc:Lye},Bye=bs.nonMaxSuppressionV5Impl;function Wye(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;_e(a,"NonMaxSuppressionWithScore");let u=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=s,p=o,f=l,m=c,{selectedIndices:g,selectedScores:b}=Bye(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var Uye={kernelName:ip,backendName:"cpu",kernelFunc:Wye};function Vye(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r;_e(a,"oneHot");let c=k.sizeFromShape(a.shape),u=new Float32Array(c*s);u.fill(l);let d=n.data.get(a.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<s&&(u[h*s+d[h]]=o);return n.makeTensorInfo([...a.shape,s],i,u)}var jye={kernelName:pc,backendName:"cpu",kernelFunc:Vye};function Nv(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let a=cu({inputs:{input:r},backend:n}),i=Nv({inputs:{x:a},backend:n}),s=fh({inputs:{input:r},backend:n}),o=Nv({inputs:{x:s},backend:n}),l=la({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return FT({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var Hye={kernelName:Ip,backendName:"cpu",kernelFunc:Nv};function Z4(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let a=cu({inputs:{input:r},backend:n}),i=Z4({inputs:{x:a},backend:n}),s=fh({inputs:{input:r},backend:n}),o=Nv({inputs:{x:s},backend:n}),l=la({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return FT({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var Gye={kernelName:sp,backendName:"cpu",kernelFunc:Z4};function Q4(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(t.length===1)return Ev({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(u=>{k.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),k.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(u=>{let d=Ev({inputs:{input:u},backend:n,attrs:{dim:a}});return o.push(d),d}),c=mh({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}var qye={kernelName:op,backendName:"cpu",kernelFunc:Q4};function Kye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;_e(a,"pad");let o=i.map((b,y)=>b[0]+a.shape[y]+b[1]),l=i.map(b=>b[0]),c=n.data.get(a.dataId).values,u=k.sizeFromShape(a.shape),d=a.shape.length,h=k.computeStrides(a.shape),p=k.sizeFromShape(o),f=o.length,m=k.computeStrides(o),g=k.getTypedArrayFromDType(a.dtype,p);s!==0&&g.fill(s);for(let b=0;b<u;b++){let y=k.indexToLoc(b,d,h).map((x,w)=>x+l[w]),v=k.locToIndex(y,f,m);g[v]=c[b]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}var eW={kernelName:fc,backendName:"cpu",kernelFunc:Kye},Xye=bn((e,t)=>Math.pow(e,t)),Yye=zn(mc,Xye),Jye={kernelName:mc,backendName:"cpu",kernelFunc:Yye};function Zye(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,o=a.map(g=>n.data.get(g.dataId).values),l=a.map(g=>g.shape),c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[d,h,p]=$4(o,l,c,i.shape,i.dtype,u,s.shape),f=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(p,i.dtype,h);return f.concat([m])}var Qye={kernelName:B0,backendName:"cpu",kernelFunc:Zye};function eve(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=C4(s,r.shape,r.dtype,o,a.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}var tve={kernelName:W0,backendName:"cpu",kernelFunc:eve};function nve(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=o.map(g=>n.data.get(g.dataId).values),p=o.map(g=>g.shape),[f,m]=T4(c,a.shape,u,i.shape,i.dtype,d,s.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}var rve={kernelName:U0,backendName:"cpu",kernelFunc:nve};function ave(e){let{backend:t,attrs:n}=e,{start:r,stop:a,dtype:i,step:s}=n,o=$T(r,a,s,i);return t.makeTensorInfo([o.length],i,o)}var ive={kernelName:tg,backendName:"cpu",kernelFunc:ave},sve=$t(yc,e=>1/e),ove={kernelName:yc,backendName:"cpu",kernelFunc:sve};function lve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;_e(a,"resizeBilinear");let l=k.computeStrides(a.shape),[c,u]=o,[d,h,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(k.sizeFromShape([d,c,u,f])),b=[i&&c>1?h-1:h,i&&u>1?p-1:p],y=[i&&c>1?c-1:c,i&&u>1?u-1:u],v=0,x=b[0]/y[0],w=b[1]/y[1];for(let $=0;$<d;$++)for(let C=0;C<c;C++){let T;s?T=x*(C+.5)-.5:T=x*C;let A=Math.max(0,Math.floor(T)),D=T-A,N=Math.min(h-1,Math.ceil(T)),I=$*l[0]+A*l[1],M=$*l[0]+N*l[1];for(let P=0;P<u;P++){let z;s?z=w*(P+.5)-.5:z=w*P;let j=Math.max(0,Math.floor(z)),K=z-j,O=Math.min(p-1,Math.ceil(z)),W=I+j*l[2],L=M+j*l[2],H=I+O*l[2],Z=M+O*l[2];for(let J=0;J<f;J++){let ne=m[W+J],re=m[L+J],pe=m[H+J],de=m[Z+J],he=ne+(pe-ne)*K,Ie=re+(de-re)*K,Fe=he+(Ie-he)*D;g[v++]=Fe}}}return n.makeTensorInfo([d,c,u,f],"float32",g)}var uve={kernelName:wc,backendName:"cpu",kernelFunc:lve};function cve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;_e([i,a],"resizeBilinearGrad");let o=k.computeStrides(a.shape),[l,c,u,d]=a.shape,[,h,p]=i.shape,f=new Float32Array(l*c*u*d),m=[s&&h>1?c-1:c,s&&p>1?u-1:u],g=[s&&h>1?h-1:h,s&&p>1?p-1:p],b=m[0]/g[0],y=m[1]/g[1],v=n.data.get(i.dataId).values,x=0;for(let w=0;w<l;w++){let $=w*o[0];for(let C=0;C<h;C++){let T=C*b,A=Math.floor(T),D=Math.min(Math.ceil(T),c-1),N=$+A*o[1],I=$+D*o[1],M=T-A,P=1-M;for(let z=0;z<p;z++){let j=z*y,K=Math.floor(j),O=Math.min(Math.ceil(j),u-1),W=j-K,L=1-W,H=N+K*o[2],Z=N+O*o[2],J=I+K*o[2],ne=I+O*o[2],re=P*L,pe=P*W,de=M*L,he=M*W;for(let Ie=0;Ie<d;Ie++){let Fe=v[x++];f[H+Ie]+=Fe*re,f[Z+Ie]+=Fe*pe,f[J+Ie]+=Fe*de,f[ne+Ie]+=Fe*he}}}}return n.makeTensorInfo([l,u,c,d],"float32",f)}var dve={kernelName:cp,backendName:"cpu",kernelFunc:cve};function hve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;_e(a,"resizeNearestNeighbor");let l=k.computeStrides(a.shape),[c,u]=o,[d,h,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(d*c*u*f),b=[i&&c>1?h-1:h,i&&u>1?p-1:p],y=[i&&c>1?c-1:c,i&&u>1?u-1:u],v=b[0]/y[0],x=b[1]/y[1],w=0;for(let $=0;$<d;$++){let C=$*l[0];for(let T=0;T<c;T++){let A=s?v*(T+.5):v*T,D=Math.min(h-1,i?Math.round(A):Math.floor(A));s&&(D=Math.max(0,D));let N=C+D*l[1];for(let I=0;I<u;I++){let M=s?x*(I+.5):x*I,P=Math.min(p-1,i?Math.round(M):Math.floor(M));s&&(P=Math.max(0,P));let z=N+P*l[2];for(let j=0;j<f;j++){let K=m[z+j];g[w++]=K}}}}return n.makeTensorInfo([d,c,u,f],a.dtype,g)}var pve={kernelName:xc,backendName:"cpu",kernelFunc:hve};function fve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;_e([i,a],"resizeNearestNeighborGrad");let o=k.computeStrides(a.shape),l=k.computeStrides(i.shape),[c,u,d,h]=a.shape,[,p,f]=i.shape,m=new Float32Array(c*u*d*h),g=n.data.get(i.dataId).values,b=[s&&p>1?u-1:u,s&&f>1?d-1:d],y=[s&&p>1?p-1:p,s&&f>1?f-1:f],v=b[0]/y[0],x=b[1]/y[1],w=1/v,$=1/x,C=Math.ceil(w)*2+2,T=Math.ceil($)*2+2;for(let A=0;A<c;A++){let D=A*o[0];for(let N=0;N<u;N++){let I=D+N*o[1],M=Math.floor(N*w),P=Math.floor(M-C/2);for(let z=0;z<d;z++){let j=I+z*o[2],K=Math.floor(z*$),O=Math.floor(K-T/2);for(let W=0;W<h;W++){let L=0;for(let H=0;H<C;H++){let Z=H+P;if(Z<0||Z>=p)continue;let J=D+Z*l[1],ne=Z*v,re=Math.min(u-1,s?Math.round(ne):Math.floor(ne));if(N===re)for(let pe=0;pe<T;pe++){let de=pe+O;if(de<0||de>=f)continue;let he=J+de*l[2],Ie=de*x,Fe=Math.min(d-1,s?Math.round(Ie):Math.floor(Ie));z===Fe&&(L+=g[he+W])}}m[j+W]=L}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}var mve={kernelName:up,backendName:"cpu",kernelFunc:fve};function gve(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r;_e(a,"reverse");let s=a.shape.length,o=k.parseAxisParam(i,a.shape);if(s===0)return ps({inputs:{x:a},backend:n});let l=new Cn(a.shape,a.dtype),c=n.bufferSync(a);for(let u=0;u<l.size;u++){let d=l.indexToLoc(u),h=d.slice();o.forEach(p=>h[p]=a.shape[p]-1-h[p]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}var bve={kernelName:Sc,backendName:"cpu",kernelFunc:gve},yve={kernelName:$p,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:i,center:s}=t,o=n,l=k.getTypedArrayFromDType(r.dtype,k.sizeFromShape(r.shape)),[c,u,d,h]=r.shape,[p,f]=E.getImageCenter(s,u,d),m=255,g=Math.sin(a),b=Math.cos(a),y=o.data.get(r.dataId).values;for(let v=0;v<c;v++){let x=v*d*u*h;for(let w=0;w<u;w++){let $=w*(d*h);for(let C=0;C<d;C++){let T=C*h;for(let A=0;A<h;A++){let D=[c,w,C,A],N=D[2],I=D[1],M=(N-p)*b-(I-f)*g,P=(N-p)*g+(I-f)*b;M=Math.round(M+p),P=Math.round(P+f);let z=i;if(typeof i!="number"&&(A===3?z=m:z=i[A]),M>=0&&M<d&&P>=0&&P<u){let K=P*(d*h),O=M*h,W=x+K+O+A;z=y[W]}let j=x+$+T+A;l[j]=z}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},vve=$t(Ic,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),xve={kernelName:Ic,backendName:"cpu",kernelFunc:vve};function wve(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=E.calculateShapes(i,a,s),h=!0,p=n.bufferSync(a),f=n.bufferSync(i),m=Fl(p,f,s,d,c,l,o,u,0,h);return n.makeTensorInfo(s,m.dtype,m.values)}var kve={kernelName:dp,backendName:"cpu",kernelFunc:wve};function Sve(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function Ive(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}function $ve(e,t,n,r,a,i){let s=k.getArrayFromDType("int32",n*a);for(let o=0;o<n;++o){let l=e.slice(o*r,(o+1)*r),c=o*a;for(let u=0;u<a;++u)s[c+u]=i==="left"?Sve(l,t[u+c]):Ive(l,t[u+c])}return s}function Cve(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=$ve(o,l,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",c)}var Tve={kernelName:pp,backendName:"cpu",kernelFunc:Cve};function Eve(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t;_e([r,a,i],"select");let s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=Ua(a.dtype,i.dtype),d=k.makeZerosTypedArray(k.sizeFromShape(a.shape),u),h=0,p=s===0||s>1||a.shape.length===1?1:k.sizeFromShape(a.shape.slice(1));for(let f=0;f<o.length;f++)for(let m=0;m<p;m++)o[f]===1?d[h++]=l[f]:d[h++]=c[f];return n.makeTensorInfo(a.shape,u,d)}var Nve={kernelName:fp,backendName:"cpu",kernelFunc:Eve},_ve=E.SELU_SCALEALPHA,Ave=E.SELU_SCALE,Rve=$t(Cc,e=>e>=0?Ave*e:_ve*(Math.exp(e)-1)),Dve={kernelName:Cc,backendName:"cpu",kernelFunc:Rve},Fve=$t(Nc,e=>e<0?-1:e>0?1:0),Mve={kernelName:Nc,backendName:"cpu",kernelFunc:Fve},Ove=$t(Tc,e=>Math.sin(e)),Pve={kernelName:Tc,backendName:"cpu",kernelFunc:Ove},Lve=$t(Ec,e=>Math.sinh(e)),zve={kernelName:Ec,backendName:"cpu",kernelFunc:Lve},Bve=11920928955078125e-23,NR=Math.log(Bve)+2,Wve=$t(Ac,e=>{let t=e>-NR,n=e<NR,r=Math.exp(e),a;return n?a=r:t?a=e:a=Math.log(1+r),a}),Uve={kernelName:Ac,backendName:"cpu",kernelFunc:Wve};function Vve(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;_e([a],"spaceToBatchND");let o=k.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);let c=eW.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=E.getReshaped(c.shape,i,o,!1),d=E.getPermuted(u.length,i.length,!1),h=E.getReshapedPermuted(c.shape,i,o,!1),p=Ht({inputs:{x:c},backend:n,attrs:{shape:u}}),f=Qr({inputs:{x:p},backend:n,attrs:{perm:d}}),m=Ht({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}var jve={kernelName:gp,backendName:"cpu",kernelFunc:Vve};function Hve(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(r.shape.length!==2)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(a.shape.length!==1)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(s.shape.length!==0)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));let o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values[0],[d,h,p,f,m]=_4(o,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var Gve={kernelName:ng,backendName:"cpu",kernelFunc:Hve};function qve(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=A4(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var Kve={kernelName:yp,backendName:"cpu",kernelFunc:qve};function Xve(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=CT(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}var Yve={kernelName:rg,backendName:"cpu",kernelFunc:Xve};function Jve(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=CT(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}var Zve={kernelName:ag,backendName:"cpu",kernelFunc:Jve};function Qve(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=E.calculateShapes(i,a,o),p=!1,f=n.bufferSync(a),m;switch(i.dtype){case"bool":{let g=n.bufferSync(i),b=!!n.data.get(s.dataId).values[0];m=Fl(f,g,o,h,u,c,l,d,b,p);break}case"float32":{let g=n.bufferSync(i),b=n.data.get(s.dataId).values[0];m=Fl(f,g,o,h,u,c,l,d,b,p);break}case"int32":{let g=n.bufferSync(i),b=n.data.get(s.dataId).values[0];m=Fl(f,g,o,h,u,c,l,d,b,p);break}case"string":{let g=n.bufferSync(i),b=k.decodeString(n.data.get(s.dataId).values[0]);m=Fl(f,g,o,h,u,c,l,d,b,p);break}default:throw new Error("Unsupported type ".concat(i.dtype))}return n.makeTensorInfo(o,m.dtype,m.values)}var e0e={kernelName:vp,backendName:"cpu",kernelFunc:Qve};function t0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=k.parseAxisParam(s,a.shape)[0],l=E.prepareSplitSize(a,i,o),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(d=>{let h=[...u];h[o]=d;let p=du({inputs:{x:a},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,p})}var n0e={kernelName:bp,backendName:"cpu",kernelFunc:t0e},r0e={kernelName:ig,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e,r=t;_e(n,"square");let a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let s=0;s<a.length;++s){let o=a[s];i[s]=o*o}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},a0e=$t(el,(e,t)=>{let n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),i0e={kernelName:el,backendName:"cpu",kernelFunc:a0e};function s0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;_e(a,"stridedSlice");let{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:v,strides:x}=Fn.sliceInfo(a.shape,i,s,o,l,c,u,d,h),w;if(m)w=Ht({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||b){k.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let $=Fn.computeOutShape(y,v,x),C=du({inputs:{x:a},backend:n,attrs:{begin:y,size:$}});w=Ht({inputs:{x:C},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(C)}else{let $=n.bufferSync(a),C=F4(p,$,x,y);w=n.makeTensorInfo(f,C.dtype,C.values)}return w}var o0e={kernelName:xp,backendName:"cpu",kernelFunc:s0e};function l0e(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,h=n.data.get(u.dataId).values,p=n.data.get(d.dataId).values,[f,m]=TT(h,p,a,i,s,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}var u0e={kernelName:og,backendName:"cpu",kernelFunc:l0e};function c0e(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(s.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));let o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values[0],[c,u,d]=ET(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var d0e={kernelName:lg,backendName:"cpu",kernelFunc:c0e};function h0e(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let s=n.data.get(i.dataId).values,o=NT(s,a);return n.makeTensorInfo(i.shape,"int32",o)}var p0e={kernelName:ug,backendName:"cpu",kernelFunc:h0e},f0e=$t(Pc,e=>Math.tan(e)),m0e={kernelName:Pc,backendName:"cpu",kernelFunc:f0e},g0e=$t(Lc,e=>Math.tanh(e)),b0e={kernelName:Lc,backendName:"cpu",kernelFunc:g0e};function y0e(e){let{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:i}=t,{sliceRank:s,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=E.calculateShapes(i,a,r.shape),d=!1,h=n.bufferSync(a),p=n.bufferSync(i),f=n.bufferSync(r),m=Fl(h,p,r.shape,u,l,o,s,c,f,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}var v0e={kernelName:hp,backendName:"cpu",kernelFunc:y0e};function x0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;_e(a,"tile");let s=O4(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}var w0e={kernelName:Qo,backendName:"cpu",kernelFunc:x0e};function k0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r;_e(a,"topk");let o=n.data.get(a.dataId).values,[l,c]=L4(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}var S0e={kernelName:wp,backendName:"cpu",kernelFunc:k0e};function I0e(e){let{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=n,[u,d,h,p]=a.shape,[f,m]=c!=null?c:[d,h],g=[u,f,m,p],b=k.computeStrides(a.shape),y=b[0],v=b[1],x=b[2],w=k.computeStrides(g),$=w[0],C=w[1],T=w[2],A=k.getTypedArrayFromDType(a.dtype,k.sizeFromShape(g));A.fill(l);let D=r.data.get(a.dataId).values,N=r.data.get(i.dataId).values;for(let I=0;I<u;++I){let M=i.shape[0]===1?N:N.subarray(I*8,I*8+8);for(let P=0;P<f;++P)for(let z=0;z<m;++z)for(let j=0;j<p;++j){let K,O=M[6]*z+M[7]*P+1;if(O===0)continue;let W=(M[0]*z+M[1]*P+M[2])/O,L=(M[3]*z+M[4]*P+M[5])/O,H=_R(W,h,o),Z=_R(L,d,o);switch(s){case"nearest":K=_0e(D,d,h,y,v,x,I,Z,H,j,l);break;case"bilinear":K=A0e(D,d,h,y,v,x,I,Z,H,j,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(s))}let J=I*$+P*C+z*T+j;A[J]=K}return r.makeTensorInfo(g,a.dtype,A)}return{dataId:r.write(A,g,a.dtype),shape:a.shape,dtype:a.dtype}}var $0e={kernelName:kp,backendName:"cpu",kernelFunc:I0e};function _R(e,t,n){switch(n){case"reflect":return C0e(e,t);case"wrap":return T0e(e,t);case"nearest":return N0e(e,t);case"constant":default:return E0e(e)}}function C0e(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{let r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return k.clamp(0,n,t-1)}function T0e(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{let r=t-1;n-=t*Math.trunc(n/r)}return k.clamp(0,n,t-1)}function E0e(e,t){return e}function N0e(e,t){return k.clamp(0,e,t-1)}function xf(e,t,n,r,a,i,s,o,l,c,u){let d=s*r+o*a+l*i+c;return 0<=o&&o<t&&0<=l&&l<n?e[d]:u}function _0e(e,t,n,r,a,i,s,o,l,c,u){let d=Math.round(o),h=Math.round(l);return xf(e,t,n,r,a,i,s,d,h,c,u)}function A0e(e,t,n,r,a,i,s,o,l,c,u){let d=Math.floor(o),h=Math.floor(l),p=d+1,f=h+1,m=(f-l)*xf(e,t,n,r,a,i,s,d,h,c,u)+(l-h)*xf(e,t,n,r,a,i,s,d,f,c,u),g=(f-l)*xf(e,t,n,r,a,i,s,p,h,c,u)+(l-h)*xf(e,t,n,r,a,i,s,p,f,c,u);return(p-o)*m+(o-d)*g}function R0e(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;_e(i,"unique");let s=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=AT(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}var D0e={kernelName:cg,backendName:"cpu",kernelFunc:R0e};function F0e(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a.shape.length,o=a.shape[i],l=new Array(s-1),c=0;for(let p=0;p<s;p++)p!==i&&(l[c++]=a.shape[p]);let u=new Array(s).fill(0),d=a.shape.slice();d[i]=1;let h=new Array(o);for(let p=0;p<h.length;p++){u[i]=p;let f=du({inputs:{x:a},backend:n,attrs:{begin:u,size:d}});h[p]=Ht({inputs:{x:f},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(f)}return h}var M0e={kernelName:Sp,backendName:"cpu",kernelFunc:F0e};function O0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r;_e(a,"unsortedSegmentSum");let o=a.shape.length,l=i.shape.length,c=[],u=[],d=o-l,h=i;for(let f=0;f<d;++f){let m=Ev({inputs:{input:h},backend:n,attrs:{dim:f+1}});h=m,u.push(m)}for(let f=0;f<s;++f){let m=k.createScalarValue(f,"int32"),g=n.makeTensorInfo([],"int32",m),b=i4({inputs:{a:g,b:h},backend:n}),y=Vo({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),v=Gx({inputs:{a:y,b:a},backend:n}),x=Ug({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(x),u.push(g),u.push(b),u.push(y),u.push(v),u.push(x)}let p=Q4({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),p}var P0e={kernelName:dg,backendName:"cpu",kernelFunc:O0e},L0e=[Ame,dfe,Dme,Mme,bfe,Pme,zme,Wme,Vme,Hme,qme,Xme,Jme,ege,nge,ige,oge,uge,dge,Nme,pge,mge,bge,vfe,vge,mfe,wfe,wge,hfe,Sge,$ge,Cge,Ege,_ge,Rge,Fge,Oge,Lge,Bge,Uge,jge,Gge,Kge,Yge,Jge,Qge,tbe,rbe,abe,ibe,sbe,lbe,dbe,kme,pbe,kfe,wbe,Sfe,kbe,$fe,Ebe,Nbe,Abe,Tfe,Nfe,Dbe,Mbe,Pbe,zbe,Afe,Dfe,pfe,Wbe,Ige,Vbe,Hbe,qbe,Sme,Mfe,Pfe,Xbe,zfe,Jbe,eye,nye,iye,oye,uye,cye,Wfe,hye,fye,gye,yye,xye,kye,Iye,Vfe,Cye,Nye,Dye,Hfe,qfe,Oye,zye,Uye,Xfe,jye,Gye,qye,eW,Jye,$me,Zfe,Qye,tve,rve,ive,ffe,hS,ove,Cme,Tme,Eme,uve,dve,pve,mve,bve,yve,xve,sme,kve,Tve,Nve,Dve,lme,Mve,Pve,zve,ume,Aye,Uve,jve,Gve,Kve,Yve,Zve,e0e,n0e,hme,r0e,fme,gme,i0e,o0e,u0e,d0e,p0e,xme,ube,m0e,b0e,v0e,w0e,S0e,$0e,Yfe,D0e,M0e,P0e,Hye];for(let e of L0e)hg(e);var tW={};He(tW,{assertNotComplex:()=>Lp,bindCanvasToFramebuffer:()=>X0e,bindColorTextureToFramebuffer:()=>cy,bindTextureToProgramUniformSampler:()=>bW,bindTextureUnit:()=>fW,bindVertexBufferToProgramAttribute:()=>fS,callAndCheck:()=>ke,canBeRepresented:()=>rW,createFragmentShader:()=>sW,createFramebuffer:()=>pW,createProgram:()=>oW,createStaticIndexBuffer:()=>cW,createStaticVertexBuffer:()=>uW,createTexture:()=>dW,createVertexShader:()=>iW,getBatchDim:()=>hu,getExtensionOrThrow:()=>wf,getFramebufferErrorMessage:()=>yW,getMaxTexturesInShader:()=>kW,getNumChannels:()=>q0e,getProgramUniformLocation:()=>gW,getProgramUniformLocationOrThrow:()=>mW,getRowsCols:()=>pu,getShapeAs3D:()=>Sf,getTextureShapeFromLogicalShape:()=>xW,getWebGLDisjointQueryTimerVersion:()=>SW,getWebGLErrorMessage:()=>aW,getWebGLMaxTextureSize:()=>wW,hasExtension:()=>Pa,isCapableOfRenderingToFloatTexture:()=>IW,isDownloadFloatTextureEnabled:()=>$W,isReshapeFree:()=>Im,isWebGLFenceEnabled:()=>CW,isWebGLVersionEnabled:()=>gS,linkProgram:()=>lW,logShaderSourceAndInfoLog:()=>OT,resetMaxTextureSize:()=>Y0e,resetMaxTexturesInShader:()=>J0e,unbindColorTextureFromFramebuffer:()=>mS,unbindTextureUnit:()=>K0e,validateFramebuffer:()=>kf,validateProgram:()=>uy,validateTextureSize:()=>hW});var Tl={},zb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function nW(e,t){Tl[e]=t}function Wi(e,t){if(!(e in Tl)||t!=null){let r=B0e(e,t);if(r!==null)Tl[e]=r;else return console.log("Could not get context for WebGL version",e),null}let n=Tl[e];return n==null||n.isContextLost()?(delete Tl[e],Wi(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Tl[e])}function z0e(e){if(!Q().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function B0e(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=t==null?z0e(e):t;return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Tl[e]},!1),Q().getBool("SOFTWARE_WEBGL_ENABLED")&&(zb.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",zb)||n.getContext("experimental-webgl",zb):n.getContext("webgl2",zb)}var Sm;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Sm||(Sm={}));var Oa;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Oa||(Oa={}));var ir;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ir||(ir={}));function Vg(e,t){return[t,e]}function W0e(e,t){return e*t}function Bb(e){let t=k.sizeFromShape(e),n=Math.ceil(t/4);return k.sizeToSquarishShape(n)}function Pp(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function U0e(e,t){let[n,r]=Pp(e,t);return n*r*4}function MT(e,t){let n=e,r,a,i,s,o,l,c,u,d,h;return Q().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,s=n.RGBA32F,o=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=e.RGBA,a=e.RGBA,i=e.RGBA,s=n.RGBA,o=e.RGBA,c=4,u=4,d=t!=null?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}function ke(e,t){let n=t();return Q().getBool("DEBUG")&&V0e(e),n}function V0e(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+aW(e,t))}var j0e=596e-10,H0e=65504;function rW(e){return!!(Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||j0e<Math.abs(e)&&Math.abs(e)<H0e)}function aW(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function wf(e,t){return Js(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function iW(e,t){let n=Js(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ke(e,()=>e.shaderSource(n,t)),ke(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function sW(e,t){let n=Js(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ke(e,()=>e.shaderSource(n,t)),ke(e,()=>e.compileShader(n)),Q().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw OT(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var G0e=/ERROR: [0-9]+:([0-9]+):/g;function OT(e,t){let n=G0e.exec(t);if(n==null){console.log("Couldn't parse line number in error: ".concat(t)),console.log(e);return}let r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,s=a.map((d,h)=>k.rightPad((h+1).toString(),i)+d),o=0;for(let d=0;d<s.length;d++)o=Math.max(s[d].length,o);let l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(k.rightPad(c[0],o)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function oW(e){return Js(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function lW(e,t){if(ke(e,()=>e.linkProgram(t)),!Q().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function uy(e,t){if(ke(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function uW(e,t){let n=Js(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),ke(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function cW(e,t){let n=Js(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return ke(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),ke(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function q0e(){return Q().getNumber("WEBGL_VERSION")===2?1:4}function dW(e){return Js(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function hW(e,t){let n=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){let r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function pW(e){return Js(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function fS(e,t,n,r,a,i,s){let o=e.getAttribLocation(t,n);return o===-1?!1:(ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),ke(e,()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,i,s)),ke(e,()=>e.enableVertexAttribArray(o)),!0)}function fW(e,t,n){vW(e,n),ke(e,()=>e.activeTexture(e.TEXTURE0+n)),ke(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function K0e(e,t){vW(e,t),ke(e,()=>e.activeTexture(e.TEXTURE0+t)),ke(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function mW(e,t,n){return Js(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function gW(e,t,n){return e.getUniformLocation(t,n)}function bW(e,t,n,r){ke(e,()=>fW(e,t,r)),ke(e,()=>e.uniform1i(n,r))}function X0e(e){ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ke(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),ke(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function cy(e,t,n){ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),ke(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function mS(e,t){ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),ke(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function kf(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+yW(e,t))}function yW(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function Js(e,t,n){let r=ke(e,()=>t());if(r==null)throw new Error(n);return r}function vW(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function hu(e,t=2){return k.sizeFromShape(e.slice(0,e.length-t))}function pu(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Sf(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[hu(e),...pu(e)]),t}function xW(e,t=!1){let n=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Q().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Q().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((o,l)=>l>=e.length-2?k.nearestLargerEven(e[l]):e[l]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=k.squeezeShape(e).newShape);let a=k.sizeFromShape(e),i=null;e.length<=1&&a<=n?i=[1,a]:e.length===2&&e[0]<=n&&e[1]<=n?i=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(i==null||s)if(t){let o=hu(e),l=2,c=2;e.length&&([l,c]=pu(e)),a=o*(l/2)*(c/2),i=k.sizeToSquarishShape(a).map(u=>u*2)}else i=k.sizeToSquarishShape(a);return i}function Wb(e){return e%2===0}function Im(e,t){if(e=e.slice(-2),t=t.slice(-2),k.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||Wb(n)&&Wb(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Wb(e[0])&&Wb(t[0])}var dy,hy;function wW(e){if(dy==null){let t=Wi(e);dy=t.getParameter(t.MAX_TEXTURE_SIZE)}return dy}function Y0e(){dy=null}function J0e(){hy=null}function kW(e){if(hy==null){let t=Wi(e);hy=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,hy)}function SW(e){if(e===0)return 0;let t,n=Wi(e);return Pa(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:Pa(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Pa(e,t){return e.getExtension(t)!=null}function gS(e){try{if(Wi(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function IW(e){if(e===0)return!1;let t=Wi(e);if(e===1){if(!Pa(t,"OES_texture_float"))return!1}else if(!Pa(t,"EXT_color_buffer_float"))return!1;return bS(t)}function $W(e){if(e===0)return!1;let t=Wi(e);if(e===1){if(!Pa(t,"OES_texture_float")||!Pa(t,"WEBGL_color_buffer_float"))return!1}else{if(Pa(t,"EXT_color_buffer_float"))return bS(t);let n="EXT_color_buffer_half_float";if(Pa(t,n)){let r=t.getExtension(n);return Z0e(t,r)}return!1}return bS(t)}function bS(e){let t=MT(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);let r=1,a=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,r,a,0,t.textureFormatFloat,t.textureTypeFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(i),s}function Z0e(e,t){let n=MT(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);let a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),o}function CW(e){return e!==2?!1:Wi(e).fenceSync!=null}function Lp(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&k.assert(n.dtype!=="complex64",()=>"".concat(t," does not support complex64 tensors in the WebGL backend."))})}var Re=Q();Re.registerFlag("HAS_WEBGL",()=>Re.getNumber("WEBGL_VERSION")>0);Re.registerFlag("WEBGL_VERSION",()=>gS(2)?2:gS(1)?1:0);Re.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Re.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Re.get("WEBGL_VERSION")===2);Re.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Re.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Re.registerFlag("WEBGL_PACK",()=>Re.getBool("HAS_WEBGL"));Re.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_CLIP",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_PACK_REDUCE",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_LAZILY_UNPACK",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_CONV_IM2COL",()=>Re.getBool("WEBGL_PACK"));Re.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>wW(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>kW(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=Re.getNumber("WEBGL_VERSION");return e===0?0:SW(e)});Re.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Re.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!mg.isMobile());Re.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>IW(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Re.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Re.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Re.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>$W(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_FENCE_API_ENABLED",()=>CW(Re.getNumber("WEBGL_VERSION")));Re.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Re.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Re.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))});Re.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>mg.isMobile()?1:-1,e=>{if(e<0&&e!==-1)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))});Re.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Re.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Re.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Re.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Re.registerFlag("WEBGL_EXP_CONV",()=>!1);Re.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Re.getBool("IS_TEST"));Re.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Re.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Re.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Re.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function Ur(){let e,t,n,r,a,i,s,o,l,c;return Q().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=Q().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function Gc(e,t,n="index"){let r=k.computeStrides(t);return r.map((a,i)=>{let s="int ".concat(e[i]," = ").concat(n," / ").concat(a),o=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * ").concat(a):"index -= ".concat(e[i]," * ").concat(a);return"".concat(s,"; ").concat(o,";")}).join("")}function qx(e,t,n="index"){let r=k.computeStrides(t);return r.map((a,i)=>{let s="int ".concat(e[i]," = ").concat(n," / outShapeStrides[").concat(i,"]"),o=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * outShapeStrides[").concat(i,"]"):"index -= ".concat(e[i]," * outShapeStrides[").concat(i,"]");return"".concat(s,"; ").concat(o,";")}).join("")}function Q0e(e,t){let n=e.length,r=e.map(i=>"".concat(t,"[").concat(i,"]")),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function exe(e,t,n="index"){let r=e.map((i,s)=>s),a=Q0e(r,t);return a.map((i,s)=>{let o="int ".concat(e[s]," = ").concat(n," / ").concat(a[s]),l=s===a.length-1?"int ".concat(e[s+1]," = ").concat(n," - ").concat(e[s]," * ").concat(a[s]):"index -= ".concat(e[s]," * ").concat(a[s]);return"".concat(o,"; ").concat(l,";")}).join("")}function PT(e){let t=k.computeStrides(e).map(n=>n.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}function LT(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}var TW="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:EW}=E;function txe(e,t,n){let r=[];if(e.forEach(h=>{let p=k.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push("uniform float ".concat(h.name).concat(p>1?"[".concat(p,"]"):"",";")):(r.push("uniform sampler2D ".concat(h.name,";")),r.push("uniform int offset".concat(h.name,";"))),n.enableShapeUniforms){let{uniformShape:f}=zT(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(f.length){case 1:r.push("uniform int ".concat(h.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(h.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(h.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(h.name,"Shape;"));break}r.push("uniform ivec2 ".concat(h.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push("uniform ".concat(h.type," ").concat(h.name).concat(h.arrayIndex?"[".concat(h.arrayIndex,"]"):"",";"))});let a=r.join("\n"),i=e.map(h=>nxe(h,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),s=t.texShape,o=Ur(),l=ixe(o),c,u,d=lxe(o);return t.isPacked?(c=rxe(t.logicalShape,s,n.enableShapeUniforms),u=oxe(o)):(c=axe(t.logicalShape,s,n.enableShapeUniforms),u=sxe(o)),n.packedInputs&&(d+=hxe),[d,l,u,a,c,i,n.userCode].join("\n")}function zp(e,t=!1){let n=e.shapeInfo.logicalShape;switch(n.length){case 0:return Ixe(e,t);case 1:return Cxe(e,t);case 2:return Exe(e,t);case 3:return _xe(e,t);case 4:return Rxe(e,t);case 5:return Dxe(e);case 6:return Fxe(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function NW(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return Sxe(e);case 1:return $xe(e,t);case 2:return Txe(e,t);case 3:return Nxe(e,t);default:return Axe(e,t)}}function nxe(e,t,n=!1,r){let a="";n?a+=NW(e,r):a+=zp(e,r);let i=e.shapeInfo.logicalShape,s=t.logicalShape;return i.length<=s.length&&(n?a+=Mxe(e,t):a+=Oxe(e,t)),a}function rxe(e,t,n){switch(e.length){case 0:return _W();case 1:return pxe(e,t,n);case 2:return wxe(e,t,n);case 3:return mxe(e,t,n);default:return bxe(e,t,n)}}function axe(e,t,n){switch(e.length){case 0:return _W();case 1:return fxe(e,t,n);case 2:return kxe(e,t,n);case 3:return gxe(e,t,n);case 4:return yxe(e,t,n);case 5:return vxe(e,t);case 6:return xxe(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}function ixe(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}function sxe(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}function oxe(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}function lxe(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(uxe,"\n    ").concat(cxe,"\n    ").concat(dxe,"\n  ")}var uxe="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cxe="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",dxe="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",hxe="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function _W(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function pxe(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):r[1]===1?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}function fxe(e,t,n){return t[0]===1?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):t[1]===1?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}function mxe(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}function gxe(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(qx(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");let r=Gc(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}function bxe(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),s=i,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],o="\n      int b".concat(c," = index / ").concat(s,";\n      index -= b").concat(c," * ").concat(s,";\n    ")+o,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}function yxe(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(qx(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");let r=Gc(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}function vxe(e,t){let n=Gc(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}function xxe(e,t){let n=Gc(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}function wxe(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(k.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");let a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}function kxe(e,t,n){return k.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):e[1]===1?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):e[0]===1?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}function qc(e){return"offset".concat(e)}function Sxe(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Ur();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}function Ixe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");let[a,i]=e.shapeInfo.texShape;if(a===1&&i===1)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");let s=qc(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");let[o,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function $xe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Ur();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");let s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}function Cxe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(Bp(e),"\n      }\n    ");let a=e.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");let o=qc(n);return s===1?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):i===1?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(s,", index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Txe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=i[0],o=i[1],l=Ur();if(i!=null&&k.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(s,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}function Exe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(i!=null&&k.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");let h=i[0],p=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(p,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}let{newShape:s,keptDims:o}=k.squeezeShape(n),l=s;if(l.length<n.length){let h=Wp(e,l),p=["row","col"];return"\n      ".concat(zp(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(Up(p,o),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Bp(e),"\n      }\n    ");let c=i[0],u=i[1],d=qc(r);return u===1?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):c===1?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(d,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function Nxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){let h=n.slice(1),p=[1,2],f=Wp(e,h),m=["b","row","col"];return"\n        ".concat(NW(f,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(Up(m,p),");\n        }\n      ")}let o=Ur();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ");let l=s[0],c=s[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(d,", ").concat(u,", b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ")}function _xe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=k.squeezeShape(n),c=o;if(c.length<n.length){let m=Wp(e,c),g=["row","col","depth"];return"\n        ".concat(zp(m,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(Up(g,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(s,", 1)));\n        ").concat(Bp(e),"\n      }\n    ");let u=e.shapeInfo.texShape,d=u[0],h=u[1],p=e.shapeInfo.flatOffset;if(h===i&&p==null)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===s&&p==null)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");let f=qc(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(s," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function Axe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Ur();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");let i=e.shapeInfo.logicalShape,s=i.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[s-1]/2),h=d*Math.ceil(i[s-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)");for(let m=2;m<s-1;m++)p="int b".concat(m,", ")+p,h*=i[s-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}function Rxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:l,keptDims:c}=k.squeezeShape(n);if(l.length<n.length){let y=Wp(e,l),v=["row","col","depth","depth2"];return"\n      ".concat(zp(y,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(Up(v,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(o,", ").concat(s,", ").concat(i,", 1)));\n        ").concat(Bp(e),"\n      }\n    ");let u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1],f="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===o&&u==null)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===i&&u==null)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");let b=qc(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function Dxe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,s=t[2]*i,o=t[1]*s,{newShape:l,keptDims:c}=k.squeezeShape(t);if(l.length<t.length){let m=Wp(e,l),g=["row","col","depth","depth2","depth3"];return"\n      ".concat(zp(m),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Up(g,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(o,", ").concat(s,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(Bp(e),"\n      }\n    ");let u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===o&&u==null)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&u==null)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");let f=qc(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Fxe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=k.squeezeShape(t);if(a.length<t.length){let g=Wp(e,a),b=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(zp(g),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Up(b,i),");\n      }\n    ")}let s=t[5],o=t[4]*s,l=t[3]*o,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(o,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(Bp(e),"\n      }\n    ");let d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===u&&d==null)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(o,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===s&&d==null)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");let m=qc(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(o," + depth3 * ").concat(s," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Bp(e){let t=e.name,n=k.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Mxe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,o=EW(e.shapeInfo.logicalShape,t.logicalShape),l=Rt(s),c=s-i,u,d=["x","y","z","w","u","v"];i===0?u="":s<2&&o.length>=1?u="coords = 0;":u=o.map(g=>"coords.".concat(d[g+c]," = 0;")).join("\n");let h="";s<2&&i>0?h="coords":h=e.shapeInfo.logicalShape.map((g,b)=>"coords.".concat(d[b+c])).join(", ");let p="return outputValue;",f=k.sizeFromShape(e.shapeInfo.logicalShape)===1,m=k.sizeFromShape(t.logicalShape)===1;if(i===1&&!f&&!m)p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";else if(f&&!m)s===1?p="\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":p="\n        return vec4(outputValue.x);\n      ";else if(o.length){let g=i-2,b=i-1;o.indexOf(g)>-1&&o.indexOf(b)>-1?p="return vec4(outputValue.x);":o.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return"\n    vec4 ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function Oxe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&e.shapeInfo.flatOffset==null&&k.arraysEqual(s,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");let c=Rt(l),u=EW(e.shapeInfo.logicalShape,t.logicalShape),d=l-o,h,p=["x","y","z","w","u","v"];o===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(m=>"coords.".concat(p[m+d]," = 0;")).join("\n");let f="";return l<2&&o>0?f="coords":f=e.shapeInfo.logicalShape.map((m,g)=>"coords.".concat(p[g+d])).join(", "),"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}function Rt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function zT(e,t,n){let{newShape:r,keptDims:a}=k.squeezeShape(t),i=t.length,s=e&&i===3&&t[0]===1,o=s?t.slice(1):r,l=!e&&i>1&&!k.arraysEqual(t,n)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:a}}function Wp(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Up(e,t){return t.map(n=>e[n]).join(", ")}function Pxe(e,t,n,r){let a=n.map((u,d)=>{let h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:t.variableNames[d],shapeInfo:h}}),i=a.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=txe(a,s,t),l=sW(e.gl,o),c=e.createProgram(l);return Q().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},AW(e,t,c)))}function AW(e,t,n){let r=[],a=[],i,s,o,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),Q().getNumber("WEBGL_VERSION")===1&&(l=e.getUniformLocation(n,"INFINITY",!1));let u=!1;for(let d of t.variableNames){let h={name:d,uniform:e.getUniformLocation(n,d,u),offset:e.getUniformLocation(n,"offset".concat(d),u)};t.enableShapeUniforms&&(h.shape=e.getUniformLocation(n,"".concat(d,"Shape"),u),h.texShape=e.getUniformLocation(n,"".concat(d,"TexShape"),u)),r.push(h)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",u),o=e.getUniformLocation(n,"outShapeStrides",u),s=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(let d of t.customUniforms)a.push(e.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:a,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}}function AR(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((n,r)=>{let a=n.logicalShape,i=t[r],s=i.shape;if(!k.arraysEqual(a,s))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(a," and ").concat(s," must match"));if(n.isUniform&&i.isUniform)return;let o=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!k.arraysEqual(o,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(o," and ").concat(l," must match"))})}function Lxe(e,t,n,r,a){t.program.enableShapeUniforms||(AR(t.inShapeInfos,n),AR([t.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),Q().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){let c=n[l],{uniform:u,offset:d,shape:h,texShape:p}=t.variablesLocations[l];if(h){let{uniformShape:f}=zT(t.program.packedInputs,c.shape,c.texData.texShape);switch(f.length){case 1:e.gl.uniform1iv(h,new Int32Array(f));break;case 2:e.gl.uniform2iv(h,new Int32Array(f));break;case 3:e.gl.uniform3iv(h,new Int32Array(f));break;case 4:e.gl.uniform4iv(h,new Int32Array(f));break}}if(p&&e.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(k.sizeFromShape(c.shape)<2)e.gl.uniform1f(u,c.uniformValues[0]);else{let f=c.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),e.gl.uniform1fv(u,f)}continue}c.texData.slice!=null&&d!=null&&e.gl.uniform1i(d,c.texData.slice.flatOffset),e.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){let l=k.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let l=0;l<t.program.customUniforms.length;++l){let c=t.program.customUniforms[l],u=t.customUniformLocations[l],d=a[l];if(c.type==="float")e.gl.uniform1fv(u,d);else if(c.type==="vec2")e.gl.uniform2fv(u,d);else if(c.type==="vec3")e.gl.uniform3fv(u,d);else if(c.type==="vec4")e.gl.uniform4fv(u,d);else if(c.type==="int")e.gl.uniform1iv(u,d);else if(c.type==="ivec2")e.gl.uniform2iv(u,d);else if(c.type==="ivec3")e.gl.uniform3iv(u,d);else if(c.type==="ivec4")e.gl.uniform4iv(u,d);else throw Error("uniform type ".concat(c.type," is not supported yet."))}e.executeProgram()}function zxe(e,t,n){let r="";t.concat(n).forEach(s=>{let o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=zT(e.packedInputs,s.shape,l),h="",p="",f="";if(u.length===1&&e.packedInputs){let w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h="".concat(w[0]>1,"_").concat(w[1]>1)}else if(u.length===2&&!e.packedInputs)p="".concat(u[0]>1,"_").concat(u[1]>1);else if(u.length>2&&!e.packedInputs){let w=k.computeStrides(u);f="".concat(w[0]===l[1],"_").concat(w[w.length-1]===l[1])}let m=s.shape.length,g=u.length===2&&k.arraysEqual(s.shape,l),b=k.sizeFromShape(s.shape)===1,y=E.getBroadcastDims(s.shape,n.shape),v=!e.packedInputs&&m===n.shape.length&&k.arraysEqual(l,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(l[0]>1,"_").concat(l[1]>1);r+="".concat(m,"_").concat(v,"_").concat(c?d:"","_").concat(u.length,"_").concat(b,"_").concat(y,"_").concat(g,"_").concat(h,"_").concat(p,"_").concat(f,"_").concat(x,"_").concat(o)}else{let l=s.isUniform?"uniform":s.texData.texShape;r+="".concat(s.shape,"_").concat(l,"_").concat(o)}});let a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Q().getNumber("WEBGL_VERSION")),i}function wr(e){return Q().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Bxe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Sm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Ur();this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?qx(["r","c","d"],e):Gc(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},Wxe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Sm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Ur();this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?qx(["r","c","d"],e):Gc(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},Uxe=class{constructor(e){this.variableNames=["A"],this.outTexUsage=Oa.DOWNLOAD;let t=Ur();this.outputShape=e,this.userCode="\n      ".concat(TW,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}},Vxe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Oa.DOWNLOAD;let t=Ur();this.outputShape=e,this.userCode="\n      ".concat(TW,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}},jxe={R:0,G:1,B:2,A:3},RR=class{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=Ur();this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let s=0;s<n.length;s++){let o=n[s];i+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(jxe[o],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?LT():PT(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}},Hxe=class{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Ur();this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let o=i*2+s;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(o,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(o,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(o,"] = values[2];\n            } else {\n              result[").concat(o,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?LT():PT(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(a,";\n        }\n    ")}},RW={};He(RW,{bindVertexProgramAttributeStreams:()=>WW,createBufferFromOutputTexture:()=>jW,createFloat16MatrixTexture:()=>PW,createFloat16PackedMatrixTexture:()=>BW,createFloat32MatrixTexture:()=>OW,createIndexBuffer:()=>MW,createPackedMatrixTexture:()=>zW,createUnsignedBytesMatrixTexture:()=>LW,createVertexBuffer:()=>FW,createVertexShader:()=>DW,downloadByteEncodedFloatMatrixFromOutputTexture:()=>GW,downloadFloat32MatrixFromBuffer:()=>HW,downloadMatrixFromPackedOutputTexture:()=>KW,downloadPackedMatrixFromBuffer:()=>qW,getInternalFormatForFloat16MatrixTexture:()=>WT,getInternalFormatForFloat16PackedMatrixTexture:()=>jT,getInternalFormatForFloat32MatrixTexture:()=>BT,getInternalFormatForPackedMatrixTexture:()=>VT,getInternalFormatForUnsignedBytesMatrixTexture:()=>UT,uploadDenseMatrixToTexture:()=>UW,uploadPixelDataToTexture:()=>VW});function DW(e){let t=Ur(),n="".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }");return iW(e,n)}function FW(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return uW(e,t)}function MW(e){let t=new Uint16Array([0,1,2,2,1,3]);return cW(e,t)}function jg(e,t,n,r,a,i){hW(t,n);let s=dW(e),o=e.TEXTURE_2D;return ke(e,()=>e.bindTexture(o,s)),ke(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),ke(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),ke(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),ke(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),Q().getNumber("WEBGL_VERSION")===1?ke(e,()=>e.texImage2D(o,0,r,t,n,0,a,i,null)):ke(e,()=>e.texStorage2D(o,1,r,t,n)),ke(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function BT(e){return e.internalFormatFloat}function OW(e,t,n,r){let[a,i]=Vg(t,n);return jg(e,a,i,BT(r),r.textureFormatFloat,e.FLOAT)}function WT(e){return e.internalFormatHalfFloat}function PW(e,t,n,r){let[a,i]=Vg(t,n);return jg(e,a,i,WT(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function UT(e){return e.downloadTextureFormat}function LW(e,t,n,r){let[a,i]=Vg(t,n);return jg(e,a,i,UT(r),e.RGBA,e.UNSIGNED_BYTE)}function VT(e){return e.internalFormatPackedFloat}function zW(e,t,n,r){let[a,i]=Pp(t,n);return jg(e,a,i,VT(r),e.RGBA,e.FLOAT)}function jT(e){return e.internalFormatPackedHalfFloat}function BW(e,t,n,r){let[a,i]=Pp(t,n);return jg(e,a,i,jT(r),e.RGBA,r.textureTypeHalfFloat)}function WW(e,t,n){return ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),fS(e,t,"clipSpacePos",n,3,20,0)&&fS(e,t,"uv",n,2,20,12)}function UW(e,t,n,r,a,i){ke(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,o,l;a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),o=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),Q().getNumber("WEBGL_VERSION")===2?ke(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,s)):ke(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,s)),ke(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function VW(e,t,n){ke(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?Q().getNumber("WEBGL_VERSION")===2?ke(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):ke(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):Q().getNumber("WEBGL_VERSION")===2?ke(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):ke(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),ke(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function jW(e,t,n,r){let a=e.createBuffer();ke(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));let i=4*4*t*n;return ke(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),ke(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),ke(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}function HW(e,t,n){let r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function GW(e,t,n,r){let[a,i]=Vg(t,n),s=4,o=new Uint8Array(W0e(t*n,s));return ke(e,()=>e.readPixels(0,0,a,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function qW(e,t,n,r,a,i,s,o){let l=e,c=new Float32Array(U0e(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function KW(e,t,n){let r=new Float32Array(t*n*4);return ke(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}var py=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let t=Q().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,nW(t,e)):this.gl=Wi(t),e=this.gl,Q().getNumber("WEBGL_VERSION")===2){let a=e;this.createVertexArray=()=>ke(a,()=>a.createVertexArray()),this.bindVertexArray=i=>ke(a,()=>a.bindVertexArray(i)),this.deleteVertexArray=i=>ke(a,()=>a.deleteVertexArray(i)),this.getVertexArray=()=>ke(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){let a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ke(e,()=>a.createVertexArrayOES()),this.bindVertexArray=i=>ke(e,()=>a.bindVertexArrayOES(i)),this.deleteVertexArray=i=>ke(e,()=>a.deleteVertexArrayOES(i)),this.getVertexArray=()=>ke(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Q().getNumber("WEBGL_VERSION")===1){let a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=wf(this.gl,a),Pa(this.gl,i))this.textureHalfFloatExtension=wf(this.gl,i);else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Pa(this.gl,r))this.colorBufferHalfFloatExtension=wf(this.gl,r);else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Pa(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else if(Pa(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=FW(this.gl),this.indexBuffer=MW(this.gl),this.framebuffer=pW(this.gl),this.textureConfig=MT(this.gl,this.textureHalfFloatExtension)}get debug(){return Q().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;ke(e,()=>e.finish()),ke(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ke(e,()=>e.deleteFramebuffer(this.framebuffer)),ke(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ke(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ke(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),OW(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),PW(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),LW(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),VW(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),UW(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),BW(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),zW(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(mS(this.gl,this.framebuffer),this.outputTexture=null),ke(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>GW(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,i){return qW(this.gl,e,t,n,r,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return HW(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=jW(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Q().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let i=r.clientWaitSync(a,0,0);return i===r.ALREADY_SIGNALED||i===r.CONDITION_SATISFIED},t=a}else Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>KW(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;this.vertexShader==null&&(this.vertexShader=DW(t));let n=oW(t);ke(t,()=>t.attachShader(n,this.vertexShader)),ke(t,()=>t.attachShader(n,e)),lW(t,n);let r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&uy(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let t=this.gl;ke(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),WW(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ke(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&uy(this.gl,this.program),ke(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?mW(this.gl,e,t):gW(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),ke(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),bW(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,a]=Pp(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&uy(this.gl,this.program),kf(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;if(this.debug){let t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ke(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ke(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=wf(this.gl,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.createQuery();return n.beginQuery(r.TIME_ELAPSED_EXT,a),a}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await k.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){let n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}else{let n=this.getQueryTimerExtensionWebGL1();return n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{let n=this.getQueryTimerExtensionWebGL1(),r=n.getQueryObjectEXT(e,n.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=Gxe(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:n}=this.itemsToPoll[t];n()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Q().platform&&(n=Q().platform.setTimeoutCustom.bind(Q().platform)),k.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),cy(this.gl,e,this.framebuffer),this.debug&&kf(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(cy(this.gl,this.outputTexture,this.framebuffer),this.debug&&kf(this.gl)):mS(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;cy(r,e,this.framebuffer),this.debug&&kf(r),this.outputTexture=e,ke(r,()=>r.viewport(0,0,t,n)),ke(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),ke(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function Gxe(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var{addImpl:qxe,bincountImpl:XW,bincountReduceImpl:Kxe,bitwiseAndImpl:Xxe,castImpl:Yxe,ceilImpl:Jxe,concatImpl:Zxe,equalImpl:Qxe,expImpl:ewe,expm1Impl:twe,floorImpl:nwe,gatherNdImpl:rwe,gatherV2Impl:awe,greaterImpl:iwe,greaterEqualImpl:swe,lessImpl:owe,lessEqualImpl:lwe,linSpaceImpl:uwe,logImpl:cwe,maxImpl:dwe,maximumImpl:hwe,minimumImpl:pwe,multiplyImpl:fwe,negImpl:mwe,notEqualImpl:gwe,prodImpl:bwe,raggedGatherImpl:ywe,raggedRangeImpl:vwe,raggedTensorToTensorImpl:xwe,rangeImpl:wwe,rsqrtImpl:kwe,scatterImpl:Swe,sigmoidImpl:Iwe,simpleAbsImpl:YW,sliceImpl:$we,sparseFillEmptyRowsImpl:Cwe,sparseReshapeImpl:Twe,sparseSegmentReductionImpl:JW,sqrtImpl:Ewe,staticRegexReplaceImpl:Nwe,stridedSliceImpl:_we,stringNGramsImpl:Awe,stringSplitImpl:Rwe,stringToHashBucketFastImpl:Dwe,subImpl:Fwe,tileImpl:Mwe,topKImpl:Owe,transposeImpl:HT,uniqueImpl:Pwe}=vT;function ZW(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>"".concat(e,".").concat(n))}function Er(e,t){return t===1?[e]:ZW(e,t)}function Lwe(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}var zwe=class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=wr(this.outputShape.length),this.rank===0)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{let t=Er("rc",this.rank),n=Rt(this.rank),r=this.getOutOfBoundsCondition(t),a=this.getSetup(t),i=this.getOutput(t);this.userCode="\n        void main() {\n          ".concat(n," rc = getOutputCoords();\n\n          if(").concat(r,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(a,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a="".concat(n===0?"r":"rp1",", ").concat(r===0?"c":"cp1");for(let i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";let t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){let t=this.getSourceCoordsArr(e);return this.rank===1?"getA(rc), (rc + 1 >= ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]," ? 0. : getA(rc + 1)), 0, 0"):"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}},QW=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length);let n="";for(let r=0;r<4;r++){let a="thisRC = rc;";r%2===1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        ".concat(a,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(Bwe(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?LT():PT(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}};function Bwe(e,t){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t?exe(["r","c","d"],"inputShape"):Gc(["r","c","d"],e),"\n      return ivec3(r, c, d);\n    }\n  ")}var Wwe=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){let r=FR(t,n),a=MR(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);let i=DR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();let o=this.freeTextures[a].pop();return this.usedTextures[a].push(o),o}let s;return r===ir.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===ir.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===ir.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===ir.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===ir.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),s}releaseTexture(e,t,n,r){if(this.freeTextures==null)return;let a=FR(n,r),i=MR(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);let s=DR(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Q().get("WEBGL_DELETE_TEXTURE_THRESHOLD");o!==-1&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;let l=this.usedTextures[i],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));let t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function Uwe(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F||t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}function DR(e,t,n,r,a){let i=Vwe(t,r),s;if(a){let[l,c]=Pp(e[0],e[1]);s=l*c}else{let[l,c]=Vg(e[0],e[1]);s=l*c}let o=Uwe(n,i);return s*o}function Vwe(e,t){switch(e){case ir.PACKED_2X2_FLOAT32:return VT(t);case ir.PACKED_2X2_FLOAT16:return jT(t);case ir.UNPACKED_FLOAT32:return BT(t);case ir.UNPACKED_FLOAT16:return WT(t);case ir.PACKED_4X1_UNSIGNED_BYTE:return UT(t);default:throw new Error("Unknown physical texture type ".concat(e))}}function jwe(e){return Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ir.PACKED_2X2_FLOAT32:ir.UNPACKED_FLOAT32:e?ir.PACKED_2X2_FLOAT16:ir.UNPACKED_FLOAT16}function FR(e,t){if(e===Oa.UPLOAD)return ir.PACKED_2X2_FLOAT32;if(e===Oa.RENDER||e==null)return jwe(t);if(e===Oa.DOWNLOAD||e===Oa.PIXELS)return ir.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function MR(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var is=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}},fi="if (isnan(x)) return x;",Hwe="return x;",OR="return abs(x);",Gwe="return (x >= 0.0) ? x : (exp(x) - 1.0);",qwe=fi+"\n  return (x < 0.0) ? 0.0 : x;\n",Kwe=fi+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",so="return x;",Xwe="return 1.0 / (1.0 + exp(-1.0 * x));",Ywe="return x;",Jwe="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Zwe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Qwe="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",e1e="return 1.0 / (1.0 + exp(-1.0 * x));",bo=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}},t1e=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length);let t=e.length,n=Er("rc",t),r=Rt(t),a=Lwe(t,n),i=n.slice(-2),s=t<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(a,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}},n1e=bs.whereImpl,r1e=1e-7,a1e=1e-4,l1={};function i1e(e){return e in l1||(l1[e]={}),l1[e]}var s1e=Q().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),o1e=600;function l1e(){return Q().global.screen==null?1024:Q().global.screen.height*Q().global.screen.width*window.devicePixelRatio*o1e/1024/1024}var Kx=class extends Vm{nextDataId(){return Kx.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Q().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof py)t=e;else{let n=Wi(Q().getNumber("WEBGL_VERSION"),e);t=new py(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let n=Wi(Q().getNumber("WEBGL_VERSION"));t=new py(n),this.binaryCache=i1e(Q().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Wwe(this.gpgpu),this.numMBBeforeWarning=l1e(),this.texData=new N0(this,ni())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,i){let s=this.makeTensorInfo(t,n),o=this.texData.get(s.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[r,a]},o.texShape=[r,a];let l=Sf(t),c=new RR(l,!1,i),u=this.runWebGLProgram(c,[s],n,[[r,a]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(s),u.dataId}write(e,t,n){if((Q().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Q().getBool("DEBUG"))&&this.checkNumericalProblems(e),n==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Oa.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){let t=this.texData.get(e);t.refCount--}}move(e,t,n,r,a){if(Q().getBool("DEBUG")&&this.checkNumericalProblems(t),r==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Oa.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:i,shape:s,isPacked:o}=t;if(i!=null){let d;o?d=new bo(s,so):d=new is(s,so);let h=this.runWebGLProgram(d,[{dataId:e,shape:s,dtype:r}],r),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(n!=null)return this.convertAndCacheOnCPU(e);if(r==="string")return n;let l=this.activeTimers!=null,c;l&&(c=k.now());let u;if(r==="complex64"){let d=this.readSync(a.real.dataId),h=this.readSync(a.imag.dataId);u=E.mergeRealAndImagArrays(d,h)}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=k.now()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){let p=this.pendingRead.get(e);return new Promise(f=>p.push(f))}let t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:i,complexTensorInfos:s,isPacked:o}=t;if(a!=null){let p;o?p=new bo(r,so):p=new is(r,so);let f=this.runWebGLProgram(p,[{dataId:e,shape:r,dtype:i}],i),m=this.read(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(n!=null)return this.convertAndCacheOnCPU(e);if(Q().getBool("DEBUG")&&!Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Q().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(i!=="complex64"&&Q().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);let p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...Bb(r))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let u;if(i==="complex64"){let p=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),f=p[0],m=p[1];u=E.mergeRealAndImagArrays(f,m)}else if(l==null)u=this.getValuesFromTexture(e);else{let p=k.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){let p=this.gpgpu.gl;ke(p,()=>p.deleteBuffer(l))}let d=this.convertAndCacheOnCPU(e,u),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ni().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,t={}){let n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,isPacked:o,texture:l}=n;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;o?h=new bo(a,so):h=new is(a,so);let p=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),f=this.readToGPU(p,t);return this.disposeIntermediateTensorInfo(p),f}if(l==null)throw r!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let c=this.decode(e,t.customTexShape),u=ni().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:u},d.texture)}bufferSync(e){let t=this.readSync(e.dataId);if(e.dtype==="string")try{let n=t.map(r=>k.decodeString(r));return nt(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return nt(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){let n=e[t];if(!rW(n))throw Q().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")):Error("The value ".concat(n," cannot be represented on this device."))}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=k.sizeFromShape(t);if(Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let d=this.decode(e),h=this.texData.get(d.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Bb(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(d),p}let i=Q().getBool("WEBGL_PACK")&&r===!0,s=i?Sf(t):t,o=i?new Vxe(s):new Uxe(s),l=this.runWebGLProgram(o,[{shape:s,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let t=this.activeTimers,n=[],r=!1;this.programTimersStack==null?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();let a=k.flatten(this.activeTimers.map(o=>o.query)).filter(o=>o!=null),i=k.flatten(this.activeTimers.map(o=>o.name)).filter(o=>o!=null);this.activeTimers=t,r&&(this.programTimersStack=null);let s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let o=await Promise.all(a);s.kernelMs=k.sum(o),s.getExtraProfileInfo=()=>o.map((l,c)=>({name:i[c],ms:l})).map(l=>"".concat(l.name,": ").concat(l.ms)).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:k.now(),endMs:null}}endTimer(e){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=k.now(),e)}async getQueryTime(e){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return n!=null&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:r,usage:a,isPacked:i,slice:s}=this.texData.get(e),o=s&&s.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),t!=null&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,i)));let c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=s1e){return Q().getBool("WEBGL_CPU_FORWARD")&&e.every(n=>this.texData.get(n.dataId).texture==null&&k.sizeFromShape(n.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){E.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return n1e(e.shape,t)}packedUnaryOp(e,t,n){let r=new bo(e.shape,t),a=this.compileAndRun(r,[e],n);return ni().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let r=YW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,OR,e.dtype);let t=new is(e.shape,OR),n=this.compileAndRun(t,[e]);return ni().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if(t==="string"&&n!=null&&n.length>0&&k.isString(n[0])){let a=n.map(i=>k.encodeString(i));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return ni().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){let t=new t1e(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new zwe(e.shape),n=!0;return this.runWebGLProgram(t,[e],e.dtype,null,n)}packedReshape(e,t){let n=[hu(e.shape),...pu(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[hu(t),...pu(t)],i=new QW(a,n),s=!0,o=[n],l=this.runWebGLProgram(i,[r],e.dtype,o,s);return{dataId:l.dataId,shape:t,dtype:l.dtype}}decode(e,t){let n=this.texData.get(e),{isPacked:r,shape:a,dtype:i}=n;if(t!=null){let d=k.sizeFromShape(a),h=t[0]*t[1]*4;k.assert(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let s=Sf(a),o;r?o=new Wxe(s):o=new Bxe(s);let l=!0,c=[t!=null?t:Bb(s)],u=this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,c,l,t);return{dtype:i,shape:a,dataId:u.dataId}}runWebGLProgram(e,t,n,r,a=!1,i){let s=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(s.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===Sm.DENSE){let g=i!=null?i:Bb(e.outputShape);o.texShape=g.map(b=>b*2)}if(e.outTexUsage!=null&&(o.usage=e.outTexUsage),k.sizeFromShape(s.shape)===0)return o.values=k.getTypedArrayFromDType(s.dtype,0),s;let l=[],c=t.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(g.dataId);if(b.texture==null){if(!e.packedInputs&&k.sizeFromShape(g.shape)<=Q().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!b.isPacked!=!!e.packedInputs)g=b.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),b=this.texData.get(g.dataId);else if(b.isPacked&&!Im(b.shape,g.shape)){let y=g,v=g.shape;g.shape=b.shape,g=this.packedReshape(g,v),l.push(g),b=this.texData.get(g.dataId),y.shape=v}return{shape:g.shape,texData:b,isUniform:!1}});this.uploadToGPU(s.dataId);let u={shape:s.shape,texData:o,isUniform:!1},d=zxe(e,c,u),h=this.getAndSaveBinary(d,()=>Pxe(this.gpgpu,e,c,u)),p=this.activeTimers!=null,f;p&&(f=this.startTimer()),Q().get("ENGINE_COMPILE_ONLY")||Lxe(this.gpgpu,h,c,u,r),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));let m=Q().get("WEBGL_FLUSH_THRESHOLD");if(m>0){let g=k.now();g-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!Q().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&a===!1){let g=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),g}return s}compileAndRun(e,t,n,r,a=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Q().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=X(()=>{if(!Q().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=Q().getBool("DEBUG");Q().set("DEBUG",!1);let t=this.abs(Me(1e-8)).dataSync()[0];if(Q().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?r1e:a1e}uploadToGPU(e){let t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:i,usage:s,isPacked:o}=t;if(i!=null)return;let l=this.activeTimers!=null,c;l&&(c=k.now());let u=t.texShape;if(u==null&&(u=xW(n,o),t.texShape=u),a!=null){let d=Sf(n),h,p=u[1],f=u[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(o||!m)&&([p,f]=Pp(u[0],u[1])),o?h=new Hxe(d,m):h=new RR(d,m);let g=m?[f,p]:u,b=this.makeTensorInfo(g,r),y=this.texData.get(b.dataId);m?y.usage=Oa.PIXELS:y.usage=Oa.UPLOAD,y.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,f,a);let v=[[f,p]],x=!0,w=this.runWebGLProgram(h,[b],r,v,x),$=this.texData.get(w.dataId);t.texShape=$.texShape,t.isPacked=$.isPacked,t.usage=$.usage,Q().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=$.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=k.now()-c)}else{let d=this.acquireTexture(u,s,r,o);t.texture=d}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:r}=n;return t!=null&&(n.values=u1e(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*k.bytesPerElement(t)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(let[,t]of Object.entries(this.binaryCache)){let n=new Promise(r=>{try{this.checkCompletion_(t),r(!0)}catch(a){throw a}});e.push(n)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await O2(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(OT(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:s,outTexShapeLocation:o}=AW(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=s,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";let{texture:r,height:a,width:i,channels:s}=e,o=ni().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let l=o.writeTexture(r,t,n,a,i,s);return ni().makeTensorFromDataId(l,t,n,o)}};Kx.nextDataId=0;function u1e(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){let n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error("Unknown dtype ".concat(t))}var c1e="4.7.0";function eU(){Q().set("WEBGL_FORCE_F16_TEXTURES",!0)}mg.isBrowser()&&G0("webgl",()=>new Kx,2);var d1e={forceHalfFloat:eU},GT="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",fu=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=E.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=wr(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}},Kc="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",Vp=class{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=E.assertAndGetBroadcastShape(t,n);let a=this.outputShape.length;this.enableShapeUniforms=wr(a);let i="";if(r)if(a===0||k.sizeFromShape(this.outputShape)===1)i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(Rt(a)," coords = getOutputCoords();\n        "),a===1)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{let s=Er("coords",a);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[a-2]," + 1) >= outShape[").concat(a," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[a-1]," + 1) >= outShape[").concat(a," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[a-2]," + 1) >= ").concat(this.outputShape[a-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[a-1]," + 1) >= ").concat(this.outputShape[a-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}};function ka(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var h1e={kernelName:Yu,backendName:"webgl",kernelFunc:ka};function ol(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=ka({inputs:{x:r},backend:n}),l=ka({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:l},i}var p1e={kernelName:R0,backendName:"webgl",kernelFunc:ol},tU="return (a < 0.) ? b * a : a;",nU="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function f1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r,s=n.makeTensorInfo([],"float32",k.createScalarValue(i,"float32")),o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(nU,a.shape,s.shape):new fu(tU,a.shape,s.shape),l=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),l}var m1e={kernelName:ec,backendName:"webgl",kernelFunc:f1e},rU="return (a < 0.) ? b * a : a;",aU="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function g1e(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(aU,r.shape,a.shape):new fu(rU,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}var b1e={kernelName:gc,backendName:"webgl",kernelFunc:g1e},jp="if (isnan(x)) return x;";function ht({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{let{x:s}=a,o=i,l=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){let d=o.texData.get(s.dataId),h=n(d.values,l);return o.makeTensorInfo(s.shape,l,h)}let c=Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,u;return c?u=new bo(s.shape,t):u=new is(s.shape,e),o.runWebGLProgram(u,[s],l)}}function dr({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:s,backend:o})=>{let{a:l,b:c}=s,u=o;if(r&&l.dtype==="complex64"){let f=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,b]=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{let[x,w]=v,$={dataId:x.dataId,dtype:x.dtype,shape:l.shape},C={dataId:w.dataId,dtype:w.dtype,shape:c.shape},T=new fu(e,l.shape,c.shape);return u.runWebGLProgram(T,[$,C],Ua(x.dtype,w.dtype))}),y=ol({inputs:{real:g,imag:b},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(b),y}let d=i||Ua(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&a!=null){let f=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?E.fromUint8ToStringArray(f):f,b=l.dtype==="string"?E.fromUint8ToStringArray(m):m,[y,v]=a(l.shape,c.shape,g,b,d),x=u.makeTensorInfo(v,d),w=u.texData.get(x.dataId);return w.values=y,x}let h=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,p;return h?p=new Vp(t,l.shape,c.shape,n):p=new fu(e,l.shape,c.shape),u.runWebGLProgram(p,[l,c],d)}}function $m(e,t=!1){if(e==="linear")return t?Ywe:Hwe;if(e==="relu")return t?Zwe:qwe;if(e==="elu")return t?Jwe:Gwe;if(e==="relu6")return t?Qwe:Kwe;if(e==="prelu")return t?aU:rU;if(e==="leakyrelu")return t?nU:tU;if(e==="sigmoid")return t?e1e:Xwe;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var iU=class{constructor(e,t,n,r=!1,a=!1,i=!1,s=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=wr(this.outputShape.length);let c=r?e[1]:e[2],u=Math.ceil(c/2),d=r?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(o?m="vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?m="vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):m="vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");let b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let y="rc.x",v="rc.x";e[0]<t[0]?y="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(v="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(y,";\n        int batchB = ").concat(v,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}},PR={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},LR=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=E.assertAndGetBroadcastShape(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}},zR="return a * b;";function qT(e){let{inputs:t,backend:n}=e,{a:r,b:a}=t,i=E.upcastType(r.dtype,a.dtype);if(r.dtype==="complex64"){let o=n.texData.get(r.dataId),l=n.texData.get(a.dataId),c=new LR(PR.REAL,r.shape,a.shape),u=new LR(PR.IMAG,r.shape,a.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],h=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(u,d,"float32"),f=ol({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}if(n.shouldExecuteOnCPU([r,a])){let o=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[c,u]=fwe(r.shape,a.shape,o.values,l.values,i),d=n.makeTensorInfo(u,i),h=n.texData.get(d.dataId);return h.values=c,d}let s;return Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Vp(zR,r.shape,a.shape):s=new fu(zR,r.shape,a.shape),n.runWebGLProgram(s,[r,a],i)}var y1e={kernelName:hc,backendName:"webgl",kernelFunc:qT};function v1e(e,t,n){let r=[hu(e.shape),...pu(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[hu(t),...pu(t)],s=new QW(i,r),o=!0,l=[r],c=n.runWebGLProgram(s,[a],e.dtype,l,o);return{dataId:c.dataId,shape:t,dtype:c.dtype}}function we(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=n,o=k.sizeFromShape(a.shape),l=k.inferFromImplicitShape(i,o),c=k.sizeFromShape(l);k.assert(o===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(o," elements. The new shape and old shape must have the same number of elements."));let u=s.texData.get(a.dataId);return u.isPacked&&!Im(a.shape,l)&&!(u.texture!==null&&Im(u.shape,l))?v1e(a,l,s):(s.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}var x1e={kernelName:lp,backendName:"webgl",kernelFunc:we},BR=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s=Math.floor(n/4)*4,o=n%4,l="sumValue += dot(values, ones);";if(t!=null){let u=1/t;l="sumValue += dot(values * ".concat(k.isInt(u)?u.toPrecision(2):u,", ones);")}let c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(o===1,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(o===2,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(o===3,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}},w1e=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s="0.0",o="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",o="min"):t==="max"&&(s="-1.0 / 1e-20",o="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");let c=Math.floor(n/4)*4,u=n%4,d="\n      if (".concat(t==="sum",") {\n        sumValue += dot(values, ones);\n      } else if (").concat(t==="prod",") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(o,"(values, minMaxValue);\n        if (").concat(t==="min"," || ").concat(t==="max",") {\n          minMaxValue = ").concat(o,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";t==="all"?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):t==="any"&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(u===1,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(u===2,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(u===3,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}};function k1e(e){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let n=t.length?t[t.length-1].outSize:e[1],r=E.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function Xc(e,t,n,r){let a=k1e(e.shape),i=e;for(let s=0;s<a.length;s++){let{inSize:o,windowSize:l,outSize:c}=a[s],u,d;n==="mean"?u=s===0?new BR({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},o):new BR({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c}):u=new w1e({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return i}var S1e=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[t[i]];this.outputShape=n,this.rank=n.length;let r=Rt(this.rank),a=I1e(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(a,"));\n    }\n    ")}};function I1e(e){let t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}var $1e=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));let r=Rt(this.rank),a=ZW("rc",this.rank),i=new Array(this.rank);for(let c=0;c<t.length;c++)i[t[c]]=a[c];let s="vec2(".concat(i.slice(-2).join(),")"),o="++".concat(a[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(i.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(o,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(a[this.rank-1],";\n      if(++").concat(a[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(o,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}};function Xx(e,t,n){let r=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $1e(e.shape,t):new S1e(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function C1e(e,t,n,r){let a=t,i=e.shape.length,s=k.parseAxisParam(a,e.shape),o=s,l=E.getAxesPermutation(o,i),c=l!=null,u=e;c&&(u=Xx(e,l,r),o=E.getInnerMostAxes(o.length,i)),E.assertAxesAreInnerMostDims("sum",o,i);let[d,h]=E.computeOutAndReduceShapes(u.shape,o),p=d;n&&(p=E.expandShapeToKeepDim(d,s));let f=k.sizeFromShape(h),m=k.sizeFromShape(e.shape)/f,g=we({inputs:{x:u},attrs:{shape:[m,f]},backend:r}),b=H0(e.dtype),y=Xc(g,b,"sum",r),v=we({inputs:{x:y},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(u),v}function Yx(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;return C1e(a,i,s,n)}var T1e={kernelName:Dc,backendName:"webgl",kernelFunc:Yx};function Mr(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:i}=r,s=n,o=a.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=a.shape[i[u]];let c;if(s.shouldExecuteOnCPU([a])){let u=s.texData.get(a.dataId).values,d=HT(u,a.shape,a.dtype,i,l);c=s.makeTensorInfo(l,a.dtype);let h=s.texData.get(c.dataId);h.values=d}else c=Xx(a,i,s);return c}var E1e={kernelName:Fs,backendName:"webgl",kernelFunc:Mr},sU=1e3;function _v({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){let c=e.shape.length,u=t.shape.length,d=n?e.shape[c-2]:e.shape[c-1],h=r?t.shape[u-1]:t.shape[u-2],p=n?e.shape[c-1]:e.shape[c-2],f=r?t.shape[u-2]:t.shape[u-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),b=k.sizeFromShape(m),y=k.sizeFromShape(g),v=Cp.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([p,f]);k.assert(d===h,()=>"Error in matMul: inner shapes (".concat(d,") and (").concat(h,") of Tensors with shapes ").concat(e.shape," and ").concat(t.shape," and transposeA=").concat(n," and transposeB=").concat(r," must match."));let x=n?[b,d,p]:[b,p,d],w=r?[y,f,h]:[y,h,f],$=we({inputs:{x:e},backend:a,attrs:{shape:x}}),C=we({inputs:{x:t},backend:a,attrs:{shape:w}}),T=[$,C],A=Math.max(b,y),D=n?$.shape[1]:$.shape[2],N=i!=null,I=s!=null,M=l==="leakyrelu",P=l!=null?$m(l,!0):null,z=N||I||M||P!=null,j;if((p===1||f===1)&&D>sU&&z===!1){let O=$,W=C;n&&(O=Mr({inputs:{x:$},backend:a,attrs:{perm:[0,2,1]}}),T.push(O)),r&&(W=Mr({inputs:{x:C},backend:a,attrs:{perm:[0,2,1]}}),T.push(W));let L=f!==1,H=f===1,Z=O;L&&(Z=we({inputs:{x:O},backend:a,attrs:{shape:[A,D,1]}}),T.push(Z));let J=f===1?2:1,ne=W;H&&(ne=we({inputs:{x:W},backend:a,attrs:{shape:[A,1,D]}}),T.push(ne));let re=qT({inputs:{a:Z,b:ne},backend:a});j=Yx({inputs:{x:re},backend:a,attrs:{axis:J,keepDims:!0}}),T.push(re)}else{let O=Ua(e.dtype,t.dtype),W=new iU(x,w,[A,p,f],n,r,N,P,I,M),L=[$,C];if(i!=null&&L.push(i),I&&L.push(s),M){let H=a.makeTensorInfo([],"float32",k.createScalarValue(o,"float32"));L.push(H),T.push(H)}j=a.runWebGLProgram(W,L,O)}let K=we({inputs:{x:j},backend:a,attrs:{shape:v}});T.push(j);for(let O of T)a.disposeIntermediateTensorInfo(O);return K}function N1e(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return _v({a,b:i,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}var _1e={kernelName:Jl,backendName:"webgl",kernelFunc:N1e},WR="return abs(x);";function A1e(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=n.texData.get(r.dataId),s=YW(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let a;return Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new bo(r.shape,WR):a=new is(r.shape,WR),n.runWebGLProgram(a,[r],r.dtype)}var R1e={kernelName:Ih,backendName:"webgl",kernelFunc:A1e},D1e=fi+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",F1e=ht({opSnippet:D1e}),M1e={kernelName:wu,backendName:"webgl",kernelFunc:F1e},O1e=fi+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",P1e=ht({opSnippet:O1e}),L1e={kernelName:ku,backendName:"webgl",kernelFunc:P1e},UR="return a + b;",z1e=dr({opSnippet:UR,packedOpSnippet:UR,supportsComplex:!0,cpuKernelImpl:qxe}),B1e={kernelName:Jo,backendName:"webgl",kernelFunc:z1e},W1e=class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((a,i)=>"T".concat(i));let n=[];this.variableNames.forEach(a=>{n.push("float v".concat(a," = get").concat(a,"AtOutCoords();"))});let r=this.variableNames.map(a=>"v".concat(a)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}},U1e=class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((a,i)=>"T".concat(i));let n=[];this.variableNames.forEach(a=>{n.push("vec4 v".concat(a," = get").concat(a,"AtOutCoords();"))});let r=this.variableNames.map(a=>"v".concat(a)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}};function fy(e){let{inputs:t,backend:n}=e,r=t;if(r.length===1)return ka({inputs:{x:r[0]},backend:n});if(r.length>Q().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let o=Math.floor(r.length/2),l=fy({inputs:r.slice(0,o),backend:n}),c=fy({inputs:r.slice(o),backend:n});return fy({inputs:[l,c],backend:n})}let a=r.map(o=>o.dtype).reduce((o,l)=>Ua(o,l)),i=r.map(o=>o.shape),s=Q().getBool("WEBGL_PACK")?new U1e(r[0].shape,i):new W1e(r[0].shape,i);return n.runWebGLProgram(s,r,a)}var V1e={kernelName:Su,backendName:"webgl",kernelFunc:fy};function j1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),c=l,u=E.getAxesPermutation(c,o),d=a;u!=null&&(d=Mr({inputs:{x:a},backend:n,attrs:{perm:u}}),c=E.getInnerMostAxes(c.length,o)),E.assertAxesAreInnerMostDims("all",c,o);let[h,p]=E.computeOutAndReduceShapes(d.shape,c),f=k.sizeFromShape(p),m=we({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}}),g=Xc(m,m.dtype,"all",n),b;if(s){let y=E.expandShapeToKeepDim(h,l);b=we({inputs:{x:g},backend:n,attrs:{shape:y}})}else b=we({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),b}var H1e={kernelName:$h,backendName:"webgl",kernelFunc:j1e};function G1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),c=l,u=E.getAxesPermutation(c,o),d=a;u!=null&&(d=Mr({inputs:{x:a},backend:n,attrs:{perm:u}}),c=E.getInnerMostAxes(c.length,o)),E.assertAxesAreInnerMostDims("any",c,o);let[h,p]=E.computeOutAndReduceShapes(d.shape,c),f=k.sizeFromShape(p),m=we({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}}),g=Xc(m,m.dtype,"any",n),b;if(s){let y=E.expandShapeToKeepDim(h,l);b=we({inputs:{x:g},backend:n,attrs:{shape:y}})}else b=we({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),b}var q1e={kernelName:Ch,backendName:"webgl",kernelFunc:G1e},K1e=class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:a,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];let s=t==="max"?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(o,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}},X1e=class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,k.assert(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));let a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");let s=this.outputShape,o=s.length,l=Rt(o),c=Er("coords",o),u,d;if(i===1){d=o+1;let C=Rt(d);u="\n        ".concat(C," sourceLocR = ").concat(C,"(").concat(c.join(),", 0);\n        ++").concat(c[o-1],";\n        ").concat(C," sourceLocG = ").concat(C,"(").concat(c.join(),", 0);\n        ++").concat(c[o-2],";\n        ").concat(C," sourceLocA = ").concat(C,"(").concat(c.join(),", 0);\n        --").concat(c[o-1],";\n        ").concat(C," sourceLocB = ").concat(C,"(").concat(c.join(),", 0);\n        --").concat(c[o-2],";")}else d=o,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[o-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[o-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[o-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[o-2],";");let h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],f=h.map(C=>"int "+C),m=Er("sourceLocR",d-1).concat("inIdx.r"),g=Er("sourceLocG",d-1).concat("inIdx.g"),b=Er("sourceLocB",d-1).concat("inIdx.b"),y=Er("sourceLocA",d-1).concat("inIdx.a"),v=n==="max"?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(y.join(),") : 0.)"),$=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat($,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[o-1]," < ").concat(s[o-1]-1,";\n        bool hasNextRow = ").concat(c[o-2]," < ").concat(s[o-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(v,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}};function oU(e,t,n,r=null){let a=t.shape[0],i=t.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);let s=E.computeOptimalWindowSize(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},l=new K1e(o,n,r==null),c=[t];r!=null&&c.push(r);let u=e.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let d=oU(e,t,n,u);return e.disposeIntermediateTensorInfo(u),d}function lU(e,t,n,r=null){let a=r!=null?r.shape:t.shape,i=a[a.length-1],s=E.computeOptimalWindowSize(i),o=new X1e(a,s,n,r==null),l=r==null?[t]:[t,r],c=e.runWebGLProgram(o,l,"int32");if(c.shape.length===t.shape.length){let u=lU(e,t,n,c);return e.disposeIntermediateTensorInfo(c),u}return c}function uU(e,t,n,r){let a=[n];if(E.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Q().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let i=[],s=e.texData.get(t.dataId),o=s!==null&&s.isPacked,l=t;o&&(l=e.unpackTensor(t),i.push(l));let[c,u]=E.computeOutAndReduceShapes(l.shape,a),d=k.sizeFromShape(u),h=we({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});i.push(h);let p=oU(e,h,r);i.push(p);let f=we({inputs:{x:p},backend:e,attrs:{shape:c}});return i.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}return lU(e,t,r)}function Y1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,s=k.parseAxisParam(i,a.shape),o=E.getAxesPermutation(s,a.shape.length),l=a,c=[];o!=null&&(l=Mr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=E.getInnerMostAxes(s.length,l.shape.length)),E.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=uU(n,l,s[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}var J1e={kernelName:Th,backendName:"webgl",kernelFunc:Y1e};function Z1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,s=k.parseAxisParam(i,a.shape),o=E.getAxesPermutation(s,a.shape.length),l=a,c=[];o!=null&&(l=Mr({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=E.getInnerMostAxes(s.length,l.shape.length)),E.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=uU(n,l,s[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}var Q1e={kernelName:Eh,backendName:"webgl",kernelFunc:Z1e},eke=fi+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",tke=ht({opSnippet:eke}),nke={kernelName:Iu,backendName:"webgl",kernelFunc:tke},rke=fi+"return log(x + sqrt(x * x + 1.0));",ake=ht({opSnippet:rke}),ike={kernelName:$u,backendName:"webgl",kernelFunc:ake},ske=fi+"\n  return atan(x);\n",oke=ht({opSnippet:ske}),lke={kernelName:Cu,backendName:"webgl",kernelFunc:oke},uke=GT+"\n  return atan(a, b);\n",cke="\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Kc+"\n  return result;\n",dke=dr({opSnippet:uke,packedOpSnippet:cke}),hke={kernelName:Eu,backendName:"webgl",kernelFunc:dke},pke=fi+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",fke=ht({opSnippet:pke}),mke={kernelName:Tu,backendName:"webgl",kernelFunc:fke},Cm=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;let f=t==="avg",m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),b="0.0";if(f||(b="-1.0 / 1e-20"),n){let C=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(C," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?a?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");return}let y="max",v="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");t==="avg"&&(v="avgValue / max(count, 1.0)");let x=Math.floor(i/4)*4,w=i%4,$="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(y,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat($,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(w===1,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat($,"\n          } else if (").concat(w===2,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat($,"\n          } else if (").concat(w===3,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat($,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}},KT=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;let y=t==="avg",v="0.0";if(y||(v="-1.0 / 1e-20"),n){let A=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(A," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?a?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");return}let x="max",w="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");t==="avg"&&(w="avgValue / max(count, 1.0)");let $=Math.floor(i/4)*4,C=i%4,T="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat($,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(T,"\n            }\n\n            int xC = xCCorner + ").concat($,";\n            if (").concat(C===1,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(C===2,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(C===3,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(T,"\n            }\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}};function gke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;Lp(a,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;k.assert(E.eitherStridesOrDilationsAreOne(s,c),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(c,"'"));let u=E.computePool2DInfo(a.shape,i,s,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))return ka({inputs:{x:a},backend:n});let d=new Cm(u,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}var bke={kernelName:Nu,backendName:"webgl",kernelFunc:gke};function yke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=E.computePool3DInfo(a.shape,i,s,u,o,l,c),h=new KT(d,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}var vke={kernelName:Nh,backendName:"webgl",kernelFunc:yke},xke=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},wke=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(a,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function kke(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=E.computePool3DInfo(s.shape,o,l,d,c,u),p=new wke(h);return n.runWebGLProgram(p,[a],s.dtype)}var Ske={kernelName:Gm,backendName:"webgl",kernelFunc:kke};function Ike(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;Lp([a,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:c}=r,u=E.computePool2DInfo(s.shape,o,l,1,c),d=new xke(u);return n.runWebGLProgram(d,[a],s.dtype)}var $ke={kernelName:Hm,backendName:"webgl",kernelFunc:Ike};function Cke(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:s,transposeB:o}=r;return _v({a,b:i,transposeA:s,transposeB:o,backend:n})}var Tke={kernelName:_u,backendName:"webgl",kernelFunc:Cke},Eke=class{constructor(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],E.assertAndGetBroadcastShape(e,t),E.assertAndGetBroadcastShape(e,n);let s="0.0";r!=null&&(E.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";a!=null&&(E.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(o,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}},Nke=class{constructor(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],E.assertAndGetBroadcastShape(e,t),E.assertAndGetBroadcastShape(e,n);let s="vec4(0.0)";r!=null&&(E.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";a!=null&&(E.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(o,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}},_ke=({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:a,variance:i,offset:s,scale:o}=e;k.assert(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),k.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),k.assert(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);let c=[r,a,i],u=null;s!=null&&(u=s.shape,c.push(s));let d=null;o!=null&&(d=o.shape,c.push(o));let h=Q().getBool("WEBGL_PACK_NORMALIZATION")?new Nke(r.shape,a.shape,i.shape,u,d,l):new Eke(r.shape,a.shape,i.shape,u,d,l);return t.runWebGLProgram(h,c,c[0].dtype)},Ake={kernelName:Ku,backendName:"webgl",kernelFunc:_ke},Rke=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=Rt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=Dke(this.rank),r,a=e.map((i,s)=>"sourceLoc.".concat(yS[s]," = start[").concat(s,"] + coords.").concat(yS[s],";"));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(a.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}},yS=["x","y","z","w","u","v"];function Dke(e){if(e===1)return"sourceLoc";if(e<=6)return yS.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}var Fke=class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=Rt(this.rank),n=Er("coords",this.rank),r=Er("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),i="getChannel(getSource(".concat(r.join(),"), ").concat(a,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(r[this.rank-1],";\n      }\n    "),o=this.rank===1?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((c,u)=>"start[".concat(u,"]")).join(),");"):e.map((c,u)=>"".concat(r[u]," = ").concat(n[u]," + start[").concat(u,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(o,"\n        setOutput(result);\n      }\n    ")}};function Mke(e,t,n,r){let a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=e.dtype;let o=Fn.computeFlatOffset(t,k.computeStrides(e.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function Hp(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r,[o,l]=Fn.parseSliceParams(a,i,s);if(Fn.assertParamsValid(a,o,l),k.sizeFromShape(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){let d=n.texData.get(a.dataId),h=$we(d.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,h)}let{isPacked:c}=n.texData.get(a.dataId),u=Fn.isSliceContinous(a.shape,o,l);if(c||!u){let d=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fke(l):new Rke(l),h=[o];return n.runWebGLProgram(d,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),Mke(a,o,l,n)}var Oke={kernelName:mp,backendName:"webgl",kernelFunc:Hp},Pke=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;k.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((y,v)=>y*v),l=E.getReshaped(a.shape,i,o),c=E.getPermuted(l.length,i.length),u=E.getReshapedPermuted(a.shape,i,o),d=E.getSliceBeginCoords(s,i.length),h=E.getSliceSize(u,s,i.length),p=[],f=we({inputs:{x:a},backend:n,attrs:{shape:l}}),m=Mr({inputs:{x:f},backend:n,attrs:{perm:c}}),g=we({inputs:{x:m},backend:n,attrs:{shape:u}}),b=Hp({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),b},Lke={kernelName:_h,backendName:"webgl",kernelFunc:Pke};function zke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=n.readSync(a.dataId),l=n.readSync(i.dataId),c=XW(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}var Bke={kernelName:Ah,backendName:"webgl",kernelFunc:zke},Wke="\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",Uke="\n  return float(int(a.r) & int(b.r));\n";function Vke(e){let{inputs:t,backend:n}=e,{a:r,b:a}=t,i=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Q().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||s===1){let l=n.texData.get(r.dataId).values,c=n.texData.get(a.dataId).values,[u,d]=Xxe(r.shape,a.shape,l,c,r.dtype),h=n.makeTensorInfo(d,r.dtype),p=n.texData.get(h.dataId);return p.values=u,h}let o;return i?o=new Vp(Wke,r.shape,a.shape,!1):o=new fu(Uke,r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}var jke={kernelName:Rh,backendName:"webgl",kernelFunc:Vke};function Hke(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=E.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var Gke={kernelName:qm,backendName:"webgl",kernelFunc:Hke},qke="return float(a != b);",cU=dr({opSnippet:qke,cpuKernelImpl:gwe,dtype:"bool"}),Kke={kernelName:np,backendName:"webgl",kernelFunc:cU};function Hg(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return ka({inputs:{x:a.complexTensorInfos.real},backend:n})}var Xke={kernelName:V0,backendName:"webgl",kernelFunc:Hg},Yke="return float(int(x));";function Jke(e,t){let n=new is(e.shape,Yke),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function vS(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return ka({inputs:{x:a},backend:n});let s=sn(a.shape),o=vS({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=ol({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),l}if(a.dtype==="complex64"){let s=Hg({inputs:{input:a},backend:n}),o=vS({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),o}if(!k.hasEncodingLoss(a.dtype,i)){let s=ka({inputs:{x:a},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){let s=n.texData.get(a.dataId).values,[o,l,c]=Yxe(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,c)}if(i==="int32")return Jke(a,n);if(i==="bool"){let s=n.makeTensorInfo([],"bool",k.getTypedArrayFromDType("bool",1)),o=cU({inputs:{a,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),o}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var Zke={kernelName:Au,backendName:"webgl",kernelFunc:vS},VR="return ceil(x);",Qke=ht({opSnippet:VR,packedOpSnippet:VR,cpuKernelImpl:Jxe}),eSe={kernelName:Ru,backendName:"webgl",kernelFunc:Qke},tSe=class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}},nSe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}};function rSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:s}=r,o;Q().getBool("WEBGL_PACK_CLIP")?o=new nSe(a.shape):o=new tSe(a.shape);let l=[[i],[s]];return n.runWebGLProgram(o,[a],a.dtype,l)}var aSe={kernelName:Zo,backendName:"webgl",kernelFunc:rSe},iSe=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}};function jR(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function sSe(e){let{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),i=new iSe(r.shape),s=[jR(r,a.complexTensorInfos.real),jR(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}var oSe={kernelName:Km,backendName:"webgl",kernelFunc:sSe},lSe=class{constructor(e){this.outputShape=[],this.outputShape=E.computeOutShape(e,1),this.variableNames=e.map((i,s)=>"T".concat(s));let t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];let n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<t.length;i++){let s=t[i-1];n.push("else if (yC < ".concat(t[i],") setOutput(getT").concat(i,"(yR, yC-").concat(s,"));"))}let r=t.length,a=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(a,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}},uSe=class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=E.computeOutShape(e,t);let n=this.outputShape,r=n.length,a=Rt(r),i=Er("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((f,m)=>"T".concat(m));let o=new Array(e.length-1);o[0]=e[0][t];for(let f=1;f<o.length;f++)o[f]=o[f-1]+e[f][t];let l=s[t],c=s.slice(-2),u=s.join(),d="if (".concat(l," < ").concat(o[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<o.length;f++){let m=o[f-1];d+="\n        if (".concat(l," < ").concat(o[f],"  && ").concat(l," >= ").concat(o[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(Ub(s,l,m),"),\n            vec2(").concat(Ub(c,l,m),"));\n        }")}let h=o.length,p=o[o.length-1];d+="\n        return getChannel(\n          getT".concat(h,"(").concat(Ub(s,l,p),"),\n          vec2(").concat(Ub(c,l,p),"));"),this.userCode="\n      float getValue(".concat(s.map(f=>"int "+f),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2]," &&\n            ").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}};function Ub(e,t,n){let r=e.indexOf(t);return e.map((a,i)=>i===r?"".concat(a," - ").concat(n):a).join()}function Jx(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return ka({inputs:{x:a.complexTensorInfos.imag},backend:n})}var cSe={kernelName:z0,backendName:"webgl",kernelFunc:Jx};function If(e,t,n){let r=e[0].dtype;if(r==="complex64"){let p=e.map(y=>Hg({inputs:{input:y},backend:n})),f=e.map(y=>Jx({inputs:{input:y},backend:n})),m=If(p,t,n),g=If(f,t,n),b=ol({inputs:{real:m,imag:g},backend:n});return p.forEach(y=>n.disposeIntermediateTensorInfo(y)),f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}let a=n.shouldExecuteOnCPU(e);if(r==="string"&&(a=!0),a){let p=e.map(x=>{let w=[-1,k.sizeFromShape(x.shape.slice(t))];return we({inputs:{x},backend:n,attrs:{shape:w}})}),f=p.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=E.computeOutShape(p.map(x=>x.shape),1),g=p[0].shape[0]===1,b=Zxe(f,m,r,g),y=E.computeOutShape(e.map(x=>x.shape),t),v=n.makeTensorInfo(y,r,b);return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}let i=e.filter(p=>k.sizeFromShape(p.shape)>0),s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let p=s?new is(e[0].shape,so):new bo(e[0].shape,so);return n.runWebGLProgram(p,e,r)}let o=Q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){let p=[];for(let m=0;m<i.length;m+=o){let g=i.slice(m,m+o);p.push(If(g,t,n))}let f=If(p,t,n);for(let m of p)n.disposeIntermediateTensorInfo(m);return f}if(s){let p=new uSe(i.map(f=>f.shape),t);return n.runWebGLProgram(p,i,r)}let{tensors2D:l,outShape:c}=dSe(i,t,n),u=new lSe(l.map(p=>p.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));let h=we({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function dSe(e,t,n){let r=E.computeOutShape(e.map(a=>a.shape),t);return{tensors2D:e.map(a=>we({inputs:{x:a},attrs:{shape:[-1,k.sizeFromShape(a.shape.slice(t))]},backend:n})),outShape:r}}function dU(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=k.parseAxisParam(a,t[0].shape)[0],s=t.map(c=>c.shape);E.assertParamsConsistent(s,i);let o=E.computeOutShape(t.map(c=>c.shape),i);if(k.sizeFromShape(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(c=>k.sizeFromShape(c.shape)>0);return l.length===1?ka({inputs:{x:l[0]},backend:n}):If(l,i,n)}var hSe={kernelName:Dh,backendName:"webgl",kernelFunc:dU},hU=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let i=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,f=e.inChannels%4,m=e.dataFormat==="channelsLast",g=m?1:2,b=m?2:3,y=m?3:1,v="",x="";n&&(r?v="float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?v="float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):v="\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");let w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(o,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(f===1,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(f===2,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(f===3,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}},pSe=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(a,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(o,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(f===1,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(f===2,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(f===3,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},pU=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wr(this.outputShape.length);let i=e.padInfo.left,s=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c,d="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)d+="\n           vec4 xTexelC".concat(m*2,";\n           int xTexelC").concat(m*2,"Ready;\n           vec4 xTexelC").concat(m*2+1,";\n           int xTexelC").concat(m*2+1,"Ready;\n           vec4 xC").concat(m,";");d+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<c;m++)d+="\n           xTexelC".concat(m*2," = vec4(0.0);\n           xTexelC").concat(m*2,"Ready = 0;\n           xTexelC").concat(m*2+1," = vec4(0.0);\n           xTexelC").concat(m*2+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");d+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){let g=m*2;if(d+="\n           xC = xCCorner + ".concat(g*o,";\n           "),s===1){if(g<c&&(i%2===1?(d+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),o===1&&g>0?d+="\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):d+="\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):d+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<c)){let b=i%2===0?k.nearestLargerEven(o):o;o%2===0&&i%2===1||o%2!==0&&i%2!==1?(d+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(b,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),o>1?d+="\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):d+="\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):b===1?d+="\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):d+="\n                     xCOffset = xC + ".concat(b,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<c&&(i%2===1?(d+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<c&&(d+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(d+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<c&&(d+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<c&&(d+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<c&&(d+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}d+="\n     }\n   ",d+="\n     }\n   ",d+="\n     }\n   ";let h="",p="";n&&(r?h="vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):a?h="vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):h="vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");let f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(d,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}},fSe=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=wr(this.outputShape.length);let{dataFormat:n}=t,r=Ur(),a=n==="channelsLast",i=a?1:2,s=a?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {"),l="";for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)l+="\n          blockIndex = rc.z + ".concat(u,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(o,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(a,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(c*2+u,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(c*2+u,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}};function Av(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function fU({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){let l=e.shape,c=r.texData.get(e.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,p=n.dataFormat==="channelsLast",f=!1,m=!1,g,b=[];if(i!=null){let y=Av(i.shape,p);y!=null&&(i=we({inputs:{x:i},backend:r,attrs:{shape:y}}),b.push(i))}if(a!=null){let y=Av(a.shape,p);y!=null&&(a=we({inputs:{x:a},backend:r,attrs:{shape:y}}),b.push(a))}if(!((d===1||h===1)&&u>sU)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&k.arraysEqual(c.shape.slice(-3),l.slice(-3))){let y=l[0]*l[1]*(l[2]+1),v={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},x=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,k.assert(Im(c.shape,v.shape),()=>"packed reshape ".concat(c.shape," to ").concat(v.shape," isn't free"));let w=we({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(w);let $=_v({a:v,b:w,backend:r,transposeA:f,transposeB:m,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),C=r.texData.get($.dataId);k.assert(C.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=x,C.shape=n.outShape,g=ka({inputs:{x:$},backend:r}),g.shape=n.outShape,b.push($)}else{let y=n.outHeight*n.outWidth,v=we({inputs:{x:e},backend:r,attrs:{shape:p?[n.batchSize,y,n.inChannels]:[n.batchSize,n.inChannels,y]}}),x=we({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),w=_v({a:p?v:x,b:p?x:v,transposeA:!p,transposeB:m,backend:r,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s});g=we({inputs:{x:w},backend:r,attrs:{shape:n.outShape}}),b.push(v),b.push(x),b.push(w)}for(let y of b)r.disposeIntermediateTensorInfo(y);return g}function mU({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:p}=n,f=p==="channelsLast",m=l*c*u,g=h*d,b=[n.batchSize,m,g],y=!0,v=!1,x=[];if(i!=null){let O=Av(i.shape,f);O!=null&&(i=we({inputs:{x:i},backend:r,attrs:{shape:O}}),x.push(i))}if(a!=null){let O=Av(a.shape,f);O!=null&&(a=we({inputs:{x:a},backend:r,attrs:{shape:O}}),x.push(a))}let w=we({inputs:{x:t},backend:r,attrs:{shape:[1,m,k.sizeFromShape(t.shape)/m]}});x.push(w);let $=new fSe(b,n),C=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram($,[e],"float32",C),A=we({inputs:{x:T},backend:r,attrs:{shape:b}});x.push(T),x.push(A);let D=a!=null,N=i!=null,I=o==="leakyrelu",M=o?$m(o,!0):null,P=new iU(f?A.shape:w.shape,f?w.shape:A.shape,f?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],y,v,D,M,N,I),z=f?[A,w]:[w,A];if(a&&z.push(a),N&&z.push(i),I){let O=r.makeTensorInfo([],"float32",k.createScalarValue(s,"float32"));z.push(O),x.push(O)}let j=r.runWebGLProgram(P,z,"float32"),K=we({inputs:{x:j},backend:r,attrs:{shape:n.outShape}});x.push(j);for(let O of x)r.disposeIntermediateTensorInfo(O);return K}function mSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=E.convertConv2DDataFormat(l),h=E.computeConv2DInfo(a.shape,i.shape,s,c,o,u,!1,d),p;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))p=fU({x:a,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&Q().getBool("WEBGL_EXP_CONV")){let m=new pU(h),g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(m,[a,i],"float32",g)}else if(Q().getBool("WEBGL_CONV_IM2COL"))p=mU({x:a,filter:i,convInfo:h,backend:n});else{let m=new hU(h);p=n.runWebGLProgram(m,[a,i],"float32")}let f=we({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}var gSe={kernelName:Du,backendName:"webgl",kernelFunc:mSe},bSe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},ySe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=i?1:2,c=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},vSe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(a,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},xSe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(o,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(a,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function wSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=E.convertConv2DDataFormat(l),h=E.computeConv2DInfo(a.shape,u,s,1,o,c,!1,d),p=new bSe(h);return n.runWebGLProgram(p,[a,i],"float32")}var kSe={kernelName:D0,backendName:"webgl",kernelFunc:wSe},SSe=class{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=wr(this.outputShape.length);let t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}};function ISe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=E.convertConv2DDataFormat(c),h=E.computeConv2DInfo(s,i.shape,o,1,l,u,!1,d);if(Q().getBool("WEBGL_PACK")&&d==="channelsLast"){let p=[[h.strideHeight,h.strideWidth]],f=new SSe(h);return n.runWebGLProgram(f,[a,i],"float32",p)}else{let p=new ySe(h);return n.runWebGLProgram(p,[a,i],"float32")}}var $Se={kernelName:Fu,backendName:"webgl",kernelFunc:ISe};function CSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=E.computeConv3DInfo(a.shape,i.shape,s,l,o),u=new pSe(c);return n.runWebGLProgram(u,[a,i],"float32")}var TSe={kernelName:Mu,backendName:"webgl",kernelFunc:CSe};function ESe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r,c=E.computeConv3DInfo(a.shape,l,s,1,o),u=new vSe(c);return n.runWebGLProgram(u,[a,i],"float32")}var NSe={kernelName:Fh,backendName:"webgl",kernelFunc:ESe};function _Se(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r,c=E.computeConv3DInfo(l,i.shape,o,1,s),u=new xSe(c);return n.runWebGLProgram(u,[a,i],"float32")}var ASe={kernelName:Mh,backendName:"webgl",kernelFunc:_Se},RSe=jp+"\n  return cos(x);\n",DSe="\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(Kc,"\n  return result;\n"),FSe=ht({opSnippet:RSe,packedOpSnippet:DSe}),MSe={kernelName:Ou,backendName:"webgl",kernelFunc:FSe},OSe="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",PSe=ht({opSnippet:OSe}),LSe={kernelName:Pu,backendName:"webgl",kernelFunc:PSe},zSe=class{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[i,s,o,l]=e,[c]=t,[u,d]=n;this.outputShape=[c,u,d,l];let h=r==="bilinear"?1:0,[p,f]=["".concat(s-1,".0"),"".concat(o-1,".0")],[m,g,b]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[y,v,x]=d>1?["".concat((o-1)/(d-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(y,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(v,";\n\n        float in_y = ").concat(b,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}},BSe=e=>{let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,u=new zSe(a.shape,i.shape,o,l,c);return n.runWebGLProgram(u,[a,i,s],"float32")},WSe={kernelName:Ph,backendName:"webgl",kernelFunc:BSe},Tm;(function(e){e.Prod="*",e.Sum="+"})(Tm||(Tm={}));var HR=class{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let a=this.outputShape.length,i=this.op===Tm.Prod?"1.0":"0.0",s=n?i:"getX(".concat(GR(a,"coords",this.op),")"),o=this.outputShape[this.outputShape.length-1],l="",c="";n?(l=r?"end != ".concat(o-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(o):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Rt(a)," coords = getOutputCoords();\n        int end = ").concat(qR(a,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(qR(a,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(GR(a,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}};function GR(e,t,n){if(e===1)return"".concat(t);if(e===2)return"".concat(t,".x, ").concat(t,".y");if(e===3)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(e===4)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function qR(e,t,n){if(e===1)return"".concat(t);if(e===2)return"".concat(t,".y");if(e===3)return"".concat(t,".z");if(e===4)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function gU(e,t,n,r,a,i){let s=t.shape.length,o=E.getAxesPermutation([r],s),l=t;o!=null&&(l=Mr({inputs:{x:t},backend:n,attrs:{perm:o}}));let c=E.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));let u=l.shape[c],d=ka({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){let p=new HR(e,l.shape,!1,i),f=[[h]],m=d;d=n.runWebGLProgram(p,[d],d.dtype,f),n.disposeIntermediateTensorInfo(m)}if(a){let h=new HR(e,l.shape,a,i),p=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(p)}if(o!=null){let h=E.getUndoAxesPermutation(o),p=Mr({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),p}return d}function USe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return gU(Tm.Prod,a,n,i,s,o)}var VSe={kernelName:Oh,backendName:"webgl",kernelFunc:USe};function jSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return gU(Tm.Sum,a,n,i,s,o)}var HSe={kernelName:Lu,backendName:"webgl",kernelFunc:jSe};function GSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(a.shape.length===1){let l=n.readSync(a.dataId),c=n.readSync(i.dataId),u=XW(l,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}else if(a.shape.length===2){let l=n.bufferSync(a),c=n.bufferSync(i),u=Kxe(l,c,s,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}var qSe={kernelName:Xm,backendName:"webgl",kernelFunc:GSe},KSe=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function XSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=s==="NHWC"?a.shape[1]:a.shape[2],c=s==="NHWC"?a.shape[2]:a.shape[3],u=s==="NHWC"?a.shape[3]:a.shape[1],d=l*i,h=c*i,p=u/(i*i),f=s==="NHWC"?[o,d,h,p]:[o,p,d,h],m=new KSe(f,i,s);return n.runWebGLProgram(m,[a],a.dtype)}var YSe={kernelName:Lh,backendName:"webgl",kernelFunc:XSe},bU=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wr(this.outputShape.length);let i=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels,l="",c="";n&&(r?l="float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?l="float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):l="\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");let u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}},yU=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wr(this.outputShape.length);let i=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+="\n          vec4 xTexelC".concat(g*2,";\n          int xTexelC").concat(g*2,"Ready;\n          vec4 xTexelC").concat(g*2+1,";\n          int xTexelC").concat(g*2+1,"Ready;\n          vec4 xC").concat(g,";");h+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let g=0;g<u;g++)h+="\n          xTexelC".concat(g*2," = vec4(0.0);\n          xTexelC").concat(g*2,"Ready = 0;\n          xTexelC").concat(g*2+1," = vec4(0.0);\n          xTexelC").concat(g*2+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(d+1)/2;g++){let b=g*2;if(h+="\n          xC = xCCorner + ".concat(b*l,";\n          "),o===1){if(b<u&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n              "),l===1&&b>0?h+="\n                xC".concat(b," = vec4(xTexelC").concat(b-2,".zw, xTexelC").concat(b,".xy);\n                "):h+="\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(b," = vec4(previous.zw, xTexelC").concat(b,".xy);\n                  } else {\n                    xC").concat(b," = vec4(0.0, 0.0, xTexelC").concat(b,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                xC").concat(b," = xTexelC").concat(b,";\n                "),b+1<u)){let y=s%2===0?k.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                    xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(b+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(b+1,"Ready = 1;\n                  }\n                  "),l>1?h+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(b+1," = vec4(previous.zw, xTexelC").concat(b+1,".xy);\n                    } else {\n                     xC").concat(b+1," = vec4(0.0, 0.0, xTexelC").concat(b+1,".xy);\n                    }\n                    "):h+="\n                    xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".xy);\n                    ")):y===1?h+="\n                    xC".concat(b+1," = xTexelC").concat(b,";\n                    "):h+="\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                      xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(b+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(b+1,"Ready = 1;\n                    }\n\n                    xC").concat(b+1," = xTexelC").concat(b+1,";\n                    ")}}else b<u&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                  xTexelC").concat(b+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(b+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b+1,"Ready = 1;\n                }\n\n                xC").concat(b," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n              "),b+1<u&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(b+1," = vec4(xTexelC").concat(b+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                  xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(b+1,"Ready = 1;\n                }\n\n                xC").concat(b," = vec4(\n                  xTexelC").concat(b,".xy, xTexelC").concat(b+1,".xy);\n              "),b+1<u&&(h+="\n                  xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n                "))));b<u&&(h+="\n            wTexel = getW(r, ".concat(b,", d1, q);\n            dotProd += xC").concat(b," * vec4(wTexel.xz, wTexel.xz);\n          "),b+1<u&&(h+="\n              wTexel = getW(r, ".concat(b+1,", d1, q);\n              dotProd += xC").concat(b+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(r?p="vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?p="vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):p="vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");let m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}};function JSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r,u=l;u==null&&(u=[1,1]),k.assert(E.eitherStridesOrDilationsAreOne(s,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(u,"'"));let d=E.computeConv2DInfo(a.shape,i.shape,s,u,o,c,!0),h;Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new yU(d):h=new bU(d);let p=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",p)}var ZSe={kernelName:zu,backendName:"webgl",kernelFunc:JSe},QSe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},eIe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(o,"; dm++) {\n              int d2 = d1 * ").concat(o," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function tIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,d=E.computeConv2DInfo(a.shape,u,s,o,l,c,!0),h=new QSe(d);return n.runWebGLProgram(h,[a,i],"float32")}var nIe={kernelName:F0,backendName:"webgl",kernelFunc:tIe};function rIe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,d=E.computeConv2DInfo(u,i.shape,s,o,l,c,!0),h=new eIe(d);return n.runWebGLProgram(h,[a,i],"float32")}var aIe={kernelName:M0,backendName:"webgl",kernelFunc:rIe},iIe=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}};function sIe(e){let{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],i=k.sizeFromShape(r.shape),s=we({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new iIe(i),l=n.runWebGLProgram(o,[s],s.dtype),c=we({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}var oIe={kernelName:Ym,backendName:"webgl",kernelFunc:sIe},lIe=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:c}=e,{top:u,left:d}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(o,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}};function uIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=E.computeDilation2DInfo(a.shape,i.shape,s,o,"NHWC",l),u,d=new lIe(c);u=n.runWebGLProgram(d,[a,i],"float32");let h=we({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}var cIe={kernelName:Bu,backendName:"webgl",kernelFunc:uIe};function dIe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=E.decodeEinsumEquation(a,i.length);E.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=E.getEinsumComputePath(o,l),d=u.length,h=null,p=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:b,expandDims:y}=E.getEinsumPermutation(p,l[g]),v;E.isIdentityPermutation(b)?v=i[g]:(v=Mr({inputs:{x:i[g]},backend:n,attrs:{perm:b}}),f.push(v));let x=v.shape.slice();for(let w=0;w<y.length;++w)x.splice(y[w],0,1);k.arraysEqual(v.shape,x)||(v=we({inputs:{x:v},backend:n,attrs:{shape:x}}),f.push(v)),h===null?h=v:(h=qT({inputs:{a:v,b:h},backend:n}),f.push(h))}m<d-1&&(c[m]>=0&&(h=Yx({inputs:{x:h},backend:n,attrs:{axis:c[m]-(s.length-p),keepDims:!1}}),f.push(h)),p--)}for(let m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}var hIe={kernelName:O0,backendName:"webgl",kernelFunc:dIe},pIe="return (x >= 0.0) ? x : (exp(x) - 1.0);",fIe="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",mIe=ht({opSnippet:pIe,packedOpSnippet:fIe}),gIe={kernelName:Uu,backendName:"webgl",kernelFunc:mIe},bIe="return (b >= 0.0) ? a : a * (b + 1.0);",yIe="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",vIe=e=>{let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(yIe,r.shape,a.shape):new fu(bIe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},xIe={kernelName:zh,backendName:"webgl",kernelFunc:vIe},wIe="\n  return vec4(equal(a, b));\n",kIe="return float(a == b);",SIe=dr({opSnippet:kIe,packedOpSnippet:wIe,dtype:"bool",cpuKernelImpl:Qxe}),IIe={kernelName:Bh,backendName:"webgl",kernelFunc:SIe},$Ie='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(E.ERF_P,";\n  float a1 = ").concat(E.ERF_A1,";\n  float a2 = ").concat(E.ERF_A2,";\n  float a3 = ").concat(E.ERF_A3,";\n  float a4 = ").concat(E.ERF_A4,";\n  float a5 = ").concat(E.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n"),CIe=ht({opSnippet:$Ie}),TIe={kernelName:Vu,backendName:"webgl",kernelFunc:CIe},EIe=jp+"\n  return exp(x);\n",NIe="\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",vU=ht({opSnippet:EIe,packedOpSnippet:NIe,cpuKernelImpl:ewe,dtype:"float32"}),_Ie={kernelName:ju,backendName:"webgl",kernelFunc:vU};function xS(e){let{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:i}=t,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(k.assert(-(s+1)<=a,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+a+1),o.splice(l,0,1),we({inputs:{x:i},backend:r,attrs:{shape:o}})}var AIe={kernelName:Wh,backendName:"webgl",kernelFunc:xS},KR="return exp(x) - 1.0;",RIe=ht({opSnippet:KR,packedOpSnippet:KR,cpuKernelImpl:twe}),DIe={kernelName:Hu,backendName:"webgl",kernelFunc:RIe},XR=class{constructor(e,t,n){this.variableNames=["real","imag"];let r=t[1];this.outputShape=t;let a=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=n?"".concat(r,".0"):"1.0",s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));this.userCode="\n      const float exponentMultiplier = ".concat(a,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(s,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}};function xU(e,t,n){let r=n.texData.get(e.dataId),a=k.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],s=a/i,o=we({inputs:{x:e},backend:n,attrs:{shape:[s,i]}}),l=o.shape,c=new XR("real",l,t),u=new XR("imag",l,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),p=n.runWebGLProgram(u,d,"float32"),f=ol({inputs:{real:h,imag:p},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p);let m=we({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(f),m}function FIe(e){let{inputs:t,backend:n}=e,{input:r}=t;return xU(r,!1,n)}var MIe={kernelName:P0,backendName:"webgl",kernelFunc:FIe},OIe=class{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}};function Gg(e){let{backend:t,attrs:n}=e,{shape:r,value:a}=n,{dtype:i}=n;if(i=i||k.inferDtype(a),i==="string"){let s=k.getArrayFromDType(i,k.sizeFromShape(r));return s.fill(a),t.makeTensorInfo(r,i,s)}else{let s=new OIe(r,a),o=[[a]];return t.runWebGLProgram(s,[],i,o)}}var PIe={kernelName:Jm,backendName:"webgl",kernelFunc:Gg},LIe=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}},zIe={kernelName:Uh,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,a=new LIe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},YR="return floor(x);",BIe=ht({opSnippet:YR,packedOpSnippet:YR,cpuKernelImpl:nwe}),WIe={kernelName:Gu,backendName:"webgl",kernelFunc:BIe},UIe="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",VIe="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",jIe=dr({opSnippet:UIe,packedOpSnippet:VIe,dtype:"int32"}),HIe={kernelName:qu,backendName:"webgl",kernelFunc:jIe},GIe=class{constructor(e){this.variableNames=["A"];let t=Ur(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}},qIe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=Ur(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},KIe={kernelName:ov,backendName:"webgl",kernelFunc:XIe},ed,u1=Q().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function XIe(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:a}=t,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[c,l],d=[c,l,i];if(o||s){let m=Q().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ed==null||m!==u1)&&(u1=m,ed=document.createElement("canvas").getContext("2d",{willReadFrequently:u1})),ed.canvas.width=l,ed.canvas.height=c,ed.drawImage(a,0,0,l,c),a=ed.canvas}let h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=Oa.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);let p=Q().getBool("WEBGL_PACK")?new qIe(d):new GIe(d),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}function YIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=E.convertConv2DDataFormat(u),g=E.computeConv2DInfo(a.shape,i.shape,l,d,c,h,!1,m),b,y=[],v=s!=null,x=o!=null,w=p==="leakyrelu",$=()=>{let T=[a,i],A=(D,N)=>{if(N==="NCHW"&&D.shape.length===1&&D.shape[0]!==1){let I=we({inputs:{x:D},backend:n,attrs:{shape:[D.shape[0],1,1]}});return y.push(I),I}return D};if(v&&T.push(A(s,u)),x&&T.push(A(o,u)),w){let D=n.makeTensorInfo([],"float32",k.createScalarValue(f,"float32"));T.push(D),y.push(D)}return T};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))b=fU({x:a,filter:i,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else if(g.strideWidth<=2&&m==="channelsLast"&&Q().getBool("WEBGL_EXP_CONV")){let T=p?$m(p,!0):null,A=new pU(g,v,T,x,w),D=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=$();b=n.runWebGLProgram(A,N,"float32",D)}else if(Q().getBool("WEBGL_CONV_IM2COL"))b=mU({x:a,filter:i,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{let T=p?$m(p,!1):null,A=new hU(g,v,T,x,w),D=$();b=n.runWebGLProgram(A,D,"float32")}let C=we({inputs:{x:b},backend:n,attrs:{shape:g.outShape}});return y.push(b),y.forEach(T=>n.disposeIntermediateTensorInfo(T)),C}var JIe={kernelName:Zl,backendName:"webgl",kernelFunc:YIe};function ZIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=[],m=u;m==null&&(m=[1,1]),k.assert(E.eitherStridesOrDilationsAreOne(l,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(l," and dilations '").concat(m,"'"));let g=E.computeConv2DInfo(a.shape,i.shape,l,m,c,d,!0),b=Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=h?$m(h,b):null,v=[a,i],x=s!=null,w=o!=null,$=h==="leakyrelu";if(x&&v.push(s),w&&v.push(o),$){let D=n.makeTensorInfo([],"float32",k.createScalarValue(p,"float32"));v.push(D),f.push(D)}let C;b?C=new yU(g,x,y,w,$):C=new bU(g,x,y,w,$);let T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],A=n.runWebGLProgram(C,v,"float32",T);return f.forEach(D=>n.disposeIntermediateTensorInfo(D)),A}var QIe={kernelName:Ql,backendName:"webgl",kernelFunc:ZIe},e$e=class{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let a=Rt(n.length),i="\n    int index;";for(let s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(a," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}};function t$e(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=a.shape,s=i[i.length-1],o=k.sizeFromShape(r.shape),[l,c,u,d]=E.prepareAndValidate(r,a),h=we({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),p=we({inputs:{x:r},backend:n,attrs:{shape:[k.sizeFromShape(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){let b=n.readSync(a.dataId),y=n.bufferSync(r),v=rwe(b,y,r.dtype,c,s,u,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,v.values)}let f=new e$e(s,d,[c,u],r.shape),m=n.runWebGLProgram(f,[p,h],p.dtype),g=we({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}var n$e={kernelName:jh,backendName:"webgl",kernelFunc:t$e},r$e=class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=Rt(this.rank),r=a$e(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}};function a$e(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<e.length;a++)a===2?r.push("index"):r.push("".concat(n[a]));return r.join()}function wU(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r,l=k.parseAxisParam(s,a.shape)[0];if(Q().get("DEBUG")){let y=n.readSync(i.dataId),v=a.shape[l];for(let x=0;x<y.length;++x){let w=y[x];k.assert(w<=v-1&&w>=0,()=>"GatherV2: the index value ".concat(w," is not in [0, ").concat(v-1,"]"))}}let c=E.segment_util.collectGatherOpShapeInfo(a,i,l,o),u=k.sizeFromShape(i.shape),d=[],h=we({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=we({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);let f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){let y=n.bufferSync(p),v=n.bufferSync(h),x=awe(v,y,f);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,x.dtype,x.values)}let m=new r$e(h.shape,f),g=n.runWebGLProgram(m,[h,p],h.dtype);d.push(g);let b=we({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),b}var i$e={kernelName:Vh,backendName:"webgl",kernelFunc:wU},s$e="return float(a > b);",o$e="\n  return vec4(greaterThan(a, b));\n",l$e=dr({opSnippet:s$e,packedOpSnippet:o$e,cpuKernelImpl:iwe,dtype:"bool"}),u$e={kernelName:Hh,backendName:"webgl",kernelFunc:l$e},c$e="return float(a >= b);",d$e="\n  return vec4(greaterThanEqual(a, b));\n",h$e=dr({opSnippet:c$e,packedOpSnippet:d$e,dtype:"bool",cpuKernelImpl:swe}),p$e={kernelName:Xu,backendName:"webgl",kernelFunc:h$e};function f$e(e){let{inputs:t,backend:n}=e,{input:r}=t;return xU(r,!0,n)}var m$e={kernelName:L0,backendName:"webgl",kernelFunc:f$e},g$e="return float(!isnan(x) && !isinf(x));",b$e=ht({opSnippet:g$e,dtype:"bool"}),y$e={kernelName:Ju,backendName:"webgl",kernelFunc:b$e},v$e="return float(isinf(x));",x$e=ht({opSnippet:v$e,dtype:"bool"}),w$e={kernelName:Zu,backendName:"webgl",kernelFunc:x$e},k$e="return float(isnan(x));",S$e=ht({opSnippet:k$e,dtype:"bool"}),I$e={kernelName:Qu,backendName:"webgl",kernelFunc:S$e},$$e="return float(a < b);",C$e="\n  return vec4(lessThan(a, b));\n",T$e=dr({opSnippet:$$e,packedOpSnippet:C$e,cpuKernelImpl:owe,dtype:"bool"}),E$e={kernelName:Gh,backendName:"webgl",kernelFunc:T$e},N$e="return float(a <= b);",_$e="\n  return vec4(lessThanEqual(a, b));\n",A$e=dr({opSnippet:N$e,packedOpSnippet:_$e,cpuKernelImpl:lwe,dtype:"bool"}),R$e={kernelName:qh,backendName:"webgl",kernelFunc:A$e};function D$e(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=uwe(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}var F$e={kernelName:Kh,backendName:"webgl",kernelFunc:D$e},M$e=jp+"\n  return x < 0.0 ? 0./0. : log(x);\n",O$e="\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",P$e=ht({opSnippet:M$e,packedOpSnippet:O$e,cpuKernelImpl:cwe}),L$e={kernelName:tc,backendName:"webgl",kernelFunc:P$e},z$e=jp+"\n  return log(1.0 + x);\n",B$e=ht({opSnippet:z$e}),W$e={kernelName:nc,backendName:"webgl",kernelFunc:B$e},U$e="return float(a >= 1.0 && b >= 1.0);",V$e="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",j$e=dr({opSnippet:U$e,packedOpSnippet:V$e,dtype:"bool"}),H$e={kernelName:Xh,backendName:"webgl",kernelFunc:j$e},G$e="return float(!(x >= 1.0));",q$e=ht({opSnippet:G$e}),K$e={kernelName:Yh,backendName:"webgl",kernelFunc:q$e},X$e="return float(a >= 1.0 || b >= 1.0);",Y$e="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",J$e=dr({opSnippet:X$e,packedOpSnippet:Y$e,dtype:"bool"}),Z$e={kernelName:Jh,backendName:"webgl",kernelFunc:J$e},Q$e=class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];let i=t,s=e[3]-1;this.outputShape=e;let o,l="float(".concat(n,") + float(").concat(r,") * sum");a===.5?o="inversesqrt(".concat(l,")"):a===1?o="1.0/(".concat(l,")"):o="exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")}},e2e=class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let i=t,s=e[3]-1;this.outputShape=e;let o,l="float(".concat(n,") + float(").concat(r,") * sum");a===.5?o="inversesqrt(".concat(l,")"):a===1?o="1.0/(".concat(l,")"):o="exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")}},t2e=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r,c=Q().getBool("WEBGL_PACK_NORMALIZATION")?new e2e(a.shape,i,s,o,l):new Q$e(a.shape,i,s,o,l);return n.runWebGLProgram(c,[a],a.dtype)},n2e={kernelName:rc,backendName:"webgl",kernelFunc:t2e},r2e=class{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(a,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(a,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}},a2e=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r,d=new r2e(a.shape,o,l,c,u);return n.runWebGLProgram(d,[a,i,s],a.dtype)},i2e={kernelName:Zh,backendName:"webgl",kernelFunc:a2e};function s2e(e,t,n,r){let a=k.sizeFromShape(t),i=k.sizeFromShape(e.shape)/a,s=we({inputs:{x:e},attrs:{shape:[i,a]},backend:r}),o=Xc(s,e.dtype,"max",r),l=we({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}function kU(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),c=l,u=E.getAxesPermutation(c,o),d=u!=null,h=n.shouldExecuteOnCPU([a]),p=a;if(d){if(h){let y=n.texData.get(p.dataId).values,v=new Array(o);for(let $=0;$<v.length;$++)v[$]=a.shape[u[$]];let x=HT(y,a.shape,a.dtype,u,v);p=n.makeTensorInfo(v,a.dtype);let w=n.texData.get(p.dataId);w.values=x}else p=Xx(a,u,n);c=E.getInnerMostAxes(c.length,o)}E.assertAxesAreInnerMostDims("max",c,o);let[f,m]=E.computeOutAndReduceShapes(p.shape,c),g=f;s&&(g=E.expandShapeToKeepDim(f,l));let b;if(h){let y=n.texData.get(p.dataId).values,v=dwe(y,k.sizeFromShape(m),g,a.dtype);b=n.makeTensorInfo(g,a.dtype);let x=n.texData.get(b.dataId);x.values=v}else b=s2e(p,m,g,n);return d&&n.disposeIntermediateTensorInfo(p),b}var o2e={kernelName:ac,backendName:"webgl",kernelFunc:kU},l2e=GT+"\n  return max(a, b);\n",u2e="\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Kc+"\n  return result;\n",c2e=dr({opSnippet:l2e,packedOpSnippet:u2e,cpuKernelImpl:hwe}),d2e={kernelName:ic,backendName:"webgl",kernelFunc:c2e};function h2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;Lp(a,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,c=1;k.assert(E.eitherStridesOrDilationsAreOne(s,c),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(c,"'"));let u=E.computePool2DInfo(a.shape,i,s,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))return ka({inputs:{x:a},backend:n});let d=new Cm(u,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}var p2e={kernelName:sc,backendName:"webgl",kernelFunc:h2e};function f2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=E.computePool3DInfo(a.shape,i,s,u,o,c,l),h=new KT(d,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}var m2e={kernelName:Qh,backendName:"webgl",kernelFunc:f2e},g2e=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,s=a-1-e.padInfo.top,o=i-1-e.padInfo.left,l=a*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},b2e=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=o-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=o*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(o,";\n           wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function y2e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=E.computePool3DInfo(s.shape,o,l,d,c,u),p=new KT(h,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new b2e(h),g=n.runWebGLProgram(m,[a,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}var v2e={kernelName:Qm,backendName:"webgl",kernelFunc:y2e};function x2e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;Lp([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=E.computePool2DInfo(o.shape,l,c,1,u,d),p=!0,f=new Cm(h,"max",p),m=n.runWebGLProgram(f,[o],o.dtype),g=new g2e(h),b=n.runWebGLProgram(g,[a,m],o.dtype);return n.disposeIntermediateTensorInfo(m),b}var w2e={kernelName:Zm,backendName:"webgl",kernelFunc:x2e};function k2e(e,t,n,r){let a=new Cm(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");a=new Cm(n,"max",!0,!0,t);let s=r.runWebGLProgram(a,[e],"float32");return[i,s]}var S2e={kernelName:eg,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=t,l=n;k.assert(r.shape.length===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,"."));let c=[1,1];k.assert(E.eitherStridesOrDilationsAreOne(i,c),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(c,"'"));let u=E.computePool2DInfo(r.shape,a,i,c,s),[d,h]=k2e(r,o,u,l);return[d,h]}};function I2e(e,t,n,r){let a=k.sizeFromShape(t),i=k.sizeFromShape(e.shape)/a,s=we({inputs:{x:e},attrs:{shape:[i,a]},backend:r}),o=Xc(s,"float32","mean",r),l=we({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}var $2e={kernelName:oc,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:a,axis:i}=t,s=n,o=r.shape.length,l=k.parseAxisParam(i,r.shape),c=l,u=E.getAxesPermutation(c,o),d=u!=null,h=s.shouldExecuteOnCPU([r]),p=[],f=r;if(d){if(h){let v=s.texData.get(f.dataId).values,x=new Array(o);for(let C=0;C<x.length;C++)x[C]=r.shape[u[C]];let w=HT(v,r.shape,r.dtype,u,x);f=s.makeTensorInfo(x,r.dtype);let $=s.texData.get(f.dataId);$.values=w}else f=Xx(r,u,s);p.push(f),c=E.getInnerMostAxes(c.length,o)}E.assertAxesAreInnerMostDims("sum",c,o);let[m,g]=E.computeOutAndReduceShapes(f.shape,c),b=m;a&&(b=E.expandShapeToKeepDim(m,l));let y=I2e(f,g,b,s);for(let v of p)s.disposeIntermediateTensorInfo(v);return y}};function C2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),c=l,u=E.getAxesPermutation(c,o),d=a;u!=null&&(d=Mr({inputs:{x:a},backend:n,attrs:{perm:u}}),c=E.getInnerMostAxes(c.length,a.shape.length)),E.assertAxesAreInnerMostDims("min",c,o);let[h,p]=E.computeOutAndReduceShapes(d.shape,c),f=k.sizeFromShape(p),m=we({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}}),g=Xc(m,m.dtype,"min",n),b;if(s){let y=E.expandShapeToKeepDim(h,l);b=we({inputs:{x:g},backend:n,attrs:{shape:y}})}else b=we({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),b}var T2e={kernelName:lc,backendName:"webgl",kernelFunc:C2e},E2e=GT+"\n  return min(a, b);\n",N2e="\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Kc+"\n  return result;\n",_2e=dr({opSnippet:E2e,packedOpSnippet:N2e,cpuKernelImpl:pwe}),A2e={kernelName:uc,backendName:"webgl",kernelFunc:_2e},R2e=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((c,u)=>c[0]+e[u]+c[1]);let r=e.length,a=Rt(r),i=t.map(c=>c[0]).join(","),s=t.map((c,u)=>c[0]+e[u]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l=n==="reflect"?0:1;if(r===1){this.userCode="\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ");return}this.userCode="\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(a," coords = outC - start;\n        setOutput(getX(").concat(o,"));\n      }\n    ")}},D2e=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((p,f)=>p[0]+e[f]+p[1]);let r=e.length,a=Rt(r),i=t.map(p=>p[0]).join(","),s=t.map((p,f)=>p[0]+e[f]).join(","),o=Er("rc",r),l=Er("source",r),c="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=r===1?"source":"vec2(".concat(l.slice(-2).join(),")"),d=n==="reflect"?0:1,h="";if(r===1){let p="\n        ".concat(a," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{let p="\n        ".concat(a," source = rc;\n        ").concat(a," lt = ").concat(a,"(lessThan(source, start));\n        ").concat(a," gte = ").concat(a,"(greaterThanEqual(source, end));\n        ").concat(a," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(o[r-2]," += 1;\n        if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(p,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(o[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(p,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}},F2e=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:a,mode:i}=n,s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new D2e(r.shape,a,i):new R2e(r.shape,a,i);return t.runWebGLProgram(s,[r],r.dtype)},M2e={kernelName:cc,backendName:"webgl",kernelFunc:F2e},O2e="if (b == 0.0) return NAN;\n  return mod(a, b);",P2e="\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+Kc+"\n  return result;\n",L2e=dr({opSnippet:O2e,packedOpSnippet:P2e}),z2e={kernelName:dc,backendName:"webgl",kernelFunc:L2e},B2e=class{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}},W2e="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",U2e="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",SU=dr({opSnippet:W2e,packedOpSnippet:U2e,checkOutOfBounds:!0}),V2e={kernelName:Wu,backendName:"webgl",kernelFunc:SU},JR="return a - b;",IU=dr({opSnippet:JR,packedOpSnippet:JR,supportsComplex:!0,cpuKernelImpl:Fwe}),j2e={kernelName:Oc,backendName:"webgl",kernelFunc:IU};function $U(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=k.parseAxisParam([i],a.shape),o=kU({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=E.expandShapeToKeepDim(o.shape,s),c=we({inputs:{x:o},backend:n,attrs:{shape:l}}),u=IU({inputs:{a,b:c},backend:n}),d=vU({inputs:{x:u},backend:n}),h=Yx({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),p=we({inputs:{x:h},backend:n,attrs:{shape:l}}),f=SU({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}var H2e={kernelName:Fc,backendName:"webgl",kernelFunc:$U};function G2e(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r,l=o?a:$U({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new B2e(c,u,i),h=[[s]],p=n.runWebGLProgram(d,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),p}var q2e={kernelName:ep,backendName:"webgl",kernelFunc:G2e},K2e=fi+"\n  return -x;\n",X2e="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";function Y2e(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){let i=n.texData.get(r.dataId),[s,o]=mwe(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let a;return Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new bo(r.shape,X2e):a=new is(r.shape,K2e),n.runWebGLProgram(a,[r],r.dtype)}var J2e={kernelName:tp,backendName:"webgl",kernelFunc:Y2e},Z2e=bs.nonMaxSuppressionV3Impl;function Q2e(e){E.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=Z2e(c,u,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var eCe={kernelName:rp,backendName:"webgl",kernelFunc:Q2e},tCe=bs.nonMaxSuppressionV4Impl;function nCe(e){E.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(a.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:p}=tCe(u,d,s,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}var rCe={kernelName:ap,backendName:"webgl",kernelFunc:nCe},aCe=bs.nonMaxSuppressionV5Impl;function iCe(e){E.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(a.dataId),d=n.readSync(i.dataId),h=s,p=o,f=l,m=c,{selectedIndices:g,selectedScores:b}=aCe(u,d,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var sCe={kernelName:ip,backendName:"webgl",kernelFunc:iCe},oCe=class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}},lCe=e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,c=k.sizeFromShape(a.shape),u=new oCe(c,s,o,l),d=we({inputs:{x:a},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);let p=[...a.shape,s],f=we({inputs:{x:h},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(h),f},uCe={kernelName:pc,backendName:"webgl",kernelFunc:lCe};function Rv(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){let a=Hg({inputs:{input:r},backend:n}),i=Rv({inputs:{x:a},backend:n}),s=Jx({inputs:{input:r},backend:n}),o=Rv({inputs:{x:s},backend:n}),l=ol({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return Gg({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}var cCe={kernelName:Ip,backendName:"webgl",kernelFunc:Rv};function CU(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let a=Hg({inputs:{input:r},backend:n}),i=CU({inputs:{x:a},backend:n}),s=Jx({inputs:{input:r},backend:n}),o=Rv({inputs:{x:s},backend:n}),l=ol({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return Gg({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}var dCe={kernelName:sp,backendName:"webgl",kernelFunc:CU};function hCe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(t.length===1)return xS({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(u=>{k.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),k.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(u=>{let d=xS({inputs:{input:u},backend:n,attrs:{dim:a}});return o.push(d),d}),c=dU({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}var pCe={kernelName:op,backendName:"webgl",kernelFunc:hCe},fCe=class{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((l,c)=>l[0]+e[c]+l[1]);let r=e.length,a=Rt(r),i=t.map(l=>l[0]).join(","),s=t.map((l,c)=>l[0]+e[c]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode="\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ");return}this.userCode="\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(a," coords = outC - start;\n          setOutput(getX(").concat(o,"));\n        }\n      }\n    ")}},mCe=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((f,m)=>f[0]+e[m]+f[1]);let r=e.length,a=Rt(r),i=t.map(f=>f[0]).join(","),s=t.map((f,m)=>f[0]+e[m]).join(","),o=Er("rc",r),l=Er("source",r),c="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=r===1?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(a," rc = outputLoc;"),"".concat(o[r-1]," += 1;\n       if(").concat(c,") {\n      "),r===1?"":"}\n       rc = outputLoc;\n       ".concat(o[r-2]," += 1;\n       if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {"),r===1?"":"  ".concat(o[r-1]," += 1;\n         if(").concat(c,") {")],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="";for(let f=0,m=r===1?2:4;f<m;f++)p+="\n        ".concat(d[f],"\n        if (").concat(h,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(a," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=r===1?"} ":"}}",this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}},TU=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;if(k.sizeFromShape(a.shape)===0){let c=i.map((u,d)=>u[0]+a.shape[d]+u[1]);return Gg({backend:n,attrs:{shape:c,value:s,dtype:a.dtype}})}let o=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mCe(a.shape,i,s):new fCe(a.shape,i,s),l=[[s]];return n.runWebGLProgram(o,[a],a.dtype,l)},gCe={kernelName:fc,backendName:"webgl",kernelFunc:TU},bCe="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",yCe="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+Kc+"\n  return result;\n",vCe=dr({opSnippet:bCe,packedOpSnippet:yCe}),xCe={kernelName:mc,backendName:"webgl",kernelFunc:vCe};function wCe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=[],c=k.parseAxisParam(i,a.shape),u=c,d=E.getAxesPermutation(u,o),h=a;d!=null&&(h=Mr({inputs:{x:a},backend:n,attrs:{perm:d}}),u=E.getInnerMostAxes(u.length,o),l.push(h)),E.assertAxesAreInnerMostDims("prod",u,o);let p;if(n.shouldExecuteOnCPU([h])){let f=n.texData.get(h.dataId).values,{outVals:m,outShape:g,outDtype:b}=bwe(h.shape,h.dtype,f,u);p=n.makeTensorInfo(g,b,m)}else{let[f,m]=E.computeOutAndReduceShapes(h.shape,u),g=k.sizeFromShape(m),b=we({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),y=H0(a.dtype),v=Xc(b,y,"prod",n);p=we({inputs:{x:v},backend:n,attrs:{shape:f}}),l.push(b),l.push(v)}if(s){l.push(p);let f=E.expandShapeToKeepDim(p.shape,c);p=we({inputs:{x:p},backend:n,attrs:{shape:f}})}return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),p}var kCe={kernelName:bc,backendName:"webgl",kernelFunc:wCe};function SCe(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:o}=r,l=a.map(b=>n.readSync(b.dataId)),c=a.map(b=>b.shape),u=n.readSync(i.dataId),d=n.readSync(s.dataId),[h,p,f]=ywe(l,c,u,i.shape,i.dtype,d,s.shape,o),m=h.map(b=>n.makeTensorInfo([b.length],"int32",b)),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}var ICe={kernelName:B0,backendName:"webgl",kernelFunc:SCe};function $Ce(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=vwe(s,r.shape,r.dtype,o,a.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}var CCe={kernelName:W0,backendName:"webgl",kernelFunc:$Ce};function TCe(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),d=n.readSync(s.dataId),h=o.map(g=>n.readSync(g.dataId)),p=o.map(g=>g.shape),[f,m]=xwe(c,a.shape,u,i.shape,i.dtype,d,s.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}var ECe={kernelName:U0,backendName:"webgl",kernelFunc:TCe},EU=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=wwe(r,a,i,s);return t.makeTensorInfo([o.length],s,o)},NCe={kernelName:tg,backendName:"webgl",kernelFunc:EU},_Ce="return 1.0 / x;",ACe=ht({opSnippet:_Ce}),RCe={kernelName:yc,backendName:"webgl",kernelFunc:ACe},DCe=fi+"\n  return (x < 0.0) ? 0.0 : x;\n",FCe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",MCe=ht({opSnippet:DCe,packedOpSnippet:FCe}),OCe={kernelName:vc,backendName:"webgl",kernelFunc:MCe},PCe=fi+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",LCe="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",zCe=ht({opSnippet:PCe,packedOpSnippet:LCe}),BCe={kernelName:kc,backendName:"webgl",kernelFunc:zCe},WCe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d;a?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}},UCe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d;a?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}};function VCe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UCe(a.shape,l,c,i,s):new WCe(a.shape,l,c,i,s);return n.runWebGLProgram(u,[a],"float32")}var jCe={kernelName:wc,backendName:"webgl",kernelFunc:VCe},HCe=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],d=1/c,h=1/u,p=Math.ceil(d)*2+2,f=Math.ceil(h)*2+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(a-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}};function GCe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new HCe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}var qCe={kernelName:cp,backendName:"webgl",kernelFunc:GCe},KCe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0",h;a?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}},XCe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0",h;a?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}};function YCe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new XCe(a.shape,l,c,i,s):new KCe(a.shape,l,c,i,s);return n.runWebGLProgram(u,[a],a.dtype)}var JCe={kernelName:xc,backendName:"webgl",kernelFunc:YCe},ZCe=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],d=1/c,h=1/u,p=Math.ceil(d)*2+2,f=Math.ceil(h)*2+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(d,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(o[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(o[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}};function QCe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new ZCe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}var eTe={kernelName:up,backendName:"webgl",kernelFunc:QCe},tTe=class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,n===1){this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      ");return}let r=s=>t.indexOf(s)!==-1&&e[s]!==1?"".concat(e[s]," - coords[").concat(s,"] - 1"):"coords[".concat(s,"]"),a=e.map((s,o)=>r(o)).join(","),i=Rt(n);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}},nTe=class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;let r=Er("rc",n),a="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),i="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=Rt(n);n===1?this.userCode="\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(a,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):this.userCode="\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(o(r.slice()),";\n          if(").concat(a,"){\n            result.g = ").concat(l(r.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(c(r.slice()),";\n            if(").concat(a,") {\n              result.a = ").concat(u(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ");function o(p){return d(p)}function l(p){return p[n-1]="("+p[n-1]+" + 1)",d(p)}function c(p){return p[n-2]="("+p[n-2]+" + 1)",d(p)}function u(p){return p[n-1]="("+p[n-1]+" + 1)",p[n-2]="("+p[n-2]+" + 1)",d(p)}function d(p){let f=e.map((b,y)=>h(y,p)),m=f.join(","),g=f.slice(-2).join(",");return"getChannel(getX(".concat(m,"), vec2(").concat(g,"))")}function h(p,f){return t.indexOf(p)!==-1&&e[p]!==1?"".concat(e[p]," - ").concat(f[p]," - 1"):"".concat(f[p])}}};function rTe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=a.shape.length,o=k.parseAxisParam(i,a.shape);if(s===0)return ka({inputs:{x:a},backend:n});let l=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nTe(a.shape,o):new tTe(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var aTe={kernelName:Sc,backendName:"webgl",kernelFunc:rTe},iTe=class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let a="";typeof t=="number"?a="float outputValue = ".concat(t.toFixed(2),";"):a="\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(a,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}},sTe={kernelName:$p,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:i,center:s}=t,o=n,l=new iTe(r.shape,i),[c,u]=E.getImageCenter(s,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(l,[r],r.dtype,d)}},oTe="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",lTe=ht({opSnippet:oTe}),uTe={kernelName:Ic,backendName:"webgl",kernelFunc:lTe},cTe="return inversesqrt(x);",dTe=ht({opSnippet:cTe,cpuKernelImpl:kwe}),hTe={kernelName:$c,backendName:"webgl",kernelFunc:dTe},XT=class{constructor(e,t,n,r,a,i,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;let l=Rt(a.length),c=Rt(i.length),u="";n===1?u="i":n===2&&(u="i, j");let d="getIndices(".concat(u,")"),h="";r===1?h="i":r===2&&(h="i, coords[1]");let p="getUpdates(".concat(h,")"),f="";o&&(f="coords[0], coords[1]");let m="getDefaultValue(".concat(f,")"),g=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(l," strides = ").concat(l,"(").concat(a,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(d,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(m,", sum, float(found)));\n        }\n      ")}},pTe=class{constructor(e,t,n,r,a,i,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;let l=Rt(a.length),c=Rt(i.length),u="";n===1?u="i":n===2&&(u="i, j");let d="getIndices(".concat(u,")"),h="";r===1?h="i":r===2&&(h="i, coords[1]");let p="getUpdates(".concat(h,")"),f="";o&&(f="coords[0], coords[1]");let m="getDefaultValue(".concat(f,")"),g=t>1?"strides[j]":"strides",b=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(l," strides = ").concat(l,"(").concat(a,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(d,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(b,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(p,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(m,", sum, found));\n        }\n      ")}};function fTe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=E.calculateShapes(i,a,s),h=[d/c,c];if(d===0)return n.makeTensorInfo(s,a.dtype);let p=we({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=we({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g;Q().getBool("WEBGL_PACK")?g=new pTe(l,o,p.shape.length,f.shape.length,u,h):g=new XT(l,o,p.shape.length,f.shape.length,u,h);let b=n.runWebGLProgram(g,[f,p,m],f.dtype),y=we({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(m),y}var mTe={kernelName:dp,backendName:"webgl",kernelFunc:fTe},gTe=class{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let a="while (left < right) {",i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),s=Q().getNumber("WEBGL_VERSION")===2?a:i,o=r==="left"?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(s,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(o," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}};function bTe(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=new gTe(a.shape[0],a.shape[1],i.shape[1],s),l=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",l)}var yTe={kernelName:pp,backendName:"webgl",kernelFunc:bTe},vTe=class{constructor(e,t,n){this.variableNames=["c","a","b"],this.outputShape=t;let r,a;if(n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(n===1)a="resRC",r="resRC";else{let s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[];for(let c=0;c<t.length;c++)l.push("".concat(s[c])),c<e&&o.push("".concat(s[c]));r=o.join(),a=l.join()}let i=Rt(n);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(a,"));\n        } else {\n          setOutput(getB(").concat(a,"));\n        }\n      }\n    ")}};function xTe(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=new vTe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],Ua(a.dtype,i.dtype))}var wTe={kernelName:fp,backendName:"webgl",kernelFunc:xTe},kTe="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(E.SELU_SCALEALPHA,";\n  float scale = ").concat(E.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"),STe=ht({opSnippet:kTe}),ITe={kernelName:Cc,backendName:"webgl",kernelFunc:STe},$Te=jp+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",CTe="\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",TTe=ht({opSnippet:$Te,packedOpSnippet:CTe,cpuKernelImpl:Iwe}),ETe={kernelName:_c,backendName:"webgl",kernelFunc:TTe},NTe="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",_Te=ht({opSnippet:NTe}),ATe={kernelName:Nc,backendName:"webgl",kernelFunc:_Te},RTe=jp+"\n  return sin(x);\n",DTe="\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(Kc,"\n  return result;\n"),FTe=ht({opSnippet:RTe,packedOpSnippet:DTe}),MTe={kernelName:Tc,backendName:"webgl",kernelFunc:FTe},OTe="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",PTe=ht({opSnippet:OTe}),LTe={kernelName:Ec,backendName:"webgl",kernelFunc:PTe},zTe="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",BTe=ht({opSnippet:zTe}),WTe={kernelName:Ac,backendName:"webgl",kernelFunc:BTe},UTe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;k.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((b,y)=>b*y),l=[[0,0]];l.push(...s);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);let c=[],u=TU({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=E.getReshaped(u.shape,i,o,!1),h=E.getPermuted(d.length,i.length,!1),p=E.getReshapedPermuted(u.shape,i,o,!1),f=we({inputs:{x:u},backend:n,attrs:{shape:d}}),m=Mr({inputs:{x:f},backend:n,attrs:{perm:h}}),g=we({inputs:{x:m},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach(b=>n.disposeIntermediateTensorInfo(b)),g},VTe={kernelName:gp,backendName:"webgl",kernelFunc:UTe};function jTe(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(r.shape.length!==2)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(a.shape.length!==1)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(s.shape.length!==0)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));let o=n.readSync(r.dataId),l=n.readSync(a.dataId),c=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[d,h,p,f,m]=Cwe(o,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var HTe={kernelName:ng,backendName:"webgl",kernelFunc:jTe};function GTe(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=Twe(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var qTe={kernelName:yp,backendName:"webgl",kernelFunc:GTe};function KTe(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));let s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=JW(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}var XTe={kernelName:rg,backendName:"webgl",kernelFunc:KTe};function YTe(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));let s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=JW(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}var JTe={kernelName:ag,backendName:"webgl",kernelFunc:YTe};function ZTe(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=E.calculateShapes(i,a,o),p=!1;if(i.dtype==="string"){let b=n.bufferSync(a),y=n.bufferSync(i),v=k.decodeString(n.readSync(s.dataId)[0]),x=Swe(b,y,o,h,u,c,l,d,v,p);return n.makeTensorInfo(o,x.dtype,x.values)}let f=new XT(c,l,a.shape.length,i.shape.length,d,[h,1],p),m=n.runWebGLProgram(f,[i,a,s],i.dtype),g=we({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),g}var QTe={kernelName:vp,backendName:"webgl",kernelFunc:ZTe};function eEe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=k.parseAxisParam(s,a.shape)[0],l=E.prepareSplitSize(a,i,o),c=a.shape.length,u=new Array(c).fill(0),d=a.shape.slice();return l.map(h=>{let p=[...d];p[o]=h;let f=Hp({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[o]+=h,f})}var tEe={kernelName:bp,backendName:"webgl",kernelFunc:eEe},ZR="return sqrt(x);",nEe=ht({opSnippet:ZR,packedOpSnippet:ZR,cpuKernelImpl:Ewe}),rEe={kernelName:Rc,backendName:"webgl",kernelFunc:nEe},aEe="return x * x;",iEe=ht({opSnippet:aEe}),sEe={kernelName:ig,backendName:"webgl",kernelFunc:iEe},QR="return (a - b) * (a - b);",oEe=dr({opSnippet:QR,packedOpSnippet:QR}),lEe={kernelName:Mc,backendName:"webgl",kernelFunc:oEe};function uEe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");let i=n.readSync(a.dataId),s=E.fromUint8ToStringArray(i),o=Nwe(s,"string",r);return n.makeTensorInfo(a.shape,"string",o)}var cEe={kernelName:sg,backendName:"webgl",kernelFunc:uEe};function dEe({inputs:e,attrs:t,backend:n}){let{x:r}=e,a=fi+"\n    return x > 0.0 ? 1.0 : float(".concat(t.alpha,");\n  "),i=new is(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}var hEe={kernelName:el,backendName:"webgl",kernelFunc:dEe},pEe=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,a=Rt(n.length),i=Rt(n.length),s="";if(r===1)s="coords * strides + begin";else{let o=0;s=n.map((l,c)=>(o++,n.length===1?"coords * strides[".concat(c,"] + begin[").concat(c,"]"):"coords[".concat(o-1,"] * strides[").concat(c,"] + begin[").concat(c,"]"))).join(",")}this.userCode="\n      ".concat(a," begin = ").concat(a,"(").concat(e,");\n      ").concat(a," strides = ").concat(a,"(").concat(t,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}};function fEe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:v,strides:x}=Fn.sliceInfo(a.shape,i,s,o,l,c,u,d,h),w;if(m)w=we({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||b){k.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let C=Fn.computeOutShape(y,v,x),T=Hp({inputs:{x:a},backend:n,attrs:{begin:y,size:C}});w=we({inputs:{x:T},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([a])){let C=n.readSync(a.dataId),T=nt(a.shape,a.dtype,C),A=_we(p,T,x,y);w=n.makeTensorInfo(f,a.dtype,A.values)}else{let C=new pEe(y,x,p);w=n.runWebGLProgram(C,[a],a.dtype)}let $=we({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),$}var mEe={kernelName:xp,backendName:"webgl",kernelFunc:fEe};function gEe(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=t,h=n.readSync(u.dataId),p=n.readSync(d.dataId),[f,m]=Awe(h,p,a,i,s,o,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}var bEe={kernelName:og,backendName:"webgl",kernelFunc:gEe};function yEe(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(s.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));let o=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[c,u,d]=Rwe(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var vEe={kernelName:lg,backendName:"webgl",kernelFunc:yEe};function xEe(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let s=n.readSync(i.dataId),o=Dwe(s,a);return n.makeTensorInfo(i.shape,"int32",o)}var wEe={kernelName:ug,backendName:"webgl",kernelFunc:xEe},kEe="return tan(x);",SEe=ht({opSnippet:kEe}),IEe={kernelName:Pc,backendName:"webgl",kernelFunc:SEe},$Ee="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",CEe=ht({opSnippet:$Ee}),TEe={kernelName:Lc,backendName:"webgl",kernelFunc:CEe};function EEe(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=t,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=E.calculateShapes(s,i,a.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(a.shape,i.dtype);let p=we({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),f=we({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),m=we({inputs:{x:a},backend:n,attrs:{shape:h}}),g=new XT(l,o,p.shape.length,f.shape.length,u,h,!1,!0),b=n.runWebGLProgram(g,[f,p,m],m.dtype),y=we({inputs:{x:b},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),y}var NEe={kernelName:hp,backendName:"webgl",kernelFunc:EEe},_Ee=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[i]*t[i];this.outputShape=n,this.rank=n.length;let r=Rt(this.rank),a=AEe(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")}};function AEe(e){let t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(t===1)return"imod(resRC, ".concat(e[0],")");let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}function NU(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){let o=n.readSync(a.dataId),l=a.dtype==="string"?o.map(d=>k.decodeString(d)):o,c=nt(a.shape,a.dtype,l),u=Mwe(c,i);return n.makeTensorInfo(u.shape,u.dtype,u.values)}let s=new _Ee(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}var REe={kernelName:Qo,backendName:"webgl",kernelFunc:NU},DEe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}},FEe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}};function bl(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function eD(e){let t=1;for(;t<e;)t*=2;return t}function MEe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r,o=Q().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Q().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([a])||u<o||i>l){let A=n.readSync(a.dataId),[D,N]=Owe(A,c,a.dtype,i,s);return[n.makeTensorInfo(D.shape,D.dtype,D.values),n.makeTensorInfo(N.shape,N.dtype,N.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[a,Gg({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let d=n.texData.get(a.dataId),h=d!==null&&d.isPacked,p=h?n.unpackTensor(a):a,f=k.sizeFromShape(c)/u,m=we({inputs:{x:p},attrs:{shape:[f,u]},backend:n});h&&bl(n,p);let g=eD(i),b=eD(u),y=null,v=()=>y===null?[m,m]:[m,y],x=(A,D,N)=>{let I=v(),M=new DEe(N),P=[[u],[y===null?1:0],[Number.NEGATIVE_INFINITY],[A],[D]],z=y;y=n.runWebGLProgram(M,I,"int32",P),bl(n,z)};for(let A=1;A<g;A*=2){let D=A*2;for(let N=A;N>=1;N/=2)x(D,N,[f,b])}for(let A=b;A>g;A/=2){let D=v(),N=new FEe([f,A/2]),I=[[u],[y===null?1:0],[g]],M=y;y=n.runWebGLProgram(N,D,"int32",I),bl(n,M);let P=g/2,z=P*2;for(let j=P;j>=1;j/=2)x(z,j,y.shape)}let w=y;y=Hp({inputs:{x:y},backend:n,attrs:{begin:0,size:[f,i]}}),bl(n,w);let $=wU({inputs:{x:m,indices:y},backend:n,attrs:{axis:1,batchDims:1}});bl(n,m);let C=c.slice(0,-1);C.push(i),w=y,y=we({inputs:{x:y},attrs:{shape:C},backend:n}),bl(n,w);let T=$;return $=we({inputs:{x:$},attrs:{shape:C},backend:n}),bl(n,T),[$,y]}var OEe={kernelName:wp,backendName:"webgl",kernelFunc:MEe},PEe=class{constructor(e,t,n,r,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;let s=n==="nearest"?1:2,o;switch(r){case"constant":o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4;break;default:o=1;break}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(o," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(a,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(a,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}};function LEe(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,h,p]=a.shape,[f,m]=c!=null?c:[d,h],g=[u,f,m,p],b=new PEe(d,h,s,o,l,g);return n.runWebGLProgram(b,[a,i],"float32")}var zEe={kernelName:kp,backendName:"webgl",kernelFunc:LEe};function BEe(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;Lp(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=Pwe(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}var WEe={kernelName:cg,backendName:"webgl",kernelFunc:BEe};function UEe(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a,o=s.shape.length,l=a.shape[i],c=new Array(o-1),u=0;for(let m=0;m<o;m++)m!==i&&(c[u++]=s.shape[m]);let d=[],h=new Array(o).fill(0),p=s.shape.slice();p[i]=1;let f=new Array(l);for(let m=0;m<f.length;m++){h[i]=m;let g=Hp({inputs:{x:s},backend:n,attrs:{begin:h,size:p}}),b=we({inputs:{x:g},backend:n,attrs:{shape:c}});f[m]=b,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}var VEe={kernelName:Sp,backendName:"webgl",kernelFunc:UEe},jEe=class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,s=i*Math.ceil(a/n);this.outputShape=[r,s];let o="0.0",l="sumValue",c=Math.floor(n/4)*4,u=n%4,d="\n        sumValue += dot(values, segFilter);\n    ",h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      "));let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(o,";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(u===1,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(d,"\n        } else if (").concat(u===2,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(d,"\n        } else if (").concat(u===3,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}};function HEe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r,o=a.shape.length,l=[],c=0,u=E.getAxesPermutation([c],o),d=a;u!=null&&(d=Mr({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(d),c=E.getInnerMostAxes(1,o)[0]);let h=E.segment_util.computeOutShape(d.shape,c,s),p=k.sizeFromShape([d.shape[c]]),f=we({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});l.push(f);let m=H0(a.dtype),g=(x,w,$,C,T)=>{let A=x.shape[0],D=x.shape[1],N=E.segment_util.segOpComputeOptimalWindowSize(D,T),I={windowSize:N,inSize:D,batchSize:A,numSegments:T},M=new jEe(I,w),P=n.compileAndRun(M,[x,$],C);if(l.push(P),P.shape[1]===T)return P;let z=EU({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),j=NU({inputs:{x:z},backend:n,attrs:{reps:[D/N]}});return l.push(z),l.push(j),g(P,w,j,C,T)},b=g(f,"unsortedSegmentSum",i,m,s),y=we({inputs:{x:b},backend:n,attrs:{shape:h}}),v=y;if(u!=null){l.push(y);let x=E.getUndoAxesPermutation(u);v=Mr({inputs:{x:v},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}var GEe={kernelName:dg,backendName:"webgl",kernelFunc:HEe},qEe=[_1e,R1e,M1e,L1e,B1e,V1e,H1e,q1e,J1e,Q1e,nke,ike,lke,hke,mke,bke,vke,Ske,$ke,Tke,Ake,Lke,Bke,jke,Gke,Zke,eSe,aSe,p1e,oSe,hSe,gSe,kSe,$Se,TSe,NSe,ASe,MSe,LSe,WSe,VSe,HSe,qSe,YSe,ZSe,nIe,aIe,oIe,cIe,hIe,gIe,xIe,IIe,TIe,_Ie,AIe,DIe,MIe,PIe,zIe,WIe,HIe,KIe,JIe,QIe,n$e,i$e,u$e,p$e,h1e,m$e,cSe,y$e,w$e,I$e,m1e,E$e,R$e,F$e,L$e,W$e,H$e,K$e,Z$e,n2e,i2e,o2e,d2e,p2e,m2e,v2e,w2e,S2e,$2e,T2e,A2e,M2e,z2e,q2e,y1e,J2e,eCe,rCe,sCe,Kke,uCe,dCe,pCe,gCe,xCe,b1e,kCe,ICe,CCe,ECe,NCe,Xke,V2e,RCe,OCe,BCe,x1e,jCe,qCe,JCe,eTe,aTe,sTe,uTe,hTe,mTe,yTe,wTe,ITe,ETe,ATe,MTe,LTe,Oke,H2e,WTe,VTe,HTe,qTe,XTe,JTe,QTe,tEe,rEe,sEe,lEe,cEe,hEe,mEe,bEe,vEe,wEe,j2e,T1e,IEe,TEe,NEe,REe,OEe,zEe,E1e,WEe,VEe,GEe,cCe];for(let e of qEe)hg(e);var mt;(function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"})(mt||(mt={}));var Em;(function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"})(Em||(Em={}));var _U;function KEe(e){_U=e.wasm.cwrap(Jl,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function XEe(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:s,preluActivationWeights:o}=t;if(a.dtype!=="float32"||i.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r,h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,f=0;if(s!=null){let T=n.dataIdMap.get(s.dataId);if(T.shape.length!==1)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(T.shape.length,"."));f=T.id}let m=o==null?0:n.dataIdMap.get(o.dataId).id,g=Em[u];if(g==null)throw new Error("".concat(u," activation not yet supported for FusedConv2D in the wasm backend."));let b=l?a.shape[2]:a.shape[1],y=c?i.shape[1]:i.shape[2],v=Cp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),x=n.makeOutput([...v,b,y],a.dtype),w=n.dataIdMap.get(x.dataId).id,$=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(i.shape).buffer);return _U(h,$,a.shape.length,p,C,i.shape.length,l,c,g,f,m,d||0,w),x}var YEe={kernelName:Jl,backendName:"wasm",setupFunc:KEe,kernelFunc:XEe};function dt(e,t){let n;function r(i){n=i.wasm.cwrap(e,null,["number","number","number"])}function a(i){let{backend:s,inputs:{x:o}}=i,l=s.dataIdMap.get(o.dataId).id,c=s.makeOutput(o.shape,t||o.dtype),u=s.dataIdMap.get(c.dataId).id;return k.sizeFromShape(c.shape)===0||n(l,mt[o.dtype],u),c}return{kernelName:e,backendName:"wasm",setupFunc:r,kernelFunc:a}}var JEe=dt(Ih),ZEe=dt(wu),QEe=dt(ku);function Nn(e,t,n){let r;function a(s){r=s.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])}function i(s){let{backend:o,inputs:l}=s,{a:c,b:u}=l,d=o.dataIdMap.get(c.dataId).id,h=o.dataIdMap.get(u.dataId).id,p=n!=null?n:c.dtype,f=E.assertAndGetBroadcastShape(c.shape,u.shape),m=o.makeOutput(f,p);if(k.sizeFromShape(f)===0)return m;let g=new Uint8Array(new Int32Array(c.shape).buffer),b=new Uint8Array(new Int32Array(u.shape).buffer),y=o.dataIdMap.get(m.dataId).id;return r(d,g,c.shape.length,h,b,u.shape.length,mt[c.dtype],y),m}return{kernelName:e,backendName:"wasm",setupFunc:a,kernelFunc:i}}var eNe=Nn(Jo),AU;function tNe(e){AU=e.wasm.cwrap(Su,null,["array","number","number","number"])}function nNe(e){let{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(k.sizeFromShape(r.shape)===0)return r;let a=t.map(o=>n.dataIdMap.get(o.dataId).id),i=new Uint8Array(new Int32Array(a).buffer),s=n.dataIdMap.get(r.dataId).id;return AU(i,a.length,mt[r.dtype],s),r}var rNe={kernelName:Su,backendName:"wasm",setupFunc:tNe,kernelFunc:nNe};function Zx(e){let{inputs:{x:t},backend:n}=e;if(t.dtype==="string")return Nr(n.readSync(t.dataId),t.shape,t.dtype);let r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var aNe={kernelName:Yu,backendName:"wasm",kernelFunc:Zx},RU;function iNe(e){RU=e.wasm.cwrap(Fs,null,["number","array","number","number","number","array","number"])}function jo(e){let{inputs:t,backend:n,attrs:r}=e,[a,i]=oNe(t.x.shape,r.perm),s=!0;for(let f=0;f<i.length;f++)i[f]!==f&&(s=!1);let o=sNe(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(s){let f=Zx({inputs:t,backend:n});return f.shape=o,f}let c=n.makeOutput(o,l.dtype),u=n.dataIdMap.get(l.dataId).id,d=n.dataIdMap.get(c.dataId).id,h=new Uint8Array(new Int32Array(i).buffer),p=new Uint8Array(new Int32Array(l.shape).buffer);return RU(u,p,l.shape.length,mt[l.dtype],d,h,i.length),c}function sNe(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}function oNe(e,t){let n=[],r=[];for(let a=0;a<e.length;++a)e[a]!==1&&n.push(e[a]),e[t[a]]!==1&&r.push(t[a]);for(let a=0;a<r.length;++a){let i=-1;for(let s=0;s<r.length;++s)r[s]>=a&&(i===-1||r[i]>r[s])&&(i=s);r[i]=a}return[n,r]}var lNe={kernelName:Fs,backendName:"wasm",kernelFunc:jo,setupFunc:iNe};function ll(e,t,n){let r=e.shape,a=e.shape.length,i=k.parseAxisParam(t,r),s=i,o=E.getAxesPermutation(s,a),l=null,c=!1;if(o!=null){let u=new Array(a);for(let h=0;h<u.length;h++)u[h]=r[o[h]];s=E.getInnerMostAxes(s.length,a),l=jo({inputs:{x:e},attrs:{perm:o},backend:n});let d=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==d&&(c=!0)}return{transposed:l,originalAxes:i,axes:s,inputWasTransposed:c}}var DU;function uNe(e){DU=e.wasm.cwrap($h,null,["number, number, number"])}function cNe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:d,inputWasTransposed:h}=ll(s,a,t);if(h){let y=t.dataIdMap.get(c.dataId).id;l=c,o=y}let p=l.shape.length;E.assertAxesAreInnerMostDims("all",u,p);let[f,m]=E.computeOutAndReduceShapes(l.shape,u),g=k.sizeFromShape(m),b=t.makeOutput(f,s.dtype);if(k.sizeFromShape(l.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;DU(o,g,y)}if(h&&t.disposeData(c.dataId),i){let y=E.expandShapeToKeepDim(b.shape,d);b.shape=y}return b}var dNe={kernelName:$h,backendName:"wasm",setupFunc:uNe,kernelFunc:cNe},FU;function hNe(e){FU=e.wasm.cwrap(Ch,null,["number, number, number"])}function pNe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:d,inputWasTransposed:h}=ll(s,a,t);if(h){let y=t.dataIdMap.get(c.dataId).id;l=c,o=y}let p=l.shape.length;E.assertAxesAreInnerMostDims("any",u,p);let[f,m]=E.computeOutAndReduceShapes(l.shape,u),g=k.sizeFromShape(m),b=t.makeOutput(f,s.dtype);if(k.sizeFromShape(l.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;FU(o,g,y)}if(h&&t.disposeData(c.dataId),i){let y=E.expandShapeToKeepDim(b.shape,d);b.shape=y}return b}var fNe={kernelName:Ch,backendName:"wasm",setupFunc:hNe,kernelFunc:pNe};function MU(e){let t;function n(a){t=a.wasm.cwrap(e,null,["number","number","number","number","number"])}function r(a){let{backend:i,inputs:s,attrs:o}=a,{axis:l}=o,{x:c}=s,u=i.dataIdMap.get(c.dataId).id,d=u,h=c,{transposed:p,axes:f,inputWasTransposed:m}=ll(c,l,i);if(m){let w=i.dataIdMap.get(p.dataId).id;w!==u&&(h=p,d=w)}let g=h.shape.slice(0,-1),b=i.makeOutput(g,"int32"),y=i.dataIdMap.get(b.dataId).id,v=k.sizeFromShape(b.shape),x=h.shape[f[0]];return t(d,mt[h.dtype],v,x,y),m&&i.disposeData(p.dataId),b}return{kernelName:e,backendName:"wasm",setupFunc:n,kernelFunc:r}}var mNe=MU(Th),gNe=MU(Eh),bNe=dt(Iu),yNe=dt($u),vNe=dt(Cu),xNe=Nn(Eu),wNe=dt(Tu),OU;function kNe(e){OU=e.wasm.cwrap(Nu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function SNe(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,i=r.dataIdMap.get(a.dataId).id,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=n,u=E.computePool2DInfo(a.shape,s,o,1,l,c),d=u.filterHeight,h=u.filterWidth,p=u.padInfo.top,f=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,b=u.strideHeight,y=u.strideWidth,v=u.inChannels;if(u.dataFormat!=="channelsLast")throw new Error("wasm backend does not support dataFormat:'".concat(u.dataFormat,"'. Please use 'channelsLast'."));if(u.dilationWidth!==1||u.dilationHeight!==1)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(u.dilationHeight,", ").concat(u.dilationWidth,"]."));let x=r.makeOutput(u.outShape,"float32"),w=r.dataIdMap.get(x.dataId).id;return OU(i,a.shape[0],a.shape[1],a.shape[2],d,h,p,f,m,g,b,y,v,w),x}var INe={kernelName:Nu,backendName:"wasm",setupFunc:kNe,kernelFunc:SNe},PU;function $Ne(e){PU=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function CNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=E.computePool3DInfo(a.shape,i,s,1,o,l,c),d=n.makeOutput(u.outShape,a.dtype);return PU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),d}var TNe={kernelName:Nh,backendName:"wasm",setupFunc:$Ne,kernelFunc:CNe},LU;function ENe(e){LU=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function NNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=E.computePool3DInfo(i.shape,s,o,1,l,c),d=n.makeOutput(i.shape,i.dtype);return LU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left,u.filterDepth,u.filterHeight,u.filterWidth),d}var _Ne={kernelName:Gm,backendName:"wasm",setupFunc:ENe,kernelFunc:NNe},zU;function ANe(e){zU=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function RNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l}=r,c=E.computePool2DInfo(i.shape,s,o,1,l),u=n.makeOutput(i.shape,i.dtype);return zU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left,c.filterHeight,c.filterWidth),u}var DNe={kernelName:Hm,backendName:"wasm",setupFunc:ANe,kernelFunc:RNe};function Yr(e){let{inputs:t,attrs:n}=e,{x:r}=t,{shape:a}=n,i=k.sizeFromShape(r.shape),s=k.inferFromImplicitShape(a,i);return k.assert(i===k.sizeFromShape(s),()=>"new shape: ".concat(s,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var FNe={kernelName:lp,backendName:"wasm",kernelFunc:Yr},BU;function MNe(e){BU=e.wasm.cwrap(_u,null,["number","array","number","number","array","number","number","number","number"])}function ONe(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:s,transposeB:o}=r;if(a.dtype!=="float32"||i.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=a.shape.length,c=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],d=o?i.shape[c-1]:i.shape[c-2],h=s?a.shape[l-1]:a.shape[l-2],p=o?i.shape[c-2]:i.shape[c-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=k.sizeFromShape(f),b=k.sizeFromShape(m),y=Cp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);k.assert(u===d,()=>"Error in matMul: inner shapes (".concat(u,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(s," and transposeB=").concat(o," must match."));let v=s?[g,u,h]:[g,h,u],x=o?[b,p,d]:[b,d,p],w=Yr({inputs:{x:a},backend:n,attrs:{shape:v}}),$=Yr({inputs:{x:i},backend:n,attrs:{shape:x}}),C=n.dataIdMap.get(w.dataId).id,T=n.dataIdMap.get($.dataId).id,A=s?w.shape[2]:w.shape[1],D=o?$.shape[1]:$.shape[2],N=Math.max(g,b),I=n.makeOutput([N,A,D],w.dtype),M=n.dataIdMap.get(I.dataId).id,P=new Uint8Array(new Int32Array(w.shape).buffer),z=new Uint8Array(new Int32Array($.shape).buffer);return BU(C,P,w.shape.length,T,z,$.shape.length,s,o,M),n.disposeData(w.dataId),n.disposeData($.dataId),I.shape=y,I}var PNe={kernelName:_u,backendName:"wasm",setupFunc:MNe,kernelFunc:ONe};function mu(e){let{inputs:{x:t},attrs:{begin:n,size:r},backend:a}=e,[i,s]=Fn.parseSliceParams(t,n,r),o=Fn.isSliceContinous(t.shape,i,s),l=a.readSync(t.dataId),c=a.makeOutput(s,t.dtype),u=k.computeStrides(t.shape),d=a.dataIdMap.get(c.dataId);if(o){let f=Fn.computeFlatOffset(i,u);return t.dtype==="string"?d.stringBytes=l.slice(f,f+k.sizeFromShape(s)):a.typedArrayFromHeap(c).set(l.subarray(f,f+k.sizeFromShape(s))),c}if(t.dtype==="string"){let f=Cv(l,i,s,t.shape,t.dtype);return d.stringBytes=f,c}let h=a.typedArrayFromHeap(c),p=t.shape.length;if(p===2)LNe(l,u[0],h,i,s);else if(p===3)zNe(l,u[0],u[1],h,i,s);else if(p===4)BNe(l,u[0],u[1],u[2],h,i,s);else{let f=Cv(l,i,s,t.shape,t.dtype);h.set(f)}return c}function LNe(e,t,n,r,a){let i=0,s=r[0],o=r[1],l=s+a[0];for(let c=s;c<l;c++){let u=c*t+o;n.set(e.subarray(u,u+a[1]),i),i+=a[1]}}function zNe(e,t,n,r,a,i){let s=0,o=a[0],l=a[1],c=a[2],u=o+i[0],d=l+i[1];for(let h=o;h<u;h++)for(let p=l;p<d;p++){let f=h*t+p*n+c;r.set(e.subarray(f,f+i[2]),s),s+=i[2]}}function BNe(e,t,n,r,a,i,s){let o=0,l=i[0],c=i[1],u=i[2],d=l+s[0],h=c+s[1],p=u+s[2],f=i[3];for(let m=l;m<d;m++)for(let g=c;g<h;g++)for(let b=u;b<p;b++){let y=m*t+g*n+b*r+f;a.set(e.subarray(y,y+s[3]),o),o+=s[3]}}var WNe={kernelName:mp,backendName:"wasm",kernelFunc:mu};function UNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r,o=i.reduce((b,y)=>b*y),l=E.getReshaped(a.shape,i,o),c=E.getPermuted(l.length,i.length),u=E.getReshapedPermuted(a.shape,i,o),d=E.getSliceBeginCoords(s,i.length),h=E.getSliceSize(u,s,i.length),p=Yr({inputs:{x:a},backend:n,attrs:{shape:l}}),f=jo({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Yr({inputs:{x:f},backend:n,attrs:{shape:u}}),g=mu({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeData(p.dataId),n.disposeData(f.dataId),n.disposeData(p.dataId),g}var VNe={kernelName:_h,backendName:"wasm",kernelFunc:UNe},WU;function jNe(e){WU=e.wasm.cwrap(Ah,null,["number","number","boolean","number","number","number"])}function HNe(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,weights:i}=n,{size:s}=r,o=i.shape.reduce((d,h)=>d*h,1)!==0,l=a.shape.length===1?[s]:[a.shape[0],s],c=t.makeOutput(l,i.dtype);function u(d){return t.dataIdMap.get(d.dataId).id}return WU(u(a),s,o,u(i),mt[i.dtype],u(c)),c}var GNe={kernelName:Ah,backendName:"wasm",setupFunc:jNe,kernelFunc:HNe},qNe=Nn(Rh);function KNe(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.typedArrayFromHeap(r),s=n.typedArrayFromHeap(a),o=E.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeOutput([o.length],"int32",void 0,new Int32Array(o))}var XNe={kernelName:qm,backendName:"wasm",kernelFunc:KNe};function ul(e){let{inputs:{x:t},attrs:{dtype:n},backend:r}=e,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var YNe={kernelName:Au,backendName:"wasm",kernelFunc:ul},JNe=dt(Ru),UU;function ZNe(e){UU=e.wasm.cwrap(Zo,null,["number","number","number","number"])}function QNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:s}=r,o=n.dataIdMap.get(a.dataId).id,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(l.dataId).id;return UU(o,i,s,c),l}var e_e={kernelName:Zo,backendName:"wasm",setupFunc:ZNe,kernelFunc:QNe};function VU(e){let{inputs:t,backend:n}=e,r=k.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=t.map(p=>p.shape);E.assertParamsConsistent(a,r);let i=E.computeOutShape(t.map(p=>p.shape),r),s=t.filter(p=>k.sizeFromShape(p.shape)>0);if(s.length===1)return Zx({inputs:{x:s[0]},backend:n});let o=n.makeOutput(i,t[0].dtype);if(k.sizeFromShape(i)===0)return o;if(s[0].dtype==="string"){let p=s.map(v=>{let x=[-1,k.sizeFromShape(v.shape.slice(r))];return Yr({inputs:{x:v},backend:n,attrs:{shape:x}})}),f=p.map(v=>({vals:n.readSync(v.dataId),shape:v.shape}));i=E.computeOutShape(p.map(v=>v.shape),1);let m=p[0].shape[0]===1,g=kT(f,i,t[0].dtype,m),b=E.computeOutShape(s.map(v=>v.shape),r);o.shape=b;let y=n.dataIdMap.get(o.dataId);return y.stringBytes=E.fromStringArrayToUint8(g),p.forEach(v=>n.disposeData(v.dataId)),o}let l=k.sizeFromShape(s[0].shape.slice(0,r)),c=0,u=s.map(p=>{let f=k.sizeFromShape(p.shape.slice(r));return c+=f,f}),d=s.map(p=>n.typedArrayFromHeap(p)),h=n.typedArrayFromHeap(o);for(let p=0;p<l;p++){let f=p*c;for(let m=0;m<d.length;m++){let g=u[m],b=p*g,y=d[m].subarray(b,b+g);h.set(y,f),f+=g}}return o}var t_e={kernelName:Dh,backendName:"wasm",kernelFunc:VU},jU;function n_e(e){jU=e.wasm.cwrap(Du,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function r_e(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(i.dataId).id,{strides:l,dilations:c,pad:u,dimRoundingMode:d,dataFormat:h}=n,p=E.convertConv2DDataFormat(h),f=E.computeConv2DInfo(a.shape,i.shape,l,c,u,d,!1,p),m=f.filterHeight,g=f.filterWidth,b=f.padInfo.top,y=f.padInfo.right,v=f.padInfo.bottom,x=f.padInfo.left,w=f.dilationHeight,$=f.dilationWidth,C=f.strideHeight,T=f.strideWidth,A=f.inChannels,D=f.outChannels,N=f.padInfo.type==="SAME"?1:0;if(f.dataFormat!=="channelsLast")throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));let I=r.makeOutput(f.outShape,"float32"),M=r.dataIdMap.get(I.dataId).id;return jU(s,a.shape[0],a.shape[1],a.shape[2],o,m,g,b,y,v,x,N,w,$,C,T,A,D,M),I}var a_e={kernelName:Du,backendName:"wasm",setupFunc:n_e,kernelFunc:r_e},HU;function i_e(e){HU=e.wasm.cwrap(Fu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function s_e(e){let{backend:t,inputs:n,attrs:r}=e,{dy:a,filter:i}=n,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,inputShape:u}=r,d=1,h=E.convertConv2DDataFormat(l),p=E.computeConv2DInfo(u,i.shape,s,d,o,c,!1,h),{batchSize:f,filterHeight:m,filterWidth:g,inChannels:b,inHeight:y,inWidth:v,outChannels:x,outHeight:w,outWidth:$,strideHeight:C,strideWidth:T}=p,A=m-1-p.padInfo.top,D=g-1-p.padInfo.left,N=p.dataFormat==="channelsLast",I=k.computeStrides(p.inShape),M=k.computeStrides(a.shape),[P,z,j]=k.computeStrides(i.shape),K=I[0],O=N?I[1]:I[2],W=N?I[2]:1,L=N?1:I[1],H=M[0],Z=N?M[1]:M[2],J=N?M[2]:1,ne=N?1:M[1],re=t.makeOutput(p.inShape,"float32"),pe=t.dataIdMap.get(re.dataId).id,de=t.dataIdMap.get(a.dataId).id,he=t.dataIdMap.get(i.dataId).id;return HU(de,he,f,m,g,y,v,b,w,$,x,C,T,A,D,P,z,j,K,O,W,L,H,Z,J,ne,pe),re}var o_e={kernelName:Fu,backendName:"wasm",setupFunc:i_e,kernelFunc:s_e},GU;function l_e(e){GU=e.wasm.cwrap(Mu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function u_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;if(a.dtype!=="float32")throw new Error("Tensor x must have dtype float32, got ".concat(a.dtype));if(i.dtype!=="float32")throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let c=E.computeConv3DInfo(a.shape,i.shape,s,l,o),u=n.makeOutput(c.outShape,a.dtype);return GU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}var c_e={kernelName:Mu,backendName:"wasm",setupFunc:l_e,kernelFunc:u_e},qU;function d_e(e){qU=e.wasm.cwrap(Fh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function h_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;if(a.dtype!=="float32")throw new Error("Tensor dy must have dtype float32, got ".concat(a.dtype));if(i.dtype!=="float32")throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let c=E.computeConv3DInfo(a.shape,l,s,1,o),u=n.makeOutput(c.filterShape,i.dtype);return qU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}var p_e={kernelName:Fh,backendName:"wasm",setupFunc:d_e,kernelFunc:h_e},KU;function f_e(e){KU=e.wasm.cwrap(Mh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function m_e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;if(a.dtype!=="float32")throw new Error("Tensor dy must have dtype float32, got ".concat(a.dtype));if(i.dtype!=="float32")throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let c=E.computeConv3DInfo(l,i.shape,o,1,s),u=n.makeOutput(c.inShape,a.dtype);return KU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}var g_e={kernelName:Mh,backendName:"wasm",setupFunc:f_e,kernelFunc:m_e},b_e=dt(Ou),y_e=dt(Pu),wS;(function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"})(wS||(wS={}));var XU;function v_e(e){XU=e.wasm.cwrap(Ph,null,["number","number","number","number","array","number","number","number","number","number"])}function x_e(e){let{backend:t,inputs:n,attrs:r}=e,{method:a,extrapolationValue:i,cropSize:s}=r,{image:o,boxes:l,boxInd:c}=n,u=l.shape[0],[d,h]=s,p=[u,d,h,o.shape[3]],f=t.dataIdMap.get(o.dataId),m;o.dtype!=="float32"&&(m=ul({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),f=t.dataIdMap.get(m.dataId));let g=f.id,b=t.dataIdMap.get(l.dataId).id,y=t.dataIdMap.get(c.dataId).id,v=t.makeOutput(p,"float32"),x=t.dataIdMap.get(v.dataId).id,w=new Uint8Array(new Int32Array(o.shape).buffer);return XU(g,b,y,u,w,d,h,wS[a],i,x),m!=null&&t.disposeData(m.dataId),v}var w_e={kernelName:Ph,backendName:"wasm",setupFunc:v_e,kernelFunc:x_e},YU;function k_e(e){YU=e.wasm.cwrap(Oh,null,["number","number","number","number","number","number"])}function S_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r,l=a.shape.length;k.assert(a.dtype==="float32"||a.dtype==="int32",()=>"cumprod does not support ".concat(a.dtype," tensors in the WASM backend"));let c=E.getAxesPermutation([i],l),u=a;c!==null&&(u=jo({inputs:{x:a},attrs:{perm:c},backend:n}));let d=E.getInnerMostAxes(1,l)[0];E.assertAxesAreInnerMostDims("cumprod",[d],l);let h=n.makeOutput(u.shape,u.dtype),p=u.shape[d],f=n.dataIdMap.get(u.dataId).id,m=n.dataIdMap.get(h.dataId).id;YU(f,s?1:0,o?1:0,p,m,mt[a.dtype]);let g=h;if(c!==null){let b=E.getUndoAxesPermutation(c);g=jo({inputs:{x:h},attrs:{perm:b},backend:n}),n.disposeData(u.dataId),n.disposeData(h.dataId)}return g}var I_e={kernelName:Oh,backendName:"wasm",setupFunc:k_e,kernelFunc:S_e},JU;function $_e(e){JU=e.wasm.cwrap(Lu,null,["number","number","number","number","number","number"])}function C_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r,l=a.shape.length;k.assert(a.dtype==="float32"||a.dtype==="int32",()=>"cumsum does not support ".concat(a.dtype," tensors in the WASM backend"));let c=E.getAxesPermutation([i],l),u=a;c!==null&&(u=jo({inputs:{x:a},attrs:{perm:c},backend:n}));let d=E.getInnerMostAxes(1,l)[0];E.assertAxesAreInnerMostDims("cumsum",[d],l);let h=n.makeOutput(u.shape,u.dtype),p=u.shape[d],f=n.dataIdMap.get(u.dataId).id,m=n.dataIdMap.get(h.dataId).id;JU(f,s?1:0,o?1:0,p,m,mt[a.dtype]);let g=h;if(c!==null){let b=E.getUndoAxesPermutation(c);g=jo({inputs:{x:h},attrs:{perm:b},backend:n}),n.disposeData(u.dataId),n.disposeData(h.dataId)}return g}var T_e={kernelName:Lu,backendName:"wasm",setupFunc:$_e,kernelFunc:C_e},ZU;function E_e(e){ZU=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function N_e(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,weights:i}=n,{size:s,binaryOutput:o}=r,l=i.shape.reduce((h,p)=>h*p,1)!==0,c=a.shape.length===1?[s]:[a.shape[0],s],u=t.makeOutput(c,i.dtype);function d(h){return t.dataIdMap.get(h.dataId).id}return ZU(d(a),new Uint8Array(new Int32Array(a.shape).buffer),a.shape.length,s,l,d(i),mt[i.dtype],o,d(u)),u}var __e={kernelName:Xm,backendName:"wasm",setupFunc:E_e,kernelFunc:N_e},QU;function A_e(e){QU=e.wasm.cwrap(Lh,null,["number","number","number","array","number","array","array","number","number"])}function R_e(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=s==="NHWC"?a.shape[1]:a.shape[2],c=s==="NHWC"?a.shape[2]:a.shape[3],u=s==="NHWC"?a.shape[3]:a.shape[1],d=l*i,h=c*i,p=u/(i*i),f=s==="NHWC"?[o,d,h,p]:[o,p,d,h],m=t.makeOutput(f,"float32"),g=t.dataIdMap.get(a.dataId).id,b=new Uint8Array(new Int32Array(k.computeStrides(a.shape)).buffer),y=new Uint8Array(new Int32Array(f).buffer),v=new Uint8Array(new Int32Array(k.computeStrides(f)).buffer),x=t.dataIdMap.get(m.dataId).id;return QU(g,i,s==="NHWC"?1:0,b,a.shape.length-1,y,v,f.length,x),m}var D_e={kernelName:Lh,backendName:"wasm",setupFunc:A_e,kernelFunc:R_e},eV;function F_e(e){eV=e.wasm.cwrap(zu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function M_e(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(i.dataId).id,{strides:l,dilations:c,pad:u,dimRoundingMode:d}=n,h=c==null?[1,1]:c,p=E.computeConv2DInfo(a.shape,i.shape,l,h,u,d,!0),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,b=p.padInfo.right,y=p.padInfo.bottom,v=p.padInfo.left,x=p.dilationHeight,w=p.dilationWidth,$=p.strideHeight,C=p.strideWidth,T=p.inChannels,A=p.outChannels,D=p.padInfo.type==="SAME"?1:0;if(p.dataFormat!=="channelsLast")throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));let N=r.makeOutput(p.outShape,"float32"),I=r.dataIdMap.get(N.dataId).id;return eV(s,a.shape[0],a.shape[1],a.shape[2],o,f,m,g,b,y,v,D,x,w,$,C,T,A,I),N}var O_e={kernelName:zu,backendName:"wasm",setupFunc:F_e,kernelFunc:M_e},tV;function P_e(e){tV=e.wasm.cwrap("Diag",null,["number","number","number","number"])}function L_e(e){let{inputs:t,backend:n}=e,{x:r}=t,a=k.sizeFromShape(r.shape),i=n.makeOutput([...r.shape,...r.shape],r.dtype);return tV(n.dataIdMap.get(r.dataId).id,mt[r.dtype],a,n.dataIdMap.get(i.dataId).id),i}var z_e={kernelName:Ym,backendName:"wasm",setupFunc:P_e,kernelFunc:L_e},nV;function B_e(e){nV=e.wasm.cwrap(Bu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function W_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;if(a.dtype!==i.dtype)throw new Error("Dilation2D error: x must have the same dtype as filter. Got ".concat(a.dtype," and ").concat(i.dtype));let c=E.computeDilation2DInfo(a.shape,i.shape,s,o,"NHWC",l),u=n.makeOutput(c.outShape,a.dtype);return nV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,mt[a.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),u}var U_e={kernelName:Bu,backendName:"wasm",setupFunc:B_e,kernelFunc:W_e},rV;function V_e(e){rV=e.wasm.cwrap(Zd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function j_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r;if(a.dtype!==i.dtype||a.dtype!==s.dtype)throw new Error("Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ".concat(a.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));let u=E.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",c),d=n.makeOutput(i.shape,i.dtype);return rV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,mt[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),d}var H_e={kernelName:Zd,backendName:"wasm",setupFunc:V_e,kernelFunc:j_e},aV;function G_e(e){aV=e.wasm.cwrap(Jd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function q_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r;if(a.dtype!==i.dtype||a.dtype!==s.dtype)throw new Error("Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ".concat(a.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));let u=E.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",c),d=n.makeOutput(a.shape,a.dtype);return aV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,mt[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),d}var K_e={kernelName:Jd,backendName:"wasm",setupFunc:G_e,kernelFunc:q_e},X_e=dt(Uu),iV;function Y_e(e){iV=e.wasm.cwrap(zh,null,["number","number","number"])}function J_e(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=n.makeOutput(a.shape,"float32"),s=o=>n.dataIdMap.get(o.dataId).id;return iV(s(a),s(r),s(i)),i}var Z_e={kernelName:zh,backendName:"wasm",setupFunc:Y_e,kernelFunc:J_e},Q_e=!1,eAe=Nn(Bh,Q_e,"bool"),tAe=dt(Vu),nAe=dt(ju,"float32");function kS(e){let{inputs:t,attrs:n,backend:r}=e,{input:a}=t,{dim:i}=n,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(k.assert(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),Yr({inputs:{x:a},backend:r,attrs:{shape:o}})}var rAe={kernelName:Wh,backendName:"wasm",kernelFunc:kS},aAe=dt(Hu,"float32");function sV(e){let{attrs:{shape:t,value:n,dtype:r},backend:a}=e,i=a.makeOutput(t,r);return a.typedArrayFromHeap(i).fill(n),i}var iAe={kernelName:Jm,backendName:"wasm",kernelFunc:sV},oV;function sAe(e){oV=e.wasm.cwrap(Uh,null,["number","number","number","number","number","number"])}function oAe(e){let{inputs:t,backend:n}=e,{image:r}=t,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,[o,l,c,u]=r.shape;return oV(i,o,l,c,u,s),a}var lAe={kernelName:Uh,backendName:"wasm",kernelFunc:oAe,setupFunc:sAe},uAe=dt(Gu),cAe=Nn(qu),lV;function dAe(e){lV=e.wasm.cwrap(Ku,null,["number","number","number","number","number","number","number"])}function hAe(e){let{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:a}=r,{x:i,mean:s,variance:o,offset:l,scale:c}=n,u=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(s.dataId).id,h=t.dataIdMap.get(o.dataId).id,p=l!=null?t.dataIdMap.get(l.dataId).id:0,f=c!=null?t.dataIdMap.get(c.dataId).id:0,m=t.makeOutput(i.shape,i.dtype);if(k.sizeFromShape(i.shape)===0)return m;let g=t.dataIdMap.get(m.dataId).id;return lV(u,d,h,p,f,a,g),m}var pAe={kernelName:Ku,backendName:"wasm",setupFunc:dAe,kernelFunc:hAe},uV;function fAe(e){uV=e.wasm.cwrap(Zl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function mAe(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dataFormat:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=n,m=E.computeConv2DInfo(a.shape,i.shape,l,u,c,h),g=Em[p];if(g==null)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));let b=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,v=m.outChannels,x=0;if(s!=null){let J=r.dataIdMap.get(s.dataId);if(J.shape.length!==1)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(J.shape.length,"."));if(J.shape[0]!==v)throw new Error("FusedConv2D bias shape (".concat(J.shape,") does not match the number of output channels (").concat(v,")"));x=J.id}let w=m.filterHeight,$=m.filterWidth,C=m.padInfo.top,T=m.padInfo.right,A=m.padInfo.bottom,D=m.padInfo.left,N=m.dilationHeight,I=m.dilationWidth,M=m.strideHeight,P=m.strideWidth,z=m.inChannels,j=m.padInfo.type==="SAME"?1:0,K=m.batchSize,O=m.inHeight,W=m.inWidth;if(d!=="NHWC")throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));let L=r.makeOutput(m.outShape,"float32"),H=r.dataIdMap.get(L.dataId).id,Z=o==null?0:r.dataIdMap.get(o.dataId).id;return uV(b,K,O,W,y,w,$,x,C,T,A,D,j,N,I,M,P,z,v,g,Z,f||0,H),L}var gAe={kernelName:Zl,backendName:"wasm",setupFunc:fAe,kernelFunc:mAe},cV;function bAe(e){cV=e.wasm.cwrap(Ql,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function yAe(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dataFormat:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=n,m=E.computeConv2DInfo(a.shape,i.shape,l,u,c,h,!0),g=Em[p];if(g==null)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));let b=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,v=m.outChannels,x=0;if(s!=null){let J=r.dataIdMap.get(s.dataId);if(J.shape.length!==1)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(J.shape.length,"."));if(J.shape[0]!==v)throw new Error("FusedDepthwiseConv2D bias shape (".concat(J.shape,") does not match the number of output channels (").concat(v,")"));x=J.id}let w=m.filterHeight,$=m.filterWidth,C=m.padInfo.top,T=m.padInfo.right,A=m.padInfo.bottom,D=m.padInfo.left,N=m.dilationHeight,I=m.dilationWidth,M=m.strideHeight,P=m.strideWidth,z=m.inChannels,j=m.padInfo.type==="SAME"?1:0,K=m.batchSize,O=m.inHeight,W=m.inWidth;if(d!=="NHWC")throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));let L=r.makeOutput(m.outShape,"float32"),H=r.dataIdMap.get(L.dataId).id,Z=o==null?0:r.dataIdMap.get(o.dataId).id;return cV(b,K,O,W,y,w,$,x,C,T,A,D,j,N,I,M,P,z,v,g,Z,f||0,H),L}var vAe={kernelName:Ql,backendName:"wasm",setupFunc:bAe,kernelFunc:yAe},dV;function xAe(e){dV=e.wasm.cwrap(jh,null,["number","number","number","number","number","number","array","number"])}function wAe(e){let{backend:t,inputs:n}=e,{params:r,indices:a}=n,[i,s,o,l]=M2.prepareAndValidate(r,a),c=t.makeOutput(i,r.dtype);if(s===0)return c;let u=a.shape,d=u[u.length-1],h=t.dataIdMap.get(r.dataId).id,p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(c.dataId).id;return dV(h,mt[r.dtype],p,s,d,o,f,m),c}var kAe={kernelName:jh,backendName:"wasm",setupFunc:xAe,kernelFunc:wAe},hV;function SAe(e){hV=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function IAe(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,indices:i}=n,{axis:s,batchDims:o}=r,l=k.parseAxisParam(s,a.shape)[0],c=t.readSync(i.dataId),u=a.shape[l];for(let C=0;C<c.length;++C){let T=c[C];k.assert(T<=u-1&&T>=0,()=>"GatherV2: the index value ".concat(T," is not in [0, ").concat(u-1,"]"))}let d=E.segment_util.collectGatherOpShapeInfo(a,i,l,o),h=Yr({inputs:{x:a},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),p=k.sizeFromShape(i.shape),f=Yr({inputs:{x:i},attrs:{shape:[d.batchSize,p/d.batchSize]},backend:t}),m=[d.batchSize,d.outerSize,p/d.batchSize,d.sliceSize],g=t.makeOutput(m,a.dtype);if(k.sizeFromShape(a.shape)===0)return g;let b=h.shape.length-1,y=t.dataIdMap.get(h.dataId).id,v=t.dataIdMap.get(f.dataId).id,x=t.dataIdMap.get(g.dataId).id,w=new Uint8Array(new Int32Array(k.computeStrides(h.shape)).buffer),$=new Uint8Array(new Int32Array(k.computeStrides(m)).buffer);return hV(y,mt[a.dtype],w,b,v,d.batchSize,$,x),t.disposeData(h.dataId),t.disposeData(f.dataId),g.shape=d.outputShape,g}var $Ae={kernelName:Vh,backendName:"wasm",setupFunc:SAe,kernelFunc:IAe},CAe=!1,TAe=Nn(Hh,CAe,"bool"),EAe=!1,NAe=Nn(Xu,EAe,"bool"),_Ae=dt(Ju,"bool"),AAe=dt(Zu,"bool"),RAe=dt(Qu,"bool"),pV;function DAe(e){pV=e.wasm.cwrap(ec,null,["number","number","number","number"])}function FAe(e){let{inputs:{x:t},attrs:{alpha:n},backend:r}=e,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(k.sizeFromShape(t.shape)!==0){let s=r.dataIdMap.get(i.dataId).id;pV(a,mt[t.dtype],n,s)}return i}var MAe={kernelName:ec,backendName:"wasm",setupFunc:DAe,kernelFunc:FAe},OAe=!1,PAe=Nn(Gh,OAe,"bool"),LAe=!1,zAe=Nn(qh,LAe,"bool"),fV;function BAe(e){fV=e.wasm.cwrap(Kh,null,["number","number","number","number"])}function WAe(e){let{attrs:t,backend:n}=e,{start:r,stop:a,num:i}=t,s=Math.floor(i),o=n.makeOutput([s],"float32");return fV(n.dataIdMap.get(o.dataId).id,r,a,s),o}var UAe={kernelName:Kh,backendName:"wasm",setupFunc:BAe,kernelFunc:WAe},VAe=dt(tc),jAe=dt(nc),HAe=!1,GAe=Nn(Xh,HAe,"bool"),qAe=dt(Yh),KAe=!1,XAe=Nn(Jh,KAe,"bool"),YAe=!1,JAe=Nn(F3,YAe,"bool"),mV;function ZAe(e){mV=e.wasm.cwrap(rc,null,["number","number","number","number","number","number","number"])}function QAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;if(a.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");let c=n.makeOutput(a.shape,a.dtype);return mV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,a.shape[3],i,s,o,l),c}var eRe={kernelName:rc,backendName:"wasm",setupFunc:ZAe,kernelFunc:QAe},gV;function tRe(e){gV=e.wasm.cwrap(Zh,null,["number","number","number","number","number","number","number","number","number"])}function nRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r;if(a.dtype!=="float32"||i.dtype!=="float32"||s.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let d=n.makeOutput(a.shape,a.dtype);return gV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,s.shape[3],o,l,c,u),d}var rRe={kernelName:Zh,backendName:"wasm",setupFunc:tRe,kernelFunc:nRe},bV;function aRe(e){bV=e.wasm.cwrap(ac,null,["number","number","number","number"])}function iRe(e){let{backend:t,inputs:n,attrs:r}=e,{reductionIndices:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:d,inputWasTransposed:h}=ll(s,a,t);if(h){let y=t.dataIdMap.get(c.dataId).id;l=c,o=y}let p=l.shape.length;E.assertAxesAreInnerMostDims("max",u,p);let[f,m]=E.computeOutAndReduceShapes(l.shape,u),g=k.sizeFromShape(m),b=t.makeOutput(f,s.dtype);if(k.sizeFromShape(l.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;bV(o,mt[s.dtype],g,y)}if(h&&t.disposeData(c.dataId),i){let y=E.expandShapeToKeepDim(b.shape,d);b.shape=y}return b}var sRe={kernelName:ac,backendName:"wasm",setupFunc:aRe,kernelFunc:iRe},oRe=Nn(ic),yV;function lRe(e){yV=e.wasm.cwrap(sc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function uRe(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,i=r.dataIdMap.get(a.dataId).id;k.assert(a.dtype==="float32",()=>"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,"."));let{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=n,u=E.computePool2DInfo(a.shape,s,o,1,l,c),d=u.filterHeight,h=u.filterWidth,p=u.padInfo.top,f=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,b=u.dilationHeight,y=u.dilationWidth,v=u.strideHeight,x=u.strideWidth,w=u.inChannels,$=u.outChannels;if(u.dataFormat!=="channelsLast")throw new Error("wasm backend does not support dataFormat:'".concat(u.dataFormat,"'. Please use 'channelsLast'."));let C=r.makeOutput(u.outShape,"float32"),T=r.dataIdMap.get(C.dataId).id;return yV(i,a.shape[0],a.shape[1],a.shape[2],d,h,p,f,m,g,b,y,v,x,w,$,T),C}var cRe={kernelName:sc,backendName:"wasm",setupFunc:lRe,kernelFunc:uRe},vV;function dRe(e){vV=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function hRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=E.computePool3DInfo(a.shape,i,s,1,o,l,c),d=n.makeOutput(u.outShape,a.dtype);return vV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),d}var pRe={kernelName:Qh,backendName:"wasm",setupFunc:dRe,kernelFunc:hRe},xV;function fRe(e){xV=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function mRe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=E.computePool3DInfo(i.shape,s,o,1,l,c),d=n.makeOutput(i.shape,i.dtype);return xV(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),d}var gRe={kernelName:Qm,backendName:"wasm",setupFunc:fRe,kernelFunc:mRe},wV;function bRe(e){wV=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function yRe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=E.computePool2DInfo(i.shape,s,o,1,l,c),d=n.makeOutput(i.shape,i.dtype);return wV(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),d}var vRe={kernelName:Zm,backendName:"wasm",setupFunc:bRe,kernelFunc:yRe},kV;function xRe(e){kV=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function wRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=r;k.assert(a.shape.length===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));let c=[1,1];k.assert(E.eitherStridesOrDilationsAreOne(s,c),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(c,"'"));let u=E.computePool2DInfo(a.shape,i,s,[1,1],o),d=n.makeOutput(u.outShape,a.dtype),h=n.makeOutput(u.outShape,"int32");return kV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,n.dataIdMap.get(h.dataId).id,mt[a.dtype],l,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),[d,h]}var kRe={kernelName:eg,backendName:"wasm",setupFunc:xRe,kernelFunc:wRe},SV;function SRe(e){SV=e.wasm.cwrap(oc,null,["number, number, number"])}function IRe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:d,originalAxes:h,inputWasTransposed:p}=ll(s,a,t),f=d;if(p){let x=t.dataIdMap.get(u.dataId).id;x!==o&&(c=u,l=x,f=E.getInnerMostAxes(f.length,c.shape.length))}E.assertAxesAreInnerMostDims("mean",f,c.shape.length);let[m,g]=E.computeOutAndReduceShapes(c.shape,f),b=k.sizeFromShape(g),y=c;c.dtype!=="float32"&&(y=ul({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(y.dataId).id);let v=t.makeOutput(m,"float32");if(k.sizeFromShape(c.shape)!==0){let x=t.dataIdMap.get(v.dataId).id;SV(l,b,x)}if(p&&t.disposeData(u.dataId),i){let x=E.expandShapeToKeepDim(v.shape,h);v.shape=x}return c.dtype!=="float32"&&t.disposeData(y.dataId),v}var $Re={kernelName:oc,backendName:"wasm",setupFunc:SRe,kernelFunc:IRe},IV;function CRe(e){IV=e.wasm.cwrap(lc,null,["number","number","number","number"])}function TRe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:d,originalAxes:h,inputWasTransposed:p}=ll(s,a,t);if(p){let v=t.dataIdMap.get(u.dataId).id;v!==o&&(c=u,l=v)}let f=c.shape.length;E.assertAxesAreInnerMostDims("min",d,f);let[m,g]=E.computeOutAndReduceShapes(c.shape,d),b=k.sizeFromShape(g),y=t.makeOutput(m,c.dtype);if(k.sizeFromShape(c.shape)!==0){let v=t.dataIdMap.get(y.dataId).id;IV(l,mt[s.dtype],b,v)}if(p&&t.disposeData(u.dataId),i){let v=E.expandShapeToKeepDim(y.shape,h);y.shape=v}return y}var ERe={kernelName:lc,backendName:"wasm",setupFunc:CRe,kernelFunc:TRe},NRe=Nn(uc),SS;(function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"})(SS||(SS={}));var $V;function _Re(e){$V=e.wasm.cwrap(cc,null,["number","array","number","number","array","array","number","number"])}function ARe(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,mode:a}}=e,i=r.map((f,m)=>f[0]+t.shape[m]+f[1]),s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),l=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),u=r.map(f=>f[0]),d=r.map(f=>f[1]),h=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(d).buffer);return $V(s,c,t.shape.length,mt[t.dtype],h,p,SS[a],l),o}var RRe={kernelName:cc,backendName:"wasm",kernelFunc:ARe,setupFunc:_Re},CV;function DRe(e){CV=e.wasm.cwrap(Fc,null,["number","number","number","number"])}function TV(e){let{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),s=t.dataIdMap.get(i.dataId).id,o=n.shape[r],l=k.sizeFromShape(n.shape)/o;return k.sizeFromShape(i.shape)===0||CV(a,s,o,l),i}var FRe={kernelName:Fc,backendName:"wasm",setupFunc:DRe,kernelFunc:TV},EV;function MRe(e){EV=e.wasm.cwrap(ep,null,["number","number","number","number","number","number"])}function ORe(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;if(a.dtype!=="float32")throw new Error("Tensor logits must have dtype float32, got ".concat(a.dtype));let l=o?a:TV({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),[c,u]=l.shape,d=n.makeOutput([c,i],"int32");return EV(n.dataIdMap.get(l.dataId).id,c,u,i,s,n.dataIdMap.get(d.dataId).id),o||n.disposeData(l.dataId),d}var PRe={kernelName:ep,backendName:"wasm",setupFunc:MRe,kernelFunc:ORe},LRe=Nn(dc),zRe=Nn(hc),BRe=dt(tp);function YT(e,t){let n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],s=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:s}}var NV;function WRe(e){NV=e.wasm.cwrap(rp,"number",["number","number","number","number","number"])}function URe(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s}=r,{boxes:o,scores:l}=n,c=t.dataIdMap.get(o.dataId).id,u=t.dataIdMap.get(l.dataId).id,d=NV(c,u,i,a,s),{pSelectedIndices:h,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=YT(t,d);return t.wasm._free(f),t.wasm._free(m),t.makeOutput([p],"int32",h)}var VRe={kernelName:rp,backendName:"wasm",setupFunc:WRe,kernelFunc:URe},_V;function jRe(e){_V=e.wasm.cwrap(ap,"number",["number","number","number","number","number","bool"])}function HRe(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s,padToMaxOutputSize:o}=r,{boxes:l,scores:c}=n,u=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(c.dataId).id,h=_V(u,d,i,a,s,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=YT(t,h);t.wasm._free(m);let b=t.makeOutput([f],"int32",p),y=t.makeOutput([],"int32",g);return[b,y]}var GRe={kernelName:ap,backendName:"wasm",setupFunc:jRe,kernelFunc:HRe},AV;function qRe(e){AV=e.wasm.cwrap(ip,"number",["number","number","number","number","number","number"])}function KRe(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s,softNmsSigma:o}=r,{boxes:l,scores:c}=n,u=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(c.dataId).id,h=AV(u,d,i,a,s,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=YT(t,h);t.wasm._free(g);let b=t.makeOutput([f],"int32",p),y=t.makeOutput([f],"float32",m);return[b,y]}var XRe={kernelName:ip,backendName:"wasm",setupFunc:qRe,kernelFunc:KRe},YRe=!1,JRe=Nn(np,YRe,"bool"),RV;function ZRe(e){RV=e.wasm.cwrap(pc,null,["number","number","number","number","number"])}function QRe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,c=n.makeOutput([...a.shape,s],i),u=n.dataIdMap.get(c.dataId).id,d=n.dataIdMap.get(a.dataId).id;return RV(d,s,o,l,u),c}var eDe={kernelName:pc,backendName:"wasm",setupFunc:ZRe,kernelFunc:QRe};function tDe(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}var nDe={kernelName:sp,backendName:"wasm",kernelFunc:tDe};function rDe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(t.length===1)return kS({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(u=>{k.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),k.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(u=>{let d=kS({inputs:{input:u},backend:n,attrs:{dim:a}});return o.push(d),d}),c=VU({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(u=>n.disposeData(u.dataId)),c}var aDe={kernelName:op,backendName:"wasm",kernelFunc:rDe},DV;function iDe(e){DV=e.wasm.cwrap(fc,null,["number","array","number","number","array","array","number","number"])}function sDe(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:a}}=e,i=r.map((f,m)=>f[0]+t.shape[m]+f[1]);if(k.sizeFromShape(t.shape)===0)return sV({backend:n,attrs:{shape:i,value:a,dtype:t.dtype}});let s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),l=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),u=r.map(f=>f[0]),d=r.map(f=>f[1]),h=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(d).buffer);return DV(s,c,t.shape.length,mt[t.dtype],h,p,a,l),o}var FV={kernelName:fc,backendName:"wasm",kernelFunc:sDe,setupFunc:iDe},oDe=Nn(mc),MV;function lDe(e){MV=e.wasm.cwrap(gc,null,["number","number","number"])}function uDe(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,o=i,l=r,c=l;l.dtype!=="float32"&&(c=ul({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),o=n.dataIdMap.get(c.dataId).id);let u=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(u.dataId).id;return MV(o,s,d),l.dtype!=="float32"&&n.disposeData(c.dataId),u}var cDe={kernelName:gc,backendName:"wasm",setupFunc:lDe,kernelFunc:uDe},OV;function dDe(e){OV=e.wasm.cwrap(bc,null,["number","number","number","number"])}function hDe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:d,originalAxes:h,inputWasTransposed:p}=ll(s,a,t),f=d;if(p){let v=t.dataIdMap.get(u.dataId).id;v!==o&&(c=u,l=v,f=E.getInnerMostAxes(f.length,c.shape.length))}E.assertAxesAreInnerMostDims("prod",f,c.shape.length);let[m,g]=E.computeOutAndReduceShapes(c.shape,f),b=k.sizeFromShape(g),y=t.makeOutput(m,c.dtype);if(k.sizeFromShape(c.shape)!==0){let v=t.dataIdMap.get(y.dataId).id;OV(l,b,mt[y.dtype],v)}if(p&&t.disposeData(u.dataId),i){let v=E.expandShapeToKeepDim(y.shape,h);y.shape=v}return y}var pDe={kernelName:bc,backendName:"wasm",setupFunc:dDe,kernelFunc:hDe},fDe=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=$T(r,a,i,s),l=t.makeOutput([o.length],s);return t.typedArrayFromHeap(l).set(o),l},mDe={kernelName:tg,backendName:"wasm",kernelFunc:fDe},gDe=Nn(Wu),bDe=dt(yc),yDe=dt(vc),vDe=dt(kc),PV;function xDe(e){PV=e.wasm.cwrap(wc,null,["number","number","number","number","number","number","number","number","number","number"])}function wDe(e){let{backend:t,inputs:n,attrs:r}=e,{images:a}=n,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,[u,d,h,p]=a.shape,f=[u,l,c,p],m=t.dataIdMap.get(a.dataId),g;m.dtype!=="float32"&&(g=ul({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(g.dataId));let b=m.id,y=t.makeOutput(f,"float32");if(k.sizeFromShape(a.shape)===0)return y;let v=t.dataIdMap.get(y.dataId).id;return PV(b,u,d,h,p,l,c,i?1:0,s?1:0,v),g!=null&&t.disposeData(g.dataId),y}var kDe={kernelName:wc,backendName:"wasm",setupFunc:xDe,kernelFunc:wDe},LV;function SDe(e){LV=e.wasm.cwrap(cp,null,["number","number","number","array","array","boolean"])}function IDe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=n.makeOutput(a.shape,"float32"),l=n.dataIdMap.get(a.dataId),c;return l.dtype!=="float32"&&(c=ul({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(c.dataId)),LV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(a.shape).buffer),new Uint8Array(new Int32Array(i.shape).buffer),s),c!=null&&n.disposeData(c.dataId),o}var $De={kernelName:cp,backendName:"wasm",setupFunc:SDe,kernelFunc:IDe},zV;function CDe(e){zV=e.wasm.cwrap(xc,null,["number","number","number","number","number","number","number","number","number","number"])}function TDe(e){let{backend:t,inputs:n,attrs:r}=e,{images:a}=n,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,[u,d,h,p]=a.shape,f=[u,l,c,p],m=t.makeOutput(f,"float32");if(k.sizeFromShape(a.shape)===0)return m;let g=t.dataIdMap.get(a.dataId),b;g.dtype!=="float32"&&(b=ul({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(b.dataId));let y=g.id,v=t.dataIdMap.get(m.dataId).id;return zV(y,u,d,h,p,l,c,i?1:0,s?1:0,v),b!=null&&t.disposeData(b.dataId),m}var EDe={kernelName:xc,backendName:"wasm",setupFunc:CDe,kernelFunc:TDe},BV;function NDe(e){BV=e.wasm.cwrap(up,null,["number","number","number","array","array","boolean"])}function _De(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=n.makeOutput(a.shape,"float32"),l=n.dataIdMap.get(a.dataId),c;return l.dtype!=="float32"&&(c=ul({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(c.dataId)),BV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(a.shape).buffer),new Uint8Array(new Int32Array(i.shape).buffer),s),c!=null&&n.disposeData(c.dataId),o}var ADe={kernelName:up,backendName:"wasm",setupFunc:NDe,kernelFunc:_De},WV;function RDe(e){WV=e.wasm.cwrap(Sc,null,["number","array","number","array","number","number"])}function DDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=k.parseAxisParam(i,a.shape);if(a.shape.length===0)return Zx({inputs:{x:a},backend:n});let o=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,c=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(s).buffer),d=new Uint8Array(new Int32Array(a.shape).buffer);WV(l,u,s.length,d,a.shape.length,c);let h=Yr({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),h}var FDe={kernelName:Sc,backendName:"wasm",kernelFunc:DDe,setupFunc:RDe},UV;function MDe(e){UV=e.wasm.cwrap($p,null,["number","number","number","number","number","number","number","number","array","number","number"])}function ODe(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{radians:i,fillValue:s,center:o}=r,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(l.dataId).id,[d,h,p,f]=a.shape,[m,g]=E.getImageCenter(o,h,p),b=s===0,y=255,v=typeof s=="number"?[s,s,s,b?0:y]:[...s,y],x=new Uint8Array(new Int32Array(v).buffer);return UV(c,d,h,p,f,i,m,g,x,v.length,u),l}var PDe={kernelName:$p,backendName:"wasm",kernelFunc:ODe,setupFunc:MDe},LDe=dt(Ic),zDe=dt($c),VV;function BDe(e){VV=e.wasm.cwrap(dp,null,["number","number","number","number","number","number","array","number","number"])}function WDe(e){let{backend:t,inputs:n,attrs:r}=e,{indices:a,updates:i}=n,{shape:s}=r,o=t.makeOutput(s,i.dtype);if(k.sizeFromShape(s)===0)return o;let{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=gx.calculateShapes(i,a,s),p=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(i.dataId).id,m=new Uint8Array(new Int32Array(d).buffer),g=t.dataIdMap.get(o.dataId).id;return VV(p,f,mt[i.dtype],l,c,u,m,h,g),o}var UDe={kernelName:dp,backendName:"wasm",setupFunc:BDe,kernelFunc:WDe},jV;function VDe(e){jV=e.wasm.cwrap(pp,null,["number","number","number","number","number","number","bool","number"])}function jDe(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r;if(a.dtype!==i.dtype)throw new Error("SearchSorted error: sorted_sequence must have the same dtype as values. Got ".concat(a.dtype," and ").concat(i.dtype));let o=n.makeOutput(i.shape,"int32");function l(c){return n.dataIdMap.get(c.dataId).id}return jV(l(a),l(i),a.shape[0],a.shape[1],i.shape[1],mt[a.dtype],s==="left",l(o)),o}var HDe={kernelName:pp,backendName:"wasm",setupFunc:VDe,kernelFunc:jDe},HV;function GDe(e){HV=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function qDe(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(c.dataId).id,d=r.shape.length,h=a.shape.length,p=d===0||d>1||h===1?1:k.sizeFromShape(a.shape.slice(1));return HV(s,o,l,p,u),c}var KDe={kernelName:fp,backendName:"wasm",kernelFunc:qDe,setupFunc:GDe},XDe=dt(Cc),GV;function YDe(e){GV=e.wasm.cwrap(_c,null,["number","number"])}function JDe(e){let{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return k.sizeFromShape(a.shape)===0||GV(r,i),a}var ZDe={kernelName:"Sigmoid",backendName:"wasm",setupFunc:YDe,kernelFunc:JDe},QDe=dt(Nc),eFe=dt(Tc),tFe=dt(Ec),nFe=dt(Ac);function rFe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r,o=k.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);let c=FV.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=E.getReshaped(c.shape,i,o,!1),d=E.getPermuted(u.length,i.length,!1),h=E.getReshapedPermuted(c.shape,i,o,!1),p=Yr({inputs:{x:c},backend:n,attrs:{shape:u}}),f=jo({inputs:{x:p},backend:n,attrs:{perm:d}}),m=Yr({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeData(c.dataId),n.disposeData(p.dataId),n.disposeData(f.dataId),m}var aFe={kernelName:gp,backendName:"wasm",kernelFunc:rFe},qV;function iFe(e){qV=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function sFe(e){let{backend:t,inputs:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=n,o=r.shape[0],l=r.shape[1],c=t.readSync(i.dataId)[0],u=[o+c,l],d=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(s.dataId).id,f=t.makeOutput(u,r.dtype),m=t.dataIdMap.get(f.dataId).id,g=t.makeOutput(u.slice(0,1),a.dtype),b=t.dataIdMap.get(g.dataId).id,y=t.makeOutput([c],"bool"),v=t.dataIdMap.get(y.dataId).id,x=t.makeOutput([o],r.dtype),w=t.dataIdMap.get(x.dataId).id,$=t.makeOutput([4],"int32"),C=t.dataIdMap.get($.dataId).id,T=qV(d,h,mt[a.dtype],o,c,l,p,m,b,v,w,C),A=t.readSync($.dataId),D;switch(A[0]){case 1:{D=E.getSparseFillEmptyRowsIndicesDenseShapeMismatch(A[1]);break}case 2:{D=E.getSparseFillEmptyRowsNegativeIndexErrorMessage(A[1],A[2]);break}case 3:D=E.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(A[1],A[2],A[3]);break;default:D=""}if(t.disposeData($.dataId),D)throw t.disposeData(f.dataId),t.disposeData(g.dataId),t.disposeData(y.dataId),t.disposeData(x.dataId),new Error(D);let N=f,I=g;return T!==u[0]&&(N=mu({inputs:{x:f},attrs:{begin:0,size:[T,l]},backend:t}),I=mu({inputs:{x:g},attrs:{begin:0,size:T},backend:t}),t.disposeData(f.dataId),t.disposeData(g.dataId)),[N,I,y,x]}var oFe={kernelName:ng,backendName:"wasm",setupFunc:iFe,kernelFunc:sFe},KV;function lFe(e){KV=e.wasm.cwrap(yp,null,["number","number","number","number","number","number","number"])}function uFe(e){let{backend:t,inputs:n}=e,{inputIndices:r,inputShape:a,newShape:i}=n;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=t.dataIdMap.get(r.dataId).id,o=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,c=r.shape[0],u=k.sizeFromShape(i.shape),d=t.makeOutput([c,u],r.dtype),h=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([u],i.dtype),f=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;KV(s,o,l,c,h,f,g);let b=t.readSync(m.dataId),y;switch(b[0]){case 0:{y=E.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(b[1],b[2]);break}case 1:{y=E.getSparseReshapeNegativeOutputDimErrorMessage(b[1],b[2]);break}case 2:y=E.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let v=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));y=E.getSparseReshapeInputOutputMultipleErrorMessage(v,x);break}case 4:{let v=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));y=E.getSparseReshapeInputOutputMismatchErrorMessage(v,x);break}default:y=""}if(t.disposeData(m.dataId),y)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(y);return[d,p]}var cFe={kernelName:yp,backendName:"wasm",setupFunc:lFe,kernelFunc:uFe},XV;function YV(e){XV=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function JV(e,t){let{backend:n,inputs:r}=e,{data:a,indices:i,segmentIds:s}=r,o=i.shape[0],l=n.readSync(s.dataId,o-1,o)[0],c=o>0?l+1:0;if(c<0)throw new Error(E.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let u=a.shape.slice();u[0]=c;let d=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(s.dataId).id,f=n.makeOutput(u,a.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput([4],"int32"),b=n.dataIdMap.get(g.dataId).id;XV(d,mt[a.dtype],a.shape[0],h,p,m,b,t,0);let y=n.readSync(g.dataId),v;switch(y[0]){case 0:{v=E.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break}case 1:{v=E.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break}case 2:v=E.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y[1],y[2]);break;case 3:v=E.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(y[1],y[2],y[3]);break;default:v=""}if(n.disposeData(g.dataId),v)throw n.disposeData(f.dataId),new Error(v);return f}function dFe(e){return JV(e,!0)}var hFe={kernelName:rg,backendName:"wasm",setupFunc:YV,kernelFunc:dFe};function pFe(e){return JV(e,!1)}var fFe={kernelName:ag,backendName:"wasm",setupFunc:YV,kernelFunc:pFe},ZV;function mFe(e){ZV=e.wasm.cwrap(vp,null,["number","number","number","number","number","number","number","number","array","number","number"])}function gFe(e){let{backend:t,inputs:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=n,{outputShape:o}=r,l=t.makeOutput(o,s.dtype);if(k.sizeFromShape(o)===0)return l;let{sliceRank:c,numUpdates:u,sliceSize:d,strides:h,outputSize:p}=E.calculateShapes(i,a,o),f=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,g=t.dataIdMap.get(s.dataId).id,b=new Uint8Array(new Int32Array(h).buffer),y=t.dataIdMap.get(l.dataId).id;return ZV(f,m,i.shape.length,g,mt[s.dtype],c,u,d,b,p,y),l}var bFe={kernelName:vp,backendName:"wasm",setupFunc:mFe,kernelFunc:gFe};function yFe(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=n,o=k.parseAxisParam(s,a.shape)[0],l=E.prepareSplitSize(a,i,o),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(d=>{let h=[...u];h[o]=d;let p=mu({inputs:{x:a},attrs:{begin:c,size:h},backend:r});return c[o]+=d,p})}var vFe={kernelName:bp,backendName:"wasm",kernelFunc:yFe},xFe=dt(Rc),wFe=dt(ig),kFe=Nn(Mc),QV;function SFe(e){QV=e.wasm.cwrap(el,null,["number","number","number","number"])}function IFe(e){let{backend:t,inputs:n,attrs:r}=e,{alpha:a}=r,{x:i}=n,s=t.dataIdMap.get(i.dataId).id,o=t.makeOutput(i.shape,i.dtype),l=t.dataIdMap.get(o.dataId).id;return QV(s,a,mt[i.dtype],l),o}var $Fe={kernelName:el,backendName:"wasm",setupFunc:SFe,kernelFunc:IFe},ej;function CFe(e){ej=e.wasm.cwrap(xp,null,["number","array","number","array","array","array","array","array","number","number"])}function TFe(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:v,strides:x}=Fn.sliceInfo(a.shape,i,s,o,l,c,u,d,h),w;if(m)w=Yr({inputs:{x:a},backend:t,attrs:{shape:f}});else if(g||b){k.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let $=Fn.computeOutShape(y,v,x),C=mu({inputs:{x:a},backend:t,attrs:{begin:y,size:$}});w=Yr({inputs:{x:C},backend:t,attrs:{shape:f}}),t.disposeData(C.dataId)}else{let $=t.makeOutput(p,"float32"),C=t.dataIdMap.get(a.dataId).id,T=new Uint8Array(new Int32Array(k.computeStrides(a.shape)).buffer),A=new Uint8Array(new Int32Array(y).buffer),D=new Uint8Array(new Int32Array(v).buffer),N=new Uint8Array(new Int32Array(x).buffer),I=new Uint8Array(new Int32Array(p).buffer),M=new Uint8Array(new Int32Array(k.computeStrides(p)).buffer),P=t.dataIdMap.get($.dataId).id;ej(C,T,a.shape.length,A,D,N,I,M,p.length,P),w=Yr({inputs:{x:$},backend:t,attrs:{shape:f}}),t.disposeData($.dataId)}return w}var EFe={kernelName:xp,backendName:"wasm",setupFunc:CFe,kernelFunc:TFe};function NFe(e){let{backend:t,inputs:n,attrs:r}=e,{data:a,dataSplits:i}=n,{separator:s,nGramWidths:o,leftPad:l,rightPad:c,padWidth:u,preserveShortSequences:d}=r,h=t.readSync(a.dataId),p=t.readSync(i.dataId),[f,m]=TT(h,p,s,o,l,c,u,d),g=t.makeOutput([f.length],"string"),b=t.dataIdMap.get(g.dataId);b.stringBytes=f;let y=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(y).set(m),[g,y]}var _Fe={kernelName:og,backendName:"wasm",kernelFunc:NFe};function AFe(e){let{backend:t,inputs:n,attrs:r}=e,{input:a,delimiter:i}=n,{skipEmpty:s}=r,o=t.readSync(a.dataId),l=t.readSync(i.dataId),[c,u,d]=ET(o,l[0],s),h=u.length,p=t.makeOutput([h,2],"int32");t.typedArrayFromHeap(p).set(c);let f=t.makeOutput([h],"string"),m=t.dataIdMap.get(f.dataId);m.stringBytes=u;let g=t.makeOutput([2],"int32");return t.typedArrayFromHeap(g).set(d),[p,f,g]}var RFe={kernelName:lg,backendName:"wasm",kernelFunc:AFe};function DFe(e){let{backend:t,inputs:n,attrs:r}=e,{input:a}=n,{numBuckets:i}=r,s=t.readSync(a.dataId),o=NT(s,i),l=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(l).set(o),l}var FFe={kernelName:ug,backendName:"wasm",kernelFunc:DFe},MFe=Nn(Oc),tj;function OFe(e){tj=e.wasm.cwrap(Dc,null,["number","number","number","number"])}function PFe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:d,originalAxes:h,inputWasTransposed:p}=ll(s,a,t),f=d;if(p){let v=t.dataIdMap.get(u.dataId).id;v!==o&&(c=u,l=v,f=E.getInnerMostAxes(f.length,c.shape.length))}E.assertAxesAreInnerMostDims("sum",f,c.shape.length);let[m,g]=E.computeOutAndReduceShapes(c.shape,f),b=k.sizeFromShape(g),y=t.makeOutput(m,c.dtype);if(k.sizeFromShape(c.shape)!==0){let v=t.dataIdMap.get(y.dataId).id;tj(l,b,mt[y.dtype],v)}if(p&&t.disposeData(u.dataId),i){let v=E.expandShapeToKeepDim(y.shape,h);y.shape=v}return y}var LFe={kernelName:Dc,backendName:"wasm",setupFunc:OFe,kernelFunc:PFe},zFe=dt(Pc),BFe=dt(Lc),nj;function WFe(e){nj=e.wasm.cwrap(hp,null,["number","number","number","number","number","number","array","number","number","number"])}function UFe(e){let{backend:t,inputs:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=n,o=t.makeOutput(a.shape,a.dtype);if(k.sizeFromShape(a.shape)===0)return o;let{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=gx.calculateShapes(s,i,a.shape),p=t.dataIdMap.get(i.dataId).id,f=t.dataIdMap.get(s.dataId).id,m=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),b=t.dataIdMap.get(o.dataId).id;return nj(p,f,mt[s.dtype],l,c,u,g,h,b,m),o}var VFe={kernelName:hp,backendName:"wasm",setupFunc:WFe,kernelFunc:UFe},rj;function jFe(e){rj=e.wasm.cwrap(Qo,null,["number","array","number","array","number","number"])}function HFe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,i=n.dataIdMap.get(a.dataId).id,{reps:s}=r,o=new Array(a.shape.length);for(let h=0;h<o.length;h++)o[h]=a.shape[h]*s[h];let l=new Uint8Array(new Int32Array(a.shape).buffer),c=new Uint8Array(new Int32Array(o).buffer),u=n.makeOutput(o,a.dtype),d=n.dataIdMap.get(u.dataId).id;return rj(i,l,a.shape.length,c,o.length,mt[u.dtype],d),u}var GFe={kernelName:Qo,backendName:"wasm",setupFunc:jFe,kernelFunc:HFe},aj;function qFe(e){aj=e.wasm.cwrap(wp,null,["number","array","number","number","number","bool","number","number"])}var KFe=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{k:a,sorted:i}=n,s=t.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=a;let c=t.makeOutput(l,r.dtype),u=t.dataIdMap.get(c.dataId).id,d=t.makeOutput(l,"int32"),h=t.dataIdMap.get(d.dataId).id;return aj(s,o,r.shape.length,mt[r.dtype],a,i,u,h),[c,d]},XFe={kernelName:wp,backendName:"wasm",setupFunc:qFe,kernelFunc:KFe},ij;function YFe(e){ij=e.wasm.cwrap(kp,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function JFe(e){let{backend:t,inputs:n,attrs:r}=e,{image:a,transforms:i}=n,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,h,p]=a.shape,[f,m]=c!=null?c:[d,h],g=[u,f,m,p],b=new Uint8Array(new Int32Array(k.computeStrides(a.shape)).buffer),y=new Uint8Array(new Int32Array(k.computeStrides(g)).buffer),v=t.makeOutput(g,a.dtype),x=t.dataIdMap.get(v.dataId).id,w=t.dataIdMap.get(a.dataId).id,$=t.dataIdMap.get(i.dataId).id,C=s==="nearest"?1:2,T;switch(o){case"constant":T=1;break;case"reflect":T=2;break;case"wrap":T=3;break;case"nearest":T=4;break;default:T=1;break}return ij(w,$,i.shape[0]>1,u,f,m,p,h,d,b,a.shape.length-1,y,g.length-1,C,T,l,x),v}var ZFe={kernelName:kp,backendName:"wasm",setupFunc:YFe,kernelFunc:JFe};function QFe(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t,{outputValues:s,outputShape:o,indices:l}=AT(r.readSync(i.dataId),a,i.shape,i.dtype);return[r.makeOutput(o,i.dtype,void 0,s),r.makeOutput([l.length],"int32",void 0,l)]}var eMe={kernelName:cg,backendName:"wasm",kernelFunc:QFe};function tMe(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a.shape[i],o=a.shape.length,l=new Array(o-1),c=0;for(let p=0;p<o;p++)p!==i&&(l[c++]=a.shape[p]);let u=new Array(s),d=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(let p=0;p<u.length;p++)d[i]=p,u[p]=mu({inputs:{x:a},attrs:{begin:d,size:h},backend:n});return u.map(({dataId:p,dtype:f})=>({dataId:p,dtype:f,shape:l}))}var nMe={kernelName:Sp,backendName:"wasm",kernelFunc:tMe};function rMe(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}var aMe={kernelName:Ip,backendName:"wasm",kernelFunc:rMe},iMe=[YEe,JEe,ZEe,QEe,eNe,rNe,dNe,fNe,mNe,gNe,bNe,yNe,vNe,xNe,wNe,INe,DNe,TNe,_Ne,PNe,VNe,GNe,qNe,XNe,YNe,JNe,e_e,t_e,a_e,o_e,c_e,p_e,g_e,b_e,y_e,w_e,I_e,T_e,__e,D_e,O_e,z_e,U_e,H_e,K_e,X_e,Z_e,eAe,tAe,nAe,rAe,aAe,iAe,lAe,uAe,cAe,pAe,gAe,vAe,kAe,$Ae,TAe,NAe,aNe,_Ae,AAe,RAe,MAe,PAe,zAe,UAe,jAe,VAe,GAe,qAe,XAe,JAe,eRe,rRe,sRe,oRe,cRe,pRe,gRe,vRe,kRe,$Re,ERe,NRe,RRe,PRe,LRe,zRe,BRe,VRe,GRe,XRe,JRe,eDe,nDe,aDe,FV,oDe,cDe,pDe,mDe,gDe,bDe,yDe,vDe,FNe,kDe,$De,EDe,ADe,FDe,PDe,LDe,zDe,UDe,HDe,KDe,XDe,ZDe,QDe,eFe,tFe,WNe,FRe,nFe,aFe,oFe,cFe,hFe,fFe,bFe,vFe,xFe,wFe,kFe,$Fe,EFe,_Fe,RFe,FFe,MFe,LFe,zFe,BFe,VFe,GFe,XFe,ZFe,lNe,eMe,nMe,aMe];for(let e of iMe)hg(e);var IS=Q();IS.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}});IS.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(IS.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});var tD=Yo(nJ()),sMe=Yo(rJ()),nD=Yo(aJ()),rD=tD.default||tD,oMe=nD.default||nD,sj=class extends Vm{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(oj),$S=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new N0(this,ni())}write(e,t,n){let r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=k.now();return e(),{kernelMs:k.now()-t}}move(e,t,n,r,a){let i=this.dataIdNextNumber++;if(r==="string"){let c=t;this.dataIdMap.set(e,{id:i,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a});return}let s=k.sizeFromShape(n),o=s*k.bytesPerElement(r),l=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:i,memoryOffset:l,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,s,l),t!=null&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e,t,n){let{memoryOffset:r,dtype:a,shape:i,stringBytes:s}=this.dataIdMap.get(e);if(a==="string")return(t==null||t===0)&&(n==null||n>=s.length)?s:s.slice(t,n);t=t||0,n=n||k.sizeFromShape(i);let o=k.bytesPerElement(a),l=this.wasm.HEAPU8.slice(r+t*o,r+n*o);return cMe(l.buffer,a)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);t!=null&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,r){let a;if(n==null)a=this.write(r!=null?r:null,e,t);else{let i=this.dataIdNextNumber++;a={id:i},this.dataIdMap.set(a,{id:i,memoryOffset:n,shape:e,dtype:t,refCount:1});let s=k.sizeFromShape(e);this.wasm.tfjs.registerTensor(i,s,n)}return{dataId:a,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){let r=this.wasm.HEAPU8.buffer,{memoryOffset:a}=this.dataIdMap.get(n),i=k.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,a,i);case"int32":return new Int32Array(r,a,i);case"bool":return new Uint8Array(r,a,i);default:throw new Error("Unknown dtype ".concat(t))}}};function lMe(e){return(t,n)=>(k.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then(a=>{WebAssembly.instantiate(a,t).then(i=>{n(i.instance,i.module)})})}),{})}function aD(e,t,n){if(Dv!=null)return Dv;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),Bf!=null&&Bf[r]!=null?Bf[r]:n+r}async function uMe(){let[e,t]=await Promise.all([Q().getAsync("WASM_HAS_SIMD_SUPPORT"),Q().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{let a={};a.locateFile=(o,l)=>{if(o.endsWith(".worker.js")){let c=sMe.wasmWorkerContents.replace(/\n/g,"\\n"),u=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(u)}return o.endsWith(".wasm")?aD(e,t,$f!=null?$f:l):l+o},JT&&(a.instantiateWasm=lMe(aD(e,t,$f!=null?$f:"")));let i=!1;a.onAbort=()=>{i||Wf||(Wf=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))};let s;t&&e&&Dv==null?(a.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+rD.toString()],{type:"text/javascript"}),s=rD(a)):s=oMe(a),s.then(o=>{i=!0,Wf=!1;let l=null;o.tfjs={init:o.cwrap("init",null,[]),initWithThreadsCount:o.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:o.cwrap("get_threads_count","number",[]),registerTensor:o.cwrap("register_tensor",null,["number","number","number"]),disposeData:o.cwrap("dispose_data",l,["number"]),dispose:o.cwrap("dispose",l,[])},n({wasm:o})}).catch(r)})}function cMe(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}var dMe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Dv=null,$f=null,Bf={},Wf=!1,JT=!1;function hMe(e,t=!1){if(iP("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),Wf)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");Dv=e,JT=t}function pMe(e,t=!1){if(Wf)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof e=="string")$f=e;else{Bf=e;let n=dMe.filter(r=>Bf[r]==null);if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}JT=t}var oj=-1,$S=-1;function fMe(e){oj=e}function mMe(){if($S===-1)throw new Error("WASM backend not initialized.");return $S}var gMe="4.7.0",bMe=2;G0("wasm",async()=>{let{wasm:e}=await uMe();return new sj(e)},bMe);var iD="4.7.0",yMe="4.7.0",vMe="4.7.0",xMe="4.7.0",wMe="4.7.0",kMe={tfjs:iD,"tfjs-core":iD,"tfjs-converter":yMe,"tfjs-backend-cpu":vMe,"tfjs-backend-webgl":xMe,"tfjs-backend-wasm":wMe},SMe={};o$(SMe,{AnchorPosition:()=>yj,DrawBox:()=>xj,DrawBoxOptions:()=>vj,DrawFaceLandmarks:()=>Mj,DrawFaceLandmarksOptions:()=>Fj,DrawTextField:()=>ew,DrawTextFieldOptions:()=>rE,drawContour:()=>ro,drawDetections:()=>OMe,drawFaceExpressions:()=>JMe,drawFaceLandmarks:()=>QMe});function ro(e,t,n=!1){if(e.beginPath(),t.slice(1).forEach(({x:r,y:a},i)=>{let s=t[i];e.moveTo(s.x,s.y),e.lineTo(r,a)}),n){let r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}var IMe={};o$(IMe,{computeReshapedDimensions:()=>cj,getCenterPoint:()=>ZT,isDimensions:()=>TS,isEven:()=>CS,isFloat:()=>uj,isTensor:()=>Gp,isTensor1D:()=>$Me,isTensor2D:()=>lj,isTensor3D:()=>qg,isTensor4D:()=>Os,isValidNumber:()=>Bl,isValidProbablitiy:()=>CMe,range:()=>gh,round:()=>Qx});var No=class{constructor(e,t){if(!Bl(e)||!Bl(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have ".concat(JSON.stringify({width:e,height:t})));this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new No(1/this.width,1/this.height)}};function Gp(e,t){return e instanceof qe&&e.shape.length===t}function $Me(e){return Gp(e,1)}function lj(e){return Gp(e,2)}function qg(e){return Gp(e,3)}function Os(e){return Gp(e,4)}function uj(e){return e%1!==0}function CS(e){return e%2===0}function Qx(e,t=2){let n=10**t;return Math.floor(e*n)/n}function TS(e){return e&&e.width&&e.height}function cj({width:e,height:t},n){let r=n/Math.max(t,e);return new No(Math.round(e*r),Math.round(t*r))}function ZT(e){return e.reduce((t,n)=>t.add(n),new pt(0,0)).div(new pt(e.length,e.length))}function gh(e,t,n){return Array(e).fill(0).map((r,a)=>t+a*n)}function Bl(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||e===0}function CMe(e){return Bl(e)&&e>=0&&e<=1}var pt=class{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}add(e){return new pt(this.x+e.x,this.y+e.y)}sub(e){return new pt(this.x-e.x,this.y-e.y)}mul(e){return new pt(this.x*e.x,this.y*e.y)}div(e){return new pt(this.x/e.x,this.y/e.y)}abs(){return new pt(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new pt(Math.floor(this.x),Math.floor(this.y))}},mr=class{static isRect(e){return!!e&&[e.x,e.y,e.width,e.height].every(Bl)}static assertIsValidBox(e,t,n=!1){if(!mr.isRect(e))throw new Error("".concat(t," - invalid box: ").concat(JSON.stringify(e),", expected object with properties x, y, width, height"));if(!n&&(e.width<0||e.height<0))throw new Error("".concat(t," - width (").concat(e.width,") and height (").concat(e.height,") must be positive numbers"))}constructor(e,t=!0){let n=e||{},r=[n.left,n.top,n.right,n.bottom].every(Bl),a=[n.x,n.y,n.width,n.height].every(Bl);if(!a&&!r)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have ".concat(JSON.stringify(n)));let[i,s,o,l]=a?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top];mr.assertIsValidBox({x:i,y:s,width:o,height:l},"Box.constructor",t),this._x=i,this._y=s,this._width=o,this._height=l}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new pt(this.left,this.top)}get topRight(){return new pt(this.right,this.top)}get bottomLeft(){return new pt(this.left,this.bottom)}get bottomRight(){return new pt(this.right,this.bottom)}round(){let[e,t,n,r]=[this.x,this.y,this.width,this.height].map(a=>Math.round(a));return new mr({x:e,y:t,width:n,height:r})}floor(){let[e,t,n,r]=[this.x,this.y,this.width,this.height].map(a=>Math.floor(a));return new mr({x:e,y:t,width:n,height:r})}toSquare(){let{x:e,y:t,width:n,height:r}=this,a=Math.abs(n-r);return n<r&&(e-=a/2,n+=a),r<n&&(t-=a/2,r+=a),new mr({x:e,y:t,width:n,height:r})}rescale(e){let t=TS(e)?e.width:e,n=TS(e)?e.height:e;return new mr({x:this.x*t,y:this.y*n,width:this.width*t,height:this.height*n})}pad(e,t){let[n,r,a,i]=[this.x-e/2,this.y-t/2,this.width+e,this.height+t];return new mr({x:n,y:r,width:a,height:i})}clipAtImageBorders(e,t){let{x:n,y:r,right:a,bottom:i}=this,s=Math.max(n,0),o=Math.max(r,0),l=a-s,c=i-o,u=Math.min(l,e-s),d=Math.min(c,t-o);return new mr({x:s,y:o,width:u,height:d}).floor()}shift(e,t){let{width:n,height:r}=this,a=this.x+e,i=this.y+t;return new mr({x:a,y:i,width:n,height:r})}padAtBorders(e,t){let n=this.width+1,r=this.height+1,a=1,i=1,s=n,o=r,l=this.left,c=this.top,u=this.right,d=this.bottom;return u>t&&(s=-u+t+n,u=t),d>e&&(o=-d+e+r,d=e),l<1&&(o=2-l,l=1),c<1&&(o=2-c,c=1),{dy:i,edy:o,dx:a,edx:s,y:c,ey:d,x:l,ex:u,w:n,h:r}}calibrate(e){return new mr({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()}},dj=class extends mr{constructor(e,t,n,r,a=!1){super({left:e,top:t,right:n,bottom:r},a)}},QT=class{constructor(e,t,n,r,a){this._imageDims=new No(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new mr(r).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new mr(this._box).rescale(this.imageDims.reverse())}forSize(e,t){return new QT(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})}},ja=class extends QT{constructor(e,t,n){super(e,e,"",t,n)}forSize(e,t){let{score:n,relativeBox:r,imageDims:a}=super.forSize(e,t);return new ja(n,r,a)}};function TMe(e,t,n=!0){let r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*a;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function EMe(e){let t=e.map(o=>o.x),n=e.map(o=>o.y),r=t.reduce((o,l)=>l<o?l:o,1/0),a=n.reduce((o,l)=>l<o?l:o,1/0),i=t.reduce((o,l)=>o<l?l:o,0),s=n.reduce((o,l)=>o<l?l:o,0);return new dj(r,a,i,s)}function NMe(e,t,n,r=!0){let a=t.map((s,o)=>({score:s,boxIndex:o})).sort((s,o)=>s.score-o.score).map(s=>s.boxIndex),i=[];for(;a.length>0;){let s=a.pop();i.push(s);let o=a,l=[];for(let c=0;c<o.length;c++){let u=o[c],d=e[s],h=e[u];l.push(TMe(d,h,r))}a=a.filter((c,u)=>l[u]<=n)}return i}function Kg(e,t){return X(()=>{let[n,r,a]=t,i=ga([...e.shape.slice(0,3),1],n,"float32"),s=ga([...e.shape.slice(0,3),1],r,"float32"),o=ga([...e.shape.slice(0,3),1],a,"float32"),l=_t([i,s,o],3);return Se(e,l)})}function _Me(e,t=!1){return X(()=>{let[n,r]=e.shape.slice(1);if(n===r)return e;let a=Math.abs(n-r),i=Math.round(a*(t?.5:1)),s=n>r?2:1,o=d=>{let h=e.shape.slice();return h[s]=d,ga(h,0,"float32")},l=o(i),c=a-l.shape[s],u=[t&&c?o(c):null,e,l].filter(d=>!!d).map(d=>me(d,"float32"));return _t(u,s)})}function c1(e){return 1/(1+Math.exp(-e))}var hj=class extends mr{constructor(e,t,n,r,a=!1){super({x:e,y:t,width:n,height:r},a)}},AMe=.5,RMe=.43,DMe=.45,Nm=class{constructor(e,t,n=new pt(0,0)){let{width:r,height:a}=t;this._imgDims=new No(r,a),this._shift=n,this._positions=e.map(i=>i.mul(new pt(r,a)).add(n))}get shift(){return new pt(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new pt(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new pt(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,t={}){if(e){let a=e instanceof ja?e.box.floor():new mr(e);return this.shiftBy(a.x,a.y).align(null,t)}let{useDlibAlignment:n,minBoxPadding:r}={useDlibAlignment:!1,minBoxPadding:.2,...t};return n?this.alignDlib():this.alignMinBbox(r)}alignDlib(){let e=this.getRefPointsForAlignment(),[t,n,r]=e,a=u=>r.sub(u).magnitude(),i=(a(t)+a(n))/2,s=Math.floor(i/DMe),o=ZT(e),l=Math.floor(Math.max(0,o.x-AMe*s)),c=Math.floor(Math.max(0,o.y-RMe*s));return new hj(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))}alignMinBbox(e){let t=EMe(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},pj=class extends Nm{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(ZT)}},sD=class{constructor(e,t){this._label=e,this._distance=t}get label(){return this._label}get distance(){return this._distance}toString(e=!0){return"".concat(this.label).concat(e?" (".concat(Qx(this.distance),")"):"")}},Sd=class{constructor(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(n=>!(n instanceof Float32Array)))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}get label(){return this._label}get descriptors(){return this._descriptors}toJSON(){return{label:this.label,descriptors:this.descriptors.map(e=>Array.from(e))}}static fromJSON(e){let t=e.descriptors.map(n=>new Float32Array(n));return new Sd(e.label,t)}};function _m(e){return e.detection instanceof ja}function Fv(e,t){return{...e,detection:t}}function fj(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function eE(){return typeof global=="object"&&typeof process<"u"&&process.versions!=null&&process.versions.node!=null}function mj(e){let t="";if(!e&&eE())try{e=FY("fs")}catch(n){t=n.toString()}return{readFile:e?n=>new Promise((r,a)=>{e.readFile(n,(i,s)=>i?a(i):r(s))}):()=>{throw new Error("readFile - failed to require fs in nodejs environment with error: ".concat(t))}}}function gj(){let e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=global.Video||global.HTMLVideoElement,r=()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},a=()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=()=>{if(n)return new n;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},s=global.fetch,o=mj();return{Canvas:e||class{},CanvasRenderingContext2D:global.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:global.ImageData||class{},Video:global.HTMLVideoElement||class{},createCanvasElement:r,createImageElement:a,createVideoElement:i,fetch:s,...o}}function bj(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}var jn;function FMe(){if(!jn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return jn}function ES(e){jn=e}function tE(){return bj()?ES(fj()):eE()?ES(gj()):null}function MMe(e){if(jn||tE(),!jn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:t=jn.Canvas,Image:n=jn.Image}=e;jn.Canvas=t,jn.Image=n,jn.createCanvasElement=e.createCanvasElement||(()=>new t),jn.createImageElement=e.createImageElement||(()=>new n),jn.ImageData=e.ImageData||jn.ImageData,jn.Video=e.Video||jn.Video,jn.fetch=e.fetch||jn.fetch,jn.readFile=e.readFile||jn.readFile}var Or={getEnv:FMe,setEnv:ES,initialize:tE,createBrowserEnv:fj,createFileSystem:mj,createNodejsEnv:gj,monkeyPatch:MMe,isBrowser:bj,isNodejs:eE};tE();function nE(e){return!Or.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Ho(e){let{Canvas:t,CanvasRenderingContext2D:n}=Or.getEnv();if(e instanceof n)return e;let r=nE(e);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var yj=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e))(yj||{}),rE=class{constructor(e={}){let{anchorPosition:t,backgroundColor:n,fontColor:r,fontSize:a,fontStyle:i,padding:s}=e;this.anchorPosition=t||"TOP_LEFT",this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=s||4}},ew=class{constructor(e,t,n={}){this.text=typeof e=="string"?[e]:e instanceof ew?e.text:e,this.anchor=t,this.options=new rE(n)}measureWidth(e){let{padding:t}=this.options;return this.text.map(n=>e.measureText(n).width).reduce((n,r)=>n<r?r:n,0)+2*t}measureHeight(){let{fontSize:e,padding:t}=this.options;return this.text.length*e+2*t}getUpperLeft(e,t){let{anchorPosition:n}=this.options,r=n==="BOTTOM_RIGHT"||n==="TOP_RIGHT",a=n==="BOTTOM_LEFT"||n==="BOTTOM_RIGHT",i=this.measureWidth(e),s=this.measureHeight(),o=r?this.anchor.x-i:this.anchor.x,l=a?this.anchor.y-s:this.anchor.y;if(t){let{width:c,height:u}=t,d=Math.max(Math.min(o,c-i),0),h=Math.max(Math.min(l,u-s),0);return{x:d,y:h}}return{x:o,y:l}}draw(e){let t=nE(e),n=Ho(t),{backgroundColor:r,fontColor:a,fontSize:i,fontStyle:s,padding:o}=this.options;n.font="".concat(i,"px ").concat(s);let l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=r;let u=this.getUpperLeft(n,t);n.fillRect(u.x,u.y,l,c),n.fillStyle=a,this.text.forEach((d,h)=>{let p=o+u.x,f=o+u.y+(h+1)*i;n.fillText(d,p,f)})}},vj=class{constructor(e={}){let{boxColor:t,lineWidth:n,label:r,drawLabelOptions:a}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;let i={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new rE({...i,...a})}},xj=class{constructor(e,t={}){this.box=new mr(e),this.options=new vj(t)}draw(e){let t=Ho(e),{boxColor:n,lineWidth:r}=this.options,{x:a,y:i,width:s,height:o}=this.box;t.strokeStyle=n,t.lineWidth=r,t.strokeRect(a,i,s,o);let{label:l}=this.options;l&&new ew([l],{x:a-r/2,y:i},this.options.drawLabelOptions).draw(e)}};function OMe(e,t){(Array.isArray(t)?t:[t]).forEach(n=>{let r=n instanceof ja?n.score:_m(n)?n.detection.score:void 0,a=n instanceof ja?n.box:_m(n)?n.detection.box:new mr(n),i=r?"".concat(Qx(r)):void 0;new xj(a,{label:i}).draw(e)})}function wj(e){let{Image:t,Video:n}=Or.getEnv();return e instanceof t&&e.complete||e instanceof n&&e.readyState>=3}function PMe(e){return new Promise((t,n)=>{(e instanceof Or.getEnv().Canvas||wj(e))&&t(null);function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",r),n(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",r),t(i))}e.addEventListener("load",a),e.addEventListener("error",r)})}function LMe(e){return new Promise((t,n)=>{e instanceof Blob||n(new Error("bufferToImage - expected buf to be of type: Blob"));let r=new FileReader;r.onload=()=>{typeof r.result!="string"&&n(new Error("bufferToImage - expected reader.result to be a string, in onload"));let a=Or.getEnv().createImageElement();a.onload=()=>t(a),a.onerror=n,a.src=r.result},r.onerror=n,r.readAsDataURL(e)})}function aE(e){let{Image:t,Video:n}=Or.getEnv();return e instanceof t?new No(e.naturalWidth,e.naturalHeight):e instanceof n?new No(e.videoWidth,e.videoHeight):new No(e.width,e.height)}function Mv({width:e,height:t}){let{createCanvasElement:n}=Or.getEnv(),r=n();return r.width=e,r.height=t,r}function kj(e,t){let{ImageData:n}=Or.getEnv();if(!(e instanceof n)&&!wj(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:r,height:a}=t||aE(e),i=Mv({width:r,height:a});return e instanceof n?Ho(i).putImageData(e,0,0):Ho(i).drawImage(e,0,0,r,a),i}async function zMe(e,t){let n=t||Or.getEnv().createCanvasElement(),[r,a,i]=e.shape.slice(Os(e)?1:0),s=X(()=>e.as3D(r,a,i).toInt());return await _g.toPixels(s,n),s.dispose(),n}function oD(e){let{Image:t,Canvas:n,Video:r}=Or.getEnv();return e instanceof t||e instanceof n||e instanceof r}function BMe(e,t,n=!1){let{Image:r,Canvas:a}=Or.getEnv();if(!(e instanceof r||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return Mv({width:1,height:1});let i=aE(e),s=t/Math.max(i.height,i.width),o=s*i.width,l=s*i.height,c=Mv({width:t,height:t}),u=e instanceof a?e:kj(e),d=Math.abs(o-l)/2,h=n&&o<l?d:0,p=n&&l<o?d:0;return u.width>0&&u.height>0&&Ho(c).drawImage(u,h,p,o,l),c}var Ov=class{constructor(e,t=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ".concat(e));this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((n,r)=>{if(qg(n)){this._imageTensors[r]=n,this._inputDimensions[r]=n.shape;return}if(Os(n)){let i=n.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize ".concat(i," passed, but not supported in input array"));this._imageTensors[r]=n,this._inputDimensions[r]=n.shape.slice(1);return}let a=n instanceof Or.getEnv().Canvas?n:kj(n);this._canvases[r]=a,this._inputDimensions[r]=[a.height,a.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return gh(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");let t=this.getInputWidth(e),n=this.getInputHeight(e);return cj({width:t,height:n},this.inputSize)}toBatchTensor(e,t=!0){return this._inputSize=e,X(()=>{let n=gh(this.batchSize,0,1).map(r=>{let a=this.getInput(r);if(a instanceof qe){let i=Os(a)?a:rr(a);return i=_Me(i,t),(i.shape[1]!==e||i.shape[2]!==e)&&(i=Ma.resizeBilinear(i,[e,e],!1,!1)),i.as3D(e,e,3)}if(a instanceof Or.getEnv().Canvas)return _g.fromPixels(BMe(a,e,t));throw new Error("toBatchTensor - at batchIdx ".concat(r,", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ").concat(a))});return Dn(n.map(r=>me(r,"float32"))).as4D(this.batchSize,e,e,3)})}};async function Pr(e){if(e instanceof Ov)return e;let t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");let n=a=>Array.isArray(e)?" at input index ".concat(a,":"):"",r=t.map(nE);return r.forEach((a,i)=>{if(!oD(a)&&!qg(a)&&!Os(a))throw typeof t[i]=="string"?new Error("toNetInput -".concat(n(i)," string passed, but could not resolve HTMLElement for element id ").concat(t[i])):new Error("toNetInput -".concat(n(i)," expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id"));if(Os(a)){let s=a.shape[0];if(s!==1)throw new Error("toNetInput -".concat(n(i)," tf.Tensor4D with batchSize ").concat(s," passed, but not supported in input array"))}}),await Promise.all(r.map(a=>oD(a)&&PMe(a))),new Ov(r,Array.isArray(e))}async function iE(e,t){let{Canvas:n}=Or.getEnv(),r=e;if(!(e instanceof n)){let i=await Pr(e);if(i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let s=i.getInput(0);r=s instanceof n?s:await zMe(s)}let a=Ho(r);return t.map(i=>i instanceof ja?i.forSize(r.width,r.height).box.floor():i).map(i=>i.clipAtImageBorders(r.width,r.height)).map(({x:i,y:s,width:o,height:l})=>{let c=Mv({width:o,height:l});return o>0&&l>0&&Ho(c).putImageData(a.getImageData(i,s,o,l),0,0),c})}async function sE(e,t){if(!qg(e)&&!Os(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Os(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return X(()=>{let[n,r,a]=e.shape.slice(Os(e)?1:0);return t.map(i=>i instanceof ja?i.forSize(r,n).box:i).map(i=>i.clipAtImageBorders(r,n)).filter(i=>i.width>0&&i.height>0).map(({x:i,y:s,width:o,height:l})=>Rp(e.as3D(n,r,a),[s,i,0],[l,o,a]))})}async function Sj(e,t){let{fetch:n}=Or.getEnv(),r=await n(e,t);if(!(r.status<400))throw new Error("failed to fetch: (".concat(r.status,") ").concat(r.statusText,", from url: ").concat(r.url));return r}async function WMe(e){let t=await Sj(e),n=await t.blob();if(!n.type.startsWith("image/"))throw new Error("fetchImage - expected blob type to be of type image/*, instead have: ".concat(n.type,", for url: ").concat(t.url));return LMe(n)}async function UMe(e){return(await Sj(e)).json()}function Ij(e,t){let n="".concat(t,"-weights_manifest.json");if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/".concat(n)};let r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");let a=e.split("/").filter(o=>o),i=e.endsWith(".json")?a[a.length-1]:n,s=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return s=e.startsWith("/")?"/".concat(s):s,{modelBaseUri:s,manifestUri:s==="/"?"/".concat(i):"".concat(s,"/").concat(i)}}async function VMe(e,t){let{manifestUri:n,modelBaseUri:r}=Ij(e,t),a=await UMe(n);return sr.loadWeights(a,r)}function jMe(e,t,n=!1){let{width:r,height:a}=n?aE(t):t;return e.width=r,e.height=a,{width:r,height:a}}var cl=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:t,objProp:n}=this.traversePropertyPath(e);return t[n]}reassignParamFromPath(e,t){let{obj:n,objProp:r}=this.traversePropertyPath(e);n[r].dispose(),n[r]=t}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof eu)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof eu))}variable(){this.getFrozenParams().forEach(({path:e,tensor:t})=>{this.reassignParamFromPath(e,t.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:t})=>{let n=Nr(t.dataSync());t.dispose(),this.reassignParamFromPath(e,n)})}dispose(e=!0){this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path ".concat(t.path));t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,t)=>e.concat(t)))}async load(e){if(e instanceof Float32Array){this.extractWeights(e);return}await this.loadFromUri(e)}async loadFromUri(e){if(e&&typeof e!="string")throw new Error("".concat(this._name,".loadFromUri - expected model uri"));let t=await VMe(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&typeof e!="string")throw new Error("".concat(this._name,".loadFromDisk - expected model file path"));let{readFile:t}=Or.getEnv(),{manifestUri:n,modelBaseUri:r}=Ij(e,this.getDefaultModelName()),a=l=>Promise.all(l.map(c=>t(c).then(u=>u.buffer))),i=sr.weightsLoaderFactory(a),s=JSON.parse((await t(n)).toString()),o=await i(s,r);this.loadFromWeightMap(o)}loadFromWeightMap(e){let{paramMappings:t,params:n}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=n}extractWeights(e){let{paramMappings:t,params:n}=this.extractParams(e);this._paramMappings=t,this._params=n}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let t=e.split("/").reduce((a,i)=>{if(!a.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property ".concat(i,", for path ").concat(e));return{obj:a.nextObj,objProp:i,nextObj:a.nextObj[i]}},{nextObj:this.params}),{obj:n,objProp:r}=t;if(!n||!r||!(n[r]instanceof qe))throw new Error("traversePropertyPath - parameter is not a tensor, for path ".concat(e));return{obj:n,objProp:r}}};function La(e,t,n){return X(()=>{let r=Ap(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=ie(r,t.bias),r})}function d1(e,t,n=!1){return X(()=>{let r=It(n?ie(Dr(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):La(e,t.conv0,[2,2])),a=La(r,t.conv1,[1,1]),i=It(ie(r,a)),s=La(i,t.conv2,[1,1]);return It(ie(r,ie(a,s)))})}function Vb(e,t,n=!1,r=!0){return X(()=>{let a=It(n?ie(Dr(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):La(e,t.conv0,r?[2,2]:[1,1])),i=La(a,t.conv1,[1,1]),s=It(ie(a,i)),o=La(s,t.conv2,[1,1]),l=It(ie(a,ie(i,o))),c=La(l,t.conv3,[1,1]);return It(ie(a,ie(i,ie(o,c))))})}function Uf(e,t,n="same",r=!1){return X(()=>{let a=ie(Dr(e,t.filters,[1,1],n),t.bias);return r?It(a):a})}function dl(e,t){Object.keys(e).forEach(n=>{t.some(r=>r.originalPath===n)||e[n].dispose()})}function oE(e,t){return(n,r,a,i)=>{let s=Lo(e(n*r*a*a),[a,a,n,r]),o=St(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/bias")}),{filters:s,bias:o}}}function $j(e,t){return(n,r,a)=>{let i=us(e(n*r),[n,r]),s=St(e(r));return t.push({paramPath:"".concat(a,"/weights")},{paramPath:"".concat(a,"/bias")}),{weights:i,bias:s}}}var Cj=class{constructor(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}};function lE(e,t){return(n,r,a)=>{let i=Lo(e(9*n),[3,3,n,1]),s=Lo(e(n*r),[1,1,n,r]),o=St(e(r));return t.push({paramPath:"".concat(a,"/depthwise_filter")},{paramPath:"".concat(a,"/pointwise_filter")},{paramPath:"".concat(a,"/bias")}),new Cj(i,s,o)}}function uE(e){return t=>{let n=e("".concat(t,"/depthwise_filter"),4),r=e("".concat(t,"/pointwise_filter"),4),a=e("".concat(t,"/bias"),1);return new Cj(n,r,a)}}function Yc(e,t){return(n,r,a)=>{let i=e[n];if(!Gp(i,r))throw new Error("expected weightMap[".concat(n,"] to be a Tensor").concat(r,"D, instead have ").concat(i));return t.push({originalPath:n,paramPath:a||n}),i}}function hl(e){let t=e;function n(a){let i=t.slice(0,a);return t=t.slice(a),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function Tj(e,t){let n=oE(e,t),r=lE(e,t);function a(s,o,l,c=!1){let u=c?n(s,o,3,"".concat(l,"/conv0")):r(s,o,"".concat(l,"/conv0")),d=r(o,o,"".concat(l,"/conv1")),h=r(o,o,"".concat(l,"/conv2"));return{conv0:u,conv1:d,conv2:h}}function i(s,o,l,c=!1){let{conv0:u,conv1:d,conv2:h}=a(s,o,l,c),p=r(o,o,"".concat(l,"/conv3"));return{conv0:u,conv1:d,conv2:h,conv3:p}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function HMe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=hl(e),{extractDenseBlock4Params:a}=Tj(n,t),i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),o=a(64,128,"dense2"),l=a(128,256,"dense3");if(r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o,dense3:l}}}function Ej(e){return t=>{let n=e("".concat(t,"/filters"),4),r=e("".concat(t,"/bias"),1);return{filters:n,bias:r}}}function Nj(e,t){let n=Yc(e,t),r=Ej(n),a=uE(n);function i(o,l=!1){let c=l?r("".concat(o,"/conv0")):a("".concat(o,"/conv0")),u=a("".concat(o,"/conv1")),d=a("".concat(o,"/conv2"));return{conv0:c,conv1:u,conv2:d}}function s(o,l=!1){let c=l?r("".concat(o,"/conv0")):a("".concat(o,"/conv0")),u=a("".concat(o,"/conv1")),d=a("".concat(o,"/conv2")),h=a("".concat(o,"/conv3"));return{conv0:c,conv1:u,conv2:d,conv3:h}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:s}}function GMe(e){let t=[],{extractDenseBlock4Params:n}=Nj(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return dl(e,t),{params:r,paramMappings:t}}var _j=class extends cl{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return X(()=>{let n=me(e.toBatchTensor(112,!0),"float32"),r=Kg(n,[122.782,117.001,104.298]).div(255),a=Vb(r,t.dense0,!0);return a=Vb(a,t.dense1),a=Vb(a,t.dense2),a=Vb(a,t.dense3),a=qs(a,[7,7],[2,2],"valid"),a})}async forward(e){return this.forwardInput(await Pr(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return GMe(e)}extractParams(e){return HMe(e)}};function NS(e,t){return X(()=>ie(Qe(e,t.weights),t.bias))}function qMe(e,t,n){let r=[],{extractWeights:a,getRemainingWeights:i}=hl(e),s=$j(a,r)(t,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: ".concat(i().length));return{paramMappings:r,params:{fc:s}}}function KMe(e){let t=[],n=Yc(e,t);function r(i){let s=n("".concat(i,"/weights"),2),o=n("".concat(i,"/bias"),1);return{weights:s,bias:o}}let a={fc:r("fc")};return dl(e,t),{params:a,paramMappings:t}}function Aj(e){let t={},n={};return Object.keys(e).forEach(r=>{let a=r.startsWith("fc")?n:t;a[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var Rj=class extends cl{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error("".concat(this._name," - load model before inference"));return X(()=>{let n=e instanceof Ov?this.faceFeatureExtractor.forwardInput(e):e;return NS(n.as2D(n.shape[0],-1),t.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return qMe(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=Aj(e);return this.faceFeatureExtractor.loadFromWeightMap(t),KMe(n)}extractParams(e){let t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)}},lD=["neutral","happy","sad","angry","fearful","disgusted","surprised"],cE=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: ".concat(e.length));lD.forEach((t,n)=>{this[t]=e[n]})}asSortedArray(){return lD.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}},XMe=class extends Rj{constructor(e=new _j){super("FaceExpressionNet",e)}forwardInput(e){return X(()=>al(this.runNet(e)))}async forward(e){return this.forwardInput(await Pr(e))}async predictExpressions(e){let t=await Pr(e),n=await this.forwardInput(t),r=await Promise.all(fn(n).map(async i=>{let s=i.dataSync();return i.dispose(),s}));n.dispose();let a=r.map(i=>new cE(i));return t.isBatchInput?a:a[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}};function YMe(e){return e.expressions instanceof cE}function Dj(e,t){return{...e,expressions:t}}function JMe(e,t,n=.1,r){(Array.isArray(t)?t:[t]).forEach(a=>{let i=a instanceof cE?a:YMe(a)?a.expressions:void 0;if(!i)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let s=i.asSortedArray().filter(l=>l.probability>n),o=_m(a)?a.detection.box.bottomLeft:r||new pt(0,0);new ew(s.map(l=>"".concat(l.expression," (").concat(Qx(l.probability),")")),o).draw(e)})}function dE(e){return _m(e)&&e.landmarks instanceof Nm&&e.unshiftedLandmarks instanceof Nm&&e.alignedRect instanceof ja}function ZMe(e){let t=l=>l*180/Math.PI,n=(l,c)=>Math.sqrt((l._x-c._x)**2+(l._y-c._y)**2),r={roll:void 0,pitch:void 0,yaw:void 0},a=(l,c,u)=>{let d=Math.floor(l._x-c._x),h=Math.floor(c._x-u._x);return d-h},i=(l,c)=>{let u=Math.hypot(c._x-l._x,c._y-l._y),d=c._y-l._y,h=Math.asin(d/u),p=t(h),f=Math.floor(90-p),m=c._x-l._x<0?-1:1;return f*m},s=(l,c,u)=>{let d=n(l,u),h={_x:(l._x+u._x)/2,_y:(l._y+u._y)/2},p=n(c,h),f=Math.atan(p/d),m=Math.floor(t(f)),g=h._y-c._y<0?-1:1;return m*g};if(!e||!e._positions||e._positions.length!==68)return r;let o=e._positions;return r.roll=i(o[27],o[66]),r.pitch=s(o[14],o[30],o[2]),r.yaw=a(o[14],o[33],o[2]),r}function hE(e,t){let{box:n}=e.detection,r=t.shiftBy(n.x,n.y),a=r.align(),{imageDims:i}=e.detection,s=new ja(e.detection.score,a.rescale(i.reverse()),i),o=ZMe(t);return{...e,landmarks:r,unshiftedLandmarks:t,alignedRect:s,angle:o}}var Fj=class{constructor(e={}){let{drawLines:t=!0,drawPoints:n=!0,lineWidth:r,lineColor:a,pointSize:i,pointColor:s}=e;this.drawLines=t,this.drawPoints=n,this.lineWidth=r||1,this.pointSize=i||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}},Mj=class{constructor(e,t={}){this.faceLandmarks=e,this.options=new Fj(t)}draw(e){let t=Ho(e),{drawLines:n,drawPoints:r,lineWidth:a,lineColor:i,pointSize:s,pointColor:o}=this.options;if(n&&this.faceLandmarks instanceof pj&&(t.strokeStyle=i,t.lineWidth=a,ro(t,this.faceLandmarks.getJawOutline()),ro(t,this.faceLandmarks.getLeftEyeBrow()),ro(t,this.faceLandmarks.getRightEyeBrow()),ro(t,this.faceLandmarks.getNose()),ro(t,this.faceLandmarks.getLeftEye(),!0),ro(t,this.faceLandmarks.getRightEye(),!0),ro(t,this.faceLandmarks.getMouth(),!0)),r){t.strokeStyle=o,t.fillStyle=o;let l=c=>{t.beginPath(),t.arc(c.x,c.y,s,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(l)}}};function QMe(e,t){(Array.isArray(t)?t:[t]).forEach(n=>{let r=n instanceof Nm?n:dE(n)?n.landmarks:void 0;if(!r)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new Mj(r).draw(e)})}function eOe(e,t){let n=oE(e,t),r=lE(e,t);function a(s,o,l){let c=r(s,o,"".concat(l,"/separable_conv0")),u=r(o,o,"".concat(l,"/separable_conv1")),d=n(s,o,1,"".concat(l,"/expansion_conv"));return{separable_conv0:c,separable_conv1:u,expansion_conv:d}}function i(s,o){let l=r(s,s,"".concat(o,"/separable_conv0")),c=r(s,s,"".concat(o,"/separable_conv1")),u=r(s,s,"".concat(o,"/separable_conv2"));return{separable_conv0:l,separable_conv1:c,separable_conv2:u}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function tOe(e,t){let n=[],{extractWeights:r,getRemainingWeights:a}=hl(e),{extractConvParams:i,extractSeparableConvParams:s,extractReductionBlockParams:o,extractMainBlockParams:l}=eOe(r,n),c=i(3,32,3,"entry_flow/conv_in"),u=o(32,64,"entry_flow/reduction_block_0"),d=o(64,128,"entry_flow/reduction_block_1"),h={conv_in:c,reduction_block_0:u,reduction_block_1:d},p={};gh(t,0,1).forEach(b=>{p["main_block_".concat(b)]=l(128,"middle_flow/main_block_".concat(b))});let f=o(128,256,"exit_flow/reduction_block"),m=s(256,512,"exit_flow/separable_conv"),g={reduction_block:f,separable_conv:m};if(a().length!==0)throw new Error("weights remaing after extract: ".concat(a().length));return{paramMappings:n,params:{entry_flow:h,middle_flow:p,exit_flow:g}}}function nOe(e,t){let n=Yc(e,t),r=Ej(n),a=uE(n);function i(o){let l=a("".concat(o,"/separable_conv0")),c=a("".concat(o,"/separable_conv1")),u=r("".concat(o,"/expansion_conv"));return{separable_conv0:l,separable_conv1:c,expansion_conv:u}}function s(o){let l=a("".concat(o,"/separable_conv0")),c=a("".concat(o,"/separable_conv1")),u=a("".concat(o,"/separable_conv2"));return{separable_conv0:l,separable_conv1:c,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:s}}function rOe(e,t){let n=[],{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:s}=nOe(e,n),o=r("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),c=i("entry_flow/reduction_block_1"),u={conv_in:o,reduction_block_0:l,reduction_block_1:c},d={};gh(t,0,1).forEach(m=>{d["main_block_".concat(m)]=s("middle_flow/main_block_".concat(m))});let h=i("exit_flow/reduction_block"),p=a("exit_flow/separable_conv"),f={reduction_block:h,separable_conv:p};return dl(e,n),{params:{entry_flow:u,middle_flow:d,exit_flow:f},paramMappings:n}}function Oj(e,t,n){return ie(Dr(e,t.filters,n,"same"),t.bias)}function h1(e,t,n=!0){let r=n?It(e):e;return r=La(r,t.separable_conv0,[1,1]),r=La(It(r),t.separable_conv1,[1,1]),r=Hn(r,[3,3],[2,2],"same"),r=ie(r,Oj(e,t.expansion_conv,[2,2])),r}function aOe(e,t){let n=La(It(e),t.separable_conv0,[1,1]);return n=La(It(n),t.separable_conv1,[1,1]),n=La(It(n),t.separable_conv2,[1,1]),n=ie(n,e),n}var iOe=class extends cl{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return X(()=>{let n=me(e.toBatchTensor(112,!0),"float32"),r=Kg(n,[122.782,117.001,104.298]).div(255),a=It(Oj(r,t.entry_flow.conv_in,[2,2]));return a=h1(a,t.entry_flow.reduction_block_0,!1),a=h1(a,t.entry_flow.reduction_block_1),gh(this._numMainBlocks,0,1).forEach(i=>{a=aOe(a,t.middle_flow["main_block_".concat(i)])}),a=h1(a,t.exit_flow.reduction_block),a=It(La(a,t.exit_flow.separable_conv,[1,1])),a})}async forward(e){return this.forwardInput(await Pr(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return rOe(e,this._numMainBlocks)}extractParams(e){return tOe(e,this._numMainBlocks)}};function sOe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=hl(e),a=$j(n,t),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{fc:{age:i,gender:s}}}}function oOe(e){let t=[],n=Yc(e,t);function r(i){let s=n("".concat(i,"/weights"),2),o=n("".concat(i,"/bias"),1);return{weights:s,bias:o}}let a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return dl(e,t),{params:a,paramMappings:t}}var lOe=(e=>(e.FEMALE="female",e.MALE="male",e))(lOe||{}),uOe=class extends cl{constructor(e=new iOe(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error("".concat(this._name," - load model before inference"));return X(()=>{let n=e instanceof Ov?this.faceFeatureExtractor.forwardInput(e):e,r=qs(n,[7,7],[2,2],"valid").as2D(n.shape[0],-1),a=NS(r,t.fc.age).as1D(),i=NS(r,t.fc.gender);return{age:a,gender:i}})}forwardInput(e){return X(()=>{let{age:t,gender:n}=this.runNet(e);return{age:t,gender:al(n)}})}async forward(e){return this.forwardInput(await Pr(e))}async predictAgeAndGender(e){let t=await Pr(e),n=await this.forwardInput(t),r=fn(n.age),a=fn(n.gender),i=r.map((o,l)=>({ageTensor:o,genderTensor:a[l]})),s=await Promise.all(i.map(async({ageTensor:o,genderTensor:l})=>{let c=o.dataSync()[0],u=l.dataSync()[0],d=u>.5,h=d?"male":"female",p=d?u:1-u;return o.dispose(),l.dispose(),{age:c,gender:h,genderProbability:p}}));return n.age.dispose(),n.gender.dispose(),t.isBatchInput?s:s[0]}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return sOe(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=Aj(e);return this.faceFeatureExtractor.loadFromWeightMap(t),oOe(n)}extractParams(e){let t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}},Pj=class extends Rj{postProcess(e,t,n){let r=n.map(({width:i,height:s})=>{let o=t/Math.max(s,i);return{width:i*o,height:s*o}}),a=r.length;return X(()=>{let i=(c,u)=>Dn([ga([68],c,"float32"),ga([68],u,"float32")],1).as2D(1,136).as1D(),s=(c,u)=>{let{width:d,height:h}=r[c];return u(d,h)?Math.abs(d-h)/2:0},o=c=>s(c,(u,d)=>u<d),l=c=>s(c,(u,d)=>d<u);return e.mul(ga([a,136],t,"float32")).sub(Dn(Array.from(Array(a),(c,u)=>i(o(u),l(u))))).div(Dn(Array.from(Array(a),(c,u)=>i(r[u].width,r[u].height))))})}forwardInput(e){return X(()=>{let t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(([n,r])=>({height:n,width:r})))})}async forward(e){return this.forwardInput(await Pr(e))}async detectLandmarks(e){let t=await Pr(e),n=X(()=>fn(this.forwardInput(t))),r=await Promise.all(n.map(async(a,i)=>{let s=Array.from(a.dataSync()),o=s.filter((c,u)=>CS(u)),l=s.filter((c,u)=>!CS(u));return new pj(Array(68).fill(0).map((c,u)=>new pt(o[u],l[u])),{height:t.getInputHeight(i),width:t.getInputWidth(i)})}));return n.forEach(a=>a.dispose()),t.isBatchInput?r:r[0]}getClassifierChannelsOut(){return 136}},cOe=class extends Pj{constructor(e=new _j){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}};function dOe(e){let t=[],{extractDenseBlock3Params:n}=Nj(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return dl(e,t),{params:r,paramMappings:t}}function hOe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=hl(e),{extractDenseBlock3Params:a}=Tj(n,t),i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),o=a(64,128,"dense2");if(r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o}}}var pOe=class extends cl{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return X(()=>{let n=me(e.toBatchTensor(112,!0),"float32"),r=Kg(n,[122.782,117.001,104.298]).div(255),a=d1(r,t.dense0,!0);return a=d1(a,t.dense1),a=d1(a,t.dense2),a=qs(a,[14,14],[2,2],"valid"),a})}async forward(e){return this.forwardInput(await Pr(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return dOe(e)}extractParams(e){return hOe(e)}},fOe=class extends Pj{constructor(e=new pOe){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}};function mOe(e,t){return ie(G(e,t.weights),t.biases)}function pE(e,t,n,r,a="same"){let{filters:i,bias:s}=t.conv,o=Dr(e,i,n,a);return o=ie(o,s),o=mOe(o,t.scale),r?It(o):o}function gOe(e,t){return pE(e,t,[1,1],!0)}function Lj(e,t){return pE(e,t,[1,1],!1)}function zj(e,t){return pE(e,t,[2,2],!0,"valid")}function bOe(e,t){function n(o,l,c){let u=e(o),d=u.length/(l*c*c);if(uj(d))throw new Error("depth has to be an integer: ".concat(d,", weights.length: ").concat(u.length,", numFilters: ").concat(l,", filterSize: ").concat(c));return X(()=>tt(Lo(u,[l,d,c,c]),[2,3,1,0]))}function r(o,l,c,u){let d=n(o,l,c),h=St(e(l));return t.push({paramPath:"".concat(u,"/filters")},{paramPath:"".concat(u,"/bias")}),{filters:d,bias:h}}function a(o,l){let c=St(e(o)),u=St(e(o));return t.push({paramPath:"".concat(l,"/weights")},{paramPath:"".concat(l,"/biases")}),{weights:c,biases:u}}function i(o,l,c,u){let d=r(o,l,c,"".concat(u,"/conv")),h=a(l,"".concat(u,"/scale"));return{conv:d,scale:h}}function s(o,l,c,u,d=!1){let h=i((d?.5:1)*o,l,c,"".concat(u,"/conv1")),p=i(o,l,c,"".concat(u,"/conv2"));return{conv1:h,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:s}}function yOe(e){let{extractWeights:t,getRemainingWeights:n}=hl(e),r=[],{extractConvLayerParams:a,extractResidualLayerParams:i}=bOe(t,r),s=a(4704,32,7,"conv32_down"),o=i(9216,32,3,"conv32_1"),l=i(9216,32,3,"conv32_2"),c=i(9216,32,3,"conv32_3"),u=i(36864,64,3,"conv64_down",!0),d=i(36864,64,3,"conv64_1"),h=i(36864,64,3,"conv64_2"),p=i(36864,64,3,"conv64_3"),f=i(147456,128,3,"conv128_down",!0),m=i(147456,128,3,"conv128_1"),g=i(147456,128,3,"conv128_2"),b=i(589824,256,3,"conv256_down",!0),y=i(589824,256,3,"conv256_1"),v=i(589824,256,3,"conv256_2"),x=i(589824,256,3,"conv256_down_out"),w=X(()=>tt(us(t(256*128),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),n().length!==0)throw new Error("weights remaing after extract: ".concat(n().length));return{params:{conv32_down:s,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:u,conv64_1:d,conv64_2:h,conv64_3:p,conv128_down:f,conv128_1:m,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:v,conv256_down_out:x,fc:w},paramMappings:r}}function vOe(e,t){let n=Yc(e,t);function r(s){let o=n("".concat(s,"/scale/weights"),1),l=n("".concat(s,"/scale/biases"),1);return{weights:o,biases:l}}function a(s){let o=n("".concat(s,"/conv/filters"),4),l=n("".concat(s,"/conv/bias"),1),c=r(s);return{conv:{filters:o,bias:l},scale:c}}function i(s){return{conv1:a("".concat(s,"/conv1")),conv2:a("".concat(s,"/conv2"))}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function xOe(e){let t=[],{extractConvLayerParams:n,extractResidualLayerParams:r}=vOe(e,t),a=n("conv32_down"),i=r("conv32_1"),s=r("conv32_2"),o=r("conv32_3"),l=r("conv64_down"),c=r("conv64_1"),u=r("conv64_2"),d=r("conv64_3"),h=r("conv128_down"),p=r("conv128_1"),f=r("conv128_2"),m=r("conv256_down"),g=r("conv256_1"),b=r("conv256_2"),y=r("conv256_down_out"),{fc:v}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!lj(v))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have ".concat(v));let x={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:o,conv64_down:l,conv64_1:c,conv64_2:u,conv64_3:d,conv128_down:h,conv128_1:p,conv128_2:f,conv256_down:m,conv256_1:g,conv256_2:b,conv256_down_out:y,fc:v};return dl(e,t),{params:x,paramMappings:t}}function Yi(e,t){let n=gOe(e,t.conv1);return n=Lj(n,t.conv2),n=ie(n,e),n=It(n),n}function jb(e,t){let n=zj(e,t.conv1);n=Lj(n,t.conv2);let r=qs(e,2,2,"valid"),a=sn(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){let s=[...n.shape];s[1]=1;let o=sn(s);n=_t([n,o],1);let l=[...n.shape];l[2]=1;let c=sn(l);n=_t([n,c],2)}return r=i?_t([r,a],3):r,n=ie(r,n),n=It(n),n}var wOe=class extends cl{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return X(()=>{let n=me(e.toBatchTensor(150,!0),"float32"),r=Kg(n,[122.782,117.001,104.298]).div(255),a=zj(r,t.conv32_down);a=Hn(a,3,2,"valid"),a=Yi(a,t.conv32_1),a=Yi(a,t.conv32_2),a=Yi(a,t.conv32_3),a=jb(a,t.conv64_down),a=Yi(a,t.conv64_1),a=Yi(a,t.conv64_2),a=Yi(a,t.conv64_3),a=jb(a,t.conv128_down),a=Yi(a,t.conv128_1),a=Yi(a,t.conv128_2),a=jb(a,t.conv256_down),a=Yi(a,t.conv256_1),a=Yi(a,t.conv256_2),a=jb(a,t.conv256_down_out);let i=a.mean([1,2]);return Qe(i,t.fc)})}async forward(e){return this.forwardInput(await Pr(e))}async computeFaceDescriptor(e){var t;if((t=e==null?void 0:e.shape)!=null&&t.some(i=>i<=0))return new Float32Array(128);let n=await Pr(e),r=X(()=>fn(this.forwardInput(n))),a=await Promise.all(r.map(i=>i.data()));return r.forEach(i=>i.dispose()),n.isBatchInput?a:a[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return xOe(e)}extractParams(e){return yOe(e)}};function Bj(e,t){return{...e,descriptor:t}}function Wj(e,t){return{...e,age:t}}function Uj(e,t,n){return{...e,gender:t,genderProbability:n}}function kOe(e,t){function n(l,c){let u=Lo(e(9*l),[3,3,l,1]),d=St(e(l)),h=St(e(l)),p=St(e(l)),f=St(e(l));return t.push({paramPath:"".concat(c,"/filters")},{paramPath:"".concat(c,"/batch_norm_scale")},{paramPath:"".concat(c,"/batch_norm_offset")},{paramPath:"".concat(c,"/batch_norm_mean")},{paramPath:"".concat(c,"/batch_norm_variance")}),{filters:u,batch_norm_scale:d,batch_norm_offset:h,batch_norm_mean:p,batch_norm_variance:f}}function r(l,c,u,d,h){let p=Lo(e(l*c*u*u),[u,u,l,c]),f=St(e(c));return t.push({paramPath:"".concat(d,"/filters")},{paramPath:"".concat(d,"/").concat(h?"batch_norm_offset":"bias")}),{filters:p,bias:f}}function a(l,c,u,d){let{filters:h,bias:p}=r(l,c,u,d,!0);return{filters:h,batch_norm_offset:p}}function i(l,c,u){let d=n(l,"".concat(u,"/depthwise_conv")),h=a(l,c,1,"".concat(u,"/pointwise_conv"));return{depthwise_conv:d,pointwise_conv:h}}function s(){let l=a(3,32,3,"mobilenetv1/conv_0"),c=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),d=i(128,128,"mobilenetv1/conv_3"),h=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),f=i(256,512,"mobilenetv1/conv_6"),m=i(512,512,"mobilenetv1/conv_7"),g=i(512,512,"mobilenetv1/conv_8"),b=i(512,512,"mobilenetv1/conv_9"),y=i(512,512,"mobilenetv1/conv_10"),v=i(512,512,"mobilenetv1/conv_11"),x=i(512,1024,"mobilenetv1/conv_12"),w=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:c,conv_2:u,conv_3:d,conv_4:h,conv_5:p,conv_6:f,conv_7:m,conv_8:g,conv_9:b,conv_10:y,conv_11:v,conv_12:x,conv_13:w}}function o(){let l=a(1024,256,1,"prediction_layer/conv_0"),c=a(256,512,3,"prediction_layer/conv_1"),u=a(512,128,1,"prediction_layer/conv_2"),d=a(128,256,3,"prediction_layer/conv_3"),h=a(256,128,1,"prediction_layer/conv_4"),p=a(128,256,3,"prediction_layer/conv_5"),f=a(256,64,1,"prediction_layer/conv_6"),m=a(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),b=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),y=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),v=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),x=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),$=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),C=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),T=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),D=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),N=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor");return{conv_0:l,conv_1:c,conv_2:u,conv_3:d,conv_4:h,conv_5:p,conv_6:f,conv_7:m,box_predictor_0:{box_encoding_predictor:g,class_predictor:b},box_predictor_1:{box_encoding_predictor:y,class_predictor:v},box_predictor_2:{box_encoding_predictor:x,class_predictor:w},box_predictor_3:{box_encoding_predictor:$,class_predictor:C},box_predictor_4:{box_encoding_predictor:T,class_predictor:A},box_predictor_5:{box_encoding_predictor:D,class_predictor:N}}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:o}}function SOe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=hl(e),{extractMobilenetV1Params:a,extractPredictionLayerParams:i}=kOe(n,t),s=a(),o=i(),l={extra_dim:mx(n(5118*4),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{params:{mobilenetv1:s,prediction_layer:o,output_layer:l},paramMappings:t}}function IOe(e,t){let n=Yc(e,t);function r(c,u,d){let h=n("".concat(c,"/Conv2d_").concat(u,"_pointwise/weights"),4,"".concat(d,"/filters")),p=n("".concat(c,"/Conv2d_").concat(u,"_pointwise/convolution_bn_offset"),1,"".concat(d,"/batch_norm_offset"));return{filters:h,batch_norm_offset:p}}function a(c){let u="mobilenetv1/conv_".concat(c),d="MobilenetV1/Conv2d_".concat(c,"_depthwise"),h="".concat(u,"/depthwise_conv"),p="".concat(u,"/pointwise_conv"),f=n("".concat(d,"/depthwise_weights"),4,"".concat(h,"/filters")),m=n("".concat(d,"/BatchNorm/gamma"),1,"".concat(h,"/batch_norm_scale")),g=n("".concat(d,"/BatchNorm/beta"),1,"".concat(h,"/batch_norm_offset")),b=n("".concat(d,"/BatchNorm/moving_mean"),1,"".concat(h,"/batch_norm_mean")),y=n("".concat(d,"/BatchNorm/moving_variance"),1,"".concat(h,"/batch_norm_variance"));return{depthwise_conv:{filters:f,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:b,batch_norm_variance:y},pointwise_conv:r("MobilenetV1",c,p)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function s(c,u){let d=n("".concat(c,"/weights"),4,"".concat(u,"/filters")),h=n("".concat(c,"/biases"),1,"".concat(u,"/bias"));return{filters:d,bias:h}}function o(c){let u=s("Prediction/BoxPredictor_".concat(c,"/BoxEncodingPredictor"),"prediction_layer/box_predictor_".concat(c,"/box_encoding_predictor")),d=s("Prediction/BoxPredictor_".concat(c,"/ClassPredictor"),"prediction_layer/box_predictor_".concat(c,"/class_predictor"));return{box_encoding_predictor:u,class_predictor:d}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function $Oe(e){let t=[],{extractMobilenetV1Params:n,extractPredictionLayerParams:r}=IOe(e,t),a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!qg(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ".concat(a));let i={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:a}};return dl(e,t),{params:i,paramMappings:t}}function Qi(e,t,n){return X(()=>{let r=Dr(e,t.filters,n,"same");return r=ie(r,t.batch_norm_offset),xr(r,0,6)})}var COe=.0010000000474974513;function TOe(e,t,n){return X(()=>{let r=Bc(e,t.filters,n,"same");return r=zc(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,COe),xr(r,0,6)})}function EOe(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}function NOe(e,t){return X(()=>{let n,r=Qi(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((a,i)=>{let s=i+1,o=EOe(s);r=TOe(r,a.depthwise_conv,o),r=Qi(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function _Oe(e,t,n){let r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),h=(s-a)*(o-i),p=(u-l)*(d-c);if(h<=0||p<=0)return 0;let f=Math.max(a,l),m=Math.max(i,c),g=Math.min(s,u),b=Math.min(o,d),y=Math.max(g-f,0)*Math.max(b-m,0);return y/(h+p-y)}function AOe(e,t,n,r,a){let i=e.shape[0],s=Math.min(n,i),o=t.map((u,d)=>({score:u,boxIndex:d})).filter(u=>u.score>a).sort((u,d)=>d.score-u.score),l=u=>u<=r?1:0,c=[];return o.forEach(u=>{if(c.length>=s)return;let d=u.score;for(let h=c.length-1;h>=0;--h){let p=_Oe(e,u.boxIndex,c[h]);if(p!==0&&(u.score*=l(p),u.score<=a))break}d===u.score&&c.push(u.boxIndex)}),c}function ROe(e){let t=fn(tt(e,[1,0])),n=[Se(t[2],t[0]),Se(t[3],t[1])],r=[ie(t[0],Ce(n[0],2)),ie(t[1],Ce(n[1],2))];return{sizes:n,centers:r}}function DOe(e,t){let{sizes:n,centers:r}=ROe(e),a=fn(tt(t,[1,0])),i=Ce(G(Fr(Ce(a[2],5)),n[0]),2),s=ie(G(Ce(a[0],10),n[0]),r[0]),o=Ce(G(Fr(Ce(a[3],5)),n[1]),2),l=ie(G(Ce(a[1],10),n[1]),r[1]);return tt(Dn([Se(s,i),Se(l,o),ie(s,i),ie(l,o)]),[1,0])}function FOe(e,t,n){return X(()=>{let r=e.shape[0],a=DOe(q(da(n.extra_dim,[r,1,1]),[-1,4]),q(e,[-1,4]));a=q(a,[r,a.shape[0]/r,4]);let i=li(at(t,[0,0,1],[-1,-1,-1])),s=at(i,[0,0,0],[-1,-1,1]);s=q(s,[r,s.shape[1]]);let o=fn(a),l=fn(s);return{boxes:o,scores:l}})}function td(e,t){return X(()=>{let n=e.shape[0],r=q(Uf(e,t.box_encoding_predictor),[n,-1,1,4]),a=q(Uf(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function MOe(e,t,n){return X(()=>{let r=Qi(e,n.conv_0,[1,1]),a=Qi(r,n.conv_1,[2,2]),i=Qi(a,n.conv_2,[1,1]),s=Qi(i,n.conv_3,[2,2]),o=Qi(s,n.conv_4,[1,1]),l=Qi(o,n.conv_5,[2,2]),c=Qi(l,n.conv_6,[1,1]),u=Qi(c,n.conv_7,[2,2]),d=td(t,n.box_predictor_0),h=td(e,n.box_predictor_1),p=td(a,n.box_predictor_2),f=td(s,n.box_predictor_3),m=td(l,n.box_predictor_4),g=td(u,n.box_predictor_5),b=_t([d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),y=_t([d.classPrediction,h.classPrediction,p.classPrediction,f.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:b,classPredictions:y}})}var Xg=class{constructor({minConfidence:e,maxResults:t}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error("".concat(this._name," - expected minConfidence to be a number between 0 and 1"));if(typeof this._maxResults!="number")throw new Error("".concat(this._name," - expected maxResults to be a number"))}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},OOe=class extends cl{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return X(()=>{let n=me(e.toBatchTensor(512,!1),"float32"),r=Se(Ce(n,127.5),1),a=NOe(r,t.mobilenetv1),{boxPredictions:i,classPredictions:s}=MOe(a.out,a.conv11,t.prediction_layer);return FOe(i,s,t.output_layer)})}async forward(e){return this.forwardInput(await Pr(e))}async locateFaces(e,t={}){let{maxResults:n,minConfidence:r}=new Xg(t),a=await Pr(e),{boxes:i,scores:s}=this.forwardInput(a),o=i[0],l=s[0];for(let b=1;b<i.length;b++)i[b].dispose(),s[b].dispose();let c=Array.from(l.dataSync()),u=AOe(o,c,n,.5,r),d=a.getReshapedInputDimensions(0),h=a.inputSize,p=h/d.width,f=h/d.height,m=o.arraySync(),g=u.map(b=>{let[y,v]=[Math.max(0,m[b][0]),Math.min(1,m[b][2])].map($=>$*f),[x,w]=[Math.max(0,m[b][1]),Math.min(1,m[b][3])].map($=>$*p);return new ja(c[b],new hj(x,y,w-x,v-y),{height:a.getInputHeight(0),width:a.getInputWidth(0)})});return o.dispose(),l.dispose(),g}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return $Oe(e)}extractParams(e){return SOe(e)}},POe=.4,LOe=[new pt(.738768,.874946),new pt(2.42204,2.65704),new pt(4.30971,7.04493),new pt(10.246,4.59428),new pt(12.6868,11.8741)],zOe=[new pt(1.603231,2.094468),new pt(6.041143,7.080126),new pt(2.882459,3.518061),new pt(4.266906,5.178857),new pt(9.041765,10.66308)],BOe=[117.001,114.697,97.404],WOe="tiny_yolov2_model",UOe="tiny_yolov2_separable_conv_model",Hb=e=>typeof e=="number";function VOe(e){if(!e)throw new Error("invalid config: ".concat(e));if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: ".concat(e.withSeparableConvs));if(!Hb(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: ".concat(e.iouThreshold));if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(t=>typeof t=="string"))throw new Error("config.classes has to be an array class names: string[], have: ".concat(JSON.stringify(e.classes)));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(t=>t||{}).every(t=>Hb(t.x)&&Hb(t.y)))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: ".concat(JSON.stringify(e.anchors)));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Hb)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: ".concat(JSON.stringify(e.meanRgb)))}function fE(e){return X(()=>{let t=G(e,Me(.10000000149011612));return ie(It(Se(e,t)),t)})}function eo(e,t){return X(()=>{let n=Ui(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Dr(n,t.conv.filters,[1,1],"valid"),n=Se(n,t.bn.sub),n=G(n,t.bn.truediv),n=ie(n,t.conv.bias),fE(n)})}function to(e,t){return X(()=>{let n=Ui(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Ap(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=ie(n,t.bias),fE(n)})}function jOe(e,t){let n=oE(e,t);function r(s,o){let l=St(e(s)),c=St(e(s));return t.push({paramPath:"".concat(o,"/sub")},{paramPath:"".concat(o,"/truediv")}),{sub:l,truediv:c}}function a(s,o,l){let c=n(s,o,3,"".concat(l,"/conv")),u=r(o,"".concat(l,"/bn"));return{conv:c,bn:u}}let i=lE(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function HOe(e,t,n,r){let{extractWeights:a,getRemainingWeights:i}=hl(e),s=[],{extractConvParams:o,extractConvWithBatchNormParams:l,extractSeparableConvParams:c}=jOe(a,s),u;if(t.withSeparableConvs){let[d,h,p,f,m,g,b,y,v]=r,x=t.isFirstLayerConv2d?o(d,h,3,"conv0"):c(d,h,"conv0"),w=c(h,p,"conv1"),$=c(p,f,"conv2"),C=c(f,m,"conv3"),T=c(m,g,"conv4"),A=c(g,b,"conv5"),D=y?c(b,y,"conv6"):void 0,N=v?c(y,v,"conv7"):void 0,I=o(v||y||b,5*n,1,"conv8");u={conv0:x,conv1:w,conv2:$,conv3:C,conv4:T,conv5:A,conv6:D,conv7:N,conv8:I}}else{let[d,h,p,f,m,g,b,y,v]=r,x=l(d,h,"conv0"),w=l(h,p,"conv1"),$=l(p,f,"conv2"),C=l(f,m,"conv3"),T=l(m,g,"conv4"),A=l(g,b,"conv5"),D=l(b,y,"conv6"),N=l(y,v,"conv7"),I=o(v,5*n,1,"conv8");u={conv0:x,conv1:w,conv2:$,conv3:C,conv4:T,conv5:A,conv6:D,conv7:N,conv8:I}}if(i().length!==0)throw new Error("weights remaing after extract: ".concat(i().length));return{params:u,paramMappings:s}}function GOe(e,t){let n=Yc(e,t);function r(o){let l=n("".concat(o,"/sub"),1),c=n("".concat(o,"/truediv"),1);return{sub:l,truediv:c}}function a(o){let l=n("".concat(o,"/filters"),4),c=n("".concat(o,"/bias"),1);return{filters:l,bias:c}}function i(o){let l=a("".concat(o,"/conv")),c=r("".concat(o,"/bn"));return{conv:l,bn:c}}let s=uE(n);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:s}}function qOe(e,t){let n=[],{extractConvParams:r,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}=GOe(e,n),s;if(t.withSeparableConvs){let o=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?r("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:o>7?i("conv6"):void 0,conv7:o>8?i("conv7"):void 0,conv8:r("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:r("conv8")};return dl(e,n),{params:s,paramMappings:n}}var mE=class{constructor({inputSize:e,scoreThreshold:t}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error("".concat(this._name," - expected inputSize to be a number divisible by 32"));if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error("".concat(this._name," - expected scoreThreshold to be a number between 0 and 1"))}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},Vj=class extends cl{constructor(e){super("TinyYolov2"),VOe(e),this._config=e}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(e,t){let n=eo(e,t.conv0);return n=Hn(n,[2,2],[2,2],"same"),n=eo(n,t.conv1),n=Hn(n,[2,2],[2,2],"same"),n=eo(n,t.conv2),n=Hn(n,[2,2],[2,2],"same"),n=eo(n,t.conv3),n=Hn(n,[2,2],[2,2],"same"),n=eo(n,t.conv4),n=Hn(n,[2,2],[2,2],"same"),n=eo(n,t.conv5),n=Hn(n,[2,2],[1,1],"same"),n=eo(n,t.conv6),n=eo(n,t.conv7),Uf(n,t.conv8,"valid",!1)}runMobilenet(e,t){let n=this.config.isFirstLayerConv2d?fE(Uf(e,t.conv0,"valid",!1)):to(e,t.conv0);return n=Hn(n,[2,2],[2,2],"same"),n=to(n,t.conv1),n=Hn(n,[2,2],[2,2],"same"),n=to(n,t.conv2),n=Hn(n,[2,2],[2,2],"same"),n=to(n,t.conv3),n=Hn(n,[2,2],[2,2],"same"),n=to(n,t.conv4),n=Hn(n,[2,2],[2,2],"same"),n=to(n,t.conv5),n=Hn(n,[2,2],[1,1],"same"),n=t.conv6?to(n,t.conv6):n,n=t.conv7?to(n,t.conv7):n,Uf(n,t.conv8,"valid",!1)}forwardInput(e,t){let{params:n}=this;if(!n)throw new Error("TinyYolov2 - load model before inference");return X(()=>{let r=me(e.toBatchTensor(t,!1),"float32");return r=this.config.meanRgb?Kg(r,this.config.meanRgb):r,r=r.div(255),this.config.withSeparableConvs?this.runMobilenet(r,n):this.runTinyYolov2(r,n)})}async forward(e,t){return this.forwardInput(await Pr(e),t)}async detect(e,t={}){let{inputSize:n,scoreThreshold:r}=new mE(t),a=await Pr(e),i=await this.forwardInput(a,n),s=X(()=>fn(i)[0].expandDims()),o={width:a.getInputWidth(0),height:a.getInputHeight(0)},l=await this.extractBoxes(s,a.getReshapedInputDimensions(0),r);i.dispose(),s.dispose();let c=l.map(p=>p.box),u=l.map(p=>p.score),d=l.map(p=>p.classScore),h=l.map(p=>this.config.classes[p.label]);return NMe(c.map(p=>p.rescale(n)),u,this.config.iouThreshold,!0).map(p=>new QT(u[p],d[p],h[p],c[p],o))}getDefaultModelName(){return""}extractParamsFromWeightMap(e){return qOe(e,this.config)}extractParams(e){let t=this.config.filterSizes||Vj.DEFAULT_FILTER_SIZES,n=t?t.length:void 0;if(n!==7&&n!==8&&n!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ".concat(n," filterSizes in config"));return HOe(e,this.config,this.boxEncodingSize,t)}async extractBoxes(e,t,n){let{width:r,height:a}=t,i=Math.max(r,a),s=i/r,o=i/a,l=e.shape[1],c=this.config.anchors.length,[u,d,h]=X(()=>{let g=e.reshape([l,l,c,this.boxEncodingSize]),b=g.slice([0,0,0,0],[l,l,c,4]),y=g.slice([0,0,0,4],[l,l,c,1]),v=this.withClassScores?al(g.slice([0,0,0,5],[l,l,c,this.config.classes.length]),3):Me(0);return[b,y,v]}),p=[],f=await d.array(),m=await u.array();for(let g=0;g<l;g++)for(let b=0;b<l;b++)for(let y=0;y<c;y++){let v=c1(f[g][b][y][0]);if(!n||v>n){let x=(b+c1(m[g][b][y][0]))/l*s,w=(g+c1(m[g][b][y][1]))/l*o,$=Math.exp(m[g][b][y][2])*this.config.anchors[y].x/l*s,C=Math.exp(m[g][b][y][3])*this.config.anchors[y].y/l*o,T=x-$/2,A=w-C/2,D={row:g,col:b,anchor:y},{classScore:N,label:I}=this.withClassScores?await this.extractPredictedClass(h,D):{classScore:1,label:0};p.push({box:new dj(T,A,T+$,A+C),score:v,classScore:v*N,label:I,...D})}}return u.dispose(),d.dispose(),h.dispose(),p}async extractPredictedClass(e,t){let{row:n,col:r,anchor:a}=t,i=await e.array();return Array(this.config.classes.length).fill(0).map((s,o)=>i[n][r][a][o]).map((s,o)=>({classScore:s,label:o})).reduce((s,o)=>s.classScore>o.classScore?s:o)}},gE=Vj;gE.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var KOe=class extends gE{constructor(e=!0){let t={withSeparableConvs:e,iouThreshold:POe,classes:["face"],...e?{anchors:zOe,meanRgb:BOe}:{anchors:LOe,withClassScores:!0}};super(t)}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(n=>new ja(n.score,n.relativeBox,{width:n.imageWidth,height:n.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?UOe:WOe}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},XOe=class extends mE{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},Yg=class{async then(e){return e(await this.run())}async run(){throw new Error("ComposableTask - run is not implemented")}};async function tw(e,t,n,r,a=({alignedRect:i})=>i){let i=e.map(l=>dE(l)?a(l):l.detection),s=r||(t instanceof qe?await sE(t,i):await iE(t,i)),o=await n(s);return s.forEach(l=>l instanceof qe&&l.dispose()),o}async function bE(e,t,n,r,a){return tw([e],t,async i=>n(i[0]),r,a)}var YOe=.4,JOe=[new pt(1.603231,2.094468),new pt(6.041143,7.080126),new pt(2.882459,3.518061),new pt(4.266906,5.178857),new pt(9.041765,10.66308)],ZOe=[117.001,114.697,97.404],QOe=class extends gE{constructor(){let e={withSeparableConvs:!0,iouThreshold:YOe,classes:["face"],anchors:JOe,meanRgb:ZOe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};super(e)}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(n=>new ja(n.score,n.relativeBox,{width:n.imageWidth,height:n.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},ba={ssdMobilenetv1:new OOe,tinyFaceDetector:new QOe,tinyYolov2:new KOe,faceLandmark68Net:new cOe,faceLandmark68TinyNet:new fOe,faceRecognitionNet:new wOe,faceExpressionNet:new XMe,ageGenderNet:new uOe},jj=class extends Yg{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},yE=class extends jj{async run(){let e=await this.parentTask,t=await tw(e,this.input,async n=>Promise.all(n.map(r=>ba.faceExpressionNet.predictExpressions(r))),this.extractedFaces);return e.map((n,r)=>Dj(n,t[r]))}withAgeAndGender(){return new kE(this,this.input)}},vE=class extends jj{async run(){let e=await this.parentTask;if(!e)return;let t=await bE(e,this.input,n=>ba.faceExpressionNet.predictExpressions(n),this.extractedFaces);return Dj(e,t)}withAgeAndGender(){return new SE(this,this.input)}},xE=class extends yE{withAgeAndGender(){return new IE(this,this.input)}withFaceDescriptors(){return new CE(this,this.input)}},wE=class extends vE{withAgeAndGender(){return new $E(this,this.input)}withFaceDescriptor(){return new TE(this,this.input)}},Hj=class extends Yg{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},kE=class extends Hj{async run(){let e=await this.parentTask,t=await tw(e,this.input,async n=>Promise.all(n.map(r=>ba.ageGenderNet.predictAgeAndGender(r))),this.extractedFaces);return e.map((n,r)=>{let{age:a,gender:i,genderProbability:s}=t[r];return Wj(Uj(n,i,s),a)})}withFaceExpressions(){return new yE(this,this.input)}},SE=class extends Hj{async run(){let e=await this.parentTask;if(!e)return;let{age:t,gender:n,genderProbability:r}=await bE(e,this.input,a=>ba.ageGenderNet.predictAgeAndGender(a),this.extractedFaces);return Wj(Uj(e,n,r),t)}withFaceExpressions(){return new vE(this,this.input)}},IE=class extends kE{withFaceExpressions(){return new xE(this,this.input)}withFaceDescriptors(){return new CE(this,this.input)}},$E=class extends SE{withFaceExpressions(){return new wE(this,this.input)}withFaceDescriptor(){return new TE(this,this.input)}},Gj=class extends Yg{constructor(e,t){super(),this.parentTask=e,this.input=t}},CE=class extends Gj{async run(){let e=await this.parentTask;return(await tw(e,this.input,t=>Promise.all(t.map(n=>ba.faceRecognitionNet.computeFaceDescriptor(n))),null,t=>t.landmarks.align(null,{useDlibAlignment:!0}))).map((t,n)=>Bj(e[n],t))}withFaceExpressions(){return new xE(this,this.input)}withAgeAndGender(){return new IE(this,this.input)}},TE=class extends Gj{async run(){let e=await this.parentTask;if(!e)return;let t=await bE(e,this.input,n=>ba.faceRecognitionNet.computeFaceDescriptor(n),null,n=>n.landmarks.align(null,{useDlibAlignment:!0}));return Bj(e,t)}withFaceExpressions(){return new wE(this,this.input)}withAgeAndGender(){return new $E(this,this.input)}},qj=class extends Yg{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.useTinyLandmarkNet=n}get landmarkNet(){return this.useTinyLandmarkNet?ba.faceLandmark68TinyNet:ba.faceLandmark68Net}},e3e=class extends qj{async run(){let e=await this.parentTask,t=e.map(a=>a.detection),n=this.input instanceof qe?await sE(this.input,t):await iE(this.input,t),r=await Promise.all(n.map(a=>this.landmarkNet.detectLandmarks(a)));return n.forEach(a=>a instanceof qe&&a.dispose()),e.filter((a,i)=>r[i]).map((a,i)=>hE(a,r[i]))}withFaceExpressions(){return new xE(this,this.input)}withAgeAndGender(){return new IE(this,this.input)}withFaceDescriptors(){return new CE(this,this.input)}},t3e=class extends qj{async run(){let e=await this.parentTask;if(!e)return;let{detection:t}=e,n=this.input instanceof qe?await sE(this.input,[t]):await iE(this.input,[t]),r=await this.landmarkNet.detectLandmarks(n[0]);return n.forEach(a=>a instanceof qe&&a.dispose()),hE(e,r)}withFaceExpressions(){return new wE(this,this.input)}withAgeAndGender(){return new $E(this,this.input)}withFaceDescriptor(){return new TE(this,this.input)}},Kj=class extends Yg{constructor(e,t=new Xg){super(),this.input=e,this.options=t}},Xj=class extends Kj{async run(){let{input:e,options:t}=this,n;if(t instanceof XOe)n=ba.tinyFaceDetector.locateFaces(e,t);else if(t instanceof Xg)n=ba.ssdMobilenetv1.locateFaces(e,t);else if(t instanceof mE)n=ba.tinyYolov2.locateFaces(e,t);else throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");return n}runAndExtendWithFaceDetections(){return new Promise((e,t)=>{this.run().then(n=>e(n.map(r=>Fv({},r)))).catch(n=>t(n))})}withFaceLandmarks(e=!1){return new e3e(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new yE(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new kE(this.runAndExtendWithFaceDetections(),this.input)}},n3e=class extends Kj{async run(){let e=await new Xj(this.input,this.options),t=e[0];return e.forEach(n=>{n.score>t.score&&(t=n)}),t}runAndExtendWithFaceDetection(){return new Promise(async e=>{let t=await this.run();e(t?Fv({},t):void 0)})}withFaceLandmarks(e=!1){return new t3e(this.runAndExtendWithFaceDetection(),this.input,e)}withFaceExpressions(){return new vE(this.runAndExtendWithFaceDetection(),this.input)}withAgeAndGender(){return new SE(this.runAndExtendWithFaceDetection(),this.input)}};function r3e(e,t=new Xg){return new n3e(e,t)}function a3e(e,t=new Xg){return new Xj(e,t)}function i3e(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");let n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((a,i)=>a-r[i]).reduce((a,i)=>a+i*i,0))}var Yj=class{constructor(e,t=.6){this._distanceThreshold=t;let n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");let r=1,a=()=>"person ".concat(r++);this._labeledDescriptors=n.map(i=>{if(i instanceof Sd)return i;if(i instanceof Float32Array)return new Sd(a(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new Sd(a(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}get labeledDescriptors(){return this._labeledDescriptors}get distanceThreshold(){return this._distanceThreshold}computeMeanDistance(e,t){return t.map(n=>i3e(n,e)).reduce((n,r)=>n+r,0)/(t.length||1)}matchDescriptor(e){return this.labeledDescriptors.map(({descriptors:t,label:n})=>new sD(n,this.computeMeanDistance(e,t))).reduce((t,n)=>t.distance<n.distance?t:n)}findBestMatch(e){let t=this.matchDescriptor(e);return t.distance<this._distanceThreshold?t:new sD("unknown",t.distance)}toJSON(){return{distanceThreshold:this._distanceThreshold,labeledDescriptors:this._labeledDescriptors.map(e=>e.toJSON())}}static fromJSON(e){let t=e.labeledDescriptors.map(n=>Sd.fromJSON(n));return new Yj(t,e.distanceThreshold)}};function Jj(e,t){let{width:n,height:r}=new No(t.width,t.height);if(n<=0||r<=0)throw new Error("resizeResults - invalid dimensions: ".concat(JSON.stringify({width:n,height:r})));if(Array.isArray(e))return e.map(a=>Jj(a,{width:n,height:r}));if(dE(e)){let a=e.detection.forSize(n,r),i=e.unshiftedLandmarks.forSize(a.box.width,a.box.height);return hE(Fv(e,a),i)}return _m(e)?Fv(e,e.detection.forSize(n,r)):e instanceof Nm||e instanceof ja?e.forSize(n,r):e}const s3e="/assets/check-6c47b649.svg";const o3e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAADmCAMAAABruQABAAAAP1BMVEWnp6f///+0tLSkpKShoaG4uLjo6OjOzs7X19f29vbl5eXCwsLKysrU1NTx8fGqqqrd3d3n5+fu7u6vr6+/v78V2MF7AAAHg0lEQVR4nO2d27aqMAxFK60XvB/1/7/1gHgBKQpZKwE69nrbL1vmaJu0aZq4hYHyy/Z8WO93hfb79ea8yi1+deGU///xvM98CMHXVfx93R0uyj+ty3beuQLKRVUSLg9HzZ/XYzsvi9GKc9X4Tms9PCW2y+4n2JMvZGedb9Bh+5f1BKsU/EHjKzTYVtdBZNXgadDR2fJlGAhW0Xn+zGSzrQeP2VMhY3s9LtvlJCVzChOTynYQTUe1oWOyyVZaY+j8ivg9PLYcmY/vodvQPojHdmSQlXB71hfR2C7wfHzB7UifxGLjoRHhOGxHIhpvWlLYctJae8FxHB2FjWIhG3CUDRiDbclGK+AYpzoCG7obieqEfxeBjWtHnvK3KbCdNNCKWbkdn23NX2yV/OhsucqMvLPBLhxlU7CRT8G2EmT7pzZsxcBl47Jd9dCKgQMPcxjbVnHYCoEDh7FlqmjowEFszJNNTH45HttNz0hWClBsCGJTHrZi4NZjsW20h63QWGyqDqASZE0ANr3t1lvQxgtgs5iS0I4ZYFPcSr4VgFtxgM1gSmKWUs6muU2uCdh3ydnUDqVNhTHYTJYb5AXkbDZT0nn5xY6YTSe8FWGTezgxm/LR7a2rPdvBZrkhxkTMtjNjE59zxGzKR+4am9hQitms0Jw8qUbMZmVKnDzZS8pmccB5sIlvUaVsVu4NcXBSNu0QV41NHOySsq3M2OQnASmb2bYE2Jj8sY3KJr76ngFbyuP2x0Zks/MB9v4tZd+d8p4r5b1yymecpM+mdjGFf+ZsdrEgcXqQmM3oOmCUGN7Zik2eJSpms3LeQI7J9O865JeLcjYbNCTlXM6mnhT0YJNnUcrZjC47gEQFOZvNKQdJV/vLU4jKIOUJS3oC2Ex2JkCaAsJmkWACZYcieXgWbMhrMYTNIMMEeiPwlxsal37MRB4rQdn0vQCWRA+x6W+7kK/D2LQnJTYlJ/6uAysFhbEpBxbAR6fgOyrVSYmWEQLZVCN52IsVmE0zIgQ/FUbfZCq6ONCS4GxnvYGTJ4WS2BZqCw6vqQCz6e1N0C8jvMtXmpRAfjmPba8zcPizfEYdDJ1aEYTyLAQ2nZgQ/l2U2iwKA0cp08VgUzCVjNIsnHpBdDRC8ZIFiY29OYGrRFTi1OfKuLOSUglpmrXHwFDCS6SacVwHzvkmWq0/IhnHkCx4bLybRkb1qkq0+pO06AJhI/kQr24oCU2evtX+Itp/4oROWDayFLGWLaUuHhxIqIlapxdfcmjYriFqfWUcjWX+q89h/jN0exKgEjotcWt+Yy8iwLJOLZFrtSP2xDPtSCl2HfodAEf+FH7/ALGx9PTGMvy+D0I4z+9JotDTQsSGVRmLS4FNtGuGL20iUmATOQLe7v8tjR4yAjbeoa0mDTZB9oJKhxwNNkHwBC1/GpUGmyCHjbr/f0qDTRCK1TAlKmwCQ0mJ/39qImzsbfJdKnNy+HqbDZvgsnE2c1KwW56NLRHsS+biAySJh9wg0EMKbJJGEHizgIj4bBtRVAF5m9IlOpswh3kWZ1NpaxIFa8Jmk7c44rs4Ltuqq8NuD/nTlHtJ5jcsZj7dXpKbYc1oo0MXbkw/R2Jb3WCwB53f0wKVFLbNiUP2wLuSWtRScgzZuWo+UAYPZcv3xCGr02Vj99pSIqvoTmgOJcSmR3YX2tcbYDvQ11lLHrolltf8dia1IhA6Idsxs6vPJd6uyNiUF9onnfAdhITtrL/QPhROEo8wnC3H23RL6LLh3nww28F0Or7lh3cZHsiW29mQNt3QynjD2DYjDdpDYTno+DqEbZyVVpcf9JZlANvW3DxGFLL+Q9efbT/2oFUaMHR92fLrBAatUuibrteTbTuuEWnK+3752v3Y1tOYjy/183W92Ea3jy2FPi+terDl8lixnrz/nQD2m82ww8Mg/baXP9kUiwqACr/u7H6xTc2K1PUrd/sHG5J+rK8f1yPf2cDLC3X5r5nAX9mM2g4i+pYv+42N/EJWR1+yE7+wzQLtW/pGN9tM0L7AdbLNBq37qWMX2wzMyFsdBqWDzagwNEvxh/xxtomcsfsr+pgnykZ5OWqrWHZKjM2wZxFNsdIZETa71jdMRTL5Imxjf6VQ7fNcm21Gjq2plidosSmV27LQZ9LzJ9sc7chTn2fVDza7NlMa+lhyH2yzXWyVmgmmTbYZOu2mrp1s8/RsdTVyGhpsJp0cdFWflXW22c9I17SVNbZ528inaqfwGtusjqPdOkXYLNpvWOjt5N5s0kcLk5NvsU33TmOoXlmXL7axv4go/8Eme/00TT0HzqU3bO5ZwcalttpKPcqFu8SMZKWsxjbnE2lMVSzWpbQleamqGOjS2UnW5V9sZj1mzXTfMbv0HECpeyS2ZLPrD28n/2CbcUiyU+U1uEtySlbvxV0KEaCYrnc2owazxgp3ttQcd6XCCzizZtXGKhacS9IDuHswz5l0uxxFBZtqm7MRFQq2BALlUYWL02uWNbL81qV3vnnIb1yiZrI8n7rUwgkv+Z1TbuM5opYuzd1kqcylF0946upSPJhWOrlUtyWlUmZbZ8nqP3tfdfEE2tVdAAAAAElFTkSuQmCC";function Zj(e){const[t,n]=oe.useState("0000 00 00() 00:00:00"),[r,a]=oe.useState("D-"),[i,s]=oe.useState("D-"),[o,l]=oe.useState("D-"),[c,u]=oe.useState(""),[d,h]=oe.useState(""),[p,f]=oe.useState(""),[m,g]=oe.useState("");oe.useState(!1),oe.useState([]),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState(""),oe.useState("");const b=async()=>{var T=new Date;const A=T.getHours(),D=String(T.getMinutes()).padStart(2,"0"),N=String(T.getSeconds()).padStart(2,"0"),I=T.getFullYear(),M=String(T.getMonth()+1).padStart(2,"0"),P=String(T.getDate()).padStart(2,"0");["","","","","","",""][T.getDay()];const j="".concat(I,"-").concat(M,"-").concat(P," ").concat(A,":").concat(D,":").concat(N);n(j);var K=new Date(e.product.substring(0,4),e.product.substring(5,7)-1,e.product.substring(8,10));const O=String(K.getFullYear()),W=String(K.getMonth()+1).padStart(2,"0"),L=String(K.getDate()).padStart(2,"0");var H=K.getTime()-T.getTime(),Z=Math.ceil(H/(1e3*60*60*24));h("".concat(O," ").concat(W," ").concat(L,"")),a("D-".concat(Z)),Z>0?u(""):u("");var J=new Date(e.locker.substring(0,4),e.locker.substring(5,7)-1,e.locker.substring(8,10));const ne=String(J.getFullYear()),re=String(J.getMonth()+1).padStart(2,"0"),pe=String(J.getDate()).padStart(2,"0");var de=J.getTime()-T.getTime(),he=Math.ceil(de/(1e3*60*60*24));f("".concat(ne," ").concat(re," ").concat(pe,"")),s("D-".concat(he)),he>0?u(""):u("");var Ie=new Date(e.duclass.substring(0,4),e.duclass.substring(5,7)-1,e.duclass.substring(8,10));const Fe=String(Ie.getFullYear()),ze=String(Ie.getMonth()+1).padStart(2,"0"),Pe=String(Ie.getDate()).padStart(2,"0");var st=Ie.getTime()-T.getTime(),Ge=Math.ceil(st/(1e3*60*60*24));g("".concat(Fe," ").concat(ze," ").concat(Pe,"")),l("D-".concat(Ge))},y=()=>{b()};oe.useEffect(()=>{y()},[]);let v;e.detectedName==null?v=_.jsx("p",{style:{fontSize:"27px",color:"#FF6300",marginTop:"4.9%",fontWeight:"700"},children:e.Name}):e.detectedName&&(v=_.jsx("p",{style:{fontSize:"27px",color:"#FF6300",marginTop:"4.9%",fontWeight:"700"},children:e.detectedName}));let x;e.profileImg==null?e.profile_img!=null?x=_.jsx("div",{className:"profile2",children:_.jsx("img",{style:{width:"230px",height:"180px",borderRadius:"10px"},src:e.profile_img})}):x=_.jsx("div",{className:"profile2",children:_.jsx("img",{style:{width:"230px",height:"180px",borderRadius:"10px"},src:o3e})}):e.profileImg&&(x=_.jsx("div",{className:"profile2",children:_.jsx("img",{src:e.profileImg})}));let w;e.onCancelButtonClick==null?w=_.jsx(Ye,{size:"large",expand:"block",onClick:()=>e.onCancelButtonClick(),children:""}):e.onCancelButtonClick&&(w=_.jsx(Ye,{size:"large",expand:"block",onClick:()=>e.onCancelButtonClick(),children:""}));let $;e.flag=="0"?$=_.jsx("p",{className:"body2_welcome",children:"."}):e.flag=="1"&&($=_.jsx("p",{className:"body2_welcome",children:"."}));let C;return e.flag=="0"?C=_.jsxs("div",{className:"body2_time",children:[" : ",t,_.jsx("br",{})]}):e.flag=="1"&&(C=_.jsxs("div",{className:"body2_time",children:[" : ",e.recentTime,_.jsx("br",{})," : ",t]})),_.jsx(_.Fragment,{children:_.jsxs("div",{className:"welcome-box",children:[_.jsxs("div",{className:"one-box",children:["    ",_.jsx(br,{children:_.jsx(it,{children:_.jsx(lt,{size:"auto",children:x})})})]}),_.jsx("div",{className:"two-box",children:_.jsxs(br,{children:[_.jsx(it,{children:_.jsxs(lt,{size:"auto",children:[_.jsx("div",{className:"body2_background-block"}),_.jsxs("div",{className:"body2",children:[_.jsxs("div",{className:"body2_name",children:[v,_.jsx("p",{className:"body2_nim",children:","}),$]}),_.jsxs("div",{className:"row3",children:[_.jsx("div",{className:"row1",children:C}),_.jsxs("div",{className:"row2",children:[_.jsxs("div",{className:"body2_p1",children:[_.jsx("p",{className:"body2_mil",children:" "}),_.jsxs("p",{className:"body2_score",children:[e.mile.length>3?e.mile.substring(0,1)+","+e.mile.substring(1):e.mile,""]})]}),_.jsxs("div",{className:"body2_p2",children:[_.jsx("p",{className:"body2_mil",children:" "}),_.jsxs("p",{className:"body2_score",children:[e.come,""]})]})]})]})]})]})}),_.jsx(it,{children:_.jsxs(lt,{size:"auto",children:[_.jsx("div",{className:"background-block2"}),_.jsxs("div",{className:"body3",children:[" ",_.jsx("div",{className:"body3_circle"})," ",_.jsxs("div",{className:"body3_p1",children:[_.jsx("p",{className:"body3_p1_finish",children:" "}),_.jsxs("div",{className:"body3_p1_r",children:[_.jsxs("p",{className:"body3_p1_r_date",children:[" ",d]}),_.jsxs("p",{className:"dday",children:[" ",r]})]})]}),_.jsxs("div",{className:"body3_p2",children:[" ",_.jsx("p",{className:"body3_p2_product",children:" "}),_.jsxs("div",{className:"body3_p2_r",children:[" ",_.jsx("p",{className:"body3_p1_r_date",children:e.have})]})]})]})]})}),_.jsx(it,{children:_.jsxs(lt,{size:"auto",children:[_.jsx("div",{className:"background-block3"}),_.jsx("div",{className:"box3",children:_.jsxs("div",{className:"body3",children:[" ",_.jsx("div",{className:"body3_circle"})," ",_.jsxs("div",{className:"body3_p1",children:[_.jsx("p",{className:"body3_p1_finish",children:" "}),_.jsxs("div",{className:"body3_p1_r",children:[_.jsx("p",{className:"use",children:c}),_.jsxs("p",{style:{marginTop:"4.2%"},className:"body4_date",children:[" ",p]}),_.jsxs("p",{className:"dday",style:{marginTop:"4%"},children:[" ",i]})]})]}),_.jsxs("div",{className:"body3_p2",children:[" ",_.jsx("p",{className:"body3_p2_product",style:{marginTop:"4%"},children:""}),_.jsxs("div",{className:"body3_p2_r",children:[" ",_.jsx("p",{className:"use",style:{marginTop:"6.7%"},children:c}),_.jsx("p",{className:"body4_date",style:{marginTop:"5.7%"},children:""})]})]})]})})]})}),_.jsx(it,{children:_.jsxs(lt,{size:"auto",children:[_.jsx("div",{className:"background-block4"}),_.jsxs("div",{className:"body5",children:[_.jsx("div",{className:"body5_circle"})," ",_.jsxs("div",{className:"body5_p1",children:[_.jsx("p",{className:"body3_p1_finish",children:" "}),_.jsxs("div",{className:"body3_p1_r",children:[_.jsx("p",{className:"body3_p1_r_date",children:m}),_.jsx("p",{className:"dday",children:o})]})]}),_.jsxs("div",{className:"body5_p2",children:[_.jsx("p",{className:"body3_p1_finish",children:" "}),_.jsxs("div",{className:"body3_p1_r",children:[_.jsxs("p",{className:"body5_left",children:[e.left,""]}),_.jsx("p",{className:"body5_left2",children:""})]})]}),_.jsxs("div",{className:"body5_p2",children:[_.jsx("p",{className:"body3_p1_finish",children:" "}),_.jsx("div",{className:"body3_p1_r",children:_.jsx("p",{className:"body3_p1_r_date",style:{marginTop:"5%"},children:e.inclass})})]})]})]})})]})}),_.jsx("div",{className:"three-box",children:_.jsx(br,{children:_.jsx("div",{className:"btnn",children:w})})})]})})}const l3e=({detectedName:e,mid:t,tel:n,profileImg:r,mile:a,come:i,product:s,have:o,locker:l,duclass:c,left:u,inclass:d,recentTime:h,flag:p,gymcode:f,onClose:m})=>{const[g,b]=oe.useState(!1),y={content:{width:"640px",height:"710px",margin:"auto",background:"#232323"}},[v,x]=oe.useState(""),w=async()=>{var P=new Date;const z=P.getHours(),j=String(P.getMinutes()).padStart(2,"0"),K=String(P.getSeconds()).padStart(2,"0"),O=P.getFullYear(),W=String(P.getMonth()+1).padStart(2,"0"),L=String(P.getDate()).padStart(2,"0"),H="".concat(O,"-").concat(W,"-").concat(L," ").concat(z,":").concat(j,":").concat(K);x(H)},$=()=>{w()};oe.useEffect(()=>{$(),console.log("?")},[]);const C=()=>{b(!0),T()},T=async()=>{const z={url:"http://dev.wisevill.com/kioskdb/update_in.php",data:{id:t,code:f,time:v}},j=await As.post(z);console.log(j)},A=()=>{b(!0),D()},D=async()=>{const z={url:"http://dev.wisevill.com/kioskdb/update_out.php",data:{id:t,code:f,time:v}},j=await As.post(z);console.log(j)},N=()=>{m(),b(!1)};let I;p=="0"?I=_.jsx("button",{className:"btn_attandance",onClick:C,children:""}):p=="1"&&(I=_.jsx("button",{className:"btn_attandance",onClick:A,children:""}));let M;if(n){const P=n.split("-");P.length!==3&&(M=_.jsxs("div",{className:"real_num",children:[" ",n]}));const z="".concat(P[0],"-").concat(P[1].charAt(0),"***-").concat(P[2]);M=_.jsxs("div",{className:"real_num",children:[" ",z]})}return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"background-block"}),_.jsxs("div",{className:"box-wrap",children:[_.jsx("div",{className:"blue-box",children:_.jsx(br,{children:_.jsx(it,{children:_.jsxs(lt,{children:[_.jsx("img",{className:"Check_logo",src:s3e}),_.jsxs("h2",{className:"modal_h2",children:[" ",e,""," ",_.jsx("br",{})," ."]})]})})})}),_.jsx("div",{className:"red-box",children:_.jsx(br,{children:_.jsx(it,{children:_.jsx(lt,{children:r&&_.jsx("img",{src:r,className:"profile",alt:"Captured Selfie"})})})})}),_.jsxs("div",{className:"yellow-box",children:[" ",_.jsx(br,{children:_.jsx(it,{children:_.jsx(lt,{children:_.jsxs("div",{className:"btn_block",children:[_.jsxs("div",{className:"num_text",children:[_.jsx("div",{className:"text_margin",children:_.jsxs("div",{className:"Member_Number",children:[_.jsx("div",{className:"num_text",children:""}),_.jsx("div",{className:"real_num",children:t})]})}),_.jsxs("div",{className:"Member_Number2",children:[_.jsx("div",{className:"num_text",children:""}),M]})]}),_.jsxs("div",{className:"modal_button",children:[_.jsx("div",{className:"btn_attandance_block",children:I}),_.jsxs("div",{className:"btn_cancel_block",children:[" ",_.jsx("button",{className:"btn_cancel",onClick:m,children:""})]})]})]})})})})]})]}),g&&_.jsx(es,{className:"welcome",backdropDismiss:!1,isOpen:!0,onRequestClose:()=>b(!1),contentLabel:"New Modal",style:y,children:_.jsx(Zj,{detectedName:e,profileImg:r,mile:a,come:i,product:s,have:o,locker:l,duclass:c,left:u,inclass:d,recentTime:h,flag:p,onRequestClose:()=>b(!1),onCancelButtonClick:N})})]})};const uD=({id:e,Name:t,mid:n,tel:r,profileImg:a,mile:i,come:s,product:o,have:l,locker:c,duclass:u,left:d,inclass:h,userpassword:p,recentTime:f,flag:m,gymcode:g,onClose:b})=>{const[y,v]=oe.useState(" ."),x=J=>{v(y===" ."?J:ne=>ne+J)},w=()=>{v("")},$=()=>{y!=null&&v(J=>J.slice(0,-1))},[C,T]=oe.useState(!1),A={content:{width:"640px",height:"710px",margin:"auto",background:"#232323"}},[D,N]=oe.useState(""),I=async()=>{var J=new Date;const ne=J.getHours(),re=String(J.getMinutes()).padStart(2,"0"),pe=String(J.getSeconds()).padStart(2,"0"),de=J.getFullYear(),he=String(J.getMonth()+1).padStart(2,"0"),Ie=String(J.getDate()).padStart(2,"0"),Fe="".concat(de,"-").concat(he,"-").concat(Ie," ").concat(ne,":").concat(re,":").concat(pe);N(Fe)},M=()=>{I()};oe.useEffect(()=>{M()},[]);const P=document.getElementById("inner_pw"),z=()=>{p===y?(j(),console.log(" !"),T(!0)):P&&(P.innerText="  .    .",console.log(" !"),T(!1))},j=async()=>{const ne={url:"http://dev.wisevill.com/kioskdb/update_in.php",data:{id:n,code:g,time:D}},re=await As.post(ne);console.log(re)},[K,O]=oe.useState(!1),W=()=>{p===y?(L(),console.log(" !"),T(!0)):P&&(P.innerText="  .    .",console.log(" !"),T(!1))},L=async()=>{const ne={url:"http://dev.wisevill.com/kioskdb/update_out.php",data:{id:n,code:g,time:D}},re=await As.post(ne);console.log(re)},H=()=>{b(),T(!1)};let Z;return m=="0"?Z=_.jsx("button",{onClick:z,className:"pw_body3_last_button1",children:""}):m=="1"&&(Z=_.jsx("button",{onClick:W,className:"pw_body3_last_button1",children:""})),_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"box-wrap",children:[_.jsx("div",{className:"first-box",children:_.jsx(br,{children:_.jsx(it,{children:_.jsx(it,{className:"pw_body",children:_.jsx(lt,{className:"pw_body2",children:_.jsxs("div",{className:"pw_body3",children:[_.jsxs("div",{className:"pw_body3_first",children:[_.jsx("p",{className:"pw_body3_first_p",children:""}),_.jsx("p",{className:"pw_body3_first_p2",children:n})]}),_.jsxs("div",{className:"pw_body3_second",children:[_.jsx("p",{className:"pw_body3_second_p",children:t}),_.jsx("p",{className:"pw_body3_second_p2",children:",   ."})]}),_.jsx("div",{className:"pw_body3_box",children:_.jsx("p",{className:"pw_body3_box_input",children:y})}),_.jsx("p",{id:"inner_pw"}),_.jsxs("div",{className:"pw_body3_last",children:[_.jsx("div",{className:"pw_body3_last_div1",children:Z}),_.jsx("div",{className:"pw_body3_last_div2",children:_.jsx("button",{onClick:b,className:"pw_body3_last_button2",children:""})})]})]})})})})})}),_.jsx("div",{className:"second-box",children:_.jsx(br,{children:_.jsxs(it,{class:"input_padd",children:[_.jsx(it,{class:"input_roww",children:_.jsxs(lt,{class:"input_boxx",children:[_.jsx(Ye,{class:"input_btnn",onClick:()=>x("1"),children:"1"}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("2"),children:"2"}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("3"),children:"3"})]})}),_.jsx(it,{class:"input_roww",children:_.jsxs(lt,{class:"input_boxx",children:[_.jsx(Ye,{class:"input_btnn",onClick:()=>x("4"),children:"4"}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("5"),children:"5"}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("6"),children:"6"})]})}),_.jsx(it,{class:"input_roww",children:_.jsxs(lt,{class:"input_boxx",children:[_.jsx(Ye,{class:"input_btnn",onClick:()=>x("7"),children:"7"}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("8"),children:"8"}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("9"),children:"9"})]})}),_.jsx(it,{class:"input_roww",children:_.jsxs(lt,{class:"input_boxx",children:[_.jsx(Ye,{class:"input_btnn",style:{fontSize:"26px"},onClick:w,children:""}),_.jsx(Ye,{class:"input_btnn",onClick:()=>x("0"),children:"0"}),_.jsx(Ye,{class:"input_btnn",onClick:$,children:"X"})]})})]})})})]}),C&&_.jsx(es,{className:"welcome",backdropDismiss:!1,isOpen:!0,onRequestClose:()=>T(!1),contentLabel:"New Modal",style:A,children:_.jsx(Zj,{Name:t,profileImg:a,mile:i,come:s,product:o,have:l,locker:c,duclass:u,left:d,inclass:h,recentTime:f,flag:m,iswelcomeOpen:K,setIsWelcomeOpen:O,onRequestClose:()=>T(!1),onCancelButtonClick:H})})]})};const u3e="Unknown",p1=.5,c3e=e=>{const t=oe.useRef(null),n=oe.useRef(null),r=oe.useRef(null),a=oe.useRef(!1),[i,s]=oe.useState(!1),[o,l]=oe.useState(null),[c,u]=oe.useState(!1),[d,h]=oe.useState(!1);oe.useState(!0);const[p,f]=oe.useState(!1),[m,g]=oe.useState(!1),[b,y]=oe.useState(null),[v,x]=oe.useState(!1),[w,$]=oe.useState(!1),[C,T]=oe.useState(null),[A,D]=oe.useState(""),[N,I]=oe.useState(""),[M,P]=oe.useState(""),[z,j]=oe.useState(""),[K,O]=oe.useState(""),[W,L]=oe.useState(""),[H,Z]=oe.useState(""),[J,ne]=oe.useState(""),[re,pe]=oe.useState(""),[de,he]=oe.useState(""),[Ie,Fe]=oe.useState(""),[ze,Pe]=oe.useState(""),[st,Ge]=oe.useState(""),[Ke,We]=oe.useState(""),[ot,gt]=oe.useState(""),[Ft,Ct]=oe.useState(""),yn=async()=>{try{const Je=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=Je),a.current=!0,g(!0)}catch(Je){console.error("Error accessing webcam:",Je)}},Xt=()=>{var be;const Je=(be=t.current)==null?void 0:be.srcObject,bt=Je==null?void 0:Je.getTracks();bt==null||bt.forEach(xe=>xe.stop()),t.current.srcObject=null,a.current=!1,g(!1)},vn=()=>{if(r.current&&t.current){const Je=r.current,bt=Je.getContext("2d");bt&&(bt.drawImage(t.current,0,0,Je.width,Je.height),Je.toDataURL("image/png"),y(b))}},hr=()=>{if(r.current&&t.current){const Je=r.current,bt=Je.getContext("2d");bt&&bt.clearRect(0,0,Je.width,Je.height)}},Bt=e.code,Bn=async()=>{console.log(e.code);let Je="http://dev.wisevill.com/kioskdb/take_user_image.php";if(console.log(Bt),Bt){const bt={url:Je,data:{code:Bt},headers:{"Content-Type":"application/json"}},be=await As.post(bt);console.log(be);const te=JSON.parse(be.data).map(ce=>ce.id);return console.log(te),te}throw new Error("No data available")},[Yt,un]=oe.useState(0);oe.useEffect(()=>{const Je=async()=>{const be=await Bn();return Promise.all(be.map(async xe=>{const te=[],ce="http://dev.wisevill.com/media/labels/".concat(Bt,"/").concat(xe,".jpg");console.log(ce);const Te=await WMe(ce),ve=await r3e(Te).withFaceLandmarks().withFaceDescriptor();return te.push(ve.descriptor),new Sd(xe,te)}))},bt=async()=>{const be=await Je(),xe=new Yj(be,p1),te=t.current,ce=n.current,Te={width:te.width,height:te.height};jMe(ce,Te);const ve=setInterval(async()=>{if(a.current&&!te.paused&&!te.ended){const kt=await a3e(te).withFaceLandmarks().withFaceDescriptors(),xt=Jj(kt,Te);ce.getContext("2d").clearRect(0,0,ce.width,ce.height),xt.map(Le=>xe.findBestMatch(Le.descriptor)).forEach(async(Le,Wt)=>{const wt=xt[Wt].detection.box;let kr=Le.toString();if(Le.distance>p1&&(kr=u3e,x(!0)),Le.distance<=p1){const pl=kr.split(" ")[0];l(pl),(C==null||pl===C)&&(pr(),console.log(" +1")),s(!0)}const Vr=ce.getContext("2d");Vr.lineWidth=2,Vr.strokeStyle="red",Vr.fillStyle="red",Vr.font="20px Arial";const Gi=xt[Wt].landmarks,qi=Gi.getLeftEye(),xn=Gi.getRightEye(),Ya=(qi[0].x+xn[3].x)/2,Ki=(qi[0].y+xn[3].y)/2,qp=Vr.measureText(kr).width,Zs=parseInt(Vr.font),Kp=Ya-qp/2,Xp=Ki-wt.height/2-Zs;Vr.fillText(kr,Kp,Xp+Zs),Vr.strokeRect(wt.x,wt.y,wt.width,wt.height)})}},5e3);return()=>clearInterval(ve)};return Promise.all([ba.ssdMobilenetv1.loadFromUri("/models"),ba.faceRecognitionNet.loadFromUri("/models"),ba.faceLandmark68Net.loadFromUri("/models")]).then(()=>yn().then(bt)),()=>{a.current&&Xt()}},[]),oe.useEffect(()=>{if(console.log(" "),console.log(Yt),Yt==5){l(""),T(""),We(""),console.log(".");const Je=new Date().toLocaleTimeString();console.log(Je),un(0)}},[Yt]);const pr=()=>{Yt<5?un(Je=>Je+1):un(0)};oe.useEffect(()=>{o==null&&T(null),console.log(o),console.log(C),console.log(o),C===o?(u(!0),console.log("    .")):(u(!1),$(!1),tr(),console.log("    . ."))},[o]);const Ia=()=>{s(!1),u(!0),T(o),$(!1),h(!1),gi(),hr(),yn();const Je=new Date().toLocaleTimeString();console.log(" ."),console.log(Je)},Mt=()=>{e.setisbtnOpen(!1),e.setisbtnoutOpen(!1),f(!1),gi(),hr(),yn()},tr=async()=>{let Je="http://dev.wisevill.com/kioskdb/get_data_from_db.php";if(console.log(o),o){const bt={url:Je,data:{id:o,code:Bt},headers:{"Content-Type":"application/json"}},be=await As.post(bt);for(let xe=0;xe<JSON.parse(be.data).length;xe++)console.log(JSON.parse(be.data)[xe].id),console.log(JSON.parse(be.data)[xe].name),console.log(JSON.parse(be.data)[xe].mile),console.log(JSON.parse(be.data)[xe].recentTime),console.log(JSON.parse(be.data)[xe].pw),D(JSON.parse(be.data)[xe].id),I(JSON.parse(be.data)[xe].name),P(JSON.parse(be.data)[xe].tel),j(JSON.parse(be.data)[xe].profile_img),O(JSON.parse(be.data)[xe].mile),L(JSON.parse(be.data)[xe].comeinm),Z(JSON.parse(be.data)[xe].duetoproduct),ne(JSON.parse(be.data)[xe].haveproduct),pe(JSON.parse(be.data)[xe].indivlockerinfo),he(JSON.parse(be.data)[xe].duetoclass),Fe(JSON.parse(be.data)[xe].leftclasstime),Pe(JSON.parse(be.data)[xe].inclass),We(JSON.parse(be.data)[xe].recentTime),gt(JSON.parse(be.data)[xe].pw),Ct(JSON.parse(be.data)[xe].flag);h(!0)}if(e.id)if(e.typeid){if(e.typeid){const bt={url:Je,data:{tel:e.id,code:Bt},headers:{"Content-Type":"application/json"}},be=await As.post(bt);console.log(JSON.parse(be.data));for(let xe=0;xe<JSON.parse(be.data).length;xe++)console.log(JSON.parse(be.data)[xe].id),console.log(JSON.parse(be.data)[xe].name),console.log(JSON.parse(be.data)[xe].mile),D(JSON.parse(be.data)[xe].id),I(JSON.parse(be.data)[xe].name),P(JSON.parse(be.data)[xe].tel),console.log(M),j(JSON.parse(be.data)[xe].profile_img),O(JSON.parse(be.data)[xe].mile),L(JSON.parse(be.data)[xe].comeinm),Z(JSON.parse(be.data)[xe].duetoproduct),ne(JSON.parse(be.data)[xe].haveproduct),pe(JSON.parse(be.data)[xe].indivlockerinfo),he(JSON.parse(be.data)[xe].duetoclass),Fe(JSON.parse(be.data)[xe].leftclasstime),Pe(JSON.parse(be.data)[xe].inclass),Ge(JSON.parse(be.data)[xe].recentTime),console.log(st),gt(JSON.parse(be.data)[xe].pw),Ct(JSON.parse(be.data)[xe].flag);f(!0)}}else{const bt={url:Je,data:{id:e.id,code:Bt},headers:{"Content-Type":"application/json"}},be=await As.post(bt);for(let xe=0;xe<JSON.parse(be.data).length;xe++)console.log(JSON.parse(be.data)[xe].id),console.log(JSON.parse(be.data)[xe].name),console.log(JSON.parse(be.data)[xe].mile),D(JSON.parse(be.data)[xe].id),console.log(A),I(JSON.parse(be.data)[xe].name),P(JSON.parse(be.data)[xe].tel),j(JSON.parse(be.data)[xe].profile_img),O(JSON.parse(be.data)[xe].mile),L(JSON.parse(be.data)[xe].comeinm),Z(JSON.parse(be.data)[xe].duetoproduct),ne(JSON.parse(be.data)[xe].haveproduct),pe(JSON.parse(be.data)[xe].indivlockerinfo),he(JSON.parse(be.data)[xe].duetoclass),Fe(JSON.parse(be.data)[xe].leftclasstime),Pe(JSON.parse(be.data)[xe].inclass),Ge(JSON.parse(be.data)[xe].recentTime),gt(JSON.parse(be.data)[xe].pw),Ct(JSON.parse(be.data)[xe].flag);f(!0)}};oe.useEffect(()=>{Wn()},[Ke]);const Wn=()=>{if(Ke!=""){console.log(Ke);const Je=new Date;console.log(""),console.log(Je);const bt=new Date(Ke);console.log(bt),console.log(" "),console.log(bt);const be=Je.getTime()-bt.getTime(),xe=Math.floor(be/1e3),te=Math.floor(xe/60),ce=xe%60;if(console.log(" : ".concat(te,"  ").concat(ce," ")),console.log(be),te>=1)$(!0),vn(),Xt();else if(te<1){s(!1),u(!0),T(o),$(!1),h(!1);const Te=new Date().toLocaleTimeString();console.log("  ...."),console.log(Te)}}};let $a;$a=_.jsx(es,{className:"baseModal",isOpen:i&&!c&&d&&w,backdropDismiss:!1,children:_.jsx(l3e,{detectedName:N,profileImg:z,mid:A,tel:M,mile:K,come:W,product:H,have:J,locker:re,duclass:de,left:Ie,inclass:ze,recentTime:Ke,flag:Ft,gymcode:Bt,onClose:Ia})}),oe.useEffect(()=>{e.isbtnopen&&(vn(),Xt(),tr()),e.isbtnoutOpen&&(vn(),Xt(),tr())},[e.isbtnopen,e.isbtnoutOpen]);let Ot;e.isbtnopen&&(A==e.id&&Ft=="0"||M==e.id&&Ft=="0"?Ot=_.jsxs(es,{className:"baseModal",isOpen:e.isbtnopen&&p,backdropDismiss:!1,children:[" ",_.jsx(uD,{id:e.id,Name:N,profileImg:z,mid:A,tel:M,mile:K,come:W,product:H,have:J,locker:re,duclass:de,left:Ie,inclass:ze,userpassword:ot,recentTime:st,flag:Ft,gymcode:Bt,onClose:Mt})]}):A==e.id&&Ft=="1"||M==e.id&&Ft=="1"?Ot=_.jsxs(es,{className:"failId",isOpen:e.isbtnopen&&p,backdropDismiss:!1,children:[_.jsx("p",{children:"  ."}),_.jsx("button",{onClick:Mt,children:""})]}):Ot=_.jsxs(es,{className:"failId",isOpen:e.isbtnopen&&p,backdropDismiss:!1,children:[_.jsx("p",{children:" ."}),_.jsx("button",{onClick:Mt,children:""})]})),e.isbtnoutOpen&&(A==e.id&&Ft=="1"||M==e.id&&Ft=="1"?Ot=_.jsxs(es,{className:"baseModal",isOpen:e.isbtnoutOpen&&p,backdropDismiss:!1,children:[" ",_.jsx(uD,{id:e.id,Name:N,profileImg:z,mid:A,tel:M,mile:K,come:W,product:H,have:J,locker:re,duclass:de,left:Ie,inclass:ze,userpassword:ot,recentTime:st,flag:Ft,gymcode:Bt,onClose:Mt})]}):A==e.id&&Ft=="0"||M==e.id&&Ft=="0"?Ot=_.jsxs(es,{className:"failId",isOpen:e.isbtnoutOpen&&p,backdropDismiss:!1,children:[_.jsx("p",{children:"  ."}),_.jsx("button",{onClick:Mt,children:""})]}):Ot=_.jsxs(es,{className:"failId",isOpen:e.isbtnoutOpen&&p,backdropDismiss:!1,children:[_.jsx("p",{children:" ."}),_.jsx("button",{onClick:Mt,children:""})]}));let ji;const[Ca,Hi]=oe.useState(0),[mi]=oe.useState(5),Ta=()=>{Ca<mi?Hi(Ca+1):Ca>=mi&&Hi(0)},gi=()=>{Hi(0)};return oe.useEffect(()=>{let Je;return console.log(Ca),v&&(Je=setTimeout(()=>{x(!1),Ta()},5e3)),()=>clearTimeout(Je)},[v]),v&&Ca<mi?ji=_.jsx(dA,{children:_.jsx(oA,{children:_.jsx(lA,{children:" ."})})}):v&&Ca==mi&&(ji=_.jsx(dA,{children:_.jsx(oA,{children:_.jsxs(lA,{children:[" . ",_.jsx("br",{}),"   ."]})})})),_.jsxs(_.Fragment,{children:[_.jsx("video",{ref:t,id:"video",width:"720",height:"560",autoPlay:!0,muted:!0,style:{margin:"0 auto",position:"absolute"}}),_.jsx("canvas",{ref:n,style:{margin:"0 auto",position:"absolute"}}),ji,_.jsx("canvas",{className:"Selfie",ref:r,style:{margin:"0 auto",position:"absolute"}}),$a,Ot]})};const d3e=e=>{function t(){e.typeid==!1?e.id.length!=5?console.log("id  ."):(console.log(e.id+"  ."),e.setisbtnOpen(!0)):e.id.length!=13?console.log("id  ."):(console.log(e.id+"  ."),e.setisbtnOpen(!0))}function n(){e.typeid==!1?e.id.length!=5?console.log("id  ."):(console.log(e.id+"  ."),e.setisbtnoutOpen(!0)):e.id.length!=13?console.log("id  ."):(console.log(e.id+"  ."),e.setisbtnoutOpen(!0))}function r(){console.log("  .")}return _.jsx(_.Fragment,{children:_.jsxs(br,{class:"btns",children:[_.jsxs(it,{children:[_.jsx(lt,{class:"out_btn",children:_.jsx(Ye,{class:"out_btn",onClick:n,children:""})}),_.jsx(lt,{class:"call_btn",children:_.jsx(Ye,{class:"call_btn",onClick:r,trigger:e.trigger,children:""})})]}),_.jsx(it,{children:_.jsx(lt,{class:"in_btn",children:_.jsx(Ye,{class:"in_btn",onClick:t,trigger:e.trigger,children:""})})})]})})};function h3e(){oe.useRef(),oe.useRef();const[e,t]=oe.useState(window.innerWidth);oe.useState(window.innerHeight);const n=()=>{t(window.innerWidth)};oe.useEffect(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),oe.useState(!1);const[r,a]=oe.useState(!1);oe.useState(!1);const[i,s]=oe.useState(!1),[o,l]=oe.useState(""),[c,u]=oe.useState(!1),[d,h]=oe.useState("pw"),[p,f]=oe.useState(!1);oe.useState([]);const[m,g]=oe.useState(""),[b,y]=oe.useState(!1);return console.log(""),console.log(m),_.jsx(_.Fragment,{children:_.jsxs(o3,{children:[_.jsx("div",{className:"background-image-init"}),_.jsx("div",{className:"background-image-img"}),_.jsx("div",{className:"background-image-gradient"}),_.jsx("div",{className:"content",children:_.jsxs(br,{class:"window",children:[_.jsx(it,{class:"title",children:_.jsx(lt,{children:_.jsx(g3,{code:m,setcode:g,isJoinModalOpen:b,setisJoinModalOpen:y})})}),window.innerWidth<=window.innerHeight?_.jsx(it,{class:"announcement",children:_.jsx(lt,{class:"announcement",children:m&&_.jsx(y3,{})})}):_.jsx("div",{}),_.jsxs(it,{class:"bottom_side",children:[_.jsx(lt,{size:"8",class:"main_input_box",children:_.jsx("div",{className:"main_input_box",children:_.jsx(b3,{AlertFunc:l,settypeid:u,isbtnOpen:r,isbtnoutOpen:i})})}),_.jsx(lt,{size:"4",class:"btn_and_face",children:_.jsxs(br,{class:"btn_and_face",children:[_.jsx(it,{children:_.jsx(lt,{class:"face",children:m&&_.jsx(c3e,{isbtnopen:r,setisbtnOpen:a,isbtnoutOpen:i,setisbtnoutOpen:s,id:o,typeid:c,code:m})})}),_.jsx(it,{children:_.jsx(lt,{class:"btn",children:_.jsx(d3e,{id:o,pw:d,face:p,setisbtnOpen:a,setisbtnoutOpen:s,typeid:c})})})]})})]})]})})]})})}h3();const p3e=()=>_.jsx(j9,{children:_.jsx(gY,{children:_.jsxs(Q9,{children:[_.jsxs(xl,{exact:!0,path:"/home",children:[_.jsx(X9,{root:()=>_.jsx(RY,{})}),";"]}),_.jsx(xl,{exact:!0,path:"/Main",children:_.jsx(h3e,{})}),_.jsx(xl,{exact:!0,path:"/",children:_.jsx(WG,{to:"/Main"})}),_.jsx(xl,{exact:!0,path:"/logo",children:_.jsx(g3,{})}),_.jsx(xl,{exact:!0,path:"/announcement",children:_.jsx(y3,{})}),_.jsx(xl,{exact:!0,path:"/numpad",children:_.jsx(b3,{})})]})})}),f3e=document.getElementById("root"),m3e=SM(f3e);m3e.render(_.jsx(le.StrictMode,{children:_.jsx(p3e,{})}));export{Ck as C,_O as K,m3 as W,g3e as __vite_legacy_guard,Gd as a,Hd as b,jI as c,ck as d,dk as e,qK as f,vk as g,Hr as h,gk as i,P_ as j,N3e as k,$n as l,v3e as m,b3e as n,wA as o,y3e as p,qw as q,om as r,E3e as s,Li as w};
