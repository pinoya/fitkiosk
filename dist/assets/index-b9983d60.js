function $3e(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Em(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uD={exports:{}},Mv={},dD={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=Symbol.for("react.element"),oj=Symbol.for("react.portal"),lj=Symbol.for("react.fragment"),uj=Symbol.for("react.strict_mode"),dj=Symbol.for("react.profiler"),cj=Symbol.for("react.provider"),hj=Symbol.for("react.context"),pj=Symbol.for("react.forward_ref"),fj=Symbol.for("react.suspense"),mj=Symbol.for("react.memo"),gj=Symbol.for("react.lazy"),GT=Symbol.iterator;function bj(e){return e===null||typeof e!="object"?null:(e=GT&&e[GT]||e["@@iterator"],typeof e=="function"?e:null)}var cD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hD=Object.assign,pD={};function ph(e,t,n){this.props=e,this.context=t,this.refs=pD,this.updater=n||cD}ph.prototype.isReactComponent={};ph.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ph.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fD(){}fD.prototype=ph.prototype;function NS(e,t,n){this.props=e,this.context=t,this.refs=pD,this.updater=n||cD}var _S=NS.prototype=new fD;_S.constructor=NS;hD(_S,ph.prototype);_S.isPureReactComponent=!0;var qT=Array.isArray,mD=Object.prototype.hasOwnProperty,AS={current:null},gD={key:!0,ref:!0,__self:!0,__source:!0};function bD(e,t,n){var r,a={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)mD.call(t,r)&&!gD.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var l=Array(o),d=0;d<o;d++)l[d]=arguments[d+2];a.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Tm,type:e,key:i,ref:s,props:a,_owner:AS.current}}function yj(e,t){return{$$typeof:Tm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function RS(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tm}function vj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var KT=/\/+/g;function sw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vj(""+e.key):t.toString(36)}function Hb(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Tm:case oj:s=!0}}if(s)return s=e,a=a(s),e=r===""?"."+sw(s,0):r,qT(a)?(n="",e!=null&&(n=e.replace(KT,"$&/")+"/"),Hb(a,t,n,"",function(d){return d})):a!=null&&(RS(a)&&(a=yj(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(KT,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=r===""?".":r+":",qT(e))for(var o=0;o<e.length;o++){i=e[o];var l=r+sw(i,o);s+=Hb(i,t,n,l,a)}else if(l=bj(e),typeof l=="function")for(e=l.call(e),o=0;!(i=e.next()).done;)i=i.value,l=r+sw(i,o++),s+=Hb(i,t,n,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function nb(e,t,n){if(e==null)return e;var r=[],a=0;return Hb(e,r,"","",function(i){return t.call(n,i,a++)}),r}function xj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jr={current:null},jb={transition:null},wj={ReactCurrentDispatcher:jr,ReactCurrentBatchConfig:jb,ReactCurrentOwner:AS};tt.Children={map:nb,forEach:function(e,t,n){nb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return nb(e,function(){t++}),t},toArray:function(e){return nb(e,function(t){return t})||[]},only:function(e){if(!RS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=ph;tt.Fragment=lj;tt.Profiler=dj;tt.PureComponent=NS;tt.StrictMode=uj;tt.Suspense=fj;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wj;tt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hD({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=AS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)mD.call(t,l)&&!gD.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var d=0;d<l;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Tm,type:e.type,key:a,ref:i,props:r,_owner:s}};tt.createContext=function(e){return e={$$typeof:hj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cj,_context:e},e.Consumer=e};tt.createElement=bD;tt.createFactory=function(e){var t=bD.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:pj,render:e}};tt.isValidElement=RS;tt.lazy=function(e){return{$$typeof:gj,_payload:{_status:-1,_result:e},_init:xj}};tt.memo=function(e,t){return{$$typeof:mj,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=jb.transition;jb.transition={};try{e()}finally{jb.transition=t}};tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tt.useCallback=function(e,t){return jr.current.useCallback(e,t)};tt.useContext=function(e){return jr.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return jr.current.useDeferredValue(e)};tt.useEffect=function(e,t){return jr.current.useEffect(e,t)};tt.useId=function(){return jr.current.useId()};tt.useImperativeHandle=function(e,t,n){return jr.current.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return jr.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return jr.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return jr.current.useMemo(e,t)};tt.useReducer=function(e,t,n){return jr.current.useReducer(e,t,n)};tt.useRef=function(e){return jr.current.useRef(e)};tt.useState=function(e){return jr.current.useState(e)};tt.useSyncExternalStore=function(e,t,n){return jr.current.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return jr.current.useTransition()};tt.version="18.2.0";dD.exports=tt;var ut=dD.exports;const oe=Em(ut);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kj=ut,Sj=Symbol.for("react.element"),Ij=Symbol.for("react.fragment"),$j=Object.prototype.hasOwnProperty,Cj=kj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ej={key:!0,ref:!0,__self:!0,__source:!0};function yD(e,t,n){var r,a={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)$j.call(t,r)&&!Ej.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Sj,type:e,key:i,ref:s,props:a,_owner:Cj.current}}Mv.Fragment=Ij;Mv.jsx=yD;Mv.jsxs=yD;uD.exports=Mv;var Y=uD.exports,vD={exports:{}},Ma={},xD={exports:{}},wD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,B){var V=M.length;M.push(B);e:for(;0<V;){var K=V-1>>>1,Q=M[K];if(0<a(Q,B))M[K]=B,M[V]=Q,V=K;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var B=M[0],V=M.pop();if(V!==B){M[0]=V;e:for(var K=0,Q=M.length,ee=Q>>>1;K<ee;){var ie=2*(K+1)-1,se=M[ie],ge=ie+1,fe=M[ge];if(0>a(se,V))ge<Q&&0>a(fe,se)?(M[K]=fe,M[ge]=V,K=ge):(M[K]=se,M[ie]=V,K=ie);else if(ge<Q&&0>a(fe,V))M[K]=fe,M[ge]=V,K=ge;else break e}}return B}function a(M,B){var V=M.sortIndex-B.sortIndex;return V!==0?V:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],d=[],u=1,c=null,h=3,p=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=M)r(d),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(d)}}function x(M){if(m=!1,v(M),!f)if(n(l)!==null)f=!0,H(w);else{var B=n(d);B!==null&&X(x,B.startTime-M)}}function w(M,B){f=!1,m&&(m=!1,b(E),E=-1),p=!0;var V=h;try{for(v(B),c=n(l);c!==null&&(!(c.expirationTime>B)||M&&!N());){var K=c.callback;if(typeof K=="function"){c.callback=null,h=c.priorityLevel;var Q=K(c.expirationTime<=B);B=e.unstable_now(),typeof Q=="function"?c.callback=Q:c===n(l)&&r(l),v(B)}else r(l);c=n(l)}if(c!==null)var ee=!0;else{var ie=n(d);ie!==null&&X(x,ie.startTime-B),ee=!1}return ee}finally{c=null,h=V,p=!1}}var $=!1,C=null,E=-1,A=5,R=-1;function N(){return!(e.unstable_now()-R<A)}function I(){if(C!==null){var M=e.unstable_now();R=M;var B=!0;try{B=C(!0,M)}finally{B?F():($=!1,C=null)}}else $=!1}var F;if(typeof y=="function")F=function(){y(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,P=L.port2;L.port1.onmessage=I,F=function(){P.postMessage(null)}}else F=function(){g(I,0)};function H(M){C=M,$||($=!0,F())}function X(M,B){E=g(function(){M(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,H(w))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var V=h;h=B;try{return M()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=h;h=M;try{return B()}finally{h=V}},e.unstable_scheduleCallback=function(M,B,V){var K=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,M){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,M={id:u++,callback:B,priorityLevel:M,startTime:V,expirationTime:Q,sortIndex:-1},V>K?(M.sortIndex=V,t(d,M),n(l)===null&&M===n(d)&&(m?(b(E),E=-1):m=!0,X(x,V-K))):(M.sortIndex=Q,t(l,M),f||p||(f=!0,H(w))),M},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(M){var B=h;return function(){var V=h;h=B;try{return M.apply(this,arguments)}finally{h=V}}}})(wD);xD.exports=wD;var Tj=xD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kD=ut,Aa=Tj;function de(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SD=new Set,Lf={};function su(e,t){Fc(e,t),Fc(e+"Capture",t)}function Fc(e,t){for(Lf[e]=t,e=0;e<t.length;e++)SD.add(t[e])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m1=Object.prototype.hasOwnProperty,Nj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XT={},YT={};function _j(e){return m1.call(YT,e)?!0:m1.call(XT,e)?!1:Nj.test(e)?YT[e]=!0:(XT[e]=!0,!1)}function Aj(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rj(e,t,n,r){if(t===null||typeof t>"u"||Aj(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gr(e,t,n,r,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dr[e]=new Gr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dr[t]=new Gr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dr[e]=new Gr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dr[e]=new Gr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dr[e]=new Gr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dr[e]=new Gr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dr[e]=new Gr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dr[e]=new Gr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dr[e]=new Gr(e,5,!1,e.toLowerCase(),null,!1,!1)});var DS=/[\-:]([a-z])/g;function FS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(DS,FS);dr[t]=new Gr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(DS,FS);dr[t]=new Gr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(DS,FS);dr[t]=new Gr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dr[e]=new Gr(e,1,!1,e.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dr[e]=new Gr(e,1,!1,e.toLowerCase(),null,!0,!0)});function MS(e,t,n,r){var a=dr.hasOwnProperty(t)?dr[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rj(t,n,a,r)&&(n=null),r||a===null?_j(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ds=kD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rb=Symbol.for("react.element"),lc=Symbol.for("react.portal"),uc=Symbol.for("react.fragment"),OS=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),ID=Symbol.for("react.provider"),$D=Symbol.for("react.context"),LS=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),y1=Symbol.for("react.suspense_list"),PS=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),CD=Symbol.for("react.offscreen"),ZT=Symbol.iterator;function Hp(e){return e===null||typeof e!="object"?null:(e=ZT&&e[ZT]||e["@@iterator"],typeof e=="function"?e:null)}var en=Object.assign,ow;function af(e){if(ow===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ow=t&&t[1]||""}return"\n"+ow+e}var lw=!1;function uw(e,t){if(!e||lw)return"";lw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(s!==1||o!==1)do if(s--,o--,0>o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{lw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?af(e):""}function Dj(e){switch(e.tag){case 5:return af(e.type);case 16:return af("Lazy");case 13:return af("Suspense");case 19:return af("SuspenseList");case 0:case 2:case 15:return e=uw(e.type,!1),e;case 11:return e=uw(e.type.render,!1),e;case 1:return e=uw(e.type,!0),e;default:return""}}function v1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uc:return"Fragment";case lc:return"Portal";case g1:return"Profiler";case OS:return"StrictMode";case b1:return"Suspense";case y1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $D:return(e.displayName||"Context")+".Consumer";case ID:return(e._context.displayName||"Context")+".Provider";case LS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case PS:return t=e.displayName||null,t!==null?t:v1(e.type)||"Memo";case qs:t=e._payload,e=e._init;try{return v1(e(t))}catch(n){}}return null}function Fj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v1(t);case 8:return t===OS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ED(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mj(e){var t=ED(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ab(e){e._valueTracker||(e._valueTracker=Mj(e))}function TD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ED(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function py(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function x1(e,t){var n=t.checked;return en({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function QT(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ND(e,t){t=t.checked,t!=null&&MS(e,"checked",t,!1)}function w1(e,t){ND(e,t);var n=vo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?k1(e,t.type,n):t.hasOwnProperty("defaultValue")&&k1(e,t.type,vo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function JT(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function k1(e,t,n){(t!=="number"||py(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var sf=Array.isArray;function wc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vo(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function S1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(de(91));return en({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eN(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(de(92));if(sf(n)){if(1<n.length)throw Error(de(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vo(n)}}function _D(e,t){var n=vo(t.value),r=vo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function AD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function I1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?AD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ib,RD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ib=ib||document.createElement("div"),ib.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ib.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oj=["Webkit","ms","Moz","O"];Object.keys(xf).forEach(function(e){Oj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xf[t]=xf[e]})});function DD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xf.hasOwnProperty(e)&&xf[e]?(""+t).trim():t+"px"}function FD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=DD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Lj=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $1(e,t){if(t){if(Lj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(de(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(de(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(de(61))}if(t.style!=null&&typeof t.style!="object")throw Error(de(62))}}function C1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E1=null;function zS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var T1=null,kc=null,Sc=null;function nN(e){if(e=Am(e)){if(typeof T1!="function")throw Error(de(280));var t=e.stateNode;t&&(t=Bv(t),T1(e.stateNode,e.type,t))}}function MD(e){kc?Sc?Sc.push(e):Sc=[e]:kc=e}function OD(){if(kc){var e=kc,t=Sc;if(Sc=kc=null,nN(e),t)for(e=0;e<t.length;e++)nN(t[e])}}function LD(e,t){return e(t)}function PD(){}var dw=!1;function zD(e,t,n){if(dw)return e(t,n);dw=!0;try{return LD(e,t,n)}finally{dw=!1,(kc!==null||Sc!==null)&&(PD(),OD())}}function zf(e,t){var n=e.stateNode;if(n===null)return null;var r=Bv(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(de(231,t,typeof n));return n}var N1=!1;if(Cs)try{var jp={};Object.defineProperty(jp,"passive",{get:function(){N1=!0}}),window.addEventListener("test",jp,jp),window.removeEventListener("test",jp,jp)}catch(e){N1=!1}function Pj(e,t,n,r,a,i,s,o,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var wf=!1,fy=null,my=!1,_1=null,zj={onError:function(e){wf=!0,fy=e}};function Bj(e,t,n,r,a,i,s,o,l){wf=!1,fy=null,Pj.apply(zj,arguments)}function Wj(e,t,n,r,a,i,s,o,l){if(Bj.apply(this,arguments),wf){if(wf){var d=fy;wf=!1,fy=null}else throw Error(de(198));my||(my=!0,_1=d)}}function ou(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function BD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rN(e){if(ou(e)!==e)throw Error(de(188))}function Vj(e){var t=e.alternate;if(!t){if(t=ou(e),t===null)throw Error(de(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return rN(a),e;if(i===r)return rN(a),t;i=i.sibling}throw Error(de(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?e:t}function WD(e){return e=Vj(e),e!==null?VD(e):null}function VD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VD(e);if(t!==null)return t;e=e.sibling}return null}var UD=Aa.unstable_scheduleCallback,aN=Aa.unstable_cancelCallback,Uj=Aa.unstable_shouldYield,Hj=Aa.unstable_requestPaint,hn=Aa.unstable_now,jj=Aa.unstable_getCurrentPriorityLevel,BS=Aa.unstable_ImmediatePriority,HD=Aa.unstable_UserBlockingPriority,gy=Aa.unstable_NormalPriority,Gj=Aa.unstable_LowPriority,jD=Aa.unstable_IdlePriority,Ov=null,Gi=null;function qj(e){if(Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(Ov,e,void 0,(e.current.flags&128)===128)}catch(t){}}var xi=Math.clz32?Math.clz32:Yj,Kj=Math.log,Xj=Math.LN2;function Yj(e){return e>>>=0,e===0?32:31-(Kj(e)/Xj|0)|0}var sb=64,ob=4194304;function of(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function by(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~a;o!==0?r=of(o):(i&=s,i!==0&&(r=of(i)))}else s=n&~a,s!==0?r=of(s):i!==0&&(r=of(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xi(t),a=1<<n,r|=e[n],t&=~a;return r}function Zj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-xi(i),o=1<<s,l=a[s];l===-1?(!(o&n)||o&r)&&(a[s]=Zj(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}function A1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function GD(){var e=sb;return sb<<=1,!(sb&4194240)&&(sb=64),e}function cw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xi(t),e[t]=n}function Jj(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-xi(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function WS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xi(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var wt=0;function qD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KD,VS,XD,YD,ZD,R1=!1,lb=[],so=null,oo=null,lo=null,Bf=new Map,Wf=new Map,Ys=[],e6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iN(e,t){switch(e){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Bf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wf.delete(t.pointerId)}}function Gp(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Am(t),t!==null&&VS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function t6(e,t,n,r,a){switch(t){case"focusin":return so=Gp(so,e,t,n,r,a),!0;case"dragenter":return oo=Gp(oo,e,t,n,r,a),!0;case"mouseover":return lo=Gp(lo,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Bf.set(i,Gp(Bf.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Wf.set(i,Gp(Wf.get(i)||null,e,t,n,r,a)),!0}return!1}function QD(e){var t=bl(e.target);if(t!==null){var n=ou(t);if(n!==null){if(t=n.tag,t===13){if(t=BD(n),t!==null){e.blockedOn=t,ZD(e.priority,function(){XD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=D1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);E1=r,n.target.dispatchEvent(r),E1=null}else return t=Am(n),t!==null&&VS(t),e.blockedOn=n,!1;t.shift()}return!0}function sN(e,t,n){Gb(e)&&n.delete(t)}function n6(){R1=!1,so!==null&&Gb(so)&&(so=null),oo!==null&&Gb(oo)&&(oo=null),lo!==null&&Gb(lo)&&(lo=null),Bf.forEach(sN),Wf.forEach(sN)}function qp(e,t){e.blockedOn===t&&(e.blockedOn=null,R1||(R1=!0,Aa.unstable_scheduleCallback(Aa.unstable_NormalPriority,n6)))}function Vf(e){function t(a){return qp(a,e)}if(0<lb.length){qp(lb[0],e);for(var n=1;n<lb.length;n++){var r=lb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(so!==null&&qp(so,e),oo!==null&&qp(oo,e),lo!==null&&qp(lo,e),Bf.forEach(t),Wf.forEach(t),n=0;n<Ys.length;n++)r=Ys[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ys.length&&(n=Ys[0],n.blockedOn===null);)QD(n),n.blockedOn===null&&Ys.shift()}var Ic=Ds.ReactCurrentBatchConfig,yy=!0;function r6(e,t,n,r){var a=wt,i=Ic.transition;Ic.transition=null;try{wt=1,US(e,t,n,r)}finally{wt=a,Ic.transition=i}}function a6(e,t,n,r){var a=wt,i=Ic.transition;Ic.transition=null;try{wt=4,US(e,t,n,r)}finally{wt=a,Ic.transition=i}}function US(e,t,n,r){if(yy){var a=D1(e,t,n,r);if(a===null)ww(e,t,r,vy,n),iN(e,r);else if(t6(a,e,t,n,r))r.stopPropagation();else if(iN(e,r),t&4&&-1<e6.indexOf(e)){for(;a!==null;){var i=Am(a);if(i!==null&&KD(i),i=D1(e,t,n,r),i===null&&ww(e,t,r,vy,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else ww(e,t,r,null,n)}}var vy=null;function D1(e,t,n,r){if(vy=null,e=zS(r),e=bl(e),e!==null)if(t=ou(e),t===null)e=null;else if(n=t.tag,n===13){if(e=BD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vy=e,null}function JD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jj()){case BS:return 1;case HD:return 4;case gy:case Gj:return 16;case jD:return 536870912;default:return 16}default:return 16}}var Js=null,HS=null,qb=null;function eF(){if(qb)return qb;var e,t=HS,n=t.length,r,a="value"in Js?Js.value:Js.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===a[i-r];r++);return qb=a.slice(e,1<r?1-r:void 0)}function Kb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ub(){return!0}function oN(){return!1}function Oa(e){function t(n,r,a,i,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ub:oN,this.isPropagationStopped=oN,this}return en(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ub)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ub)},persist:function(){},isPersistent:ub}),t}var fh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jS=Oa(fh),_m=en({},fh,{view:0,detail:0}),i6=Oa(_m),hw,pw,Kp,Lv=en({},_m,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kp&&(Kp&&e.type==="mousemove"?(hw=e.screenX-Kp.screenX,pw=e.screenY-Kp.screenY):pw=hw=0,Kp=e),hw)},movementY:function(e){return"movementY"in e?e.movementY:pw}}),lN=Oa(Lv),s6=en({},Lv,{dataTransfer:0}),o6=Oa(s6),l6=en({},_m,{relatedTarget:0}),fw=Oa(l6),u6=en({},fh,{animationName:0,elapsedTime:0,pseudoElement:0}),d6=Oa(u6),c6=en({},fh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h6=Oa(c6),p6=en({},fh,{data:0}),uN=Oa(p6),f6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=g6[e])?!!t[e]:!1}function GS(){return b6}var y6=en({},_m,{key:function(e){if(e.key){var t=f6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?m6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GS,charCode:function(e){return e.type==="keypress"?Kb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),v6=Oa(y6),x6=en({},Lv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dN=Oa(x6),w6=en({},_m,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GS}),k6=Oa(w6),S6=en({},fh,{propertyName:0,elapsedTime:0,pseudoElement:0}),I6=Oa(S6),$6=en({},Lv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C6=Oa($6),E6=[9,13,27,32],qS=Cs&&"CompositionEvent"in window,kf=null;Cs&&"documentMode"in document&&(kf=document.documentMode);var T6=Cs&&"TextEvent"in window&&!kf,tF=Cs&&(!qS||kf&&8<kf&&11>=kf),cN=String.fromCharCode(32),hN=!1;function nF(e,t){switch(e){case"keyup":return E6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dc=!1;function N6(e,t){switch(e){case"compositionend":return rF(t);case"keypress":return t.which!==32?null:(hN=!0,cN);case"textInput":return e=t.data,e===cN&&hN?null:e;default:return null}}function _6(e,t){if(dc)return e==="compositionend"||!qS&&nF(e,t)?(e=eF(),qb=HS=Js=null,dc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tF&&t.locale!=="ko"?null:t.data;default:return null}}var A6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!A6[e.type]:t==="textarea"}function aF(e,t,n,r){MD(r),t=xy(t,"onChange"),0<t.length&&(n=new jS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Sf=null,Uf=null;function R6(e){mF(e,0)}function Pv(e){var t=pc(e);if(TD(t))return e}function D6(e,t){if(e==="change")return t}var iF=!1;if(Cs){var mw;if(Cs){var gw="oninput"in document;if(!gw){var fN=document.createElement("div");fN.setAttribute("oninput","return;"),gw=typeof fN.oninput=="function"}mw=gw}else mw=!1;iF=mw&&(!document.documentMode||9<document.documentMode)}function mN(){Sf&&(Sf.detachEvent("onpropertychange",sF),Uf=Sf=null)}function sF(e){if(e.propertyName==="value"&&Pv(Uf)){var t=[];aF(t,Uf,e,zS(e)),zD(R6,t)}}function F6(e,t,n){e==="focusin"?(mN(),Sf=t,Uf=n,Sf.attachEvent("onpropertychange",sF)):e==="focusout"&&mN()}function M6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pv(Uf)}function O6(e,t){if(e==="click")return Pv(t)}function L6(e,t){if(e==="input"||e==="change")return Pv(t)}function P6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ei=typeof Object.is=="function"?Object.is:P6;function Hf(e,t){if(Ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!m1.call(t,a)||!Ei(e[a],t[a]))return!1}return!0}function gN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bN(e,t){var n=gN(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gN(n)}}function oF(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oF(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lF(){for(var e=window,t=py();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=py(e.document)}return t}function KS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function z6(e){var t=lF(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oF(n.ownerDocument.documentElement,n)){if(r!==null&&KS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=bN(n,i);var s=bN(n,r);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var B6=Cs&&"documentMode"in document&&11>=document.documentMode,cc=null,F1=null,If=null,M1=!1;function yN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;M1||cc==null||cc!==py(r)||(r=cc,"selectionStart"in r&&KS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),If&&Hf(If,r)||(If=r,r=xy(F1,"onSelect"),0<r.length&&(t=new jS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cc)))}function db(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hc={animationend:db("Animation","AnimationEnd"),animationiteration:db("Animation","AnimationIteration"),animationstart:db("Animation","AnimationStart"),transitionend:db("Transition","TransitionEnd")},bw={},uF={};Cs&&(uF=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function zv(e){if(bw[e])return bw[e];if(!hc[e])return e;var t=hc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uF)return bw[e]=t[n];return e}var dF=zv("animationend"),cF=zv("animationiteration"),hF=zv("animationstart"),pF=zv("transitionend"),fF=new Map,vN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mo(e,t){fF.set(e,t),su(t,[e])}for(var yw=0;yw<vN.length;yw++){var vw=vN[yw],W6=vw.toLowerCase(),V6=vw[0].toUpperCase()+vw.slice(1);Mo(W6,"on"+V6)}Mo(dF,"onAnimationEnd");Mo(cF,"onAnimationIteration");Mo(hF,"onAnimationStart");Mo("dblclick","onDoubleClick");Mo("focusin","onFocus");Mo("focusout","onBlur");Mo(pF,"onTransitionEnd");Fc("onMouseEnter",["mouseout","mouseover"]);Fc("onMouseLeave",["mouseout","mouseover"]);Fc("onPointerEnter",["pointerout","pointerover"]);Fc("onPointerLeave",["pointerout","pointerover"]);su("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));su("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));su("onBeforeInput",["compositionend","keypress","textInput","paste"]);su("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));su("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));su("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U6=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function xN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Wj(r,t,void 0,e),e.currentTarget=null}function mF(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,d=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;xN(a,o,d),i=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,d=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;xN(a,o,d),i=l}}}if(my)throw e=_1,my=!1,_1=null,e}function Pt(e,t){var n=t[B1];n===void 0&&(n=t[B1]=new Set);var r=e+"__bubble";n.has(r)||(gF(t,e,2,!1),n.add(r))}function xw(e,t,n){var r=0;t&&(r|=4),gF(n,e,r,t)}var cb="_reactListening"+Math.random().toString(36).slice(2);function jf(e){if(!e[cb]){e[cb]=!0,SD.forEach(function(n){n!=="selectionchange"&&(U6.has(n)||xw(n,!1,e),xw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cb]||(t[cb]=!0,xw("selectionchange",!1,t))}}function gF(e,t,n,r){switch(JD(t)){case 1:var a=r6;break;case 4:a=a6;break;default:a=US}n=a.bind(null,t,n,e),a=void 0,!N1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ww(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;s=s.return}for(;o!==null;){if(s=bl(o),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}o=o.parentNode}}r=r.return}zD(function(){var d=i,u=zS(n),c=[];e:{var h=fF.get(e);if(h!==void 0){var p=jS,f=e;switch(e){case"keypress":if(Kb(n)===0)break e;case"keydown":case"keyup":p=v6;break;case"focusin":f="focus",p=fw;break;case"focusout":f="blur",p=fw;break;case"beforeblur":case"afterblur":p=fw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=lN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=o6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=k6;break;case dF:case cF:case hF:p=d6;break;case pF:p=I6;break;case"scroll":p=i6;break;case"wheel":p=C6;break;case"copy":case"cut":case"paste":p=h6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=dN}var m=(t&4)!==0,g=!m&&e==="scroll",b=m?h!==null?h+"Capture":null:h;m=[];for(var y=d,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,b!==null&&(x=zf(y,b),x!=null&&m.push(Gf(y,x,v)))),g)break;y=y.return}0<m.length&&(h=new p(h,f,null,n,u),c.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==E1&&(f=n.relatedTarget||n.fromElement)&&(bl(f)||f[Es]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(f=n.relatedTarget||n.toElement,p=d,f=f?bl(f):null,f!==null&&(g=ou(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=d),p!==f)){if(m=lN,x="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=dN,x="onPointerLeave",b="onPointerEnter",y="pointer"),g=p==null?h:pc(p),v=f==null?h:pc(f),h=new m(x,y+"leave",p,n,u),h.target=g,h.relatedTarget=v,x=null,bl(u)===d&&(m=new m(b,y+"enter",f,n,u),m.target=v,m.relatedTarget=g,x=m),g=x,p&&f)t:{for(m=p,b=f,y=0,v=m;v;v=Xd(v))y++;for(v=0,x=b;x;x=Xd(x))v++;for(;0<y-v;)m=Xd(m),y--;for(;0<v-y;)b=Xd(b),v--;for(;y--;){if(m===b||b!==null&&m===b.alternate)break t;m=Xd(m),b=Xd(b)}m=null}else m=null;p!==null&&wN(c,h,p,m,!1),f!==null&&g!==null&&wN(c,g,f,m,!0)}}e:{if(h=d?pc(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=D6;else if(pN(h))if(iF)w=L6;else{w=M6;var $=F6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=O6);if(w&&(w=w(e,d))){aF(c,w,n,u);break e}$&&$(e,h,d),e==="focusout"&&($=h._wrapperState)&&$.controlled&&h.type==="number"&&k1(h,"number",h.value)}switch($=d?pc(d):window,e){case"focusin":(pN($)||$.contentEditable==="true")&&(cc=$,F1=d,If=null);break;case"focusout":If=F1=cc=null;break;case"mousedown":M1=!0;break;case"contextmenu":case"mouseup":case"dragend":M1=!1,yN(c,n,u);break;case"selectionchange":if(B6)break;case"keydown":case"keyup":yN(c,n,u)}var C;if(qS)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else dc?nF(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(tF&&n.locale!=="ko"&&(dc||E!=="onCompositionStart"?E==="onCompositionEnd"&&dc&&(C=eF()):(Js=u,HS="value"in Js?Js.value:Js.textContent,dc=!0)),$=xy(d,E),0<$.length&&(E=new uN(E,e,null,n,u),c.push({event:E,listeners:$}),C?E.data=C:(C=rF(n),C!==null&&(E.data=C)))),(C=T6?N6(e,n):_6(e,n))&&(d=xy(d,"onBeforeInput"),0<d.length&&(u=new uN("onBeforeInput","beforeinput",null,n,u),c.push({event:u,listeners:d}),u.data=C))}mF(c,t)})}function Gf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xy(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=zf(e,n),i!=null&&r.unshift(Gf(e,i,a)),i=zf(e,t),i!=null&&r.push(Gf(e,i,a))),e=e.return}return r}function Xd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wN(e,t,n,r,a){for(var i=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,d=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&d!==null&&(o=d,a?(l=zf(n,i),l!=null&&s.unshift(Gf(n,l,o))):a||(l=zf(n,i),l!=null&&s.push(Gf(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var H6=/\r\n?/g,j6=/\u0000|\uFFFD/g;function kN(e){return(typeof e=="string"?e:""+e).replace(H6,"\n").replace(j6,"")}function hb(e,t,n){if(t=kN(t),kN(e)!==t&&n)throw Error(de(425))}function wy(){}var O1=null,L1=null;function P1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z1=typeof setTimeout=="function"?setTimeout:void 0,G6=typeof clearTimeout=="function"?clearTimeout:void 0,SN=typeof Promise=="function"?Promise:void 0,q6=typeof queueMicrotask=="function"?queueMicrotask:typeof SN<"u"?function(e){return SN.resolve(null).then(e).catch(K6)}:z1;function K6(e){setTimeout(function(){throw e})}function kw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Vf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Vf(t)}function uo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function IN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mh=Math.random().toString(36).slice(2),Hi="__reactFiber$"+mh,qf="__reactProps$"+mh,Es="__reactContainer$"+mh,B1="__reactEvents$"+mh,X6="__reactListeners$"+mh,Y6="__reactHandles$"+mh;function bl(e){var t=e[Hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Es]||n[Hi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=IN(e);e!==null;){if(n=e[Hi])return n;e=IN(e)}return t}e=n,n=e.parentNode}return null}function Am(e){return e=e[Hi]||e[Es],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(de(33))}function Bv(e){return e[qf]||null}var W1=[],fc=-1;function Oo(e){return{current:e}}function Bt(e){0>fc||(e.current=W1[fc],W1[fc]=null,fc--)}function Ot(e,t){fc++,W1[fc]=e.current,e.current=t}var xo={},kr=Oo(xo),sa=Oo(!1),Al=xo;function Mc(e,t){var n=e.type.contextTypes;if(!n)return xo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function oa(e){return e=e.childContextTypes,e!=null}function ky(){Bt(sa),Bt(kr)}function $N(e,t,n){if(kr.current!==xo)throw Error(de(168));Ot(kr,t),Ot(sa,n)}function bF(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(de(108,Fj(e)||"Unknown",a));return en({},n,r)}function Sy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xo,Al=kr.current,Ot(kr,e),Ot(sa,sa.current),!0}function CN(e,t,n){var r=e.stateNode;if(!r)throw Error(de(169));n?(e=bF(e,t,Al),r.__reactInternalMemoizedMergedChildContext=e,Bt(sa),Bt(kr),Ot(kr,e)):Bt(sa),Ot(sa,n)}var hs=null,Wv=!1,Sw=!1;function yF(e){hs===null?hs=[e]:hs.push(e)}function Z6(e){Wv=!0,yF(e)}function Lo(){if(!Sw&&hs!==null){Sw=!0;var e=0,t=wt;try{var n=hs;for(wt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}hs=null,Wv=!1}catch(a){throw hs!==null&&(hs=hs.slice(e+1)),UD(BS,Lo),a}finally{wt=t,Sw=!1}}return null}var mc=[],gc=0,Iy=null,$y=0,qa=[],Ka=0,Rl=null,vs=1,xs="";function ll(e,t){mc[gc++]=$y,mc[gc++]=Iy,Iy=e,$y=t}function vF(e,t,n){qa[Ka++]=vs,qa[Ka++]=xs,qa[Ka++]=Rl,Rl=e;var r=vs;e=xs;var a=32-xi(r)-1;r&=~(1<<a),n+=1;var i=32-xi(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,vs=1<<32-xi(t)+a|n<<a|r,xs=i+e}else vs=1<<i|n<<a|r,xs=e}function XS(e){e.return!==null&&(ll(e,1),vF(e,1,0))}function YS(e){for(;e===Iy;)Iy=mc[--gc],mc[gc]=null,$y=mc[--gc],mc[gc]=null;for(;e===Rl;)Rl=qa[--Ka],qa[Ka]=null,xs=qa[--Ka],qa[Ka]=null,vs=qa[--Ka],qa[Ka]=null}var Na=null,Ia=null,Gt=!1,pi=null;function xF(e,t){var n=Xa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function EN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Na=e,Ia=uo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Na=e,Ia=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rl!==null?{id:vs,overflow:xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xa(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Na=e,Ia=null,!0):!1;default:return!1}}function V1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U1(e){if(Gt){var t=Ia;if(t){var n=t;if(!EN(e,t)){if(V1(e))throw Error(de(418));t=uo(n.nextSibling);var r=Na;t&&EN(e,t)?xF(r,n):(e.flags=e.flags&-4097|2,Gt=!1,Na=e)}}else{if(V1(e))throw Error(de(418));e.flags=e.flags&-4097|2,Gt=!1,Na=e}}}function TN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Na=e}function pb(e){if(e!==Na)return!1;if(!Gt)return TN(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!P1(e.type,e.memoizedProps)),t&&(t=Ia)){if(V1(e))throw wF(),Error(de(418));for(;t;)xF(e,t),t=uo(t.nextSibling)}if(TN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(de(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ia=uo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ia=null}}else Ia=Na?uo(e.stateNode.nextSibling):null;return!0}function wF(){for(var e=Ia;e;)e=uo(e.nextSibling)}function Oc(){Ia=Na=null,Gt=!1}function ZS(e){pi===null?pi=[e]:pi.push(e)}var Q6=Ds.ReactCurrentBatchConfig;function ci(e,t){if(e&&e.defaultProps){t=en({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Cy=Oo(null),Ey=null,bc=null,QS=null;function JS(){QS=bc=Ey=null}function eI(e){var t=Cy.current;Bt(Cy),e._currentValue=t}function H1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $c(e,t){Ey=e,QS=bc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(na=!0),e.firstContext=null)}function Qa(e){var t=e._currentValue;if(QS!==e)if(e={context:e,memoizedValue:t,next:null},bc===null){if(Ey===null)throw Error(de(308));bc=e,Ey.dependencies={lanes:0,firstContext:e}}else bc=bc.next=e;return t}var yl=null;function tI(e){yl===null?yl=[e]:yl.push(e)}function kF(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,tI(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ts(e,r)}function Ts(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ks=!1;function nI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ws(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function co(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ts(e,n)}return a=r.interleaved,a===null?(t.next=t,tI(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ts(e,n)}function Xb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,WS(e,n)}}function NN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ty(e,t,n,r){var a=e.updateQueue;Ks=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var l=o,d=l.next;l.next=null,s===null?i=d:s.next=d,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=l))}if(i!==null){var c=a.baseState;s=0,u=d=l=null,o=i;do{var h=o.lane,p=o.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){c=f.call(p,c,h);break e}c=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(p,c,h):f,h==null)break e;c=en({},c,h);break e;case 2:Ks=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=p,l=c):u=u.next=p,s|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(u===null&&(l=c),a.baseState=l,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=c}}function _N(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(de(191,a));a.call(r)}}}var IF=new kD.Component().refs;function j1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:en({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vv={isMounted:function(e){return(e=e._reactInternals)?ou(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zr(),a=po(e),i=ws(r,a);i.payload=t,n!=null&&(i.callback=n),t=co(e,i,a),t!==null&&(wi(t,e,a,r),Xb(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zr(),a=po(e),i=ws(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=co(e,i,a),t!==null&&(wi(t,e,a,r),Xb(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zr(),r=po(e),a=ws(n,r);a.tag=2,t!=null&&(a.callback=t),t=co(e,a,r),t!==null&&(wi(t,e,r,n),Xb(t,e,r))}};function AN(e,t,n,r,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Hf(n,r)||!Hf(a,i):!0}function $F(e,t,n){var r=!1,a=xo,i=t.contextType;return typeof i=="object"&&i!==null?i=Qa(i):(a=oa(t)?Al:kr.current,r=t.contextTypes,i=(r=r!=null)?Mc(e,a):xo),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vv,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function RN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vv.enqueueReplaceState(t,t.state,null)}function G1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=IF,nI(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Qa(i):(i=oa(t)?Al:kr.current,a.context=Mc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(j1(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Vv.enqueueReplaceState(a,a.state,null),Ty(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var o=a.refs;o===IF&&(o=a.refs={}),s===null?delete o[i]:o[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,e))}return e}function fb(e,t){throw e=Object.prototype.toString.call(t),Error(de(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function DN(e){var t=e._init;return t(e._payload)}function CF(e){function t(b,y){if(e){var v=b.deletions;v===null?(b.deletions=[y],b.flags|=16):v.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=fo(b,y),b.index=0,b.sibling=null,b}function i(b,y,v){return b.index=v,e?(v=b.alternate,v!==null?(v=v.index,v<y?(b.flags|=2,y):v):(b.flags|=2,y)):(b.flags|=1048576,y)}function s(b){return e&&b.alternate===null&&(b.flags|=2),b}function o(b,y,v,x){return y===null||y.tag!==6?(y=_w(v,b.mode,x),y.return=b,y):(y=a(y,v),y.return=b,y)}function l(b,y,v,x){var w=v.type;return w===uc?u(b,y,v.props.children,x,v.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qs&&DN(w)===y.type)?(x=a(y,v.props),x.ref=Xp(b,y,v),x.return=b,x):(x=ty(v.type,v.key,v.props,null,b.mode,x),x.ref=Xp(b,y,v),x.return=b,x)}function d(b,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Aw(v,b.mode,x),y.return=b,y):(y=a(y,v.children||[]),y.return=b,y)}function u(b,y,v,x,w){return y===null||y.tag!==7?(y=Cl(v,b.mode,x,w),y.return=b,y):(y=a(y,v),y.return=b,y)}function c(b,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_w(""+y,b.mode,v),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rb:return v=ty(y.type,y.key,y.props,null,b.mode,v),v.ref=Xp(b,null,y),v.return=b,v;case lc:return y=Aw(y,b.mode,v),y.return=b,y;case qs:var x=y._init;return c(b,x(y._payload),v)}if(sf(y)||Hp(y))return y=Cl(y,b.mode,v,null),y.return=b,y;fb(b,y)}return null}function h(b,y,v,x){var w=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:o(b,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rb:return v.key===w?l(b,y,v,x):null;case lc:return v.key===w?d(b,y,v,x):null;case qs:return w=v._init,h(b,y,w(v._payload),x)}if(sf(v)||Hp(v))return w!==null?null:u(b,y,v,x,null);fb(b,v)}return null}function p(b,y,v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return b=b.get(v)||null,o(y,b,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rb:return b=b.get(x.key===null?v:x.key)||null,l(y,b,x,w);case lc:return b=b.get(x.key===null?v:x.key)||null,d(y,b,x,w);case qs:var $=x._init;return p(b,y,v,$(x._payload),w)}if(sf(x)||Hp(x))return b=b.get(v)||null,u(y,b,x,w,null);fb(y,x)}return null}function f(b,y,v,x){for(var w=null,$=null,C=y,E=y=0,A=null;C!==null&&E<v.length;E++){C.index>E?(A=C,C=null):A=C.sibling;var R=h(b,C,v[E],x);if(R===null){C===null&&(C=A);break}e&&C&&R.alternate===null&&t(b,C),y=i(R,y,E),$===null?w=R:$.sibling=R,$=R,C=A}if(E===v.length)return n(b,C),Gt&&ll(b,E),w;if(C===null){for(;E<v.length;E++)C=c(b,v[E],x),C!==null&&(y=i(C,y,E),$===null?w=C:$.sibling=C,$=C);return Gt&&ll(b,E),w}for(C=r(b,C);E<v.length;E++)A=p(C,b,E,v[E],x),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?E:A.key),y=i(A,y,E),$===null?w=A:$.sibling=A,$=A);return e&&C.forEach(function(N){return t(b,N)}),Gt&&ll(b,E),w}function m(b,y,v,x){var w=Hp(v);if(typeof w!="function")throw Error(de(150));if(v=w.call(v),v==null)throw Error(de(151));for(var $=w=null,C=y,E=y=0,A=null,R=v.next();C!==null&&!R.done;E++,R=v.next()){C.index>E?(A=C,C=null):A=C.sibling;var N=h(b,C,R.value,x);if(N===null){C===null&&(C=A);break}e&&C&&N.alternate===null&&t(b,C),y=i(N,y,E),$===null?w=N:$.sibling=N,$=N,C=A}if(R.done)return n(b,C),Gt&&ll(b,E),w;if(C===null){for(;!R.done;E++,R=v.next())R=c(b,R.value,x),R!==null&&(y=i(R,y,E),$===null?w=R:$.sibling=R,$=R);return Gt&&ll(b,E),w}for(C=r(b,C);!R.done;E++,R=v.next())R=p(C,b,E,R.value,x),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?E:R.key),y=i(R,y,E),$===null?w=R:$.sibling=R,$=R);return e&&C.forEach(function(I){return t(b,I)}),Gt&&ll(b,E),w}function g(b,y,v,x){if(typeof v=="object"&&v!==null&&v.type===uc&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case rb:e:{for(var w=v.key,$=y;$!==null;){if($.key===w){if(w=v.type,w===uc){if($.tag===7){n(b,$.sibling),y=a($,v.props.children),y.return=b,b=y;break e}}else if($.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qs&&DN(w)===$.type){n(b,$.sibling),y=a($,v.props),y.ref=Xp(b,$,v),y.return=b,b=y;break e}n(b,$);break}else t(b,$);$=$.sibling}v.type===uc?(y=Cl(v.props.children,b.mode,x,v.key),y.return=b,b=y):(x=ty(v.type,v.key,v.props,null,b.mode,x),x.ref=Xp(b,y,v),x.return=b,b=x)}return s(b);case lc:e:{for($=v.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(b,y.sibling),y=a(y,v.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=Aw(v,b.mode,x),y.return=b,b=y}return s(b);case qs:return $=v._init,g(b,y,$(v._payload),x)}if(sf(v))return f(b,y,v,x);if(Hp(v))return m(b,y,v,x);fb(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(b,y.sibling),y=a(y,v),y.return=b,b=y):(n(b,y),y=_w(v,b.mode,x),y.return=b,b=y),s(b)):n(b,y)}return g}var Lc=CF(!0),EF=CF(!1),Rm={},qi=Oo(Rm),Kf=Oo(Rm),Xf=Oo(Rm);function vl(e){if(e===Rm)throw Error(de(174));return e}function rI(e,t){switch(Ot(Xf,t),Ot(Kf,e),Ot(qi,Rm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:I1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=I1(t,e)}Bt(qi),Ot(qi,t)}function Pc(){Bt(qi),Bt(Kf),Bt(Xf)}function TF(e){vl(Xf.current);var t=vl(qi.current),n=I1(t,e.type);t!==n&&(Ot(Kf,e),Ot(qi,n))}function aI(e){Kf.current===e&&(Bt(qi),Bt(Kf))}var Qt=Oo(0);function Ny(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Iw=[];function iI(){for(var e=0;e<Iw.length;e++)Iw[e]._workInProgressVersionPrimary=null;Iw.length=0}var Yb=Ds.ReactCurrentDispatcher,$w=Ds.ReactCurrentBatchConfig,Dl=0,Jt=null,On=null,Gn=null,_y=!1,$f=!1,Yf=0,J6=0;function mr(){throw Error(de(321))}function sI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ei(e[n],t[n]))return!1;return!0}function oI(e,t,n,r,a,i){if(Dl=i,Jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yb.current=e===null||e.memoizedState===null?rG:aG,e=n(r,a),$f){i=0;do{if($f=!1,Yf=0,25<=i)throw Error(de(301));i+=1,Gn=On=null,t.updateQueue=null,Yb.current=iG,e=n(r,a)}while($f)}if(Yb.current=Ay,t=On!==null&&On.next!==null,Dl=0,Gn=On=Jt=null,_y=!1,t)throw Error(de(300));return e}function lI(){var e=Yf!==0;return Yf=0,e}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?Jt.memoizedState=Gn=e:Gn=Gn.next=e,Gn}function Ja(){if(On===null){var e=Jt.alternate;e=e!==null?e.memoizedState:null}else e=On.next;var t=Gn===null?Jt.memoizedState:Gn.next;if(t!==null)Gn=t,On=e;else{if(e===null)throw Error(de(310));On=e,e={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Gn===null?Jt.memoizedState=Gn=e:Gn=Gn.next=e}return Gn}function Zf(e,t){return typeof t=="function"?t(e):t}function Cw(e){var t=Ja(),n=t.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=e;var r=On,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=s=null,l=null,d=i;do{var u=d.lane;if((Dl&u)===u)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var c={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(o=l=c,s=r):l=l.next=c,Jt.lanes|=u,Fl|=u}d=d.next}while(d!==null&&d!==i);l===null?s=r:l.next=o,Ei(r,t.memoizedState)||(na=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Jt.lanes|=i,Fl|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ew(e){var t=Ja(),n=t.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);Ei(i,t.memoizedState)||(na=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function NF(){}function _F(e,t){var n=Jt,r=Ja(),a=t(),i=!Ei(r.memoizedState,a);if(i&&(r.memoizedState=a,na=!0),r=r.queue,uI(DF.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Gn!==null&&Gn.memoizedState.tag&1){if(n.flags|=2048,Qf(9,RF.bind(null,n,r,a,t),void 0,null),Zn===null)throw Error(de(349));Dl&30||AF(n,t,a)}return a}function AF(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RF(e,t,n,r){t.value=n,t.getSnapshot=r,FF(t)&&MF(e)}function DF(e,t,n){return n(function(){FF(t)&&MF(e)})}function FF(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ei(e,n)}catch(r){return!0}}function MF(e){var t=Ts(e,1);t!==null&&wi(t,e,1,-1)}function FN(e){var t=zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:e},t.queue=e,e=e.dispatch=nG.bind(null,Jt,e),[t.memoizedState,e]}function Qf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function OF(){return Ja().memoizedState}function Zb(e,t,n,r){var a=zi();Jt.flags|=e,a.memoizedState=Qf(1|t,n,void 0,r===void 0?null:r)}function Uv(e,t,n,r){var a=Ja();r=r===void 0?null:r;var i=void 0;if(On!==null){var s=On.memoizedState;if(i=s.destroy,r!==null&&sI(r,s.deps)){a.memoizedState=Qf(t,n,i,r);return}}Jt.flags|=e,a.memoizedState=Qf(1|t,n,i,r)}function MN(e,t){return Zb(8390656,8,e,t)}function uI(e,t){return Uv(2048,8,e,t)}function LF(e,t){return Uv(4,2,e,t)}function PF(e,t){return Uv(4,4,e,t)}function zF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BF(e,t,n){return n=n!=null?n.concat([e]):null,Uv(4,4,zF.bind(null,t,e),n)}function dI(){}function WF(e,t){var n=Ja();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function VF(e,t){var n=Ja();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sI(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function UF(e,t,n){return Dl&21?(Ei(n,t)||(n=GD(),Jt.lanes|=n,Fl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,na=!0),e.memoizedState=n)}function eG(e,t){var n=wt;wt=n!==0&&4>n?n:4,e(!0);var r=$w.transition;$w.transition={};try{e(!1),t()}finally{wt=n,$w.transition=r}}function HF(){return Ja().memoizedState}function tG(e,t,n){var r=po(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jF(e))GF(t,n);else if(n=kF(e,t,n,r),n!==null){var a=zr();wi(n,e,r,a),qF(n,t,r)}}function nG(e,t,n){var r=po(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jF(e))GF(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,Ei(o,s)){var l=t.interleaved;l===null?(a.next=a,tI(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch(d){}finally{}n=kF(e,t,a,r),n!==null&&(a=zr(),wi(n,e,r,a),qF(n,t,r))}}function jF(e){var t=e.alternate;return e===Jt||t!==null&&t===Jt}function GF(e,t){$f=_y=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qF(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,WS(e,n)}}var Ay={readContext:Qa,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},rG={readContext:Qa,useCallback:function(e,t){return zi().memoizedState=[e,t===void 0?null:t],e},useContext:Qa,useEffect:MN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zb(4194308,4,zF.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zb(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zb(4,2,e,t)},useMemo:function(e,t){var n=zi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=zi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tG.bind(null,Jt,e),[r.memoizedState,e]},useRef:function(e){var t=zi();return e={current:e},t.memoizedState=e},useState:FN,useDebugValue:dI,useDeferredValue:function(e){return zi().memoizedState=e},useTransition:function(){var e=FN(!1),t=e[0];return e=eG.bind(null,e[1]),zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Jt,a=zi();if(Gt){if(n===void 0)throw Error(de(407));n=n()}else{if(n=t(),Zn===null)throw Error(de(349));Dl&30||AF(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,MN(DF.bind(null,r,i,e),[e]),r.flags|=2048,Qf(9,RF.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=zi(),t=Zn.identifierPrefix;if(Gt){var n=xs,r=vs;n=(r&~(1<<32-xi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=J6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aG={readContext:Qa,useCallback:WF,useContext:Qa,useEffect:uI,useImperativeHandle:BF,useInsertionEffect:LF,useLayoutEffect:PF,useMemo:VF,useReducer:Cw,useRef:OF,useState:function(){return Cw(Zf)},useDebugValue:dI,useDeferredValue:function(e){var t=Ja();return UF(t,On.memoizedState,e)},useTransition:function(){var e=Cw(Zf)[0],t=Ja().memoizedState;return[e,t]},useMutableSource:NF,useSyncExternalStore:_F,useId:HF,unstable_isNewReconciler:!1},iG={readContext:Qa,useCallback:WF,useContext:Qa,useEffect:uI,useImperativeHandle:BF,useInsertionEffect:LF,useLayoutEffect:PF,useMemo:VF,useReducer:Ew,useRef:OF,useState:function(){return Ew(Zf)},useDebugValue:dI,useDeferredValue:function(e){var t=Ja();return On===null?t.memoizedState=e:UF(t,On.memoizedState,e)},useTransition:function(){var e=Ew(Zf)[0],t=Ja().memoizedState;return[e,t]},useMutableSource:NF,useSyncExternalStore:_F,useId:HF,unstable_isNewReconciler:!1};function zc(e,t){try{var n="",r=t;do n+=Dj(r),r=r.return;while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function Tw(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function q1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sG=typeof WeakMap=="function"?WeakMap:Map;function KF(e,t,n){n=ws(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dy||(Dy=!0,rk=r),q1(e,t)},n}function XF(e,t,n){n=ws(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){q1(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){q1(e,t),typeof r!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function ON(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new sG;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=xG.bind(null,e,t,n),t.then(e,e))}function LN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function PN(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ws(-1,1),t.tag=2,co(n,t,1))),n.lanes|=1),e)}var oG=Ds.ReactCurrentOwner,na=!1;function Mr(e,t,n,r){t.child=e===null?EF(t,null,n,r):Lc(t,e.child,n,r)}function zN(e,t,n,r,a){n=n.render;var i=t.ref;return $c(t,a),r=oI(e,t,n,r,i,a),n=lI(),e!==null&&!na?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ns(e,t,a)):(Gt&&n&&XS(t),t.flags|=1,Mr(e,t,r,a),t.child)}function BN(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!yI(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,YF(e,t,i,r,a)):(e=ty(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Hf,n(s,r)&&e.ref===t.ref)return Ns(e,t,a)}return t.flags|=1,e=fo(i,r),e.ref=t.ref,e.return=t,t.child=e}function YF(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Hf(i,r)&&e.ref===t.ref)if(na=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(na=!0);else return t.lanes=e.lanes,Ns(e,t,a)}return K1(e,t,n,r,a)}function ZF(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(vc,wa),wa|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ot(vc,wa),wa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ot(vc,wa),wa|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ot(vc,wa),wa|=r;return Mr(e,t,a,n),t.child}function QF(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function K1(e,t,n,r,a){var i=oa(n)?Al:kr.current;return i=Mc(t,i),$c(t,a),n=oI(e,t,n,r,i,a),r=lI(),e!==null&&!na?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ns(e,t,a)):(Gt&&r&&XS(t),t.flags|=1,Mr(e,t,n,a),t.child)}function WN(e,t,n,r,a){if(oa(n)){var i=!0;Sy(t)}else i=!1;if($c(t,a),t.stateNode===null)Qb(e,t),$F(t,n,r),G1(t,n,r,a),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qa(d):(d=oa(n)?Al:kr.current,d=Mc(t,d));var u=n.getDerivedStateFromProps,c=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==d)&&RN(t,s,r,d),Ks=!1;var h=t.memoizedState;s.state=h,Ty(t,r,s,a),l=t.memoizedState,o!==r||h!==l||sa.current||Ks?(typeof u=="function"&&(j1(t,n,u,r),l=t.memoizedState),(o=Ks||AN(t,n,o,r,h,l,d))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=d,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,SF(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:ci(t.type,o),s.props=d,c=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qa(l):(l=oa(n)?Al:kr.current,l=Mc(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==c||h!==l)&&RN(t,s,r,l),Ks=!1,h=t.memoizedState,s.state=h,Ty(t,r,s,a);var f=t.memoizedState;o!==c||h!==f||sa.current||Ks?(typeof p=="function"&&(j1(t,n,p,r),f=t.memoizedState),(d=Ks||AN(t,n,d,r,h,f,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,f,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,f,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=d):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return X1(e,t,n,r,i,a)}function X1(e,t,n,r,a,i){QF(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return a&&CN(t,n,!1),Ns(e,t,i);r=t.stateNode,oG.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Lc(t,e.child,null,i),t.child=Lc(t,null,o,i)):Mr(e,t,o,i),t.memoizedState=r.state,a&&CN(t,n,!0),t.child}function JF(e){var t=e.stateNode;t.pendingContext?$N(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$N(e,t.context,!1),rI(e,t.containerInfo)}function VN(e,t,n,r,a){return Oc(),ZS(a),t.flags|=256,Mr(e,t,n,r),t.child}var Y1={dehydrated:null,treeContext:null,retryLane:0};function Z1(e){return{baseLanes:e,cachePool:null,transitions:null}}function eM(e,t,n){var r=t.pendingProps,a=Qt.current,i=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ot(Qt,a&1),e===null)return U1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Gv(s,r,0,null),e=Cl(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Z1(n),t.memoizedState=Y1,e):cI(t,s));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return lG(e,t,s,r,o,a,n);if(i){i=r.fallback,s=t.mode,a=e.child,o=a.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=fo(a,l),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=fo(o,i):(i=Cl(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Z1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Y1,r}return i=e.child,e=i.sibling,r=fo(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cI(e,t){return t=Gv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mb(e,t,n,r){return r!==null&&ZS(r),Lc(t,e.child,null,n),e=cI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lG(e,t,n,r,a,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Tw(Error(de(422))),mb(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Gv({mode:"visible",children:r.children},a,0,null),i=Cl(i,a,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Lc(t,e.child,null,s),t.child.memoizedState=Z1(s),t.memoizedState=Y1,i);if(!(t.mode&1))return mb(e,t,s,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(de(419)),r=Tw(i,r,void 0),mb(e,t,s,r)}if(o=(s&e.childLanes)!==0,na||o){if(r=Zn,r!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ts(e,a),wi(r,e,a,-1))}return bI(),r=Tw(Error(de(421))),mb(e,t,s,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=wG.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ia=uo(a.nextSibling),Na=t,Gt=!0,pi=null,e!==null&&(qa[Ka++]=vs,qa[Ka++]=xs,qa[Ka++]=Rl,vs=e.id,xs=e.overflow,Rl=t),t=cI(t,r.children),t.flags|=4096,t)}function UN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),H1(e.return,t,n)}function Nw(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function tM(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Mr(e,t,r.children,n),r=Qt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&UN(e,n,t);else if(e.tag===19)UN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ot(Qt,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ny(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Nw(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ny(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Nw(t,!0,n,null,i);break;case"together":Nw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qb(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ns(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(de(153));if(t.child!==null){for(e=t.child,n=fo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uG(e,t,n){switch(t.tag){case 3:JF(t),Oc();break;case 5:TF(t);break;case 1:oa(t.type)&&Sy(t);break;case 4:rI(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ot(Cy,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ot(Qt,Qt.current&1),t.flags|=128,null):n&t.child.childLanes?eM(e,t,n):(Ot(Qt,Qt.current&1),e=Ns(e,t,n),e!==null?e.sibling:null);Ot(Qt,Qt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ot(Qt,Qt.current),r)break;return null;case 22:case 23:return t.lanes=0,ZF(e,t,n)}return Ns(e,t,n)}var nM,Q1,rM,aM;nM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Q1=function(){};rM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,vl(qi.current);var i=null;switch(n){case"input":a=x1(e,a),r=x1(e,r),i=[];break;case"select":a=en({},a,{value:void 0}),r=en({},r,{value:void 0}),i=[];break;case"textarea":a=S1(e,a),r=S1(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wy)}$1(n,r);var s;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Lf.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var l=r[d];if(o=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&l!==o&&(l!=null||o!=null))if(d==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Lf.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Pt("scroll",e),i||o===l||(i=[])):(i=i||[]).push(d,l))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};aM=function(e,t,n,r){n!==r&&(t.flags|=4)};function Yp(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dG(e,t,n){var r=t.pendingProps;switch(YS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(t),null;case 1:return oa(t.type)&&ky(),gr(t),null;case 3:return r=t.stateNode,Pc(),Bt(sa),Bt(kr),iI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pi!==null&&(sk(pi),pi=null))),Q1(e,t),gr(t),null;case 5:aI(t);var a=vl(Xf.current);if(n=t.type,e!==null&&t.stateNode!=null)rM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(de(166));return gr(t),null}if(e=vl(qi.current),pb(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Hi]=t,r[qf]=i,e=(t.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(a=0;a<lf.length;a++)Pt(lf[a],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":QT(r,i),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pt("invalid",r);break;case"textarea":eN(r,i),Pt("invalid",r)}$1(n,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];s==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&hb(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&hb(r.textContent,o,e),a=["children",""+o]):Lf.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Pt("scroll",r)}switch(n){case"input":ab(r),JT(r,i,!0);break;case"textarea":ab(r),tN(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wy)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=AD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Hi]=t,e[qf]=r,nM(e,t,!1,!1),t.stateNode=e;e:{switch(s=C1(n,r),n){case"dialog":Pt("cancel",e),Pt("close",e),a=r;break;case"iframe":case"object":case"embed":Pt("load",e),a=r;break;case"video":case"audio":for(a=0;a<lf.length;a++)Pt(lf[a],e);a=r;break;case"source":Pt("error",e),a=r;break;case"img":case"image":case"link":Pt("error",e),Pt("load",e),a=r;break;case"details":Pt("toggle",e),a=r;break;case"input":QT(e,r),a=x1(e,r),Pt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=en({},r,{value:void 0}),Pt("invalid",e);break;case"textarea":eN(e,r),a=S1(e,r),Pt("invalid",e);break;default:a=r}$1(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?FD(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RD(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pf(e,l):typeof l=="number"&&Pf(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pt("scroll",e):l!=null&&MS(e,i,l,s))}switch(n){case"input":ab(e),JT(e,r,!1);break;case"textarea":ab(e),tN(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vo(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?wc(e,!!r.multiple,i,!1):r.defaultValue!=null&&wc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gr(t),null;case 6:if(e&&t.stateNode!=null)aM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(de(166));if(n=vl(Xf.current),vl(qi.current),pb(t)){if(r=t.stateNode,n=t.memoizedProps,r[Hi]=t,(i=r.nodeValue!==n)&&(e=Na,e!==null))switch(e.tag){case 3:hb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hb(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hi]=t,t.stateNode=r}return gr(t),null;case 13:if(Bt(Qt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&Ia!==null&&t.mode&1&&!(t.flags&128))wF(),Oc(),t.flags|=98560,i=!1;else if(i=pb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(de(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[Hi]=t}else Oc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gr(t),i=!1}else pi!==null&&(sk(pi),pi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qt.current&1?zn===0&&(zn=3):bI())),t.updateQueue!==null&&(t.flags|=4),gr(t),null);case 4:return Pc(),Q1(e,t),e===null&&jf(t.stateNode.containerInfo),gr(t),null;case 10:return eI(t.type._context),gr(t),null;case 17:return oa(t.type)&&ky(),gr(t),null;case 19:if(Bt(Qt),i=t.memoizedState,i===null)return gr(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Yp(i,!1);else{if(zn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ny(e),s!==null){for(t.flags|=128,Yp(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ot(Qt,Qt.current&1|2),t.child}e=e.sibling}i.tail!==null&&hn()>Bc&&(t.flags|=128,r=!0,Yp(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ny(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Yp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Gt)return gr(t),null}else 2*hn()-i.renderingStartTime>Bc&&n!==1073741824&&(t.flags|=128,r=!0,Yp(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=hn(),t.sibling=null,n=Qt.current,Ot(Qt,r?n&1|2:n&1),t):(gr(t),null);case 22:case 23:return gI(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wa&1073741824&&(gr(t),t.subtreeFlags&6&&(t.flags|=8192)):gr(t),null;case 24:return null;case 25:return null}throw Error(de(156,t.tag))}function cG(e,t){switch(YS(t),t.tag){case 1:return oa(t.type)&&ky(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pc(),Bt(sa),Bt(kr),iI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return aI(t),null;case 13:if(Bt(Qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(de(340));Oc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Bt(Qt),null;case 4:return Pc(),null;case 10:return eI(t.type._context),null;case 22:case 23:return gI(),null;case 24:return null;default:return null}}var gb=!1,br=!1,hG=typeof WeakSet=="function"?WeakSet:Set,$e=null;function yc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(e,t,r)}else n.current=null}function J1(e,t,n){try{n()}catch(r){an(e,t,r)}}var HN=!1;function pG(e,t){if(O1=yy,e=lF(),KS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var s=0,o=-1,l=-1,d=0,u=0,c=e,h=null;t:for(;;){for(var p;c!==n||a!==0&&c.nodeType!==3||(o=s+a),c!==i||r!==0&&c.nodeType!==3||(l=s+r),c.nodeType===3&&(s+=c.nodeValue.length),(p=c.firstChild)!==null;)h=c,c=p;for(;;){if(c===e)break t;if(h===n&&++d===a&&(o=s),h===i&&++u===r&&(l=s),(p=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(L1={focusedElem:e,selectionRange:n},yy=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:ci(t.type,m),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(x){an(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return f=HN,HN=!1,f}function Cf(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&J1(t,n,i)}a=a.next}while(a!==r)}}function Hv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ek(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iM(e){var t=e.alternate;t!==null&&(e.alternate=null,iM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hi],delete t[qf],delete t[B1],delete t[X6],delete t[Y6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sM(e){return e.tag===5||e.tag===3||e.tag===4}function jN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tk(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wy));else if(r!==4&&(e=e.child,e!==null))for(tk(e,t,n),e=e.sibling;e!==null;)tk(e,t,n),e=e.sibling}function nk(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nk(e,t,n),e=e.sibling;e!==null;)nk(e,t,n),e=e.sibling}var or=null,hi=!1;function Vs(e,t,n){for(n=n.child;n!==null;)oM(e,t,n),n=n.sibling}function oM(e,t,n){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(Ov,n)}catch(o){}switch(n.tag){case 5:br||yc(n,t);case 6:var r=or,a=hi;or=null,Vs(e,t,n),or=r,hi=a,or!==null&&(hi?(e=or,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):or.removeChild(n.stateNode));break;case 18:or!==null&&(hi?(e=or,n=n.stateNode,e.nodeType===8?kw(e.parentNode,n):e.nodeType===1&&kw(e,n),Vf(e)):kw(or,n.stateNode));break;case 4:r=or,a=hi,or=n.stateNode.containerInfo,hi=!0,Vs(e,t,n),or=r,hi=a;break;case 0:case 11:case 14:case 15:if(!br&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&J1(n,t,s),a=a.next}while(a!==r)}Vs(e,t,n);break;case 1:if(!br&&(yc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){an(n,t,o)}Vs(e,t,n);break;case 21:Vs(e,t,n);break;case 22:n.mode&1?(br=(r=br)||n.memoizedState!==null,Vs(e,t,n),br=r):Vs(e,t,n);break;default:Vs(e,t,n)}}function GN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hG),t.forEach(function(r){var a=kG.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function li(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:or=o.stateNode,hi=!1;break e;case 3:or=o.stateNode.containerInfo,hi=!0;break e;case 4:or=o.stateNode.containerInfo,hi=!0;break e}o=o.return}if(or===null)throw Error(de(160));oM(i,s,a),or=null,hi=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(d){an(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lM(t,e),t=t.sibling}function lM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(li(t,e),Oi(e),r&4){try{Cf(3,e,e.return),Hv(3,e)}catch(m){an(e,e.return,m)}try{Cf(5,e,e.return)}catch(m){an(e,e.return,m)}}break;case 1:li(t,e),Oi(e),r&512&&n!==null&&yc(n,n.return);break;case 5:if(li(t,e),Oi(e),r&512&&n!==null&&yc(n,n.return),e.flags&32){var a=e.stateNode;try{Pf(a,"")}catch(m){an(e,e.return,m)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&ND(a,i),C1(o,s);var d=C1(o,i);for(s=0;s<l.length;s+=2){var u=l[s],c=l[s+1];u==="style"?FD(a,c):u==="dangerouslySetInnerHTML"?RD(a,c):u==="children"?Pf(a,c):MS(a,u,c,d)}switch(o){case"input":w1(a,i);break;case"textarea":_D(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?wc(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?wc(a,!!i.multiple,i.defaultValue,!0):wc(a,!!i.multiple,i.multiple?[]:"",!1))}a[qf]=i}catch(m){an(e,e.return,m)}}break;case 6:if(li(t,e),Oi(e),r&4){if(e.stateNode===null)throw Error(de(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){an(e,e.return,m)}}break;case 3:if(li(t,e),Oi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vf(t.containerInfo)}catch(m){an(e,e.return,m)}break;case 4:li(t,e),Oi(e);break;case 13:li(t,e),Oi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(fI=hn())),r&4&&GN(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(br=(d=br)||u,li(t,e),br=d):li(t,e),Oi(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for($e=e,u=e.child;u!==null;){for(c=$e=u;$e!==null;){switch(h=$e,p=h.child,h.tag){case 0:case 11:case 14:case 15:Cf(4,h,h.return);break;case 1:yc(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){an(r,n,m)}}break;case 5:yc(h,h.return);break;case 22:if(h.memoizedState!==null){KN(c);continue}}p!==null?(p.return=h,$e=p):KN(c)}u=u.sibling}e:for(u=null,c=e;;){if(c.tag===5){if(u===null){u=c;try{a=c.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=c.stateNode,l=c.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=DD("display",s))}catch(m){an(e,e.return,m)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(m){an(e,e.return,m)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:li(t,e),Oi(e),r&4&&GN(e);break;case 21:break;default:li(t,e),Oi(e)}}function Oi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(sM(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Pf(a,""),r.flags&=-33);var i=jN(e);nk(e,i,a);break;case 3:case 4:var s=r.stateNode.containerInfo,o=jN(e);tk(e,o,s);break;default:throw Error(de(161))}}catch(l){an(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fG(e,t,n){$e=e,uM(e)}function uM(e,t,n){for(var r=(e.mode&1)!==0;$e!==null;){var a=$e,i=a.child;if(a.tag===22&&r){var s=a.memoizedState!==null||gb;if(!s){var o=a.alternate,l=o!==null&&o.memoizedState!==null||br;o=gb;var d=br;if(gb=s,(br=l)&&!d)for($e=a;$e!==null;)s=$e,l=s.child,s.tag===22&&s.memoizedState!==null?XN(a):l!==null?(l.return=s,$e=l):XN(a);for(;i!==null;)$e=i,uM(i),i=i.sibling;$e=a,gb=o,br=d}qN(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,$e=i):qN(e)}}function qN(e){for(;$e!==null;){var t=$e;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:br||Hv(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!br)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ci(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_N(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_N(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&Vf(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}br||t.flags&512&&ek(t)}catch(h){an(t,t.return,h)}}if(t===e){$e=null;break}if(n=t.sibling,n!==null){n.return=t.return,$e=n;break}$e=t.return}}function KN(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$e=n;break}$e=t.return}}function XN(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hv(4,t)}catch(l){an(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(l){an(t,a,l)}}var i=t.return;try{ek(t)}catch(l){an(t,i,l)}break;case 5:var s=t.return;try{ek(t)}catch(l){an(t,s,l)}}}catch(l){an(t,t.return,l)}if(t===e){$e=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$e=o;break}$e=t.return}}var mG=Math.ceil,Ry=Ds.ReactCurrentDispatcher,hI=Ds.ReactCurrentOwner,Ya=Ds.ReactCurrentBatchConfig,dt=0,Zn=null,Sn=null,ur=0,wa=0,vc=Oo(0),zn=0,Jf=null,Fl=0,jv=0,pI=0,Ef=null,ea=null,fI=0,Bc=1/0,cs=null,Dy=!1,rk=null,ho=null,bb=!1,eo=null,Fy=0,Tf=0,ak=null,Jb=-1,ey=0;function zr(){return dt&6?hn():Jb!==-1?Jb:Jb=hn()}function po(e){return e.mode&1?dt&2&&ur!==0?ur&-ur:Q6.transition!==null?(ey===0&&(ey=GD()),ey):(e=wt,e!==0||(e=window.event,e=e===void 0?16:JD(e.type)),e):1}function wi(e,t,n,r){if(50<Tf)throw Tf=0,ak=null,Error(de(185));Nm(e,n,r),(!(dt&2)||e!==Zn)&&(e===Zn&&(!(dt&2)&&(jv|=n),zn===4&&Zs(e,ur)),la(e,r),n===1&&dt===0&&!(t.mode&1)&&(Bc=hn()+500,Wv&&Lo()))}function la(e,t){var n=e.callbackNode;Qj(e,t);var r=by(e,e===Zn?ur:0);if(r===0)n!==null&&aN(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&aN(n),t===1)e.tag===0?Z6(YN.bind(null,e)):yF(YN.bind(null,e)),q6(function(){!(dt&6)&&Lo()}),n=null;else{switch(qD(r)){case 1:n=BS;break;case 4:n=HD;break;case 16:n=gy;break;case 536870912:n=jD;break;default:n=gy}n=bM(n,dM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dM(e,t){if(Jb=-1,ey=0,dt&6)throw Error(de(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=by(e,e===Zn?ur:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=My(e,r);else{t=r;var a=dt;dt|=2;var i=hM();(Zn!==e||ur!==t)&&(cs=null,Bc=hn()+500,$l(e,t));do try{yG();break}catch(o){cM(e,o)}while(1);JS(),Ry.current=i,dt=a,Sn!==null?t=0:(Zn=null,ur=0,t=zn)}if(t!==0){if(t===2&&(a=A1(e),a!==0&&(r=a,t=ik(e,a))),t===1)throw n=Jf,$l(e,0),Zs(e,r),la(e,hn()),n;if(t===6)Zs(e,r);else{if(a=e.current.alternate,!(r&30)&&!gG(a)&&(t=My(e,r),t===2&&(i=A1(e),i!==0&&(r=i,t=ik(e,i))),t===1))throw n=Jf,$l(e,0),Zs(e,r),la(e,hn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(de(345));case 2:ul(e,ea,cs);break;case 3:if(Zs(e,r),(r&130023424)===r&&(t=fI+500-hn(),10<t)){if(by(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){zr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=z1(ul.bind(null,e,ea,cs),t);break}ul(e,ea,cs);break;case 4:if(Zs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-xi(r);i=1<<s,s=t[s],s>a&&(a=s),r&=~i}if(r=a,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mG(r/1960))-r,10<r){e.timeoutHandle=z1(ul.bind(null,e,ea,cs),r);break}ul(e,ea,cs);break;case 5:ul(e,ea,cs);break;default:throw Error(de(329))}}}return la(e,hn()),e.callbackNode===n?dM.bind(null,e):null}function ik(e,t){var n=Ef;return e.current.memoizedState.isDehydrated&&($l(e,t).flags|=256),e=My(e,t),e!==2&&(t=ea,ea=n,t!==null&&sk(t)),e}function sk(e){ea===null?ea=e:ea.push.apply(ea,e)}function gG(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Ei(i(),a))return!1}catch(s){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zs(e,t){for(t&=~pI,t&=~jv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xi(t),r=1<<n;e[n]=-1,t&=~r}}function YN(e){if(dt&6)throw Error(de(327));Cc();var t=by(e,0);if(!(t&1))return la(e,hn()),null;var n=My(e,t);if(e.tag!==0&&n===2){var r=A1(e);r!==0&&(t=r,n=ik(e,r))}if(n===1)throw n=Jf,$l(e,0),Zs(e,t),la(e,hn()),n;if(n===6)throw Error(de(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ul(e,ea,cs),la(e,hn()),null}function mI(e,t){var n=dt;dt|=1;try{return e(t)}finally{dt=n,dt===0&&(Bc=hn()+500,Wv&&Lo())}}function Ml(e){eo!==null&&eo.tag===0&&!(dt&6)&&Cc();var t=dt;dt|=1;var n=Ya.transition,r=wt;try{if(Ya.transition=null,wt=1,e)return e()}finally{wt=r,Ya.transition=n,dt=t,!(dt&6)&&Lo()}}function gI(){wa=vc.current,Bt(vc)}function $l(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G6(n)),Sn!==null)for(n=Sn.return;n!==null;){var r=n;switch(YS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ky();break;case 3:Pc(),Bt(sa),Bt(kr),iI();break;case 5:aI(r);break;case 4:Pc();break;case 13:Bt(Qt);break;case 19:Bt(Qt);break;case 10:eI(r.type._context);break;case 22:case 23:gI()}n=n.return}if(Zn=e,Sn=e=fo(e.current,null),ur=wa=t,zn=0,Jf=null,pI=jv=Fl=0,ea=Ef=null,yl!==null){for(t=0;t<yl.length;t++)if(n=yl[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=a,r.next=s}n.pending=r}yl=null}return e}function cM(e,t){do{var n=Sn;try{if(JS(),Yb.current=Ay,_y){for(var r=Jt.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}_y=!1}if(Dl=0,Gn=On=Jt=null,$f=!1,Yf=0,hI.current=null,n===null||n.return===null){zn=1,Jf=t,Sn=null;break}e:{var i=e,s=n.return,o=n,l=t;if(t=ur,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,u=o,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=LN(s);if(p!==null){p.flags&=-257,PN(p,s,o,i,t),p.mode&1&&ON(i,d,t),t=p,l=d;var f=t.updateQueue;if(f===null){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}else{if(!(t&1)){ON(i,d,t),bI();break e}l=Error(de(426))}}else if(Gt&&o.mode&1){var g=LN(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),PN(g,s,o,i,t),ZS(zc(l,o));break e}}i=l=zc(l,o),zn!==4&&(zn=2),Ef===null?Ef=[i]:Ef.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=KF(i,l,t);NN(i,b);break e;case 1:o=l;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ho===null||!ho.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=XF(i,o,t);NN(i,x);break e}}i=i.return}while(i!==null)}fM(n)}catch(w){t=w,Sn===n&&n!==null&&(Sn=n=n.return);continue}break}while(1)}function hM(){var e=Ry.current;return Ry.current=Ay,e===null?Ay:e}function bI(){(zn===0||zn===3||zn===2)&&(zn=4),Zn===null||!(Fl&268435455)&&!(jv&268435455)||Zs(Zn,ur)}function My(e,t){var n=dt;dt|=2;var r=hM();(Zn!==e||ur!==t)&&(cs=null,$l(e,t));do try{bG();break}catch(a){cM(e,a)}while(1);if(JS(),dt=n,Ry.current=r,Sn!==null)throw Error(de(261));return Zn=null,ur=0,zn}function bG(){for(;Sn!==null;)pM(Sn)}function yG(){for(;Sn!==null&&!Uj();)pM(Sn)}function pM(e){var t=gM(e.alternate,e,wa);e.memoizedProps=e.pendingProps,t===null?fM(e):Sn=t,hI.current=null}function fM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cG(n,t),n!==null){n.flags&=32767,Sn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zn=6,Sn=null;return}}else if(n=dG(n,t,wa),n!==null){Sn=n;return}if(t=t.sibling,t!==null){Sn=t;return}Sn=t=e}while(t!==null);zn===0&&(zn=5)}function ul(e,t,n){var r=wt,a=Ya.transition;try{Ya.transition=null,wt=1,vG(e,t,n,r)}finally{Ya.transition=a,wt=r}return null}function vG(e,t,n,r){do Cc();while(eo!==null);if(dt&6)throw Error(de(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(de(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Jj(e,i),e===Zn&&(Sn=Zn=null,ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bb||(bb=!0,bM(gy,function(){return Cc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ya.transition,Ya.transition=null;var s=wt;wt=1;var o=dt;dt|=4,hI.current=null,pG(e,n),lM(n,e),z6(L1),yy=!!O1,L1=O1=null,e.current=n,fG(n),Hj(),dt=o,wt=s,Ya.transition=i}else e.current=n;if(bb&&(bb=!1,eo=e,Fy=a),i=e.pendingLanes,i===0&&(ho=null),qj(n.stateNode),la(e,hn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Dy)throw Dy=!1,e=rk,rk=null,e;return Fy&1&&e.tag!==0&&Cc(),i=e.pendingLanes,i&1?e===ak?Tf++:(Tf=0,ak=e):Tf=0,Lo(),null}function Cc(){if(eo!==null){var e=qD(Fy),t=Ya.transition,n=wt;try{if(Ya.transition=null,wt=16>e?16:e,eo===null)var r=!1;else{if(e=eo,eo=null,Fy=0,dt&6)throw Error(de(331));var a=dt;for(dt|=4,$e=e.current;$e!==null;){var i=$e,s=i.child;if($e.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var d=o[l];for($e=d;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:Cf(8,u,i)}var c=u.child;if(c!==null)c.return=u,$e=c;else for(;$e!==null;){u=$e;var h=u.sibling,p=u.return;if(iM(u),u===d){$e=null;break}if(h!==null){h.return=p,$e=h;break}$e=p}}}var f=i.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}$e=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,$e=s;else e:for(;$e!==null;){if(i=$e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cf(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,$e=b;break e}$e=i.return}}var y=e.current;for($e=y;$e!==null;){s=$e;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,$e=v;else e:for(s=y;$e!==null;){if(o=$e,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Hv(9,o)}}catch(w){an(o,o.return,w)}if(o===s){$e=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,$e=x;break e}$e=o.return}}if(dt=a,Lo(),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(Ov,e)}catch(w){}r=!0}return r}finally{wt=n,Ya.transition=t}}return!1}function ZN(e,t,n){t=zc(n,t),t=KF(e,t,1),e=co(e,t,1),t=zr(),e!==null&&(Nm(e,1,t),la(e,t))}function an(e,t,n){if(e.tag===3)ZN(e,e,n);else for(;t!==null;){if(t.tag===3){ZN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ho===null||!ho.has(r))){e=zc(n,e),e=XF(t,e,1),t=co(t,e,1),e=zr(),t!==null&&(Nm(t,1,e),la(t,e));break}}t=t.return}}function xG(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=zr(),e.pingedLanes|=e.suspendedLanes&n,Zn===e&&(ur&n)===n&&(zn===4||zn===3&&(ur&130023424)===ur&&500>hn()-fI?$l(e,0):pI|=n),la(e,t)}function mM(e,t){t===0&&(e.mode&1?(t=ob,ob<<=1,!(ob&130023424)&&(ob=4194304)):t=1);var n=zr();e=Ts(e,t),e!==null&&(Nm(e,t,n),la(e,n))}function wG(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mM(e,n)}function kG(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(t),mM(e,n)}var gM;gM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||sa.current)na=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return na=!1,uG(e,t,n);na=!!(e.flags&131072)}else na=!1,Gt&&t.flags&1048576&&vF(t,$y,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qb(e,t),e=t.pendingProps;var a=Mc(t,kr.current);$c(t,n),a=oI(null,t,r,e,a,n);var i=lI();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,oa(r)?(i=!0,Sy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,nI(t),a.updater=Vv,t.stateNode=a,a._reactInternals=t,G1(t,r,e,n),t=X1(null,t,r,!0,i,n)):(t.tag=0,Gt&&i&&XS(t),Mr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qb(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=IG(r),e=ci(r,e),a){case 0:t=K1(null,t,r,e,n);break e;case 1:t=WN(null,t,r,e,n);break e;case 11:t=zN(null,t,r,e,n);break e;case 14:t=BN(null,t,r,ci(r.type,e),n);break e}throw Error(de(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ci(r,a),K1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ci(r,a),WN(e,t,r,a,n);case 3:e:{if(JF(t),e===null)throw Error(de(387));r=t.pendingProps,i=t.memoizedState,a=i.element,SF(e,t),Ty(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=zc(Error(de(423)),t),t=VN(e,t,r,n,a);break e}else if(r!==a){a=zc(Error(de(424)),t),t=VN(e,t,r,n,a);break e}else for(Ia=uo(t.stateNode.containerInfo.firstChild),Na=t,Gt=!0,pi=null,n=EF(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oc(),r===a){t=Ns(e,t,n);break e}Mr(e,t,r,n)}t=t.child}return t;case 5:return TF(t),e===null&&U1(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,P1(r,a)?s=null:i!==null&&P1(r,i)&&(t.flags|=32),QF(e,t),Mr(e,t,s,n),t.child;case 6:return e===null&&U1(t),null;case 13:return eM(e,t,n);case 4:return rI(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Lc(t,null,r,n):Mr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ci(r,a),zN(e,t,r,a,n);case 7:return Mr(e,t,t.pendingProps,n),t.child;case 8:return Mr(e,t,t.pendingProps.children,n),t.child;case 12:return Mr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Ot(Cy,r._currentValue),r._currentValue=s,i!==null)if(Ei(i.value,s)){if(i.children===a.children&&!sa.current){t=Ns(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){s=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ws(-1,n&-n),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),H1(i.return,n,t),o.lanes|=n;break}l=l.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(de(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),H1(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Mr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,$c(t,n),a=Qa(a),r=r(a),t.flags|=1,Mr(e,t,r,n),t.child;case 14:return r=t.type,a=ci(r,t.pendingProps),a=ci(r.type,a),BN(e,t,r,a,n);case 15:return YF(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ci(r,a),Qb(e,t),t.tag=1,oa(r)?(e=!0,Sy(t)):e=!1,$c(t,n),$F(t,r,a),G1(t,r,a,n),X1(null,t,r,!0,e,n);case 19:return tM(e,t,n);case 22:return ZF(e,t,n)}throw Error(de(156,t.tag))};function bM(e,t){return UD(e,t)}function SG(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xa(e,t,n,r){return new SG(e,t,n,r)}function yI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function IG(e){if(typeof e=="function")return yI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===LS)return 11;if(e===PS)return 14}return 2}function fo(e,t){var n=e.alternate;return n===null?(n=Xa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ty(e,t,n,r,a,i){var s=2;if(r=e,typeof e=="function")yI(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case uc:return Cl(n.children,a,i,t);case OS:s=8,a|=8;break;case g1:return e=Xa(12,n,t,a|2),e.elementType=g1,e.lanes=i,e;case b1:return e=Xa(13,n,t,a),e.elementType=b1,e.lanes=i,e;case y1:return e=Xa(19,n,t,a),e.elementType=y1,e.lanes=i,e;case CD:return Gv(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ID:s=10;break e;case $D:s=9;break e;case LS:s=11;break e;case PS:s=14;break e;case qs:s=16,r=null;break e}throw Error(de(130,e==null?e:typeof e,""))}return t=Xa(s,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Cl(e,t,n,r){return e=Xa(7,e,r,t),e.lanes=n,e}function Gv(e,t,n,r){return e=Xa(22,e,r,t),e.elementType=CD,e.lanes=n,e.stateNode={isHidden:!1},e}function _w(e,t,n){return e=Xa(6,e,null,t),e.lanes=n,e}function Aw(e,t,n){return t=Xa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $G(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cw(0),this.expirationTimes=cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cw(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vI(e,t,n,r,a,i,s,o,l){return e=new $G(e,t,n,o,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Xa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nI(i),e}function CG(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yM(e){if(!e)return xo;e=e._reactInternals;e:{if(ou(e)!==e||e.tag!==1)throw Error(de(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(de(171))}if(e.tag===1){var n=e.type;if(oa(n))return bF(e,n,t)}return t}function vM(e,t,n,r,a,i,s,o,l){return e=vI(n,r,!0,e,a,i,s,o,l),e.context=yM(null),n=e.current,r=zr(),a=po(n),i=ws(r,a),i.callback=t!=null?t:null,co(n,i,a),e.current.lanes=a,Nm(e,a,r),la(e,r),e}function qv(e,t,n,r){var a=t.current,i=zr(),s=po(a);return n=yM(n),t.context===null?t.context=n:t.pendingContext=n,t=ws(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=co(a,t,s),e!==null&&(wi(e,a,s,i),Xb(e,a,s)),s}function Oy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xI(e,t){QN(e,t),(e=e.alternate)&&QN(e,t)}function EG(){return null}var xM=typeof reportError=="function"?reportError:function(e){console.error(e)};function wI(e){this._internalRoot=e}Kv.prototype.render=wI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(de(409));qv(e,t,null,null)};Kv.prototype.unmount=wI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ml(function(){qv(null,e,null,null)}),t[Es]=null}};function Kv(e){this._internalRoot=e}Kv.prototype.unstable_scheduleHydration=function(e){if(e){var t=YD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ys.length&&t!==0&&t<Ys[n].priority;n++);Ys.splice(n,0,e),n===0&&QD(e)}};function kI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function JN(){}function TG(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=Oy(s);i.call(d)}}var s=vM(t,r,e,0,null,!1,!1,"",JN);return e._reactRootContainer=s,e[Es]=s.current,jf(e.nodeType===8?e.parentNode:e),Ml(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var d=Oy(l);o.call(d)}}var l=vI(e,0,!1,null,null,!1,!1,"",JN);return e._reactRootContainer=l,e[Es]=l.current,jf(e.nodeType===8?e.parentNode:e),Ml(function(){qv(t,l,n,r)}),l}function Yv(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var o=a;a=function(){var l=Oy(s);o.call(l)}}qv(t,s,e,a)}else s=TG(n,t,e,a,r);return Oy(s)}KD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=of(t.pendingLanes);n!==0&&(WS(t,n|1),la(t,hn()),!(dt&6)&&(Bc=hn()+500,Lo()))}break;case 13:Ml(function(){var r=Ts(e,1);if(r!==null){var a=zr();wi(r,e,1,a)}}),xI(e,1)}};VS=function(e){if(e.tag===13){var t=Ts(e,134217728);if(t!==null){var n=zr();wi(t,e,134217728,n)}xI(e,134217728)}};XD=function(e){if(e.tag===13){var t=po(e),n=Ts(e,t);if(n!==null){var r=zr();wi(n,e,t,r)}xI(e,t)}};YD=function(){return wt};ZD=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}};T1=function(e,t,n){switch(t){case"input":if(w1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Bv(r);if(!a)throw Error(de(90));TD(r),w1(r,a)}}}break;case"textarea":_D(e,n);break;case"select":t=n.value,t!=null&&wc(e,!!n.multiple,t,!1)}};LD=mI;PD=Ml;var NG={usingClientEntryPoint:!1,Events:[Am,pc,Bv,MD,OD,mI]},Zp={findFiberByHostInstance:bl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_G={bundleType:Zp.bundleType,version:Zp.version,rendererPackageName:Zp.rendererPackageName,rendererConfig:Zp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=WD(e),e===null?null:e.stateNode},findFiberByHostInstance:Zp.findFiberByHostInstance||EG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yb.isDisabled&&yb.supportsFiber)try{Ov=yb.inject(_G),Gi=yb}catch(e){}}Ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NG;Ma.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kI(t))throw Error(de(200));return CG(e,t,null,n)};Ma.createRoot=function(e,t){if(!kI(e))throw Error(de(299));var n=!1,r="",a=xM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=vI(e,1,!1,null,null,n,!1,r,a),e[Es]=t.current,jf(e.nodeType===8?e.parentNode:e),new wI(t)};Ma.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(de(188)):(e=Object.keys(e).join(","),Error(de(268,e)));return e=WD(t),e=e===null?null:e.stateNode,e};Ma.flushSync=function(e){return Ml(e)};Ma.hydrate=function(e,t,n){if(!Xv(t))throw Error(de(200));return Yv(null,e,t,!0,n)};Ma.hydrateRoot=function(e,t,n){if(!kI(e))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",s=xM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=vM(t,null,e,1,n!=null?n:null,a,!1,i,s),e[Es]=t.current,jf(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kv(t)};Ma.render=function(e,t,n){if(!Xv(t))throw Error(de(200));return Yv(null,e,t,!1,n)};Ma.unmountComponentAtNode=function(e){if(!Xv(e))throw Error(de(40));return e._reactRootContainer?(Ml(function(){Yv(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0):!1};Ma.unstable_batchedUpdates=mI;Ma.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xv(n))throw Error(de(200));if(e==null||e._reactInternals===void 0)throw Error(de(38));return Yv(e,t,n,!1,r)};Ma.version="18.2.0-next-9e3b772b8-20220608";function wM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wM)}catch(e){console.error(e)}}wM(),vD.exports=Ma;var SI=vD.exports;const AG=Em(SI);var kM,e_=SI;kM=e_.createRoot,e_.hydrateRoot;function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ok(e,t)}function wo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ok(e,t)}var SM={exports:{}},RG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DG=RG,FG=DG;function IM(){}function $M(){}$M.resetWarningCache=IM;var MG=function(){function e(r,a,i,s,o,l){if(l!==FG){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$M,resetWarningCache:IM};return n.PropTypes=n,n};SM.exports=MG();var OG=SM.exports;const t_=Em(OG);function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pa.apply(this,arguments)}function vb(e){return e.charAt(0)==="/"}function Rw(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}function LG(e,t){t===void 0&&(t="");var n=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&vb(e),i=t&&vb(t),s=a||i;if(e&&vb(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var o;if(r.length){var l=r[r.length-1];o=l==="."||l===".."||l===""}else o=!1;for(var d=0,u=r.length;u>=0;u--){var c=r[u];c==="."?Rw(r,u):c===".."?(Rw(r,u),d++):d&&(Rw(r,u),d--)}if(!s)for(;d--;d)r.unshift("..");s&&r[0]!==""&&(!r[0]||!vb(r[0]))&&r.unshift("");var h=r.join("/");return o&&h.substr(-1)!=="/"&&(h+="/"),h}function n_(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function ny(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(a,i){return ny(a,t[i])});if(typeof e=="object"||typeof t=="object"){var n=n_(e),r=n_(t);return n!==e||r!==t?ny(n,r):Object.keys(Object.assign({},e,t)).every(function(a){return ny(e[a],t[a])})}return!1}var PG=!0,Dw="Invariant failed";function lu(e,t){if(!e){if(PG)throw new Error(Dw);var n=typeof t=="function"?t():t,r=n?"".concat(Dw,": ").concat(n):Dw;throw new Error(r)}}function Nf(e){return e.charAt(0)==="/"?e:"/"+e}function r_(e){return e.charAt(0)==="/"?e.substr(1):e}function zG(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function CM(e,t){return zG(e,t)?e.substr(t.length):e}function EM(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function BG(e){var t=e||"/",n="",r="",a=t.indexOf("#");a!==-1&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return i!==-1&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:n==="?"?"":n,hash:r==="#"?"":r}}function Ua(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function ra(e,t,n,r){var a;typeof e=="string"?(a=BG(e),a.state=t):(a=pa({},e),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",t!==void 0&&a.state===void 0&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(i){throw i instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):i}return n&&(a.key=n),r?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=LG(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function WG(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&ny(e.state,t.state)}function II(){var e=null;function t(s){return e=s,function(){e===s&&(e=null)}}function n(s,o,l,d){if(e!=null){var u=typeof e=="function"?e(s,o):e;typeof u=="string"?typeof l=="function"?l(u,d):d(!0):d(u!==!1)}else d(!0)}var r=[];function a(s){var o=!0;function l(){o&&s.apply(void 0,arguments)}return r.push(l),function(){o=!1,r=r.filter(function(d){return d!==l})}}function i(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];r.forEach(function(d){return d.apply(void 0,o)})}return{setPrompt:t,confirmTransitionTo:n,appendListener:a,notifyListeners:i}}var TM=!!(typeof window<"u"&&window.document&&window.document.createElement);function NM(e,t){t(window.confirm(e))}function VG(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function UG(){return window.navigator.userAgent.indexOf("Trident")===-1}function HG(){return window.navigator.userAgent.indexOf("Firefox")===-1}function jG(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var a_="popstate",i_="hashchange";function s_(){try{return window.history.state||{}}catch(e){return{}}}function GG(e){e===void 0&&(e={}),TM||lu(!1);var t=window.history,n=VG(),r=!UG(),a=e,i=a.forceRefresh,s=i===void 0?!1:i,o=a.getUserConfirmation,l=o===void 0?NM:o,d=a.keyLength,u=d===void 0?6:d,c=e.basename?EM(Nf(e.basename)):"";function h(B){var V=B||{},K=V.key,Q=V.state,ee=window.location,ie=ee.pathname,se=ee.search,ge=ee.hash,fe=ie+se+ge;return c&&(fe=CM(fe,c)),ra(fe,Q,K)}function p(){return Math.random().toString(36).substr(2,u)}var f=II();function m(B){pa(M,B),M.length=t.length,f.notifyListeners(M.location,M.action)}function g(B){jG(B)||v(h(B.state))}function b(){v(h(s_()))}var y=!1;function v(B){if(y)y=!1,m();else{var V="POP";f.confirmTransitionTo(B,V,l,function(K){K?m({action:V,location:B}):x(B)})}}function x(B){var V=M.location,K=$.indexOf(V.key);K===-1&&(K=0);var Q=$.indexOf(B.key);Q===-1&&(Q=0);var ee=K-Q;ee&&(y=!0,R(ee))}var w=h(s_()),$=[w.key];function C(B){return c+Ua(B)}function E(B,V){var K="PUSH",Q=ra(B,V,p(),M.location);f.confirmTransitionTo(Q,K,l,function(ee){if(ee){var ie=C(Q),se=Q.key,ge=Q.state;if(n)if(t.pushState({key:se,state:ge},null,ie),s)window.location.href=ie;else{var fe=$.indexOf(M.location.key),pe=$.slice(0,fe+1);pe.push(Q.key),$=pe,m({action:K,location:Q})}else window.location.href=ie}})}function A(B,V){var K="REPLACE",Q=ra(B,V,p(),M.location);f.confirmTransitionTo(Q,K,l,function(ee){if(ee){var ie=C(Q),se=Q.key,ge=Q.state;if(n)if(t.replaceState({key:se,state:ge},null,ie),s)window.location.replace(ie);else{var fe=$.indexOf(M.location.key);fe!==-1&&($[fe]=Q.key),m({action:K,location:Q})}else window.location.replace(ie)}})}function R(B){t.go(B)}function N(){R(-1)}function I(){R(1)}var F=0;function L(B){F+=B,F===1&&B===1?(window.addEventListener(a_,g),r&&window.addEventListener(i_,b)):F===0&&(window.removeEventListener(a_,g),r&&window.removeEventListener(i_,b))}var P=!1;function H(B){B===void 0&&(B=!1);var V=f.setPrompt(B);return P||(L(1),P=!0),function(){return P&&(P=!1,L(-1)),V()}}function X(B){var V=f.appendListener(B);return L(1),function(){L(-1),V()}}var M={length:t.length,action:"POP",location:w,createHref:C,push:E,replace:A,go:R,goBack:N,goForward:I,block:H,listen:X};return M}var o_="hashchange",qG={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+r_(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:r_,decodePath:Nf},slash:{encodePath:Nf,decodePath:Nf}};function _M(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function Qp(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function KG(e){window.location.hash=e}function Fw(e){window.location.replace(_M(window.location.href)+"#"+e)}function XG(e){e===void 0&&(e={}),TM||lu(!1);var t=window.history;HG();var n=e,r=n.getUserConfirmation,a=r===void 0?NM:r,i=n.hashType,s=i===void 0?"slash":i,o=e.basename?EM(Nf(e.basename)):"",l=qG[s],d=l.encodePath,u=l.decodePath;function c(){var V=u(Qp());return o&&(V=CM(V,o)),ra(V)}var h=II();function p(V){pa(B,V),B.length=t.length,h.notifyListeners(B.location,B.action)}var f=!1,m=null;function g(V,K){return V.pathname===K.pathname&&V.search===K.search&&V.hash===K.hash}function b(){var V=Qp(),K=d(V);if(V!==K)Fw(K);else{var Q=c(),ee=B.location;if(!f&&g(ee,Q)||m===Ua(Q))return;m=null,y(Q)}}function y(V){if(f)f=!1,p();else{var K="POP";h.confirmTransitionTo(V,K,a,function(Q){Q?p({action:K,location:V}):v(V)})}}function v(V){var K=B.location,Q=C.lastIndexOf(Ua(K));Q===-1&&(Q=0);var ee=C.lastIndexOf(Ua(V));ee===-1&&(ee=0);var ie=Q-ee;ie&&(f=!0,N(ie))}var x=Qp(),w=d(x);x!==w&&Fw(w);var $=c(),C=[Ua($)];function E(V){var K=document.querySelector("base"),Q="";return K&&K.getAttribute("href")&&(Q=_M(window.location.href)),Q+"#"+d(o+Ua(V))}function A(V,K){var Q="PUSH",ee=ra(V,void 0,void 0,B.location);h.confirmTransitionTo(ee,Q,a,function(ie){if(ie){var se=Ua(ee),ge=d(o+se),fe=Qp()!==ge;if(fe){m=se,KG(ge);var pe=C.lastIndexOf(Ua(B.location)),Ne=C.slice(0,pe+1);Ne.push(se),C=Ne,p({action:Q,location:ee})}else p()}})}function R(V,K){var Q="REPLACE",ee=ra(V,void 0,void 0,B.location);h.confirmTransitionTo(ee,Q,a,function(ie){if(ie){var se=Ua(ee),ge=d(o+se),fe=Qp()!==ge;fe&&(m=se,Fw(ge));var pe=C.indexOf(Ua(B.location));pe!==-1&&(C[pe]=se),p({action:Q,location:ee})}})}function N(V){t.go(V)}function I(){N(-1)}function F(){N(1)}var L=0;function P(V){L+=V,L===1&&V===1?window.addEventListener(o_,b):L===0&&window.removeEventListener(o_,b)}var H=!1;function X(V){V===void 0&&(V=!1);var K=h.setPrompt(V);return H||(P(1),H=!0),function(){return H&&(H=!1,P(-1)),K()}}function M(V){var K=h.appendListener(V);return P(1),function(){P(-1),K()}}var B={length:t.length,action:"POP",location:$,createHref:E,push:A,replace:R,go:N,goBack:I,goForward:F,block:X,listen:M};return B}function l_(e,t,n){return Math.min(Math.max(e,t),n)}function YG(e){e===void 0&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,a=r===void 0?["/"]:r,i=t.initialIndex,s=i===void 0?0:i,o=t.keyLength,l=o===void 0?6:o,d=II();function u(E){pa(C,E),C.length=C.entries.length,d.notifyListeners(C.location,C.action)}function c(){return Math.random().toString(36).substr(2,l)}var h=l_(s,0,a.length-1),p=a.map(function(E){return typeof E=="string"?ra(E,void 0,c()):ra(E,void 0,E.key||c())}),f=Ua;function m(E,A){var R="PUSH",N=ra(E,A,c(),C.location);d.confirmTransitionTo(N,R,n,function(I){if(I){var F=C.index,L=F+1,P=C.entries.slice(0);P.length>L?P.splice(L,P.length-L,N):P.push(N),u({action:R,location:N,index:L,entries:P})}})}function g(E,A){var R="REPLACE",N=ra(E,A,c(),C.location);d.confirmTransitionTo(N,R,n,function(I){I&&(C.entries[C.index]=N,u({action:R,location:N}))})}function b(E){var A=l_(C.index+E,0,C.entries.length-1),R="POP",N=C.entries[A];d.confirmTransitionTo(N,R,n,function(I){I?u({action:R,location:N,index:A}):u()})}function y(){b(-1)}function v(){b(1)}function x(E){var A=C.index+E;return A>=0&&A<C.entries.length}function w(E){return E===void 0&&(E=!1),d.setPrompt(E)}function $(E){return d.appendListener(E)}var C={length:p.length,action:"POP",location:p[h],index:h,entries:p,createHref:f,push:m,replace:g,go:b,goBack:y,goForward:v,canGo:x,block:w,listen:$};return C}var gh={exports:{}},ZG=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},Ly=ZG;gh.exports=DM;gh.exports.parse=$I;gh.exports.compile=JG;gh.exports.tokensToFunction=AM;gh.exports.tokensToRegExp=RM;var QG=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function $I(e,t){for(var n=[],r=0,a=0,i="",s=t&&t.delimiter||"/",o;(o=QG.exec(e))!=null;){var l=o[0],d=o[1],u=o.index;if(i+=e.slice(a,u),a=u+l.length,d){i+=d[1];continue}var c=e[a],h=o[2],p=o[3],f=o[4],m=o[5],g=o[6],b=o[7];i&&(n.push(i),i="");var y=h!=null&&c!=null&&c!==h,v=g==="+"||g==="*",x=g==="?"||g==="*",w=o[2]||s,$=f||m;n.push({name:p||r++,prefix:h||"",delimiter:w,optional:x,repeat:v,partial:y,asterisk:!!b,pattern:$?n5($):b?".*":"[^"+ry(w)+"]+?"})}return a<e.length&&(i+=e.substr(a)),i&&n.push(i),n}function JG(e,t){return AM($I(e,t),t)}function e5(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function t5(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function AM(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",EI(t)));return function(a,i){for(var s="",o=a||{},l=i||{},d=l.pretty?e5:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if(typeof c=="string"){s+=c;continue}var h=o[c.name],p;if(h==null)if(c.optional){c.partial&&(s+=c.prefix);continue}else throw new TypeError('Expected "'+c.name+'" to be defined');if(Ly(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(h.length===0){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(p=d(h[f]),!n[u].test(p))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(p)+"`");s+=(f===0?c.prefix:c.delimiter)+p}continue}if(p=c.asterisk?t5(h):d(h),!n[u].test(p))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+p+'"');s+=c.prefix+p}return s}}function ry(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function n5(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function CI(e,t){return e.keys=t,e}function EI(e){return e&&e.sensitive?"":"i"}function r5(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return CI(e,t)}function a5(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(DM(e[a],t,n).source);var i=new RegExp("(?:"+r.join("|")+")",EI(n));return CI(i,t)}function i5(e,t,n){return RM($I(e,n),t,n)}function RM(e,t,n){Ly(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,a=n.end!==!1,i="",s=0;s<e.length;s++){var o=e[s];if(typeof o=="string")i+=ry(o);else{var l=ry(o.prefix),d="(?:"+o.pattern+")";t.push(o),o.repeat&&(d+="(?:"+l+d+")*"),o.optional?o.partial?d=l+"("+d+")?":d="(?:"+l+"("+d+"))?":d=l+"("+d+")",i+=d}}var u=ry(n.delimiter||"/"),c=i.slice(-u.length)===u;return r||(i=(c?i.slice(0,-u.length):i)+"(?:"+u+"(?=$))?"),a?i+="$":i+=r&&c?"":"(?="+u+"|$)",CI(new RegExp("^"+i,EI(n)),t)}function DM(e,t,n){return Ly(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?r5(e,t):Ly(e)?a5(e,t,n):i5(e,t,n)}var s5=gh.exports;const FM=Em(s5);var Tt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var er=typeof Symbol=="function"&&Symbol.for,TI=er?Symbol.for("react.element"):60103,NI=er?Symbol.for("react.portal"):60106,Zv=er?Symbol.for("react.fragment"):60107,Qv=er?Symbol.for("react.strict_mode"):60108,Jv=er?Symbol.for("react.profiler"):60114,e0=er?Symbol.for("react.provider"):60109,t0=er?Symbol.for("react.context"):60110,_I=er?Symbol.for("react.async_mode"):60111,n0=er?Symbol.for("react.concurrent_mode"):60111,r0=er?Symbol.for("react.forward_ref"):60112,a0=er?Symbol.for("react.suspense"):60113,o5=er?Symbol.for("react.suspense_list"):60120,i0=er?Symbol.for("react.memo"):60115,s0=er?Symbol.for("react.lazy"):60116,l5=er?Symbol.for("react.block"):60121,u5=er?Symbol.for("react.fundamental"):60117,d5=er?Symbol.for("react.responder"):60118,c5=er?Symbol.for("react.scope"):60119;function La(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case TI:switch(e=e.type,e){case _I:case n0:case Zv:case Jv:case Qv:case a0:return e;default:switch(e=e&&e.$$typeof,e){case t0:case r0:case s0:case i0:case e0:return e;default:return t}}case NI:return t}}}function MM(e){return La(e)===n0}Tt.AsyncMode=_I;Tt.ConcurrentMode=n0;Tt.ContextConsumer=t0;Tt.ContextProvider=e0;Tt.Element=TI;Tt.ForwardRef=r0;Tt.Fragment=Zv;Tt.Lazy=s0;Tt.Memo=i0;Tt.Portal=NI;Tt.Profiler=Jv;Tt.StrictMode=Qv;Tt.Suspense=a0;Tt.isAsyncMode=function(e){return MM(e)||La(e)===_I};Tt.isConcurrentMode=MM;Tt.isContextConsumer=function(e){return La(e)===t0};Tt.isContextProvider=function(e){return La(e)===e0};Tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===TI};Tt.isForwardRef=function(e){return La(e)===r0};Tt.isFragment=function(e){return La(e)===Zv};Tt.isLazy=function(e){return La(e)===s0};Tt.isMemo=function(e){return La(e)===i0};Tt.isPortal=function(e){return La(e)===NI};Tt.isProfiler=function(e){return La(e)===Jv};Tt.isStrictMode=function(e){return La(e)===Qv};Tt.isSuspense=function(e){return La(e)===a0};Tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Zv||e===n0||e===Jv||e===Qv||e===a0||e===o5||typeof e=="object"&&e!==null&&(e.$$typeof===s0||e.$$typeof===i0||e.$$typeof===e0||e.$$typeof===t0||e.$$typeof===r0||e.$$typeof===u5||e.$$typeof===d5||e.$$typeof===c5||e.$$typeof===l5)};Tt.typeOf=La;function OM(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var LM={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tr=typeof Symbol=="function"&&Symbol.for,AI=tr?Symbol.for("react.element"):60103,RI=tr?Symbol.for("react.portal"):60106,o0=tr?Symbol.for("react.fragment"):60107,l0=tr?Symbol.for("react.strict_mode"):60108,u0=tr?Symbol.for("react.profiler"):60114,d0=tr?Symbol.for("react.provider"):60109,c0=tr?Symbol.for("react.context"):60110,DI=tr?Symbol.for("react.async_mode"):60111,h0=tr?Symbol.for("react.concurrent_mode"):60111,p0=tr?Symbol.for("react.forward_ref"):60112,f0=tr?Symbol.for("react.suspense"):60113,h5=tr?Symbol.for("react.suspense_list"):60120,m0=tr?Symbol.for("react.memo"):60115,g0=tr?Symbol.for("react.lazy"):60116,p5=tr?Symbol.for("react.block"):60121,f5=tr?Symbol.for("react.fundamental"):60117,m5=tr?Symbol.for("react.responder"):60118,g5=tr?Symbol.for("react.scope"):60119;function Pa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case AI:switch(e=e.type,e){case DI:case h0:case o0:case u0:case l0:case f0:return e;default:switch(e=e&&e.$$typeof,e){case c0:case p0:case g0:case m0:case d0:return e;default:return t}}case RI:return t}}}function PM(e){return Pa(e)===h0}$t.AsyncMode=DI;$t.ConcurrentMode=h0;$t.ContextConsumer=c0;$t.ContextProvider=d0;$t.Element=AI;$t.ForwardRef=p0;$t.Fragment=o0;$t.Lazy=g0;$t.Memo=m0;$t.Portal=RI;$t.Profiler=u0;$t.StrictMode=l0;$t.Suspense=f0;$t.isAsyncMode=function(e){return PM(e)||Pa(e)===DI};$t.isConcurrentMode=PM;$t.isContextConsumer=function(e){return Pa(e)===c0};$t.isContextProvider=function(e){return Pa(e)===d0};$t.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===AI};$t.isForwardRef=function(e){return Pa(e)===p0};$t.isFragment=function(e){return Pa(e)===o0};$t.isLazy=function(e){return Pa(e)===g0};$t.isMemo=function(e){return Pa(e)===m0};$t.isPortal=function(e){return Pa(e)===RI};$t.isProfiler=function(e){return Pa(e)===u0};$t.isStrictMode=function(e){return Pa(e)===l0};$t.isSuspense=function(e){return Pa(e)===f0};$t.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===o0||e===h0||e===u0||e===l0||e===f0||e===h5||typeof e=="object"&&e!==null&&(e.$$typeof===g0||e.$$typeof===m0||e.$$typeof===d0||e.$$typeof===c0||e.$$typeof===p0||e.$$typeof===f5||e.$$typeof===m5||e.$$typeof===g5||e.$$typeof===p5)};$t.typeOf=Pa;LM.exports=$t;var b5=LM.exports,FI=b5,y5={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},v5={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},x5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MI={};MI[FI.ForwardRef]=x5;MI[FI.Memo]=zM;function u_(e){return FI.isMemo(e)?zM:MI[e.$$typeof]||y5}var w5=Object.defineProperty,k5=Object.getOwnPropertyNames,d_=Object.getOwnPropertySymbols,S5=Object.getOwnPropertyDescriptor,I5=Object.getPrototypeOf,c_=Object.prototype;function BM(e,t,n){if(typeof t!="string"){if(c_){var r=I5(t);r&&r!==c_&&BM(e,r,n)}var a=k5(t);d_&&(a=a.concat(d_(t)));for(var i=u_(e),s=u_(t),o=0;o<a.length;++o){var l=a[o];if(!v5[l]&&!(n&&n[l])&&!(s&&s[l])&&!(i&&i[l])){var d=S5(t,l);try{w5(e,l,d)}catch(u){}}}}return e}var $5=BM;const C5=Em($5);var Mw=1073741823,h_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function E5(){var e="__global_unique_id__";return h_[e]=(h_[e]||0)+1}function T5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function N5(e){var t=[];return{on:function(r){t.push(r)},off:function(r){t=t.filter(function(a){return a!==r})},get:function(){return e},set:function(r,a){e=r,t.forEach(function(i){return i(e,a)})}}}function _5(e){return Array.isArray(e)?e[0]:e}function A5(e,t){var n,r,a="__create-react-context-"+E5()+"__",i=function(o){wo(l,o);function l(){for(var u,c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return u=o.call.apply(o,[this].concat(h))||this,u.emitter=N5(u.props.value),u}var d=l.prototype;return d.getChildContext=function(){var c;return c={},c[a]=this.emitter,c},d.componentWillReceiveProps=function(c){if(this.props.value!==c.value){var h=this.props.value,p=c.value,f;T5(h,p)?f=0:(f=typeof t=="function"?t(h,p):Mw,f|=0,f!==0&&this.emitter.set(c.value,f))}},d.render=function(){return this.props.children},l}(oe.Component);i.childContextTypes=(n={},n[a]=t_.object.isRequired,n);var s=function(o){wo(l,o);function l(){for(var u,c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];return u=o.call.apply(o,[this].concat(h))||this,u.observedBits=void 0,u.state={value:u.getValue()},u.onUpdate=function(f,m){var g=u.observedBits|0;g&m&&u.setState({value:u.getValue()})},u}var d=l.prototype;return d.componentWillReceiveProps=function(c){var h=c.observedBits;this.observedBits=h==null?Mw:h},d.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var c=this.props.observedBits;this.observedBits=c==null?Mw:c},d.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},d.getValue=function(){return this.context[a]?this.context[a].get():e},d.render=function(){return _5(this.props.children)(this.state.value)},l}(oe.Component);return s.contextTypes=(r={},r[a]=t_.object,r),{Provider:i,Consumer:s}}var R5=oe.createContext||A5,WM=function(t){var n=R5();return n.displayName=t,n},D5=WM("Router-History"),Wc=WM("Router"),Dm=function(e){wo(t,e),t.computeRootMatch=function(a){return{path:"/",url:"/",params:{},isExact:a==="/"}};function t(r){var a;return a=e.call(this,r)||this,a.state={location:r.history.location},a._isMounted=!1,a._pendingLocation=null,r.staticContext||(a.unlisten=r.history.listen(function(i){a._pendingLocation=i})),a}var n=t.prototype;return n.componentDidMount=function(){var a=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(i){a._isMounted&&a.setState({location:i})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return oe.createElement(Wc.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},oe.createElement(D5.Provider,{children:this.props.children||null,value:this.props.history}))},t}(oe.Component);oe.Component;var F5=function(e){wo(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(a){this.props.onUpdate&&this.props.onUpdate.call(this,this,a)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(oe.Component),Ow={},M5=1e4,p_=0;function O5(e){if(Ow[e])return Ow[e];var t=FM.compile(e);return p_<M5&&(Ow[e]=t,p_++),t}function f_(e,t){return e===void 0&&(e="/"),t===void 0&&(t={}),e==="/"?e:O5(e)(t,{pretty:!0})}function L5(e){var t=e.computedMatch,n=e.to,r=e.push,a=r===void 0?!1:r;return oe.createElement(Wc.Consumer,null,function(i){i||lu(!1);var s=i.history,o=i.staticContext,l=a?s.push:s.replace,d=ra(t?typeof n=="string"?f_(n,t.params):pa({},n,{pathname:f_(n.pathname,t.params)}):n);return o?(l(d),null):oe.createElement(F5,{onMount:function(){l(d)},onUpdate:function(c,h){var p=ra(h.to);WG(p,pa({},d,{key:p.key}))||l(d)},to:n})})}var m_={},P5=1e4,g_=0;function z5(e,t){var n=""+t.end+t.strict+t.sensitive,r=m_[n]||(m_[n]={});if(r[e])return r[e];var a=[],i=FM(e,a,t),s={regexp:i,keys:a};return g_<P5&&(r[e]=s,g_++),s}function Ol(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,i=a===void 0?!1:a,s=n.strict,o=s===void 0?!1:s,l=n.sensitive,d=l===void 0?!1:l,u=[].concat(r);return u.reduce(function(c,h){if(!h&&h!=="")return null;if(c)return c;var p=z5(h,{end:i,strict:o,sensitive:d}),f=p.regexp,m=p.keys,g=f.exec(e);if(!g)return null;var b=g[0],y=g.slice(1),v=e===b;return i&&!v?null:{path:h,url:h==="/"&&b===""?"/":b,isExact:v,params:m.reduce(function(x,w,$){return x[w.name]=y[$],x},{})}},null)}function B5(e){return oe.Children.count(e)===0}var ds=function(e){wo(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.render=function(){var a=this;return oe.createElement(Wc.Consumer,null,function(i){i||lu(!1);var s=a.props.location||i.location,o=a.props.computedMatch?a.props.computedMatch:a.props.path?Ol(s.pathname,a.props):i.match,l=pa({},i,{location:s,match:o}),d=a.props,u=d.children,c=d.component,h=d.render;return Array.isArray(u)&&B5(u)&&(u=null),oe.createElement(Wc.Provider,{value:l},l.match?u?typeof u=="function"?u(l):u:c?oe.createElement(c,l):h?h(l):null:typeof u=="function"?u(l):null)})},t}(oe.Component);function OI(e){return e.charAt(0)==="/"?e:"/"+e}function W5(e,t){return e?pa({},t,{pathname:OI(e)+t.pathname}):t}function V5(e,t){if(!e)return t;var n=OI(e);return t.pathname.indexOf(n)!==0?t:pa({},t,{pathname:t.pathname.substr(n.length)})}function b_(e){return typeof e=="string"?e:Ua(e)}function Lw(e){return function(){lu(!1)}}function y_(){}oe.Component;oe.Component;function U5(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(a){var i=a.wrappedComponentRef,s=OM(a,["wrappedComponentRef"]);return oe.createElement(Wc.Consumer,null,function(o){return o||lu(!1),oe.createElement(e,pa({},s,o,{ref:i}))})};return n.displayName=t,n.WrappedComponent=e,C5(n,e)}oe.useContext;const H5="modulepreload",j5=function(e){return"/"+e},v_={},fi=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=j5(i),i in v_)return;v_[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!r)for(let u=a.length-1;u>=0;u--){const c=a[u];if(c.href===i&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(i,'"]').concat(o)))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":H5,s||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),s)return new Promise((u,c)=>{d.addEventListener("load",u),d.addEventListener("error",()=>c(new Error("Unable to preload CSS for ".concat(i))))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},Jd={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ec,VM,b0,UM=!1,Py=!1,LI=!1,ka=!1,x_=null,lk=!1;const G5={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},q5=e=>{const t=new URL(e,Qn.$resourcesUrl$);return t.origin!==Mm.location.origin?t.href:t.pathname},Ll=(e,t="")=>()=>{},w_="http://www.w3.org/1999/xlink",k_={},K5="http://www.w3.org/2000/svg",X5="http://www.w3.org/1999/xhtml",Y5=e=>e!=null,PI=e=>(e=typeof e,e==="object"||e==="function");function Z5(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const xe=(e,t,...n)=>{let r=null,a=null,i=null,s=!1,o=!1;const l=[],d=c=>{for(let h=0;h<c.length;h++)r=c[h],Array.isArray(r)?d(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!PI(r))&&(r=String(r)),s&&o?l[l.length-1].$text$+=r:l.push(s?zy(null,r):r),o=s)};if(d(n),t){t.key&&(a=t.key),t.name&&(i=t.name);{const c=t.className||t.class;c&&(t.class=typeof c!="object"?c:Object.keys(c).filter(h=>c[h]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,J5);const u=zy(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=a,u.$name$=i,u},zy=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},sn={},Q5=e=>e&&e.$tag$===sn,J5={forEach:(e,t)=>e.map(S_).forEach(t),map:(e,t)=>e.map(S_).map(t).map(e8)},S_=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),e8=e=>{if(typeof e.vtag=="function"){const n=Object.assign({},e.vattrs);return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),xe(e.vtag,n,...e.vchildren||[])}const t=zy(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},t8=e=>eO.map(t=>t(e)).find(t=>!!t),n8=e=>eO.push(e),r8=e=>bh(e).$modeName$,a8=(e,t)=>e!=null&&!PI(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,i8=e=>e,pt=(e,t,n)=>{const r=i8(e);return{emit:a=>s8(r,t,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:a})}},s8=(e,t,n)=>{const r=Qn.ce(t,n);return e.dispatchEvent(r),r},I_=new WeakMap,o8=(e,t,n)=>{let r=Wy.get(e);F8&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,Wy.set(e,r)},l8=(e,t,n,r)=>{var a;let i=HM(t,n);const s=Wy.get(i);if(e=e.nodeType===11?e:ki,s)if(typeof s=="string"){e=e.head||e;let o=I_.get(e),l;if(o||I_.set(e,o=new Set),!o.has(i)){{l=ki.createElement("style"),l.innerHTML=s;const d=(a=Qn.$nonce$)!==null&&a!==void 0?a:Z5(ki);d!=null&&l.setAttribute("nonce",d),e.insertBefore(l,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},u8=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,a=Ll("attachStyles",t.$tagName$),i=l8(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);r&10&&(n["s-sc"]=i,n.classList.add(i+"-h"),r&2&&n.classList.add(i+"-s")),a()},HM=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),$_=(e,t,n,r,a,i)=>{if(n!==r){let s=N_(e,t),o=t.toLowerCase();if(t==="class"){const l=e.classList,d=C_(n),u=C_(r);l.remove(...d.filter(c=>c&&!u.includes(c))),l.add(...u.filter(c=>c&&!d.includes(c)))}else if(t==="style"){for(const l in n)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!n||r[l]!==n[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):N_(Mm,o)?t=o.slice(2):t=o[2]+t.slice(3),n&&Qn.rel(e,t,n,!1),r&&Qn.ael(e,t,r,!1);else{const l=PI(r);if((s||l&&r!==null)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{const u=r==null?"":r;t==="list"?s=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch(u){}let d=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(w_,t):e.removeAttribute(t)):(!s||i&4||a)&&!l&&(r=r===!0?"":r,d?e.setAttributeNS(w_,t,r):e.setAttribute(t,r))}}},d8=/\s/,C_=e=>e?e.split(d8):[],jM=(e,t,n,r)=>{const a=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||k_,s=t.$attrs$||k_;for(r in i)r in s||$_(a,r,i[r],void 0,n,t.$flags$);for(r in s)$_(a,r,i[r],s[r],n,t.$flags$)},By=(e,t,n,r)=>{const a=t.$children$[n];let i=0,s,o,l;if(UM||(LI=!0,a.$tag$==="slot"&&(ec&&r.classList.add(ec+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)s=a.$elm$=ki.createTextNode(a.$text$);else if(a.$flags$&1)s=a.$elm$=ki.createTextNode("");else{if(ka||(ka=a.$tag$==="svg"),s=a.$elm$=ki.createElementNS(ka?K5:X5,a.$flags$&2?"slot-fb":a.$tag$),ka&&a.$tag$==="foreignObject"&&(ka=!1),jM(null,a,ka),Y5(ec)&&s["s-si"]!==ec&&s.classList.add(s["s-si"]=ec),a.$children$)for(i=0;i<a.$children$.length;++i)o=By(e,a,i,s),o&&s.appendChild(o);a.$tag$==="svg"?ka=!1:s.tagName==="foreignObject"&&(ka=!0)}return s["s-hn"]=b0,a.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=VM,s["s-sn"]=a.$name$||"",l=e&&e.$children$&&e.$children$[n],l&&l.$tag$===a.$tag$&&e.$elm$&&em(e.$elm$,!1)),s},em=(e,t)=>{Qn.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const a=n[r];a["s-hn"]!==b0&&a["s-ol"]&&(KM(a).insertBefore(a,zI(a)),a["s-ol"].remove(),a["s-ol"]=void 0,LI=!0),t&&em(a,t)}Qn.$flags$&=-2},GM=(e,t,n,r,a,i)=>{let s=e["s-cr"]&&e["s-cr"].parentNode||e,o;for(s.shadowRoot&&s.tagName===b0&&(s=s.shadowRoot);a<=i;++a)r[a]&&(o=By(null,n,a,e),o&&(r[a].$elm$=o,s.insertBefore(o,zI(t))))},qM=(e,t,n)=>{for(let r=t;r<=n;++r){const a=e[r];if(a){const i=a.$elm$;ZM(a),i&&(Py=!0,i["s-ol"]?i["s-ol"].remove():em(i,!0),i.remove())}}},c8=(e,t,n,r)=>{let a=0,i=0,s=0,o=0,l=t.length-1,d=t[0],u=t[l],c=r.length-1,h=r[0],p=r[c],f,m;for(;a<=l&&i<=c;)if(d==null)d=t[++a];else if(u==null)u=t[--l];else if(h==null)h=r[++i];else if(p==null)p=r[--c];else if(xb(d,h))tc(d,h),d=t[++a],h=r[++i];else if(xb(u,p))tc(u,p),u=t[--l],p=r[--c];else if(xb(d,p))(d.$tag$==="slot"||p.$tag$==="slot")&&em(d.$elm$.parentNode,!1),tc(d,p),e.insertBefore(d.$elm$,u.$elm$.nextSibling),d=t[++a],p=r[--c];else if(xb(u,h))(d.$tag$==="slot"||p.$tag$==="slot")&&em(u.$elm$.parentNode,!1),tc(u,h),e.insertBefore(u.$elm$,d.$elm$),u=t[--l],h=r[++i];else{for(s=-1,o=a;o<=l;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===h.$key$){s=o;break}s>=0?(m=t[s],m.$tag$!==h.$tag$?f=By(t&&t[i],n,s,e):(tc(m,h),t[s]=void 0,f=m.$elm$),h=r[++i]):(f=By(t&&t[i],n,i,e),h=r[++i]),f&&KM(d.$elm$).insertBefore(f,zI(d.$elm$))}a>l?GM(e,r[c+1]==null?null:r[c+1].$elm$,n,r,i,c):i>c&&qM(t,a,l)},xb=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,zI=e=>e&&e["s-ol"]||e,KM=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,tc=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$,i=t.$tag$,s=t.$text$;let o;s===null?(ka=i==="svg"?!0:i==="foreignObject"?!1:ka,i==="slot"||jM(e,t,ka),r!==null&&a!==null?c8(n,r,t,a):a!==null?(e.$text$!==null&&(n.textContent=""),GM(n,null,t,a,0,a.length-1)):r!==null&&qM(r,0,r.length-1),ka&&i==="svg"&&(ka=!1)):(o=n["s-cr"])?o.parentNode.textContent=s:e.$text$!==s&&(n.data=s)},XM=e=>{const t=e.childNodes;let n,r,a,i,s,o;for(r=0,a=t.length;r<a;r++)if(n=t[r],n.nodeType===1){if(n["s-sr"]){for(s=n["s-sn"],n.hidden=!1,i=0;i<a;i++)if(o=t[i].nodeType,t[i]["s-hn"]!==n["s-hn"]||s!==""){if(o===1&&s===t[i].getAttribute("slot")){n.hidden=!0;break}}else if(o===1||o===3&&t[i].textContent.trim()!==""){n.hidden=!0;break}}XM(n)}},mi=[],YM=e=>{let t,n,r,a,i,s,o=0;const l=e.childNodes,d=l.length;for(;o<d;o++){if(t=l[o],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,a=t["s-sn"],s=r.length-1;s>=0;s--)n=r[s],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==t["s-hn"]&&(E_(n,a)?(i=mi.find(u=>u.$nodeToRelocate$===n),Py=!0,n["s-sn"]=n["s-sn"]||a,i?i.$slotRefNode$=t:mi.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&mi.map(u=>{E_(u.$nodeToRelocate$,n["s-sn"])&&(i=mi.find(c=>c.$nodeToRelocate$===n),i&&!u.$slotRefNode$&&(u.$slotRefNode$=i.$slotRefNode$))})):mi.some(u=>u.$nodeToRelocate$===n)||mi.push({$nodeToRelocate$:n}));t.nodeType===1&&YM(t)}},E_=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",ZM=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(ZM)},h8=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||zy(null,null),i=Q5(t)?t:xe(null,null,t);b0=n.tagName,r.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},r.$attrsToReflect$.map(([s,o])=>i.$attrs$[o]=n[s])),i.$tag$=null,i.$flags$|=4,e.$vnode$=i,i.$elm$=a.$elm$=n.shadowRoot||n,ec=n["s-sc"],VM=n["s-cr"],UM=(r.$flags$&1)!==0,Py=!1,tc(a,i);{if(Qn.$flags$|=1,LI){YM(i.$elm$);let s,o,l,d,u,c,h=0;for(;h<mi.length;h++)s=mi[h],o=s.$nodeToRelocate$,o["s-ol"]||(l=ki.createTextNode(""),l["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=l,o));for(h=0;h<mi.length;h++)if(s=mi[h],o=s.$nodeToRelocate$,s.$slotRefNode$){for(d=s.$slotRefNode$.parentNode,u=s.$slotRefNode$.nextSibling,l=o["s-ol"];l=l.previousSibling;)if(c=l["s-nr"],c&&c["s-sn"]===o["s-sn"]&&d===c.parentNode&&(c=c.nextSibling,!c||!c["s-nr"])){u=c;break}(!u&&d!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),d.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}Py&&XM(i.$elm$),Qn.$flags$&=-2,mi.length=0}},p8=(e,t)=>{},BI=(e,t)=>(e.$flags$|=16,p8(e,e.$ancestorComponent$),Ti(()=>f8(e,t))),f8=(e,t)=>{const n=e.$hostElement$,r=Ll("scheduleUpdate",e.$cmpMeta$.$tagName$),a=n;let i;return t?i=Ec(a,"componentWillLoad"):i=Ec(a,"componentWillUpdate"),i=T_(i,()=>Ec(a,"componentWillRender")),r(),T_(i,()=>g8(e,a,t))},T_=(e,t)=>m8(e)?e.then(t):t(),m8=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",g8=async(e,t,n)=>{const r=e.$hostElement$,a=Ll("update",e.$cmpMeta$.$tagName$);r["s-rc"],n&&u8(e);const i=Ll("render",e.$cmpMeta$.$tagName$);b8(e,t,r),i(),a(),y8(e)},b8=(e,t,n)=>{try{x_=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Jd.hasRenderFn||Jd.reflect)&&(Jd.vdomRender||Jd.reflect)&&(Jd.hydrateServerSide||h8(e,t))}catch(o){Fm(o,e.$hostElement$)}return x_=null,null},y8=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Ll("postUpdate",t),a=n;e.$ancestorComponent$,Ec(a,"componentDidRender"),e.$flags$&64?(Ec(a,"componentDidUpdate"),r()):(e.$flags$|=64,Ec(a,"componentDidLoad"),r())},tm=e=>{{const t=bh(e),n=t.$hostElement$.isConnected;return n&&(t.$flags$&18)===2&&BI(t,!1),n}},Ec=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){Fm(r)}},v8=(e,t)=>bh(e).$instanceValues$.get(t),x8=(e,t,n,r)=>{const a=bh(e),i=e,s=a.$instanceValues$.get(t),o=a.$flags$,l=i;n=a8(n,r.$members$[t][0]);const d=Number.isNaN(s)&&Number.isNaN(n);if(n!==s&&!d){a.$instanceValues$.set(t,n);{if(r.$watchers$&&o&128){const c=r.$watchers$[t];c&&c.map(h=>{try{l[h](n,s,t)}catch(p){Fm(p,i)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,s,t)===!1)return;BI(a,!1)}}}},w8=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),a=e.prototype;r.map(([i,[s]])=>{(s&31||s&32)&&Object.defineProperty(a,i,{get(){return v8(this,i)},set(o){x8(this,i,o,t)},configurable:!0,enumerable:!0})});{const i=new Map;a.attributeChangedCallback=function(s,o,l){Qn.jmp(()=>{const d=i.get(s);if(this.hasOwnProperty(d))l=this[d],delete this[d];else if(a.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==l)return;this[d]=l===null&&typeof this[d]=="boolean"?!1:l})},e.observedAttributes=r.filter(([s,o])=>o[0]&15).map(([s,o])=>{const l=o[1]||s;return i.set(l,s),o[0]&512&&t.$attrsToReflect$.push([s,l]),l})}}return e},k8=async(e,t,n,r,a)=>{if(!(t.$flags$&32)&&(t.$flags$|=32,a=e.constructor,customElements.whenDefined(n.$tagName$).then(()=>t.$flags$|=128),a.style)){let s=a.style;typeof s!="string"&&(s=s[t.$modeName$=t8(e)]);const o=HM(n,t.$modeName$);if(!Wy.has(o)){const l=Ll("registerStyles",n.$tagName$);o8(o,s,!!(n.$flags$&1)),l()}}t.$ancestorComponent$,(()=>BI(t,!0))()},S8=e=>{},I8=e=>{if(!(Qn.$flags$&1)){const t=bh(e),n=t.$cmpMeta$,r=Ll("connectedCallback",n.$tagName$);t.$flags$&1?(QM(e,t,n.$listeners$),S8(t.$lazyInstance$)):(t.$flags$|=1,n.$flags$&12&&$8(e),n.$members$&&Object.entries(n.$members$).map(([a,[i]])=>{if(i&31&&e.hasOwnProperty(a)){const s=e[a];delete e[a],e[a]=s}}),k8(e,t,n)),r()}},$8=e=>{const t=e["s-cr"]=ki.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},C8=e=>{if(!(Qn.$flags$&1)){const t=bh(e);t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0)}},nn=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){_8(this,n)},connectedCallback(){I8(this),r&&r.call(this)},disconnectedCallback(){C8(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),e.is=n.$tagName$,w8(e,n)},QM=(e,t,n,r)=>{n&&n.map(([a,i,s])=>{const o=T8(e,a),l=E8(t,s),d=N8(a);Qn.ael(o,i,l,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Qn.rel(o,i,l,d))})},E8=(e,t)=>n=>{try{Jd.lazyLoad||e.$hostElement$[t](n)}catch(r){Fm(r)}},T8=(e,t)=>t&4?ki:t&8?Mm:t&16?ki.body:e,N8=e=>R8?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,JM=new WeakMap,bh=e=>JM.get(e),_8=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return QM(e,n,t.$listeners$),JM.set(e,n)},N_=(e,t)=>t in e,Fm=(e,t)=>(0,console.error)(e,t),Wy=new Map,eO=[],Mm=typeof window<"u"?window:{},ki=Mm.document||{head:{}},rn=Mm.HTMLElement||class{},Qn={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},A8=e=>{Object.assign(Qn,e)},R8=(()=>{let e=!1;try{ki.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(t){}return e})(),D8=e=>Promise.resolve(e),F8=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(e){}return!1})(),uk=[],tO=[],nO=(e,t)=>n=>{e.push(n),lk||(lk=!0,t&&Qn.$flags$&4?M8(dk):Qn.raf(dk))},__=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Fm(n)}e.length=0},dk=()=>{__(uk),__(tO),(lk=uk.length>0)&&Qn.raf(dk)},M8=e=>D8().then(e),nm=nO(uk,!1),Ti=nO(tO,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lt=typeof window<"u"?window:void 0,Pw=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Vc=(e,t)=>{e.componentOnReady?e.componentOnReady().then(n=>t(n)):Or(()=>t(e))},rO=e=>e.componentOnReady!==void 0,y0=(e,t=[])=>{const n={};return t.forEach(r=>{e.hasAttribute(r)&&(e.getAttribute(r)!==null&&(n[r]=e.getAttribute(r)),e.removeAttribute(r))}),n},O8=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],WI=(e,t)=>{let n=O8;return t&&t.length>0&&(n=n.filter(r=>!t.includes(r))),y0(e,n)},ck=(e,t,n,r)=>{var a;if(typeof window<"u"){const i=window,s=(a=i==null?void 0:i.Ionic)===null||a===void 0?void 0:a.config;if(s){const o=s.get("_ael");if(o)return o(e,t,n,r);if(s._ael)return s._ael(e,t,n,r)}}return e.addEventListener(t,n,r)},hk=(e,t,n,r)=>{var a;if(typeof window<"u"){const i=window,s=(a=i==null?void 0:i.Ionic)===null||a===void 0?void 0:a.config;if(s){const o=s.get("_rel");if(o)return o(e,t,n,r);if(s._rel)return s._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)},ko=(e,t=e)=>e.shadowRoot||t,Or=e=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(e):typeof requestAnimationFrame=="function"?requestAnimationFrame(e):setTimeout(e),L8=e=>!!e.shadowRoot&&!!e.attachShadow,P8=e=>{if(e.focus(),e.classList.contains("ion-focusable")){const t=e.closest("ion-app");t&&t.setFocus([e])}},Uc=(e,t,n)=>Math.max(e,Math.min(t,n)),Zr=(e,t)=>{if(!e){const n="ASSERT: "+t;console.error(n);debugger;throw new Error(n)}},C3e=e=>e.timeStamp||Date.now(),E3e=e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const n=t[0];return{x:n.clientX,y:n.clientY}}if(e.pageX!==void 0)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}},aO=(e,t)=>{if(e!=null||(e={}),t!=null||(t={}),e===t)return!0;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!(r in t)||e[r]!==t[r])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let zw;const z8=e=>(e.forEach(t=>{for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];if(n==="easing"){const a="animation-timing-function";t[a]=r,delete t[n]}else{const a=B8(n);a!==n&&(t[a]=r,delete t[n])}}}),e),B8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VI=e=>{if(zw===void 0){const t=e.style.animationName!==void 0,n=e.style.webkitAnimationName!==void 0;zw=!t&&n?"-webkit-":""}return zw},jt=(e,t,n)=>{const r=t.startsWith("animation")?VI(e):"";e.style.setProperty(r+t,n)},ui=(e,t)=>{const n=t.startsWith("animation")?VI(e):"";e.style.removeProperty(n+t)},W8=(e,t)=>{let n;const r={passive:!0},a=()=>{n&&n()},i=s=>{e===s.target&&(a(),t(s))};return e&&(e.addEventListener("webkitAnimationEnd",i,r),e.addEventListener("animationend",i,r),n=()=>{e.removeEventListener("webkitAnimationEnd",i,r),e.removeEventListener("animationend",i,r)}),a},V8=(e=[])=>e.map(t=>{const n=t.offset,r=[];for(const a in t)t.hasOwnProperty(a)&&a!=="offset"&&r.push("".concat(a,": ").concat(t[a],";"));return"".concat(n*100,"% { ").concat(r.join(" ")," }")}).join(" "),A_=[],U8=e=>{let t=A_.indexOf(e);return t<0&&(t=A_.push(e)-1),"ion-animation-".concat(t)},H8=e=>{const t=e.getRootNode!==void 0?e.getRootNode():e;return t.head||t},j8=(e,t,n)=>{var r;const a=H8(n),i=VI(n),s=a.querySelector("#"+e);if(s)return s;const o=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement("style");return o.id=e,o.textContent="@".concat(i,"keyframes ").concat(e," { ").concat(t," } @").concat(i,"keyframes ").concat(e,"-alt { ").concat(t," }"),a.appendChild(o),o},wb=(e=[],t)=>{if(t!==void 0){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},fn=e=>{let t,n,r,a,i,s,o=[],l=[],d=[],u=!1,c,h={},p=[],f=[],m={},g=0,b=!1,y=!1,v,x,w,$,C=!0,E=!1,A=!0,R,N,I=!1;const F=e,L=[],P=[],H=[],X=[],M=[],B=[],V=[],K=[],Q=[],ee=[],ie=typeof AnimationEffect=="function"||lt!==void 0&&typeof lt.AnimationEffect=="function",se=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&ie,ge=100,fe=()=>ee,pe=te=>(X.forEach(me=>{me.destroy(te)}),Ne(te),H.length=0,X.length=0,o.length=0,ct(),u=!1,A=!0,N),Ne=te=>{Ze(),te&&Je()},De=()=>{b=!1,y=!1,A=!0,x=void 0,w=void 0,$=void 0,g=0,E=!1,C=!0,I=!1},Ve=()=>g!==0&&!I,Le=(te,me)=>((me!=null&&me.oneTimeCallback?P:L).push({c:te,o:me}),N),ct=()=>(L.length=0,P.length=0,N),Ze=()=>{if(se)ee.forEach(te=>{te.cancel()}),ee.length=0;else{const te=H.slice();Or(()=>{te.forEach(me=>{ui(me,"animation-name"),ui(me,"animation-duration"),ui(me,"animation-timing-function"),ui(me,"animation-iteration-count"),ui(me,"animation-delay"),ui(me,"animation-play-state"),ui(me,"animation-fill-mode"),ui(me,"animation-direction")})})}},Je=()=>{M.forEach(te=>{te!=null&&te.parentNode&&te.parentNode.removeChild(te)}),M.length=0},Oe=te=>(B.push(te),N),at=te=>(V.push(te),N),yt=te=>(K.push(te),N),pr=te=>(Q.push(te),N),Lt=te=>(l=wb(l,te),N),rr=te=>(d=wb(d,te),N),vn=(te={})=>(h=te,N),ar=(te=[])=>{for(const me of te)h[me]="";return N},Kr=te=>(p=wb(p,te),N),fr=te=>(f=wb(f,te),N),ir=(te={})=>(m=te,N),xn=(te=[])=>{for(const me of te)m[me]="";return N},An=()=>i!==void 0?i:c?c.getFill():"both",Fr=()=>x!==void 0?x:s!==void 0?s:c?c.getDirection():"normal",ai=()=>b?"linear":r!==void 0?r:c?c.getEasing():"linear",un=()=>y?0:w!==void 0?w:n!==void 0?n:c?c.getDuration():0,Xr=()=>a!==void 0?a:c?c.getIterations():1,sr=()=>$!==void 0?$:t!==void 0?t:c?c.getDelay():0,Fi=()=>o,wn=te=>(s=te,Ft(!0),N),Wd=te=>(i=te,Ft(!0),N),Vd=te=>(t=te,Ft(!0),N),Ud=te=>(r=te,Ft(!0),N),Hd=te=>(!se&&te===0&&(te=1),n=te,Ft(!0),N),ii=te=>(a=te,Ft(!0),N),Bs=te=>(c=te,N),jd=te=>{if(te!=null)if(te.nodeType===1)H.push(te);else if(te.length>=0)for(let me=0;me<te.length;me++)H.push(te[me]);else console.error("Invalid addElement value");return N},os=te=>{if(te!=null)if(Array.isArray(te))for(const me of te)me.parent(N),X.push(me);else te.parent(N),X.push(te);return N},ls=te=>{const me=o!==te;return o=te,me&&Gd(o),N},Gd=te=>{se?fe().forEach(me=>{if(me.effect.setKeyframes)me.effect.setKeyframes(te);else{const _e=new KeyframeEffect(me.effect.target,te,me.effect.getTiming());me.effect=_e}}):ve()},ae=()=>{B.forEach(dn=>dn()),V.forEach(dn=>dn());const te=l,me=d,_e=h;H.forEach(dn=>{const Rn=dn.classList;te.forEach(Dn=>Rn.add(Dn)),me.forEach(Dn=>Rn.remove(Dn));for(const Dn in _e)_e.hasOwnProperty(Dn)&&jt(dn,Dn,_e[Dn])})},ue=()=>{Ws(),K.forEach(Rn=>Rn()),Q.forEach(Rn=>Rn());const te=C?1:0,me=p,_e=f,dn=m;H.forEach(Rn=>{const Dn=Rn.classList;me.forEach(oi=>Dn.add(oi)),_e.forEach(oi=>Dn.remove(oi));for(const oi in dn)dn.hasOwnProperty(oi)&&jt(Rn,oi,dn[oi])}),L.forEach(Rn=>Rn.c(te,N)),P.forEach(Rn=>Rn.c(te,N)),P.length=0,A=!0,C&&(E=!0),C=!0},Ee=()=>{g!==0&&(g--,g===0&&(ue(),c&&c.animationFinish()))},ve=(te=!0)=>{Je();const me=z8(o);H.forEach(_e=>{if(me.length>0){const dn=V8(me);R=e!==void 0?e:U8(dn);const Rn=j8(R,dn,_e);M.push(Rn),jt(_e,"animation-duration","".concat(un(),"ms")),jt(_e,"animation-timing-function",ai()),jt(_e,"animation-delay","".concat(sr(),"ms")),jt(_e,"animation-fill-mode",An()),jt(_e,"animation-direction",Fr());const Dn=Xr()===1/0?"infinite":Xr().toString();jt(_e,"animation-iteration-count",Dn),jt(_e,"animation-play-state","paused"),te&&jt(_e,"animation-name","".concat(Rn.id,"-alt")),Or(()=>{jt(_e,"animation-name",Rn.id||null)})}})},vt=()=>{H.forEach(te=>{const me=te.animate(o,{id:F,delay:sr(),duration:un(),easing:ai(),iterations:Xr(),fill:An(),direction:Fr()});me.pause(),ee.push(me)}),ee.length>0&&(ee[0].onfinish=()=>{Ee()})},Ct=(te=!0)=>{ae(),o.length>0&&(se?vt():ve(te)),u=!0},Pe=te=>{if(te=Math.min(Math.max(te,0),.9999),se)ee.forEach(me=>{me.currentTime=me.effect.getComputedTiming().delay+un()*te,me.pause()});else{const me="-".concat(un()*te,"ms");H.forEach(_e=>{o.length>0&&(jt(_e,"animation-delay",me),jt(_e,"animation-play-state","paused"))})}},ze=te=>{ee.forEach(me=>{me.effect.updateTiming({delay:sr(),duration:un(),easing:ai(),iterations:Xr(),fill:An(),direction:Fr()})}),te!==void 0&&Pe(te)},Ut=(te=!0,me)=>{Or(()=>{H.forEach(_e=>{jt(_e,"animation-name",R||null),jt(_e,"animation-duration","".concat(un(),"ms")),jt(_e,"animation-timing-function",ai()),jt(_e,"animation-delay",me!==void 0?"-".concat(me*un(),"ms"):"".concat(sr(),"ms")),jt(_e,"animation-fill-mode",An()||null),jt(_e,"animation-direction",Fr()||null);const dn=Xr()===1/0?"infinite":Xr().toString();jt(_e,"animation-iteration-count",dn),te&&jt(_e,"animation-name","".concat(R,"-alt")),Or(()=>{jt(_e,"animation-name",R||null)})})})},Ft=(te=!1,me=!0,_e)=>(te&&X.forEach(dn=>{dn.update(te,me,_e)}),se?ze(_e):Ut(me,_e),N),si=(te=!1,me)=>(X.forEach(_e=>{_e.progressStart(te,me)}),rl(),b=te,u||Ct(),Ft(!1,!0,me),N),qd=te=>(X.forEach(me=>{me.progressStep(te)}),Pe(te),N),nl=(te,me,_e)=>(b=!1,X.forEach(dn=>{dn.progressEnd(te,me,_e)}),_e!==void 0&&(w=_e),E=!1,C=!0,te===0?(x=Fr()==="reverse"?"normal":"reverse",x==="reverse"&&(C=!1),se?(Ft(),Pe(1-me)):($=(1-me)*un()*-1,Ft(!1,!1))):te===1&&(se?(Ft(),Pe(me)):($=me*un()*-1,Ft(!1,!1))),te!==void 0&&(Le(()=>{w=void 0,x=void 0,$=void 0},{oneTimeCallback:!0}),c||Kg()),N),rl=()=>{u&&(se?ee.forEach(te=>{te.pause()}):H.forEach(te=>{jt(te,"animation-play-state","paused")}),I=!0)},jn=()=>(X.forEach(te=>{te.pause()}),rl(),N),Mi=()=>{v=void 0,Ee()},Ws=()=>{v&&clearTimeout(v)},Jx=()=>{if(Ws(),Or(()=>{H.forEach(te=>{o.length>0&&jt(te,"animation-play-state","running")})}),o.length===0||H.length===0)Ee();else{const te=sr()||0,me=un()||0,_e=Xr()||1;isFinite(_e)&&(v=setTimeout(Mi,te+me*_e+ge)),W8(H[0],()=>{Ws(),Or(()=>{Up(),Or(Ee)})})}},Up=()=>{H.forEach(te=>{ui(te,"animation-duration"),ui(te,"animation-delay"),ui(te,"animation-play-state")})},ew=()=>{ee.forEach(te=>{te.play()}),(o.length===0||H.length===0)&&Ee()},tw=()=>{se?(Pe(0),ze()):Ut()},Kg=te=>new Promise(me=>{te!=null&&te.sync&&(y=!0,Le(()=>y=!1,{oneTimeCallback:!0})),u||Ct(),E&&(tw(),E=!1),A&&(g=X.length+1,A=!1),Le(()=>me(),{oneTimeCallback:!0}),X.forEach(_e=>{_e.play()}),se?ew():Jx(),I=!1}),al=()=>{X.forEach(te=>{te.stop()}),u&&(Ze(),u=!1),De()},Xg=(te,me)=>{const _e=o[0];return _e!==void 0&&(_e.offset===void 0||_e.offset===0)?_e[te]=me:o=[{offset:0,[te]:me},...o],N};return N={parentAnimation:c,elements:H,childAnimations:X,id:F,animationFinish:Ee,from:Xg,to:(te,me)=>{const _e=o[o.length-1];return _e!==void 0&&(_e.offset===void 0||_e.offset===1)?_e[te]=me:o=[...o,{offset:1,[te]:me}],N},fromTo:(te,me,_e)=>Xg(te,me).to(te,_e),parent:Bs,play:Kg,pause:jn,stop:al,destroy:pe,keyframes:ls,addAnimation:os,addElement:jd,update:Ft,fill:Wd,direction:wn,iterations:ii,duration:Hd,easing:Ud,delay:Vd,getWebAnimations:fe,getKeyframes:Fi,getFill:An,getDirection:Fr,getDelay:sr,getIterations:Xr,getEasing:ai,getDuration:un,afterAddRead:yt,afterAddWrite:pr,afterClearStyles:xn,afterStyles:ir,afterRemoveClass:fr,afterAddClass:Kr,beforeAddRead:Oe,beforeAddWrite:at,beforeClearStyles:ar,beforeStyles:vn,beforeRemoveClass:rr,beforeAddClass:Lt,onFinish:Le,isRunning:Ve,progressStart:si,progressStep:qd,progressEnd:nl}},G8="ionViewWillEnter",q8="ionViewDidEnter",iO="ionViewWillLeave",sO="ionViewDidLeave",Bw="ionViewWillUnload",K8=()=>fi(()=>import("./ios.transition-792bfe91.js"),[]),X8=()=>fi(()=>import("./md.transition-8b4b0dca.js"),[]),oO=e=>new Promise((t,n)=>{Ti(()=>{Y8(e),Z8(e).then(r=>{r.animation&&r.animation.destroy(),R_(e),t(r)},r=>{R_(e),n(r)})})}),Y8=e=>{const t=e.enteringEl,n=e.leavingEl;aq(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),pk(t,!1),t.style.setProperty("pointer-events","none"),n&&(pk(n,!1),n.style.setProperty("pointer-events","none"))},Z8=async e=>{const t=await Q8(e);return t&&G5.isBrowser?J8(t,e):eq(e)},R_=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),n!==void 0&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},Q8=async e=>!e.leavingEl||!e.animated||e.duration===0?void 0:e.animationBuilder?e.animationBuilder:e.mode==="ios"?(await K8()).iosTransitionAnimation:(await X8()).mdTransitionAnimation,J8=async(e,t)=>{await lO(t,!0);const n=e(t.baseEl,t);uO(t.enteringEl,t.leavingEl);const r=await nq(n,t);return t.progressCallback&&t.progressCallback(void 0),r&&dO(t.enteringEl,t.leavingEl),{hasCompleted:r,animation:n}},eq=async e=>{const t=e.enteringEl,n=e.leavingEl;return await lO(e,!1),uO(t,n),dO(t,n),{hasCompleted:!0}},lO=async(e,t)=>{(e.deepWait!==void 0?e.deepWait:t)&&await Promise.all([Vy(e.enteringEl),Vy(e.leavingEl)]),await tq(e.viewIsReady,e.enteringEl)},tq=async(e,t)=>{e&&await e(t)},nq=(e,t)=>{const n=t.progressCallback,r=new Promise(a=>{e.onFinish(i=>a(i===1))});return n?(e.progressStart(!0),n(e)):e.play(),r},uO=(e,t)=>{bs(t,iO),bs(e,G8)},dO=(e,t)=>{bs(e,q8),bs(t,sO)},bs=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},rq=()=>new Promise(e=>Or(()=>Or(()=>e()))),Vy=async e=>{const t=e;if(t){if(t.componentOnReady!=null){if(await t.componentOnReady()!=null)return}else if(t.__registerHost!=null){await new Promise(r=>Or(r));return}await Promise.all(Array.from(t.children).map(Vy))}},pk=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},aq=(e,t,n)=>{e!==void 0&&(e.style.zIndex=n==="back"?"99":"101"),t!==void 0&&(t.style.zIndex="100")},T3e=e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Hc=(e,t,n,r,a)=>sq(e[1],t[1],n[1],r[1],a).map(i=>iq(e[0],t[0],n[0],r[0],i)),iq=(e,t,n,r,a)=>{const i=3*t*Math.pow(a-1,2),s=-3*n*a+3*n+r*a,o=e*Math.pow(a-1,3);return a*(i+a*s)-o},sq=(e,t,n,r,a)=>(e-=a,t-=a,n-=a,r-=a,lq(r-3*n+3*t-e,3*n-6*t+3*e,3*t-3*e,e).filter(s=>s>=0&&s<=1)),oq=(e,t,n)=>{const r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]},lq=(e,t,n,r)=>{if(e===0)return oq(t,n,r);t/=e,n/=e,r/=e;const a=(3*n-t*t)/3,i=(2*t*t*t-9*t*n+27*r)/27;if(a===0)return[Math.pow(-i,1/3)];if(i===0)return[Math.sqrt(-a),-Math.sqrt(-a)];const s=Math.pow(i/2,2)+Math.pow(a/3,3);if(s===0)return[Math.pow(i/2,1/2)-t/3];if(s>0)return[Math.pow(-(i/2)+Math.sqrt(s),1/3)-Math.pow(i/2+Math.sqrt(s),1/3)-t/3];const o=Math.sqrt(Math.pow(-(a/3),3)),l=Math.acos(-(i/(2*Math.sqrt(Math.pow(-(a/3),3))))),d=2*Math.pow(o,1/3);return[d*Math.cos(l/3)-t/3,d*Math.cos((l+2*Math.PI)/3)-t/3,d*Math.cos((l+4*Math.PI)/3)-t/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class uq{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(t){var n;return new dq(this,this.newID(),t.name,(n=t.priority)!==null&&n!==void 0?n:0,!!t.disableScroll)}createBlocker(t={}){return new cq(this,this.newID(),t.disable,!!t.disableScroll)}start(t,n,r){return this.canStart(t)?(this.requestedStart.set(n,r),!0):(this.requestedStart.delete(n),!1)}capture(t,n,r){if(!this.start(t,n,r))return!1;const a=this.requestedStart;let i=-1e4;if(a.forEach(s=>{i=Math.max(i,s)}),i===r){this.capturedId=n,a.clear();const s=new CustomEvent("ionGestureCaptured",{detail:{gestureName:t}});return document.dispatchEvent(s),!0}return a.delete(n),!1}release(t){this.requestedStart.delete(t),this.capturedId===t&&(this.capturedId=void 0)}disableGesture(t,n){let r=this.disabledGestures.get(t);r===void 0&&(r=new Set,this.disabledGestures.set(t,r)),r.add(n)}enableGesture(t,n){const r=this.disabledGestures.get(t);r!==void 0&&r.delete(n)}disableScroll(t){this.disabledScroll.add(t),this.disabledScroll.size===1&&document.body.classList.add(D_)}enableScroll(t){this.disabledScroll.delete(t),this.disabledScroll.size===0&&document.body.classList.remove(D_)}canStart(t){return!(this.capturedId!==void 0||this.isDisabled(t))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(t){const n=this.disabledGestures.get(t);return!!(n&&n.size>0)}newID(){return this.gestureId++,this.gestureId}}class dq{constructor(t,n,r,a,i){this.id=n,this.name=r,this.disableScroll=i,this.priority=a*1e6+n,this.ctrl=t}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class cq{constructor(t,n,r,a){this.id=n,this.disable=r,this.disableScroll=a,this.ctrl=t}block(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.disableGesture(t,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.enableGesture(t,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const D_="backdrop-no-scroll",UI=new uq;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const il=(e,t,n,r)=>{const a=hq(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let i,s;return e.__zone_symbol__addEventListener?(i="__zone_symbol__addEventListener",s="__zone_symbol__removeEventListener"):(i="addEventListener",s="removeEventListener"),e[i](t,n,a),()=>{e[s](t,n,a)}},hq=e=>{if(kb===void 0)try{const t=Object.defineProperty({},"passive",{get:()=>{kb=!0}});e.addEventListener("optsTest",()=>{},t)}catch(t){kb=!1}return!!kb};let kb;const pq=2e3,fq=(e,t,n,r,a)=>{let i,s,o,l,d,u,c,h=0;const p=$=>{h=Date.now()+pq,t($)&&(!s&&n&&(s=il(e,"touchmove",n,a)),o||(o=il($.target,"touchend",m,a)),l||(l=il($.target,"touchcancel",m,a)))},f=$=>{h>Date.now()||t($)&&(!u&&n&&(u=il(F_(e),"mousemove",n,a)),c||(c=il(F_(e),"mouseup",g,a)))},m=$=>{b(),r&&r($)},g=$=>{y(),r&&r($)},b=()=>{s&&s(),o&&o(),l&&l(),s=o=l=void 0},y=()=>{u&&u(),c&&c(),u=c=void 0},v=()=>{b(),y()},x=($=!0)=>{$?(i||(i=il(e,"touchstart",p,a)),d||(d=il(e,"mousedown",f,a))):(i&&i(),d&&d(),i=d=void 0,v())};return{enable:x,stop:v,destroy:()=>{x(!1),r=n=t=void 0}}},F_=e=>e instanceof Document?e:e.ownerDocument,mq=(e,t,n)=>{const r=n*(Math.PI/180),a=e==="x",i=Math.cos(r),s=t*t;let o=0,l=0,d=!1,u=0;return{start(c,h){o=c,l=h,u=0,d=!0},detect(c,h){if(!d)return!1;const p=c-o,f=h-l,m=p*p+f*f;if(m<s)return!1;const g=Math.sqrt(m),b=(a?p:f)/g;return b>i?u=1:b<-i?u=-1:u=0,d=!1,!0},isGesture(){return u!==0},getDirection(){return u}}},HI=e=>{let t=!1,n=!1,r=!0,a=!1;const i=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),s=i.canStart,o=i.onWillStart,l=i.onStart,d=i.onEnd,u=i.notCaptured,c=i.onMove,h=i.threshold,p=i.passive,f=i.blurOnStart,m={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},g=mq(i.direction,i.threshold,i.maxAngle),b=UI.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),y=I=>{const F=hO(I);return n||!r||(cO(I,m),m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime=F,m.velocityX=m.velocityY=m.deltaX=m.deltaY=0,m.event=I,s&&s(m)===!1)||(b.release(),!b.start())?!1:(n=!0,h===0?w():(g.start(m.startX,m.startY),!0))},v=I=>{if(t){!a&&r&&(a=!0,Ww(m,I),requestAnimationFrame(x));return}Ww(m,I),g.detect(m.currentX,m.currentY)&&(!g.isGesture()||!w())&&N()},x=()=>{t&&(a=!1,c&&c(m))},w=()=>b.capture()?(t=!0,r=!1,m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime,o?o(m).then(C):C(),!0):!1,$=()=>{if(typeof document<"u"){const I=document.activeElement;I!=null&&I.blur&&I.blur()}},C=()=>{f&&$(),l&&l(m),r=!0},E=()=>{t=!1,n=!1,a=!1,r=!0,b.release()},A=I=>{const F=t,L=r;if(E(),!!L){if(Ww(m,I),F){d&&d(m);return}u&&u(m)}},R=fq(i.el,y,v,A,{capture:!1,passive:p}),N=()=>{E(),R.stop(),u&&u(m)};return{enable(I=!0){I||(t&&A(void 0),E()),R.enable(I)},destroy(){b.destroy(),R.destroy()}}},Ww=(e,t)=>{if(!t)return;const n=e.currentX,r=e.currentY,a=e.currentTime;cO(t,e);const i=e.currentX,s=e.currentY,l=(e.currentTime=hO(t))-a;if(l>0&&l<100){const d=(i-n)/l,u=(s-r)/l;e.velocityX=d*.7+e.velocityX*.3,e.velocityY=u*.7+e.velocityY*.3}e.deltaX=i-e.startX,e.deltaY=s-e.startY,e.event=t},cO=(e,t)=>{let n=0,r=0;if(e){const a=e.changedTouches;if(a&&a.length>0){const i=a[0];n=i.clientX,r=i.clientY}else e.pageX!==void 0&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},hO=e=>e.timeStamp||Date.now(),gq=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:UI,createGesture:HI},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class bq{constructor(){this.m=new Map}reset(t){this.m=new Map(Object.entries(t))}get(t,n){const r=this.m.get(t);return r!==void 0?r:n}getBoolean(t,n=!1){const r=this.m.get(t);return r===void 0?n:typeof r=="string"?r==="true":!!r}getNumber(t,n){const r=parseFloat(this.m.get(t));return isNaN(r)?n!==void 0?n:NaN:r}set(t,n){this.m.set(t,n)}}const ft=new bq,yq=e=>{try{const t=e.sessionStorage.getItem(pO);return t!==null?JSON.parse(t):{}}catch(t){return{}}},vq=(e,t)=>{try{e.sessionStorage.setItem(pO,JSON.stringify(t))}catch(n){return}},xq=e=>{const t={};return e.location.search.slice(1).split("&").map(n=>n.split("=")).map(([n,r])=>[decodeURIComponent(n),decodeURIComponent(r)]).filter(([n])=>wq(n,M_)).map(([n,r])=>[n.slice(M_.length),r]).forEach(([n,r])=>{t[n]=r}),t},wq=(e,t)=>e.substr(0,t.length)===t,M_="ionic:",pO="ionic-persist-config",kq=e=>fO(e),to=(e,t)=>(typeof e=="string"&&(t=e,e=void 0),kq(e).includes(t)),fO=(e=window)=>{if(typeof e>"u")return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return t==null&&(t=e.Ionic.platforms=Sq(e),t.forEach(n=>e.document.documentElement.classList.add("plt-".concat(n)))),t},Sq=e=>{const t=ft.get("platform");return Object.keys(O_).filter(n=>{const r=t==null?void 0:t[n];return typeof r=="function"?r(e):O_[n](e)})},Iq=e=>v0(e)&&!gO(e),jI=e=>!!(Pl(e,/iPad/i)||Pl(e,/Macintosh/i)&&v0(e)),$q=e=>Pl(e,/iPhone/i),Cq=e=>Pl(e,/iPhone|iPod/i)||jI(e),mO=e=>Pl(e,/android|sink/i),Eq=e=>mO(e)&&!Pl(e,/mobile/i),Tq=e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return r>390&&r<520&&a>620&&a<800},Nq=e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return jI(e)||Eq(e)||r>460&&r<820&&a>780&&a<1400},v0=e=>Dq(e,"(any-pointer:coarse)"),_q=e=>!v0(e),gO=e=>bO(e)||yO(e),bO=e=>!!(e.cordova||e.phonegap||e.PhoneGap),yO=e=>{const t=e.Capacitor;return!!(t!=null&&t.isNative)},Aq=e=>Pl(e,/electron/i),Rq=e=>{var t;return!!(!((t=e.matchMedia)===null||t===void 0)&&t.call(e,"(display-mode: standalone)").matches||e.navigator.standalone)},Pl=(e,t)=>t.test(e.navigator.userAgent),Dq=(e,t)=>{var n;return(n=e.matchMedia)===null||n===void 0?void 0:n.call(e,t).matches},O_={ipad:jI,iphone:$q,ios:Cq,android:mO,phablet:Tq,tablet:Nq,cordova:bO,capacitor:yO,electron:Aq,pwa:Rq,mobile:v0,mobileweb:Iq,desktop:_q,hybrid:gO};let nc;const ht=e=>e&&r8(e)||nc,Fq=(e={})=>{if(typeof window>"u")return;const t=window.document,n=window,r=n.Ionic=n.Ionic||{},a={};e._ael&&(a.ael=e._ael),e._rel&&(a.rel=e._rel),e._ce&&(a.ce=e._ce),A8(a);const i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},yq(n)),{persistConfig:!1}),r.config),xq(n)),e);ft.reset(i),ft.getBoolean("persistConfig")&&vq(n,i),fO(n),r.config=ft,r.mode=nc=ft.get("mode",t.documentElement.getAttribute("mode")||(to(n,"ios")?"ios":"md")),ft.set("mode",nc),t.documentElement.setAttribute("mode",nc),t.documentElement.classList.add(nc),ft.getBoolean("_testing")&&ft.set("animated",!1);const s=l=>{var d;return(d=l.tagName)===null||d===void 0?void 0:d.startsWith("ION-")},o=l=>["ios","md"].includes(l);n8(l=>{for(;l;){const d=l.mode||l.getAttribute("mode");if(d){if(o(d))return d;s(l)&&console.warn('Invalid ionic mode: "'+d+'", expected: "ios" or "md"')}l=l.parentElement}return nc})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mq=()=>{document.addEventListener("backbutton",()=>{})},Oq=()=>{const e=document;let t=!1;e.addEventListener("backbutton",()=>{if(t)return;let n=0,r=[];const a=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(o,l){r.push({priority:o,handler:l,id:n++})}}});e.dispatchEvent(a);const i=async o=>{try{if(o!=null&&o.handler){const l=o.handler(s);l!=null&&await l}}catch(l){console.error(l)}},s=()=>{if(r.length>0){let o={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};r.forEach(l=>{l.priority>=o.priority&&(o=l)}),t=!0,r=r.filter(l=>l.id!==o.id),i(o).then(()=>t=!1)}};s()})},vO=100,Lq=99,Pq=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:Lq,OVERLAY_BACK_BUTTON_PRIORITY:vO,blockHardwareBackButton:Mq,startHardwareBackButton:Oq},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const GI=async(e,t,n,r,a,i)=>{var s;if(e)return e.attachViewToDom(t,n,a,r);if(!i&&typeof n!="string"&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const o=typeof n=="string"?(s=t.ownerDocument)===null||s===void 0?void 0:s.createElement(n):n;return r&&r.forEach(l=>o.classList.add(l)),a&&Object.assign(o,a),t.appendChild(o),await new Promise(l=>Vc(o,l)),o},xO=(e,t)=>{if(t){if(e){const n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()},zq=()=>{let e,t;return{attachViewToDom:async(a,i,s={},o=[])=>{var l,d;if(e=a,i){const c=typeof i=="string"?(l=e.ownerDocument)===null||l===void 0?void 0:l.createElement(i):i;o.forEach(h=>c.classList.add(h)),Object.assign(c,s),e.appendChild(c),await new Promise(h=>Vc(c,h))}else if(e.children.length>0&&(e.tagName==="ION-MODAL"||e.tagName==="ION-POPOVER")&&!e.children[0].classList.contains("ion-delegate-host")){const h=(d=e.ownerDocument)===null||d===void 0?void 0:d.createElement("div");h.classList.add("ion-delegate-host"),o.forEach(p=>h.classList.add(p)),h.append(...e.children),e.appendChild(h)}const u=document.querySelector("ion-app")||document.body;return t=document.createComment("ionic teleport"),e.parentNode.insertBefore(t,e),u.appendChild(e),e},removeViewFromDom:()=>(e&&t&&(t.parentNode.insertBefore(e,t),t.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Tc=(e,...t)=>console.warn("[Ionic Warning]: ".concat(e),...t),Bq=(e,...t)=>console.error("<".concat(e.tagName.toLowerCase(),"> must be used inside ").concat(t.join(" or "),"."));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let fk=0,Wq=0;const Uy=new WeakMap,Vq=e=>{typeof document<"u"&&Gq(document);const t=fk++;e.overlayIndex=t},Uq=e=>(e.hasAttribute("id")||(e.id="ion-overlay-".concat(++Wq)),e.id),rm='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',L_=(e,t)=>{let n=e.querySelector(rm);const r=n==null?void 0:n.shadowRoot;r&&(n=r.querySelector(rm)||n),n?P8(n):t.focus()},Hq=e=>e.classList.contains("overlay-hidden"),P_=(e,t)=>{const n=Array.from(e.querySelectorAll(rm));let r=n.length>0?n[n.length-1]:null;const a=r==null?void 0:r.shadowRoot;a&&(r=a.querySelector(rm)||r),r?r.focus():t.focus()},jq=(e,t)=>{const n=mk(t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),r=e.target;if(!n||!r||n.classList.contains("ion-disable-focus-trap"))return;const a=()=>{if(n===r)n.lastFocus=void 0;else{const s=ko(n);if(!s.contains(r))return;const o=s.querySelector(".ion-overlay-wrapper");if(!o)return;if(o.contains(r)||r===s.querySelector("ion-backdrop"))n.lastFocus=r;else{const l=n.lastFocus;L_(o,n),l===t.activeElement&&P_(o,n),n.lastFocus=t.activeElement}}},i=()=>{if(n.contains(r))n.lastFocus=r;else{const s=n.lastFocus;L_(n,n),s===t.activeElement&&P_(n,n),n.lastFocus=t.activeElement}};n.shadowRoot?i():a()},Gq=e=>{fk===0&&(fk=1,e.addEventListener("focus",t=>{jq(t,e)},!0),e.addEventListener("ionBackButton",t=>{const n=mk(e);n!=null&&n.backdropDismiss&&t.detail.register(vO,()=>n.dismiss(void 0,gk))}),e.addEventListener("keydown",t=>{if(t.key==="Escape"){const n=mk(e);n!=null&&n.backdropDismiss&&n.dismiss(void 0,gk)}}))},qq=(e,t)=>(t===void 0&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter(n=>n.overlayIndex>0)),mk=(e,t,n)=>{const r=qq(e,t).filter(a=>!Hq(a));return n===void 0?r[r.length-1]:r.find(a=>a.id===n)},wO=(e=!1)=>{const n=Zq(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");n&&(e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden"))},Kq=async(e,t,n,r,a)=>{var i,s;if(e.presented)return;wO(!0),e.presented=!0,e.willPresent.emit(),(i=e.willPresentShorthand)===null||i===void 0||i.emit();const o=ht(e),l=e.enterAnimation?e.enterAnimation:ft.get(t,o==="ios"?n:r);await kO(e,l,e.el,a)&&(e.didPresent.emit(),(s=e.didPresentShorthand)===null||s===void 0||s.emit()),e.el.tagName!=="ION-TOAST"&&Xq(e.el),e.keyboardClose&&(document.activeElement===null||!e.el.contains(document.activeElement))&&e.el.focus()},Xq=async e=>{let t=document.activeElement;if(!t)return;const n=t==null?void 0:t.shadowRoot;n&&(t=n.querySelector(rm)||t),await e.onDidDismiss(),t.focus()},Yq=async(e,t,n,r,a,i,s)=>{var o,l;if(!e.presented)return!1;wO(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n}),(o=e.willDismissShorthand)===null||o===void 0||o.emit({data:t,role:n});const d=ht(e),u=e.leaveAnimation?e.leaveAnimation:ft.get(r,d==="ios"?a:i);n!==_f&&await kO(e,u,e.el,s),e.didDismiss.emit({data:t,role:n}),(l=e.didDismissShorthand)===null||l===void 0||l.emit({data:t,role:n}),Uy.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),e.el.lastFocus!==void 0&&(e.el.lastFocus=void 0)}catch(d){console.error(d)}return e.el.remove(),!0},Zq=e=>e.querySelector("ion-app")||e.body,kO=async(e,t,n,r)=>{n.classList.remove("overlay-hidden");const a=e.el,i=t(a,r);(!e.animated||!ft.getBoolean("animated",!0))&&i.duration(0),e.keyboardClose&&i.beforeAddWrite(()=>{const o=n.ownerDocument.activeElement;o!=null&&o.matches("input,ion-input, ion-textarea")&&o.blur()});const s=Uy.get(e)||[];return Uy.set(e,[...s,i]),await i.play(),!0},z_=(e,t)=>{let n;const r=new Promise(a=>n=a);return Qq(e,t,a=>{n(a.detail)}),r},Qq=(e,t,n)=>{const r=a=>{hk(e,t,r),n(a)};ck(e,t,r)},gk="backdrop",_f="gesture",Jq=()=>{let e;const t=()=>{e&&(e(),e=void 0)};return{addClickListener:(r,a)=>{t();const i=a!==void 0?document.getElementById(a):null;if(!i){Tc('A trigger element with the ID "'.concat(a,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.'),r);return}e=((o,l)=>{const d=()=>{l.present()};return o.addEventListener("click",d),()=>{o.removeEventListener("click",d)}})(i,r)},removeClickListener:t}};function Sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const eK="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",tK="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Vw;const nK=()=>{if(typeof window>"u")return new Map;if(!Vw){const e=window;e.Ionicons=e.Ionicons||{},Vw=e.Ionicons.map=e.Ionicons.map||new Map}return Vw},rK=e=>{let t=Uw(e.src);return t||(t=SO(e.name,e.icon,e.mode,e.ios,e.md),t?aK(t):e.icon&&(t=Uw(e.icon),t||(t=Uw(e.icon[e.mode]),t))?t:null)},aK=e=>{const t=nK().get(e);return t||q5("svg/".concat(e,".svg"))},SO=(e,t,n,r,a)=>(n=(n&&Sb(n))==="ios"?"ios":"md",r&&n==="ios"?e=Sb(r):a&&n==="md"?e=Sb(a):(!e&&t&&!IO(t)&&(e=t),Hy(e)&&(e=Sb(e))),!Hy(e)||e.trim()===""||e.replace(/[a-z]|-|\d/gi,"")!==""?null:e),Uw=e=>Hy(e)&&(e=e.trim(),IO(e))?e:null,IO=e=>e.length>0&&/(\/|\.)/.test(e),Hy=e=>typeof e=="string",Sb=e=>e.toLowerCase(),iK=(e,t=[])=>{const n={};return t.forEach(r=>{e.hasAttribute(r)&&(e.getAttribute(r)!==null&&(n[r]=e.getAttribute(r)),e.removeAttribute(r))}),n},sK=e=>e&&e.dir!==""?e.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",oK=e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].nodeName.toLowerCase()!=="svg"&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const r=n.getAttribute("class")||"";if(n.setAttribute("class",(r+" s-ion-icon").trim()),$O(n))return t.innerHTML}return""},$O=e=>{if(e.nodeType===1){if(e.nodeName.toLowerCase()==="script")return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(Hy(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let t=0;t<e.childNodes.length;t++)if(!$O(e.childNodes[t]))return!1}return!0},lK=e=>e.startsWith("data:image/svg+xml"),uK=e=>e.indexOf(";utf8,")!==-1,xl=new Map,B_=new Map;let Hw;const dK=(e,t)=>{let n=B_.get(e);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(lK(e)&&uK(e)){Hw||(Hw=new DOMParser);const a=Hw.parseFromString(e,"text/html").querySelector("svg");return a&&xl.set(e,a.outerHTML),Promise.resolve()}else n=fetch(e).then(r=>{if(r.ok)return r.text().then(a=>{a&&t!==!1&&(a=oK(a)),xl.set(e,a||"")});xl.set(e,"")}),B_.set(e,n);else return xl.set(e,""),Promise.resolve();return n},cK=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",hK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=pK(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=iK(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(t,n,r){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const a=this.io=new window.IntersectionObserver(i=>{i[0].isIntersecting&&(a.disconnect(),this.io=void 0,r())},{rootMargin:n});a.observe(t)}else r()}loadIcon(){if(this.isVisible){const t=rK(this);t&&(xl.has(t)?this.svgContent=xl.get(t):dK(t,this.sanitize).then(()=>this.svgContent=xl.get(t)))}this.iconName=SO(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{iconName:t,el:n,inheritedAttributes:r}=this,a=this.mode||"md",i=this.flipRtl||t&&(t.indexOf("arrow")>-1||t.indexOf("chevron")>-1)&&this.flipRtl!==!1;return xe(sn,Object.assign({role:"img",class:Object.assign(Object.assign({[a]:!0},fK(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":!!i&&sK(n)})},r),this.svgContent?xe("div",{class:"icon-inner",innerHTML:this.svgContent}):xe("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return cK}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),pK=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",fK=e=>e?{"ion-color":!0,["ion-color-".concat(e)]:!0}:null;function mK(){if(typeof customElements>"u")return;["ion-icon"].forEach(t=>{switch(t){case"ion-icon":customElements.get(t)||customElements.define(t,hK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gK=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",bK=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",yK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=pt(this,"ionBackdropTap",7),this.blocker=UI.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(t){this.emitTap(t)}emitTap(t){this.stopPropagation&&(t.preventDefault(),t.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const t=ht(this);return xe(sn,{tabindex:"-1","aria-hidden":"true",class:{[t]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:gK,md:bK}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function vK(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(t=>{switch(t){case"ion-backdrop":customElements.get(t)||customElements.define(t,yK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ua=(e,t)=>t.closest(e)!==null,Po=(e,t)=>typeof e=="string"&&e.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(e)]:!0},t):t,xK=e=>e!==void 0?(Array.isArray(e)?e:e.split(" ")).filter(n=>n!=null).map(n=>n.trim()).filter(n=>n!==""):[],wK=e=>{const t={};return xK(e).forEach(n=>t[n]=!0),t},kK=/^[a-z][a-z0-9+\-.]*:/,CO=async(e,t,n,r)=>{if(e!=null&&e[0]!=="#"&&!kK.test(e)){const a=document.querySelector("ion-router");if(a)return t!=null&&t.preventDefault(),a.push(e,n,r)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const SK=".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;height:32px}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:24px;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:28px;line-height:0.67}",IK=".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;height:32px}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:48px;height:48px}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}",$K=nn(class extends rn{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const t=ht(this);return xe(sn,{class:{[t]:!0,"buttons-collapse":this.collapse}})}static get style(){return{ios:SK,md:IK}}},[34,"ion-buttons",{collapse:[4]}]);function CK(){if(typeof customElements>"u")return;["ion-buttons"].forEach(t=>{switch(t){case"ion-buttons":customElements.get(t)||customElements.define(t,$K);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const EK=CK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const TK=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",NK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(t,n){return new Promise(r=>{nm(()=>{const a=this.el.getBoundingClientRect(),i=a.width,s=a.height,o=Math.sqrt(i*i+s*s),l=Math.max(s,i),d=this.unbounded?l:o+AK,u=Math.floor(l*RK),c=d/u;let h=t-a.left,p=n-a.top;this.unbounded&&(h=i*.5,p=s*.5);const f=h-u*.5,m=p-u*.5,g=i*.5-h,b=s*.5-p;Ti(()=>{const y=document.createElement("div");y.classList.add("ripple-effect");const v=y.style;v.top=m+"px",v.left=f+"px",v.width=v.height=u+"px",v.setProperty("--final-scale","".concat(c)),v.setProperty("--translate-end","".concat(g,"px, ").concat(b,"px")),(this.el.shadowRoot||this.el).appendChild(y),setTimeout(()=>{r(()=>{_K(y)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const t=ht(this);return xe(sn,{role:"presentation",class:{[t]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return TK}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),_K=e=>{e.classList.add("fade-out"),setTimeout(()=>{e.remove()},200)},AK=10,RK=.5;function qI(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(t=>{switch(t){case"ion-ripple-effect":customElements.get(t)||customElements.define(t,NK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const DK={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},FK=e=>{if(e===void 0||e==="")return!0;if(window.matchMedia){const t=DK[e];return window.matchMedia(t).matches}return!1},MK=":host{-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}",Ib=typeof window<"u"?window:void 0,W_=Ib&&!!(Ib.CSS&&Ib.CSS.supports&&Ib.CSS.supports("--a: 0")),OK=["","xs","sm","md","lg","xl"],LK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.offset=void 0,this.offsetXs=void 0,this.offsetSm=void 0,this.offsetMd=void 0,this.offsetLg=void 0,this.offsetXl=void 0,this.pull=void 0,this.pullXs=void 0,this.pullSm=void 0,this.pullMd=void 0,this.pullLg=void 0,this.pullXl=void 0,this.push=void 0,this.pushXs=void 0,this.pushSm=void 0,this.pushMd=void 0,this.pushLg=void 0,this.pushXl=void 0,this.size=void 0,this.sizeXs=void 0,this.sizeSm=void 0,this.sizeMd=void 0,this.sizeLg=void 0,this.sizeXl=void 0}onResize(){tm(this)}getColumns(t){let n;for(const r of OK){const a=FK(r),i=this[t+r.charAt(0).toUpperCase()+r.slice(1)];a&&i!==void 0&&(n=i)}return n}calculateSize(){const t=this.getColumns("size");if(!t||t==="")return;const n=t==="auto"?"auto":W_?"calc(calc(".concat(t," / var(--ion-grid-columns, 12)) * 100%)"):t/12*100+"%";return{flex:"0 0 ".concat(n),width:"".concat(n),"max-width":"".concat(n)}}calculatePosition(t,n){const r=this.getColumns(t);if(!r)return;const a=W_?"calc(calc(".concat(r," / var(--ion-grid-columns, 12)) * 100%)"):r>0&&r<12?r/12*100+"%":"auto";return{[n]:a}}calculateOffset(t){return this.calculatePosition("offset",t?"margin-right":"margin-left")}calculatePull(t){return this.calculatePosition("pull",t?"left":"right")}calculatePush(t){return this.calculatePosition("push",t?"right":"left")}render(){const t=document.dir==="rtl",n=ht(this);return xe(sn,{class:{[n]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(t)),this.calculatePull(t)),this.calculatePush(t)),this.calculateSize())},xe("slot",null))}static get style(){return MK}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);function PK(){if(typeof customElements>"u")return;["ion-col"].forEach(t=>{switch(t){case"ion-col":customElements.get(t)||customElements.define(t,LK);break}})}const zK=PK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const bk=e=>e&&e.dir!==""?e.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const BK=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',WK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=pt(this,"ionScrollStart",7),this.ionScroll=pt(this,"ionScroll",7),this.ionScrollEnd=pt(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:t}=this,n=ht(this);return t===void 0?n==="ios"&&to("ios"):t}resize(){this.fullscreen?nm(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,tm(this))}readDimensions(){const t=UK(this.el),n=Math.max(this.el.offsetTop,0),r=Math.max(t.offsetHeight-n-this.el.offsetHeight,0);(n!==this.cTop||r!==this.cBottom)&&(this.cTop=n,this.cBottom=r,tm(this))}onScroll(t){const n=Date.now(),r=!this.isScrolling;this.lastScroll=n,r&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,nm(a=>{this.queued=!1,this.detail.event=t,HK(this.detail,this.scrollEl,a,r),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(t=>Vc(this.el,t)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(t=>Vc(this.el,t)),Promise.resolve(this.backgroundContentEl)}scrollToTop(t=0){return this.scrollToPoint(void 0,0,t)}async scrollToBottom(t=0){const n=await this.getScrollElement(),r=n.scrollHeight-n.clientHeight;return this.scrollToPoint(void 0,r,t)}async scrollByPoint(t,n,r){const a=await this.getScrollElement();return this.scrollToPoint(t+a.scrollLeft,n+a.scrollTop,r)}async scrollToPoint(t,n,r=0){const a=await this.getScrollElement();if(r<32){n!=null&&(a.scrollTop=n),t!=null&&(a.scrollLeft=t);return}let i,s=0;const o=new Promise(p=>i=p),l=a.scrollTop,d=a.scrollLeft,u=n!=null?n-l:0,c=t!=null?t-d:0,h=p=>{const f=Math.min(1,(p-s)/r)-1,m=Math.pow(f,3)+1;u!==0&&(a.scrollTop=Math.floor(m*u+l)),c!==0&&(a.scrollLeft=Math.floor(m*c+d)),m<1?requestAnimationFrame(h):i()};return requestAnimationFrame(p=>{s=p,h(p)}),o}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:t,scrollX:n,scrollY:r,el:a}=this,i=bk(a)?"rtl":"ltr",s=ht(this),o=this.shouldForceOverscroll(),l=s==="ios",d=t?"main":"div";return this.resize(),xe(sn,{class:Po(this.color,{[s]:!0,"content-sizing":ua("ion-popover",this.el),overscroll:o,["content-".concat(i)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},xe("div",{ref:u=>this.backgroundContentEl=u,id:"background-content",part:"background"}),xe(d,{class:{"inner-scroll":!0,"scroll-x":n,"scroll-y":r,overscroll:(n||r)&&o},ref:u=>this.scrollEl=u,onScroll:this.scrollEvents?u=>this.onScroll(u):void 0,part:"scroll"},xe("slot",null)),l?xe("div",{class:"transition-effect"},xe("div",{class:"transition-cover"}),xe("div",{class:"transition-shadow"})):null,xe("slot",{name:"fixed"}))}get el(){return this}static get style(){return BK}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),VK=e=>{var t;return e.parentElement?e.parentElement:!((t=e.parentNode)===null||t===void 0)&&t.host?e.parentNode.host:null},UK=e=>{const t=e.closest("ion-tabs");if(t)return t;const n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||VK(e)},HK=(e,t,n,r)=>{const a=e.currentX,i=e.currentY,s=e.currentTime,o=t.scrollLeft,l=t.scrollTop,d=n-s;if(r&&(e.startTime=n,e.startX=o,e.startY=l,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=o,e.currentY=e.scrollTop=l,e.deltaX=o-e.startX,e.deltaY=l-e.startY,d>0&&d<100){const u=(o-a)/d,c=(l-i)/d;e.velocityX=u*.7+e.velocityX*.3,e.velocityY=c*.7+e.velocityY*.3}};function jK(){if(typeof customElements>"u")return;["ion-content"].forEach(t=>{switch(t){case"ion-content":customElements.get(t)||customElements.define(t,WK);break}})}const GK=jK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qK=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;height:3.1em;font-size:16px;font-weight:500;letter-spacing:0}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal}:host(.button-large){--border-radius:16px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:3.1em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',KK=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',XK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=pt(this,"ionFocus",7),this.ionBlur=pt(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.inheritedAttributes={},this.handleClick=t=>{const{el:n}=this;if(this.type==="button")CO(this.href,t,this.routerDirection,this.routerAnimation);else if(L8(n)){let r=this.findForm();const{form:a}=this;if(!r&&a!==void 0){Tc(typeof a=="string"?'Form with selector: "#'.concat(a,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'):'The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',n);return}if(r||(r=n.closest("form")),r){t.preventDefault();const i=document.createElement("button");i.type=this.type,i.style.display="none",r.appendChild(i),i.click(),i.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=WI(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:t}=this;if(t instanceof HTMLFormElement)return t;if(typeof t=="string"){const n=document.getElementById(t);if(n instanceof HTMLFormElement)return n}return null}render(){const t=ht(this),{buttonType:n,type:r,disabled:a,rel:i,target:s,size:o,href:l,color:d,expand:u,hasIconOnly:c,shape:h,strong:p,inheritedAttributes:f}=this,m=o===void 0&&this.inItem?"small":o,g=l===void 0?"button":"a",b=g==="button"?{type:r}:{download:this.download,href:l,rel:i,target:s};let y=this.fill;return y==null&&(y=this.inToolbar||this.inListHeader?"clear":"solid"),xe(sn,{onClick:this.handleClick,"aria-disabled":a?"true":null,class:Po(d,{[t]:!0,[n]:!0,["".concat(n,"-").concat(u)]:u!==void 0,["".concat(n,"-").concat(m)]:m!==void 0,["".concat(n,"-").concat(h)]:h!==void 0,["".concat(n,"-").concat(y)]:!0,["".concat(n,"-strong")]:p,"in-toolbar":ua("ion-toolbar",this.el),"in-toolbar-color":ua("ion-toolbar[color]",this.el),"in-buttons":ua("ion-buttons",this.el),"button-has-icon-only":c,"button-disabled":a,"ion-activatable":!0,"ion-focusable":!0})},xe(g,Object.assign({},b,{class:"button-native",part:"native",disabled:a,onFocus:this.onFocus,onBlur:this.onBlur},f),xe("span",{class:"button-inner"},xe("slot",{name:"icon-only"}),xe("slot",{name:"start"}),xe("slot",null),xe("slot",{name:"end"})),t==="md"&&xe("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:qK,md:KK}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const YK=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",ZK='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',QK=nn(class extends rn{constructor(){super(),this.__registerHost(),this.ionColor=pt(this,"ionColor",7),this.ionStyle=pt(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:t}=this;this.ionColor.emit({"item-label-color":t!==void 0,["ion-color-".concat(t)]:t!==void 0})}emitStyle(){const{inRange:t,position:n}=this;t||this.ionStyle.emit({label:!0,["label-".concat(n)]:n!==void 0})}render(){const t=this.position,n=ht(this);return xe(sn,{class:Po(this.color,{[n]:!0,"in-item-color":ua("ion-item.ion-color",this.el),["label-".concat(t)]:t!==void 0,"label-no-animate":this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:YK,md:ZK}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function JK(){if(typeof customElements>"u")return;["ion-label"].forEach(t=>{switch(t){case"ion-label":customElements.get(t)||customElements.define(t,QK);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const e7="ION-CONTENT",EO="ion-content",TO=".ion-content-scroll-host",NO="".concat(EO,", ").concat(TO),zl=e=>e.tagName===e7,V_=async e=>zl(e)?(await new Promise(t=>Vc(e,t)),e.getScrollElement()):e,yk=e=>{const t=e.querySelector(TO);return t||e.querySelector(NO)},t7=e=>e.closest(NO),L3e=(e,t)=>zl(e)?e.scrollToTop(t):Promise.resolve(e.scrollTo({top:0,left:0,behavior:t>0?"smooth":"auto"})),P3e=(e,t,n,r)=>zl(e)?e.scrollByPoint(t,n,r):Promise.resolve(e.scrollBy({top:n,left:t,behavior:r>0?"smooth":"auto"})),vk=e=>Bq(e,EO),U_=e=>{if(zl(e)){const t=e,n=t.scrollY;return t.scrollY=!1,n}else return e.style.setProperty("overflow","hidden"),!0},n7=(e,t)=>{zl(e)?e.scrollY=t:e.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var xk;(function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"})(xk||(xk={}));const _O={getEngine(){var e;return((e=lt==null?void 0:lt.Capacitor)===null||e===void 0?void 0:e.isPluginAvailable("Keyboard"))&&(lt==null?void 0:lt.Capacitor.Plugins.Keyboard)},getResizeMode(){const e=this.getEngine();return e!=null&&e.getResizeMode?e.getResizeMode().catch(t=>{if(t.code!=="UNIMPLEMENTED")throw t}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const AO=e=>{if(Pw===void 0||e===xk.None||e===void 0)return null;const t=Pw.querySelector("ion-app");return t!=null?t:Pw.body},H_=e=>{const t=AO(e);return t===null?0:t.clientHeight},r7=async e=>{let t,n,r,a;const i=async()=>{const u=await _O.getResizeMode(),c=u===void 0?void 0:u.mode;t=()=>{a===void 0&&(a=H_(c)),r=!0,s(r,c)},n=()=>{r=!1,s(r,c)},lt==null||lt.addEventListener("keyboardWillShow",t),lt==null||lt.addEventListener("keyboardWillHide",n)},s=(u,c)=>{e&&e(u,o(c))},o=u=>{if(a===0||a===H_(u))return;const c=AO(u);if(c!==null)return new Promise(h=>{const p=()=>{c.clientHeight===a&&(f.disconnect(),h())},f=new ResizeObserver(p);f.observe(c)})},l=()=>{lt==null||lt.removeEventListener("keyboardWillShow",t),lt==null||lt.removeEventListener("keyboardWillHide",n),t=n=void 0},d=()=>r;return await i(),{init:i,destroy:l,isKeyboardVisible:d}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const a7=":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",i7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const t=ht(this);return xe(sn,{class:{[t]:!0,"grid-fixed":this.fixed}},xe("slot",null))}static get style(){return a7}},[1,"ion-grid",{fixed:[4]}]);function s7(){if(typeof customElements>"u")return;["ion-grid"].forEach(t=>{switch(t){case"ion-grid":customElements.get(t)||customElements.define(t,i7);break}})}const o7=s7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const l7="all 0.2s ease-in-out",j_=e=>{const t=document.querySelector("".concat(e,".ion-cloned-element"));if(t!==null)return t;const n=document.createElement(e);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},G_=e=>{if(!e)return;const t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map(n=>{const r=n.querySelector("ion-title");return{el:n,background:n.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:r,innerTitleEl:r?r.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(n.querySelectorAll("ion-buttons"))}})}},u7=(e,t,n)=>{nm(()=>{const r=e.scrollTop,a=Uc(1,1+-r/500,1.1);n.querySelector("ion-refresher.refresher-native")===null&&Ti(()=>{h7(t.toolbars,a)})})},KI=(e,t)=>{e.collapse!=="fade"&&(t===void 0?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},d7=(e,t,n)=>{if(!e[0].isIntersecting)return;const r=e[0].intersectionRatio>.9||n<=0?0:(1-e[0].intersectionRatio)*100/75;KI(t.el,r===1?void 0:r)},c7=(e,t,n,r)=>{Ti(()=>{const a=r.scrollTop;d7(e,t,a);const i=e[0],s=i.intersectionRect,o=s.width*s.height,l=i.rootBounds.width*i.rootBounds.height,d=o===0&&l===0,u=Math.abs(s.left-i.boundingClientRect.left),c=Math.abs(s.right-i.boundingClientRect.right),h=o>0&&(u>=5||c>=5);d||h||(i.isIntersecting?(uf(t,!1),uf(n)):(s.x===0&&s.y===0||s.width!==0&&s.height!==0)&&a>0&&(uf(t),uf(n,!1),KI(t.el)))})},uf=(e,t=!0)=>{const n=e.el;t?(n.classList.remove("header-collapse-condense-inactive"),n.removeAttribute("aria-hidden")):(n.classList.add("header-collapse-condense-inactive"),n.setAttribute("aria-hidden","true"))},h7=(e=[],t=1,n=!1)=>{e.forEach(r=>{const a=r.ionTitleEl,i=r.innerTitleEl;!a||a.size!=="large"||(i.style.transition=n?l7:"",i.style.transform="scale3d(".concat(t,", ").concat(t,", 1)"))})},q_=(e,t,n)=>{nm(()=>{const r=e.scrollTop,a=t.clientHeight,i=n?n.clientHeight:0;if(n!==null&&r<i){t.style.setProperty("--opacity-scale","0"),e.style.setProperty("clip-path","inset(".concat(a,"px 0px 0px 0px)"));return}const s=r-i,l=Uc(0,s/10,1);Ti(()=>{e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",l.toString())})})},p7="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",f7="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",m7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(t,n)=>{const r=this.scrollEl=await V_(t);this.contentScrollCallback=()=>{q_(this.scrollEl,this.el,n)},r.addEventListener("scroll",this.contentScrollCallback),q_(this.scrollEl,this.el,n)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=WI(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(ht(this)!=="ios")return;const{collapse:n}=this,r=n==="condense",a=n==="fade";if(this.destroyCollapsibleHeader(),r){const i=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),s=i?yk(i):null;Ti(()=>{const o=j_("ion-title");o.size="large",j_("ion-back-button")}),await this.setupCondenseHeader(s,i)}else if(a){const i=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),s=i?yk(i):null;if(!s){vk(this.el);return}const o=s.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(s,o)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(t,n){if(!t||!n){vk(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await V_(t);const r=n.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(r).find(o=>o.collapse!=="condense"),!this.collapsibleMainHeader)return;const a=G_(this.collapsibleMainHeader),i=G_(this.el);if(!a||!i)return;uf(a,!1),KI(a.el,0);const s=o=>{c7(o,a,i,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(s,{root:t,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(i.toolbars[i.toolbars.length-1].el),this.contentScrollCallback=()=>{u7(this.scrollEl,i,t)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),Ti(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:t,inheritedAttributes:n}=this,r=ht(this),a=this.collapse||"none",i=ua("ion-menu",this.el)?"none":"banner";return xe(sn,Object.assign({role:i,class:{[r]:!0,["header-".concat(r)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(a)]:!0,["header-translucent-".concat(r)]:this.translucent}},n),r==="ios"&&t&&xe("div",{class:"header-background"}),xe("slot",null))}get el(){return this}static get style(){return{ios:p7,md:f7}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function g7(){if(typeof customElements>"u")return;["ion-header"].forEach(t=>{switch(t){case"ion-header":customElements.get(t)||customElements.define(t,m7);break}})}const b7=g7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const y7=JK,RO=1,DO=2,jy=3;class wk{constructor(t,n){this.component=t,this.params=n,this.state=RO}async init(t){if(this.state=DO,!this.element){const n=this.component;this.element=await GI(this.delegate,t,n,["ion-page","ion-page-invisible"],this.params)}}_destroy(){Zr(this.state!==jy,"view state must be ATTACHED");const t=this.element;t&&(this.delegate?this.delegate.removeViewFromDom(t.parentElement,t):t.remove()),this.nav=void 0,this.state=jy}}const K_=(e,t,n)=>!e||e.component!==t?!1:aO(e.params,n),X_=(e,t)=>e?e instanceof wk?e:new wk(e,t):null,v7=e=>e.map(t=>t instanceof wk?t:"component"in t?X_(t.component,t.componentProps===null?void 0:t.componentProps):X_(t,void 0)).filter(t=>t!==null),x7=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",w7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=pt(this,"ionNavWillLoad",7),this.ionNavWillChange=pt(this,"ionNavWillChange",3),this.ionNavDidChange=pt(this,"ionNavDidChange",3),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const t=ht(this);this.swipeGesture=ft.getBoolean("swipeBackEnabled",t==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await fi(()=>import("./swipe-back-38a72425.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const t of this.views)bs(t.element,Bw),t._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(t,n,r,a){return this.insert(-1,t,n,r,a)}insert(t,n,r,a,i){return this.insertPages(t,[{component:n,componentProps:r}],a,i)}insertPages(t,n,r,a){return this.queueTrns({insertStart:t,insertViews:n,opts:r},a)}pop(t,n){return this.removeIndex(-1,1,t,n)}popTo(t,n,r){const a={removeStart:-1,removeCount:-1,opts:n};return typeof t=="object"&&t.component?(a.removeView=t,a.removeStart=1):typeof t=="number"&&(a.removeStart=t+1),this.queueTrns(a,r)}popToRoot(t,n){return this.removeIndex(1,-1,t,n)}removeIndex(t,n=1,r,a){return this.queueTrns({removeStart:t,removeCount:n,opts:r},a)}setRoot(t,n,r,a){return this.setPages([{component:t,componentProps:n}],r,a)}setPages(t,n,r){return n!=null||(n={}),n.animated!==!0&&(n.animated=!1),this.queueTrns({insertStart:0,insertViews:t,removeStart:0,removeCount:-1,opts:n},r)}setRouteId(t,n,r,a){const i=this.getActiveSync();if(K_(i,t,n))return Promise.resolve({changed:!1,element:i.element});let s;const o=new Promise(u=>s=u);let l;const d={updateURL:!1,viewIsReady:u=>{let c;const h=new Promise(p=>c=p);return s({changed:!0,element:u,markVisible:async()=>{c(),await l}}),h}};if(r==="root")l=this.setRoot(t,n,d);else{const u=this.views.find(c=>K_(c,t,n));u?l=this.popTo(u,Object.assign(Object.assign({},d),{direction:"back",animationBuilder:a})):r==="forward"?l=this.push(t,n,Object.assign(Object.assign({},d),{animationBuilder:a})):r==="back"&&(l=this.setRoot(t,n,Object.assign(Object.assign({},d),{direction:"back",animated:!0,animationBuilder:a})))}return o}async getRouteId(){const t=this.getActiveSync();if(t)return{id:t.element.tagName,params:t.params,element:t.element}}async getActive(){return this.getActiveSync()}async getByIndex(t){return this.views[t]}async canGoBack(t){return this.canGoBackSync(t)}async getPrevious(t){return this.getPreviousSync(t)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(t=this.getActiveSync()){return!!(t&&this.getPreviousSync(t))}getPreviousSync(t=this.getActiveSync()){if(!t)return;const n=this.views,r=n.indexOf(t);return r>0?n[r-1]:void 0}async queueTrns(t,n){var r,a;if(this.isTransitioning&&(!((r=t.opts)===null||r===void 0)&&r.skipIfBusy))return!1;const i=new Promise((s,o)=>{t.resolve=s,t.reject=o});if(t.done=n,t.opts&&t.opts.updateURL!==!1&&this.useRouter){const s=document.querySelector("ion-router");if(s){const o=await s.canTransition();if(o===!1)return!1;if(typeof o=="string")return s.push(o,t.opts.direction||"back"),!1}}return((a=t.insertViews)===null||a===void 0?void 0:a.length)===0&&(t.insertViews=void 0),this.transInstr.push(t),this.nextTrns(),i}success(t,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}if(n.done&&n.done(t.hasCompleted,t.requiresTransition,t.enteringView,t.leavingView,t.direction),n.resolve(t.hasCompleted),n.opts.updateURL!==!1&&this.useRouter){const r=document.querySelector("ion-router");if(r){const a=t.direction==="back"?"back":"forward";r.navChanged(a)}}}failed(t,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}this.transInstr.length=0,this.fireError(t,n)}fireError(t,n){n.done&&n.done(!1,!1,t),n.reject&&!this.destroyed?n.reject(t):n.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const t=this.transInstr.shift();return t?(this.runTransition(t),!0):!1}async runTransition(t){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(t);const n=this.getActiveSync(),r=this.getEnteringView(t,n);if(!n&&!r)throw new Error("no views in the stack to be removed");r&&r.state===RO&&await r.init(this.el),this.postViewInit(r,n,t);const a=(t.enteringRequiresTransition||t.leavingRequiresTransition)&&r!==n;a&&t.opts&&n&&(t.opts.direction==="back"&&(t.opts.animationBuilder=t.opts.animationBuilder||(r==null?void 0:r.animationBuilder)),n.animationBuilder=t.opts.animationBuilder);let i;a?i=await this.transition(r,n,t):i={hasCompleted:!0,requiresTransition:!1},this.success(i,t),this.ionNavDidChange.emit()}catch(n){this.failed(n,t)}this.isTransitioning=!1,this.nextTrns()}prepareTI(t){var n,r,a;const i=this.views.length;if((n=t.opts)!==null&&n!==void 0||(t.opts={}),(r=(a=t.opts).delegate)!==null&&r!==void 0||(a.delegate=this.delegate),t.removeView!==void 0){Zr(t.removeStart!==void 0,"removeView needs removeStart"),Zr(t.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(t.removeView);if(l<0)throw new Error("removeView was not found");t.removeStart+=l}t.removeStart!==void 0&&(t.removeStart<0&&(t.removeStart=i-1),t.removeCount<0&&(t.removeCount=i-t.removeStart),t.leavingRequiresTransition=t.removeCount>0&&t.removeStart+t.removeCount===i),t.insertViews&&((t.insertStart<0||t.insertStart>i)&&(t.insertStart=i),t.enteringRequiresTransition=t.insertStart===i);const s=t.insertViews;if(!s)return;Zr(s.length>0,"length can not be zero");const o=v7(s);if(o.length===0)throw new Error("invalid views to insert");for(const l of o){l.delegate=t.opts.delegate;const d=l.nav;if(d&&d!==this)throw new Error("inserted view was already inserted");if(l.state===jy)throw new Error("inserted view was already destroyed")}t.insertViews=o}getEnteringView(t,n){const r=t.insertViews;if(r!==void 0)return r[r.length-1];const a=t.removeStart;if(a!==void 0){const i=this.views,s=a+t.removeCount;for(let o=i.length-1;o>=0;o--){const l=i[o];if((o<a||o>=s)&&l!==n)return l}}}postViewInit(t,n,r){var a,i,s;Zr(n||t,"Both leavingView and enteringView are null"),Zr(r.resolve,"resolve must be valid"),Zr(r.reject,"reject must be valid");const o=r.opts,{insertViews:l,removeStart:d,removeCount:u}=r;let c;if(d!==void 0&&u!==void 0){Zr(d>=0,"removeStart can not be negative"),Zr(u>=0,"removeCount can not be negative"),c=[];for(let p=d;p<d+u;p++){const f=this.views[p];f!==void 0&&f!==t&&f!==n&&c.push(f)}(a=o.direction)!==null&&a!==void 0||(o.direction="back")}const h=this.views.length+((i=l==null?void 0:l.length)!==null&&i!==void 0?i:0)-(u!=null?u:0);if(Zr(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let p=r.insertStart;for(const f of l)this.insertViewAt(f,p),p++;r.enteringRequiresTransition&&((s=o.direction)!==null&&s!==void 0||(o.direction="forward"))}if(c&&c.length>0){for(const p of c)bs(p.element,iO),bs(p.element,sO),bs(p.element,Bw);for(const p of c)this.destroyView(p)}}async transition(t,n,r){const a=r.opts,i=a.progressAnimation?c=>this.sbAni=c:void 0,s=ht(this),o=t.element,l=n&&n.element,d=Object.assign(Object.assign({mode:s,showGoBack:this.canGoBackSync(t),baseEl:this.el,progressCallback:i,animated:this.animated&&ft.getBoolean("animated",!0),enteringEl:o,leavingEl:l},a),{animationBuilder:a.animationBuilder||this.animation||ft.get("navAnimation")}),{hasCompleted:u}=await oO(d);return this.transitionFinish(u,t,n,a)}transitionFinish(t,n,r,a){const i=t?n:r;return i&&this.unmountInactiveViews(i),{hasCompleted:t,requiresTransition:!0,enteringView:n,leavingView:r,direction:a.direction}}insertViewAt(t,n){const r=this.views,a=r.indexOf(t);a>-1?(Zr(t.nav===this,"view is not part of the nav"),r.splice(a,1),r.splice(n,0,t)):(Zr(!t.nav,"nav is used"),t.nav=this,r.splice(n,0,t))}removeView(t){Zr(t.state===DO||t.state===jy,"view state should be loaded or destroyed");const n=this.views,r=n.indexOf(t);Zr(r>-1,"view must be part of the stack"),r>=0&&n.splice(r,1)}destroyView(t){t._destroy(),this.removeView(t)}unmountInactiveViews(t){if(this.destroyed)return;const n=this.views,r=n.indexOf(t);for(let a=n.length-1;a>=0;a--){const i=n[a],s=i.element;s&&(a>r?(bs(s,Bw),this.destroyView(i)):a<r&&pk(s,!0))}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.pop({direction:"back",progressAnimation:!0})}onMove(t){this.sbAni&&this.sbAni.progressStep(t)}onEnd(t,n,r){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish(()=>{this.animationEnabled=!0},{oneTimeCallback:!0});let a=t?-.001:.001;t?a+=Hc([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),a+=Hc([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.sbAni.progressEnd(t?1:0,a,r)}}render(){return xe("slot",null)}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return x7}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);function k7(){if(typeof customElements>"u")return;["ion-nav"].forEach(t=>{switch(t){case"ion-nav":customElements.get(t)||customElements.define(t,w7);break}})}const S7=k7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const I7=(e,t,n,r,a)=>{const i=e.closest("ion-nav");if(i){if(t==="forward"){if(n!==void 0)return i.push(n,r,{skipIfBusy:!0,animationBuilder:a})}else if(t==="root"){if(n!==void 0)return i.setRoot(n,r,{skipIfBusy:!0,animationBuilder:a})}else if(t==="back")return i.pop({skipIfBusy:!0,animationBuilder:a})}return Promise.resolve(!1)},$7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.onClick=()=>I7(this.el,this.routerDirection,this.component,this.componentProps,this.routerAnimation),this.component=void 0,this.componentProps=void 0,this.routerDirection="forward",this.routerAnimation=void 0}render(){return xe(sn,{onClick:this.onClick})}get el(){return this}},[0,"ion-nav-link",{component:[1],componentProps:[16],routerDirection:[1,"router-direction"],routerAnimation:[16]}]);function C7(){if(typeof customElements>"u")return;["ion-nav-link"].forEach(t=>{switch(t){case"ion-nav-link":customElements.get(t)||customElements.define(t,$7);break}})}const E7=C7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const T7=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",N7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return xe(sn,{class:ht(this)},xe("slot",null))}static get style(){return T7}},[1,"ion-row"]);function _7(){if(typeof customElements>"u")return;["ion-row"].forEach(t=>{switch(t){case"ion-row":customElements.get(t)||customElements.define(t,N7);break}})}const A7=_7,R7=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}",D7=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}",F7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=pt(this,"ionChange",7),this.ionSelect=pt(this,"ionSelect",7),this.ionStyle=pt(this,"ionStyle",7),this.onClick=t=>{const n=t.target,r=this.checked;n.tagName!=="ION-SEGMENT"&&(this.value=n.value,n!==r&&this.emitValueChange(),(this.scrollable||!this.swipeGesture)&&(r?this.checkButton(r,n):this.setCheckedClasses()))},this.getSegmentButton=t=>{var n,r;const a=this.getButtons().filter(s=>!s.disabled),i=a.findIndex(s=>s===document.activeElement);switch(t){case"first":return a[0];case"last":return a[a.length-1];case"next":return(n=a[i+1])!==null&&n!==void 0?n:a[0];case"previous":return(r=a[i-1])!==null&&r!==void 0?r:a[a.length-1];default:return null}},this.activated=!1,this.color=void 0,this.disabled=!1,this.scrollable=!1,this.swipeGesture=!0,this.value=void 0,this.selectOnFocus=!1}colorChanged(t,n){(n===void 0&&t!==void 0||n!==void 0&&t===void 0)&&this.emitStyle()}swipeGestureChanged(){this.gestureChanged()}valueChanged(t){if(this.ionSelect.emit({value:t}),this.scrollable){const r=this.getButtons().find(a=>a.value===t);r!==void 0&&r.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}}disabledChanged(){this.gestureChanged();const t=this.getButtons();for(const n of t)n.disabled=this.disabled}gestureChanged(){this.gesture&&this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}connectedCallback(){this.emitStyle()}componentWillLoad(){this.emitStyle()}async componentDidLoad(){this.setCheckedClasses(),this.gesture=(await fi(()=>Promise.resolve().then(()=>gq),void 0)).createGesture({el:this.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:!1,onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.gestureChanged(),this.disabled&&this.disabledChanged()}onStart(t){this.valueBeforeGesture=this.value,this.activate(t)}onMove(t){this.setNextIndex(t)}onEnd(t){this.setActivated(!1),this.setNextIndex(t,!0),t.event.stopImmediatePropagation();const n=this.value;n!==void 0&&this.valueBeforeGesture!==n&&this.emitValueChange(),this.valueBeforeGesture=void 0}emitValueChange(){const{value:t}=this;this.ionChange.emit({value:t})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find(t=>t.value===this.value)}setActivated(t){this.getButtons().forEach(r=>{t?r.classList.add("segment-button-activated"):r.classList.remove("segment-button-activated")}),this.activated=t}activate(t){const n=t.event.target,a=this.getButtons().find(i=>i.value===this.value);n.tagName==="ION-SEGMENT-BUTTON"&&(a||(this.value=n.value,this.setCheckedClasses()),this.value===n.value&&this.setActivated(!0))}getIndicator(t){return(t.shadowRoot||t).querySelector(".segment-button-indicator")}checkButton(t,n){const r=this.getIndicator(t),a=this.getIndicator(n);if(r===null||a===null)return;const i=r.getBoundingClientRect(),s=a.getBoundingClientRect(),o=i.width/s.width,l=i.left-s.left,d="translate3d(".concat(l,"px, 0, 0) scaleX(").concat(o,")");Ti(()=>{a.classList.remove("segment-button-indicator-animated"),a.style.setProperty("transform",d),a.getBoundingClientRect(),a.classList.add("segment-button-indicator-animated"),a.style.setProperty("transform","")}),this.value=n.value,this.setCheckedClasses()}setCheckedClasses(){const t=this.getButtons(),r=t.findIndex(a=>a.value===this.value)+1;for(const a of t)a.classList.remove("segment-button-after-checked");r<t.length&&t[r].classList.add("segment-button-after-checked")}setNextIndex(t,n=!1){const r=bk(this.el),a=this.activated,i=this.getButtons(),s=i.findIndex(v=>v.value===this.value),o=i[s];let l,d;if(s===-1)return;const u=o.getBoundingClientRect(),c=u.left,h=u.width,p=t.currentX,f=u.top+u.height/2,g=this.el.getRootNode().elementFromPoint(p,f),b=r?p>c+h:p<c,y=r?p<c:p>c+h;if(a&&!n){if(b){const v=s-1;v>=0&&(d=v)}else if(y&&a&&!n){const v=s+1;v<i.length&&(d=v)}d!==void 0&&!i[d].disabled&&(l=i[d])}if(!a&&n&&(l=g),l!=null){if(l.tagName==="ION-SEGMENT")return!1;o!==l&&this.checkButton(o,l)}return!0}emitStyle(){this.ionStyle.emit({segment:!0})}onKeyDown(t){const n=bk(this.el);let r=this.selectOnFocus,a;switch(t.key){case"ArrowRight":t.preventDefault(),a=n?this.getSegmentButton("previous"):this.getSegmentButton("next");break;case"ArrowLeft":t.preventDefault(),a=n?this.getSegmentButton("next"):this.getSegmentButton("previous");break;case"Home":t.preventDefault(),a=this.getSegmentButton("first");break;case"End":t.preventDefault(),a=this.getSegmentButton("last");break;case" ":case"Enter":t.preventDefault(),a=document.activeElement,r=!0}if(a){if(r){const i=this.checked;this.checkButton(i||a,a),a!==i&&this.emitValueChange()}a.setFocus()}}render(){const t=ht(this);return xe(sn,{role:"tablist",onClick:this.onClick,class:Po(this.color,{[t]:!0,"in-toolbar":ua("ion-toolbar",this.el),"in-toolbar-color":ua("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},xe("slot",null))}get el(){return this}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}static get style(){return{ios:R7,md:D7}}},[33,"ion-segment",{color:[513],disabled:[4],scrollable:[4],swipeGesture:[4,"swipe-gesture"],value:[1032],selectOnFocus:[4,"select-on-focus"],activated:[32]},[[0,"keydown","onKeyDown"]]]);function M7(){if(typeof customElements>"u")return;["ion-segment"].forEach(t=>{switch(t){case"ion-segment":customElements.get(t)||customElements.define(t,F7);break}})}const O7=M7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const L7=':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:none;--background-hover-opacity:0;--background-focused:none;--background-focused-opacity:0;--border-radius:7px;--border-width:1px;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--border-style:solid;--indicator-box-shadow:0 0 5px rgba(0, 0, 0, 0.16);--indicator-color:var(--ion-color-step-350, var(--ion-background-color, #fff));--indicator-height:100%;--indicator-transition:transform 260ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--transition:100ms all linear;--padding-top:0;--padding-end:13px;--padding-bottom:0;--padding-start:13px;margin-top:2px;margin-bottom:2px;position:relative;-ms-flex-direction:row;flex-direction:row;min-width:70px;min-height:28px;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-size:13px;font-weight:450;line-height:37px}:host::before{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;-webkit-transition:160ms opacity ease-in-out;transition:160ms opacity ease-in-out;-webkit-transition-delay:100ms;transition-delay:100ms;border-left:var(--border-width) var(--border-style) var(--border-color);content:"";opacity:1;will-change:opacity}:host(:first-of-type)::before{border-left-color:transparent}:host(.segment-button-disabled){opacity:0.3}::slotted(ion-icon){font-size:24px}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:2px;margin-inline-end:2px}.segment-button-indicator{-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;left:0;right:0;top:0;bottom:0}.segment-button-indicator-background{border-radius:var(--border-radius);background:var(--indicator-color)}.segment-button-indicator-background{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked)::before,:host(.segment-button-after-checked)::before{opacity:0}:host(.segment-button-checked){z-index:-1}:host(.segment-button-activated){--indicator-transform:scale(0.95)}:host(.ion-focused) .button-native{opacity:0.7}@media (any-hover: hover){:host(:hover) .button-native{opacity:0.5}:host(.segment-button-checked:hover) .button-native{opacity:1}}:host(.in-segment-color){background:none;color:var(--ion-text-color, #000)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-step-350, var(--ion-background-color, #fff))}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native,:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-text-color, #000)}}:host(.in-toolbar:not(.in-segment-color)){--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, var(--ion-toolbar-color), initial);--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-toolbar-color), initial);--indicator-color:var(--ion-toolbar-segment-indicator-color, var(--ion-color-step-350, var(--ion-background-color, #fff)))}:host(.in-toolbar-color) .segment-button-indicator-background{background:var(--ion-color-contrast)}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color):hover) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color):hover) .button-native{color:var(--ion-color-base)}}',P7=':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:var(--color-checked);--background-focused:var(--color-checked);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #3880ff);--indicator-box-shadow:none;--indicator-color:var(--color-checked);--indicator-height:2px;--indicator-transition:transform 250ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--padding-top:0;--padding-end:16px;--padding-bottom:0;--padding-start:16px;--transition:color 0.15s linear 0s, opacity 0.15s linear 0s;min-width:90px;min-height:48px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);font-size:14px;font-weight:500;letter-spacing:0.06em;line-height:40px;text-transform:uppercase}:host(.segment-button-disabled){opacity:0.3}:host(.in-segment-color){background:none;color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color) ion-ripple-effect{color:var(--ion-color-base)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked) .button-native{color:var(--ion-color-base)}:host(.in-segment-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color:hover) .button-native::after{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-segment-color)){--background:var(--ion-toolbar-segment-background, none);--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6));--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-color-primary, #3880ff));--indicator-color:var(--ion-toolbar-segment-color-checked, var(--color-checked))}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:rgba(var(--ion-color-contrast-rgb), 0.6)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color)) .button-native::after{background:var(--ion-color-contrast)}}::slotted(ion-icon){margin-top:12px;margin-bottom:12px;font-size:24px}::slotted(ion-label){margin-top:12px;margin-bottom:12px}:host(.segment-button-layout-icon-top) ::slotted(ion-label),:host(.segment-button-layout-icon-bottom) ::slotted(ion-icon){margin-top:0}:host(.segment-button-layout-icon-top) ::slotted(ion-icon),:host(.segment-button-layout-icon-bottom) ::slotted(ion-label){margin-bottom:0}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}:host(.segment-button-has-icon-only) ::slotted(ion-icon){margin-top:12px;margin-bottom:12px}:host(.segment-button-has-label-only) ::slotted(ion-label){margin-top:12px;margin-bottom:12px}.segment-button-indicator{left:0;right:0;bottom:0}.segment-button-indicator-background{background:var(--indicator-color)}:host(.in-toolbar:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-toolbar-segment-indicator-color, var(--indicator-color))}:host(.in-toolbar-color:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-color-contrast)}';let z7=0;const B7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.segmentEl=null,this.inheritedAttributes={},this.updateStyle=()=>{tm(this)},this.updateState=()=>{const{segmentEl:t}=this;t&&(this.checked=t.value===this.value,t.disabled&&(this.disabled=!0))},this.checked=!1,this.disabled=!1,this.layout="icon-top",this.type="button",this.value="ion-sb-"+z7++}valueChanged(){this.updateState()}connectedCallback(){const t=this.segmentEl=this.el.closest("ion-segment");t&&(this.updateState(),ck(t,"ionSelect",this.updateState),ck(t,"ionStyle",this.updateStyle))}disconnectedCallback(){const t=this.segmentEl;t&&(hk(t,"ionSelect",this.updateState),hk(t,"ionStyle",this.updateStyle),this.segmentEl=null)}componentWillLoad(){this.inheritedAttributes=Object.assign({},y0(this.el,["aria-label"]))}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}async setFocus(){const{nativeEl:t}=this;t!==void 0&&t.focus()}render(){const{checked:t,type:n,disabled:r,hasIcon:a,hasLabel:i,layout:s,segmentEl:o}=this,l=ht(this),d=()=>(o==null?void 0:o.color)!==void 0;return xe(sn,{class:{[l]:!0,"in-toolbar":ua("ion-toolbar",this.el),"in-toolbar-color":ua("ion-toolbar[color]",this.el),"in-segment":ua("ion-segment",this.el),"in-segment-color":d(),"segment-button-has-label":i,"segment-button-has-icon":a,"segment-button-has-label-only":i&&!a,"segment-button-has-icon-only":a&&!i,"segment-button-disabled":r,"segment-button-checked":t,["segment-button-layout-".concat(s)]:!0,"ion-activatable":!0,"ion-activatable-instant":!0,"ion-focusable":!0}},xe("button",Object.assign({"aria-selected":t?"true":"false",role:"tab",ref:u=>this.nativeEl=u,type:n,class:"button-native",part:"native",disabled:r},this.inheritedAttributes),xe("span",{class:"button-inner"},xe("slot",null)),l==="md"&&xe("ion-ripple-effect",null)),xe("div",{part:"indicator",class:{"segment-button-indicator":!0,"segment-button-indicator-animated":!0}},xe("div",{part:"indicator-background",class:"segment-button-indicator-background"})))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:L7,md:P7}}},[33,"ion-segment-button",{disabled:[1028],layout:[1],type:[1],value:[8],checked:[32],setFocus:[64]}]);function W7(){if(typeof customElements>"u")return;["ion-segment-button","ion-ripple-effect"].forEach(t=>{switch(t){case"ion-segment-button":customElements.get(t)||customElements.define(t,B7);break;case"ion-ripple-effect":customElements.get(t)||qI();break}})}const V7=W7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const U7=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host:dir(rtl){left:unset;right:unset;right:0}}}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}:host(.title-large){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;padding-bottom:6px;font-size:34px;font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large) .toolbar-title:dir(rtl){-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",H7=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}",j7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=pt(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const t=this.getSize();this.ionStyle.emit({["title-".concat(t)]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const t=ht(this),n=this.getSize();return xe(sn,{class:Po(this.color,{[t]:!0,["title-".concat(n)]:!0,"title-rtl":document.dir==="rtl"})},xe("div",{class:"toolbar-title"},xe("slot",null)))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:U7,md:H7}}},[33,"ion-title",{color:[513],size:[1]}]);function G7(){if(typeof customElements>"u")return;["ion-title"].forEach(t=>{switch(t){case"ion-title":customElements.get(t)||customElements.define(t,j7);break}})}const q7=G7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const K7=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",X7=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",Y7=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const t=Array.from(this.el.querySelectorAll("ion-buttons")),n=t.find(i=>i.slot==="start");n&&n.classList.add("buttons-first-slot");const r=t.reverse(),a=r.find(i=>i.slot==="end")||r.find(i=>i.slot==="primary")||r.find(i=>i.slot==="secondary");a&&a.classList.add("buttons-last-slot")}childrenStyle(t){t.stopPropagation();const n=t.target.tagName,r=t.detail,a={},i=this.childrenStyles.get(n)||{};let s=!1;Object.keys(r).forEach(o=>{const l="toolbar-".concat(o),d=r[o];d!==i[l]&&(s=!0),d&&(a[l]=!0)}),s&&(this.childrenStyles.set(n,a),tm(this))}render(){const t=ht(this),n={};return this.childrenStyles.forEach(r=>{Object.assign(n,r)}),xe(sn,{class:Object.assign(Object.assign({},n),Po(this.color,{[t]:!0,"in-toolbar":ua("ion-toolbar",this.el)}))},xe("div",{class:"toolbar-background"}),xe("div",{class:"toolbar-container"},xe("slot",{name:"start"}),xe("slot",{name:"secondary"}),xe("div",{class:"toolbar-content"},xe("slot",null)),xe("slot",{name:"primary"}),xe("slot",{name:"end"})))}get el(){return this}static get style(){return{ios:K7,md:X7}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function Z7(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(t=>{switch(t){case"ion-toolbar":customElements.get(t)||customElements.define(t,Y7);break}})}const Q7=Z7;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const J7=XK;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Gy="ionKeyboardDidShow",FO="ionKeyboardDidHide",eX=150;let qy={},ks={},yh=!1;const tX=()=>{qy={},ks={},yh=!1},nX=e=>{if(_O.getEngine())rX(e);else{if(!e.visualViewport)return;ks=QI(e.visualViewport),e.visualViewport.onresize=()=>{LO(e),MO()||OO(e)?XI(e):ZI(e)&&YI(e)}}},rX=e=>{e.addEventListener("keyboardDidShow",t=>XI(e,t)),e.addEventListener("keyboardDidHide",()=>YI(e))},XI=(e,t)=>{aX(e,t),yh=!0},YI=e=>{iX(e),yh=!1},MO=()=>{const e=(qy.height-ks.height)*ks.scale;return!yh&&qy.width===ks.width&&e>eX},OO=e=>yh&&!ZI(e),ZI=e=>yh&&ks.height===e.innerHeight,aX=(e,t)=>{const n=t?t.keyboardHeight:e.innerHeight-ks.height,r=new CustomEvent(Gy,{detail:{keyboardHeight:n}});e.dispatchEvent(r)},iX=e=>{const t=new CustomEvent(FO);e.dispatchEvent(t)},LO=e=>{qy=Object.assign({},ks),ks=QI(e.visualViewport)},QI=e=>({width:Math.round(e.width),height:Math.round(e.height),offsetTop:e.offsetTop,offsetLeft:e.offsetLeft,pageTop:e.pageTop,pageLeft:e.pageLeft,scale:e.scale}),sX=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE:FO,KEYBOARD_DID_OPEN:Gy,copyVisualViewport:QI,keyboardDidClose:ZI,keyboardDidOpen:MO,keyboardDidResize:OO,resetKeyboardAssist:tX,setKeyboardClose:YI,setKeyboardOpen:XI,startKeyboardAssist:nX,trackViewportChanges:LO},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var jc;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(jc||(jc={}));const am={getEngine(){var e;return((e=lt==null?void 0:lt.Capacitor)===null||e===void 0?void 0:e.isPluginAvailable("StatusBar"))&&(lt==null?void 0:lt.Capacitor.Plugins.StatusBar)},supportsDefaultStatusBarStyle(){var e;return!!(!((e=lt==null?void 0:lt.Capacitor)===null||e===void 0)&&e.PluginHeaders)},setStyle(e){const t=this.getEngine();t&&t.setStyle(e)},getStyle:async function(){const e=this.getEngine();if(!e)return jc.Default;const{style:t}=await e.getInfo();return t}},kk=(e,t)=>{if(t===1)return 0;const n=1/(1-t),r=-(t*n);return e*n+r},PO=()=>{!lt||lt.innerWidth>=768||!am.supportsDefaultStatusBarStyle()||am.setStyle({style:jc.Dark})},zO=(e=jc.Default)=>{!lt||lt.innerWidth>=768||!am.supportsDefaultStatusBarStyle()||am.setStyle({style:e})},BO=async(e,t)=>{typeof e.canDismiss!="function"||!await e.canDismiss(void 0,_f)||(t.isRunning()?t.onFinish(()=>{e.dismiss(void 0,"handler")},{oneTimeCallback:!0}):e.dismiss(void 0,"handler"))},Sk=e=>.00255275*2.71828**(-14.9619*e)-1.00255*2.71828**(-.0380968*e)+1,Ky={MIN_PRESENTING_SCALE:.93},oX=(e,t,n,r)=>{const i=e.offsetHeight;let s=!1,o=!1,l=null,d=null;const u=.2;let c=!0,h=0;const p=()=>l&&zl(l)?l.scrollY:!0,y=HI({el:e,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:v=>{const x=v.event.target;return x===null||!x.closest?!0:(l=t7(x),l?(zl(l)?d=ko(l).querySelector(".inner-scroll"):d=l,!!!l.querySelector("ion-refresher")&&d.scrollTop===0):x.closest("ion-footer")===null)},onStart:v=>{const{deltaY:x}=v;c=p(),o=e.canDismiss!==void 0&&e.canDismiss!==!0,x>0&&l&&U_(l),t.progressStart(!0,s?1:0)},onMove:v=>{const{deltaY:x}=v;x>0&&l&&U_(l);const w=v.deltaY/i,$=w>=0&&o,C=$?u:.9999,E=$?Sk(w/C):w,A=Uc(1e-4,E,C);t.progressStep(A),A>=.5&&h<.5?zO(n):A<.5&&h>=.5&&PO(),h=A},onEnd:v=>{const x=v.velocityY,w=v.deltaY/i,$=w>=0&&o,C=$?u:.9999,E=$?Sk(w/C):w,A=Uc(1e-4,E,C),R=(v.deltaY+x*1e3)/i,N=!$&&R>=.5;let I=N?-.001:.001;N?(t.easing("cubic-bezier(0.32, 0.72, 0, 1)"),I+=Hc([0,0],[.32,.72],[0,1],[1,1],A)[0]):(t.easing("cubic-bezier(1, 0, 0.68, 0.28)"),I+=Hc([0,0],[1,0],[.68,.28],[1,1],A)[0]);const F=Y_(N?w*i:(1-A)*i,x);s=N,y.enable(!1),l&&n7(l,c),t.onFinish(()=>{N||y.enable(!0)}).progressEnd(N?1:0,I,F),$&&A>C/4?BO(e,t):N&&r()}});return y},Y_=(e,t)=>Uc(400,e/Math.abs(t*1.1),500),WO=e=>{const{currentBreakpoint:t,backdropBreakpoint:n}=e,r=n===void 0||n<t,a=r?"calc(var(--backdrop-opacity) * ".concat(t,")"):"0",i=fn("backdropAnimation").fromTo("opacity",0,a);return r&&i.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:fn("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:"translateY(".concat(100-t*100,"%)")}]),backdropAnimation:i}},VO=e=>{const{currentBreakpoint:t,backdropBreakpoint:n}=e,r="calc(var(--backdrop-opacity) * ".concat(kk(t,n),")"),a=[{offset:0,opacity:r},{offset:1,opacity:0}],i=[{offset:0,opacity:r},{offset:n,opacity:0},{offset:1,opacity:0}],s=fn("backdropAnimation").keyframes(n!==0?i:a);return{wrapperAnimation:fn("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(".concat(100-t*100,"%)")},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:s}},lX=()=>{const e=fn().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),t=fn().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:e,wrapperAnimation:t}},Z_=(e,t)=>{const{presentingEl:n,currentBreakpoint:r}=t,a=ko(e),{wrapperAnimation:i,backdropAnimation:s}=r!==void 0?WO(t):lX();s.addElement(a.querySelector("ion-backdrop")),i.addElement(a.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const o=fn("entering-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(i);if(n){const l=window.innerWidth<768,d=n.tagName==="ION-MODAL"&&n.presentingElement!==void 0,u=ko(n),c=fn().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),h=document.body;if(l){const p=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",f=d?"-10px":p,m=Ky.MIN_PRESENTING_SCALE,g="translateY(".concat(f,") scale(").concat(m,")");c.afterStyles({transform:g}).beforeAddWrite(()=>h.style.setProperty("background-color","black")).addElement(n).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:g,borderRadius:"10px 10px 0 0"}]),o.addAnimation(c)}else if(o.addAnimation(s),!d)i.fromTo("opacity","0","1");else{const p=d?Ky.MIN_PRESENTING_SCALE:1,f="translateY(-10px) scale(".concat(p,")");c.afterStyles({transform:f}).addElement(u.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:f}]);const m=fn().afterStyles({transform:f}).addElement(u.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:f}]);o.addAnimation([c,m])}}else o.addAnimation(s);return o},uX=()=>{const e=fn().fromTo("opacity","var(--backdrop-opacity)",0),t=fn().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:e,wrapperAnimation:t}},Q_=(e,t,n=500)=>{const{presentingEl:r,currentBreakpoint:a}=t,i=ko(e),{wrapperAnimation:s,backdropAnimation:o}=a!==void 0?VO(t):uX();o.addElement(i.querySelector("ion-backdrop")),s.addElement(i.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const l=fn("leaving-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(n).addAnimation(s);if(r){const d=window.innerWidth<768,u=r.tagName==="ION-MODAL"&&r.presentingElement!==void 0,c=ko(r),h=fn().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(f=>{if(f!==1)return;r.style.setProperty("overflow",""),Array.from(p.querySelectorAll("ion-modal")).filter(g=>g.presentingElement!==void 0).length<=1&&p.style.setProperty("background-color","")}),p=document.body;if(d){const f=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",m=u?"-10px":f,g=Ky.MIN_PRESENTING_SCALE,b="translateY(".concat(m,") scale(").concat(g,")");h.addElement(r).keyframes([{offset:0,filter:"contrast(0.85)",transform:b,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),l.addAnimation(h)}else if(l.addAnimation(o),!u)s.fromTo("opacity","1","0");else{const f=u?Ky.MIN_PRESENTING_SCALE:1,m="translateY(-10px) scale(".concat(f,")");h.addElement(c.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:m},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const g=fn().addElement(c.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:m},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([h,g])}}else l.addAnimation(o);return l},dX=()=>{const e=fn().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),t=fn().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:e,wrapperAnimation:t}},cX=(e,t)=>{const{currentBreakpoint:n}=t,r=ko(e),{wrapperAnimation:a,backdropAnimation:i}=n!==void 0?WO(t):dX();return i.addElement(r.querySelector("ion-backdrop")),a.addElement(r.querySelector(".modal-wrapper")),fn().addElement(e).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([i,a])},hX=()=>{const e=fn().fromTo("opacity","var(--backdrop-opacity)",0),t=fn().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:e,wrapperAnimation:t}},pX=(e,t)=>{const{currentBreakpoint:n}=t,r=ko(e),{wrapperAnimation:a,backdropAnimation:i}=n!==void 0?VO(t):hX();return i.addElement(r.querySelector("ion-backdrop")),a.addElement(r.querySelector(".modal-wrapper")),fn().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([i,a])},fX=(e,t,n,r,a,i,s=[],o,l,d)=>{const u=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],c=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-a,opacity:0},{offset:1,opacity:0}],h={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:a!==0?c:u},p=e.querySelector("ion-content"),f=n.clientHeight;let m=r,g=0,b=!1;const y=.95,v=i.childAnimations.find(P=>P.id==="wrapperAnimation"),x=i.childAnimations.find(P=>P.id==="backdropAnimation"),w=s[s.length-1],$=s[0],C=()=>{e.style.setProperty("pointer-events","auto"),t.style.setProperty("pointer-events","auto"),e.classList.remove("ion-disable-focus-trap")},E=()=>{e.style.setProperty("pointer-events","none"),t.style.setProperty("pointer-events","none"),e.classList.add("ion-disable-focus-trap")};v&&x&&(v.keyframes([...h.WRAPPER_KEYFRAMES]),x.keyframes([...h.BACKDROP_KEYFRAMES]),i.progressStart(!0,1-m),m>a?C():E()),p&&m!==w&&(p.scrollY=!1);const A=P=>{const H=P.event.target.closest("ion-content");return m=o(),!(m===1&&H)},R=()=>{b=e.canDismiss!==void 0&&e.canDismiss!==!0&&$===0,p&&(p.scrollY=!1),Or(()=>{e.focus()}),i.progressStart(!0,1-m)},N=P=>{const H=1-m,X=s.length>1?1-s[1]:void 0,M=H+P.deltaY/f,B=X!==void 0&&M>=X&&b,V=B?y:.9999,K=B&&X!==void 0?X+Sk((M-X)/(V-X)):M;g=Uc(1e-4,K,V),i.progressStep(g)},I=P=>{const H=P.velocityY,X=(P.deltaY+H*350)/f,M=m-X,B=s.reduce((V,K)=>Math.abs(K-M)<Math.abs(V-M)?K:V);F({breakpoint:B,breakpointOffset:g,canDismiss:b})},F=P=>{const{breakpoint:H,canDismiss:X,breakpointOffset:M}=P,B=X&&H===0,V=B?m:H,K=V!==0;return m=0,v&&x&&(v.keyframes([{offset:0,transform:"translateY(".concat(M*100,"%)")},{offset:1,transform:"translateY(".concat((1-V)*100,"%)")}]),x.keyframes([{offset:0,opacity:"calc(var(--backdrop-opacity) * ".concat(kk(1-M,a),")")},{offset:1,opacity:"calc(var(--backdrop-opacity) * ".concat(kk(V,a),")")}]),i.progressStep(0)),L.enable(!1),B?BO(e,i):K||l(),new Promise(Q=>{i.onFinish(()=>{K?v&&x?Or(()=>{v.keyframes([...h.WRAPPER_KEYFRAMES]),x.keyframes([...h.BACKDROP_KEYFRAMES]),i.progressStart(!0,1-V),m=V,d(m),p&&m===s[s.length-1]&&(p.scrollY=!0),m>a?C():E(),L.enable(!0),Q()}):(L.enable(!0),Q()):Q()},{oneTimeCallback:!0}).progressEnd(1,0,500)})},L=HI({el:n,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:A,onStart:R,onMove:N,onEnd:I});return{gesture:L,moveSheetToBreakpoint:F}},mX=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-card) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}@supports selector(:dir(rtl)){:host(.modal-sheet) .modal-wrapper:dir(rtl){border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}}',gX=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',bX=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=pt(this,"ionModalDidPresent",7),this.willPresent=pt(this,"ionModalWillPresent",7),this.willDismiss=pt(this,"ionModalWillDismiss",7),this.didDismiss=pt(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=pt(this,"ionBreakpointDidChange",7),this.didPresentShorthand=pt(this,"didPresent",7),this.willPresentShorthand=pt(this,"willPresent",7),this.willDismissShorthand=pt(this,"willDismiss",7),this.didDismissShorthand=pt(this,"didDismiss",7),this.ionMount=pt(this,"ionMount",7),this.triggerController=Jq(),this.coreDelegate=zq(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:t,handleBehavior:n}=this;n!=="cycle"||t!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:t}=this;t===void 0&&this.dismiss(void 0,gk)},this.onLifecycle=t=>{const n=this.usersElement,r=yX[t.type];if(n&&r){const a=new CustomEvent(r,{bubbles:!1,cancelable:!1,detail:t.detail});n.dispatchEvent(a)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.canDismiss=!0}onIsOpenChange(t,n){t===!0&&n===!1?this.present():t===!1&&n===!0&&this.dismiss()}triggerChanged(){const{trigger:t,el:n,triggerController:r}=this;t&&r.addClickListener(n,t)}breakpointsChanged(t){t!==void 0&&(this.sortedBreakpoints=t.sort((n,r)=>n-r))}connectedCallback(){const{el:t}=this;Vq(t),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){const{breakpoints:t,initialBreakpoint:n,el:r}=this,a=this.isSheetModal=t!==void 0&&n!==void 0;this.inheritedAttributes=y0(r,["aria-label","role"]),a&&(this.currentBreakpoint=this.initialBreakpoint),t!==void 0&&n!==void 0&&!t.includes(n)&&Tc("Your breakpoints array must include the initialBreakpoint value."),Uq(r)}componentDidLoad(){this.isOpen===!0&&Or(()=>this.present()),this.breakpointsChanged(this.breakpoints)}getDelegate(t=!1){if(this.workingDelegate&&!t)return{delegate:this.workingDelegate,inline:this.inline};const n=this.el.parentNode,r=this.inline=n!==null&&!this.hasController,a=this.workingDelegate=r?this.delegate||this.coreDelegate:this.delegate;return{inline:r,delegate:a}}async checkCanDismiss(t,n){const{canDismiss:r}=this;return typeof r=="function"?r(t,n):r}async present(){if(this.presented)return;const{presentingElement:t,el:n}=this;this.currentTransition!==void 0&&await this.currentTransition,this.currentBreakpoint=this.initialBreakpoint;const{inline:r,delegate:a}=this.getDelegate(!0);this.usersElement=await GI(a,n,this.component,["ion-page"],this.componentProps,r),this.ionMount.emit(),rO(n)?await Vy(this.usersElement):this.keepContentsMounted||await rq(),Ti(()=>this.el.classList.add("show-modal")),this.currentTransition=Kq(this,"modalEnter",Z_,cX,{presentingEl:t,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),Or(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(Gy,this.keyboardOpenCallback));const i=t!==void 0;i&&ht(this)==="ios"&&(this.statusBarStyle=await am.getStyle(),PO()),await this.currentTransition,this.isSheetModal?this.initSheetGesture():i&&this.initSwipeToClose(),this.currentTransition=void 0}initSwipeToClose(){var t;if(ht(this)!=="ios")return;const{el:n}=this,r=this.leaveAnimation||ft.get("modalLeave",Q_),a=this.animation=r(n,{presentingEl:this.presentingElement});if(!yk(n)){vk(n);return}const s=(t=this.statusBarStyle)!==null&&t!==void 0?t:jc.Default;this.gesture=oX(n,a,s,()=>{this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{await this.dismiss(void 0,_f),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:t,initialBreakpoint:n,backdropBreakpoint:r}=this;if(!t||n===void 0)return;const a=this.enterAnimation||ft.get("modalEnter",Z_),i=this.animation=a(this.el,{presentingEl:this.presentingElement,currentBreakpoint:n,backdropBreakpoint:r});i.progressStart(!0,1);const{gesture:s,moveSheetToBreakpoint:o}=fX(this.el,this.backdropEl,t,n,r,i,this.sortedBreakpoints,()=>{var l;return(l=this.currentBreakpoint)!==null&&l!==void 0?l:0},()=>this.sheetOnDismiss(),l=>{this.currentBreakpoint!==l&&(this.currentBreakpoint=l,this.ionBreakpointDidChange.emit({breakpoint:l}))});this.gesture=s,this.moveSheetToBreakpoint=o,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,_f),this.gestureAnimationDismissing=!1})}async dismiss(t,n){var r;if(this.gestureAnimationDismissing&&n!==_f||n!=="handler"&&!await this.checkCanDismiss(t,n))return!1;const{presentingElement:a}=this;a!==void 0&&ht(this)==="ios"&&zO(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(Gy,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0),this.currentTransition!==void 0&&await this.currentTransition;const s=Uy.get(this)||[];this.currentTransition=Yq(this,t,n,"modalLeave",Q_,pX,{presentingEl:a,currentBreakpoint:(r=this.currentBreakpoint)!==null&&r!==void 0?r:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});const o=await this.currentTransition;if(o){const{delegate:l}=this.getDelegate();await xO(l,this.usersElement),Ti(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),s.forEach(d=>d.destroy())}return this.currentBreakpoint=void 0,this.currentTransition=void 0,this.animation=void 0,o}onDidDismiss(){return z_(this.el,"ionModalDidDismiss")}onWillDismiss(){return z_(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(t){if(!this.isSheetModal){Tc("setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(t)){Tc("Attempted to set invalid breakpoint value ".concat(t,". Please double check that the breakpoint value is part of your defined breakpoints."));return}const{currentBreakpoint:n,moveSheetToBreakpoint:r,canDismiss:a,breakpoints:i}=this;n!==t&&r&&(this.sheetTransition=r({breakpoint:t,breakpointOffset:1-n,canDismiss:a!==void 0&&a!==!0&&i[0]===0}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:t,currentBreakpoint:n}=this;if(!t||n==null)return!1;const r=t.filter(o=>o!==0),i=(r.indexOf(n)+1)%r.length,s=r[i];return await this.setCurrentBreakpoint(s),!0}render(){const{handle:t,isSheetModal:n,presentingElement:r,htmlAttributes:a,handleBehavior:i,inheritedAttributes:s}=this,o=t!==!1&&n,l=ht(this),d=r!==void 0&&l==="ios",u=i==="cycle";return xe(sn,Object.assign({"no-router":!0,tabindex:"-1"},a,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign({[l]:!0,"modal-default":!d&&!n,"modal-card":d,"modal-sheet":n,"overlay-hidden":!0},wK(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),xe("ion-backdrop",{ref:c=>this.backdropEl=c,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),l==="ios"&&xe("div",{class:"modal-shadow"}),xe("div",Object.assign({role:"dialog"},s,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:c=>this.wrapperEl=c}),o&&xe("button",{class:"modal-handle",tabIndex:u?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:u?this.onHandleClick:void 0,part:"handle"}),xe("slot",null)))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:mX,md:gX}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]}]),yX={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function vX(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(t=>{switch(t){case"ion-modal":customElements.get(t)||customElements.define(t,bX);break;case"ion-backdrop":customElements.get(t)||vK();break}})}const xX=vX,wX="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",kX=nn(class extends rn{constructor(){super(),this.__registerHost()}componentDidLoad(){IX(async()=>{const t=to(window,"hybrid");if(ft.getBoolean("_testing")||fi(()=>import("./index9-909ce3ea.js"),[]).then(r=>r.startTapClick(ft)),ft.getBoolean("statusTap",t)&&fi(()=>import("./status-tap-aa1dca8e.js"),[]).then(r=>r.startStatusTap()),ft.getBoolean("inputShims",SX())){const r=to(window,"ios")?"ios":"android";fi(()=>import("./input-shims-223d2d7a.js"),[]).then(a=>a.startInputShims(ft,r))}const n=await fi(()=>Promise.resolve().then(()=>Pq),void 0);ft.getBoolean("hardwareBackButton",t)?n.startHardwareBackButton():n.blockHardwareBackButton(),typeof window<"u"&&fi(()=>Promise.resolve().then(()=>sX),void 0).then(r=>r.startKeyboardAssist(window)),fi(()=>import("./focus-visible-9c13edeb.js"),[]).then(r=>this.focusVisible=r.startFocusVisible())})}async setFocus(t){this.focusVisible&&this.focusVisible.setFocus(t)}render(){const t=ht(this);return xe(sn,{class:{[t]:!0,"ion-page":!0,"force-statusbar-padding":ft.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return wX}},[0,"ion-app",{setFocus:[64]}]),SX=()=>!!(to(window,"ios")&&to(window,"mobile")||to(window,"android")&&to(window,"mobileweb")),IX=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)};function $X(){if(typeof customElements>"u")return;["ion-app"].forEach(t=>{switch(t){case"ion-app":customElements.get(t)||customElements.define(t,kX);break}})}const CX=$X;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const EX=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-hover:transparent;--background-hover-opacity:1;--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #3880ff);--icon-margin-end:1px;--icon-margin-start:-4px;--icon-font-size:1.6em;--min-height:32px;font-size:17px}.button-native{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:visible;z-index:99}:host(.ion-activated) .button-native{opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',TX=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--border-radius:4px;--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:0.04;--color:currentColor;--icon-margin-end:0;--icon-margin-start:0;--icon-font-size:24px;--icon-font-weight:normal;--min-height:32px;--min-width:44px;--padding-start:12px;--padding-end:12px;font-size:14px;font-weight:500;text-transform:uppercase}:host(.back-button-has-icon-only){--border-radius:50%;min-width:48px;height:48px}.button-native{-webkit-box-shadow:none;box-shadow:none}.button-text{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:0;padding-bottom:0}ion-icon{line-height:0.67;text-align:start}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}',NX=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async t=>{const n=this.el.closest("ion-nav");return t.preventDefault(),n&&await n.canGoBack()?n.pop({animationBuilder:this.routerAnimation,skipIfBusy:!0}):CO(this.defaultHref,t,"back",this.routerAnimation)},this.color=void 0,this.defaultHref=void 0,this.disabled=!1,this.icon=void 0,this.text=void 0,this.type="button",this.routerAnimation=void 0}componentWillLoad(){this.inheritedAttributes=WI(this.el),this.defaultHref===void 0&&(this.defaultHref=ft.get("backButtonDefaultHref"))}get backButtonIcon(){const t=this.icon;return t!=null?t:ht(this)==="ios"?ft.get("backButtonIcon",tK):ft.get("backButtonIcon",eK)}get backButtonText(){const t=ht(this)==="ios"?"Back":null;return this.text!=null?this.text:ft.get("backButtonText",t)}get hasIconOnly(){return this.backButtonIcon&&!this.backButtonText}get rippleType(){return this.hasIconOnly?"unbounded":"bounded"}render(){const{color:t,defaultHref:n,disabled:r,type:a,hasIconOnly:i,backButtonIcon:s,backButtonText:o,icon:l,inheritedAttributes:d}=this,u=n!==void 0,c=ht(this),h=d["aria-label"]||o||"back";return xe(sn,{onClick:this.onClick,class:Po(t,{[c]:!0,button:!0,"back-button-disabled":r,"back-button-has-icon-only":i,"in-toolbar":ua("ion-toolbar",this.el),"in-toolbar-color":ua("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0,"show-back-button":u})},xe("button",{type:a,disabled:r,class:"button-native",part:"native","aria-label":h},xe("span",{class:"button-inner"},s&&xe("ion-icon",{part:"icon",icon:s,"aria-hidden":"true",lazy:!1,"flip-rtl":l===void 0}),o&&xe("span",{part:"text","aria-hidden":"true",class:"button-text"},o)),c==="md"&&xe("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:EX,md:TX}}},[33,"ion-back-button",{color:[513],defaultHref:[1025,"default-href"],disabled:[516],icon:[1],text:[1],type:[1],routerAnimation:[16]}]);function _X(){if(typeof customElements>"u")return;["ion-back-button","ion-icon","ion-ripple-effect"].forEach(t=>{switch(t){case"ion-back-button":customElements.get(t)||customElements.define(t,NX);break;case"ion-icon":customElements.get(t)||mK();break;case"ion-ripple-effect":customElements.get(t)||qI();break}})}const AX=_X,RX=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}",DX=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=pt(this,"ionNavWillLoad",7),this.ionNavWillChange=pt(this,"ionNavWillChange",3),this.ionNavDidChange=pt(this,"ionNavDidChange",3),this.gestureOrAnimationInProgress=!1,this.mode=ht(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const t=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await fi(()=>import("./swipe-back-38a72425.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>t(),n=>{var r;return(r=this.ani)===null||r===void 0?void 0:r.progressStep(n)},(n,r,a)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(n)},{oneTimeCallback:!0});let i=n?-.001:.001;n?i+=Hc([0,0],[.32,.72],[0,1],[1,1],r)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=Hc([0,0],[1,0],[.68,.28],[1,1],r)[0]),this.ani.progressEnd(n?1:0,i,a)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(t,n,r){const a=await this.lock();let i=!1;try{i=await this.transition(t,n,r)}catch(s){console.error(s)}return a(),i}async setRouteId(t,n,r,a){return{changed:await this.setRoot(t,n,{duration:r==="root"?0:void 0,direction:r==="back"?"back":"forward",animationBuilder:a}),element:this.activeEl}}async getRouteId(){const t=this.activeEl;return t?{id:t.tagName,element:t,params:this.activeParams}:void 0}async setRoot(t,n,r){if(this.activeComponent===t&&aO(n,this.activeParams))return!1;const a=this.activeEl,i=await GI(this.delegate,this.el,t,["ion-page","ion-page-invisible"],n);return this.activeComponent=t,this.activeEl=i,this.activeParams=n,await this.commit(i,a,r),await xO(this.delegate,a),!0}async transition(t,n,r={}){if(n===t)return!1;this.ionNavWillChange.emit();const{el:a,mode:i}=this,s=this.animated&&ft.getBoolean("animated",!0),o=r.animationBuilder||this.animation||ft.get("navAnimation");return await oO(Object.assign(Object.assign({mode:i,animated:s,enteringEl:t,leavingEl:n,baseEl:a,deepWait:rO(a),progressCallback:r.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},r),{animationBuilder:o})),this.ionNavDidChange.emit(),!0}async lock(){const t=this.waitPromise;let n;return this.waitPromise=new Promise(r=>n=r),t!==void 0&&await t,n}render(){return xe("slot",null)}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return RX}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);function FX(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(t=>{switch(t){case"ion-router-outlet":customElements.get(t)||customElements.define(t,DX);break}})}const MX=FX;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const OX=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",LX=":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",PX=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=pt(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await r7(async(t,n)=>{t===!1&&n!==void 0&&await n,this.keyboardVisible=t})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:t,translucent:n,keyboardVisible:r}=this,a=ht(this),i=r&&this.el.getAttribute("slot")!=="top";return xe(sn,{role:"tablist","aria-hidden":i?"true":null,class:Po(t,{[a]:!0,"tab-bar-translucent":n,"tab-bar-hidden":i})},xe("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:OX,md:LX}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);function zX(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(t=>{switch(t){case"ion-tab-bar":customElements.get(t)||customElements.define(t,PX);break}})}const BX=zX;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const WX=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',VX=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',UX=nn(class extends rn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=pt(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=t=>{(t.key==="Enter"||t.key===" ")&&this.selectTab(t)},this.onClick=t=>{this.selectTab(t)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(t){const n=t.target,r=this.el.parentElement;(t.composedPath().includes(r)||n!=null&&n.contains(this.el))&&(this.selected=this.tab===t.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},y0(this.el,["aria-label"])),this.layout===void 0&&(this.layout=ft.get("tabButtonLayout","icon-top"))}selectTab(t){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),t.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:t,hasIcon:n,hasLabel:r,href:a,rel:i,target:s,layout:o,selected:l,tab:d,inheritedAttributes:u}=this,c=ht(this),h={download:this.download,href:a,rel:i,target:s};return xe(sn,{onClick:this.onClick,onKeyup:this.onKeyUp,id:d!==void 0?"tab-button-".concat(d):null,class:{[c]:!0,"tab-selected":l,"tab-disabled":t,"tab-has-label":r,"tab-has-icon":n,"tab-has-label-only":r&&!n,"tab-has-icon-only":n&&!r,["tab-layout-".concat(o)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},xe("a",Object.assign({},h,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":t?"true":null,tabindex:t?"-1":void 0},u),xe("span",{class:"button-inner"},xe("slot",null)),c==="md"&&xe("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:WX,md:VX}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function HX(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(t=>{switch(t){case"ion-tab-button":customElements.get(t)||customElements.define(t,UX);break;case"ion-ripple-effect":customElements.get(t)||qI();break}})}const jX=HX,rc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ac,UO,x0,HO=!1,Xy=!1,JI=!1,Sa=!1,J_=null,Ik=!1;const GX=e=>{const t=new URL(e,Ir.$resourcesUrl$);return t.origin!==Lm.location.origin?t.href:t.pathname},Bl=(e,t="")=>()=>{},eA="http://www.w3.org/1999/xlink",tA={},qX="http://www.w3.org/2000/svg",KX="http://www.w3.org/1999/xhtml",XX=e=>e!=null,e$=e=>(e=typeof e,e==="object"||e==="function");function YX(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const Af=(e,t,...n)=>{let r=null,a=null,i=null,s=!1,o=!1;const l=[],d=c=>{for(let h=0;h<c.length;h++)r=c[h],Array.isArray(r)?d(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!e$(r))&&(r=String(r)),s&&o?l[l.length-1].$text$+=r:l.push(s?Yy(null,r):r),o=s)};if(d(n),t){t.key&&(a=t.key),t.name&&(i=t.name);{const c=t.className||t.class;c&&(t.class=typeof c!="object"?c:Object.keys(c).filter(h=>c[h]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,QX);const u=Yy(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=a,u.$name$=i,u},Yy=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},jO={},ZX=e=>e&&e.$tag$===jO,QX={forEach:(e,t)=>e.map(nA).forEach(t),map:(e,t)=>e.map(nA).map(t).map(JX)},nA=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),JX=e=>{if(typeof e.vtag=="function"){const n=Object.assign({},e.vattrs);return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),Af(e.vtag,n,...e.vchildren||[])}const t=Yy(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},e9=e=>C9.map(t=>t(e)).find(t=>!!t),t9=(e,t)=>e!=null&&!e$(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,rA=new WeakMap,n9=(e,t,n)=>{let r=Qy.get(e);_9&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,Qy.set(e,r)},r9=(e,t,n,r)=>{var a;let i=GO(t,n);const s=Qy.get(i);if(e=e.nodeType===11?e:Si,s)if(typeof s=="string"){e=e.head||e;let o=rA.get(e),l;if(o||rA.set(e,o=new Set),!o.has(i)){{l=Si.createElement("style"),l.innerHTML=s;const d=(a=Ir.$nonce$)!==null&&a!==void 0?a:YX(Si);d!=null&&l.setAttribute("nonce",d),e.insertBefore(l,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},a9=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,a=Bl("attachStyles",t.$tagName$),i=r9(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);r&10&&(n["s-sc"]=i,n.classList.add(i+"-h"),r&2&&n.classList.add(i+"-s")),a()},GO=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),aA=(e,t,n,r,a,i)=>{if(n!==r){let s=lA(e,t),o=t.toLowerCase();if(t==="class"){const l=e.classList,d=iA(n),u=iA(r);l.remove(...d.filter(c=>c&&!u.includes(c))),l.add(...u.filter(c=>c&&!d.includes(c)))}else if(t==="style"){for(const l in n)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!n||r[l]!==n[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):lA(Lm,o)?t=o.slice(2):t=o[2]+t.slice(3),n&&Ir.rel(e,t,n,!1),r&&Ir.ael(e,t,r,!1);else{const l=e$(r);if((s||l&&r!==null)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{const u=r==null?"":r;t==="list"?s=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch(u){}let d=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(eA,t):e.removeAttribute(t)):(!s||i&4||a)&&!l&&(r=r===!0?"":r,d?e.setAttributeNS(eA,t,r):e.setAttribute(t,r))}}},i9=/\s/,iA=e=>e?e.split(i9):[],qO=(e,t,n,r)=>{const a=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||tA,s=t.$attrs$||tA;for(r in i)r in s||aA(a,r,i[r],void 0,n,t.$flags$);for(r in s)aA(a,r,i[r],s[r],n,t.$flags$)},Zy=(e,t,n,r)=>{const a=t.$children$[n];let i=0,s,o,l;if(HO||(JI=!0,a.$tag$==="slot"&&(ac&&r.classList.add(ac+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)s=a.$elm$=Si.createTextNode(a.$text$);else if(a.$flags$&1)s=a.$elm$=Si.createTextNode("");else{if(Sa||(Sa=a.$tag$==="svg"),s=a.$elm$=Si.createElementNS(Sa?qX:KX,a.$flags$&2?"slot-fb":a.$tag$),Sa&&a.$tag$==="foreignObject"&&(Sa=!1),qO(null,a,Sa),XX(ac)&&s["s-si"]!==ac&&s.classList.add(s["s-si"]=ac),a.$children$)for(i=0;i<a.$children$.length;++i)o=Zy(e,a,i,s),o&&s.appendChild(o);a.$tag$==="svg"?Sa=!1:s.tagName==="foreignObject"&&(Sa=!0)}return s["s-hn"]=x0,a.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=UO,s["s-sn"]=a.$name$||"",l=e&&e.$children$&&e.$children$[n],l&&l.$tag$===a.$tag$&&e.$elm$&&im(e.$elm$,!1)),s},im=(e,t)=>{Ir.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const a=n[r];a["s-hn"]!==x0&&a["s-ol"]&&(YO(a).insertBefore(a,t$(a)),a["s-ol"].remove(),a["s-ol"]=void 0,JI=!0),t&&im(a,t)}Ir.$flags$&=-2},KO=(e,t,n,r,a,i)=>{let s=e["s-cr"]&&e["s-cr"].parentNode||e,o;for(s.shadowRoot&&s.tagName===x0&&(s=s.shadowRoot);a<=i;++a)r[a]&&(o=Zy(null,n,a,e),o&&(r[a].$elm$=o,s.insertBefore(o,t$(t))))},XO=(e,t,n,r,a)=>{for(;t<=n;++t)(r=e[t])&&(a=r.$elm$,JO(r),Xy=!0,a["s-ol"]?a["s-ol"].remove():im(a,!0),a.remove())},s9=(e,t,n,r)=>{let a=0,i=0,s=0,o=0,l=t.length-1,d=t[0],u=t[l],c=r.length-1,h=r[0],p=r[c],f,m;for(;a<=l&&i<=c;)if(d==null)d=t[++a];else if(u==null)u=t[--l];else if(h==null)h=r[++i];else if(p==null)p=r[--c];else if($b(d,h))ic(d,h),d=t[++a],h=r[++i];else if($b(u,p))ic(u,p),u=t[--l],p=r[--c];else if($b(d,p))(d.$tag$==="slot"||p.$tag$==="slot")&&im(d.$elm$.parentNode,!1),ic(d,p),e.insertBefore(d.$elm$,u.$elm$.nextSibling),d=t[++a],p=r[--c];else if($b(u,h))(d.$tag$==="slot"||p.$tag$==="slot")&&im(u.$elm$.parentNode,!1),ic(u,h),e.insertBefore(u.$elm$,d.$elm$),u=t[--l],h=r[++i];else{for(s=-1,o=a;o<=l;++o)if(t[o]&&t[o].$key$!==null&&t[o].$key$===h.$key$){s=o;break}s>=0?(m=t[s],m.$tag$!==h.$tag$?f=Zy(t&&t[i],n,s,e):(ic(m,h),t[s]=void 0,f=m.$elm$),h=r[++i]):(f=Zy(t&&t[i],n,i,e),h=r[++i]),f&&YO(d.$elm$).insertBefore(f,t$(d.$elm$))}a>l?KO(e,r[c+1]==null?null:r[c+1].$elm$,n,r,i,c):i>c&&XO(t,a,l)},$b=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,t$=e=>e&&e["s-ol"]||e,YO=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ic=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,a=t.$children$,i=t.$tag$,s=t.$text$;let o;s===null?(Sa=i==="svg"?!0:i==="foreignObject"?!1:Sa,i==="slot"||qO(e,t,Sa),r!==null&&a!==null?s9(n,r,t,a):a!==null?(e.$text$!==null&&(n.textContent=""),KO(n,null,t,a,0,a.length-1)):r!==null&&XO(r,0,r.length-1),Sa&&i==="svg"&&(Sa=!1)):(o=n["s-cr"])?o.parentNode.textContent=s:e.$text$!==s&&(n.data=s)},ZO=e=>{const t=e.childNodes;let n,r,a,i,s,o;for(r=0,a=t.length;r<a;r++)if(n=t[r],n.nodeType===1){if(n["s-sr"]){for(s=n["s-sn"],n.hidden=!1,i=0;i<a;i++)if(o=t[i].nodeType,t[i]["s-hn"]!==n["s-hn"]||s!==""){if(o===1&&s===t[i].getAttribute("slot")){n.hidden=!0;break}}else if(o===1||o===3&&t[i].textContent.trim()!==""){n.hidden=!0;break}}ZO(n)}},gi=[],QO=e=>{let t,n,r,a,i,s,o=0;const l=e.childNodes,d=l.length;for(;o<d;o++){if(t=l[o],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,a=t["s-sn"],s=r.length-1;s>=0;s--)n=r[s],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==t["s-hn"]&&(sA(n,a)?(i=gi.find(u=>u.$nodeToRelocate$===n),Xy=!0,n["s-sn"]=n["s-sn"]||a,i?i.$slotRefNode$=t:gi.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&gi.map(u=>{sA(u.$nodeToRelocate$,n["s-sn"])&&(i=gi.find(c=>c.$nodeToRelocate$===n),i&&!u.$slotRefNode$&&(u.$slotRefNode$=i.$slotRefNode$))})):gi.some(u=>u.$nodeToRelocate$===n)||gi.push({$nodeToRelocate$:n}));t.nodeType===1&&QO(t)}},sA=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",JO=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(JO)},o9=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||Yy(null,null),i=ZX(t)?t:Af(null,null,t);x0=n.tagName,r.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},r.$attrsToReflect$.map(([s,o])=>i.$attrs$[o]=n[s])),i.$tag$=null,i.$flags$|=4,e.$vnode$=i,i.$elm$=a.$elm$=n.shadowRoot||n,ac=n["s-sc"],UO=n["s-cr"],HO=(r.$flags$&1)!==0,Xy=!1,ic(a,i);{if(Ir.$flags$|=1,JI){QO(i.$elm$);let s,o,l,d,u,c,h=0;for(;h<gi.length;h++)s=gi[h],o=s.$nodeToRelocate$,o["s-ol"]||(l=Si.createTextNode(""),l["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=l,o));for(h=0;h<gi.length;h++)if(s=gi[h],o=s.$nodeToRelocate$,s.$slotRefNode$){for(d=s.$slotRefNode$.parentNode,u=s.$slotRefNode$.nextSibling,l=o["s-ol"];l=l.previousSibling;)if(c=l["s-nr"],c&&c["s-sn"]===o["s-sn"]&&d===c.parentNode&&(c=c.nextSibling,!c||!c["s-nr"])){u=c;break}(!u&&d!==o.parentNode||o.nextSibling!==u)&&o!==u&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),d.insertBefore(o,u))}else o.nodeType===1&&(o.hidden=!0)}Xy&&ZO(i.$elm$),Ir.$flags$&=-2,gi.length=0}},l9=(e,t)=>{},e3=(e,t)=>(e.$flags$|=16,l9(e,e.$ancestorComponent$),D9(()=>u9(e,t))),u9=(e,t)=>{const n=e.$hostElement$,r=Bl("scheduleUpdate",e.$cmpMeta$.$tagName$),a=n;let i;return t?i=Nc(a,"componentWillLoad"):i=Nc(a,"componentWillUpdate"),i=oA(i,()=>Nc(a,"componentWillRender")),r(),oA(i,()=>d9(e,a,t))},d9=async(e,t,n)=>{const r=e.$hostElement$,a=Bl("update",e.$cmpMeta$.$tagName$);r["s-rc"],n&&a9(e);const i=Bl("render",e.$cmpMeta$.$tagName$);c9(e,t,r),i(),a(),h9(e)},c9=(e,t,n)=>{try{J_=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(rc.hasRenderFn||rc.reflect)&&(rc.vdomRender||rc.reflect)&&(rc.hydrateServerSide||o9(e,t))}catch(o){Om(o,e.$hostElement$)}return J_=null,null},h9=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Bl("postUpdate",t),a=n;e.$ancestorComponent$,Nc(a,"componentDidRender"),e.$flags$&64?(Nc(a,"componentDidUpdate"),r()):(e.$flags$|=64,Nc(a,"componentDidLoad"),r())},Nc=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){Om(r)}},oA=(e,t)=>e&&e.then?e.then(t):t(),p9=(e,t)=>w0(e).$instanceValues$.get(t),f9=(e,t,n,r)=>{const a=w0(e),i=e,s=a.$instanceValues$.get(t),o=a.$flags$,l=i;n=t9(n,r.$members$[t][0]);const d=Number.isNaN(s)&&Number.isNaN(n);if(n!==s&&!d){a.$instanceValues$.set(t,n);{if(r.$watchers$&&o&128){const c=r.$watchers$[t];c&&c.map(h=>{try{l[h](n,s,t)}catch(p){Om(p,i)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,s,t)===!1)return;e3(a,!1)}}}},m9=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),a=e.prototype;r.map(([i,[s]])=>{(s&31||s&32)&&Object.defineProperty(a,i,{get(){return p9(this,i)},set(o){f9(this,i,o,t)},configurable:!0,enumerable:!0})});{const i=new Map;a.attributeChangedCallback=function(s,o,l){Ir.jmp(()=>{const d=i.get(s);if(this.hasOwnProperty(d))l=this[d],delete this[d];else if(a.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==l)return;this[d]=l===null&&typeof this[d]=="boolean"?!1:l})},e.observedAttributes=r.filter(([s,o])=>o[0]&15).map(([s,o])=>{const l=o[1]||s;return i.set(l,s),o[0]&512&&t.$attrsToReflect$.push([s,l]),l})}}return e},g9=async(e,t,n,r,a)=>{if(!(t.$flags$&32)&&(a=e.constructor,t.$flags$|=32,customElements.whenDefined(n.$tagName$).then(()=>t.$flags$|=128),a.style)){let s=a.style;typeof s!="string"&&(s=s[t.$modeName$=e9(e)]);const o=GO(n,t.$modeName$);if(!Qy.has(o)){const l=Bl("registerStyles",n.$tagName$);n9(o,s,!!(n.$flags$&1)),l()}}t.$ancestorComponent$,(()=>e3(t,!0))()},b9=e=>{},y9=e=>{if(!(Ir.$flags$&1)){const t=w0(e),n=t.$cmpMeta$,r=Bl("connectedCallback",n.$tagName$);t.$flags$&1?(t3(e,t,n.$listeners$),b9(t.$lazyInstance$)):(t.$flags$|=1,n.$flags$&12&&v9(e),n.$members$&&Object.entries(n.$members$).map(([a,[i]])=>{if(i&31&&e.hasOwnProperty(a)){const s=e[a];delete e[a],e[a]=s}}),g9(e,t,n)),r()}},v9=e=>{const t=e["s-cr"]=Si.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},x9=e=>{if(!(Ir.$flags$&1)){const t=w0(e);t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0)}},w9=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){$9(this,n)},connectedCallback(){y9(this),r&&r.call(this)},disconnectedCallback(){x9(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),e.is=n.$tagName$,m9(e,n)},t3=(e,t,n,r)=>{n&&n.map(([a,i,s])=>{const o=S9(e,a),l=k9(t,s),d=I9(a);Ir.ael(o,i,l,d),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Ir.rel(o,i,l,d))})},k9=(e,t)=>n=>{try{rc.lazyLoad||e.$hostElement$[t](n)}catch(r){Om(r)}},S9=(e,t)=>t&4?Si:t&8?Lm:t&16?Si.body:e,I9=e=>T9?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,n3=new WeakMap,w0=e=>n3.get(e),$9=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return t3(e,n,t.$listeners$),n3.set(e,n)},lA=(e,t)=>t in e,Om=(e,t)=>(0,console.error)(e,t),Qy=new Map,C9=[],Lm=typeof window<"u"?window:{},Si=Lm.document||{head:{}},E9=Lm.HTMLElement||class{},Ir={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},T9=(()=>{let e=!1;try{Si.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(t){}return e})(),N9=e=>Promise.resolve(e),_9=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(e){}return!1})(),uA=[],r3=[],A9=(e,t)=>n=>{e.push(n),Ik||(Ik=!0,t&&Ir.$flags$&4?R9($k):Ir.raf($k))},dA=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Om(n)}e.length=0},$k=()=>{dA(uA),dA(r3),(Ik=uA.length>0)&&Ir.raf($k)},R9=e=>N9().then(e),D9=A9(r3,!0);let jw;const F9=()=>{if(typeof window>"u")return new Map;if(!jw){const e=window;e.Ionicons=e.Ionicons||{},jw=e.Ionicons.map=e.Ionicons.map||new Map}return jw},M9=e=>{let t=Gw(e.src);return t||(t=a3(e.name,e.icon,e.mode,e.ios,e.md),t?O9(t):e.icon&&(t=Gw(e.icon),t||(t=Gw(e.icon[e.mode]),t))?t:null)},O9=e=>{const t=F9().get(e);return t||GX("svg/".concat(e,".svg"))},a3=(e,t,n,r,a)=>(n=(n&&Cb(n))==="ios"?"ios":"md",r&&n==="ios"?e=Cb(r):a&&n==="md"?e=Cb(a):(!e&&t&&!i3(t)&&(e=t),Jy(e)&&(e=Cb(e))),!Jy(e)||e.trim()===""||e.replace(/[a-z]|-|\d/gi,"")!==""?null:e),Gw=e=>Jy(e)&&(e=e.trim(),i3(e))?e:null,i3=e=>e.length>0&&/(\/|\.)/.test(e),Jy=e=>typeof e=="string",Cb=e=>e.toLowerCase(),L9=(e,t=[])=>{const n={};return t.forEach(r=>{e.hasAttribute(r)&&(e.getAttribute(r)!==null&&(n[r]=e.getAttribute(r)),e.removeAttribute(r))}),n},P9=e=>e&&e.dir!==""?e.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",z9=e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].nodeName.toLowerCase()!=="svg"&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const r=n.getAttribute("class")||"";if(n.setAttribute("class",(r+" s-ion-icon").trim()),s3(n))return t.innerHTML}return""},s3=e=>{if(e.nodeType===1){if(e.nodeName.toLowerCase()==="script")return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(Jy(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let t=0;t<e.childNodes.length;t++)if(!s3(e.childNodes[t]))return!1}return!0},B9=e=>e.startsWith("data:image/svg+xml"),W9=e=>e.indexOf(";utf8,")!==-1,wl=new Map,cA=new Map;let qw;const V9=(e,t)=>{let n=cA.get(e);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(B9(e)&&W9(e)){qw||(qw=new DOMParser);const a=qw.parseFromString(e,"text/html").querySelector("svg");return a&&wl.set(e,a.outerHTML),Promise.resolve()}else n=fetch(e).then(r=>{if(r.ok)return r.text().then(a=>{a&&t!==!1&&(a=z9(a)),wl.set(e,a||"")});wl.set(e,"")}),cA.set(e,n);else return wl.set(e,""),Promise.resolve();return n},U9=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",H9=w9(class extends E9{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=j9(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=L9(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver(a=>{a[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())},{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=M9(this);e&&(wl.has(e)?this.svgContent=wl.get(e):V9(e,this.sanitize).then(()=>this.svgContent=wl.get(e)))}this.iconName=a3(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:n,el:r}=this,a=this.mode||"md",i=t?(t.includes("arrow")||t.includes("chevron"))&&e!==!1:!1,s=e||i;return Af(jO,Object.assign({role:"img",class:Object.assign(Object.assign({[a]:!0},G9(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":s,"icon-rtl":s&&P9(r)})},n),this.svgContent?Af("div",{class:"icon-inner",innerHTML:this.svgContent}):Af("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return U9}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),j9=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",G9=e=>e?{"ion-color":!0,["ion-color-".concat(e)]:!0}:null;function q9(){if(typeof customElements>"u")return;["ion-icon"].forEach(t=>{switch(t){case"ion-icon":customElements.get(t)||customElements.define(t,H9);break}})}const K9=q9,n$=oe.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{}}),X9=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}onIonViewWillEnter(e){if(e.id){const t=this.ionViewWillEnterCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(e=>e())}onIonViewDidEnter(e){if(e.id){const t=this.ionViewDidEnterCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(e=>e())}onIonViewWillLeave(e){if(e.id){const t=this.ionViewWillLeaveCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(e=>e())}onIonViewDidLeave(e){if(e.id){const t=this.ionViewDidLeaveCallbacks.findIndex(n=>n.id===e.id);t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(e=>e()),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(e){this.componentCanBeDestroyedCallback=e}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},es=oe.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:e=>{typeof window<"u"&&(typeof e=="string"?window.location.pathname=e:window.history.back())},navigate:e=>{typeof window<"u"&&(window.location.pathname=e)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(e,t)=>{typeof window<"u"&&(window.location.pathname=t)},resetTab:(e,t)=>{typeof window<"u"&&(window.location.pathname=t)}}),r$=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),k0=e=>e.replace(/([A-Z])/g,t=>"-".concat(t[0].toLowerCase())),a$=(e,t,n={})=>{if(e instanceof Element){const r=Y9(e.classList,t,n);r!==""&&(e.className=r),Object.keys(t).forEach(a=>{if(!(a==="children"||a==="style"||a==="ref"||a==="class"||a==="className"||a==="forwardedRef"))if(a.indexOf("on")===0&&a[2]===a[2].toUpperCase()){const i=a.substring(2),s=i[0].toLowerCase()+i.substring(1);Pm(s)||Q9(e,s,t[a])}else e[a]=t[a],typeof t[a]==="string"&&e.setAttribute(k0(a),t[a])})}},Y9=(e,t,n)=>{const r=t.className||t.class,a=n.className||n.class,i=Kw(e),s=Kw(r?r.split(" "):[]),o=Kw(a?a.split(" "):[]),l=[];return i.forEach(d=>{s.has(d)?(l.push(d),s.delete(d)):o.has(d)||l.push(d)}),s.forEach(d=>l.push(d)),l.join(" ")},Z9=e=>{switch(e){case"doubleclick":return"dblclick"}return e};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const Pm=e=>{if(typeof document>"u")return!0;{const t="on"+Z9(e);let n=t in document;if(!n){const r=document.createElement("div");r.setAttribute(t,"return;"),n=typeof r[t]=="function"}return n}},Q9=(e,t,n)=>{const r=e.__events||(e.__events={}),a=r[t];a&&e.removeEventListener(t,a),e.addEventListener(t,r[t]=function(s){n&&n.call(this,s)})},Kw=e=>{const t=new Map;return e.forEach(n=>t.set(n,n)),t},J9=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},S0=(...e)=>t=>{e.forEach(n=>{J9(n,t)})},eY=(e,t)=>{const n=(r,a)=>oe.createElement(e,Object.assign({},r,{forwardedRef:a}));return n.displayName=t,oe.forwardRef(n)},tY=(e,t)=>{t!==void 0&&typeof customElements<"u"&&!customElements.get(e)&&customElements.define(e,t)},Un=(e,t,n,r)=>{r!==void 0&&r();const a=r$(e),i=class extends oe.Component{constructor(s){super(s),this.setComponentElRef=o=>{this.componentEl=o}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(s){a$(this.componentEl,this.props,s)}render(){const s=this.props,{children:o,forwardedRef:l,style:d,className:u,ref:c}=s,h=Sr(s,["children","forwardedRef","style","className","ref"]);let p=Object.keys(h).reduce((m,g)=>{const b=h[g];if(g.indexOf("on")===0&&g[2]===g[2].toUpperCase()){const y=g.substring(2).toLowerCase();typeof document<"u"&&Pm(y)&&(m[g]=b)}else{const y=typeof b;(y==="string"||y==="boolean"||y==="number")&&(m[k0(g)]=b)}return m},{});n&&(p=n(this.props,p));const f=Object.assign(Object.assign({},p),{ref:S0(l,this.setComponentElRef),style:d});return ut.createElement(e,f,o)}static get displayName(){return a}};return t&&(i.contextType=t),eY(i,a)},o3=Un("ion-buttons",void 0,void 0,EK),_t=Un("ion-col",void 0,void 0,zK),zm=Un("ion-content",void 0,void 0,GK),da=Un("ion-grid",void 0,void 0,o7),i$=Un("ion-header",void 0,void 0,b7),hA=Un("ion-label",void 0,void 0,y7),ev=Un("ion-nav-link",void 0,void 0,E7),zt=Un("ion-row",void 0,void 0,A7),nY=Un("ion-segment",void 0,void 0,O7),pA=Un("ion-segment-button",void 0,void 0,V7),s$=Un("ion-title",void 0,void 0,q7),o$=Un("ion-toolbar",void 0,void 0,Q7),uu=(e,t)=>{const n=(r,a)=>oe.createElement(e,Object.assign({},r,{forwardedRef:a}));return n.displayName=t,oe.forwardRef(n)},l$=()=>{if(typeof window<"u"){const e=window.Ionic;if(e&&e.config)return e.config}return null},rY=(e,t)=>{tY(e,t);const n=r$(e),r=class extends oe.Component{constructor(a){super(a),this.handleClick=i=>{const{routerLink:s,routerDirection:o,routerOptions:l,routerAnimation:d}=this.props;s!==void 0&&(i.preventDefault(),this.context.navigate(s,o,void 0,d,l))},this.ref=oe.createRef(),this.stableMergedRefs=S0(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(a){const i=this.ref.current;a$(i,this.props,a)}render(){const a=this.props,{children:i,forwardedRef:s,style:o,className:l,ref:d}=a,u=Sr(a,["children","forwardedRef","style","className","ref"]),c=Object.keys(u).reduce((p,f)=>{if(f.indexOf("on")===0&&f[2]===f[2].toUpperCase()){const m=f.substring(2).toLowerCase();Pm(m)&&(p[f]=u[f])}else["string","boolean","number"].includes(typeof u[f])&&(p[k0(f)]=u[f]);return p},{}),h=Object.assign(Object.assign({},c),{ref:this.stableMergedRefs,style:o});if(this.props.routerLink&&!this.props.href&&(h.href=this.props.routerLink),h.onClick){const p=h.onClick;h.onClick=f=>{p(f),f.defaultPrevented||this.handleClick(f)}}else h.onClick=this.handleClick;return ut.createElement(e,h,i)}static get displayName(){return n}static get contextType(){return es}};return uu(r,n)},kn=rY("ion-button",J7),aY=(e,t)=>{e instanceof Element&&Object.keys(t).forEach(n=>{if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const r=n.substring(2),a=r[0].toLowerCase()+r.substring(1);Pm(a)||iY(e,a)}})},iY=(e,t)=>{const n=e.__events||(e.__events={}),r=n[t];r&&(e.removeEventListener(t,r),n[t]=void 0)},sY=(e,t,n)=>{t&&t();const r=r$(e),a=class extends oe.Component{constructor(i){super(i),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=s=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(s)},this.handleDidDismiss=s=>{const o=this.wrapperRef.current,l=this.ref.current;o&&l&&(l.append(o),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(s)},this.ref=oe.createRef(),this.stableMergedRefs=S0(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=oe.createRef()}componentDidMount(){var i,s,o;this.componentDidUpdate(this.props),(i=this.ref.current)===null||i===void 0||i.addEventListener("ionMount",this.handleIonMount),(s=this.ref.current)===null||s===void 0||s.addEventListener("willPresent",this.handleWillPresent),(o=this.ref.current)===null||o===void 0||o.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(i){const s=this.ref.current;a$(s,this.props,i)}componentWillUnmount(){const i=this.ref.current;i&&this.state.isOpen&&(i.removeEventListener("didDismiss",this.handleDidDismiss),i.remove(),aY(i,this.props))}render(){const i=this.props,{children:s,forwardedRef:o,style:l,className:d,ref:u}=i,c=Sr(i,["children","forwardedRef","style","className","ref"]),h=Object.keys(c).reduce((m,g)=>{if(g.indexOf("on")===0&&g[2]===g[2].toUpperCase()){const b=g.substring(2).toLowerCase();Pm(b)&&(m[g]=c[g])}else["string","boolean","number"].includes(typeof c[g])&&(m[k0(g)]=c[g]);return m},{}),p=Object.assign(Object.assign({},h),{ref:this.stableMergedRefs,style:l}),f=()=>n?"".concat(fA," ion-page"):fA;return ut.createElement("template",{},ut.createElement(e,p,this.state.isOpen||this.props.keepContentsMounted?ut.createElement("div",{ref:this.wrapperRef,className:f()},s):null))}static get displayName(){return r}};return uu(a,r)},fA="ion-delegate-host",oY=sY("ion-modal",xX,!0),lY=oe.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),uY=({onAddOverlay:e,onRemoveOverlay:t})=>{const[n,r]=ut.useState({}),a=ut.useRef({});a.current=n,ut.useEffect(()=>{e(i),t(s)},[]);const i=(l,d,u)=>{const c=Object.assign({},a.current);c[l]={component:d,containerElement:u},r(c)},s=l=>{const d=Object.assign({},a.current);delete d[l],r(d)},o=Object.keys(n);return oe.createElement(oe.Fragment,null,o.map(l=>{const d=n[l];return AG.createPortal(d.component,d.containerElement,"overlay-".concat(l))}))},dY=Un("ion-tab-button",void 0,void 0,jX),cY=Un("ion-tab-bar",void 0,void 0,BX),hY=Un("ion-back-button",void 0,void 0,AX),Ck=Un("ion-router-outlet",void 0,void 0,MX),pY=Un("ion-app",void 0,void 0,CX),fY=Un("ion-icon",void 0,void 0,K9),mY=(()=>class extends oe.Component{constructor(e){super(e),this.ionContext={addOverlay:(t,n,r)=>{this.addOverlayCallback&&this.addOverlayCallback(t,n,r)},removeOverlay:t=>{this.removeOverlayCallback&&this.removeOverlayCallback(t)}}}render(){return oe.createElement(lY.Provider,{value:this.ionContext},oe.createElement(pY,Object.assign({},this.props),this.props.children),oe.createElement(uY,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}}))}static get displayName(){return"IonApp"}})(),u$=oe.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class l3 extends oe.PureComponent{constructor(t){super(t),this.ionPageElementRef=oe.createRef(),this.stableMergedRefs=S0(this.ionPageElementRef,this.props.forwardedRef)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const t=this.props,{className:n,children:r,routeInfo:a,forwardedRef:i}=t,s=Sr(t,["className","children","routeInfo","forwardedRef"]);return oe.createElement(n$.Consumer,null,o=>(this.ionLifeCycleContext=o,oe.createElement("div",Object.assign({className:n?"".concat(n," ion-page"):"ion-page",ref:this.stableMergedRefs},s),r)))}static get contextType(){return u$}}class gY extends oe.Component{constructor(t){super(t)}render(){const t=this.props,{className:n,children:r,forwardedRef:a}=t,i=Sr(t,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?oe.createElement(l3,Object.assign({className:n?"".concat(n):"",routeInfo:this.context.routeInfo,forwardedRef:a},i),r):oe.createElement("div",Object.assign({className:n?"ion-page ".concat(n):"ion-page",ref:a},i),r)}static get displayName(){return"IonPage"}static get contextType(){return es}}uu(gY,"IonPage");const bY=(e,t)=>{const n=new WeakMap;return{attachViewToDom:async(i,s,o,l)=>{const d=document.createElement("div");l&&d.classList.add(...l),i.appendChild(d);const u=s(o),c=SI.createPortal(u,d);return n.set(d,c),e(c),Promise.resolve(d)},removeViewFromDom:(i,s)=>{const o=n.get(s);return o&&t(o),s.remove(),Promise.resolve()}}},yY=Un("ion-nav",void 0,void 0,S7),vY=e=>{var{children:t,forwardedRef:n}=e,r=Sr(e,["children","forwardedRef"]);const[a,i]=ut.useState([]),s=d=>i(u=>[...u,d]),o=d=>i(u=>u.filter(c=>c!==d)),l=ut.useMemo(()=>bY(s,o),[]);return oe.createElement(yY,Object.assign({delegate:l,ref:n},r),a)},xY=uu(vY,"IonNav");oe.createContext({activeTab:void 0,selectTab:()=>!1});const wY=typeof HTMLElement<"u"?HTMLElement:class{};class kY extends oe.Component{constructor(t){super(t),this.outletIsReady=!1}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Vc(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const t=this.props,{StackManager:n,children:r,routeInfo:a}=t,i=Sr(t,["StackManager","children","routeInfo"]);return oe.createElement(n$.Consumer,null,s=>(this.ionLifeCycleContext=s,oe.createElement(n,{routeInfo:a},oe.createElement(Ck,Object.assign({setRef:o=>this.ionRouterOutlet=o},i),r))))}static get contextType(){return u$}}class SY extends oe.Component{constructor(t){super(t)}render(){const t=this.context.getStackManager(),n=this.props,{children:r,forwardedRef:a}=n,i=Sr(n,["children","forwardedRef"]);return this.context.hasIonicRouter()?i.ionPage?oe.createElement(kY,Object.assign({StackManager:t,routeInfo:this.context.routeInfo},i),r):oe.createElement(t,{routeInfo:this.context.routeInfo},oe.createElement(Ck,Object.assign({},i,{forwardedRef:a}),r)):oe.createElement(Ck,Object.assign({ref:a},this.props),this.props.children)}static get contextType(){return es}}const IY=uu(SY,"IonRouterOutlet"),Xw=(()=>class extends oe.Component{constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const e=this.props,t=Sr(e,["onClick"]);return oe.createElement(dY,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},t))}static get displayName(){return"IonTabButton"}})();class $Y extends oe.PureComponent{constructor(t){super(t),this.setActiveTabOnContext=r=>{};const n={};oe.Children.forEach(t.children,r=>{var a,i,s,o;r!=null&&typeof r=="object"&&r.props&&(r.type===Xw||r.type.isTabButton)&&(n[r.props.tab]={originalHref:r.props.href,currentHref:r.props.href,originalRouteOptions:r.props.href===((a=t.routeInfo)===null||a===void 0?void 0:a.pathname)?(i=t.routeInfo)===null||i===void 0?void 0:i.routeOptions:void 0,currentRouteOptions:r.props.href===((s=t.routeInfo)===null||s===void 0?void 0:s.pathname)?(o=t.routeInfo)===null||o===void 0?void 0:o.routeOptions:void 0})}),this.state={tabs:n},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const t=this.state.tabs,r=Object.keys(t).find(a=>{const i=t[a].originalHref;return this.props.routeInfo.pathname.startsWith(i)});r&&this.setState({activeTab:r})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(t){const n=this.state.tabs[t];return n?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:n.currentHref,tab:t,selected:t===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(t,n){var r,a,i;const s=Object.assign({},n.tabs),l=Object.keys(n.tabs).find(u=>{const c=n.tabs[u].originalHref;return t.routeInfo.pathname.startsWith(c)});oe.Children.forEach(t.children,u=>{if(u!=null&&typeof u=="object"&&u.props&&(u.type===Xw||u.type.isTabButton)){const c=s[u.props.tab];(!c||c.originalHref!==u.props.href)&&(s[u.props.tab]={originalHref:u.props.href,currentHref:u.props.href,originalRouteOptions:u.props.routeOptions,currentRouteOptions:u.props.routeOptions})}});const{activeTab:d}=n;if(l&&d){const u=n.tabs[d].currentHref,c=n.tabs[d].currentRouteOptions;(l!==d||u!==((r=t.routeInfo)===null||r===void 0?void 0:r.pathname)||c!==((a=t.routeInfo)===null||a===void 0?void 0:a.routeOptions))&&(s[l]={originalHref:s[l].originalHref,currentHref:t.routeInfo.pathname+(t.routeInfo.search||""),originalRouteOptions:s[l].originalRouteOptions,currentRouteOptions:(i=t.routeInfo)===null||i===void 0?void 0:i.routeOptions},t.routeInfo.routeAction==="pop"&&l!==d&&(s[d]={originalHref:s[d].originalHref,currentHref:s[d].originalHref,originalRouteOptions:s[d].originalRouteOptions,currentRouteOptions:s[d].currentRouteOptions}))}return l&&t.onSetCurrentTab(l,t.routeInfo),{activeTab:l,tabs:s}}onTabButtonClick(t,n){const r=this.state.tabs[t.detail.tab],a=r.originalHref,i=t.detail.href,{activeTab:s}=this.state;n&&n(t),s===t.detail.tab?a!==i&&this.context.resetTab(t.detail.tab,a,r.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:t.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:t.detail.tab}})),this.setActiveTabOnContext(t.detail.tab),this.context.changeTab(t.detail.tab,i,t.detail.routeOptions))}renderTabButton(t){return n=>{var r,a;if(n!=null&&n.props&&(n.type===Xw||n.type.isTabButton)){const i=n.props.tab===t?(r=this.props.routeInfo)===null||r===void 0?void 0:r.pathname:this.state.tabs[n.props.tab].currentHref,s=n.props.tab===t?(a=this.props.routeInfo)===null||a===void 0?void 0:a.routeOptions:this.state.tabs[n.props.tab].currentRouteOptions;return oe.cloneElement(n,{href:i,routeOptions:s,onClick:o=>this.onTabButtonClick(o,n.props.onClick)})}return null}}render(){const{activeTab:t}=this.state;return oe.createElement(cY,Object.assign({},this.props,{selectedTab:t}),oe.Children.map(this.props.children,this.renderTabButton(t)))}static get contextType(){return es}}const CY=oe.memo(e=>{var{forwardedRef:t}=e,n=Sr(e,["forwardedRef"]);const r=ut.useContext(es);return oe.createElement($Y,Object.assign({ref:t},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)});uu(CY,"IonTabBar");class EY extends wY{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",EY));const u3=(()=>class extends oe.Component{constructor(){super(...arguments),this.clickButton=e=>{if(e.target&&e.target.closest("ion-nav")!==null)return;const{defaultHref:t,routerAnimation:n}=this.props;this.context.hasIonicRouter()?(e.stopPropagation(),this.context.goBack(t,n)):t!==void 0&&(window.location.href=t)}}render(){return oe.createElement(hY,Object.assign({onClick:this.clickButton},this.props))}static get displayName(){return"IonBackButton"}static get contextType(){return es}})();class TY extends oe.PureComponent{constructor(t){super(t),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var t,n;const r=this.props,{icon:a,ios:i,md:s,mode:o}=r,l=Sr(r,["icon","ios","md","mode"]);let d;const u=l$(),c=o||(u==null?void 0:u.get("mode"));return i||s?c==="ios"?d=(t=i!=null?i:s)!==null&&t!==void 0?t:a:d=(n=s!=null?s:i)!==null&&n!==void 0?n:a:d=a,oe.createElement(fY,Object.assign({ref:this.props.forwardedRef,icon:d},l),this.props.children)}static get contextType(){return es}}uu(TY,"IonIcon");class d$ extends oe.PureComponent{render(){const t=this.context.getIonRoute();return!this.context.hasIonicRouter()||!d$?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):oe.createElement(t,Object.assign({},this.props))}static get contextType(){return es}}class d3 extends oe.PureComponent{render(){const t=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!d3?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):oe.createElement(t,Object.assign({},this.props))}static get contextType(){return es}}const NY=oe.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class eLe extends oe.PureComponent{constructor(t){super(t),this.nodes=new Map,this.animation=fn(t.id)}setupAnimation(t){const n=this.animation;this.nodes.size>0&&n.addElement(Array.from(this.nodes.values())),mA(n,t),gA(n,t)}componentDidMount(){const t=this.props;this.setupAnimation(t)}componentDidUpdate(t){const n=this.animation,r=this.props;mA(n,r,t),_Y(n,r,t),gA(n,r,t)}render(){const{children:t}=this.props;return oe.createElement(oe.Fragment,null,oe.Children.map(t,(n,r)=>oe.cloneElement(n,{ref:a=>this.nodes.set(r,a)})))}}const mA=(e,t={},n={})=>{const r=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const l in t)t.hasOwnProperty(l)&&!r.includes(l)&&t[l]!==n[l]&&e[l](t[l]);const a=t.from;a&&a!==n.from&&(Array.isArray(a)?a:[a]).forEach(d=>e.from(d.property,d.value));const i=t.to;i&&i!==n.to&&(Array.isArray(i)?i:[i]).forEach(d=>e.to(d.property,d.value));const s=t.fromTo;s&&s!==n.fromTo&&(Array.isArray(s)?s:[s]).forEach(d=>e.fromTo(d.property,d.fromValue,d.toValue));const o=t.onFinish;o&&o!==n.onFinish&&(Array.isArray(o)?o:[o]).forEach(d=>e.onFinish(d.callback,d.opts))},_Y=(e,t={},n={})=>{var r,a,i,s,o;const{progressStart:l,progressStep:d,progressEnd:u}=t;l&&(((r=n.progressStart)===null||r===void 0?void 0:r.forceLinearEasing)!==(l==null?void 0:l.forceLinearEasing)||((a=n.progressStart)===null||a===void 0?void 0:a.step)!==(l==null?void 0:l.step))&&e.progressStart(l.forceLinearEasing,l.step),d&&((i=n.progressStep)===null||i===void 0?void 0:i.step)!==(d==null?void 0:d.step)&&e.progressStep(d.step),u&&(((s=n.progressEnd)===null||s===void 0?void 0:s.playTo)!==(u==null?void 0:u.playTo)||((o=n.progressEnd)===null||o===void 0?void 0:o.step)!==(u==null?void 0:u.step)||(n==null?void 0:n.dur)!==(u==null?void 0:u.dur))&&e.progressEnd(u.playTo,u.step,u.dur)},gA=(e,t={},n={})=>{!n.play&&t.play&&e.play(),!n.pause&&t.pause&&e.pause(),!n.stop&&t.stop&&e.stop(),!n.destroy&&t.destroy&&e.destroy()},bA={main:0},tv=(e="main")=>{var t;const n=((t=bA[e])!==null&&t!==void 0?t:0)+1;return bA[e]=n,n.toString()},c3=(e={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),Fq(Object.assign({},e))},h3=oe.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class yA extends oe.Component{constructor(t){super(t),this.ionLifeCycleContext=new X9,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:t}=this.state;return oe.createElement(n$.Provider,{value:this.ionLifeCycleContext},t&&this.props.children)}}class AY{constructor(){this.locationHistory=[],this.tabHistory={}}add(t){t.routeAction==="push"||t.routeAction==null?this._add(t):t.routeAction==="pop"?this._pop(t):t.routeAction==="replace"&&this._replace(t),t.routeDirection==="root"&&(this._clear(),this._add(t))}clearTabStack(t){const n=this._getRouteInfosByKey(t);n&&(n.forEach(r=>{this.locationHistory=this.locationHistory.filter(a=>a.id!==r.id)}),this.tabHistory[t]=[])}update(t){const n=this.locationHistory.findIndex(a=>a.id===t.id);n>-1&&this.locationHistory.splice(n,1,t);const r=this.tabHistory[t.tab||""];if(r){const a=r.findIndex(i=>i.id===t.id);a>-1?r.splice(a,1,t):r.push(t)}else t.tab&&(this.tabHistory[t.tab]=[t])}_add(t){const n=this._getRouteInfosByKey(t.tab);n&&(this._areRoutesEqual(n[n.length-1],t)&&n.pop(),n.push(t)),this.locationHistory.push(t)}_areRoutesEqual(t,n){return!t||!n?!1:t.pathname===n.pathname&&t.search===n.search}_pop(t){const n=this._getRouteInfosByKey(t.tab);n&&(n.pop(),n.pop(),n.push(t)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(t)}_replace(t){const n=this._getRouteInfosByKey(t.tab);n&&n.pop(),this.locationHistory.pop(),this._add(t)}_clear(){Object.keys(this.tabHistory).forEach(n=>this.tabHistory[n]=[]),this.locationHistory=[]}_getRouteInfosByKey(t){let n;return t&&(n=this.tabHistory[t],n||(n=this.tabHistory[t]=[])),n}getFirstRouteInfoForTab(t){const n=this._getRouteInfosByKey(t);if(n)return n[0]}getCurrentRouteInfoForTab(t){const n=this._getRouteInfosByKey(t);if(n)return n[n.length-1]}findLastLocation(t){const n=this._getRouteInfosByKey(t.tab);if(n)for(let r=n.length-2;r>=0;r--){const a=n[r];if(a&&a.pathname===t.pushedByRoute)return a}for(let r=this.locationHistory.length-2;r>=0;r--){const a=this.locationHistory[r];if(a&&a.pathname===t.pushedByRoute)return a}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class RY extends oe.PureComponent{constructor(t){super(t),this.ionRouterContextValue={push:(n,r,a,i,s)=>{this.navigate(n,r,a,s,i)},back:n=>{this.goBack(void 0,n)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(t){t.detail.register(0,n=>{this.nativeGoBack(),n()})}goBack(t,n){this.props.onNavigateBack(t,n)}nativeGoBack(){this.props.onNativeBack()}navigate(t,n="forward",r="push",a,i,s){this.props.onNavigate(t,r,n,a,i,s)}getPageManager(){return l3}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return oe.createElement(es.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},oe.createElement(NY.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class DY{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(t){const{outletId:n}=t;this.viewStacks[n]?this.viewStacks[n].push(t):this.viewStacks[n]=[t]}clear(t){return setTimeout(()=>{delete this.viewStacks[t]},500)}getViewItemsForOutlet(t){return this.viewStacks[t]||[]}remove(t){const{outletId:n}=t,r=this.viewStacks[n];if(r){const a=r.find(i=>i.id===t.id);a&&(a.mount=!1,this.viewStacks[n]=r.filter(i=>i.id!==a.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const t=this.getStackIds(),n=[];return t.forEach(r=>{n.push(...this.viewStacks[r])}),n}}class FY extends oe.PureComponent{render(){return oe.createElement(ds,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}class MY extends DY{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(t,n,r,a){const i={id:tv("viewItem"),outletId:t,ionPageElement:a,reactElement:n,mount:!0,ionRoute:!1},s={exact:n.props.exact,path:n.props.path||n.props.from,component:n.props.component},o=Ol(r.pathname,s);return n.type===d$&&(i.ionRoute=!0,i.disableIonPageManagement=n.props.disableIonPageManagement),i.routeData={match:o,childProps:n.props},i}getChildrenToRender(t,n,r){const a=this.getViewItemsForOutlet(t);return oe.Children.forEach(n.props.children,s=>{const o=a.find(l=>vA(s,l.routeData.childProps.path||l.routeData.childProps.from));o&&(o.reactElement=s)}),a.map(s=>{let o;if(s.ionRoute&&!s.disableIonPageManagement)o=oe.createElement(yA,{key:"view-".concat(s.id),mount:s.mount,removeView:()=>this.remove(s)},oe.cloneElement(s.reactElement,{computedMatch:s.routeData.match}));else{const l=vA(s.reactElement,r.pathname);o=oe.createElement(yA,{key:"view-".concat(s.id),mount:s.mount,removeView:()=>this.remove(s)},oe.cloneElement(s.reactElement,{computedMatch:s.routeData.match})),!l&&s.routeData.match&&(s.routeData.match=void 0,s.mount=!1)}return o})}findViewItemByRouteInfo(t,n,r){const{viewItem:a,match:i}=this.findViewItemByPath(t.pathname,n);return(r===void 0||r===!0)&&a&&i&&(a.routeData.match=i),a}findLeavingViewItemByRouteInfo(t,n,r=!0){const{viewItem:a}=this.findViewItemByPath(t.lastPathname,n,!1,r);return a}findViewItemByPathname(t,n){const{viewItem:r}=this.findViewItemByPath(t,n);return r}findViewItemByPath(t,n,r,a){let i,s,o;if(n)o=this.getViewItemsForOutlet(n),o.some(l),i||o.some(d);else{const u=this.getAllViewItems();u.some(l),i||u.some(d)}return{viewItem:i,match:s};function l(u){if(a&&!u.ionRoute)return!1;const c={exact:r?!0:u.routeData.childProps.exact,path:u.routeData.childProps.path||u.routeData.childProps.from,component:u.routeData.childProps.component},h=Ol(t,c);return h?(i=u,s=h,!0):!1}function d(u){return!u.routeData.childProps.path&&!u.routeData.childProps.from?(s={path:t,url:t,isExact:!0,params:{}},i=u,!0):!1}}}function vA(e,t,n){const r={exact:n?!0:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};return Ol(t,r)}function OY(e){let t;if(typeof e=="string"?t=e:t=e.outerHTML,document){const n=document.createElement("div");n.innerHTML=t,n.style.zIndex="";const r=n.getElementsByTagName("ion-back-button");return r[0]&&r[0].remove(),n.firstChild}}const xA=e=>!e.classList.contains("ion-page-invisible")&&!e.classList.contains("ion-page-hidden");class LY extends oe.PureComponent{constructor(t){super(t),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=tv("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(t){const{pathname:n}=this.props.routeInfo,{pathname:r}=t.routeInfo;n!==r?(this.prevProps=t,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(t){var n,r;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let a=this.context.findViewItemByRouteInfo(t,this.id),i=this.context.findLeavingViewItemByRouteInfo(t,this.id);!i&&t.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(t.prevRouteLastPathname,this.id)),i&&(t.routeAction==="replace"?i.mount=!1:t.routeAction==="push"&&t.routeDirection==="forward"?!((n=t.routeOptions)===null||n===void 0)&&n.unmount&&(i.mount=!1):t.routeDirection!=="none"&&a!==i&&(i.mount=!1));const s=PY((r=this.ionRouterOutlet)===null||r===void 0?void 0:r.props.children,t);if(a?a.reactElement=s:s&&(a=this.context.createViewItem(this.id,s,t),this.context.addViewItem(a)),a&&a.ionPageElement){if(a===i&&a.routeData.match.url!==t.pathname||(!i&&this.props.routeInfo.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),xA(a.ionPageElement)&&i!==void 0&&!xA(i.ionPageElement)))return;this.transitionPage(t,a,i)}else i&&!s&&!a&&i.ionPageElement&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(t,n){const r=this.context.findViewItemByRouteInfo(n,this.id);if(r){const a=r.ionPageElement;if(r.ionPageElement=t,r.ionRoute=!0,a===t)return}this.handlePageTransition(n)}async setupRouterOutlet(t){const n=()=>{const i=l$();if(!(i&&i.get("swipeBackEnabled",t.mode==="ios")))return!1;const{routeInfo:o}=this.props,l=this.prevProps&&this.prevProps.routeInfo.pathname===o.pushedByRoute?this.prevProps.routeInfo:{pathname:o.pushedByRoute||""},d=this.context.findViewItemByRouteInfo(l,this.id,!1);return!!d&&d.mount&&d.routeData.match.path!==o.pathname},r=async()=>{const{routeInfo:i}=this.props,s=this.prevProps&&this.prevProps.routeInfo.pathname===i.pushedByRoute?this.prevProps.routeInfo:{pathname:i.pushedByRoute||""},o=this.context.findViewItemByRouteInfo(s,this.id,!1),l=this.context.findViewItemByRouteInfo(i,this.id,!1);return o&&l&&await this.transitionPage(i,o,l,"back",!0),Promise.resolve()},a=i=>{if(i)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:s}=this.props,o=this.prevProps&&this.prevProps.routeInfo.pathname===s.pushedByRoute?this.prevProps.routeInfo:{pathname:s.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(o,this.id,!1),d=this.context.findViewItemByRouteInfo(s,this.id,!1);if(l!==d&&(l==null?void 0:l.ionPageElement)!==void 0){const{ionPageElement:u}=l;u.setAttribute("aria-hidden","true"),u.classList.add("ion-page-hidden")}}};t.swipeHandler={canStart:n,onStart:r,onEnd:a}}async transitionPage(t,n,r,a,i=!1){const s=async(u,c)=>{const h=this.skipTransition;h?this.skipTransition=!1:(u.classList.add("ion-page"),u.classList.add("ion-page-invisible")),await o.commit(u,c,{duration:h||d===void 0?0:void 0,direction:d,showGoBack:!!t.pushedByRoute,progressAnimation:i,animationBuilder:t.routeAnimation})},o=this.routerOutletElement,l=t.routeDirection==="none"||t.routeDirection==="root"?void 0:t.routeDirection,d=a!=null?a:l;if(n&&n.ionPageElement&&this.routerOutletElement)if(r&&r.ionPageElement&&n===r)if(zY(r.reactElement,t.pathname,!0)){const c=OY(r.ionPageElement.outerHTML);c&&(this.routerOutletElement.appendChild(c),await s(n.ionPageElement,c),this.routerOutletElement.removeChild(c))}else await s(n.ionPageElement,void 0);else await s(n.ionPageElement,r==null?void 0:r.ionPageElement),r&&r.ionPageElement&&!i&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:t}=this.props,n=oe.Children.only(t);this.ionRouterOutlet=n;const r=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return oe.createElement(u$.Provider,{value:this.stackContextValue},oe.cloneElement(n,{ref:a=>{n.props.setRef&&n.props.setRef(a),n.props.forwardedRef&&(n.props.forwardedRef.current=a),this.routerOutletElement=a;const{ref:i}=n;typeof i=="function"&&i(a)}},r))}static get contextType(){return h3}}function PY(e,t){let n;return oe.Children.forEach(e,r=>{const a={exact:r.props.exact,path:r.props.path||r.props.from,component:r.props.component};Ol(t.pathname,a)&&(n=r)}),n||(oe.Children.forEach(e,r=>{r.props.path||r.props.from||(n=r)}),n)}function zY(e,t,n){const r={exact:n?!0:e.props.exact,path:e.props.path||e.props.from,component:e.props.component};return Ol(t,r)}class BY extends oe.PureComponent{constructor(t){super(t),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new AY,this.viewStack=new MY,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const n={id:tv("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(n),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:n}}handleChangeTab(t,n,r){if(!n)return;const a=this.locationHistory.getCurrentRouteInfoForTab(t),[i,s]=n.split("?");a?(this.incomingRouteParams=Object.assign(Object.assign({},a),{routeAction:"push",routeDirection:"none"}),a.pathname===i?(this.incomingRouteParams.routeOptions=r,this.props.history.push(a.pathname+(a.search||""))):(this.incomingRouteParams.pathname=i,this.incomingRouteParams.search=s?"?"+s:void 0,this.incomingRouteParams.routeOptions=r,this.props.history.push(i+(s?"?"+s:"")))):this.handleNavigate(i,"push","none",void 0,r,t)}handleHistoryChange(t,n){var r,a,i;let s;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?s=this.locationHistory.previous():s=this.locationHistory.current():s=this.locationHistory.current(),s.pathname+s.search!==t.pathname){if(!this.incomingRouteParams){if(n==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),n==="POP"){const d=this.locationHistory.current();if(d&&d.pushedByRoute){const u=this.locationHistory.findLastLocation(d);this.incomingRouteParams=Object.assign(Object.assign({},u),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((r=t.state)===null||r===void 0?void 0:r.direction)||"forward",routeOptions:(a=t.state)===null||a===void 0?void 0:a.routerOptions,tab:this.currentTab})}let l;if(!((i=this.incomingRouteParams)===null||i===void 0)&&i.id)l=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:s.pathname}),this.locationHistory.add(l);else{const d=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(l=Object.assign(Object.assign({id:tv("routeInfo")},this.incomingRouteParams),{lastPathname:s.pathname,pathname:t.pathname,search:t.search,params:this.props.match.params,prevRouteLastPathname:s.lastPathname}),d)l.tab=s.tab,l.pushedByRoute=s.pathname;else if(l.routeAction==="pop"){const u=this.locationHistory.findLastLocation(l);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="push"&&l.tab!==s.tab){const u=this.locationHistory.getCurrentRouteInfoForTab(l.tab);l.pushedByRoute=u==null?void 0:u.pushedByRoute}else if(l.routeAction==="replace"){const u=this.locationHistory.current(),c=u==null?void 0:u.pushedByRoute,h=c!==void 0&&c!==l.pathname?c:l.pushedByRoute;l.lastPathname=(u==null?void 0:u.pathname)||l.lastPathname,l.prevRouteLastPathname=u==null?void 0:u.lastPathname,l.pushedByRoute=h,l.routeDirection=(u==null?void 0:u.routeDirection)||l.routeDirection,l.routeAnimation=(u==null?void 0:u.routeAnimation)||l.routeAnimation}this.locationHistory.add(l)}this.setState({routeInfo:l})}this.incomingRouteParams=void 0}handleNativeBack(){const t=this.props.history;(t.goBack||t.back)()}handleNavigate(t,n,r,a,i,s){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:n,routeDirection:r,routeOptions:i,routeAnimation:a,tab:s}),n==="push"?this.props.history.push(t):this.props.history.replace(t)}handleNavigateBack(t="/",n){const r=l$();t=t||r&&r.get("backButtonDefaultHref");const a=this.locationHistory.current();if(a&&a.pushedByRoute){const i=this.locationHistory.findLastLocation(a);if(i)if(this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"pop",routeDirection:"back",routeAnimation:n||a.routeAnimation}),a.lastPathname===a.pushedByRoute||i.pathname===a.pushedByRoute&&a.tab===""&&i.tab===""){const s=this.props.history;(s.goBack||s.back)()}else this.handleNavigate(i.pathname+(i.search||""),"pop","back");else this.handleNavigate(t,"pop","back")}else this.handleNavigate(t,"pop","back")}handleResetTab(t,n,r){const a=this.locationHistory.getFirstRouteInfoForTab(t);if(a){const i=Object.assign({},a);i.pathname=n,i.routeOptions=r,this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(i.pathname+(i.search||""))}}handleSetCurrentTab(t){this.currentTab=t;const n=Object.assign({},this.locationHistory.current());n.tab!==t&&(n.tab=t,this.locationHistory.update(n))}render(){return oe.createElement(h3.Provider,{value:this.routeMangerContextState},oe.createElement(RY,{ionRoute:FY,ionRedirect:{},stackManager:LY,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const I0=U5(BY);I0.displayName="IonRouter";class WY extends oe.Component{constructor(t){super(t);const{history:n}=t,r=Sr(t,["history"]);this.history=n||GG(r),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(t,n){const r=t.location||t,a=t.action||n;this.historyListenHandler&&this.historyListenHandler(r,a)}registerHistoryListener(t){this.historyListenHandler=t}render(){const t=this.props,{children:n}=t,r=Sr(t,["children"]);return oe.createElement(Dm,Object.assign({history:this.history},r),oe.createElement(I0,{registerHistoryListener:this.registerHistoryListener},n))}}class tLe extends oe.Component{constructor(t){super(t),this.history=t.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(t,n){const r=t.location||t,a=t.action||n;this.historyListenHandler&&this.historyListenHandler(r,a)}registerHistoryListener(t){this.historyListenHandler=t}render(){const t=this.props,{children:n}=t,r=Sr(t,["children"]);return oe.createElement(Dm,Object.assign({},r),oe.createElement(I0,{registerHistoryListener:this.registerHistoryListener},n))}}class nLe extends oe.Component{constructor(t){super(t);const{history:n}=t,r=Sr(t,["history"]);this.history=n||XG(r),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(t,n){const r=t.location||t,a=t.action||n;this.historyListenHandler&&this.historyListenHandler(r,a)}registerHistoryListener(t){this.historyListenHandler=t}render(){const t=this.props,{children:n}=t,r=Sr(t,["children"]);return oe.createElement(Dm,Object.assign({history:this.history},r),oe.createElement(I0,{registerHistoryListener:this.registerHistoryListener},n))}}var VY=Object.defineProperty,UY=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),c$=(e,t)=>{for(var n in t)VY(e,n,{get:t[n],enumerable:!0})},HY={};c$(HY,{Abs:()=>xh,Acos:()=>cu,Acosh:()=>hu,AdadeltaOptimizer:()=>A2,AdagradOptimizer:()=>R2,AdamOptimizer:()=>D2,AdamaxOptimizer:()=>F2,Add:()=>Bo,AddN:()=>pu,All:()=>wh,Any:()=>kh,ArgMax:()=>Sh,ArgMin:()=>Ih,Asin:()=>fu,Asinh:()=>mu,Atan:()=>gu,Atan2:()=>yu,Atanh:()=>bu,AvgPool:()=>vu,AvgPool3D:()=>$h,AvgPool3DGrad:()=>Um,AvgPoolGrad:()=>Vm,BackendWasm:()=>eH,BatchMatMul:()=>xu,BatchToSpaceND:()=>Ch,Bincount:()=>Eh,BitwiseAnd:()=>Th,BroadcastArgs:()=>Hm,BroadcastTo:()=>E3,Callback:()=>aB,CallbackList:()=>sz,Cast:()=>wu,Ceil:()=>ku,ClipByValue:()=>Wo,Complex:()=>N0,ComplexAbs:()=>jm,Concat:()=>Nh,Conv2D:()=>Su,Conv2DBackpropFilter:()=>_0,Conv2DBackpropInput:()=>Iu,Conv3D:()=>$u,Conv3DBackpropFilterV2:()=>_h,Conv3DBackpropInputV2:()=>Ah,Cos:()=>Cu,Cosh:()=>Eu,CropAndResize:()=>Dh,Cumprod:()=>Rh,Cumsum:()=>Tu,CustomCallback:()=>lz,DataStorage:()=>C0,DenseBincount:()=>Gm,DepthToSpace:()=>Fh,DepthwiseConv2dNative:()=>Nu,DepthwiseConv2dNativeBackpropFilter:()=>A0,DepthwiseConv2dNativeBackpropInput:()=>R0,Diag:()=>qm,Dilation2D:()=>_u,Dilation2DBackpropFilter:()=>Kc,Dilation2DBackpropInput:()=>qc,Draw:()=>y$,ENV:()=>g$,EarlyStopping:()=>iB,Einsum:()=>D0,Elu:()=>Ru,EluGrad:()=>Mh,Environment:()=>$3,Equal:()=>Oh,Erf:()=>Du,Exp:()=>Fu,ExpandDims:()=>Lh,Expm1:()=>Mu,FFT:()=>F0,Fill:()=>Km,FlipLeftRight:()=>Ph,Floor:()=>Ou,FloorDiv:()=>Lu,FromPixels:()=>iv,FusedBatchNorm:()=>Pu,FusedConv2D:()=>Vl,FusedDepthwiseConv2D:()=>Ul,GPGPUContext:()=>cy,GatherNd:()=>Bh,GatherV2:()=>zh,GraphModel:()=>vE,Greater:()=>Wh,GreaterEqual:()=>zu,History:()=>oz,IFFT:()=>M0,Identity:()=>Bu,Imag:()=>O0,InputSpec:()=>pn,IsFinite:()=>Wu,IsInf:()=>Vu,IsNan:()=>Uu,KernelBackend:()=>Bm,LRN:()=>qu,LRNGrad:()=>Kh,LayerVariable:()=>JP,LayersModel:()=>Is,LeakyRelu:()=>Hu,Less:()=>Vh,LessEqual:()=>Uh,LinSpace:()=>Hh,Log:()=>ju,Log1p:()=>Gu,LogSoftmax:()=>N3,LogicalAnd:()=>jh,LogicalNot:()=>Gh,LogicalOr:()=>qh,LogicalXor:()=>T3,LowerBound:()=>MZ,MathBackendCPU:()=>Vx,MathBackendWebGL:()=>jx,MatrixBandPart:()=>OZ,Max:()=>Ku,MaxPool:()=>Yu,MaxPool3D:()=>Xh,MaxPool3DGrad:()=>Ym,MaxPoolGrad:()=>Xm,MaxPoolWithArgmax:()=>Zm,Maximum:()=>Xu,Mean:()=>Zu,Min:()=>Qu,Minimum:()=>Ju,MirrorPad:()=>ed,Mod:()=>td,MomentumOptimizer:()=>M2,Multinomial:()=>Yh,Multiply:()=>nd,Neg:()=>Zh,NonMaxSuppressionV3:()=>Jh,NonMaxSuppressionV4:()=>ep,NonMaxSuppressionV5:()=>tp,NotEqual:()=>Qh,OP_SCOPE_SUFFIX:()=>w$,OneHot:()=>rd,OnesLike:()=>np,Optimizer:()=>Ps,OptimizerConstructors:()=>OP,Pack:()=>rp,PadV2:()=>ad,Pool:()=>LZ,Pow:()=>id,Prelu:()=>sd,Prod:()=>od,RMSPropOptimizer:()=>O2,RNN:()=>is,RaggedGather:()=>L0,RaggedRange:()=>P0,RaggedTensorToTensor:()=>z0,Range:()=>Qm,Rank:()=>Nk,Real:()=>B0,RealDiv:()=>Au,Reciprocal:()=>ld,Reduction:()=>vr,Relu:()=>ud,Relu6:()=>hd,Reshape:()=>ap,ResizeBilinear:()=>cd,ResizeBilinearGrad:()=>sp,ResizeNearestNeighbor:()=>dd,ResizeNearestNeighborGrad:()=>ip,Reverse:()=>pd,RotateWithOffset:()=>wp,Round:()=>fd,Rsqrt:()=>md,SGDOptimizer:()=>kx,ScatterNd:()=>op,SearchSorted:()=>up,Select:()=>dp,Selu:()=>gd,Sequential:()=>sh,Sigmoid:()=>xd,Sign:()=>vd,Sin:()=>bd,Sinh:()=>yd,Slice:()=>cp,Softmax:()=>Id,Softplus:()=>wd,SpaceToBatchND:()=>hp,SparseFillEmptyRows:()=>Jm,SparseReshape:()=>fp,SparseSegmentMean:()=>eg,SparseSegmentSum:()=>tg,SparseToDense:()=>mp,SplitV:()=>pp,Sqrt:()=>kd,Square:()=>ng,SquaredDifference:()=>$d,StaticRegexReplace:()=>rg,Step:()=>Uo,StridedSlice:()=>gp,StringNGrams:()=>ag,StringSplit:()=>ig,StringToHashBucketFast:()=>sg,Sub:()=>Cd,Sum:()=>Sd,SymbolicTensor:()=>vi,Tan:()=>Ed,Tanh:()=>Td,Tensor:()=>Ue,TensorBuffer:()=>mn,TensorScatterUpdate:()=>lp,Tile:()=>Vo,TopK:()=>bp,Transform:()=>yp,Transpose:()=>Ss,Unique:()=>og,Unpack:()=>vp,UnsortedSegmentSum:()=>lg,UpperBound:()=>PZ,Variable:()=>Hl,ZerosLike:()=>xp,_FusedMatMul:()=>Wl,abs:()=>cn,acos:()=>$$,acosh:()=>C$,add:()=>ne,addN:()=>tL,all:()=>j0,any:()=>cm,argMax:()=>ql,argMin:()=>E$,asin:()=>T$,asinh:()=>N$,atan:()=>_$,atan2:()=>A$,atanh:()=>R$,avgPool:()=>Ms,avgPool3d:()=>F$,backend:()=>eL,backend_util:()=>T,basicLSTMCell:()=>iL,batchNorm:()=>Nd,batchNorm2d:()=>M$,batchNorm3d:()=>O$,batchNorm4d:()=>L$,batchToSpaceND:()=>mg,bincount:()=>P$,bitwiseAnd:()=>sL,booleanMaskAsync:()=>YL,broadcastArgs:()=>oL,broadcastTo:()=>El,broadcast_util:()=>kp,browser:()=>Eg,buffer:()=>Xe,callbacks:()=>xhe,cast:()=>ce,ceil:()=>z$,clipByValue:()=>cr,clone:()=>Ki,complex:()=>_s,concat:()=>kt,concat1d:()=>B$,concat2d:()=>W$,concat3d:()=>V$,concat4d:()=>U$,constraints:()=>nz,conv1d:()=>G0,conv2d:()=>$r,conv2dTranspose:()=>q0,conv3d:()=>j$,conv3dTranspose:()=>G$,copyRegisteredKernels:()=>VZ,cos:()=>gg,cosh:()=>K0,cosineWindow:()=>bx,cumprod:()=>fm,cumsum:()=>X0,customGrad:()=>Qi,data:()=>TB,denseBincount:()=>cv,deprecationWarn:()=>J3,depthToSpace:()=>q$,depthwiseConv2d:()=>_d,deregisterOp:()=>She,device_util:()=>hg,diag:()=>uL,dilation2d:()=>K$,disableDeprecationWarnings:()=>QQ,dispose:()=>Be,disposeVariables:()=>JQ,div:()=>Se,divNoNan:()=>X$,dot:()=>Y$,dropout:()=>C2,einsum:()=>cL,elu:()=>Sp,enableDebugMode:()=>ZQ,enableProdMode:()=>YQ,enclosingPowerOfTwo:()=>E2,engine:()=>ja,ensureShape:()=>hL,env:()=>Z,equal:()=>fa,erf:()=>Z$,euclideanNorm:()=>e2,exp:()=>Cr,expandDims:()=>qn,expm1:()=>t2,eye:()=>Y0,fft:()=>$g,fill:()=>ca,findBackend:()=>sJ,findBackendFactory:()=>oJ,floor:()=>$p,floorDiv:()=>H0,forceHalfFloat:()=>KW,fused:()=>nh,gather:()=>Cp,gatherND:()=>eP,gather_util:()=>z2,getBackend:()=>aJ,getGradient:()=>Ek,getKernel:()=>sv,getKernelsForBackend:()=>ov,getThreadsCount:()=>IMe,gpgpu_util:()=>CW,grad:()=>rte,grads:()=>ate,greater:()=>Rr,greaterEqual:()=>Os,ifft:()=>th,imag:()=>bg,image:()=>$a,inTopKAsync:()=>tP,initializers:()=>rz,input:()=>kz,io:()=>Yn,irfft:()=>dx,isFinite:()=>n2,isInf:()=>r2,isNaN:()=>a2,keep:()=>In,kernel_impls:()=>as,layers:()=>az,leakyRelu:()=>yg,less:()=>Zc,lessEqual:()=>jo,linalg:()=>_2,linspace:()=>bL,loadGraphModel:()=>Npe,loadGraphModelSync:()=>_pe,loadLayersModel:()=>gde,localResponseNormalization:()=>i2,log:()=>ma,log1p:()=>vg,logSigmoid:()=>s2,logSoftmax:()=>Q0,logSumExp:()=>J0,logicalAnd:()=>ei,logicalNot:()=>xg,logicalOr:()=>ex,logicalXor:()=>o2,losses:()=>pP,lowerBound:()=>vL,matMul:()=>Ge,math:()=>SP,max:()=>_a,maxPool:()=>Mn,maxPool3d:()=>l2,maxPoolWithArgmax:()=>xL,maximum:()=>rs,mean:()=>qt,memory:()=>dv,meshgrid:()=>wL,metrics:()=>tB,min:()=>Yc,minimum:()=>Co,mirrorPad:()=>u2,mod:()=>d2,model:()=>vde,models:()=>nB,moments:()=>wg,movingAverage:()=>ZL,mul:()=>U,multiRNNCell:()=>kL,multinomial:()=>SL,neg:()=>Rt,nextFrame:()=>B2,norm:()=>Ip,notEqual:()=>Zl,oneHot:()=>Qc,ones:()=>ia,onesLike:()=>ga,op:()=>W,outerProduct:()=>IL,pad:()=>Ri,pad1d:()=>$L,pad2d:()=>CL,pad3d:()=>EL,pad4d:()=>TL,pool:()=>c2,pow:()=>As,prelu:()=>Sg,print:()=>I$,prod:()=>h2,profile:()=>eJ,raggedGather:()=>NL,raggedRange:()=>_L,raggedTensorToTensor:()=>AL,rand:()=>RL,randomGamma:()=>OL,randomNormal:()=>nx,randomStandardNormal:()=>LL,randomUniform:()=>Go,randomUniformInt:()=>PL,range:()=>Ql,ready:()=>rJ,real:()=>Jc,reciprocal:()=>b2,registerBackend:()=>U0,registerCallbackConstructor:()=>wde,registerGradient:()=>_3,registerKernel:()=>ug,registerOp:()=>khe,regularizers:()=>rB,relu:()=>gt,relu6:()=>rx,removeBackend:()=>iJ,reshape:()=>j,reverse:()=>Da,reverse1d:()=>zL,reverse2d:()=>BL,reverse3d:()=>WL,reverse4d:()=>VL,rfft:()=>Cg,round:()=>ax,rsqrt:()=>ix,scalar:()=>Ae,scatterND:()=>QL,scatter_util:()=>px,searchSorted:()=>tx,selu:()=>sx,separableConv2d:()=>Ep,sequential:()=>xde,serialization:()=>le,setBackend:()=>nJ,setPlatform:()=>lJ,setThreadsCount:()=>SMe,setWasmPath:()=>wMe,setWasmPaths:()=>kMe,setWebGLContext:()=>Y4,setdiff1dAsync:()=>UL,shared:()=>SE,sigmoid:()=>Za,sign:()=>y2,signal:()=>hP,sin:()=>ox,sinh:()=>lx,slice:()=>Qe,slice1d:()=>Ig,slice2d:()=>ux,slice3d:()=>Tp,slice4d:()=>eh,slice_util:()=>En,softmax:()=>qo,softplus:()=>Ad,spaceToBatchND:()=>kg,sparse:()=>fP,sparseToDense:()=>JL,spectral:()=>cP,split:()=>Br,sqrt:()=>Jn,square:()=>xt,squaredDifference:()=>cx,squeeze:()=>Ko,stack:()=>Cn,step:()=>Rd,stridedSlice:()=>v2,string:()=>mP,sub:()=>we,sum:()=>Ie,sumOutType:()=>V0,tan:()=>x2,tanh:()=>Xl,tensor:()=>wr,tensor1d:()=>mt,tensor2d:()=>Xi,tensor3d:()=>hx,tensor4d:()=>Eo,tensor5d:()=>HL,tensor6d:()=>jL,tensorScatterUpdate:()=>qL,tensor_util:()=>Ii,test_util:()=>DL,tidy:()=>G,tile:()=>aa,time:()=>tJ,topk:()=>k2,train:()=>cl,transpose:()=>Ke,truncatedNormal:()=>mx,unique:()=>S2,unregisterGradient:()=>WZ,unregisterKernel:()=>BZ,unsortedSegmentSum:()=>gx,unstack:()=>tn,upcastType:()=>Ra,upperBound:()=>KL,util:()=>k,valueAndGrad:()=>ite,valueAndGrads:()=>ste,variable:()=>I2,variableGrads:()=>yL,version:()=>AMe,version_converter:()=>Rpe,version_core:()=>$ie,version_cpu:()=>_me,version_layers:()=>lC,version_wasm:()=>$Me,version_webgl:()=>v1e,webgl:()=>x1e,webgl_util:()=>X4,where:()=>Wn,whereAsync:()=>$2,zeros:()=>Kt,zerosLike:()=>et});var jY=Object.create,h$=Object.defineProperty,GY=Object.getOwnPropertyDescriptor,qY=Object.getOwnPropertyNames,KY=Object.getPrototypeOf,XY=Object.prototype.hasOwnProperty,bn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),We=(e,t)=>{for(var n in t)h$(e,n,{get:t[n],enumerable:!0})},YY=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of qY(t))!XY.call(e,a)&&a!==n&&h$(e,a,{get:()=>t[a],enumerable:!(r=GY(t,a))||r.enumerable});return e},zo=(e,t,n)=>(n=e!=null?jY(KY(e)):{},YY(t||!e||!e.__esModule?h$(n,"default",{value:e,enumerable:!0}):n,e)),ZY=bn((e,t)=>{t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function r(I,F,L){this.low=I|0,this.high=F|0,this.unsigned=!!L}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0});function a(I){return(I&&I.__isLong__)===!0}r.isLong=a;var i={},s={};function o(I,F){var L,P,H;return F?(I>>>=0,(H=0<=I&&I<256)&&(P=s[I],P)?P:(L=d(I,(I|0)<0?-1:0,!0),H&&(s[I]=L),L)):(I|=0,(H=-128<=I&&I<128)&&(P=i[I],P)?P:(L=d(I,I<0?-1:0,!1),H&&(i[I]=L),L))}r.fromInt=o;function l(I,F){if(isNaN(I))return F?x:v;if(F){if(I<0)return x;if(I>=g)return A}else{if(I<=-b)return R;if(I+1>=b)return E}return I<0?l(-I,F).neg():d(I%m|0,I/m|0,F)}r.fromNumber=l;function d(I,F,L){return new r(I,F,L)}r.fromBits=d;var u=Math.pow;function c(I,F,L){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return v;if(typeof F=="number"?(L=F,F=!1):F=!!F,L=L||10,L<2||36<L)throw RangeError("radix");var P;if((P=I.indexOf("-"))>0)throw Error("interior hyphen");if(P===0)return c(I.substring(1),F,L).neg();for(var H=l(u(L,8)),X=v,M=0;M<I.length;M+=8){var B=Math.min(8,I.length-M),V=parseInt(I.substring(M,M+B),L);if(B<8){var K=l(u(L,B));X=X.mul(K).add(l(V))}else X=X.mul(H),X=X.add(l(V))}return X.unsigned=F,X}r.fromString=c;function h(I,F){return typeof I=="number"?l(I,F):typeof I=="string"?c(I,F):d(I.low,I.high,typeof F=="boolean"?F:I.unsigned)}r.fromValue=h;var p=65536,f=1<<24,m=p*p,g=m*m,b=g/2,y=o(f),v=o(0);r.ZERO=v;var x=o(0,!0);r.UZERO=x;var w=o(1);r.ONE=w;var $=o(1,!0);r.UONE=$;var C=o(-1);r.NEG_ONE=C;var E=d(-1,2147483647,!1);r.MAX_VALUE=E;var A=d(-1,-1,!0);r.MAX_UNSIGNED_VALUE=A;var R=d(0,-2147483648,!1);r.MIN_VALUE=R;var N=r.prototype;N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},N.toString=function(I){if(I=I||10,I<2||36<I)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(R)){var F=l(I),L=this.div(F),P=L.mul(F).sub(this);return L.toString(I)+P.toInt().toString(I)}else return"-"+this.neg().toString(I);for(var H=l(u(I,6),this.unsigned),X=this,M="";;){var B=X.div(H),V=X.sub(B.mul(H)).toInt()>>>0,K=V.toString(I);if(X=B,X.isZero())return K+M;for(;K.length<6;)K="0"+K;M=""+K+M}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var I=this.high!=0?this.high:this.low,F=31;F>0&&!(I&1<<F);F--);return this.high!=0?F+33:F+1},N.isZero=function(){return this.high===0&&this.low===0},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return(this.low&1)===1},N.isEven=function(){return(this.low&1)===0},N.equals=function(I){return a(I)||(I=h(I)),this.unsigned!==I.unsigned&&this.high>>>31===1&&I.high>>>31===1?!1:this.high===I.high&&this.low===I.low},N.eq=N.equals,N.notEquals=function(I){return!this.eq(I)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(I){return this.comp(I)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(I){return this.comp(I)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(I){return this.comp(I)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(I){return this.comp(I)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(I){if(a(I)||(I=h(I)),this.eq(I))return 0;var F=this.isNegative(),L=I.isNegative();return F&&!L?-1:!F&&L?1:this.unsigned?I.high>>>0>this.high>>>0||I.high===this.high&&I.low>>>0>this.low>>>0?-1:1:this.sub(I).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(w)},N.neg=N.negate,N.add=function(I){a(I)||(I=h(I));var F=this.high>>>16,L=this.high&65535,P=this.low>>>16,H=this.low&65535,X=I.high>>>16,M=I.high&65535,B=I.low>>>16,V=I.low&65535,K=0,Q=0,ee=0,ie=0;return ie+=H+V,ee+=ie>>>16,ie&=65535,ee+=P+B,Q+=ee>>>16,ee&=65535,Q+=L+M,K+=Q>>>16,Q&=65535,K+=F+X,K&=65535,d(ee<<16|ie,K<<16|Q,this.unsigned)},N.subtract=function(I){return a(I)||(I=h(I)),this.add(I.neg())},N.sub=N.subtract,N.multiply=function(I){if(this.isZero())return v;if(a(I)||(I=h(I)),n){var F=n.mul(this.low,this.high,I.low,I.high);return d(F,n.get_high(),this.unsigned)}if(I.isZero())return v;if(this.eq(R))return I.isOdd()?R:v;if(I.eq(R))return this.isOdd()?R:v;if(this.isNegative())return I.isNegative()?this.neg().mul(I.neg()):this.neg().mul(I).neg();if(I.isNegative())return this.mul(I.neg()).neg();if(this.lt(y)&&I.lt(y))return l(this.toNumber()*I.toNumber(),this.unsigned);var L=this.high>>>16,P=this.high&65535,H=this.low>>>16,X=this.low&65535,M=I.high>>>16,B=I.high&65535,V=I.low>>>16,K=I.low&65535,Q=0,ee=0,ie=0,se=0;return se+=X*K,ie+=se>>>16,se&=65535,ie+=H*K,ee+=ie>>>16,ie&=65535,ie+=X*V,ee+=ie>>>16,ie&=65535,ee+=P*K,Q+=ee>>>16,ee&=65535,ee+=H*V,Q+=ee>>>16,ee&=65535,ee+=X*B,Q+=ee>>>16,ee&=65535,Q+=L*K+P*V+H*B+X*M,Q&=65535,d(ie<<16|se,Q<<16|ee,this.unsigned)},N.mul=N.multiply,N.divide=function(I){if(a(I)||(I=h(I)),I.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&I.low===-1&&I.high===-1)return this;var F=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,I.low,I.high);return d(F,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?x:v;var L,P,H;if(this.unsigned){if(I.unsigned||(I=I.toUnsigned()),I.gt(this))return x;if(I.gt(this.shru(1)))return $;H=x}else{if(this.eq(R)){if(I.eq(w)||I.eq(C))return R;if(I.eq(R))return w;var X=this.shr(1);return L=X.div(I).shl(1),L.eq(v)?I.isNegative()?w:C:(P=this.sub(I.mul(L)),H=L.add(P.div(I)),H)}else if(I.eq(R))return this.unsigned?x:v;if(this.isNegative())return I.isNegative()?this.neg().div(I.neg()):this.neg().div(I).neg();if(I.isNegative())return this.div(I.neg()).neg();H=v}for(P=this;P.gte(I);){L=Math.max(1,Math.floor(P.toNumber()/I.toNumber()));for(var M=Math.ceil(Math.log(L)/Math.LN2),B=M<=48?1:u(2,M-48),V=l(L),K=V.mul(I);K.isNegative()||K.gt(P);)L-=B,V=l(L,this.unsigned),K=V.mul(I);V.isZero()&&(V=w),H=H.add(V),P=P.sub(K)}return H},N.div=N.divide,N.modulo=function(I){if(a(I)||(I=h(I)),n){var F=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,I.low,I.high);return d(F,n.get_high(),this.unsigned)}return this.sub(this.div(I).mul(I))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return d(~this.low,~this.high,this.unsigned)},N.and=function(I){return a(I)||(I=h(I)),d(this.low&I.low,this.high&I.high,this.unsigned)},N.or=function(I){return a(I)||(I=h(I)),d(this.low|I.low,this.high|I.high,this.unsigned)},N.xor=function(I){return a(I)||(I=h(I)),d(this.low^I.low,this.high^I.high,this.unsigned)},N.shiftLeft=function(I){return a(I)&&(I=I.toInt()),(I&=63)===0?this:I<32?d(this.low<<I,this.high<<I|this.low>>>32-I,this.unsigned):d(0,this.low<<I-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(I){return a(I)&&(I=I.toInt()),(I&=63)===0?this:I<32?d(this.low>>>I|this.high<<32-I,this.high>>I,this.unsigned):d(this.high>>I-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(I){if(a(I)&&(I=I.toInt()),I&=63,I===0)return this;var F=this.high;if(I<32){var L=this.low;return d(L>>>I|F<<32-I,F>>>I,this.unsigned)}else return I===32?d(F,0,this.unsigned):d(F>>>I-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?d(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:d(this.low,this.high,!0)},N.toBytes=function(I){return I?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var I=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,I&255,I>>>8&255,I>>>16&255,I>>>24]},N.toBytesBE=function(){var I=this.high,F=this.low;return[I>>>24,I>>>16&255,I>>>8&255,I&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},r.fromBytes=function(I,F,L){return L?r.fromBytesLE(I,F):r.fromBytesBE(I,F)},r.fromBytesLE=function(I,F){return new r(I[0]|I[1]<<8|I[2]<<16|I[3]<<24,I[4]|I[5]<<8|I[6]<<16|I[7]<<24,F)},r.fromBytesBE=function(I,F){return new r(I[4]<<24|I[5]<<16|I[6]<<8|I[7],I[0]<<24|I[1]<<16|I[2]<<8|I[3],F)}}),QY=bn(()=>{}),JY=bn(()=>{}),eZ=bn((e,t)=>{(function(n,r,a){function i(d){var u=this,c=l();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(d),u.s0<0&&(u.s0+=1),u.s1-=c(d),u.s1<0&&(u.s1+=1),u.s2-=c(d),u.s2<0&&(u.s2+=1),c=null}function s(d,u){return u.c=d.c,u.s0=d.s0,u.s1=d.s1,u.s2=d.s2,u}function o(d,u){var c=new i(d),h=u&&u.state,p=c.next;return p.int32=function(){return c.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&s(h,c),p.state=function(){return s(c,{})}),p}function l(){var d=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){d+=c.charCodeAt(h);var p=.02519603282416938*d;d=p>>>0,p-=d,p*=d,d=p>>>0,p-=d,d+=p*4294967296}return(d>>>0)*23283064365386963e-26};return u}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.alea=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),tZ=bn((e,t)=>{(function(n,r,a){function i(l){var d=this,u="";d.x=0,d.y=0,d.z=0,d.w=0,d.next=function(){var h=d.x^d.x<<11;return d.x=d.y,d.y=d.z,d.z=d.w,d.w^=d.w>>>19^h^h>>>8},l===(l|0)?d.x=l:u+=l;for(var c=0;c<u.length+64;c++)d.x^=u.charCodeAt(c)|0,d.next()}function s(l,d){return d.x=l.x,d.y=l.y,d.z=l.z,d.w=l.w,d}function o(l,d){var u=new i(l),c=d&&d.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xor128=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),nZ=bn((e,t)=>{(function(n,r,a){function i(l){var d=this,u="";d.next=function(){var h=d.x^d.x>>>2;return d.x=d.y,d.y=d.z,d.z=d.w,d.w=d.v,(d.d=d.d+362437|0)+(d.v=d.v^d.v<<4^(h^h<<1))|0},d.x=0,d.y=0,d.z=0,d.w=0,d.v=0,l===(l|0)?d.x=l:u+=l;for(var c=0;c<u.length+64;c++)d.x^=u.charCodeAt(c)|0,c==u.length&&(d.d=d.x<<10^d.x>>>4),d.next()}function s(l,d){return d.x=l.x,d.y=l.y,d.z=l.z,d.w=l.w,d.v=l.v,d.d=l.d,d}function o(l,d){var u=new i(l),c=d&&d.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xorwow=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),rZ=bn((e,t)=>{(function(n,r,a){function i(l){var d=this;d.next=function(){var c=d.x,h=d.i,p,f;return p=c[h],p^=p>>>7,f=p^p<<24,p=c[h+1&7],f^=p^p>>>10,p=c[h+3&7],f^=p^p>>>3,p=c[h+4&7],f^=p^p<<7,p=c[h+7&7],p=p^p<<13,f^=p^p<<9,c[h]=f,d.i=h+1&7,f};function u(c,h){var p,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,p=0;p<h.length;++p)f[p&7]=f[p&7]<<15^h.charCodeAt(p)+f[p+1&7]<<13;for(;f.length<8;)f.push(0);for(p=0;p<8&&f[p]===0;++p);for(p==8?f[7]=-1:f[p],c.x=f,c.i=0,p=256;p>0;--p)c.next()}u(d,l)}function s(l,d){return d.x=l.x.slice(),d.i=l.i,d}function o(l,d){l==null&&(l=+new Date);var u=new i(l),c=d&&d.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(c.x&&s(c,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xorshift7=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),aZ=bn((e,t)=>{(function(n,r,a){function i(l){var d=this;d.next=function(){var c=d.w,h=d.X,p=d.i,f,m;return d.w=c=c+1640531527|0,m=h[p+34&127],f=h[p=p+1&127],m^=m<<13,f^=f<<17,m^=m>>>15,f^=f>>>12,m=h[p]=m^f,d.i=p,m+(c^c>>>16)|0};function u(c,h){var p,f,m,g,b,y=[],v=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,v=Math.max(v,h.length)),m=0,g=-32;g<v;++g)h&&(f^=h.charCodeAt((g+32)%h.length)),g===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(b=b+1640531527|0,p=y[g&127]^=f+b,m=p==0?m+1:0);for(m>=128&&(y[(h&&h.length||0)&127]=-1),m=127,g=4*128;g>0;--g)f=y[m+34&127],p=y[m=m+1&127],f^=f<<13,p^=p<<17,f^=f>>>15,p^=p>>>12,y[m]=f^p;c.w=b,c.X=y,c.i=m}u(d,l)}function s(l,d){return d.i=l.i,d.w=l.w,d.X=l.X.slice(),d}function o(l,d){l==null&&(l=+new Date);var u=new i(l),c=d&&d.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(c.X&&s(c,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.xor4096=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),iZ=bn((e,t)=>{(function(n,r,a){function i(l){var d=this,u="";d.next=function(){var h=d.b,p=d.c,f=d.d,m=d.a;return h=h<<25^h>>>7^p,p=p-f|0,f=f<<24^f>>>8^m,m=m-h|0,d.b=h=h<<20^h>>>12^p,d.c=p=p-f|0,d.d=f<<16^p>>>16^m,d.a=m-h|0},d.a=0,d.b=0,d.c=-1640531527,d.d=1367130551,l===Math.floor(l)?(d.a=l/4294967296|0,d.b=l|0):u+=l;for(var c=0;c<u.length+20;c++)d.b^=u.charCodeAt(c)|0,d.next()}function s(l,d){return d.a=l.a,d.b=l.b,d.c=l.c,d.d=l.d,d}function o(l,d){var u=new i(l),c=d&&d.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var p=u.next()>>>11,f=(u.next()>>>0)/4294967296,m=(p+f)/(1<<21);while(m===0);return m},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}r&&r.exports?r.exports=o:a&&a.amd?a(function(){return o}):this.tychei=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),sZ=bn(()=>{}),oZ=bn((e,t)=>{(function(n,r,a){var i=256,s=6,o=52,l="random",d=a.pow(i,s),u=a.pow(2,o),c=u*2,h=i-1,p;function f(w,$,C){var E=[];$=$==!0?{entropy:!0}:$||{};var A=y(b($.entropy?[w,x(r)]:w==null?v():w,3),E),R=new m(E),N=function(){for(var I=R.g(s),F=d,L=0;I<u;)I=(I+L)*i,F*=i,L=R.g(1);for(;I>=c;)I/=2,F/=2,L>>>=1;return(I+L)/F};return N.int32=function(){return R.g(4)|0},N.quick=function(){return R.g(4)/4294967296},N.double=N,y(x(R.S),r),($.pass||C||function(I,F,L,P){return P&&(P.S&&g(P,R),I.state=function(){return g(R,{})}),L?(a[l]=I,F):I})(N,A,"global"in $?$.global:this==a,$.state)}function m(w){var $,C=w.length,E=this,A=0,R=E.i=E.j=0,N=E.S=[];for(C||(w=[C++]);A<i;)N[A]=A++;for(A=0;A<i;A++)N[A]=N[R=h&R+w[A%C]+($=N[A])],N[R]=$;(E.g=function(I){for(var F,L=0,P=E.i,H=E.j,X=E.S;I--;)F=X[P=h&P+1],L=L*i+X[h&(X[P]=X[H=h&H+F])+(X[H]=F)];return E.i=P,E.j=H,L})(i)}function g(w,$){return $.i=w.i,$.j=w.j,$.S=w.S.slice(),$}function b(w,$){var C=[],E=typeof w,A;if($&&E=="object")for(A in w)try{C.push(b(w[A],$-1))}catch(R){}return C.length?C:E=="string"?w:w+"\0"}function y(w,$){for(var C=w+"",E,A=0;A<C.length;)$[h&A]=h&(E^=$[h&A]*19)+C.charCodeAt(A++);return x($)}function v(){try{var w;return p&&(w=p.randomBytes)?w=w(i):(w=new Uint8Array(i),(n.crypto||n.msCrypto).getRandomValues(w)),x(w)}catch(E){var $=n.navigator,C=$&&$.plugins;return[+new Date,n,C,n.screen,x(r)]}}function x(w){return String.fromCharCode.apply(0,w)}if(y(a.random(),r),typeof t=="object"&&t.exports){t.exports=f;try{p=sZ()}catch(w){}}else typeof define=="function"&&define.amd?define(function(){return f}):a["seed"+l]=f})(typeof self<"u"?self:e,[],Math)}),$0=bn((e,t)=>{var n=eZ(),r=tZ(),a=nZ(),i=rZ(),s=aZ(),o=iZ(),l=oZ();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=i,l.xor4096=s,l.tychei=o,t.exports=l}),p3=bn(()=>{}),p$=bn(()=>{}),f3=bn(()=>{}),lZ=bn(()=>{}),uZ=bn(()=>{}),dZ=bn(()=>{}),cZ=bn((e,t)=>{var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};function i(){return M.buffer!=pe&&Ze(M.buffer),Ne}function s(){return M.buffer!=pe&&Ze(M.buffer),De}function o(){return M.buffer!=pe&&Ze(M.buffer),Ve}function l(){return M.buffer!=pe&&Ze(M.buffer),Le}function d(){return M.buffer!=pe&&Ze(M.buffer),ct}var u=typeof a<"u"?a:{},c,h;u.ready=new Promise(function(O,J){c=O,h=J});var p;typeof process<"u"&&process.listeners&&(p={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var f=Object.assign({},u),m=(O,J)=>{throw J},g=typeof window=="object",b=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v=u.ENVIRONMENT_IS_PTHREAD||!1,x="";function w(O){return u.locateFile?u.locateFile(O,x):x+O}var $,C,E;function A(O){O instanceof ii||P("exiting due to exception: "+O)}if(y){var R=p$(),N=f3();b?x=N.dirname(x)+"/":x=__dirname+"/",$=(J,he)=>(J=Fi(J)?new URL(J):N.normalize(J),R.readFileSync(J,he?void 0:"utf8")),E=J=>{var he=$(J,!0);return he.buffer||(he=new Uint8Array(he)),he},C=(J,he,Fe)=>{J=Fi(J)?new URL(J):N.normalize(J),R.readFile(J,function(He,je){He?Fe(He):he(je.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(J){if(!(J instanceof ii))throw J}),process.on("unhandledRejection",function(J){throw J}),m=(J,he)=>{if(Lt())throw process.exitCode=J,he;A(he),process.exit(J)},u.inspect=function(){return"[Emscripten Module object]"};let O;try{O=lZ()}catch(J){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),J}global.Worker=O.Worker}else(g||b)&&(b?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof r<"u"&&r&&(x=r),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",y||($=O=>{var J=new XMLHttpRequest;return J.open("GET",O,!1),J.send(null),J.responseText},b&&(E=O=>{var J=new XMLHttpRequest;return J.open("GET",O,!1),J.responseType="arraybuffer",J.send(null),new Uint8Array(J.response)}),C=(O,J,he)=>{var Fe=new XMLHttpRequest;Fe.open("GET",O,!0),Fe.responseType="arraybuffer",Fe.onload=()=>{if(Fe.status==200||Fe.status==0&&Fe.response){J(Fe.response);return}he()},Fe.onerror=he,Fe.send(null)}));y&&typeof performance>"u"&&(global.performance=uZ().performance);var I=console.log.bind(console),F=console.warn.bind(console);y&&(I=O=>R.writeSync(1,O+"\n"),F=O=>R.writeSync(2,O+"\n"));var L=u.print||I,P=u.printErr||F;Object.assign(u,f),f=null,u.arguments&&u.arguments,u.thisProgram&&u.thisProgram,u.quit&&(m=u.quit);var H;u.wasmBinary&&(H=u.wasmBinary);var X=u.noExitRuntime||!0;typeof WebAssembly!="object"&&un("no native wasm support detected");var M,B,V=!1,K;function Q(O,J){O||un(J)}var ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ie(O,J,he){J>>>=0;for(var Fe=J+he,He=J;O[He]&&!(He>=Fe);)++He;if(He-J>16&&O.buffer&&ee)return ee.decode(O.buffer instanceof SharedArrayBuffer?O.slice(J,He):O.subarray(J,He));for(var je="";J<He;){var ke=O[J++];if(!(ke&128)){je+=String.fromCharCode(ke);continue}var Re=O[J++]&63;if((ke&224)==192){je+=String.fromCharCode((ke&31)<<6|Re);continue}var Ht=O[J++]&63;if((ke&240)==224?ke=(ke&15)<<12|Re<<6|Ht:ke=(ke&7)<<18|Re<<12|Ht<<6|O[J++]&63,ke<65536)je+=String.fromCharCode(ke);else{var va=ke-65536;je+=String.fromCharCode(55296|va>>10,56320|va&1023)}}return je}function se(O,J){return O>>>=0,O?ie(s(),O,J):""}function ge(O,J,he,Fe){if(he>>>=0,!(Fe>0))return 0;for(var He=he,je=he+Fe-1,ke=0;ke<O.length;++ke){var Re=O.charCodeAt(ke);if(Re>=55296&&Re<=57343){var Ht=O.charCodeAt(++ke);Re=65536+((Re&1023)<<10)|Ht&1023}if(Re<=127){if(he>=je)break;J[he++>>>0]=Re}else if(Re<=2047){if(he+1>=je)break;J[he++>>>0]=192|Re>>6,J[he++>>>0]=128|Re&63}else if(Re<=65535){if(he+2>=je)break;J[he++>>>0]=224|Re>>12,J[he++>>>0]=128|Re>>6&63,J[he++>>>0]=128|Re&63}else{if(he+3>=je)break;J[he++>>>0]=240|Re>>18,J[he++>>>0]=128|Re>>12&63,J[he++>>>0]=128|Re>>6&63,J[he++>>>0]=128|Re&63}}return J[he>>>0]=0,he-He}function fe(O,J,he){return ge(O,s(),J,he)}var pe,Ne,De,Ve,Le,ct;v&&(pe=u.buffer);function Ze(O){pe=O,u.HEAP8=Ne=new Int8Array(O),u.HEAP16=new Int16Array(O),u.HEAP32=Ve=new Int32Array(O),u.HEAPU8=De=new Uint8Array(O),u.HEAPU16=new Uint16Array(O),u.HEAPU32=Le=new Uint32Array(O),u.HEAPF32=new Float32Array(O),u.HEAPF64=ct=new Float64Array(O)}var Je=u.INITIAL_MEMORY||16777216;if(v)M=u.wasmMemory,pe=u.buffer;else if(u.wasmMemory)M=u.wasmMemory;else if(M=new WebAssembly.Memory({initial:Je/65536,maximum:65536,shared:!0}),!(M.buffer instanceof SharedArrayBuffer))throw P("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&P("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");M&&(pe=M.buffer),Je=pe.byteLength,Ze(pe);var Oe,at=[],yt=[],pr=[];function Lt(){return X}function rr(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Kr(u.preRun.shift());vt(at)}function vn(){!v&&vt(yt)}function ar(){if(!v){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)ir(u.postRun.shift());vt(pr)}}function Kr(O){at.unshift(O)}function fr(O){yt.unshift(O)}function ir(O){pr.unshift(O)}var xn=0,An=null;function Fr(O){xn++,u.monitorRunDependencies&&u.monitorRunDependencies(xn)}function ai(O){if(xn--,u.monitorRunDependencies&&u.monitorRunDependencies(xn),xn==0&&An){var J=An;An=null,J()}}function un(O){u.onAbort&&u.onAbort(O),O="Aborted("+O+")",P(O),V=!0,K=1,O+=". Build with -sASSERTIONS for more info.";var J=new WebAssembly.RuntimeError(O);throw h(J),J}var Xr="data:application/octet-stream;base64,";function sr(O){return O.startsWith(Xr)}function Fi(O){return O.startsWith("file://")}var wn;wn="tfjs-backend-wasm-threaded-simd.wasm",sr(wn)||(wn=w(wn));function Wd(O){try{if(O==wn&&H)return new Uint8Array(H);if(E)return E(O);throw"both async and sync fetching of the wasm failed"}catch(J){un(J)}}function Vd(){if(!H&&(g||b)){if(typeof fetch=="function"&&!Fi(wn))return fetch(wn,{credentials:"same-origin"}).then(function(O){if(!O.ok)throw"failed to load wasm binary file at '"+wn+"'";return O.arrayBuffer()}).catch(function(){return Wd(wn)});if(C)return new Promise(function(O,J){C(wn,function(he){O(new Uint8Array(he))},J)})}return Promise.resolve().then(function(){return Wd(wn)})}function Ud(){var O={env:LT,wasi_snapshot_preview1:LT};function J(ke,Re){var Ht=ke.exports;if(u.asm=Ht,si(u.asm._emscripten_tls_init),Oe=u.asm.__indirect_function_table,fr(u.asm.__wasm_call_ctors),B=Re,!v){var va=ve.unusedWorkers.length;ve.unusedWorkers.forEach(function(us){ve.loadWasmModuleToWorker(us,function(){--va||ai()})})}}v||Fr();function he(ke){J(ke.instance,ke.module)}function Fe(ke){return Vd().then(function(Re){return WebAssembly.instantiate(Re,O)}).then(function(Re){return Re}).then(ke,function(Re){P("failed to asynchronously prepare wasm: "+Re),un(Re)})}function He(){return!H&&typeof WebAssembly.instantiateStreaming=="function"&&!sr(wn)&&!Fi(wn)&&!y&&typeof fetch=="function"?fetch(wn,{credentials:"same-origin"}).then(function(ke){var Re=WebAssembly.instantiateStreaming(ke,O);return Re.then(he,function(Ht){return P("wasm streaming compile failed: "+Ht),P("falling back to ArrayBuffer instantiation"),Fe(he)})}):Fe(he)}if(u.instantiateWasm)try{var je=u.instantiateWasm(O,J);return je}catch(ke){P("Module.instantiateWasm callback failed with error: "+ke),h(ke)}return He().catch(h),{}}var Hd={};function ii(O){this.name="ExitStatus",this.message="Program terminated with exit("+O+")",this.status=O}function Bs(O){var J=ve.pthreads[O];delete ve.pthreads[O],J.terminate(),rw(O),ve.runningWorkers.splice(ve.runningWorkers.indexOf(J),1),J.pthread_ptr=0}function jd(O){var J=ve.pthreads[O];J.postMessage({cmd:"cancel"})}function os(O){var J=ve.pthreads[O];Q(J),ve.returnWorkerToPool(J)}function ls(O){var J=ve.getNewWorker();if(!J)return 6;ve.runningWorkers.push(J),ve.pthreads[O.pthread_ptr]=J,J.pthread_ptr=O.pthread_ptr;var he={cmd:"run",start_routine:O.startRoutine,arg:O.arg,pthread_ptr:O.pthread_ptr};return J.runPthread=()=>{y&&J.ref(),J.postMessage(he,O.transferList),delete J.runPthread},J.loaded&&J.runPthread(),0}function Gd(O){if(v)return Dn(1,1,O);K=O,Lt()||(ve.terminateAllThreads(),u.onExit&&u.onExit(O),V=!0),m(O,new ii(O))}function ae(O,J){if(K=O,!J&&v)throw Pe(O),"unwind";Gd(O)}var ue=ae;function Ee(O){if(O instanceof ii||O=="unwind")return K;m(1,O)}var ve={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){v?ve.initWorker():ve.initMainThread()},initMainThread:function(){for(var O=8;O--;)ve.allocateUnusedWorker()},initWorker:function(){X=!1},setExitStatus:function(O){K=O},terminateAllThreads:function(){for(var O of Object.values(ve.pthreads))ve.returnWorkerToPool(O);for(var O of ve.unusedWorkers)O.terminate();ve.unusedWorkers=[]},returnWorkerToPool:function(O){var J=O.pthread_ptr;delete ve.pthreads[J],ve.unusedWorkers.push(O),ve.runningWorkers.splice(ve.runningWorkers.indexOf(O),1),O.pthread_ptr=0,y&&O.unref(),rw(J)},receiveObjectTransfer:function(O){},threadInitTLS:function(){ve.tlsInitFunctions.forEach(O=>O())},loadWasmModuleToWorker:function(O,J){O.onmessage=je=>{var ke=je.data,Re=ke.cmd;if(O.pthread_ptr&&(ve.currentProxiedOperationCallerThread=O.pthread_ptr),ke.targetThread&&ke.targetThread!=Yg()){var Ht=ve.pthreads[ke.targetThread];Ht?Ht.postMessage(ke,ke.transferList):P('Internal error! Worker sent a message "'+Re+'" to target pthread '+ke.targetThread+", but that thread no longer exists!"),ve.currentProxiedOperationCallerThread=void 0;return}Re==="processProxyingQueue"?Up(ke.queue):Re==="spawnThread"?ls(ke):Re==="cleanupThread"?os(ke.thread):Re==="killThread"?Bs(ke.thread):Re==="cancelThread"?jd(ke.thread):Re==="loaded"?(O.loaded=!0,y&&O.unref(),J&&J(O),O.runPthread&&O.runPthread()):Re==="print"?L("Thread "+ke.threadId+": "+ke.text):Re==="printErr"?P("Thread "+ke.threadId+": "+ke.text):Re==="alert"?alert("Thread "+ke.threadId+": "+ke.text):ke.target==="setimmediate"?O.postMessage(ke):Re==="callHandler"?u[ke.handler](...ke.args):Re&&P("worker sent an unknown command "+Re),ve.currentProxiedOperationCallerThread=void 0},O.onerror=je=>{var ke="worker sent an error!";throw P(ke+" "+je.filename+":"+je.lineno+": "+je.message),je},y&&(O.on("message",function(je){O.onmessage({data:je})}),O.on("error",function(je){O.onerror(je)}),O.on("detachedExit",function(){}));var he=[],Fe=["onExit","onAbort","print","printErr"];for(var He of Fe)u.hasOwnProperty(He)&&he.push(He);O.postMessage({cmd:"load",handlers:he,urlOrBlob:u.mainScriptUrlOrBlob||r,wasmMemory:M,wasmModule:B})},allocateUnusedWorker:function(){var O,J=w("tfjs-backend-wasm-threaded-simd.worker.js");O=new Worker(J),ve.unusedWorkers.push(O)},getNewWorker:function(){return ve.unusedWorkers.length==0&&(ve.allocateUnusedWorker(),ve.loadWasmModuleToWorker(ve.unusedWorkers[0])),ve.unusedWorkers.pop()}};u.PThread=ve;function vt(O){for(;O.length>0;)O.shift()(u)}function Ct(){var O=Yg(),J=o()[O+52>>>2],he=o()[O+56>>>2],Fe=J-he;VT(J,Fe),Zg(J)}u.establishStackSpace=Ct;function Pe(O){if(v)return Dn(2,0,O);try{ue(O)}catch(J){Ee(J)}}var ze=[];function Ut(O){var J=ze[O];return J||(O>=ze.length&&(ze.length=O+1),ze[O]=J=Oe.get(O)),J}function Ft(O,J){var he=Ut(O)(J);Lt()?ve.setExitStatus(he):WT(he)}u.invokeEntryPoint=Ft;function si(O){ve.tlsInitFunctions.push(O)}function qd(O){PT(O,!b,1,!g),ve.threadInitTLS()}function nl(O){v?postMessage({cmd:"cleanupThread",thread:O}):os(O)}function rl(O,J,he,Fe){return v?Dn(3,1,O,J,he,Fe):jn(O,J,he,Fe)}function jn(O,J,he,Fe){if(typeof SharedArrayBuffer>"u")return P("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var He=[],je=0;if(v&&(He.length===0||je))return rl(O,J,he,Fe);var ke={startRoutine:he,pthread_ptr:O,arg:Fe,transferList:He};return v?(ke.cmd="spawnThread",postMessage(ke,He),0):ls(ke)}function Mi(){return 65536}var Ws=!0;function Jx(){return Ws}function Up(O){Atomics.store(o(),O>>2,1),Yg()&&BT(O),Atomics.compareExchange(o(),O>>2,1,0)}u.executeNotifiedProxyingQueue=Up;function ew(O,J,he,Fe){if(O==J)setTimeout(()=>Up(Fe));else if(v)postMessage({targetThread:O,cmd:"processProxyingQueue",queue:Fe});else{var He=ve.pthreads[O];if(!He)return;He.postMessage({cmd:"processProxyingQueue",queue:Fe})}return 1}function tw(O,J,he){return-1}function Kg(){un("")}function al(O){al.shown||(al.shown={}),al.shown[O]||(al.shown[O]=1,y&&(O="warning: "+O),P(O))}function Xg(){y||b||al("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function RT(){return Date.now()}function nw(){return 4294901760}function te(){return nw()}var me;y?me=()=>{var O=process.hrtime();return O[0]*1e3+O[1]/1e6}:me=()=>performance.timeOrigin+performance.now();function _e(O,J,he){s().copyWithin(O>>>0,J>>>0,J+he>>>0)}function dn(){return y?dZ().cpus().length:navigator.hardwareConcurrency}function Rn(O){var J=aw(),he=O();return Zg(J),he}function Dn(O,J){var he=arguments.length-2,Fe=arguments;return Rn(()=>{for(var He=he,je=Qg(He*8),ke=je>>3,Re=0;Re<he;Re++){var Ht=Fe[2+Re];d()[ke+Re>>>0]=Ht}return zT(O,He,je,J)})}var oi=[];function XH(O,J,he){oi.length=J;for(var Fe=he>>3,He=0;He<J;He++)oi[He]=d()[Fe+He>>>0];var je=O<0,ke=je?Hd[-O-1]:aj[O];return ke.apply(null,oi)}function YH(O){try{return M.grow(O-pe.byteLength+65535>>>16),Ze(M.buffer),1}catch(J){}}function ZH(O){var J=s().length;if(O=O>>>0,O<=J)return!1;var he=nw();if(O>he)return!1;let Fe=(Ht,va)=>Ht+(va-Ht%va)%va;for(var He=1;He<=4;He*=2){var je=J*(1+.2/He);je=Math.min(je,O+100663296);var ke=Math.min(he,Fe(Math.max(O,je),65536)),Re=YH(ke);if(Re)return!0}return!1}function QH(){throw"unwind"}function DT(O){return v?Dn(4,1,O):52}function FT(O,J,he,Fe,He){return v?Dn(5,1,O,J,he,Fe,He):70}var JH=[null,[],[]];function ej(O,J){var he=JH[O];J===0||J===10?((O===1?L:P)(ie(he,0)),he.length=0):he.push(J)}function MT(O,J,he,Fe){if(v)return Dn(6,1,O,J,he,Fe);for(var He=0,je=0;je<he;je++){var ke=l()[J>>>2],Re=l()[J+4>>>2];J+=8;for(var Ht=0;Ht<Re;Ht++)ej(O,s()[ke+Ht>>>0]);He+=Re}return l()[Fe>>>2]=He,0}function OT(O){var J=u["_"+O];return J}function tj(O,J){i().set(O,J>>>0)}function nj(O,J,he,Fe,He){var je={string:xa=>{var Kd=0;if(xa!=null&&xa!==0){var jT=(xa.length<<2)+1;Kd=Qg(jT),fe(xa,Kd,jT)}return Kd},array:xa=>{var Kd=Qg(xa.length);return tj(xa,Kd),Kd}};function ke(xa){return J==="string"?se(xa):J==="boolean"?!!xa:xa}var Re=OT(O),Ht=[],va=0;if(Fe)for(var us=0;us<Fe.length;us++){var HT=je[he[us]];HT?(va===0&&(va=aw()),Ht[us]=HT(Fe[us])):Ht[us]=Fe[us]}var iw=Re.apply(null,Ht);function sj(xa){return va!==0&&Zg(va),ke(xa)}return iw=sj(iw),iw}function rj(O,J,he,Fe){he=he||[];var He=he.every(ke=>ke==="number"||ke==="boolean"),je=J!=="string";return je&&He&&!Fe?OT(O):function(){return nj(O,J,he,arguments)}}ve.init();var aj=[null,Gd,Pe,rl,DT,FT,MT],LT={__emscripten_init_main_thread_js:qd,__emscripten_thread_cleanup:nl,__pthread_create_js:jn,_emscripten_default_pthread_stack_size:Mi,_emscripten_get_now_is_monotonic:Jx,_emscripten_notify_task_queue:ew,_emscripten_set_offscreencanvas_size:tw,abort:Kg,emscripten_check_blocking_allowed:Xg,emscripten_date_now:RT,emscripten_get_heap_max:te,emscripten_get_now:me,emscripten_memcpy_big:_e,emscripten_num_logical_cores:dn,emscripten_receive_on_main_thread_js:XH,emscripten_resize_heap:ZH,emscripten_unwind_to_js_event_loop:QH,exit:ue,fd_close:DT,fd_seek:FT,fd_write:MT,memory:M||u.wasmMemory};Ud(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.__wasm_call_ctors).apply(null,arguments)},u._init=function(){return(u._init=u.asm.init).apply(null,arguments)},u._init_with_threads_count=function(){return(u._init_with_threads_count=u.asm.init_with_threads_count).apply(null,arguments)},u._get_threads_count=function(){return(u._get_threads_count=u.asm.get_threads_count).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.register_tensor).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.dispose_data).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.dispose).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.Abs).apply(null,arguments)},u._Acos=function(){return(u._Acos=u.asm.Acos).apply(null,arguments)},u._Acosh=function(){return(u._Acosh=u.asm.Acosh).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.Add).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.AddN).apply(null,arguments)},u._All=function(){return(u._All=u.asm.All).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.Any).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.ArgMax).apply(null,arguments)},u._ArgMin=function(){return(u._ArgMin=u.asm.ArgMin).apply(null,arguments)},u._Asin=function(){return(u._Asin=u.asm.Asin).apply(null,arguments)},u._Asinh=function(){return(u._Asinh=u.asm.Asinh).apply(null,arguments)},u._Atan=function(){return(u._Atan=u.asm.Atan).apply(null,arguments)},u._Atan2=function(){return(u._Atan2=u.asm.Atan2).apply(null,arguments)},u._Atanh=function(){return(u._Atanh=u.asm.Atanh).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.AvgPool).apply(null,arguments)},u._AvgPool3D=function(){return(u._AvgPool3D=u.asm.AvgPool3D).apply(null,arguments)},u._AvgPool3DGrad=function(){return(u._AvgPool3DGrad=u.asm.AvgPool3DGrad).apply(null,arguments)},u._AvgPoolGrad=function(){return(u._AvgPoolGrad=u.asm.AvgPoolGrad).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.BatchMatMul).apply(null,arguments)},u._Bincount=function(){return(u._Bincount=u.asm.Bincount).apply(null,arguments)},u._BitwiseAnd=function(){return(u._BitwiseAnd=u.asm.BitwiseAnd).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.Ceil).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.ClipByValue).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Conv2D).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.Conv2DBackpropInput).apply(null,arguments)},u._Conv3D=function(){return(u._Conv3D=u.asm.Conv3D).apply(null,arguments)},u._Conv3DBackpropFilterV2=function(){return(u._Conv3DBackpropFilterV2=u.asm.Conv3DBackpropFilterV2).apply(null,arguments)},u._Conv3DBackpropInputV2=function(){return(u._Conv3DBackpropInputV2=u.asm.Conv3DBackpropInputV2).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.Cos).apply(null,arguments)},u._Cosh=function(){return(u._Cosh=u.asm.Cosh).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.CropAndResize).apply(null,arguments)},u._Cumprod=function(){return(u._Cumprod=u.asm.Cumprod).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.Cumsum).apply(null,arguments)},u._DenseBincount=function(){return(u._DenseBincount=u.asm.DenseBincount).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.DepthToSpace).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.DepthwiseConv2dNative).apply(null,arguments)},u._Diag=function(){return(u._Diag=u.asm.Diag).apply(null,arguments)},u._Dilation2D=function(){return(u._Dilation2D=u.asm.Dilation2D).apply(null,arguments)},u._Dilation2DBackpropFilter=function(){return(u._Dilation2DBackpropFilter=u.asm.Dilation2DBackpropFilter).apply(null,arguments)},u._Dilation2DBackpropInput=function(){return(u._Dilation2DBackpropInput=u.asm.Dilation2DBackpropInput).apply(null,arguments)},u._Elu=function(){return(u._Elu=u.asm.Elu).apply(null,arguments)},u._EluGrad=function(){return(u._EluGrad=u.asm.EluGrad).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.Equal).apply(null,arguments)},u._Erf=function(){return(u._Erf=u.asm.Erf).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Exp).apply(null,arguments)},u._Expm1=function(){return(u._Expm1=u.asm.Expm1).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.FlipLeftRight).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm.Floor).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.FloorDiv).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.FusedBatchNorm).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.FusedConv2D).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.FusedDepthwiseConv2D).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.Gather).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.GatherNd).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.Greater).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.GreaterEqual).apply(null,arguments)},u._IsFinite=function(){return(u._IsFinite=u.asm.IsFinite).apply(null,arguments)},u._IsInf=function(){return(u._IsInf=u.asm.IsInf).apply(null,arguments)},u._IsNan=function(){return(u._IsNan=u.asm.IsNan).apply(null,arguments)},u._LRN=function(){return(u._LRN=u.asm.LRN).apply(null,arguments)},u._LRNGrad=function(){return(u._LRNGrad=u.asm.LRNGrad).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.LeakyRelu).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.Less).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.LessEqual).apply(null,arguments)},u._LinSpace=function(){return(u._LinSpace=u.asm.LinSpace).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.Log).apply(null,arguments)},u._Log1p=function(){return(u._Log1p=u.asm.Log1p).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.LogicalAnd).apply(null,arguments)},u._LogicalNot=function(){return(u._LogicalNot=u.asm.LogicalNot).apply(null,arguments)},u._LogicalOr=function(){return(u._LogicalOr=u.asm.LogicalOr).apply(null,arguments)},u._LogicalXor=function(){return(u._LogicalXor=u.asm.LogicalXor).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.Max).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.MaxPool).apply(null,arguments)},u._MaxPool3D=function(){return(u._MaxPool3D=u.asm.MaxPool3D).apply(null,arguments)},u._MaxPool3DGrad=function(){return(u._MaxPool3DGrad=u.asm.MaxPool3DGrad).apply(null,arguments)},u._MaxPoolGrad=function(){return(u._MaxPoolGrad=u.asm.MaxPoolGrad).apply(null,arguments)},u._MaxPoolWithArgmax=function(){return(u._MaxPoolWithArgmax=u.asm.MaxPoolWithArgmax).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.Maximum).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.Mean).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.Min).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.Minimum).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.MirrorPad).apply(null,arguments)},u._Mod=function(){return(u._Mod=u.asm.Mod).apply(null,arguments)},u._Multinomial=function(){return(u._Multinomial=u.asm.Multinomial).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.Multiply).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.Neg).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.NonMaxSuppressionV3).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.NonMaxSuppressionV4).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.NonMaxSuppressionV5).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.NotEqual).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.OneHot).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.PadV2).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Pow).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Prelu).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Prod).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.RealDiv).apply(null,arguments)},u._Reciprocal=function(){return(u._Reciprocal=u.asm.Reciprocal).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Relu).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Relu6).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.ResizeBilinear).apply(null,arguments)},u._ResizeBilinearGrad=function(){return(u._ResizeBilinearGrad=u.asm.ResizeBilinearGrad).apply(null,arguments)},u._ResizeNearestNeighbor=function(){return(u._ResizeNearestNeighbor=u.asm.ResizeNearestNeighbor).apply(null,arguments)},u._ResizeNearestNeighborGrad=function(){return(u._ResizeNearestNeighborGrad=u.asm.ResizeNearestNeighborGrad).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Reverse).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.RotateWithOffset).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Round).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.Rsqrt).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.ScatterNd).apply(null,arguments)},u._SearchSorted=function(){return(u._SearchSorted=u.asm.SearchSorted).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.SelectV2).apply(null,arguments)},u._Selu=function(){return(u._Selu=u.asm.Selu).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Sigmoid).apply(null,arguments)},u._Sign=function(){return(u._Sign=u.asm.Sign).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Sin).apply(null,arguments)},u._Sinh=function(){return(u._Sinh=u.asm.Sinh).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Softmax).apply(null,arguments)},u._Softplus=function(){return(u._Softplus=u.asm.Softplus).apply(null,arguments)},u._SparseFillEmptyRows=function(){return(u._SparseFillEmptyRows=u.asm.SparseFillEmptyRows).apply(null,arguments)},u._SparseReshape=function(){return(u._SparseReshape=u.asm.SparseReshape).apply(null,arguments)},u._SparseSegmentReduction=function(){return(u._SparseSegmentReduction=u.asm.SparseSegmentReduction).apply(null,arguments)},u._SparseToDense=function(){return(u._SparseToDense=u.asm.SparseToDense).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Sqrt).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Square).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.SquaredDifference).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Step).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.StridedSlice).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Sub).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Sum).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Tan).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Tanh).apply(null,arguments)},u._TensorScatterUpdate=function(){return(u._TensorScatterUpdate=u.asm.TensorScatterUpdate).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm.Tile).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.TopK).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.Transform).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.Transpose).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm._FusedMatMul).apply(null,arguments)},u._malloc=function(){return(u._malloc=u.asm.malloc).apply(null,arguments)},u._free=function(){return(u._free=u.asm.free).apply(null,arguments)},u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm._emscripten_tls_init).apply(null,arguments)};var Yg=u._pthread_self=function(){return(Yg=u._pthread_self=u.asm.pthread_self).apply(null,arguments)};u.___errno_location=function(){return(u.___errno_location=u.asm.__errno_location).apply(null,arguments)};var PT=u.__emscripten_thread_init=function(){return(PT=u.__emscripten_thread_init=u.asm._emscripten_thread_init).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm._emscripten_thread_crashed).apply(null,arguments)},u._emscripten_main_thread_process_queued_calls=function(){return(u._emscripten_main_thread_process_queued_calls=u.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},u._emscripten_main_browser_thread_id=function(){return(u._emscripten_main_browser_thread_id=u.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var zT=u._emscripten_run_in_main_runtime_thread_js=function(){return(zT=u._emscripten_run_in_main_runtime_thread_js=u.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};u._emscripten_dispatch_to_thread_=function(){return(u._emscripten_dispatch_to_thread_=u.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var BT=u.__emscripten_proxy_execute_task_queue=function(){return(BT=u.__emscripten_proxy_execute_task_queue=u.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},rw=u.__emscripten_thread_free_data=function(){return(rw=u.__emscripten_thread_free_data=u.asm._emscripten_thread_free_data).apply(null,arguments)},WT=u.__emscripten_thread_exit=function(){return(WT=u.__emscripten_thread_exit=u.asm._emscripten_thread_exit).apply(null,arguments)},VT=u._emscripten_stack_set_limits=function(){return(VT=u._emscripten_stack_set_limits=u.asm.emscripten_stack_set_limits).apply(null,arguments)},aw=u.stackSave=function(){return(aw=u.stackSave=u.asm.stackSave).apply(null,arguments)},Zg=u.stackRestore=function(){return(Zg=u.stackRestore=u.asm.stackRestore).apply(null,arguments)},Qg=u.stackAlloc=function(){return(Qg=u.stackAlloc=u.asm.stackAlloc).apply(null,arguments)};u.dynCall_iijjiiii=function(){return(u.dynCall_iijjiiii=u.asm.dynCall_iijjiiii).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.dynCall_jiji).apply(null,arguments)},u.keepRuntimeAlive=Lt,u.wasmMemory=M,u.cwrap=rj,u.ExitStatus=ii,u.PThread=ve;var Jg;An=function O(){Jg||UT(),Jg||(An=O)};function UT(O){if(xn>0)return;if(v){c(u),vn(),startWorker(u);return}if(rr(),xn>0)return;function J(){Jg||(Jg=!0,u.calledRun=!0,!V&&(vn(),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),ar()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),J()},1)):J()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();UT();var eb;p&&(eb={uncaughtException:process.listeners("uncaughtException").filter(function(O){return!p.uncaughtException.indexOf(O)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(O){return!p.unhandledRejection.indexOf(O)>-1})});var tb;if(typeof WasmBackendModule<"u")tb=WasmBackendModule;else if(typeof a<"u")tb=a;else throw new Error("Could not find wasm module in post.js");if(eb){var ij=tb._dispose;tb._dispose=function(){ij(),eb.uncaughtException.forEach(function(O){process.removeListener("uncaughtException",O)}),eb.unhandledRejection.forEach(function(O){process.removeListener("unhandledRejection",O)})}}return a.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&(e.WasmBackendModuleThreadedSimd=n)}),hZ=bn((e,t)=>{t.exports.wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'}),pZ=bn((e,t)=>{var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(a){a=a||{};var i=typeof a<"u"?a:{},s,o;i.ready=new Promise(function(ae,ue){s=ae,o=ue});var l;typeof process<"u"&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var d=Object.assign({},i),u=typeof window=="object",c=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",p="";function f(ae){return i.locateFile?i.locateFile(ae,p):p+ae}var m,g,b;if(h){var y=p$(),v=f3();c?p=v.dirname(p)+"/":p=__dirname+"/",m=(ae,ue)=>(ae=Je(ae)?new URL(ae):v.normalize(ae),y.readFileSync(ae,ue?void 0:"utf8")),b=ae=>{var ue=m(ae,!0);return ue.buffer||(ue=new Uint8Array(ue)),ue},g=(ae,ue,Ee)=>{ae=Je(ae)?new URL(ae):v.normalize(ae),y.readFile(ae,function(ve,vt){ve?Ee(ve):ue(vt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(ae){if(!(ae instanceof Lt))throw ae}),process.on("unhandledRejection",function(ae){throw ae}),i.inspect=function(){return"[Emscripten Module object]"}}else(u||c)&&(c?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),r&&(p=r),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",m=ae=>{var ue=new XMLHttpRequest;return ue.open("GET",ae,!1),ue.send(null),ue.responseText},c&&(b=ae=>{var ue=new XMLHttpRequest;return ue.open("GET",ae,!1),ue.responseType="arraybuffer",ue.send(null),new Uint8Array(ue.response)}),g=(ae,ue,Ee)=>{var ve=new XMLHttpRequest;ve.open("GET",ae,!0),ve.responseType="arraybuffer",ve.onload=()=>{if(ve.status==200||ve.status==0&&ve.response){ue(ve.response);return}Ee()},ve.onerror=Ee,ve.send(null)});var x=i.print||console.log.bind(console),w=i.printErr||console.warn.bind(console);Object.assign(i,d),d=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var $;i.wasmBinary&&($=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&Le("no native wasm support detected");var C,E=!1,A=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function R(ae,ue,Ee){ue>>>=0;for(var ve=ue+Ee,vt=ue;ae[vt]&&!(vt>=ve);)++vt;if(vt-ue>16&&ae.buffer&&A)return A.decode(ae.subarray(ue,vt));for(var Ct="";ue<vt;){var Pe=ae[ue++];if(!(Pe&128)){Ct+=String.fromCharCode(Pe);continue}var ze=ae[ue++]&63;if((Pe&224)==192){Ct+=String.fromCharCode((Pe&31)<<6|ze);continue}var Ut=ae[ue++]&63;if((Pe&240)==224?Pe=(Pe&15)<<12|ze<<6|Ut:Pe=(Pe&7)<<18|ze<<12|Ut<<6|ae[ue++]&63,Pe<65536)Ct+=String.fromCharCode(Pe);else{var Ft=Pe-65536;Ct+=String.fromCharCode(55296|Ft>>10,56320|Ft&1023)}}return Ct}function N(ae,ue){return ae>>>=0,ae?R(H,ae,ue):""}function I(ae,ue,Ee,ve){if(Ee>>>=0,!(ve>0))return 0;for(var vt=Ee,Ct=Ee+ve-1,Pe=0;Pe<ae.length;++Pe){var ze=ae.charCodeAt(Pe);if(ze>=55296&&ze<=57343){var Ut=ae.charCodeAt(++Pe);ze=65536+((ze&1023)<<10)|Ut&1023}if(ze<=127){if(Ee>=Ct)break;ue[Ee++>>>0]=ze}else if(ze<=2047){if(Ee+1>=Ct)break;ue[Ee++>>>0]=192|ze>>6,ue[Ee++>>>0]=128|ze&63}else if(ze<=65535){if(Ee+2>=Ct)break;ue[Ee++>>>0]=224|ze>>12,ue[Ee++>>>0]=128|ze>>6&63,ue[Ee++>>>0]=128|ze&63}else{if(Ee+3>=Ct)break;ue[Ee++>>>0]=240|ze>>18,ue[Ee++>>>0]=128|ze>>12&63,ue[Ee++>>>0]=128|ze>>6&63,ue[Ee++>>>0]=128|ze&63}}return ue[Ee>>>0]=0,Ee-vt}function F(ae,ue,Ee){return I(ae,H,ue,Ee)}var L,P,H,X;function M(ae){L=ae,i.HEAP8=P=new Int8Array(ae),i.HEAP16=new Int16Array(ae),i.HEAP32=new Int32Array(ae),i.HEAPU8=H=new Uint8Array(ae),i.HEAPU16=new Uint16Array(ae),i.HEAPU32=X=new Uint32Array(ae),i.HEAPF32=new Float32Array(ae),i.HEAPF64=new Float64Array(ae)}i.INITIAL_MEMORY;var B=[],V=[],K=[];function Q(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)se(i.preRun.shift());rr(B)}function ee(){rr(V)}function ie(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)fe(i.postRun.shift());rr(K)}function se(ae){B.unshift(ae)}function ge(ae){V.unshift(ae)}function fe(ae){K.unshift(ae)}var pe=0,Ne=null;function De(ae){pe++,i.monitorRunDependencies&&i.monitorRunDependencies(pe)}function Ve(ae){if(pe--,i.monitorRunDependencies&&i.monitorRunDependencies(pe),pe==0&&Ne){var ue=Ne;Ne=null,ue()}}function Le(ae){i.onAbort&&i.onAbort(ae),ae="Aborted("+ae+")",w(ae),E=!0,ae+=". Build with -sASSERTIONS for more info.";var ue=new WebAssembly.RuntimeError(ae);throw o(ue),ue}var ct="data:application/octet-stream;base64,";function Ze(ae){return ae.startsWith(ct)}function Je(ae){return ae.startsWith("file://")}var Oe;Oe="tfjs-backend-wasm.wasm",Ze(Oe)||(Oe=f(Oe));function at(ae){try{if(ae==Oe&&$)return new Uint8Array($);if(b)return b(ae);throw"both async and sync fetching of the wasm failed"}catch(ue){Le(ue)}}function yt(){if(!$&&(u||c)){if(typeof fetch=="function"&&!Je(Oe))return fetch(Oe,{credentials:"same-origin"}).then(function(ae){if(!ae.ok)throw"failed to load wasm binary file at '"+Oe+"'";return ae.arrayBuffer()}).catch(function(){return at(Oe)});if(g)return new Promise(function(ae,ue){g(Oe,function(Ee){ae(new Uint8Array(Ee))},ue)})}return Promise.resolve().then(function(){return at(Oe)})}function pr(){var ae={env:Vd,wasi_snapshot_preview1:Vd};function ue(Pe,ze){var Ut=Pe.exports;i.asm=Ut,C=i.asm.memory,M(C.buffer),i.asm.__indirect_function_table,ge(i.asm.__wasm_call_ctors),Ve()}De();function Ee(Pe){ue(Pe.instance)}function ve(Pe){return yt().then(function(ze){return WebAssembly.instantiate(ze,ae)}).then(function(ze){return ze}).then(Pe,function(ze){w("failed to asynchronously prepare wasm: "+ze),Le(ze)})}function vt(){return!$&&typeof WebAssembly.instantiateStreaming=="function"&&!Ze(Oe)&&!Je(Oe)&&!h&&typeof fetch=="function"?fetch(Oe,{credentials:"same-origin"}).then(function(Pe){var ze=WebAssembly.instantiateStreaming(Pe,ae);return ze.then(Ee,function(Ut){return w("wasm streaming compile failed: "+Ut),w("falling back to ArrayBuffer instantiation"),ve(Ee)})}):ve(Ee)}if(i.instantiateWasm)try{var Ct=i.instantiateWasm(ae,ue);return Ct}catch(Pe){w("Module.instantiateWasm callback failed with error: "+Pe),o(Pe)}return vt().catch(o),{}}function Lt(ae){this.name="ExitStatus",this.message="Program terminated with exit("+ae+")",this.status=ae}function rr(ae){for(;ae.length>0;)ae.shift()(i)}function vn(){Le("")}function ar(){return 4294901760}function Kr(){return ar()}function fr(ae,ue,Ee){H.copyWithin(ae>>>0,ue>>>0,ue+Ee>>>0)}function ir(ae){try{return C.grow(ae-L.byteLength+65535>>>16),M(C.buffer),1}catch(ue){}}function xn(ae){var ue=H.length;ae=ae>>>0;var Ee=ar();if(ae>Ee)return!1;let ve=(Ut,Ft)=>Ut+(Ft-Ut%Ft)%Ft;for(var vt=1;vt<=4;vt*=2){var Ct=ue*(1+.2/vt);Ct=Math.min(Ct,ae+100663296);var Pe=Math.min(Ee,ve(Math.max(ae,Ct),65536)),ze=ir(Pe);if(ze)return!0}return!1}function An(ae){return 52}function Fr(ae,ue,Ee,ve,vt){return 70}var ai=[null,[],[]];function un(ae,ue){var Ee=ai[ae];ue===0||ue===10?((ae===1?x:w)(R(Ee,0)),Ee.length=0):Ee.push(ue)}function Xr(ae,ue,Ee,ve){for(var vt=0,Ct=0;Ct<Ee;Ct++){var Pe=X[ue>>>2],ze=X[ue+4>>>2];ue+=8;for(var Ut=0;Ut<ze;Ut++)un(ae,H[Pe+Ut>>>0]);vt+=ze}return X[ve>>>2]=vt,0}function sr(ae){var ue=i["_"+ae];return ue}function Fi(ae,ue){P.set(ae,ue>>>0)}function wn(ae,ue,Ee,ve,vt){var Ct={string:jn=>{var Mi=0;if(jn!=null&&jn!==0){var Ws=(jn.length<<2)+1;Mi=ii(Ws),F(jn,Mi,Ws)}return Mi},array:jn=>{var Mi=ii(jn.length);return Fi(jn,Mi),Mi}};function Pe(jn){return ue==="string"?N(jn):ue==="boolean"?!!jn:jn}var ze=sr(ae),Ut=[],Ft=0;if(ve)for(var si=0;si<ve.length;si++){var qd=Ct[Ee[si]];qd?(Ft===0&&(Ft=Ud()),Ut[si]=qd(ve[si])):Ut[si]=ve[si]}var nl=ze.apply(null,Ut);function rl(jn){return Ft!==0&&Hd(Ft),Pe(jn)}return nl=rl(nl),nl}function Wd(ae,ue,Ee,ve){Ee=Ee||[];var vt=Ee.every(Pe=>Pe==="number"||Pe==="boolean"),Ct=ue!=="string";return Ct&&vt&&!ve?sr(ae):function(){return wn(ae,ue,Ee,arguments)}}var Vd={abort:vn,emscripten_get_heap_max:Kr,emscripten_memcpy_big:fr,emscripten_resize_heap:xn,fd_close:An,fd_seek:Fr,fd_write:Xr};pr(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Acos=function(){return(i._Acos=i.asm.Acos).apply(null,arguments)},i._Acosh=function(){return(i._Acosh=i.asm.Acosh).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._ArgMin=function(){return(i._ArgMin=i.asm.ArgMin).apply(null,arguments)},i._Asin=function(){return(i._Asin=i.asm.Asin).apply(null,arguments)},i._Asinh=function(){return(i._Asinh=i.asm.Asinh).apply(null,arguments)},i._Atan=function(){return(i._Atan=i.asm.Atan).apply(null,arguments)},i._Atan2=function(){return(i._Atan2=i.asm.Atan2).apply(null,arguments)},i._Atanh=function(){return(i._Atanh=i.asm.Atanh).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._AvgPool3D=function(){return(i._AvgPool3D=i.asm.AvgPool3D).apply(null,arguments)},i._AvgPool3DGrad=function(){return(i._AvgPool3DGrad=i.asm.AvgPool3DGrad).apply(null,arguments)},i._AvgPoolGrad=function(){return(i._AvgPoolGrad=i.asm.AvgPoolGrad).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Bincount=function(){return(i._Bincount=i.asm.Bincount).apply(null,arguments)},i._BitwiseAnd=function(){return(i._BitwiseAnd=i.asm.BitwiseAnd).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Conv3D=function(){return(i._Conv3D=i.asm.Conv3D).apply(null,arguments)},i._Conv3DBackpropFilterV2=function(){return(i._Conv3DBackpropFilterV2=i.asm.Conv3DBackpropFilterV2).apply(null,arguments)},i._Conv3DBackpropInputV2=function(){return(i._Conv3DBackpropInputV2=i.asm.Conv3DBackpropInputV2).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DenseBincount=function(){return(i._DenseBincount=i.asm.DenseBincount).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Diag=function(){return(i._Diag=i.asm.Diag).apply(null,arguments)},i._Dilation2D=function(){return(i._Dilation2D=i.asm.Dilation2D).apply(null,arguments)},i._Dilation2DBackpropFilter=function(){return(i._Dilation2DBackpropFilter=i.asm.Dilation2DBackpropFilter).apply(null,arguments)},i._Dilation2DBackpropInput=function(){return(i._Dilation2DBackpropInput=i.asm.Dilation2DBackpropInput).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._EluGrad=function(){return(i._EluGrad=i.asm.EluGrad).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Erf=function(){return(i._Erf=i.asm.Erf).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._Expm1=function(){return(i._Expm1=i.asm.Expm1).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._IsFinite=function(){return(i._IsFinite=i.asm.IsFinite).apply(null,arguments)},i._IsInf=function(){return(i._IsInf=i.asm.IsInf).apply(null,arguments)},i._IsNan=function(){return(i._IsNan=i.asm.IsNan).apply(null,arguments)},i._LRN=function(){return(i._LRN=i.asm.LRN).apply(null,arguments)},i._LRNGrad=function(){return(i._LRNGrad=i.asm.LRNGrad).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._LinSpace=function(){return(i._LinSpace=i.asm.LinSpace).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._Log1p=function(){return(i._Log1p=i.asm.Log1p).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._MaxPool3D=function(){return(i._MaxPool3D=i.asm.MaxPool3D).apply(null,arguments)},i._MaxPool3DGrad=function(){return(i._MaxPool3DGrad=i.asm.MaxPool3DGrad).apply(null,arguments)},i._MaxPoolGrad=function(){return(i._MaxPoolGrad=i.asm.MaxPoolGrad).apply(null,arguments)},i._MaxPoolWithArgmax=function(){return(i._MaxPoolWithArgmax=i.asm.MaxPoolWithArgmax).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Mod=function(){return(i._Mod=i.asm.Mod).apply(null,arguments)},i._Multinomial=function(){return(i._Multinomial=i.asm.Multinomial).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Reciprocal=function(){return(i._Reciprocal=i.asm.Reciprocal).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._ResizeBilinearGrad=function(){return(i._ResizeBilinearGrad=i.asm.ResizeBilinearGrad).apply(null,arguments)},i._ResizeNearestNeighbor=function(){return(i._ResizeNearestNeighbor=i.asm.ResizeNearestNeighbor).apply(null,arguments)},i._ResizeNearestNeighborGrad=function(){return(i._ResizeNearestNeighborGrad=i.asm.ResizeNearestNeighborGrad).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SearchSorted=function(){return(i._SearchSorted=i.asm.SearchSorted).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Selu=function(){return(i._Selu=i.asm.Selu).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sign=function(){return(i._Sign=i.asm.Sign).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Sinh=function(){return(i._Sinh=i.asm.Sinh).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._Softplus=function(){return(i._Softplus=i.asm.Softplus).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._SparseToDense=function(){return(i._SparseToDense=i.asm.SparseToDense).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._TensorScatterUpdate=function(){return(i._TensorScatterUpdate=i.asm.TensorScatterUpdate).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)};var Ud=i.stackSave=function(){return(Ud=i.stackSave=i.asm.stackSave).apply(null,arguments)},Hd=i.stackRestore=function(){return(Hd=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},ii=i.stackAlloc=function(){return(ii=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.cwrap=Wd;var Bs;Ne=function ae(){Bs||jd(),Bs||(Ne=ae)};function jd(ae){if(pe>0||(Q(),pe>0))return;function ue(){Bs||(Bs=!0,i.calledRun=!0,!E&&(ee(),s(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),ie()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),ue()},1)):ue()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();jd();var os;l&&(os={uncaughtException:process.listeners("uncaughtException").filter(function(ae){return!l.uncaughtException.indexOf(ae)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(ae){return!l.unhandledRejection.indexOf(ae)>-1})});var ls;if(typeof a<"u")ls=a;else if(typeof WasmBackendModuleThreadedSimd<"u")ls=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(os){var Gd=ls._dispose;ls._dispose=function(){Gd(),os.uncaughtException.forEach(function(ae){process.removeListener("uncaughtException",ae)}),os.unhandledRejection.forEach(function(ae){process.removeListener("unhandledRejection",ae)})}}return a.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&(e.WasmBackendModule=n)}),C0=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},Bm=class{refCount(e){return Yr("refCount")}incRef(e){return Yr("incRef")}timerAvailable(){return!0}time(e){return Yr("time")}read(e){return Yr("read")}readSync(e){return Yr("readSync")}readToGPU(e,t){return Yr("readToGPU")}numDataIds(){return Yr("numDataIds")}disposeData(e,t){return Yr("disposeData")}write(e,t,n){return Yr("write")}move(e,t,n,r,a){return Yr("move")}createTensorFromGPUData(e,t,n){return Yr("createTensorFromGPUData")}memory(){return Yr("memory")}floatPrecision(){return Yr("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Yr("dispose")}};function Yr(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}function m3(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,nv(e,t,n)}function fZ(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was ".concat(e.length,"Second array length was ").concat(t.length));let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,nv(e,n,r),nv(t,n,r)}function sm(e,t,n){return Math.max(e,Math.min(t,n))}function mZ(e){return e%2===0?e:e+1}function nv(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function gZ(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function bZ(e,t){let n=Math.random();return t*n+(1-n)*e}function yZ(e,t){let n=0;for(let r=0;r<e.length;r++){let a=Number(e[r])-Number(t[r]);n+=a*a}return n}function D(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function _r(e,t,n=""){D(Fs(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function du(e){D(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function At(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function vZ(e){return e.length===0}function g3(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Fs(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gc(e){return e%1===0}function xZ(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function wZ(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function kZ(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return m3(t),t}function Rf(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function SZ(e,t=a=>0,n,r){return new Promise((a,i)=>{let s=0,o=()=>{if(e()){a();return}s++;let l=t(s);if(n!=null&&s>=n){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function IZ(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(e[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(i));r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found ".concat(e[i]," at dim ").concat(i));if(r===-1){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(n===0)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!==0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));let a=e.slice();return a[r]=t/n,a}function ti(e,t){let n=t.length;return e=e==null?t.map((r,a)=>a):[].concat(e),D(e.every(r=>r>=-n&&r<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)),D(e.every(r=>Gc(r)),()=>"All values in axis param must be integers but got axis ".concat(e)),e.map(r=>r<0?n+r:r)}function b3(e,t){let n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:ti(t,e).sort(),s=0;for(let o=0;o<e.length;++o){if(i!=null){if(i[s]===o&&e[o]!==1)throw new Error("Can't squeeze axis ".concat(o," since its dim '").concat(e[o],"' is not 1"));(i[s]==null||i[s]>o)&&e[o]===1&&(n.push(e[o]),r.push(o)),i[s]<=o&&s++}e[o]!==1&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function y3(e,t){return f$(e,t)}function f$(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error("Unknown data type ".concat(e));return n}function v3(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function x3(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function $Z(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function rv(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype ".concat(e))}function w3(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function no(e){return typeof e=="string"||e instanceof String}function k3(e){return typeof e=="boolean"}function S3(e){return typeof e=="number"}function Wm(e){return Array.isArray(e)?Wm(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":S3(e)?"float32":no(e)?"string":k3(e)?"bool":"float32"}function So(e){return!!(e&&e.constructor&&e.call&&e.apply)}function av(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function vh(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function I3(e,t,n,r=!1){let a=new Array;if(t.length===1){let i=t[0]*(r?2:1);for(let s=0;s<i;s++)a[s]=n[e+s]}else{let i=t[0],s=t.slice(1),o=s.reduce((l,d)=>l*d)*(r?2:1);for(let l=0;l<i;l++)a[l]=I3(e+l*o,s,n,r)}return a}function _c(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return I3(0,e,t,n)}function CZ(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function m$(e,t){let n=E0(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function E0(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function EZ(e,t){let n=e.reduce((r,a)=>r*a,1);if(t==null||t==="float32")return _c(e,new Float32Array(n));if(t==="int32")return _c(e,new Int32Array(n));if(t==="bool")return _c(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function ya(e){e.forEach(t=>{D(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"]."))})}function TZ(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function NZ(e,t,n){if(t===0)return[];if(t===1)return[e];let r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function T0(e){return e&&e.then&&typeof e.then=="function"}var wA="tfjsflags",$3=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=_Z,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(Z().getBool("IS_TEST")||Z().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},this.urlFlags[e]!=null){let r=this.urlFlags[e];Z().getBool("IS_TEST")||Z().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(T0(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);wA in e&&e[wA].split(",").forEach(t=>{let[n,r]=t.split(":");this.urlFlags[n]=RZ(n,r)})}};function _Z(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(AZ(t,r[0],r[1]),r.join("="))),t}function AZ(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function RZ(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":"".concat(+n)===n?+n:t}function Z(){return g$}var g$=null;function DZ(e){g$=e}var Yw;function C3(){if(Yw==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");Yw=e}return Yw}function FZ(){let e=C3();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function b$(e,t){let n=FZ();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var xh="Abs",cu="Acos",hu="Acosh",Bo="Add",pu="AddN",wh="All",kh="Any",Sh="ArgMax",Ih="ArgMin",fu="Asin",mu="Asinh",gu="Atan",bu="Atanh",yu="Atan2",vu="AvgPool",Vm="AvgPoolGrad",$h="AvgPool3D",Um="AvgPool3DGrad",xu="BatchMatMul",Ch="BatchToSpaceND",Eh="Bincount",Th="BitwiseAnd",E3="BroadcastTo",Hm="BroadcastArgs",wu="Cast",ku="Ceil",Wo="ClipByValue",N0="Complex",jm="ComplexAbs",Nh="Concat",Su="Conv2D",_0="Conv2DBackpropFilter",Iu="Conv2DBackpropInput",$u="Conv3D",_h="Conv3DBackpropFilterV2",Ah="Conv3DBackpropInputV2",Cu="Cos",Eu="Cosh",Rh="Cumprod",Tu="Cumsum",Dh="CropAndResize",Gm="DenseBincount",Fh="DepthToSpace",Nu="DepthwiseConv2dNative",A0="DepthwiseConv2dNativeBackpropFilter",R0="DepthwiseConv2dNativeBackpropInput",qm="Diag",_u="Dilation2D",qc="Dilation2DBackpropInput",Kc="Dilation2DBackpropFilter",y$="Draw",Au="RealDiv",D0="Einsum",Ru="Elu",Mh="EluGrad",Du="Erf",Oh="Equal",Fu="Exp",Lh="ExpandDims",Mu="Expm1",F0="FFT",Km="Fill",Ph="FlipLeftRight",Ou="Floor",Lu="FloorDiv",Pu="FusedBatchNorm",zh="GatherV2",Bh="GatherNd",Wh="Greater",zu="GreaterEqual",Bu="Identity",M0="IFFT",O0="Imag",Wu="IsFinite",Vu="IsInf",Uu="IsNan",Hu="LeakyRelu",Vh="Less",Uh="LessEqual",Hh="LinSpace",ju="Log",Gu="Log1p",jh="LogicalAnd",Gh="LogicalNot",qh="LogicalOr",T3="LogicalXor",N3="LogSoftmax",MZ="LowerBound",qu="LRN",Kh="LRNGrad",OZ="MatrixBandPart",Ku="Max",Xu="Maximum",Yu="MaxPool",Xm="MaxPoolGrad",Xh="MaxPool3D",Ym="MaxPool3DGrad",Zm="MaxPoolWithArgmax",Zu="Mean",Qu="Min",Ju="Minimum",ed="MirrorPad",td="Mod",Yh="Multinomial",nd="Multiply",Zh="Neg",Qh="NotEqual",Jh="NonMaxSuppressionV3",ep="NonMaxSuppressionV4",tp="NonMaxSuppressionV5",np="OnesLike",rd="OneHot",rp="Pack",ad="PadV2",LZ="Pool",id="Pow",sd="Prelu",od="Prod",L0="RaggedGather",P0="RaggedRange",z0="RaggedTensorToTensor",Qm="Range",B0="Real",ld="Reciprocal",ud="Relu",ap="Reshape",dd="ResizeNearestNeighbor",ip="ResizeNearestNeighborGrad",cd="ResizeBilinear",sp="ResizeBilinearGrad",hd="Relu6",pd="Reverse",fd="Round",md="Rsqrt",op="ScatterNd",lp="TensorScatterUpdate",up="SearchSorted",dp="Select",gd="Selu",cp="Slice",bd="Sin",yd="Sinh",vd="Sign",xd="Sigmoid",wd="Softplus",kd="Sqrt",Sd="Sum",hp="SpaceToBatchND",pp="SplitV",Id="Softmax",Jm="SparseFillEmptyRows",fp="SparseReshape",eg="SparseSegmentMean",tg="SparseSegmentSum",mp="SparseToDense",$d="SquaredDifference",ng="Square",rg="StaticRegexReplace",gp="StridedSlice",ag="StringNGrams",ig="StringSplit",sg="StringToHashBucketFast",Cd="Sub",Ed="Tan",Td="Tanh",Vo="Tile",bp="TopK",yp="Transform",Ss="Transpose",og="Unique",vp="Unpack",lg="UnsortedSegmentSum",PZ="UpperBound",xp="ZerosLike",Uo="Step",iv="FromPixels",wp="RotateWithOffset",Wl="_FusedMatMul",Vl="FusedConv2D",Ul="FusedDepthwiseConv2D";function Qs(...e){Z().getBool("IS_TEST")||Z().getBool("PROD")||console.warn(...e)}function zZ(...e){Z().getBool("IS_TEST")||Z().getBool("PROD")||console.log(...e)}var Xc=b$("kernelRegistry",()=>new Map),om=b$("gradRegistry",()=>new Map);function sv(e,t){let n=v$(e,t);return Xc.get(n)}function Ek(e){return om.get(e)}function ov(e){let t=Xc.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[i,s]=a,[o]=i.split("_");o===e&&n.push(s)}return n}function ug(e){let{kernelName:t,backendName:n}=e,r=v$(t,n);Xc.has(r)&&Qs("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),Xc.set(r,e)}function _3(e){let{kernelName:t}=e;om.has(t)&&Z().getBool("DEBUG")&&Qs("Overriding the gradient for '".concat(t,"'")),om.set(t,e)}function BZ(e,t){let n=v$(e,t);if(!Xc.has(n))throw new Error("The kernel '".concat(e,"' for backend '").concat(t,"' is not registered"));Xc.delete(n)}function WZ(e){if(!om.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));om.delete(e)}function VZ(e,t){ov(e).forEach(n=>{let r=Object.assign({},n,{backendName:t});ug(r)})}function v$(e,t){return"".concat(t,"_").concat(e)}var k={};We(k,{arraysEqual:()=>Fs,arraysEqualWithNull:()=>g3,assert:()=>D,assertNonNegativeIntegerDimensions:()=>ya,assertNonNull:()=>du,assertShapesMatch:()=>_r,bytesFromStringArray:()=>w3,bytesPerElement:()=>rv,checkConversionForErrors:()=>v3,clamp:()=>sm,computeStrides:()=>vh,convertBackendValuesAndArrayBuffer:()=>CZ,createScalarValue:()=>KZ,createShuffledIndices:()=>kZ,decodeString:()=>lv,distSquared:()=>yZ,encodeString:()=>cg,fetch:()=>YZ,fingerPrint64:()=>qZ,flatten:()=>Io,getArrayFromDType:()=>f$,getTypedArrayFromDType:()=>y3,hasEncodingLoss:()=>$Z,hexToLong:()=>dg,indexToLoc:()=>NZ,inferDtype:()=>Wm,inferFromImplicitShape:()=>IZ,isBoolean:()=>k3,isFunction:()=>So,isInt:()=>Gc,isNumber:()=>S3,isPromise:()=>T0,isScalarShape:()=>vZ,isString:()=>no,isTypedArray:()=>Pn,isValidDtype:()=>x3,locToIndex:()=>TZ,makeOnesTypedArray:()=>m$,makeZerosNestedTypedArray:()=>EZ,makeZerosTypedArray:()=>E0,nearestDivisor:()=>av,nearestLargerEven:()=>mZ,now:()=>lm,parseAxisParam:()=>ti,randUniform:()=>bZ,repeatedTry:()=>SZ,rightPad:()=>Rf,shuffle:()=>m3,shuffleCombo:()=>fZ,sizeFromShape:()=>At,sizeToSquarishShape:()=>wZ,squeezeShape:()=>b3,sum:()=>gZ,swap:()=>nv,tanh:()=>xZ,toNestedArray:()=>_c,toTypedArray:()=>W0});function A3(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var kA=zo(ZY()),hl=kA.default||kA;function dg(e){return hl.fromString(e,!0,16)}var R3=dg("c3a5c85c97cb3127"),dl=dg("b492b66fbe98f273"),yr=dg("9ae16a3b2f90404f");function Tk(e){return e.xor(e.shru(47))}function D3(e,t,n){let r=e.slice(t,t+n);return hl.fromBytes(Array.from(r),!0,!0)}function Nt(e,t){return D3(e,t,8)}function SA(e,t){return D3(e,t,4)}function Ln(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function mo(e,t,n=dg("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function UZ(e,t,n,r,a,i){a=a.add(e),i=Ln(i.add(a).add(r),21);let s=a;return a=a.add(t),a=a.add(n),i=i.add(Ln(a,44)),[a.add(r),i.add(s)]}function Eb(e,t,n,r){return UZ(Nt(e,t),Nt(e,t+8),Nt(e,t+16),Nt(e,t+24),n,r)}function HZ(e,t=e.length){if(t>=8){let n=yr.add(t*2),r=Nt(e,0).add(yr),a=Nt(e,t-8),i=Ln(a,37).mul(n).add(r),s=Ln(r,25).add(a).mul(n);return mo(i,s,n)}if(t>=4){let n=yr.add(t*2),r=SA(e,0);return mo(r.shl(3).add(t),SA(e,t-4),n)}if(t>0){let n=e[0],r=e[t>>1],a=e[t-1],i=n+(r<<8),s=t+(a<<2);return Tk(yr.mul(i).xor(R3.mul(s))).mul(yr)}return yr}function jZ(e,t=e.length){let n=yr.add(t*2),r=Nt(e,0).mul(dl),a=Nt(e,8),i=Nt(e,t-8).mul(n),s=Nt(e,t-16).mul(yr);return mo(Ln(r.add(a),43).add(Ln(i,30)).add(s),r.add(Ln(a.add(yr),18)).add(i),n)}function GZ(e,t=e.length){let n=yr.add(t*2),r=Nt(e,0).mul(yr),a=Nt(e,8),i=Nt(e,t-8).mul(n),s=Nt(e,t-16).mul(yr),o=Ln(r.add(a),43).add(Ln(i,30)).add(s),l=mo(o,r.add(Ln(a.add(yr),18)).add(i),n),d=Nt(e,16).mul(n),u=Nt(e,24),c=o.add(Nt(e,t-32)).mul(n),h=l.add(Nt(e,t-24)).mul(n);return mo(Ln(d.add(u),43).add(Ln(c,30)).add(h),d.add(Ln(u.add(r),18)).add(c),n)}function qZ(e,t=e.length){let n=hl.fromNumber(81,!0);if(t<=32)return t<=16?HZ(e,t):jZ(e,t);if(t<=64)return GZ(e,t);let r=n,a=n.mul(dl).add(113),i=Tk(a.mul(yr).add(113)).mul(yr),s=[hl.UZERO,hl.UZERO],o=[hl.UZERO,hl.UZERO];r=r.mul(yr).add(Nt(e,0));let l=0,d=(t-1>>6)*64,u=d+(t-1&63)-63;do r=Ln(r.add(a).add(s[0]).add(Nt(e,l+8)),37).mul(dl),a=Ln(a.add(s[1]).add(Nt(e,l+48)),42).mul(dl),r=r.xor(o[1]),a=a.add(s[0]).add(Nt(e,l+40)),i=Ln(i.add(o[0]),33).mul(dl),s=Eb(e,l,s[1].mul(dl),r.add(o[0])),o=Eb(e,l+32,i.add(o[1]),a.add(Nt(e,l+16))),[i,r]=[r,i],l+=64;while(l!==d);let c=dl.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=Ln(r.add(a).add(s[0]).add(Nt(e,l+8)),37).mul(c),a=Ln(a.add(s[1]).add(Nt(e,l+48)),42).mul(c),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(Nt(e,l+40))),i=Ln(i.add(o[0]),33).mul(c),s=Eb(e,l,s[1].mul(c),r.add(o[0])),o=Eb(e,l+32,i.add(o[1]),a.add(Nt(e,l+16))),[i,r]=[r,i],mo(mo(s[0],o[0],c).add(Tk(a).mul(R3)).add(i),mo(s[1],o[1],c).add(r),c)}function KZ(e,t){return t==="string"?cg(e):W0([e],t)}function XZ(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function W0(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Io(e)),Z().getBool("DEBUG")&&v3(e,t),XZ(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error("Unknown data type ".concat(t))}function lm(){return Z().platform.now()}function YZ(e,t){return Z().platform.fetch(e,t)}function cg(e,t="utf-8"){return t=t||"utf-8",Z().platform.encode(e,t)}function lv(e,t="utf-8"){return t=t||"utf-8",Z().platform.decode(e,t)}function Pn(e){return Z().platform.isTypedArray!=null?Z().platform.isTypedArray(e):A3(e)}function Io(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||T0(e)||e==null||Pn(e)&&n)t.push(e);else if(Array.isArray(e)||Pn(e))for(let r=0;r<e.length;++r)Io(e[r],t,n);else{let r=-1;for(let a of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)Io(e[a],t,n)}return t}var ZZ=class{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new JZ)}profileKernel(e,t,n){let r,a=()=>{r=n()},i,s=lm();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(let o of r)o.dataSync();i=Promise.resolve({kernelMs:lm()-s})}if(Z().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let l=r[o];l.data().then(d=>{QZ(d,l.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then(o=>o.kernelMs),extraInfo:i.then(o=>o.getExtraProfileInfo!=null?o.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:i}=e;n.forEach(s=>{Promise.all([s.data(),r,i]).then(o=>{this.logger.logKernelProfile(t,s,o[0],o[1],a,o[2])})})}};function QZ(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var JZ=class{logKernelProfile(e,t,n,r,a,i){let s=typeof r=="number"?Rf("".concat(r,"ms"),9):r.error,o=Rf(e,25),l=t.rank,d=t.size,u=Rf(t.shape.toString(),14),c="";for(let h in a){let p=a[h];if(p!=null){let f=p.shape||t.shape,m=f.length;c+="".concat(h,": ").concat(m,"D ").concat(m>0?f:""," ")}}console.log("%c".concat(o,"	%c").concat(s,"	%c").concat(l,"D ").concat(u,"	%c").concat(d,"	%c").concat(c,"	%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function eQ(e,t,n){let r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let d=e[l],u=d.inputs;for(let c in u){let h=u[c],p=!1;for(let f=0;f<t.length;f++)if(r[h.id]){d.outputs.forEach(m=>r[m.id]=!0),p=!0,a[d.id]=!0;break}if(p)break}}let i={};i[n.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let d=e[l],u=d.inputs;for(let c=0;c<d.outputs.length;c++)if(i[d.outputs[c].id]){for(let h in u)i[u[h].id]=!0,s[d.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let d=e[l];if(a[d.id]&&s[d.id]){let u={};for(let h in d.inputs){let p=d.inputs[h];r[p.id]&&(u[h]=p)}let c=Object.assign({},d);c.inputs=u,c.outputs=d.outputs,o.push(c)}}return o}function tQ(e,t,n,r){for(let a=t.length-1;a>=0;a--){let i=t[a],s=[];if(i.outputs.forEach(l=>{let d=e[l.id];d!=null?s.push(d):s.push(null)}),i.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for ".concat(i.kernelName,"."));let o=i.gradient(s);for(let l in i.inputs){if(!(l in o))throw new Error("Cannot backprop through input ".concat(l,". Available gradients found: ").concat(Object.keys(o),"."));let d=n(()=>o[l]());if(d.dtype!=="float32")throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ").concat(l," must have 'float32' dtype, but has '").concat(d.dtype,"'"));let u=i.inputs[l];if(!Fs(d.shape,u.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input '").concat(l,"' has shape '").concat(d.shape,"', which does not match the shape of the input '").concat(u.shape,"'"));if(e[u.id]==null)e[u.id]=d;else{let c=e[u.id];e[u.id]=r(c,d),c.dispose()}}}}var IA=20,Jp=3,Zw=7;function nQ(e,t,n,r){let a=vh(t),i=rQ(e,t,n,a),s=t.length,o=ay(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(s)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(o.map(d=>"    "+d).join("\n")),l.join("\n")}function rQ(e,t,n,r){let a=At(t),i=r[r.length-1],s=new Array(i).fill(0),o=t.length,l=n==="complex64"?cf(e):e;if(o>1)for(let d=0;d<a/i;d++){let u=d*i;for(let c=0;c<i;c++)s[c]=Math.max(s[c],df(l[u+c],0,n).length)}return s}function df(e,t,n){let r;return Array.isArray(e)?r="".concat(parseFloat(e[0].toFixed(Zw))," + ").concat(parseFloat(e[1].toFixed(Zw)),"j"):no(e)?r="'".concat(e,"'"):n==="bool"?r=F3(e):r=parseFloat(e.toFixed(Zw)).toString(),Rf(r,t)}function F3(e){return e===0?"false":"true"}function ay(e,t,n,r,a,i=!0){let s=n==="complex64"?2:1,o=t[0],l=t.length;if(l===0){if(n==="complex64"){let m=cf(e);return[df(m[0],0,n)]}return n==="bool"?[F3(e[0])]:[e[0].toString()]}if(l===1){if(o>IA){let m=Jp*s,g=Array.from(e.slice(0,m)),b=Array.from(e.slice((o-Jp)*s,o*s));return n==="complex64"&&(g=cf(g),b=cf(b)),["["+g.map((y,v)=>df(y,a[v],n)).join(", ")+", ..., "+b.map((y,v)=>df(y,a[o-Jp+v],n)).join(", ")+"]"]}return["["+(n==="complex64"?cf(e):Array.from(e)).map((m,g)=>df(m,a[g],n)).join(", ")+"]"]}let d=t.slice(1),u=r.slice(1),c=r[0]*s,h=[];if(o>IA){for(let m=0;m<Jp;m++){let g=m*c,b=g+c;h.push(...ay(e.slice(g,b),d,n,u,a,!1))}h.push("...");for(let m=o-Jp;m<o;m++){let g=m*c,b=g+c;h.push(...ay(e.slice(g,b),d,n,u,a,m===o-1))}}else for(let m=0;m<o;m++){let g=m*c,b=g+c;h.push(...ay(e.slice(g,b),d,n,u,a,m===o-1))}let p=l===2?",":"";h[0]="["+(o>0?h[0]+p:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":f),h}function cf(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var mn=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=At(e),n!=null){let r=n.length;D(r===this.size,()=>"Length of values '".concat(r,"' does not match the size inferred by the shape '").concat(this.size,"'."))}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||f$(t,this.size),this.strides=vh(e)}set(e,...t){t.length===0&&(t=[0]),D(t.length===this.rank,()=>"The number of provided coordinates (".concat(t.length,") must match the rank (").concat(this.rank,")"));let n=this.locToIndex(t);this.values[n]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(let r of e){if(r<0||r>=this.shape[t]){let a="Requested out of range element at ".concat(e,".   Buffer shape=").concat(this.shape);throw new Error(a)}t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return bi().makeTensor(this.values,this.shape,this.dtype)}},bi=null,sc=null;function aQ(e){bi=e}function iQ(e){sc=e}var Ue=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=At(e),this.strides=vh(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return sc.buffer(this.shape,this.dtype,e)}bufferSync(){return sc.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return _c(this.shape,e,this.dtype==="complex64")}arraySync(){return _c(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=bi().read(this.dataId);if(this.dtype==="string"){let t=await e;try{return t.map(n=>lv(n))}catch(n){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),bi().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=bi().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>lv(t))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await bi().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(bi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return sc.print(this,e)}clone(){return this.throwIfDisposed(),sc.clone(this)}toString(e=!1){let t=this.dataSync();return nQ(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),sc.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),bi().makeVariable(this,e,t,n)}};Object.defineProperty(Ue,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function re(){return b$("Tensor",()=>Ue)}re();var Hl=class extends Ue{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!Fs(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));bi().disposeTensor(this),this.dataId=e.dataId,bi().incRef(this,null)}dispose(){bi().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(Hl,Symbol.hasInstance,{value:e=>e instanceof Ue&&e.assign!=null&&e.assign instanceof Function});var Ii={};We(Ii,{assertTypesMatch:()=>L3,getTensorsInContainer:()=>x$,isTensorInList:()=>oQ,makeTypesMatch:()=>Yt});var Nk;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(Nk||(Nk={}));var _k;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(_k||(_k={}));var Ak;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Ak||(Ak={}));var Rk;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Rk||(Rk={}));var Dk;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Dk||(Dk={}));var sQ={float32:Rk,int32:_k,bool:Ak,complex64:Dk};function Ra(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return sQ[e][t]}function V0(e){return Ra(e,"int32")}function M3(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function O3(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Yt(e,t){if(e.dtype===t.dtype)return[e,t];let n=Ra(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function L3(e,t){D(e.dtype===t.dtype,()=>"The dtypes of the first(".concat(e.dtype,") and second(").concat(t.dtype,") input must match"))}function oQ(e,t){return t.some(n=>n.id===e.id)}function x$(e){let t=[];return P3(e,t,new Set),t}function P3(e,t,n){if(e==null)return;if(e instanceof Ue){t.push(e);return}if(!lQ(e))return;let r=e;for(let a in r){let i=r[a];n.has(i)||(n.add(i),P3(i,t,n))}}function lQ(e){return Array.isArray(e)||typeof e=="object"}function Qw(e){return e.kernelName!=null}var $A=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},um=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new $A}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success){await this.setBackend(n);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(this.backendInstance==null){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(Qs("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ZZ(this.backendInstance),!0}setupRegisteredKernels(){ov(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){ov(e).forEach(t=>{t.disposeFunc!=null&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(t==null)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{let n=t.factory();if(n&&!(n instanceof Bm)&&typeof n.then=="function"){let r=++this.pendingBackendInitId,a=n.then(i=>r<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,Qs("Initialization of backend ".concat(e," failed")),Qs(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=n,{success:!0,asyncInit:!1}}catch(n){return Qs("Initialization of backend ".concat(e," failed")),Qs(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}let r;return this.scopedRun(()=>this.startScope(n),()=>this.endScope(r),()=>(r=t(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,t,n){e();try{let r=n();return t(),r}catch(r){throw t(),r}}nextTensorId(){return um.nextTensorId++}nextVariableId(){return um.nextVariableId++}clone(e){let t=z.runKernel(Bu,{x:e}),n={x:e},r=i=>({x:()=>{let s="float32",o={x:i},l={dtype:s};return z.runKernel(wu,o,l)}}),a=[];return this.addTapeNode(this.state.activeScope.name,n,[t],r,a,{}),t}runKernel(e,t,n){if(this.backendName==null&&this.backend,sv(e,this.backendName)==null)throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),a=0;n.forEach(o=>{a+=o.dtype==="complex64"?3:1});let i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-a-i;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[],r=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let o,l=Qw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Qw(e)){let{kernelName:p,inputs:f,attrs:m}=e;this.backendName==null&&this.backend;let g=sv(p,this.backendName);D(g!=null,()=>"Cannot find registered kernel '".concat(p,"' for backend '").concat(this.backendName,"'")),s=()=>{let b=this.backend.numDataIds();o=g.kernelFunc({inputs:f,attrs:m,backend:this.backend});let y=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,y);let v=y.map(x=>x.rank!=null?x:this.makeTensorFromTensorInfo(x));if(r){let x=this.getTensorsForGradient(p,f,v);n=this.saveTensorsForBackwardMode(x)}return v}}else{let{forwardFunc:p}=e,f=m=>{r&&(n=m.map(g=>this.keep(this.clone(g))))};s=()=>{let m=this.backend.numDataIds();o=this.tidy(()=>p(this.backend,f));let g=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,m,g),g}}let{inputs:d,attrs:u}=e,c=Qw(e)?null:e.backwardsFunc,h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=s():(h=this.profiler.profileKernel(l,d,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs)}),r&&this.addTapeNode(l,d,t,c,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(p=>d[p]!=null?d[p].shape:null),outputShapes:t.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(e,t,n){let r=Ek(e);if(r!=null){let a=r.inputsToSave||[],i=r.outputsToSave||[],s;r.saveAllInputs?(D(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(l=>t[l])):s=a.map(l=>t[l]);let o=n.filter((l,d)=>i[d]);return s.concat(o)}return[]}makeTensor(e,t,n,r){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;n==="string"&&no(e[0])&&(a=e.map(o=>cg(o)));let i=r.write(a,t,n),s=new Ue(t,n,i,this.nextTensorId());if(this.trackTensor(s,r),n==="string"){let o=this.state.tensorInfo.get(i),l=w3(a);this.state.numBytes+=l-o.bytes,o.bytes=l}return s}makeTensorFromDataId(e,t,n,r){n=n||"float32";let a={dataId:e,shape:t,dtype:n};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){let{dataId:n,shape:r,dtype:a}=e,i=new Ue(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),r!=null&&r!==e.dtype&&(e=e.cast(r));let a=new Hl(e,t,n,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let n=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(n=e.size*rv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Hl||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let n=e.size*rv(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(r=>r.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,n,r,a,i){let s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=Ek(e);o!=null&&(r=o.gradFunc),r!=null&&(s.gradient=l=>(l=l.map((d,u)=>{if(d==null){let c=n[u],h=E0(c.size,c.dtype);return this.makeTensor(h,c.shape,c.dtype)}return d}),r(l.length>1?l:l[0],a,i))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=x$(e),n=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let i=this.state.activeScope.track[a];!i.kept&&!n.has(i.id)&&i.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===r.id&&this.track(a)})}gradients(e,t,n,r=!1){if(D(t.length>0,()=>"gradients() received an empty list of xs."),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));D(a instanceof Ue,()=>"The result y returned by f() must be a tensor.");let i=eQ(this.state.activeTape,t,a);if(!r&&i.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let s={};s[a.id]=n==null?uQ(a.shape):n,tQ(s,i,l=>this.tidy(l),dQ);let o=t.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(let d of l.saved)d.dispose()}),this.state.activeTape=null),{value:a,grads:o}})}customGrad(e){return D(So(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{D(t.every(s=>s instanceof Ue),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,r={};t.forEach((s,o)=>{r[o]=s});let a=(s,o)=>(n=e(...t,o),D(n.value instanceof Ue,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),D(So(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),i=(s,o)=>{let l=n.gradFunc(s,o),d=Array.isArray(l)?l:[l];D(d.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),D(d.every(c=>c instanceof Ue),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let u={};return d.forEach((c,h)=>{u[h]=()=>c}),u};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=lm(),n=await this.backend.time(e);return n.wallMs=lm()-t,n}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new $A;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};um.nextTensorId=0;um.nextVariableId=0;function uQ(e){let t=m$(At(e),"float32");return z.makeTensor(t,e,"float32")}function z3(){let e=C3();if(e._tfengine==null){let t=new $3(e);e._tfengine=new um(t)}return DZ(e._tfengine.ENV),aQ(()=>e._tfengine),e._tfengine}var z=z3();function dQ(e,t){let n={a:e,b:t};return z.runKernel(Bo,n)}var hg={};We(hg,{isBrowser:()=>B3,isMobile:()=>pQ,mockIsMobile:()=>hQ});function cQ(){return typeof navigator<"u"&&navigator!=null}var Fk;function hQ(e){Fk=e}function pQ(e){if(Fk!==void 0)return Fk;if(e||cQ()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){let n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function B3(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Vr=Z();Vr.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Vr.registerFlag("IS_BROWSER",()=>B3());Vr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Vr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Vr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Vr.registerFlag("PROD",()=>!1);Vr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Vr.getBool("DEBUG"));Vr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Vr.registerFlag("IS_TEST",()=>!1);Vr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Vr.getBool("DEBUG"));Vr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Vr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Vr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function Zi(e,t){let n=e;if(Pn(e))return t==="string"?[]:[e.length];if(M3(e)){let a=e.channels||"RGBA";return[e.height,e.width*a.length]}else if(O3(e))return[e.buffer.size/(t==null?4:rv(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||Pn(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&Z().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&W3(e,r,[]),r}function W3(e,t,n){if(n=n||[],!Array.isArray(e)&&!Pn(e)){D(t.length===0,()=>"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements"));return}D(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")),D(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements"));let r=t.slice(1);for(let a=0;a<e.length;++a)W3(e[a],r,n.concat(a))}function CA(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function _(e,t,n,r="numeric"){if(e instanceof Ue)return CA(r,e.dtype,t,n),e;let a=Wm(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),CA(r,a,t,n),e==null||!Pn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let o=e==null?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(o,"'"))}let i=Zi(e,a);!Pn(e)&&!Array.isArray(e)&&(e=[e]);let s=a!=="string"?W0(e,a):Io(e,[],!0);return z.makeTensor(s,i,a)}function dm(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((a,i)=>_(a,"".concat(t,"[").concat(i,"]"),n,r))}var w$="__op";function W(e){let t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+w$;let a=(...i)=>{z.startScope(n);try{let s=r(...i);return T0(s)&&console.error("Cannot return a Promise inside of tidy."),z.endScope(s),s}catch(s){throw z.endScope(null),s}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}function fQ(e,t){let n=_(e,"real","complex"),r=_(t,"imag","complex");_r(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));let a={real:n,imag:r};return z.runKernel(N0,a)}var _s=W({complex_:fQ});function Ho(e,t,n,r){if(r==null)r=Wm(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(O3(e)||M3(e)){if(r!=="float32"&&r!=="int32")throw new Error("Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return z.backend.createTensorFromGPUData(e,t||n,r)}if(!Pn(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){ya(t);let a=At(t),i=At(n);D(a===i,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(i));for(let s=0;s<n.length;++s){let o=n[s],l=s===n.length-1?o!==At(t.slice(s)):!0;D(n[s]===t[s]||!l,()=>"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). "))}}return!Pn(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?W0(e,r):Io(e,[],!0),z.makeTensor(e,t,r)}function wr(e,t,n){let r=Zi(e,n);return Ho(e,t,r,n)}var Mk={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},ts=class{static join(e){return new ts(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(n=>Pn(n)?n.buffer:n),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){let r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);let n=this.findShardForByte(e);if(n===-1)throw new Error("Could not find start shard for byte ".concat(e));let r=t-e,a=new ArrayBuffer(r),i=new Uint8Array(a),s=0;for(let o=n;o<this.shards.length;o++){let l=this.shards[o],d=e+s-l.start,u=s,c=Math.min(t,l.end)-l.start,h=new Uint8Array(l.buffer,d,c-d);if(i.set(h,u),s+=h.length,t<l.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(r){return e<r.start?-1:e>=r.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let n=mQ(this.shards,t);return n===-1?-1:(this.previousShardIndex=n,this.previousShardIndex)}};function mQ(e,t){let n=0,r=e.length;for(;n<=r;){let a=Math.floor((r-n)/2)+n,i=t(e[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}var uv=4;async function gQ(e,t){let n=[],r=[],a=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<a.length;++s){let o=a[s],l=Array.isArray(e)?e[s].tensor:e[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l.dtype));let d={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(async c=>{let h=await l.bytes(),p=h.reduce((g,b)=>g+b.length,0)+uv*h.length,f=new Uint8Array(p),m=0;for(let g=0;g<h.length;g++){let b=h[g],y=new Uint8Array(new Uint32Array([b.length]).buffer);f.set(y,m),m+=uv,f.set(b,m),m+=b.length}c(f)});r.push(u)}else r.push(l.data());t!=null&&(d.group=t),n.push(d)}let i=await Promise.all(r);return{data:bQ(i),specs:n}}function V3(e,t){let n=new ts(e),r={},a,i=0;for(let s of t){let o=s.name,l=s.dtype,d=s.shape,u=At(d),c;if("quantization"in s){let h=s.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error("Weight ".concat(s.name," with quantization ").concat(h.dtype," doesn't have corresponding metadata min and scale."))}else if(h.dtype==="float16"){if(l!=="float32")throw new Error("Weight ".concat(s.name," is quantized with ").concat(h.dtype," which only supports weights of type float32 not ").concat(l,"."))}else throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(h.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));let p=Mk[h.dtype],f=n.slice(i,i+u*p),m=h.dtype==="uint8"?new Uint8Array(f):new Uint16Array(f);if(l==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){c=new Float32Array(m.length);for(let g=0;g<m.length;g++){let b=m[g];c[g]=b*h.scale+h.min}}else if(h.dtype==="float16")a===void 0&&(a=IQ()),c=a(m);else throw new Error("Unsupported quantization type ".concat(h.dtype," for weight type float32."));else if(l==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Unsupported quantization type ".concat(h.dtype," for weight type int32."));c=new Int32Array(m.length);for(let g=0;g<m.length;g++){let b=m[g];c[g]=Math.round(b*h.scale+h.min)}}else throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l));i+=u*p}else if(l==="string"){let h=At(s.shape);c=[];for(let p=0;p<h;p++){let f=new Uint32Array(n.slice(i,i+uv))[0];i+=uv;let m=new Uint8Array(n.slice(i,i+f));c.push(m),i+=f}}else{let h=Mk[l],p=n.slice(i,i+u*h);if(l==="float32")c=new Float32Array(p);else if(l==="int32")c=new Int32Array(p);else if(l==="bool")c=new Uint8Array(p);else if(l==="complex64"){c=new Float32Array(p);let f=new Float32Array(c.length/2),m=new Float32Array(c.length/2);for(let y=0;y<f.length;y++)f[y]=c[y*2],m[y]=c[y*2+1];let g=wr(f,d,"float32"),b=wr(m,d,"float32");r[o]=_s(g,b),g.dispose(),b.dispose()}else throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l));i+=u*h}l!=="complex64"&&(r[o]=wr(c,d,l))}return r}function bQ(e){if(e===null)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0,n=[];e.forEach(i=>{if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(i.constructor.name))});let r=new Uint8Array(t),a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var k$=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function EA(e){return k$?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function yQ(e){if(k$)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function vQ(e){if(k$){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function xQ(e){return ts.join(e)}function TA(e){let t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);let n=e.split(t);return n[n.length-1]}function U3(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function H3(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function S$(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),H3(e,n,r)}function pg(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:EA(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:EA(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new ts(e.weightData).byteLength}}function j3(e){let t=[];for(let n of e)t.push(...n.weights);return t}function wQ(){let e=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function kQ(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function SQ(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function IQ(){let e=wQ(),t=kQ(),n=SQ();return r=>{let a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let s=0;s<r.length;s++){let o=r[s],l=e[n[o>>10]+(o&1023)]+t[o>>10];i[s]=l}return new Float32Array(a)}}var Zt=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Zt.instance==null&&(Zt.instance=new Zt),Zt.instance}static registerSaveRouter(e){Zt.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Zt.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Zt.getHandlers(e,"save")}static getLoadHandlers(e,t){return Zt.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[];return(t==="load"?Zt.getInstance().loadRouters:Zt.getInstance().saveRouters).forEach(a=>{let i=a(e,n);i!==null&&r.push(i)}),r}},$Q=e=>Zt.registerSaveRouter(e),CQ=e=>Zt.registerLoadRouter(e),EQ=e=>Zt.getSaveHandlers(e),TQ=(e,t)=>Zt.getLoadHandlers(e,t),Ok="tensorflowjs",Lk=1,kl="models_store",ro="model_info_store";function G3(){if(!Z().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Pk(e){let t=e.result;t.createObjectStore(kl,{keyPath:"modelPath"}),t.createObjectStore(ro,{keyPath:"modelPath"})}var jl=class{constructor(e){if(this.indexedDB=G3(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((n,r)=>{let a=this.indexedDB.open(Ok,Lk);a.onupgradeneeded=()=>Pk(a),a.onsuccess=()=>{let i=a.result;if(t==null){let s=i.transaction(kl,"readonly"),o=s.objectStore(kl).get(this.modelPath);o.onsuccess=()=>{if(o.result==null)return i.close(),r(new Error("Cannot find model with path '".concat(this.modelPath,"' in IndexedDB.")));n(o.result.modelArtifacts)},o.onerror=l=>(i.close(),r(o.error)),s.oncomplete=()=>i.close()}else{t.weightData=ts.join(t.weightData);let s=pg(t),o=i.transaction(ro,"readwrite"),l=o.objectStore(ro),d;try{d=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(c){return r(c)}let u;d.onsuccess=()=>{u=i.transaction(kl,"readwrite");let c=u.objectStore(kl),h;try{h=c.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s})}catch(p){return r(p)}h.onsuccess=()=>n({modelArtifactsInfo:s}),h.onerror=p=>{l=o.objectStore(ro);let f=l.delete(this.modelPath);f.onsuccess=()=>(i.close(),r(h.error)),f.onerror=m=>(i.close(),r(h.error))}},d.onerror=c=>(i.close(),r(d.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}}},a.onerror=i=>r(a.error)})}};jl.URL_SCHEME="indexeddb://";var q3=e=>Z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(jl.URL_SCHEME)?NQ(e.slice(jl.URL_SCHEME.length)):null;Zt.registerSaveRouter(q3);Zt.registerLoadRouter(q3);function NQ(e){return new jl(e)}function _Q(e){return e.startsWith(jl.URL_SCHEME)?e.slice(jl.URL_SCHEME.length):e}var AQ=class{constructor(){this.indexedDB=G3()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(Ok,Lk);n.onupgradeneeded=()=>Pk(n),n.onsuccess=()=>{let r=n.result,a=r.transaction(ro,"readonly"),i=a.objectStore(ro).getAll();i.onsuccess=()=>{let s={};for(let o of i.result)s[o.modelPath]=o.modelArtifactsInfo;e(s)},i.onerror=s=>(r.close(),t(i.error)),a.oncomplete=()=>r.close()},n.onerror=r=>t(n.error)})}async removeModel(e){return e=_Q(e),new Promise((t,n)=>{let r=this.indexedDB.open(Ok,Lk);r.onupgradeneeded=()=>Pk(r),r.onsuccess=()=>{let a=r.result,i=a.transaction(ro,"readwrite"),s=i.objectStore(ro),o=s.get(e),l;o.onsuccess=()=>{if(o.result==null)return a.close(),n(new Error("Cannot find model with path '".concat(e,"' in IndexedDB.")));{let d=s.delete(e),u=()=>{l=a.transaction(kl,"readwrite");let c=l.objectStore(kl).delete(e);c.onsuccess=()=>t(o.result.modelArtifactsInfo),c.onerror=h=>n(o.error)};d.onsuccess=u,d.onerror=c=>(u(),a.close(),n(o.error))}},o.onerror=d=>(a.close(),n(o.error)),i.oncomplete=()=>{l==null?a.close():l.oncomplete=()=>a.close()}},r.onerror=a=>n(r.error)})}},ys="/",oc="tensorflowjs_models",K3="info",RQ="model_topology",DQ="weight_specs",FQ="weight_data",MQ="model_metadata";function X3(e){return{info:[oc,e,K3].join(ys),topology:[oc,e,RQ].join(ys),weightSpecs:[oc,e,DQ].join(ys),weightData:[oc,e,FQ].join(ys),modelMetadata:[oc,e,MQ].join(ys)}}function Y3(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function OQ(e){let t=e.split(ys);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(ys)}function LQ(e){return e.startsWith(Gl.URL_SCHEME)?e.slice(Gl.URL_SCHEME.length):e}var Gl=class{constructor(e){if(!Z().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=X3(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=pg(e),a=ts.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,yQ(a));let i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:r}}catch(i){throw Y3(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(r.modelTopologyBytes,", weightSpecsBytes=").concat(r.weightSpecsBytes,", weightDataBytes=").concat(r.weightDataBytes,"."))}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(n==null)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));t.weightSpecs=r;let a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){let s=JSON.parse(a);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(t.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}let i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));return t.weightData=vQ(i),t}};Gl.URL_SCHEME="localstorage://";var Z3=e=>Z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gl.URL_SCHEME)?PQ(e.slice(Gl.URL_SCHEME.length)):null;Zt.registerSaveRouter(Z3);Zt.registerLoadRouter(Z3);function PQ(e){return new Gl(e)}var zQ=class{constructor(){D(Z().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),D(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=oc+ys,n=ys+K3;for(let r=0;r<this.LS.length;++r){let a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){let i=OQ(a);e[i]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=LQ(e);let t=X3(e);if(this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '".concat(e,"'"));let n=JSON.parse(this.LS.getItem(t.info));return Y3(t),n}},Ac="://",Lr=class{constructor(){this.managers={}}static getInstance(){return Lr.instance==null&&(Lr.instance=new Lr),Lr.instance}static registerManager(e,t){D(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Ac)&&(e=e.slice(0,e.indexOf(Ac))),D(e.length>0,()=>"scheme must not be an empty string.");let n=Lr.getInstance();D(n.managers[e]==null,()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){let t=Lr.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(Lr.getInstance().managers)}};function iy(e){if(e.indexOf(Ac)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: ".concat(Lr.getSchemes().join(",")));return{scheme:e.split(Ac)[0],path:e.split(Ac)[1]}}async function Q3(e,t,n=!1){D(e!==t,()=>"Old path and new path are the same: '".concat(e,"'"));let r=Zt.getLoadHandlers(e);D(r.length>0,()=>"Copying failed because no load handler is found for source URL ".concat(e,".")),D(r.length<2,()=>"Copying failed because more than one (".concat(r.length,") load handlers for source URL ").concat(e,"."));let a=r[0],i=Zt.getSaveHandlers(t);D(i.length>0,()=>"Copying failed because no save handler is found for destination URL ".concat(t,".")),D(i.length<2,()=>"Copying failed because more than one (".concat(r.length,") save handlers for destination URL ").concat(t,"."));let s=i[0],o=iy(e).scheme,l=iy(e).path,d=o===iy(e).scheme,u=await a.load();n&&d&&await Lr.getManager(o).removeModel(l);let c=await s.save(u);return n&&!d&&await Lr.getManager(o).removeModel(l),c.modelArtifactsInfo}async function BQ(){let e=Lr.getSchemes(),t={};for(let n of e){let r=await Lr.getManager(n).listModels();for(let a in r){let i=n+Ac+a;t[i]=r[a]}}return t}async function WQ(e){let t=iy(e);return Lr.getManager(t.scheme).removeModel(t.path)}async function VQ(e,t){return Q3(e,t,!1)}async function UQ(e,t){return Q3(e,t,!0)}var HQ=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!Z().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",n=>{if(n.source===window&&n.data.name===this.messageName){n.stopPropagation();let r=this.functionRefs[n.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return A3(e)}};if(Z().get("IS_BROWSER")){Z().setPlatform("browser",new HQ);try{Lr.registerManager(Gl.URL_SCHEME,new zQ)}catch(e){}try{Lr.registerManager(jl.URL_SCHEME,new AQ)}catch(e){}}var jQ={importFetch:()=>QY()},Jw,GQ=class{constructor(){this.util=JY(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return Z().global.fetch!=null?Z().global.fetch(e,t):(Jw==null&&(Jw=jQ.importFetch()),Jw(e,t))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};Z().get("IS_NODE")&&!Z().get("IS_BROWSER")&&Z().setPlatform("node",new GQ);function Xe(e,t="float32",n){return t=t||"float32",ya(e),new mn(e,t,n)}function qQ(e,t){let n=_(e,"x","cast");if(!x3(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},a={dtype:t};return z.runKernel(wu,r,a)}var ce=W({cast_:qQ});function KQ(e){let t={x:_(e,"x","clone","string_or_numeric")};return z.runKernel(Bu,t)}var Ki=W({clone_:KQ});function I$(e,t=!1){console.log(e.toString(t))}z3();var XQ={buffer:Xe,cast:ce,clone:Ki,print:I$};iQ(XQ);function YQ(){Z().set("PROD",!0)}function ZQ(){Z().set("DEBUG",!0)}function QQ(){Z().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function J3(e){Z().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function JQ(){z.disposeVariables()}function ja(){return z}function dv(){return z.memory()}function eJ(e){return z.profile(e)}function G(e,t){return z.tidy(e,t)}function Be(e){x$(e).forEach(t=>t.dispose())}function In(e){return z.keep(e)}function tJ(e){return z.time(e)}function nJ(e){return z.setBackend(e)}function rJ(){return z.ready()}function aJ(){return z.backendName}function iJ(e){z.removeBackend(e)}function sJ(e){return z.findBackend(e)}function oJ(e){return z.findBackendFactory(e)}function U0(e,t,n=1){return z.registerBackend(e,t,n)}function eL(){return z.backend}function lJ(e,t){Z().setPlatform(e,t)}function uJ(e,t){let n=_(e,"a","add"),r=_(t,"b","add");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(Bo,a)}var ne=W({add_:uJ});function dJ(e,t){let n=_(e,"a","floorDiv"),r=_(t,"b","floorDiv");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(Lu,a)}var H0=W({floorDiv_:dJ});function cJ(e,t){let n=_(e,"a","div"),r=_(t,"b","div");if([n,r]=Yt(n,r),n.dtype==="int32"&&r.dtype==="int32")return H0(n,r);let a={a:n,b:r},i={};return z.runKernel(Au,a,i)}var Se=W({div_:cJ});function hJ(e,t){let n=_(e,"a","mul"),r=_(t,"b","mul");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(nd,a)}var U=W({mul_:hJ});function pJ(e){let t=_(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return z.runKernel(jm,n)}else{let n={x:t};return z.runKernel(xh,n)}}var cn=W({abs_:pJ});function fJ(e){let t={x:_(e,"x","acos")};return z.runKernel(cu,t)}var $$=W({acos_:fJ});function mJ(e){let t={x:_(e,"x","acosh")};return z.runKernel(hu,t)}var C$=W({acosh_:mJ});function gJ(e){D(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),D(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got ".concat(e.length));let t=e.map((a,i)=>_(a,"tensors".concat(i),"addN")),n=t[0];t.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(a=>{if(!Fs(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return z.runKernel(pu,r)}var tL=W({addN_:gJ});function bJ(e,t=null,n=!1){let r={x:_(e,"x","all","bool")},a={axis:t,keepDims:n};return z.runKernel(wh,r,a)}var j0=W({all_:bJ});function yJ(e,t=null,n=!1){let r={x:_(e,"x","any","bool")},a={axis:t,keepDims:n};return z.runKernel(kh,r,a)}var cm=W({any_:yJ});function vJ(e,t=0){let n={x:_(e,"x","argMax")},r={axis:t};return z.runKernel(Sh,n,r)}var ql=W({argMax_:vJ});function xJ(e,t=0){let n={x:_(e,"x","argMin")},r={axis:t};return z.runKernel(Ih,n,r)}var E$=W({argMin_:xJ});function wJ(e){let t={x:_(e,"x","asin")};return z.runKernel(fu,t)}var T$=W({asin_:wJ});function kJ(e){let t={x:_(e,"x","asinh")};return z.runKernel(mu,t)}var N$=W({asinh_:kJ});function SJ(e){let t={x:_(e,"x","atan")};return z.runKernel(gu,t)}var _$=W({atan_:SJ});function IJ(e,t){let n=_(e,"a","atan2"),r=_(t,"b","atan2");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(yu,a)}var A$=W({atan2_:IJ});function $J(e){let t={x:_(e,"x","atanh")};return z.runKernel(bu,t)}var R$=W({atanh_:$J});function CJ(e,t,n,r,a="NHWC",i){let s=e[3],o=[...t,s],l=aL(a);return fg(e,o,n,i,r,null,null,l)}function nL(e,t,n,r,a,i,s="channelsLast"){let[o,l]=hm(t),d;if(s==="channelsLast")d=[o,l,e[3],e[3]];else if(s==="channelsFirst")d=[o,l,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(s));return fg(e,d,n,r,a,i,!1,s)}function EJ(e,t,n,r,a,i,s="NDHWC"){let[o,l,d]=zk(t),u,c;if(s==="NDHWC")c="channelsLast",u=[o,l,d,e[4],e[4]];else if(s==="NCDHW")c="channelsFirst",u=[o,l,d,e[1],e[1]];else throw new Error("Unknown dataFormat ".concat(s));return rL(e,u,n,r,a,!1,c,i)}function fg(e,t,n,r,a,i,s=!1,o="channelsLast"){let[l,d,u,c]=[-1,-1,-1,-1];if(o==="channelsLast")[l,d,u,c]=e;else if(o==="channelsFirst")[l,c,d,u]=e;else throw new Error("Unknown dataFormat ".concat(o));let[h,p,,f]=t,[m,g]=hm(n),[b,y]=hm(r),v=Rc(h,b),x=Rc(p,y),{padInfo:w,outHeight:$,outWidth:C}=_J(a,d,u,m,g,v,x,i,o),E=s?f*c:f,A;return o==="channelsFirst"?A=[l,E,$,C]:o==="channelsLast"&&(A=[l,$,C,E]),{batchSize:l,dataFormat:o,inHeight:d,inWidth:u,inChannels:c,outHeight:$,outWidth:C,outChannels:E,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:x,dilationHeight:b,dilationWidth:y,inShape:e,outShape:A,filterShape:t}}function rL(e,t,n,r,a,i=!1,s="channelsLast",o){let[l,d,u,c,h]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,d,u,c,h]=e;else if(s==="channelsFirst")[l,h,d,u,c]=e;else throw new Error("Unknown dataFormat ".concat(s));let[p,f,m,,g]=t,[b,y,v]=zk(n),[x,w,$]=zk(r),C=Rc(p,x),E=Rc(f,w),A=Rc(m,$),{padInfo:R,outDepth:N,outHeight:I,outWidth:F}=AJ(a,d,u,c,b,y,v,C,E,A,o),L=i?g*h:g,P;return s==="channelsFirst"?P=[l,L,N,I,F]:s==="channelsLast"&&(P=[l,N,I,F,L]),{batchSize:l,dataFormat:s,inDepth:d,inHeight:u,inWidth:c,inChannels:h,outDepth:N,outHeight:I,outWidth:F,outChannels:L,padInfo:R,strideDepth:b,strideHeight:y,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationDepth:x,dilationHeight:w,dilationWidth:$,inShape:e,outShape:P,filterShape:t}}function TJ(e,t,n,r,a){r==null&&(r=D$(e,t,n));let i=e[0],s=e[1],o=pm((i-t+2*r)/n+1,a),l=pm((s-t+2*r)/n+1,a);return[o,l]}function NJ(e,t,n,r,a,i){a==null&&(a=D$(e,t[0],r[0]));let s=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*a>=t[o]&&(s[o]=pm((e[o]-t[o]+2*a)/r[o]+1,i));return s}function D$(e,t,n,r=1){let a=Rc(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function hm(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function zk(e){return typeof e=="number"?[e,e,e]:e}function Rc(e,t){return t<=1?e:e+(e-1)*(t-1)}function _J(e,t,n,r,a,i,s,o,l){let d,u,c;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let h=TJ([t,n],i,r,e,o);u=h[0],c=h[1]}else if(e==="same"){u=Math.ceil(t/r),c=Math.ceil(n/a);let h=Math.max(0,(u-1)*r+i-t),p=Math.max(0,(c-1)*a+s-n),f=Math.floor(h/2),m=h-f,g=Math.floor(p/2),b=p-g;d={top:f,bottom:m,left:g,right:b,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),c=Math.ceil((n-s+1)/a);else if(typeof e=="object"){let h=l==="channelsLast"?e[1][0]:e[2][0],p=l==="channelsLast"?e[1][1]:e[2][1],f=l==="channelsLast"?e[2][0]:e[3][0],m=l==="channelsLast"?e[2][1]:e[3][1];d={top:h,bottom:p,left:f,right:m,type:h===0&&p===0&&f===0&&m===0?"VALID":"EXPLICIT"},u=pm((t-i+h+p)/r+1,o),c=pm((n-s+f+m)/a+1,o)}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:d,outHeight:u,outWidth:c}}function AJ(e,t,n,r,a,i,s,o,l,d,u){let c,h,p,f;if(e==="valid"&&(e=0),typeof e=="number"){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let m=NJ([t,n,r,1],[o,l,d],1,[a,i,s],e,u);h=m[0],p=m[1],f=m[2]}else if(e==="same"){h=Math.ceil(t/a),p=Math.ceil(n/i),f=Math.ceil(r/s);let m=(h-1)*a+o-t,g=(p-1)*i+l-n,b=(f-1)*s+d-r,y=Math.floor(m/2),v=m-y,x=Math.floor(g/2),w=g-x,$=Math.floor(b/2),C=b-$;c={top:x,bottom:w,left:$,right:C,front:y,back:v,type:"SAME"}}else throw Error("Unknown padding parameter: ".concat(e));return{padInfo:c,outDepth:h,outHeight:p,outWidth:f}}function pm(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function $o(e){let[t,n,r]=hm(e);return t===1&&n===1&&r===1}function ns(e,t){return $o(e)||$o(t)}function Kl(e){return hm(e).every(t=>t>0)}function aL(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Ar(e,t,n){if(n!=null){if(typeof t=="string")throw Error("Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));if(typeof t=="number")D(Gc(t),()=>"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));else if(typeof t=="object")t.forEach(r=>{r.forEach(a=>{D(Gc(a),()=>"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(a,"."))})});else throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t))}}function RJ(e,t){let n={x:_(e,"x","reshape","string_or_numeric")},r={shape:t};return z.runKernel(ap,n,r)}var j=W({reshape_:RJ});function DJ(e,t,n,r,a){let i=_(e,"x","avgPool","float32"),s=1;D(ns(n,s),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(s,"'"));let o=i,l=!1;i.rank===3&&(l=!0,o=j(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(o.rank===4,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")),Ar("avgPool",r,a);let d={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=z.runKernel(vu,d,u);return c=ce(c,i.dtype),l?j(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var Ms=W({avgPool_:DJ});function FJ(e,t,n,r,a,i="NDHWC"){let s=_(e,"x","avgPool3d","float32"),o=s,l=!1;s.rank===4&&(l=!0,o=j(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),D(o.rank===5,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),D(i==="NDHWC",()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)),D(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),Ar("avgPool3d",r,a);let d={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},c=z.runKernel($h,d,u);return c=ce(c,o.dtype),l?j(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}var F$=W({avgPool3d_:FJ});function MJ(e,t=0){D(e.length>=1,()=>"Pass at least one tensor to concat");let n=dm(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(i.dtype,". "))}),n.length===1)return Ki(n[0]);let r=n,a={axis:t};return z.runKernel(Nh,r,a)}var kt=W({concat_:MJ});function OJ(e,t,n=!1,r=!1){let a=_(e,"a","matMul"),i=_(t,"b","matMul");[a,i]=Yt(a,i);let s={a,b:i},o={transposeA:n,transposeB:r};return z.runKernel(xu,s,o)}var Ge=W({matMul_:OJ});function LJ(e){let t={x:_(e,"x","sigmoid","float32")};return z.runKernel(xd,t)}var Za=W({sigmoid_:LJ});function PJ(e,t,n){let r=_(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let a={x:r},i={begin:t,size:n};return z.runKernel(cp,a,i)}var Qe=W({slice_:PJ});function zJ(e){let t={x:_(e,"x","tanh","float32")};return z.runKernel(Td,t)}var Xl=W({tanh_:zJ});function BJ(e,t,n,r,a,i){let s=_(e,"forgetBias","basicLSTMCell"),o=_(t,"lstmKernel","basicLSTMCell"),l=_(n,"lstmBias","basicLSTMCell"),d=_(r,"data","basicLSTMCell"),u=_(a,"c","basicLSTMCell"),c=_(i,"h","basicLSTMCell"),h=kt([d,c],1),p=Ge(h,o),f=ne(p,l),m=f.shape[0],g=f.shape[1]/4,b=[m,g],y=Qe(f,[0,0],b),v=Qe(f,[0,g],b),x=Qe(f,[0,g*2],b),w=Qe(f,[0,g*3],b),$=ne(U(Za(y),Xl(v)),U(u,Za(ne(s,x)))),C=U(Xl($),Za(w));return[$,C]}var iL=W({basicLSTMCell_:BJ});function WJ(e,t,n){let r=_(e,"x","batchToSpaceND"),a=t.reduce((o,l)=>o*l);D(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),D(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),D(r.shape[0]%a===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a));let i={x:r},s={blockShape:t,crops:n};return z.runKernel(Ch,i,s)}var mg=W({batchToSpaceND_:WJ});function VJ(e){let t;return e.rank===0||e.rank===1?t=j(e,[1,1,1,e.size]):e.rank===2?t=j(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=j(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function UJ(e,t,n,r,a,i){i==null&&(i=.001);let s=_(e,"x","batchNorm"),o=_(t,"mean","batchNorm"),l=_(n,"variance","batchNorm"),d;a!=null&&(d=_(a,"scale","batchNorm"));let u;r!=null&&(u=_(r,"offset","batchNorm")),D(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(d==null||o.rank===d.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let c={x:VJ(s),scale:d,offset:u,mean:o,variance:l},h={varianceEpsilon:i},p=z.runKernel(Pu,c,h);return j(p,s.shape)}var Nd=W({batchNorm_:UJ});function HJ(e,t,n,r,a,i){let s=_(e,"x","batchNorm"),o=_(t,"mean","batchNorm"),l=_(n,"variance","batchNorm"),d;a!=null&&(d=_(a,"scale","batchNorm"));let u;return r!=null&&(u=_(r,"offset","batchNorm")),D(s.rank===2,()=>"Error in batchNorm2D: x must be rank 2 but got rank ".concat(s.rank,".")),D(o.rank===2||o.rank===1,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ".concat(o.rank,".")),D(l.rank===2||l.rank===1,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ".concat(l.rank,".")),d!=null&&D(d.rank===2||d.rank===1,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ".concat(d.rank,".")),u!=null&&D(u.rank===2||u.rank===1,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ".concat(u.rank,".")),Nd(s,o,l,u,d,i)}var M$=W({batchNorm2d_:HJ});function jJ(e,t,n,r,a,i){let s=_(e,"x","batchNorm"),o=_(t,"mean","batchNorm"),l=_(n,"variance","batchNorm"),d;a!=null&&(d=_(a,"scale","batchNorm"));let u;return r!=null&&(u=_(r,"offset","batchNorm")),D(s.rank===3,()=>"Error in batchNorm3D: x must be rank 3 but got rank ".concat(s.rank,".")),D(o.rank===3||o.rank===1,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ".concat(o.rank,".")),D(l.rank===3||l.rank===1,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ".concat(l.rank,".")),d!=null&&D(d.rank===3||d.rank===1,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ".concat(d.rank,".")),u!=null&&D(u.rank===3||u.rank===1,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ".concat(u.rank,".")),Nd(s,o,l,u,d,i)}var O$=W({batchNorm3d_:jJ});function GJ(e,t,n,r,a,i){let s=_(e,"x","batchNorm"),o=_(t,"mean","batchNorm"),l=_(n,"variance","batchNorm"),d;a!=null&&(d=_(a,"scale","batchNorm"));let u;return r!=null&&(u=_(r,"offset","batchNorm")),D(s.rank===4,()=>"Error in batchNorm4D: x must be rank 4 but got rank ".concat(s.rank,".")),D(o.rank===4||o.rank===1,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ".concat(o.rank,".")),D(l.rank===4||l.rank===1,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ".concat(l.rank,".")),d!=null&&D(d.rank===4||d.rank===1,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ".concat(d.rank,".")),u!=null&&D(u.rank===4||u.rank===1,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ".concat(u.rank,".")),Nd(s,o,l,u,d,i)}var L$=W({batchNorm4d_:GJ});function qJ(e,t,n){let r=_(e,"x","bincount"),a=_(t,"weights","bincount");D(r.dtype==="int32",()=>"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)),D(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),D(a.size===r.size||a.size===0,()=>"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,"."));let i={x:r,weights:a},s={size:n};return z.runKernel(Eh,i,s)}var P$=W({bincount_:qJ});function KJ(e,t){let n=_(e,"x","bitwiseAnd"),r=_(t,"y","bitwiseAnd");if(!Fs(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));let a={a:n,b:r};return z.runKernel(Th,a)}var sL=W({bitwiseAnd_:KJ});function XJ(e,t){let n=_(e,"s0","broadcastArgs","int32"),r=_(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank ".concat(n.rank));if(r.rank!==1)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank ".concat(r.rank));let a={s0:n,s1:r};return z.runKernel(Hm,a)}var oL=W({broadcastArgs_:XJ});function YJ(e,t){let n=_(e,"broadcastTo","x"),r=n.shape;if(ya(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){let l=n.shape.slice();for(;l.length<t.length;)l.unshift(1);n=j(n,l)}let a=n.shape,i=Array.from(t);for(let l=t.length-1;l>=0;l--)if(a[l]===t[l])i[l]=1;else if(n.shape[l]!==1)throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(i.map((l,d)=>l>1?d:-1).filter(l=>l>=0).length===0)return Ki(n);let s={x:n},o={reps:i};return z.runKernel(Vo,s,o)}var El=W({broadcastTo_:YJ});function ZJ(e){let t={x:_(e,"x","ceil","float32")};return z.runKernel(ku,t)}var z$=W({ceil_:ZJ});function ca(e,t,n){ya(e),n=n||Wm(t);let r={shape:e,value:t,dtype:n};return z.runKernel(Km,{},r)}function QJ(e,t,n){let r=_(e,"x","clipByValue");if(D(t<=n,()=>"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")),t===n)return ca(r.shape,t,r.dtype);let a={x:r},i={clipValueMin:t,clipValueMax:n};return z.runKernel(Wo,a,i)}var cr=W({clipByValue_:QJ});function JJ(e){return kt(e,0)}var B$=W({concat1d_:JJ});function eee(e,t){return kt(e,t)}var W$=W({concat2d_:eee});function tee(e,t){return kt(e,t)}var V$=W({concat3d_:tee});function nee(e,t){return kt(e,t)}var U$=W({concat4d_:nee});function ree(e,t,n,r,a="NHWC",i=[1,1],s){let o=_(e,"x","conv2d","float32"),l=_(t,"filter","conv2d","float32"),d=o,u=!1;o.rank===3&&(u=!0,d=j(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D(d.rank===4,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(d.rank,".")),D(l.rank===4,()=>"Error in conv2d: filter must be rank 4, but got rank ".concat(l.rank,".")),Ar("conv2d",r,s);let c=a==="NHWC"?d.shape[3]:d.shape[1];D(c===l.shape[2],()=>"Error in conv2d: depth of input (".concat(c,") must match input depth for filter ").concat(l.shape[2],".")),D(ns(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),D(Kl(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),D(Kl(n),()=>"Error in conv2D: Strides should be larger than 0.");let h={x:d,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},f=z.runKernel(Su,h,p);return u?j(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var $r=W({conv2d_:ree});function aee(e,t,n,r,a="NWC",i=1,s){let o=_(e,"x","conv1d"),l=_(t,"filter","conv1d"),d=o,u=!1;o.rank===2&&(u=!0,d=j(o,[1,o.shape[0],o.shape[1]])),D(d.rank===3,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(d.rank,".")),D(l.rank===3,()=>"Error in conv1d: filter must be rank 3, but got rank ".concat(l.rank,".")),Ar("conv1d",r,s),D(d.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(d.shape[2],") must match input depth for filter ").concat(l.shape[1],".")),D(ns(n,i),()=>"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(i,"'")),D(Kl(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),D(Kl(n),()=>"Error in conv1D: Stride should be larger than 0."),D(a==="NWC",()=>"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported."));let c=j(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=j(d,[d.shape[0],1,d.shape[1],d.shape[2]]),p=$r(h,c,[1,n],r,"NHWC",[1,i],s);return u?j(p,[p.shape[2],p.shape[3]]):j(p,[p.shape[0],p.shape[2],p.shape[3]])}var G0=W({conv1d_:aee});function iee(e,t,n,r,a,i="NHWC",s){D(e.length===t.rank,()=>"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,l=t,d=!1;t.rank===3&&(d=!0,l=j(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),D(o.length===4,()=>"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(o.length,".")),D(l.rank===4,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(l.rank)),D(n.rank===4,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank));let u=i==="NHWC"?o[3]:o[1],c=i==="NHWC"?l.shape[3]:l.shape[1];D(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must match input depth for filter ").concat(n.shape[2],".")),D(c===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(c,") must match output depth for filter ").concat(n.shape[3],".")),Ar("conv2dDerInput",a,s);let h={dy:l,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},f=z.runKernel(Iu,h,p);return d?j(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var H$=W({conv2DBackpropInput_:iee});function see(e,t,n,r,a,i){let s=_(e,"x","conv2dTranspose"),o=_(t,"filter","conv2dTranspose");return H$(n,s,o,r,a,"NHWC",i)}var q0=W({conv2dTranspose_:see});function oee(e,t,n,r,a="NDHWC",i=[1,1,1]){let s=_(e,"x","conv3d"),o=_(t,"filter","conv3d"),l=s,d=!1;s.rank===4&&(d=!0,l=j(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),D(l.rank===5,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),D(o.rank===5,()=>"Error in conv3d: filter must be rank 5, but got rank ".concat(o.rank,".")),D(l.shape[4]===o.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match input depth for filter ").concat(o.shape[3],".")),D(ns(n,i),()=>"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),D(a==="NDHWC",()=>"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")),D(Kl(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),D(Kl(n),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:o},c={strides:n,pad:r,dataFormat:a,dilations:i},h=z.runKernel($u,u,c);return d?j(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var j$=W({conv3d_:oee});function lee(e,t,n,r,a){D(e.length===t.rank,()=>"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let i=e,s=t,o=!1;t.rank===4&&(o=!0,s=j(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let l=i[4],d=s.shape[4];D(i.length===5,()=>"Error in conv3dDerInput: inShape must be length 5, but got length ".concat(i.length,".")),D(s.rank===5,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank ".concat(s.rank)),D(n.rank===5,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank ".concat(n.rank)),D(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[3],".")),D(d===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(d,") must match output depth for filter ").concat(n.shape[4],"."));let u={dy:s,filter:n},c={pad:a,strides:r,inputShape:i},h=z.runKernel(Ah,u,c);return o?j(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var lL=W({conv3DBackpropInput_:lee});function uee(e,t,n,r,a){let i=_(e,"x","conv3dTranspose"),s=_(t,"filter","conv3dTranspose");return lL(n,i,s,r,a)}var G$=W({conv3dTranspose_:uee});function dee(e){let t={x:_(e,"x","cos","float32")};return z.runKernel(Cu,t)}var gg=W({cos_:dee});function cee(e){let t={x:_(e,"x","cosh","float32")};return z.runKernel(Eu,t)}var K0=W({cosh_:cee});function hee(e,t=0,n=!1,r=!1){let a={x:_(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return z.runKernel(Rh,a,i)}var fm=W({cumprod_:hee});function pee(e,t=0,n=!1,r=!1){let a={x:_(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return z.runKernel(Tu,a,i)}var X0=W({cumsum_:pee});function fee(e,t,n,r=!1){let a=_(e,"x","denseBincount"),i=_(t,"weights","denseBincount");D(a.dtype==="int32",()=>"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)),D(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")),D(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),D(i.size===a.size||i.size===0,()=>"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(i.shape,"."));let s={x:a,weights:i},o={size:n,binaryOutput:r};return z.runKernel(Gm,s,o)}var cv=W({denseBincount_:fee});function mee(e,t,n="NHWC"){let r=_(e,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];D(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),D(a*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),D(i*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),D(s%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(s," for depthToSpace with input shape ").concat(r.shape));let o={x:r},l={blockSize:t,dataFormat:n};return z.runKernel(Fh,o,l)}var q$=W({depthToSpace_:mee});function gee(e,t,n,r,a="NHWC",i=[1,1],s){let o=_(e,"x","depthwiseConv2d","float32"),l=_(t,"filter","depthwiseConv2d","float32"),d=o,u=!1;o.rank===3&&(u=!0,d=j(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D(d.rank===4,()=>"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(d.rank,".")),D(l.rank===4,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(l.rank,"."));let c=a==="NHWC"?d.shape[3]:d.shape[1];D(c===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels (".concat(c,") must match the inChannels dimension in filter ").concat(l.shape[2],".")),Ar("depthwiseConv2d",r,s);let h={x:d,filter:l},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},f=z.runKernel(Nu,h,p);return u?j(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var _d=W({depthwiseConv2d_:gee});function bee(e){let t={x:_(e,"x","diag")};return z.runKernel(qm,t)}var uL=W({diag_:bee});function yee(e,t,n,r,a=[1,1],i="NHWC"){let s=_(e,"x","dilation2d"),o=_(t,"filter","dilation2d");D(s.rank===3||s.rank===4,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(s.rank,".")),D(o.rank===3,()=>"Error in dilation2d: filter must be rank 3, but got rank ".concat(o.rank,".")),D(i==="NHWC",()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(i));let l=s,d=!1;s.rank===3&&(l=j(s,[1,s.shape[0],s.shape[1],s.shape[2]]),d=!0),D(l.shape[3]===o.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(o.shape[2]));let u={x:l,filter:o},c={strides:n,pad:r,dilations:a},h=z.runKernel(_u,u,c);return d?j(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var K$=W({dilation2d_:yee}),kp={};We(kp,{assertAndGetBroadcastShape:()=>St,getBroadcastDims:()=>dL,getReductionAxes:()=>gn});function dL(e,t){let n=e.length,r=[];for(let a=0;a<n;a++){let i=n-1-a,s=e[i]||1;(t[t.length-1-a]||1)>1&&s===1&&r.unshift(i)}return r}function gn(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],i=t.length-r-1,s=t[i];(a==null||a===1&&s>1)&&n.unshift(i)}return n}function St(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let i=e[e.length-a-1];i==null&&(i=1);let s=t[t.length-a-1];if(s==null&&(s=1),i===1)r[n-a-1]=s;else if(s===1)r[n-a-1]=i;else if(i!==s){let o="Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,".");throw Error(o)}else r[n-a-1]=i}return r}function vee(e,t){let n=_(e,"a","equal","string_or_numeric"),r=_(t,"b","equal","string_or_numeric");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Oh,a)}var fa=W({equal_:vee});function xee(e,t,n){let r=_(t,"a","where"),a=_(n,"b","where"),i=_(e,"condition","where","bool"),s=St(St(i.shape,r.shape),a.shape),o=El(i,s),l=El(r,s),d=El(a,s),u={condition:o,t:l,e:d};return z.runKernel(dp,u)}var Wn=W({where_:xee});function wee(e){let t={x:_(e,"x","zerosLike")};return z.runKernel(xp,t)}var et=W({zerosLike_:wee});function kee(e,t){let n=_(e,"a","div"),r=_(t,"b","div");[n,r]=Yt(n,r);let a=Se(n,r),i=et(a),s=fa(r,i);return Wn(s,i,a)}var X$=W({divNoNan_:kee});function See(e,t){let n=_(e,"t1","dot"),r=_(t,"t2","dot");D((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks ".concat(n.rank," and ").concat(r.rank,"."));let a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(D(a===i,()=>"Error in dot: inner dimensions of inputs must match, but got ".concat(a," and ").concat(i,".")),n.rank===1&&r.rank===1){let s=j(n,[1,-1]),o=j(r,[-1,1]),l=Ge(s,o);return j(l,[])}else if(n.rank===1&&r.rank===2){let s=j(n,[1,-1]),o=j(r,[r.shape[0],r.shape[1]]),l=Ge(s,o);return j(l,[l.size])}else if(n.rank===2&&r.rank===1){let s=j(r,[-1,1]),o=Ge(n,s);return j(o,[o.size])}else{let s=j(r,[r.shape[0],r.shape[1]]);return Ge(n,s)}}var Y$=W({dot_:See});function Iee(e,...t){let n=t.map((a,i)=>_(a,"tensors".concat(i),"einsum")),r={equation:e};return z.runKernel(D0,n,r)}var cL=W({einsum_:Iee});function $ee(e){let t={x:_(e,"x","elu","float32")};return z.runKernel(Ru,t)}var Sp=W({elu_:$ee});function Cee(e,t){let n=_(e,"x","ensureShape","string_or_numeric");if(!g3(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}var hL=W({ensureShape_:Cee});function Eee(e){let t=_(e,"x","erf");D(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=ce(t,"float32"));let n={x:t};return z.runKernel(Du,n)}var Z$=W({erf_:Eee});function Q$(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function pL(e,t,n){let r=e.length+t.length,a=[],i=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?a.push(e[i++]):a.push(t[s++]);return a}function fL(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)t.indexOf(i)===-1&&n.push(e[i]);let a=t.map(i=>e[i]);return[n,a]}function Yl(e,t){let n=t.map(r=>1);return pL(e,n,t)}function Tee(e,t,n){D(Q$(t,n),()=>"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input."))}function mL(e,t){if(Q$(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function J$(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Nee(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}function _ee(e,t=null,n=!1){let r={x:_(e,"x","max")},a={reductionIndices:t,keepDims:n};return z.runKernel(Ku,r,a)}var _a=W({max_:_ee});function Aee(e,t=null,n=!1){let r={x:_(e,"x","min")},a={axis:t,keepDims:n};return z.runKernel(Qu,r,a)}var Yc=W({min_:Aee});function Ree(e,t){let n=_(e,"base","pow"),r=_(t,"exp","pow");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(id,a)}var As=W({pow_:Ree});function Ae(e,t){if((Pn(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Pn(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ho(e,[],[],t)}function Dee(e){let t={x:_(e,"x","sqrt","float32")};return z.runKernel(kd,t)}var Jn=W({sqrt_:Dee});function Fee(e){let t=_(e,"x","square"),n={};return z.runKernel("Square",{x:t},n)}var xt=W({square_:Fee});function Mee(e,t=null,n=!1){let r=_(e,"x","sum");r.dtype==="bool"&&(r=ce(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return z.runKernel(Sd,a,i)}var Ie=W({sum_:Mee});function Oee(e,t="euclidean",n=null,r=!1){e=_(e,"x","norm");let a=gL(e,t,n),i=a.shape;if(r){let s=ti(n,e.shape);i=Yl(a.shape,s)}return j(a,i)}function gL(e,t,n=null){if(e.rank===0)return cn(e);if(e.rank!==1&&n===null)return gL(j(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Ie(cn(e),n);if(t===1/0)return _a(cn(e),n);if(t===-1/0)return Yc(cn(e),n);if(t==="euclidean"||t===2)return Jn(Ie(As(cn(e),Ae(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&n.length===2){if(t===1)return _a(Ie(cn(e),n[0]),n[1]-1);if(t===1/0)return _a(Ie(cn(e),n[1]),n[0]);if(t===-1/0)return Yc(Ie(cn(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Jn(Ie(xt(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Ip=W({norm_:Oee});function Lee(e,t=null,n=!1){return Ip(e,"euclidean",t,n)}var e2=W({euclideanNorm_:Lee});function Pee(e){let t={x:_(e,"x","exp")};return z.runKernel(Fu,t)}var Cr=W({exp_:Pee});function zee(e,t=0){let n=_(e,"x","expandDims","string_or_numeric");D(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},a={dim:t};return z.runKernel(Lh,r,a)}var qn=W({expandDims_:zee});function Bee(e){let t={x:_(e,"x","expm1")};return z.runKernel(Mu,t)}var t2=W({expm1_:Bee});function Wee(e,t){let n=_(e,"x","tile","string_or_numeric");D(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,"."));let r={x:n},a={reps:t};return z.runKernel(Vo,r,a)}var aa=W({tile_:Wee});function Vee(e,t,n,r="float32"){t==null&&(t=e);let a=Xe([e,t],r),i=e<=t?e:t;for(let o=0;o<i;++o)a.set(1,o,o);let s=j(a.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return aa(qn(s,0),[n[0],1,1]);if(n.length===2)return aa(qn(qn(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return aa(qn(qn(qn(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received ".concat(n.length,"D."))}var Y0=W({eye_:Vee});function Uee(e){let t={x:_(e,"x","floor","float32")};return z.runKernel(Ou,t)}var $p=W({floor_:Uee});function Hee(e,t,n=0,r=0){let a=_(e,"x","gather"),i=_(t,"indices","gather","int32"),s={x:a,indices:i},o={axis:n,batchDims:r};return z.runKernel(zh,s,o)}var Cp=W({gather_:Hee});function jee(e,t){let n=_(e,"a","greater","string_or_numeric"),r=_(t,"b","greater","string_or_numeric");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Wh,a)}var Rr=W({greater_:jee});function Gee(e,t){let n=_(e,"a","greaterEqual","string_or_numeric"),r=_(t,"b","greaterEqual","string_or_numeric");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(zu,a)}var Os=W({greaterEqual_:Gee});function qee(e){let t={input:_(e,"input","imag")};return z.runKernel(O0,t)}var bg=W({imag_:qee});function Kee(e){let t={x:_(e,"x","isFinite")};return z.runKernel(Wu,t)}var n2=W({isFinite_:Kee});function Xee(e){let t={x:_(e,"x","isInf")};return z.runKernel(Vu,t)}var r2=W({isInf_:Xee});function Yee(e){let t={x:_(e,"x","isNaN")};return z.runKernel(Uu,t)}var a2=W({isNaN_:Yee});function Zee(e,t=.2){let n={x:_(e,"x","leakyRelu")},r={alpha:t};return z.runKernel(Hu,n,r)}var yg=W({leakyRelu_:Zee});function Qee(e,t){let n=_(e,"a","less","string_or_numeric"),r=_(t,"b","less","string_or_numeric");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Vh,a)}var Zc=W({less_:Qee});function Jee(e,t){let n=_(e,"a","lessEqual","string_or_numeric"),r=_(t,"b","lessEqual","string_or_numeric");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Uh,a)}var jo=W({lessEqual_:Jee});function bL(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return z.runKernel(Hh,{},r)}function ete(e,t=5,n=1,r=1,a=.5){let i=_(e,"x","localResponseNormalization");D(i.rank===4||i.rank===3,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")),D(Gc(t),()=>"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,"."));let s=i,o=!1;i.rank===3&&(o=!0,s=j(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},d={depthRadius:t,bias:n,alpha:r,beta:a},u=z.runKernel(qu,l,d);return o?j(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var i2=W({localResponseNormalization_:ete});function tte(e){let t={x:_(e,"x","log","float32")};return z.runKernel(ju,t)}var ma=W({log_:tte});function nte(e){let t={x:_(e,"x","log1p")};return z.runKernel(Gu,t)}var vg=W({log1p_:nte});function rte(e){return D(So(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=_(t,"x","tf.grad","string_or_numeric"),a=n!=null?_(n,"dy","tf.grad"):null;return z.tidy(()=>{let{value:i,grads:s}=z.gradients(()=>e(r),[r],a);return a!=null&&_r(i.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Z0(s),s[0]})}}function ate(e){return D(So(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{D(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=dm(t,"args","tf.grads","string_or_numeric"),a=n!=null?_(n,"dy","tf.grads"):null;return z.tidy(()=>{let{value:i,grads:s}=z.gradients(()=>e(...r),r,a);return a!=null&&_r(i.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Z0(s),s})}}function ite(e){return D(So(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{D(t instanceof Ue,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),D(n==null||n instanceof Ue,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:a}=z.gradients(()=>e(t),[t],n);return Z0(r),{grad:r[0],value:a}}}function ste(e){return D(So(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{D(Array.isArray(t)&&t.every(a=>a instanceof Ue),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),D(n==null||n instanceof Ue,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=z.gradients(()=>e(...t),t,n);return n!=null&&_r(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Z0(r.grads),r}}function yL(e,t){D(So(e),()=>"The f passed in variableGrads(f) must be a function"),D(t==null||Array.isArray(t)&&t.every(d=>d instanceof Hl),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let d in z.registeredVariables)t.push(z.registeredVariables[d])}let r=n?t.filter(d=>!d.trainable):null,a=t.length;t=t.filter(d=>d.trainable),D(t.length>0,()=>"variableGrads() expects at least one of the input variables to be trainable, but none of the ".concat(a," variables is trainable."));let i=!0,{value:s,grads:o}=z.gradients(e,t,null,i);D(o.some(d=>d!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),D(s.rank===0,()=>"The f passed in variableGrads(f) must return a scalar, but it returned a rank-".concat(s.rank," tensor"));let l={};return t.forEach((d,u)=>{o[u]!=null&&(l[d.name]=o[u])}),r!=null&&r.forEach(d=>l[d.name]=null),{value:s,grads:l}}function Qi(e){return z.customGrad(e)}function Z0(e){if(e.filter(t=>t==null).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function ote(e){let t={x:_(e,"x","neg")};return z.runKernel(Zh,t)}var Rt=W({neg_:ote});function lte(e){let t={x:_(e,"x","softplus")};return z.runKernel(wd,t)}var Ad=W({softplus_:lte});function ute(e){let t=_(e,"x","logSigmoid");return Qi(n=>({value:Rt(Ad(Rt(n))),gradFunc:r=>U(r,Za(Rt(n)))}))(t)}var s2=W({logSigmoid_:ute});function dte(e,t){let n=_(e,"a","sub"),r=_(t,"b","sub");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(Cd,a)}var we=W({sub_:dte});function cte(e,t=-1){let n=_(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return Qi((r,a)=>{let i=_a(r,t,!0),s=we(r,i),o=we(ce(s,"float32"),ma(Ie(Cr(s),t,!0)));return a([o]),{value:o,gradFunc:(l,d)=>{let[u]=d,c=!0,h=Cr(u);return we(l,U(Ie(l,t,c),h))}}})(n)}var Q0=W({logSoftmax_:cte});function hte(e,t=null,n=!1){let r=_(e,"x","logSumExp"),a=ti(t,r.shape),i=_a(r,a,!0),s=we(r,i),o=Cr(s),l=Ie(o,a),d=ma(l),u=ne(j(i,d.shape),d);if(n){let c=Yl(u.shape,a);return j(u,c)}return u}var J0=W({logSumExp_:hte});function pte(e,t){let n=_(e,"a","logicalAnd","bool"),r=_(t,"b","logicalAnd","bool");St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(jh,a)}var ei=W({logicalAnd_:pte});function fte(e){let t={x:_(e,"x","logicalNot","bool")};return z.runKernel(Gh,t)}var xg=W({logicalNot_:fte});function mte(e,t){let n=_(e,"a","logicalOr","bool"),r=_(t,"b","logicalOr","bool");St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(qh,a)}var ex=W({logicalOr_:mte});function gte(e,t){let n=_(e,"a","logicalXor","bool"),r=_(t,"b","logicalXor","bool");return St(n.shape,r.shape),ei(ex(e,t),xg(ei(e,t)))}var o2=W({logicalXor_:gte}),Tb=2147483648;function bte(e,t,n="left"){let r=_(e,"sortedSequence","searchSorted"),a=_(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=a.shape[a.shape.length-1],o=j(r,[-1,i]),l=j(a,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(At(l.shape)>=Tb)throw new Error("values tensor size must less than ".concat(Tb));if(o.shape[1]>=Tb)throw new Error("trailing dim_size must less than ".concat(Tb," for int32 output type, was ").concat(o.shape[1]));let d={sortedSequence:o,values:l},u={side:n};return z.runKernel(up,d,u)}var tx=W({searchSorted_:bte});function vL(e,t){return tx(e,t,"left")}function yte(e,t,n,r,a){let i=_(e,"x","maxPool"),s=1,o=i,l=!1;i.rank===3&&(l=!0,o=j(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(o.rank===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")),D(ns(n,s),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(s,"'")),Ar("maxPool",r,a);let d={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=z.runKernel(Yu,d,u);return l?j(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var Mn=W({maxPool_:yte});function vte(e,t=[1,1,1],n,r,a,i="NDHWC"){let s=_(e,"x","maxPool3d"),o=s,l=!1;s.rank===4&&(l=!0,o=j(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),D(o.rank===5,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),D(i==="NDHWC",()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)),Ar("maxPool3d",r,a);let d={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},c=z.runKernel(Xh,d,u);return l?j(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}var l2=W({maxPool3d_:vte});function xte(e,t,n,r,a=!1){let i={x:_(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},o=z.runKernel(Zm,i,s);return{result:o[0],indexes:o[1]}}var xL=W({maxPoolWithArgmax_:xte});function wte(e,t){let n=_(e,"a","maximum"),r=_(t,"b","maximum");[n,r]=Yt(n,r),n.dtype==="bool"&&(n=ce(n,"int32"),r=ce(r,"int32")),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Xu,a)}var rs=W({maximum_:wte});function kte(e,t=null,n=!1){let r={x:_(e,"x","mean")},a={axis:t,keepDims:n};return z.runKernel(Zu,r,a)}var qt=W({mean_:kte});function Kt(e,t="float32"){if(ya(e),t==="complex64"){let r=Kt(e,"float32"),a=Kt(e,"float32");return _s(r,a)}let n=E0(At(e),t);return z.makeTensor(n,e,t)}function ia(e,t="float32"){if(ya(e),t==="complex64"){let r=ia(e,"float32"),a=Kt(e,"float32");return _s(r,a)}let n=m$(At(e),t);return z.makeTensor(n,e,t)}function wL(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(e===void 0)return[];let r=_(e,"x","meshgrid",e instanceof Ue?e.dtype:"float32");if(t===void 0)return[r];let a=_(t,"y","meshgrid",t instanceof Ue?t.dtype:"float32"),i=At(r.shape),s=At(a.shape);return n==="xy"?(r=j(r,[1,-1]),a=j(a,[-1,1]),[Ge(ia([s,1],r.dtype),r),Ge(a,ia([1,i],a.dtype))]):(r=j(r,[-1,1]),a=j(a,[1,-1]),[Ge(r,ia([1,s],r.dtype)),Ge(ia([i,1],a.dtype),a)])}function Ste(e,t){let n=_(e,"a","minimum"),r=_(t,"b","minimum");[n,r]=Yt(n,r),n.dtype==="bool"&&(n=ce(n,"int32"),r=ce(r,"int32")),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Ju,a)}var Co=W({minimum_:Ste});function Ite(e,t,n){D(n==="reflect"||n==="symmetric",()=>"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,"."));let r=_(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");D(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,"."));let a=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)D(t[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),D(t[o][0]>=0&&t[o][0]<=r.shape[o]-a&&t[o][1]>=0&&t[o][1]<=r.shape[o]-a,()=>"Padding in dimension ".concat(o," cannot be greater than or equal to ").concat(r.shape[o]-a," or less than 0 for input of shape ").concat(r.shape));let i={paddings:t,mode:n},s={x:r};return z.runKernel(ed,s,i)}var u2=W({mirrorPad_:Ite});function $te(e,t){let n=_(e,"a","mod"),r=_(t,"b","mod");[n,r]=Yt(n,r);let a={a:n,b:r};return z.runKernel(td,a)}var d2=W({mod_:$te});function Cte(e,t=null,n=!1){e=_(e,"x","moments");let r=ti(t,e.shape),a=qt(e,r,n),i=a.shape;n||(i=Yl(a.shape,r));let s=xt(we(ce(e,"float32"),j(a,i))),o=qt(s,r,n);return{mean:a,variance:o}}var wg=W({moments_:Cte});function Ete(e,t,n,r){let a=_(t,"data","multiRNNCell"),i=dm(n,"c","multiRNNCell"),s=dm(r,"h","multiRNNCell"),o=a,l=[];for(let c=0;c<e.length;c++){let h=e[c](o,i[c],s[c]);l.push(h[0]),l.push(h[1]),o=h[1]}let d=[],u=[];for(let c=0;c<l.length;c+=2)d.push(l[c]),u.push(l[c+1]);return[d,u]}var kL=W({multiRNNCell_:Ete});function Tte(e,t,n,r=!1){let a=_(e,"logits","multinomial"),i=a.size,s=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(i,"."));if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(s));n=n||Math.random();let o={logits:s===1?j(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},d=z.runKernel(Yh,o,l);return s===1?j(d,[d.size]):d}var SL=W({multinomial_:Tte});function Nte(e,t){let n=_(e,"a","notEqual","string_or_numeric"),r=_(t,"b","notEqual","string_or_numeric");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r};return z.runKernel(Qh,a)}var Zl=W({notEqual_:Nte});function _te(e,t,n=1,r=0,a="int32"){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));let i={indices:_(e,"indices","oneHot","int32")},s={dtype:a,depth:t,onValue:n,offValue:r};return z.runKernel(rd,i,s)}var Qc=W({oneHot_:_te});function Ate(e){let t={x:_(e,"x","onesLike")};return z.runKernel(np,t)}var ga=W({onesLike_:Ate});function Rte(e,t){let n=_(e,"v1","outerProduct"),r=_(t,"v2","outerProduct");D(n.rank===1&&r.rank===1,()=>"Error in outerProduct: inputs must be rank 1, but got ranks ".concat(n.rank," and ").concat(r.rank,"."));let a=j(n,[-1,1]),i=j(r,[1,-1]);return Ge(a,i)}var IL=W({outerProduct_:Rte});function Dte(e,t,n=0){let r=_(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let a={paddings:t,constantValue:n},i={x:r};return z.runKernel(ad,i,a)}var Ri=W({pad_:Dte});function Fte(e,t,n=0){return D(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Ri(e,[t],n)}var $L=W({pad1d_:Fte});function Mte(e,t,n=0){return D(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ri(e,t,n)}var CL=W({pad2d_:Mte});function Ote(e,t,n=0){return D(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ri(e,t,n)}var EL=W({pad3d_:Ote});function Lte(e,t,n=0){return D(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ri(e,t,n)}var TL=W({pad4d_:Lte});function Pte(e,t,n){let r=_(e,"x","spaceToBatchND");D(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),D(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),D(r.shape.reduce((s,o,l)=>l>0&&l<=t.length?s&&(o+n[l-1][0]+n[l-1][1])%t[l-1]===0:s,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));let a={x:r},i={blockShape:t,paddings:n};return z.runKernel(hp,a,i)}var kg=W({spaceToBatchND_:Pte});function zte(e,t,n,r,a,i,s){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");let o=_(e,"x","maxPool"),l=o,d=!1;o.rank===3&&(d=!0,l=j(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D(ns(i,a),()=>"Error in pool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(a,"'"));let u=nL(l.shape,t,i,a,r),c=[u.dilationHeight,u.dilationWidth],h;r==="same"?h=Wte([u.filterHeight,u.filterWidth],c):h=[[0,0],[0,0]];let p=c[0]===1&&c[1]===1,[f,m]=Bte([u.inHeight,u.inWidth],c,h),g=p?r:"valid",b=p?l:kg(l,c,f),y=(n==="avg"?()=>Ms(b,t,i,g,s):()=>Mn(b,t,i,g,s))(),v=p?y:mg(y,c,m);return d?j(v,[v.shape[1],v.shape[2],v.shape[3]]):v}function Bte(e,t,n){let r=n.map(u=>u[0]),a=n.map(u=>u[1]),i=e.concat(r,a),s=t.map((u,c)=>(u-i[c]%u)%u),o=a.map((u,c)=>u+s[c]),l=t.map((u,c)=>[r[c],o[c]]),d=t.map((u,c)=>[0,s[c]]);return[l,d]}function Wte(e,t){let n=e.map((i,s)=>i+(i-1)*(t[s]-1)).map(i=>i-1),r=n.map(i=>Math.floor(i/2)),a=n.map((i,s)=>i-r[s]);return n.map((i,s)=>[r[s],a[s]])}var c2=W({pool_:zte});function Vte(e,t){let n=_(e,"x","prelu"),r=_(t,"alpha","prelu"),a={x:n,alpha:r};return z.runKernel(sd,a)}var Sg=W({prelu_:Vte});function Ute(e,t=null,n=!1){let r=_(e,"x","prod");r.dtype==="bool"&&(r=ce(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return z.runKernel(od,a,i)}var h2=W({prod_:Ute});function Hte(e,t,n,r){let a=e.map((u,c)=>_(u,"tensors".concat(c),"raggedGather","int32")),i=_(t,"paramsDenseValues","raggedGather"),s=_(n,"indices","raggedGather","int32"),o={paramsNestedSplits:a,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},d=z.runKernel(L0,o,l);return{outputNestedSplits:d.slice(0,d.length-1),outputDenseValues:d[d.length-1]}}var NL=W({raggedGather_:Hte});function jte(e,t,n){let r=_(e,"starts","raggedRange"),a=_(t,"limits","raggedRange",r.dtype),i=_(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:a,deltas:i},o=z.runKernel(P0,s);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}var _L=W({raggedRange_:jte});function Gte(e,t,n,r,a){let i=_(e,"shape","raggedTensorToTensor","int32"),s=_(t,"values","raggedTensorToTensor"),o=_(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((c,h)=>_(c,"tensors".concat(h),"raggedTensorToTensor","int32")),d={shape:i,values:s,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:a};return z.runKernel(z0,d,u)}var AL=W({raggedTensorToTensor_:Gte});function qte(e,t,n){ya(e);let r=At(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error("Unknown data type ".concat(n));for(let i=0;i<r;i++)a[i]=t();return z.makeTensor(a,e,n)}var RL=W({rand_:qte}),p2=zo($0()),DL={};We(DL,{TEST_EPSILON_FLOAT16:()=>FL,createVideoElement:()=>tne,encodeStrings:()=>ML,expectArrayBuffersEqual:()=>ene,expectArraysClose:()=>Xte,expectArraysEqual:()=>Zte,expectNumbersClose:()=>Qte,expectPromiseToFail:()=>Yte,expectValuesInRange:()=>Jte,play:()=>nne,testEpsilon:()=>f2});var Kte=.001,FL=.1;function Xte(e,t,n){return n==null&&(n=f2()),Bk(e,t,(r,a)=>m2(r,a,n))}function f2(){return z.backend.floatPrecision()===32?Kte:FL}function Bk(e,t,n){let r=!0;if((Pn(e)||Pn(t))&&(r=!1),Pn(e)&&Pn(t)&&(r=!0),r){let s=e.constructor.name,o=t.constructor.name;if(s!==o)throw new Error("Arrays are of different type. Actual: ".concat(s,". Expected: ").concat(o))}if(Array.isArray(e)&&Array.isArray(t)){let s=Zi(e),o=Zi(t);if(!Fs(s,o))throw new Error("Arrays have different shapes. Actual: [".concat(s,"]. Expected: [").concat(o,"]"))}let a=Pn(e)?e:Io(e),i=Pn(t)?t:Io(t);if(a.length!==i.length)throw new Error("Arrays have different lengths actual: ".concat(a.length," vs expected: ").concat(i.length,".\nActual:   ").concat(a,".\nExpected: ").concat(i,"."));for(let s=0;s<i.length;++s){let o=a[s],l=i[s];if(!n(o,l))throw new Error("Arrays differ: actual[".concat(s,"] = ").concat(o,", expected[").concat(s,"] = ").concat(l,".\nActual:   ").concat(a,".\nExpected: ").concat(i,"."))}typeof expect<"u"&&expect().nothing()}function Yte(e,t){e().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function Zte(e,t){let n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return no(e)||no(e[0])||no(t)||no(t[0])?Bk(e,n,(r,a)=>r==a):Bk(e,t,(r,a)=>m2(r,a,0))}function Qte(e,t,n){if(n==null&&(n=f2()),!m2(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));typeof expect<"u"&&expect().nothing()}function m2(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Jte(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function ene(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length ".concat(r.length,", but it was ").concat(n.length));for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ").concat(r[a]," but got ").concat(n[a]," instead"))}function ML(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?ML(n):e[t]=cg(n)}return e}function tne(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(n=>{t.addEventListener("loadeddata",r=>n(t)),t.load()})}async function nne(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}var g2=class{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let i=a||Math.random();this.random=p2.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let e,t,n=!1;for(;!n;){let r,a,i;do r=2*this.random()-1,a=2*this.random()-1,i=r*r+a*a;while(i>=1||i===0);let s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},rne=class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let a=r||Math.random();this.randu=p2.alea(a.toString()),this.randn=new g2(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,i;for(;;){do r=this.randn.nextValue(),i=1+this.c*r;while(i<=0);if(i*=i*i,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},ane=class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=n,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=p2.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function ine(e,t,n=1,r="float32",a){if(ya(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type ".concat(r));let i=new rne(t,n,r,a),s=Xe(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var OL=W({randomGamma_:ine});function sne(e,t=0,n=1,r,a){if(ya(e),r!=null&&r==="bool")throw new Error("Unsupported data type ".concat(r));let i=new g2(t,n,r,!1,a),s=Xe(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var nx=W({randomNormal_:sne});function one(e,t,n){if(t!=null&&t==="bool")throw new Error("Unsupported data type ".concat(t));return nx(e,0,1,t,n)}var LL=W({randomStandardNormal_:one});function lne(e,t=0,n=1,r="float32",a){ya(e);let i=Xe(e,r),s=new ane(t,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}var Go=W({randomUniform_:lne});function une(e,t,n,r){return Go(e,t,n,"int32",r)}var PL=W({randomUniformInt_:une});function Ql(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let a={start:e,stop:t,step:n,dtype:r};return z.runKernel(Qm,{},a)}function dne(e){let t={input:_(e,"input","real")};return z.runKernel(B0,t)}var Jc=W({real_:dne});function cne(e){let t={x:_(e,"x","reciprocal")};return z.runKernel(ld,t)}var b2=W({reciprocal_:cne});function hne(e){let t={x:_(e,"x","relu")};return z.runKernel(ud,t)}var gt=W({relu_:hne});function pne(e){let t={x:_(e,"x","relu6")};return z.runKernel(hd,t)}var rx=W({relu6_:pne});function fne(e,t){let n={x:_(e,"x","reverse")},r={dims:t};return z.runKernel(pd,n,r)}var Da=W({reverse_:fne});function mne(e){let t=_(e,"x","reverse");return D(t.rank===1,()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")),Da(t,0)}var zL=W({reverse1d_:mne});function gne(e,t){let n=_(e,"x","reverse");return D(n.rank===2,()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")),Da(n,t)}var BL=W({reverse2d_:gne});function bne(e,t){let n=_(e,"x","reverse");return D(n.rank===3,()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")),Da(n,t)}var WL=W({reverse3d_:bne});function yne(e,t){let n=_(e,"x","reverse");return D(n.rank===4,()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")),Da(n,t)}var VL=W({reverse4d_:yne});function vne(e){let t={x:_(e,"x","round")};return z.runKernel(fd,t)}var ax=W({round_:vne});function xne(e){let t={x:_(e,"x","rsqrt","float32")};return z.runKernel(md,t)}var ix=W({rsqrt_:xne});function wne(e){let t={x:_(e,"x","selu")};return z.runKernel(gd,t)}var sx=W({selu_:wne});function kne(e,t,n,r,a,i=[1,1],s="NHWC"){let o=_(e,"x","separableConv2d"),l=_(t,"depthwiseFilter","separableConv2d"),d=_(n,"pointwiseFilter","separableConv2d"),u=o,c=!1;if(o.rank===3&&(c=!0,u=j(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(u.rank===4,()=>"Error in separableConv2d: input must be rank 4, but got rank ".concat(u.rank,".")),D(l.rank===4,()=>"Error in separableConv2d: depthwise filter must be rank 4, but got rank ".concat(l.rank,".")),D(d.rank===4,()=>"Error in separableConv2d: pointwise filter must be rank 4, but got rank ".concat(l.rank,".")),D(d.shape[0]===1,()=>"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ".concat(d.shape[0],".")),D(d.shape[1]===1,()=>"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ".concat(d.shape[1],"."));let h=l.shape[2],p=l.shape[3];D(d.shape[2]===h*p,()=>"Error in separableConv2d: the third dimension of pointwise filter must be ".concat(h*p,", but got ").concat(d.shape[2],"."));let f=_d(u,l,r,a,s,i),m=$r(f,d,1,"valid",s);return c?j(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var Ep=W({separableConv2d_:kne});async function Sne(e,t){let n=_(e,"x","setdiff1d"),r=_(t,"y","setdiff1d");D(n.dtype===r.dtype,()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")),D(n.rank===1,()=>"x should be 1D tensor, but got x (".concat(n.shape,").")),D(r.rank===1,()=>"y should be 1D tensor, but got y (".concat(r.shape,")."));let a=await n.data(),i=await r.data(),s=new Set(i),o=0;for(let u=0;u<a.length;u++)s.has(a[u])||o++;let l=new mn([o],n.dtype),d=new mn([o],"int32");for(let u=0,c=0;u<a.length;u++)s.has(a[u])||(l.values[c]=a[u],d.values[c]=u,c++);return[l.toTensor(),d.toTensor()]}var UL=Sne;function Ine(e){let t={x:_(e,"x","sign")};return z.runKernel(vd,t)}var y2=W({sign_:Ine});function $ne(e){let t={x:_(e,"x","sin","float32")};return z.runKernel(bd,t)}var ox=W({sin_:$ne});function Cne(e){let t={x:_(e,"x","sinh")};return z.runKernel(yd,t)}var lx=W({sinh_:Cne});function Ene(e,t,n){let r=_(e,"x","slice1d");return D(r.rank===1,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),Qe(r,[t],[n])}var Ig=W({slice1d_:Ene});function Tne(e,t,n){let r=_(e,"x","slice2d");return D(r.rank===2,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),Qe(r,t,n)}var ux=W({slice2d_:Tne});function Nne(e,t,n){let r=_(e,"x","slice3d");return D(r.rank===3,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),Qe(r,t,n)}var Tp=W({slice3d_:Nne});function _ne(e,t,n){let r=_(e,"x","slice4d");return D(r.rank===4,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),Qe(r,t,n)}var eh=W({slice4d_:_ne});function Ane(e,t=-1){let n=_(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));let r={logits:n},a={dim:t};return z.runKernel(Id,r,a)}var qo=W({softmax_:Ane});function Rne(e){D(e.dtype==="complex64",()=>"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,"."));let t={input:e};return z.runKernel(F0,t)}var $g=W({fft_:Rne});function Dne(e){D(e.dtype==="complex64",()=>"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,"."));let t={input:e};return z.runKernel(M0,t)}var th=W({ifft_:Dne});function Fne(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let a=j(e,[n,t]);r=th(a)}else{let a=[n,2*(t-1)],i=j(Jc(e),[n,t]),s=j(bg(e),[n,t]),o=Da(Qe(i,[0,1],[n,t-2]),1),l=U(Da(Qe(s,[0,1],[n,t-2]),1),Ae(-1)),d=kt([i,o],1),u=kt([s,l],1),c=j(_s(d,u),[a[0],a[1]]);r=th(c)}if(r=Jc(r),e.rank===3&&e.shape[0]!==0){let a=r,i=e.shape[0];r=j(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}var dx=W({irfft_:Fne});function Mne(e,t,n=0){let r={x:_(e,"x","split")},a={numOrSizeSplits:t,axis:n};return z.runKernel(pp,r,a)}var Br=W({split_:Mne});function One(e,t){D(e.dtype==="float32",()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1],r=e.size/n,a;if(t!=null&&t<n){let f=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=t,a=Qe(e,f,m),n=t}else if(t!=null&&t>n){let f=e.shape.map(m=>m);f[e.shape.length-1]=t-n,a=kt([e,Kt(f)],e.shape.length-1),n=t}else a=e;let i=et(a),s=j(_s(a,i),[r,n]),o=$g(s),l=Math.floor(n/2)+1,d=Jc(o),u=bg(o),c=Br(d,[l,n-l],d.shape.length-1),h=Br(u,[l,n-l],u.shape.length-1),p=a.shape.slice();return p[a.shape.length-1]=l,j(_s(c[0],h[0]),p)}var Cg=W({rfft_:One});function Lne(e,t){let n=_(e,"a","squaredDifference"),r=_(t,"b","squaredDifference");[n,r]=Yt(n,r),St(n.shape,r.shape);let a={a:n,b:r},i={};return z.runKernel($d,a,i)}var cx=W({squaredDifference_:Lne});function Pne(e,t){let n=_(e,"x","squeeze","string_or_numeric");return j(n,b3(n.shape,t).newShape)}var Ko=W({squeeze_:Pne});function zne(e,t=0){let n=dm(e,"tensors","stack","string_or_numeric");D(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&D(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,a={axis:t};return z.runKernel(rp,r,a)}var Cn=W({stack_:zne});function Bne(e,t=0){let n={x:_(e,"x","step")},r={alpha:t};return z.runKernel(Uo,n,r)}var Rd=W({step_:Bne});function Wne(e,t,n,r,a=0,i=0,s=0,o=0,l=0){let d={x:_(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return z.runKernel(gp,d,u)}var v2=W({stridedSlice_:Wne});function Vne(e){let t={x:_(e,"x","tan","float32")};return z.runKernel(Ed,t)}var x2=W({tan_:Vne});function mt(e,t){du(e);let n=Zi(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ho(e,null,n,t)}function Xi(e,t,n){if(du(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=Zi(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ho(e,t,r,n)}function hx(e,t,n){if(du(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=Zi(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ho(e,t,r,n)}function Eo(e,t,n){if(du(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=Zi(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ho(e,t,r,n)}function HL(e,t,n){if(du(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=Zi(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ho(e,t,r,n)}function jL(e,t,n){if(du(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=Zi(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Ho(e,t,r,n)}var px={};We(px,{calculateShapes:()=>GL,validateInput:()=>fx,validateUpdateShape:()=>w2});function w2(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(let s=0;s<a;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function fx(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(e.size===0)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}w2(n,t,e)}function GL(e,t,n){let r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,s=1;for(let c=a;c<i;++c)s*=n[c];let o=a<1?1:a,l=At(t.shape)/o,d=[...vh(n.slice(0,a)),1],u=At(n);return{sliceRank:a,numUpdates:l,sliceSize:s,strides:d,outputSize:u}}function Une(e,t,n){let r=_(e,"tensor","tensorScatterupdate"),a=_(t,"indices","tensorScatterupdate","int32"),i=_(n,"updates","tensorScatterupdate");if(fx(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));let s={tensor:r,indices:a,updates:i},o={};return z.runKernel(lp,s,o)}var qL=W({tensorScatterUpdate_:Une});function Hne(e,t=1,n=!0){let r=_(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));let i={x:r},s={k:t,sorted:n},[o,l]=z.runKernel(bp,i,s);return{values:o,indices:l}}var k2=W({topk_:Hne});function jne(e,t=0,n=1,r,a){if(ya(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new g2(t,n,r,!0,a),s=Xe(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}var mx=W({truncatedNormal_:jne});function Gne(e,t=0){let n=_(e,"x","unique","string_or_numeric");D(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},a={axis:t},[i,s]=z.runKernel(og,r,a);return{values:i,indices:s}}var S2=W({unique_:Gne});function qne(e,t,n){let r=_(e,"x","unsortedSegmentSum"),a=_(t,"segmentIds","unsortedSegmentSum","int32");D(Gc(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:a},s={numSegments:n};return z.runKernel(lg,i,s)}var gx=W({unsortedSegmentSum_:qne});function Kne(e,t=0){let n=_(e,"x","unstack","string_or_numeric");D(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));let r={value:n},a={axis:t};return z.runKernel(vp,r,a)}var tn=W({unstack_:Kne});function KL(e,t){return tx(e,t,"right")}function I2(e,t=!0,n,r){return z.makeVariable(e,t,n,r)}function XL(e,t){let n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);let r=Xe(e,"int32"),a=Xe([n.length,e.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),o=i*e.length;a.values.set(s,o)}return a.toTensor()}async function Xne(e){let t=_(e,"condition","whereAsync","bool"),n=await t.data(),r=XL(t.shape,n);return e!==t&&t.dispose(),r}var $2=Xne;async function Yne(e,t,n){let r=_(e,"tensor","boolMask"),a=_(t,"mask","boolMask","bool"),i=n==null?0:n,s=a.rank,o=r.shape;D(s>0,()=>"mask cannot be scalar"),_r(o.slice(i,i+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=o[m];let d=o.slice(0,i).concat([l],o.slice(i+s)),u=j(r,d),c=j(a,[-1]),h=await $2(c),p=Ko(h,[1]),f=Cp(u,p,i);return e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),u.dispose(),c.dispose(),h.dispose(),f}var YL=Yne;function Zne(e,t,n){let r=_(e,"x","transpose");if(t==null&&(t=r.shape.map((s,o)=>o).reverse()),D(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," must match length of perm ").concat(t,".")),t.forEach(s=>{D(s>=0&&s<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1," but got ").concat(t))}),r.rank<=1)return r.clone();let a={x:r},i={perm:t};return r.dtype==="complex64"?G(()=>{let s=Jc(r),o=bg(r);return s=z.runKernel(Ss,{x:s},i),o=z.runKernel(Ss,{x:o},i),n&&(o=Rt(o)),_s(s,o)}):z.runKernel(Ss,a,i)}var Ke=W({transpose_:Zne});function Qne(e,t,n,r,a=!0){let i=_(e,"v","movingAverage"),s=_(t,"x","movingAverage"),o=_(n,"decay","movingAverage");L3(i,s),D(Fs(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=Ae(1),d=we(l,o),u=U(we(s,i),d);if(a){D(r!=null,()=>"When using zeroDebias: true, step is required.");let c=_(r,"step","movingAverage");u=Se(u,we(l,As(o,c)))}return ne(i,u)}var ZL=W({movingAverage_:Qne});function Jne(e,t,n){ya(n);let r=_(e,"indices","scatterND","int32"),a=_(t,"updates","scatterND");fx(a,r,n);let i={indices:r,updates:a},s={shape:n};return z.runKernel(op,i,s)}var QL=W({scatterND_:Jne});function ere(e,t,n,r){if(e.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));let a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(i,"."));let s=t.size;if(!(t.rank===0||t.rank===1&&s===a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function tre(e,t,n,r=0){ya(n);let a=_(e,"sparseIndices","sparseToDense","int32"),i=_(t,"sparseValues","sparseToDense","string_or_numeric"),s=_(r,"defaultValue","sparseToDense",i.dtype);ere(a,i,n,s);let o={sparseIndices:a,sparseValues:i,defaultValue:s},l={outputShape:n};return z.runKernel(mp,o,l)}var JL=W({sparseToDense_:tre});function nre(e,t){let n=_(t,"indices","gatherND","int32"),r={params:_(e,"x","gatherND","string_or_numeric"),indices:n};return z.runKernel(Bh,r)}var eP=W({gatherND_:nre});function rre(e,t){if(t==null)return e.shape.slice();if(Fs(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function are(e,t,n,r){let a=_(e,"x","dropout");if(D(a.dtype==="float32",()=>"x has to be a floating point tensor since it's going to be scaled, but got a ".concat(a.dtype," tensor instead.")),D(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),t===0)return e instanceof Ue?a.clone():a;let i=rre(a,n),s=1-t,o=Se($p(ne(Go(i,0,1,"float32",r),s)),s);return U(a,o)}var C2=W({dropout_:are});function E2(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function bx(e,t,n){let r=1-e%2,a=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(s)}return mt(a,"float32")}async function ire(e,t,n=1){let r=_(e,"predictions","inTopK"),a=_(t,"targets","inTopK");D(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got ".concat(r.rank)),D(r.rank-1===a.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank ".concat(r.rank," and targets rank ").concat(a.rank)),_r(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];D(n>0&&n<=i,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last dimension (".concat(i,"), but got ").concat(n));let s=await r.data(),o=await a.data(),[l,d]=[s.length/i,i],u=y3("bool",l);for(let c=0;c<l;c++){let h=c*d,p=s.subarray(h,h+d),f=[];for(let m=0;m<p.length;m++)f.push({value:p[m],index:m});f.sort((m,g)=>g.value-m.value),u[c]=0;for(let m=0;m<n;m++)if(f[m].index===o[c]){u[c]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),wr(u,a.shape,"bool")}var tP=ire,nh={};We(nh,{conv2d:()=>lre,depthwiseConv2d:()=>hre,matMul:()=>fre});function sre(e,t,n,r,a,i="NHWC",s){let o=e;e.rank===3&&(o=j(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=j(t,[1,t.shape[0],t.shape[1],t.shape[2]])),D(o.rank===4,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(o.shape,".")),D(l.rank===4,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(l.shape,".")),D(n.length===4,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,"."));let d=i==="NHWC"?o.shape[3]:o.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];D(d===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(d,") must match input depth in filter (").concat(n[2],".")),D(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must match output depth for filter (").concat(n[3],").")),Ar("conv2dDerFilter",a,s);let c={x:o,dy:l},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return z.runKernel(_0,c,h)}var T2=W({conv2DBackpropFilter_:sre});function yx(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return U(e,Rd(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function vx(e,t){let n=t,r=gn(e.shape,t.shape);return r.length>0&&(n=Ie(n,r)),j(n,e.shape)}function xx(e,t,n,r){if(t==="linear")return e;if(t==="relu")return gt(e);if(t==="elu")return Sp(e);if(t==="relu6")return rx(e);if(t==="prelu")return Sg(e,n);if(t==="leakyrelu")return yg(e,r);if(t==="sigmoid")return Za(e);throw new Error("Unknown fused activation ".concat(t,"."))}var wx=(e,t)=>!(e>0)||t==="linear";function ore({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:d,leakyreluAlpha:u}){if(l=l||"linear",wx(z.state.gradientDepth,l)===!1){D(a==="NHWC",()=>"Error in fused conv2d: got dataFormat of ".concat(a," but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let $=$r(e,t,n,r,a,i,s);return o!=null&&($=ne($,o)),xx($,l,d,u)}let c=_(e,"x","conv2d","float32"),h=_(t,"filter","conv2d","float32"),p=c,f=!1;c.rank===3&&(f=!0,p=j(c,[1,c.shape[0],c.shape[1],c.shape[2]])),D(p.rank===4,()=>"Error in fused conv2d: input must be rank 4, but got rank ".concat(p.rank,".")),D(h.rank===4,()=>"Error in fused conv2d: filter must be rank 4, but got rank ".concat(h.rank,".")),Ar("fused conv2d",r,s);let m=a==="NHWC"?p.shape[3]:p.shape[1];D(h.shape[2]===m,()=>"Error in conv2d: depth of input (".concat(m,") must match input depth for filter ").concat(h.shape[2],".")),D(ns(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'"));let g=fg(p.shape,h.shape,n,i,r,s),b;o!=null&&(b=_(o,"bias","fused conv2d"),[b]=Yt(b,c),a==="NHWC"?St(g.outShape,b.shape):(D(b.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-".concat(b.shape.length,".")),D(b.shape.length===0||b.shape[0]===g.outChannels||b.shape[0]===1,()=>"Error in fused conv2d: bias shape (".concat(b.shape,") is not compatible with the number of output channels (").concat(g.outChannels,")"))));let y;if(d!=null){let $=d.shape;if(D($.length<=1||$.length===3,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-".concat($.length,".")),$.length===1)D($[0]===1||$[0]===g.outChannels,()=>"Error in fused conv2d: PReLU activation weights (".concat($,") is not compatible with the number of output channels (").concat(g.outChannels,")."));else if($.length===3)try{St($,g.outShape)}catch(C){let E="Error in fused conv2d: PReLU activation weights (".concat($,") is not compatible with the output shape of the conv2d (").concat(g.outShape,").");throw Error(E)}y=_(d,"prelu weights","fused conv2d")}let v=($,C)=>{D(a==="NHWC",()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(a," but only NHWC is currently supported."));let[E,A,R,N]=C,I=yx($,R,l);D($o(i),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(i,"'"));let F=H$(A.shape,I,E,n,r),L=T2(A,I,E.shape,n,r),P=[F,L];if(N!=null){let H=vx(N,I);P.push(H)}return P},x={x:p,filter:h,bias:b,preluActivationWeights:y},w={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return o==null?Qi(($,C,E)=>{let A=z.runKernel(Vl,x,w);return E([C,$,A]),f&&(A=j(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:v}})(p,h):Qi(($,C,E,A)=>{let R=z.runKernel(Vl,x,w);return A([C,$,R,E]),f&&(R=j(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:v}})(p,h,b)}var lre=W({fusedConv2d_:ore});function ure(e,t,n,r,a,i=[1,1],s){let o=e;e.rank===3&&(o=j(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=j(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let d={x:o,dy:l},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return z.runKernel(A0,d,u)}var nP=W({depthwiseConv2dNativeBackpropFilter_:ure});function dre(e,t,n,r,a,i=[1,1],s){let o=t,l=!1;t.rank===3&&(l=!0,o=j(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let d={dy:o,filter:n},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:e},c=z.runKernel(R0,d,u);return l?j(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var rP=W({depthwiseConv2dNativeBackpropInput_:dre});function cre({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:d,leakyreluAlpha:u}){if(wx(z.state.gradientDepth,l)===!1){let w=_d(e,t,n,r,a,i,s);return o!=null&&(w=ne(w,o)),xx(w,l,d,u)}let c=_(e,"x","depthwiseConv2d","float32"),h=_(t,"filter","depthwiseConv2d","float32"),p=c,f=!1;c.rank===3&&(f=!0,p=j(c,[1,c.shape[0],c.shape[1],c.shape[2]])),D(p.rank===4,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(p.rank,".")),D(h.rank===4,()=>"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(h.rank,".")),D(p.shape[3]===h.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels (".concat(p.shape[3],") must match the inChannels dimension in filter ").concat(h.shape[2],".")),i==null&&(i=[1,1]),D(ns(n,i),()=>"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),Ar("fused depthwiseConv2d",r,s);let m=fg(p.shape,h.shape,n,i,r,s,!0),g;o!=null&&(g=_(o,"bias","fused conv2d"),[g]=Yt(g,c),St(m.outShape,g.shape));let b;d!=null&&(b=_(d,"prelu weights","fused depthwiseConv2d"));let y=(w,$)=>{D($o(i),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(i,"'"));let[C,E,A,R]=$,N=yx(w,A,l),I=rP(E.shape,N,C,n,r,i,s),F=nP(E,N,C.shape,n,r,i,s);if(R!=null){let L=vx(g,N);return[I,F,L]}return[I,F]},v={x:p,filter:h,bias:g,preluActivationWeights:b},x={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return o==null?Qi((w,$,C)=>{let E=z.runKernel(Ul,v,x);return C([$,w,E]),f&&(E=j(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:y}})(p,h):Qi((w,$,C,E)=>{let A=z.runKernel(Ul,v,x);return E([$,w,A,C]),f&&(A=j(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:y}})(p,h,g)}var hre=W({fusedDepthwiseConv2d_:cre});function pre({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(wx(z.state.gradientDepth,i)===!1){let R=Ge(e,t,n,r);return a!=null&&(R=ne(R,a)),xx(R,i,s,o)}let l=_(e,"a","fused matMul"),d=_(t,"b","fused matMul");[l,d]=Yt(l,d);let u=n?l.shape[l.rank-2]:l.shape[l.rank-1],c=r?d.shape[d.rank-1]:d.shape[d.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?d.shape[d.rank-2]:d.shape[d.rank-1],f=l.shape.slice(0,-2),m=d.shape.slice(0,-2),g=At(f),b=At(m);D(u===c,()=>"Error in fused matMul: inner shapes (".concat(u,") and (").concat(c,") of Tensors with shapes ").concat(l.shape," and ").concat(d.shape," and transposeA=").concat(n," and transposeB=").concat(r," must match."));let y=St(l.shape.slice(0,-2),d.shape.slice(0,-2)).concat([h,p]),v=n?j(l,[g,u,h]):j(l,[g,h,u]),x=r?j(d,[b,p,c]):j(d,[b,c,p]),w;a!=null&&(w=_(a,"bias","fused matMul"),[w]=Yt(w,l),St(y,w.shape));let $;s!=null&&($=_(s,"prelu weights","fused matMul"));let C=(R,N)=>{let[I,F,L,P]=N,H=yx(j(R,L.shape),L,i),X,M;if(!n&&!r?(X=Ge(H,F,!1,!0),M=Ge(I,H,!0,!1)):!n&&r?(X=Ge(H,F,!1,!1),M=Ge(H,I,!0,!1)):n&&!r?(X=Ge(F,H,!1,!0),M=Ge(I,H,!1,!1)):(X=Ge(F,H,!0,!0),M=Ge(H,I,!0,!0)),a!=null){let B=vx(P,H);return[X,M,B]}else return[X,M]},E={a:v,b:x,bias:w,preluActivationWeights:$},A={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return a==null?Qi((R,N,I)=>{let F=z.runKernel(Wl,E,A);return I([R,N,F]),{value:j(F,y),gradFunc:C}})(v,x):Qi((R,N,I,F)=>{let L=z.runKernel(Wl,E,A);return F([R,N,L,I]),{value:j(L,y),gradFunc:C}})(v,x,w)}var fre=W({fusedMatMul_:pre});function mre(e){return bx(e,.54,.46)}var gre=W({hammingWindow_:mre});function bre(e){return bx(e,.5,.5)}var aP=W({hannWindow_:bre});function yre(e,t,n,r=!1,a=0){let i=0,s=[];for(;i+t<=e.size;)s.push(Qe(e,i,t)),i+=n;if(r)for(;i<e.size;){let o=i+t-e.size,l=kt([Qe(e,i,t-o),ca([o],a)]);s.push(l),i+=n}return s.length===0?Xi([],[0,t]):j(kt(s),[s.length,t])}var iP=W({frame_:yre});function vre(e,t,n,r,a=aP){r==null&&(r=E2(t));let i=iP(e,t,n),s=U(i,a(t));return Cg(s,r)}var xre=W({stft_:vre});function wre(e,t,n,r,a="bilinear",i=0){let s=_(e,"image","cropAndResize"),o=_(t,"boxes","cropAndResize","float32"),l=_(n,"boxInd","cropAndResize","int32"),d=o.shape[0];D(s.rank===4,()=>"Error in cropAndResize: image must be rank 4,but got rank ".concat(s.rank,".")),D(o.rank===2&&o.shape[1]===4,()=>"Error in cropAndResize: boxes must be have size [".concat(d,",4] but had shape ").concat(o.shape,".")),D(l.rank===1&&l.shape[0]===d,()=>"Error in cropAndResize: boxInd must be have size [".concat(d,"] but had shape ").concat(o.shape,".")),D(r.length===2,()=>"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")),D(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),D(a==="bilinear"||a==="nearest",()=>"method must be bilinear or nearest, but was ".concat(a));let u={image:s,boxes:o,boxInd:l},c={method:a,extrapolationValue:i,cropSize:r};return z.runKernel(Dh,u,c)}var kre=W({cropAndResize_:wre});function Sre(e){let t=_(e,"image","flipLeftRight","float32");D(t.rank===4,()=>"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,"."));let n={image:t};return z.runKernel(Ph,n,{})}var Ire=W({flipLeftRight_:Sre});function $re(e){let t=_(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];D(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, but got rank ".concat(t.rank,".")),D(r===1,()=>"Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ".concat(r,"."));let a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,aa(t,a)}var Cre=W({grayscaleToRGB_:$re});function Ere(e,t,n=0,r=.5){let a=_(e,"image","rotateWithOffset","float32");D(a.rank===4,()=>"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,"."));let i={image:a},s={radians:t,fillValue:n,center:r};return z.runKernel(wp,i,s)}var Tre=W({rotateWithOffset_:Ere});function Np(e,t,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=e.shape[0];return n=Math.min(n,s),D(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),D(e.rank===2,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),D(e.shape[1]===4,()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),D(t.rank===1,()=>"scores must be a 1D tensor"),D(t.shape[0]===s,()=>"scores has incompatible shape with boxes. Expected ".concat(s,", but was ").concat(t.shape[0])),D(0<=i&&i<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(i,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}function Nre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let i=_(e,"boxes","nonMaxSuppression","float32"),s=_(t,"scores","nonMaxSuppression","float32"),o=Np(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return z.runKernel(Jh,{boxes:i,scores:s},l)}var _re=W({nonMaxSuppression_:Nre});function Are(e,t,n){let r=Rre(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Rre(e,t,n){return Fre(e,t,n||Dre)}function Dre(e,t){return e>t?1:e<t?-1:0}function Fre(e,t,n){let r=0,a=e.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);let o=n(t,e[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}function sP(e,t,n,r,a){return N2(e,t,n,r,a,0)}function oP(e,t,n,r,a,i){return N2(e,t,n,r,a,0,!1,i,!0)}function lP(e,t,n,r,a,i){return N2(e,t,n,r,a,i,!0)}function N2(e,t,n,r,a,i,s=!1,o=!1,l=!1){let d=[];for(let g=0;g<t.length;g++)t[g]>a&&d.push({score:t[g],boxIndex:g,suppressBeginIndex:0});d.sort(NA);let u=i>0?-.5/i:0,c=[],h=[];for(;c.length<n&&d.length>0;){let g=d.pop(),{score:b,boxIndex:y,suppressBeginIndex:v}=g;if(b<a)break;let x=!1;for(let w=c.length-1;w>=v;--w){let $=Mre(e,y,c[w]);if($>=r){x=!0;break}if(g.score=g.score*Ore(r,u,$),g.score<=a)break}g.suppressBeginIndex=c.length,x||(g.score===b?(c.push(y),h.push(g.score)):g.score>a&&Are(d,g,NA))}let p=c.length,f=n-p;o&&f>0&&(c.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));let m={selectedIndices:c};return s&&(m.selectedScores=h),l&&(m.validOutputs=p),m}function Mre(e,t,n){let r=e.subarray(t*4,t*4+4),a=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),d=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),c=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(o-i)*(l-s),f=(c-d)*(h-u);if(p<=0||f<=0)return 0;let m=Math.max(i,d),g=Math.max(s,u),b=Math.min(o,c),y=Math.min(l,h),v=Math.max(b-m,0)*Math.max(y-g,0);return v/(p+f-v)}function Ore(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function NA(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function Lre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let i=_(e,"boxes","nonMaxSuppressionAsync"),s=_(t,"scores","nonMaxSuppressionAsync"),o=Np(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),d=l[0],u=l[1],{selectedIndices:c}=sP(d,u,n,r,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),mt(c,"int32")}var Pre=Lre;function zre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){let s=_(e,"boxes","nonMaxSuppression"),o=_(t,"scores","nonMaxSuppression"),l=Np(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;let d={boxes:s,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},c=z.runKernel(tp,d,u);return{selectedIndices:c[0],selectedScores:c[1]}}var Bre=W({nonMaxSuppressionWithScore_:zre});async function Wre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){let s=_(e,"boxes","nonMaxSuppressionAsync"),o=_(t,"scores","nonMaxSuppressionAsync"),l=Np(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;let d=await Promise.all([s.data(),o.data()]),u=d[0],c=d[1],{selectedIndices:h,selectedScores:p}=lP(u,c,n,r,a,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:mt(h,"int32"),selectedScores:mt(p)}}var Vre=Wre;function Ure(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){let s=_(e,"boxes","nonMaxSuppression"),o=_(t,"scores","nonMaxSuppression"),l=Np(s,o,n,r,a,null),d=l.maxOutputSize,u=l.iouThreshold,c=l.scoreThreshold,h={boxes:s,scores:o},p={maxOutputSize:d,iouThreshold:u,scoreThreshold:c,padToMaxOutputSize:i},f=z.runKernel(ep,h,p);return{selectedIndices:f[0],validOutputs:f[1]}}var Hre=W({nonMaxSuppressionPadded_:Ure});async function jre(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){let s=_(e,"boxes","nonMaxSuppressionAsync"),o=_(t,"scores","nonMaxSuppressionAsync"),l=Np(s,o,n,r,a,null),d=l.maxOutputSize,u=l.iouThreshold,c=l.scoreThreshold,[h,p]=await Promise.all([s.data(),o.data()]),{selectedIndices:f,validOutputs:m}=oP(h,p,d,u,c,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:mt(f,"int32"),validOutputs:Ae(m,"int32")}}var Gre=jre;function qre(e,t,n=!1,r=!1){let a=_(e,"images","resizeBilinear");D(a.rank===3||a.rank===4,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")),D(t.length===2,()=>"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")),D(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=j(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},d=z.runKernel(cd,o,l);return s?j(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var uP=W({resizeBilinear_:qre});function Kre(e,t,n=!1,r=!1){let a=_(e,"images","resizeNearestNeighbor");D(a.rank===3||a.rank===4,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")),D(t.length===2,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")),D(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),D(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=j(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},d=z.runKernel(dd,o,l);return s?j(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var dP=W({resizeNearestNeighbor_:Kre});function Xre(e,t="binary",n=!1,r=.5){let a=_(e,"image","threshold"),i=.2989,s=.587,o=.114,l=a.shape[0]*a.shape[1],d=U(mt([r]),255),u,c,h,p;if(D(a.rank===3,()=>"Error in threshold: image must be rank 3,but got rank ".concat(a.rank,".")),D(a.shape[2]===3||a.shape[2]===1,()=>"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(a.shape[2],".")),D(a.dtype==="int32"||a.dtype==="float32",()=>"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(a.dtype,".")),D(t==="otsu"||t==="binary",()=>"Method must be binary or otsu, but was ".concat(t)),a.shape[2]===3){[u,c,h]=Br(a,[1,1,1],-1);let m=U(u,i),g=U(c,s),b=U(h,o);p=ne(ne(m,g),b)}else p=e;if(t==="otsu"){let m=P$(ce(ax(p),"int32"),wr([]),256);d=Yre(m,l)}let f=n?jo(p,d):Rr(p,d);return ce(U(f,255),"int32")}function Yre(e,t){let n=mt([-1]),r=mt([0]),a=mt([0]),i,s,o,l,d,u;for(let c=0;c<e.size-1;c++){i=Qe(e,0,c+1),s=Qe(e,c+1),d=Se(Ie(i),t),u=Se(Ie(s),t);let h=Ie(U(i,Ql(0,i.size)));o=Se(h,Ie(i));let p=ca(s.shape,i.size),f=ne(Ql(0,s.size),p),m=U(s,f);l=Se(Ie(m),Ie(s));let g=we(o,l),b=we(o,l),y=U(d,u);a=U(U(y,g),b);let v=Rr(a,r);r=Wn(v,a,r),n=Wn(v,mt([c]),n)}return n}var Zre=W({threshold_:Xre});function Qre(e,t,n="nearest",r="constant",a=0,i){let s=_(e,"image","transform","float32"),o=_(t,"transforms","transform","float32");D(s.rank===4,()=>"Error in transform: image must be rank 4,but got rank ".concat(s.rank,".")),D(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),D(i==null||i.length===2,()=>"Error in transform: outputShape must be [height, width] or null, but got ".concat(i,"."));let l={image:s,transforms:o},d={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return z.runKernel(yp,l,d)}var Jre=W({transform_:Qre});function eae(e,t,n){let r=_(e,"a","bandPart");D(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));let a=r.shape,[i,s]=r.shape.slice(-2),o,l;typeof t=="number"?(D(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),D(t<=i,()=>"bandPart(): numLower (".concat(t,") must not be greater than the number of rows (").concat(i,").")),o=_(t<0?i:t,"numLower","bandPart")):(D(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Wn(Zc(t,0),i,Co(t,i))),typeof n=="number"?(D(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),D(n<=s,()=>"bandPart(): numUpper (".concat(n,") must not be greater than the number of columns (").concat(s,").")),l=_(n<0?s:n,"numUpper","bandPart")):(D(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Wn(Zc(n,0),s,Co(n,s)));let d=j(Ql(0,i,1,"int32"),[-1,1]),u=Ql(0,s,1,"int32"),c=we(d,u),h=ei(jo(c,o),Os(c,Rt(l))),p=Kt([i,s],r.dtype);return j(Cn(tn(j(r,[-1,i,s])).map(f=>Wn(h,f,p))),a)}var tae=W({bandPart_:eae});function nae(e){let t;if(Array.isArray(e)){t=!1,D(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let a=e[0].shape[0];for(let i=1;i<e.length;++i)D(e[i].shape[0]===a,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: (".concat(e[i].shape[0]," vs. ").concat(a,")"))}else t=!0,e=Br(e,e.shape[0],0).map(a=>Ko(a,[0]));D(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds number of dimensions (").concat(e[0].shape[0],")."));let n=[],r=e;for(let a=0;a<e.length;++a)n.push(z.tidy(()=>{let i=r[a];if(a>0)for(let s=0;s<a;++s){let o=U(Ie(U(n[s],i)),n[s]);i=we(i,o)}return Se(i,Ip(i,"euclidean"))}));return t?Cn(n,0):n}var rae=W({gramSchmidt_:nae});function aae(e,t=!1){if(D(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),e.rank===2)return _A(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((l,d)=>l*d),r=tn(j(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(l=>{let[d,u]=_A(l,t);a.push(d),i.push(u)});let s=j(Cn(a,0),e.shape),o=j(Cn(i,0),e.shape);return[s,o]}}function _A(e,t=!1){return z.tidy(()=>{D(e.shape.length===2,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));let n=e.shape[0],r=e.shape[1],a=Y0(n),i=Ki(e),s=Xi([[1]],[1,1]),o=Ki(s),l=n>=r?r:n;for(let d=0;d<l;++d){let u=i,c=o,h=a;[o,i,a]=z.tidy(()=>{let p=Qe(i,[d,d],[n-d,1]),f=Ip(p),m=Qe(i,[d,d],[1,1]),g=Wn(Rr(m,0),Xi([[-1]]),Xi([[1]])),b=we(m,U(g,f)),y=Se(p,b);y.shape[0]===1?o=Ki(s):o=kt([s,Qe(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);let v=Rt(Se(Ge(g,b),f)),x=Qe(i,[d,0],[n-d,r]),w=U(v,o),$=Ke(o);if(d===0)i=we(x,Ge(w,Ge($,x)));else{let A=we(x,Ge(w,Ge($,x)));i=kt([Qe(i,[0,0],[d,r]),A],0)}let C=Ke(w),E=Qe(a,[0,d],[n,a.shape[1]-d]);if(d===0)a=we(E,Ge(Ge(E,o),C));else{let A=we(E,Ge(Ge(E,o),C));a=kt([Qe(a,[0,0],[n,d]),A],1)}return[o,i,a]}),Be([u,c,h])}return!t&&n>r&&(a=Qe(a,[0,0],[n,r]),i=Qe(i,[0,0],[r,r])),[a,i]})}var iae=W({qr_:aae}),vr;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(vr||(vr={}));function sae(e,t,n=vr.SUM_BY_NONZERO_WEIGHTS){let r=_(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=_(t,"weights","computeWeightedLoss"));let i=a==null?r:U(r,a);if(n===vr.NONE)return i;if(n===vr.SUM)return Ie(i);if(n===vr.MEAN){if(a==null)return qt(i);{let s=r.size/a.size,o=Se(Ie(i),Ie(a));return s>1?Se(o,Ae(s)):o}}if(n===vr.SUM_BY_NONZERO_WEIGHTS){if(a==null)return Se(Ie(i),Ae(r.size));{let s=U(a,ia(r.shape)),o=ce(Ie(Zl(s,Ae(0))),"float32");return Se(Ie(i),o)}}throw Error("Unknown reduction: ".concat(n))}var Ls=W({computeWeightedLoss_:sae});function oae(e,t,n,r=vr.SUM_BY_NONZERO_WEIGHTS){let a=_(e,"labels","absoluteDifference"),i=_(t,"predictions","absoluteDifference"),s=null;n!=null&&(s=_(n,"weights","absoluteDifference")),_r(a.shape,i.shape,"Error in absoluteDifference: ");let o=cn(we(a,i));return Ls(o,s,r)}var lae=W({absoluteDifference_:oae});function uae(e,t,n,r,a=vr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","cosineDistance"),s=_(t,"predictions","cosineDistance"),o=null;r!=null&&(o=_(r,"weights","cosineDistance")),_r(i.shape,s.shape,"Error in cosineDistance: ");let l=Ae(1),d=we(l,Ie(U(i,s),n,!0));return Ls(d,o,a)}var dae=W({cosineDistance_:uae});function cae(e,t,n,r=vr.SUM_BY_NONZERO_WEIGHTS){let a=_(e,"labels","hingeLoss"),i=_(t,"predictions","hingeLoss"),s=null;n!=null&&(s=_(n,"weights","hingeLoss")),_r(a.shape,i.shape,"Error in hingeLoss: ");let o=Ae(1);a=we(U(Ae(2),a),o);let l=gt(we(o,U(a,i)));return Ls(l,s,r)}var hae=W({hingeLoss_:cae});function pae(e,t,n,r=1,a=vr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","huberLoss"),s=_(t,"predictions","huberLoss"),o=null;n!=null&&(o=_(n,"weights","huberLoss")),_r(i.shape,s.shape,"Error in huberLoss: ");let l=Ae(r),d=cn(we(s,i)),u=Co(d,l),c=we(d,u),h=ne(U(Ae(.5),xt(u)),U(l,c));return Ls(h,o,a)}var fae=W({huberLoss_:pae});function mae(e,t,n,r=1e-7,a=vr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","logLoss"),s=_(t,"predictions","logLoss"),o=null;n!=null&&(o=_(n,"weights","logLoss")),_r(i.shape,s.shape,"Error in logLoss: ");let l=Ae(1),d=Ae(r),u=Rt(U(i,ma(ne(s,d)))),c=U(we(l,i),ma(ne(we(l,s),d))),h=we(u,c);return Ls(h,o,a)}var gae=W({logLoss_:mae});function bae(e,t,n,r=vr.SUM_BY_NONZERO_WEIGHTS){let a=_(e,"labels","meanSquaredError"),i=_(t,"predictions","meanSquaredError"),s=null;n!=null&&(s=_(n,"weights","meanSquaredError")),_r(a.shape,i.shape,"Error in meanSquaredError: ");let o=cx(a,i);return Ls(o,s,r)}var yae=W({meanSquaredError_:bae});function vae(e,t){let n=_(e,"labels","sigmoidCrossEntropyWithLogits"),r=_(t,"logits","sigmoidCrossEntropyWithLogits");_r(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let a=gt(r),i=U(r,n),s=vg(Cr(Rt(cn(r))));return ne(we(a,i),s)}function xae(e,t,n,r=0,a=vr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"multiClassLabels","sigmoidCrossEntropy"),s=_(t,"logits","sigmoidCrossEntropy"),o=null;if(n!=null&&(o=_(n,"weights","sigmoidCrossEntropy")),_r(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let d=Ae(r),u=Ae(1),c=Ae(.5);i=ne(U(i,we(u,d)),U(c,d))}let l=vae(i,s);return Ls(l,o,a)}var wae=W({sigmoidCrossEntropy_:xae});function kae(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ".concat(t.rank," and dim was ").concat(n));return Qi((r,a,i)=>{let s=J0(a,[n],!0),o=we(ce(a,"float32"),s);i([r,o]);let l=Rt(U(o,r));return{value:Ie(l,[n]),gradFunc:(d,u)=>{let[c,h]=u,p=Yl(d.shape,[n]);return[U(j(d,p),we(ce(c,"float32"),Cr(h))),U(j(d,p),we(Cr(h),ce(c,"float32")))]}}})(e,t)}function Sae(e,t,n,r=0,a=vr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"onehotLabels","softmaxCrossEntropy"),s=_(t,"logits","softmaxCrossEntropy"),o=null;if(n!=null&&(o=_(n,"weights","softmaxCrossEntropy")),_r(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let d=Ae(r),u=Ae(1),c=Ae(i.shape[1]);i=ne(U(i,we(u,d)),Se(d,c))}let l=kae(i,s);return Ls(l,o,a)}var Iae=W({softmaxCrossEntropy_:Sae});function $ae(e,t,n,r){let a=_(e,"indices","sparseFillEmptyRows","int32"),i=_(t,"values","sparseFillEmptyRows"),s=_(n,"denseShape","sparseFillEmptyRows","int32"),o=_(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(i.rank!==1)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(s.rank!==1)throw new Error("Dense shape should be Tensor1D but received shape ".concat(s.shape));if(o.rank!==0)throw new Error("Default value should be a scalar but received shape ".concat(o.shape));let l={indices:a,values:i,denseShape:s,defaultValue:o},d=z.runKernel(Jm,l);return{outputIndices:d[0],outputValues:d[1],emptyRowIndicator:d[2],reverseIndexMap:d[3]}}var Cae=W({sparseFillEmptyRows_:$ae});function Eae(e,t,n){let r=_(e,"inputIndices","sparseReshape","int32"),a=_(t,"inputShape","sparseReshape","int32"),i=_(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(a.rank!==1)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(i.rank!==1)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));let s={inputIndices:r,inputShape:a,newShape:i},o=z.runKernel(fp,s);return{outputIndices:o[0],outputShape:o[1]}}var Tae=W({sparseReshape_:Eae});function Nae(e,t,n){let r=_(e,"data","sparseSegmentMean"),a=_(t,"indices","sparseSegmentMean","int32"),i=_(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(i.rank!==1)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));let s={data:r,indices:a,segmentIds:i};return z.runKernel(eg,s)}var _ae=W({sparseSegmentMean_:Nae});function Aae(e,t,n){let r=_(e,"data","sparseSegmentSum"),a=_(t,"indices","sparseSegmentSum","int32"),i=_(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(i.rank!==1)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));let s={data:r,indices:a,segmentIds:i};return z.runKernel(tg,s)}var Rae=W({sparseSegmentSum_:Aae});function Dae(e,t,n,r,a,i,s,o){let l=_(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error("Data must be a vector, saw: ".concat(l.shape));let d=_(t,"dataSplits","stringNGrams");if(d.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:s,preserveShortSequences:o},c={data:l,dataSplits:d},h=z.runKernel(ag,c,u);return{nGrams:h[0],nGramsSplits:h[1]}}var Fae=W({stringNGrams_:Dae});function Mae(e,t,n=!0){let r=_(e,"input","stringSplit","string"),a=_(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(a.rank!==0)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));let i={skipEmpty:n},s={input:r,delimiter:a},o=z.runKernel(ig,s,i);return{indices:o[0],values:o[1],shape:o[2]}}var Oae=W({stringSplit_:Mae});function Lae(e,t){let n=_(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let a={input:n};return z.runKernel(sg,a,r)}var Pae=W({stringToHashBucketFast_:Lae});function zae(e,t,n,r=!0){let a=_(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return z.runKernel(rg,{x:a},i)}var Bae=W({staticRegexReplace_:zae}),cP={fft:$g,ifft:th,rfft:Cg,irfft:dx},hP={hammingWindow:gre,hannWindow:aP,frame:iP,stft:xre},$a={flipLeftRight:Ire,grayscaleToRGB:Cre,resizeNearestNeighbor:dP,resizeBilinear:uP,rotateWithOffset:Tre,cropAndResize:kre,nonMaxSuppression:_re,nonMaxSuppressionAsync:Pre,nonMaxSuppressionWithScore:Bre,nonMaxSuppressionWithScoreAsync:Vre,nonMaxSuppressionPadded:Hre,nonMaxSuppressionPaddedAsync:Gre,threshold:Zre,transform:Jre},_2={bandPart:tae,gramSchmidt:rae,qr:iae},pP={absoluteDifference:lae,computeWeightedLoss:Ls,cosineDistance:dae,hingeLoss:hae,huberLoss:fae,logLoss:gae,meanSquaredError:yae,sigmoidCrossEntropy:wae,softmaxCrossEntropy:Iae},fP={sparseFillEmptyRows:Cae,sparseReshape:Tae,sparseSegmentMean:_ae,sparseSegmentSum:Rae},mP={stringNGrams:Fae,stringSplit:Oae,stringToHashBucketFast:Pae,staticRegexReplace:Bae},le={};We(le,{Serializable:()=>gP,SerializationMap:()=>pl,registerClass:()=>bP});var gP=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},pl=class{constructor(){this.classNameMap={}}static getMap(){return pl.instance==null&&(pl.instance=new pl),pl.instance}static register(e){pl.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function bP(e){D(e.className!=null,()=>"Class being registered does not have the static className property defined."),D(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),D(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),pl.register(e)}var Ps=class extends gP{minimize(e,t=!1,n){let{value:r,grads:a}=this.computeGradients(e,n);if(n!=null){let i=n.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(i)}else this.applyGradients(a);return Be(a),t?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return yL(e,t)}dispose(){this.iterations_!=null&&Be(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ae(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class ".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Ps,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var A2=class extends Ps{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],n==null&&(this.epsilon=z.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=z.registeredVariables[t],a=!1;this.accumulatedGrads[n]==null&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:G(()=>et(r).variable(a))}),this.accumulatedUpdates[n]==null&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:G(()=>et(r).variable(a))});let i=Array.isArray(e)?e[n].tensor:e[t];if(i==null)return;let s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;G(()=>{let l=ne(U(s,this.rho),U(xt(i),1-this.rho)),d=U(Se(Jn(ne(o,this.epsilon)),Jn(ne(s,this.epsilon))),i),u=ne(U(o,this.rho),U(xt(d),1-this.rho));s.assign(l),o.assign(u);let c=ne(U(d,-this.learningRate),r);r.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Be(this.accumulatedGrads.map(e=>e.variable)),Be(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},R2=class extends Ps{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=z.registeredVariables[t];this.accumulatedGrads[n]==null&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:G(()=>ca(r.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(a==null)return;let i=this.accumulatedGrads[n].variable;G(()=>{let s=ne(i,xt(a));i.assign(s);let o=ne(U(Se(a,Jn(ne(s,z.backend.epsilon()))),-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Be(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulatedGrads=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},D2=class extends Ps{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],G(()=>{this.accBeta1=Ae(t).variable(),this.accBeta2=Ae(n).variable()}),r==null&&(this.epsilon=z.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);G(()=>{let n=we(1,this.accBeta1),r=we(1,this.accBeta2);t.forEach((a,i)=>{let s=z.registeredVariables[a],o=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:"".concat(a,"/m"),variable:G(()=>et(s).variable(o))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:"".concat(a,"/v"),variable:G(()=>et(s).variable(o))});let l=Array.isArray(e)?e[i].tensor:e[a];if(l==null)return;let d=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,c=ne(U(d,this.beta1),U(l,1-this.beta1)),h=ne(U(u,this.beta2),U(xt(l),1-this.beta2)),p=Se(c,n),f=Se(h,r);d.assign(c),u.assign(h);let m=ne(U(Se(p,ne(Jn(f),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(U(this.accBeta1,this.beta1)),this.accBeta2.assign(U(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Be(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Be(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),G(()=>{this.accBeta1.assign(As(this.beta1,this.iterations_+1)),this.accBeta2.assign(As(this.beta2,this.iterations_+1))});let t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},F2=class extends Ps{static get className(){return"Adamax"}constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],G(()=>{this.iteration=Ae(0).variable(),this.accBeta1=Ae(t).variable()}),r==null&&(this.epsilon=z.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);G(()=>{let n=we(1,this.accBeta1),r=Se(-this.learningRate,ne(U(this.iteration,this.decay),1));t.forEach((a,i)=>{let s=z.registeredVariables[a],o=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:"".concat(a,"/m"),variable:et(s).variable(o)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:"".concat(a,"/v"),variable:et(s).variable(o)});let l=Array.isArray(e)?e[i].tensor:e[a];if(l==null)return;let d=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,c=ne(U(d,this.beta1),U(l,1-this.beta1)),h=U(u,this.beta2),p=cn(l),f=rs(h,p);d.assign(c),u.assign(f);let m=ne(U(Se(r,n),Se(c,ne(f,this.epsilon))),s);s.assign(m)}),this.iteration.assign(ne(this.iteration,1)),this.accBeta1.assign(U(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Be(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Be(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},kx=class extends Ps{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(r==null)return;let a=z.registeredVariables[t];G(()=>{let i=ne(U(this.c,r),a);a.assign(i)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=In(Ae(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}},M2=class extends kx{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Ae(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=z.registeredVariables[t];this.accumulations[n]==null&&(this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:G(()=>et(r).variable(!1))});let a=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];i!=null&&G(()=>{let s,o=ne(U(this.m,a),i);this.useNesterov?s=ne(U(this.c,ne(i,U(o,this.m))),r):s=ne(U(this.c,o),r),a.assign(o),r.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Be(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulations=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},O2=class extends Ps{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,r==null&&(this.epsilon=z.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=z.registeredVariables[t],a=!1;this.accumulatedMeanSquares[n]==null&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:G(()=>et(r).variable(a))}),this.accumulatedMoments[n]==null&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:G(()=>et(r).variable(a))}),this.accumulatedMeanGrads[n]==null&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:G(()=>et(r).variable(a))});let i=Array.isArray(e)?e[n].tensor:e[t];if(i==null)return;let s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;G(()=>{let l=ne(U(s,this.decay),U(xt(i),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[n].variable,u=ne(U(d,this.decay),U(i,1-this.decay)),c=Se(U(i,this.learningRate),Jn(we(l,ne(xt(u),this.epsilon)))),h=ne(U(o,this.momentum),c);s.assign(l),d.assign(u),o.assign(h);let p=we(r,h);r.assign(p)}else{let d=ne(U(s,this.decay),U(xt(i),1-this.decay)),u=ne(U(o,this.momentum),Se(U(i,this.learningRate),Jn(ne(d,this.epsilon))));s.assign(d),o.assign(u);let c=we(r,u);r.assign(c)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Be(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Be(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Be(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},Wae=[A2,R2,D2,F2,M2,O2,kx];function Vae(){for(let e of Wae)bP(e)}var Yn={};We(Yn,{CompositeArrayBuffer:()=>ts,browserFiles:()=>Xae,browserHTTPRequest:()=>eie,concatenateArrayBuffers:()=>xQ,copyModel:()=>VQ,decodeWeights:()=>V3,encodeWeights:()=>gQ,fromMemory:()=>nie,fromMemorySync:()=>kP,getLoadHandlers:()=>TQ,getModelArtifactsForJSON:()=>S$,getModelArtifactsForJSONSync:()=>H3,getModelArtifactsInfoForJSON:()=>pg,getSaveHandlers:()=>EQ,getWeightSpecs:()=>j3,http:()=>P2,isHTTPScheme:()=>Wk,listModels:()=>BQ,loadWeights:()=>Yae,moveModel:()=>UQ,registerLoadRouter:()=>CQ,registerSaveRouter:()=>$Q,removeModel:()=>WQ,weightsLoaderFactory:()=>vP,withSaveHandler:()=>rie,withSaveHandlerSync:()=>aie});var Uae="model",Hae=".json",jae=".weights.bin";function AA(e){return new Promise(t=>setTimeout(t)).then(e)}var rh=class{constructor(e){if(!Z().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(rh.URL_SCHEME)&&(e=e.slice(rh.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Uae),this.modelJsonFileName=e+Hae,this.weightDataFileName=e+jae}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=ts.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=U3(e,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=i,await AA(()=>s.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let o=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;o.download=this.weightDataFileName,o.href=n,await AA(()=>o.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:pg(e)}}}};rh.URL_SCHEME="downloads://";var Gae=class{constructor(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=r=>{let a=JSON.parse(r.target.result),i=a.modelTopology;if(i==null){t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));return}if(a.weightsManifest==null){t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}let s=S$(a,o=>this.loadWeights(o));e(s)},n.onerror=r=>t("Failed to read model topology and weights manifest JSON from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let i of e)t.push(...i.weights),n.push(...i.paths);let r=this.checkManifestAndWeightFiles(e),a=n.map(i=>this.loadWeightsFile(i,r[i]));return Promise.all(a).then(i=>[t,i])}loadWeightsFile(e,t){return new Promise((n,r)=>{let a=new FileReader;a.onload=i=>{let s=i.target.result;n(s)},a.onerror=i=>r("Failed to weights data from file of path '".concat(e,"'.")),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(a=>TA(a.name)),r={};for(let a of e)a.paths.forEach(i=>{let s=TA(i);if(t.indexOf(s)!==-1)throw new Error("Duplicate file basename found in weights manifest: '".concat(s,"'"));if(t.push(s),n.indexOf(s)===-1)throw new Error("Weight file with basename '".concat(s,"' is not provided."));r[i]=this.weightsFiles[n.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest (".concat(t.length,") and the number of weight files provided (").concat(this.weightsFiles.length,")."));return r}},qae=e=>Z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rh.URL_SCHEME)?Kae(e.slice(rh.URL_SCHEME.length)):null;Zt.registerSaveRouter(qae);function Kae(e="model"){return new rh(e)}function Xae(e){return new Gae(e)}function RA(e,t,n,r){s(e),n=n==null?0:n,r=r==null?1:r,o(n,r);let a=0,i=l=>(l.then(d=>{let u=n+ ++a/e.length*(r-n);return t(u),d}),l);function s(l){D(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,d){D(l>=0&&l<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction ".concat(l)),D(d>=0&&d<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction ".concat(d)),D(d>=l,()=>"startFraction must be no more than endFraction, but got startFraction ".concat(l," and endFraction ").concat(d))}return Promise.all(e.map(i))}async function yP(e,t){t==null&&(t={});let n=t.fetchFunc==null?Z().platform.fetch:t.fetchFunc,r=e.map(d=>n(d,t.requestInit,{isBinary:!0})),a=0,i=.5,s=(t.onProgress==null?await Promise.all(r):await RA(r,t.onProgress,a,i)).map(d=>d.arrayBuffer()),o=.5,l=1;return t.onProgress==null?await Promise.all(s):await RA(s,t.onProgress,o,l)}async function Yae(e,t="",n,r){return vP(a=>yP(a,{requestInit:r}))(e,t,n)}function vP(e){return async(t,n="",r)=>{let a=t.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],o=[];if(t.forEach((p,f)=>{let m=0;p.weights.forEach(g=>{let b="quantization"in g?g.quantization.dtype:g.dtype,y=Mk[b]*At(g.shape),v=()=>{a[f]=!0,i[f]==null&&(i[f]=[]),i[f].push({manifestEntry:g,groupOffset:m,sizeBytes:y})};r!=null?r.forEach((x,w)=>{x===g.name&&(v(),s[w]=!0)}):v(),o.push(g.name),m+=y})}),!s.every(p=>p)){let p=r.filter((f,m)=>!s[m]);throw new Error("Could not find weights in manifest with names: ".concat(p.join(", "),". \nManifest JSON has weights with names: ").concat(o.join(", "),"."))}let l=a.reduce((p,f,m)=>(f&&p.push(m),p),[]),d=[];l.forEach(p=>{t[p].paths.forEach(f=>{let m=n+(n.endsWith("/")?"":"/")+f;d.push(m)})});let u=await e(d),c={},h=0;return l.forEach(p=>{let f=t[p].paths.length,m=new ts(u.slice(h,h+f));i[p].forEach(g=>{let b=m.slice(g.groupOffset,g.groupOffset+g.sizeBytes),y=V3(b,[g.manifestEntry]);for(let v in y)c[v]=y[v]}),h+=f}),c}}var Zae="application/octet-stream",Qae="application/json",L2=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(D(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Z().platform.fetch,D(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&D(e.length===2,()=>"URL paths for http must have a length of 2, (actual length is ".concat(e.length,").")),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=U3(e,n);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:Qae}),"model.json"),e.weightData!=null){let i=ts.join(e.weightData);t.body.append("model.weights.bin",new Blob([i],{type:Zae}),"model.weights.bin")}let a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:pg(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(a.status,"."))}async load(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ").concat(e.status,". Please verify this URL points to the model JSON of the model to load."));let t;try{t=await e.json()}catch(a){let i="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}let n=t.modelTopology,r=t.weightsManifest;if(n==null&&r==null)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));return S$(t,a=>this.loadWeights(a))}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=Jae(t),a=this.weightPathPrefix||n,i=j3(e),s=[],o=[];for(let d of e)for(let u of d.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(u)):s.push(a+u+r);this.weightUrlConverter&&s.push(...await Promise.all(o));let l=await yP(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,l]}};L2.URL_SCHEME_REGEX=/^https?:\/\//;function Jae(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}function Wk(e){return e.match(L2.URL_SCHEME_REGEX)!=null}var xP=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>Wk(r)):n=Wk(e),n)return P2(e,t)}return null};Zt.registerSaveRouter(xP);Zt.registerLoadRouter(xP);function P2(e,t){return new L2(e,t)}function eie(e,t){return P2(e,t)}var e1=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},wP=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},tie=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}};function nie(e,t,n,r){let a=arguments;return new tie(kP(...a))}function kP(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new e1(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e1({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e1({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function rie(e){return new wP(e)}function aie(e){return new wP(e)}var SP={};We(SP,{confusionMatrix:()=>sie});function iie(e,t,n){let r=_(e,"labels","confusionMatrix"),a=_(t,"predictions","confusionMatrix");D(n==null||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got ".concat(n)),D(r.rank===1,()=>"Expected the rank of labels to be 1, but got ".concat(r.rank)),D(a.rank===1,()=>"Expected the rank of predictions to be 1, but got ".concat(a.rank)),D(r.shape[0]===a.shape[0],()=>"Mismatch in the number of examples: ".concat(r.shape[0]," vs. ").concat(a.shape[0],". Labels and predictions should have the same number of elements.")),D(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got ".concat(n));let i=Qc(ce(r,"int32"),n),s=Qc(ce(a,"int32"),n),o=Ke(i),l=Ge(o,s);return ce(l,"int32")}var sie=W({confusionMatrix_:iie}),Eg={};We(Eg,{draw:()=>fie,fromPixels:()=>mie,fromPixelsAsync:()=>cie,toPixels:()=>pie});var sl,DA=!1;function IP(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,s=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)o=!0;else throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));if(sv(iv,z.backendName)!=null){let h={pixels:e},p={numChannels:t};return z.runKernel(iv,h,p)}let[l,d]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],u;if(s)u=e.getContext("2d").getImageData(0,0,l,d).data;else if(r||n)u=e.data;else if(i||a||o){if(sl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")sl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else sl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});sl.canvas.width=l,sl.canvas.height=d,sl.drawImage(e,0,0,l,d),u=sl.getImageData(0,0,l,d).data}let c;if(t===4)c=new Int32Array(u);else{let h=l*d;c=new Int32Array(h*t);for(let p=0;p<h;p++)for(let f=0;f<t;++f)c[p*t+f]=u[p*4+f]}return hx(c,[d,l,t],"int32")}function oie(e){return e!=null&&e.data instanceof Uint8Array}function lie(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function uie(e){return e!=null&&e.width!==0&&e.height!==0}function die(e){return lie()&&!(e instanceof ImageBitmap)&&uie(e)&&!oie(e)}async function cie(e,t=3){let n=null;if(Z().getBool("WRAP_TO_IMAGEBITMAP")&&die(e)){let r;try{r=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(a){r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return IP(n,t)}function $P(e){if(e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));let t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got ".concat(t));if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error("Unsupported type for toPixels: ".concat(e.dtype,". Please use float32 or int32 tensors."))}function hie(e){let t=(e==null?void 0:e.alpha)||1;if(t>1||t<0)throw new Error("Alpha value ".concat(t," is suppoed to be in range [0 - 1]."))}async function pie(e,t){let n=_(e,"img","toPixels");if(!(e instanceof Ue)){let d=n;n=ce(d,"int32"),d.dispose()}$P(n);let[r,a]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(a*r*4);for(let d=0;d<r*a;++d){let u=[0,0,0,255];for(let h=0;h<i;h++){let p=s[d*i+h];if(n.dtype==="float32"){if(p<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(p,"."))}else if(n.dtype==="int32"&&(p<0||p>255))throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(p,"."));i===1?(u[0]=p*o,u[1]=p*o,u[2]=p*o):u[h]=p*o}let c=d*4;l[c+0]=Math.round(u[0]),l[c+1]=Math.round(u[1]),l[c+2]=Math.round(u[2]),l[c+3]=Math.round(u[3])}if(t!=null){DA||(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),DA=!0),t.width=a,t.height=r;let d=t.getContext("2d"),u=new ImageData(l,a,r);d.putImageData(u,0,0)}return n!==e&&n.dispose(),l}function fie(e,t,n){let r=_(e,"img","draw");if(!(e instanceof Ue)){let s=r;r=ce(s,"int32"),s.dispose()}$P(r),hie(n==null?void 0:n.imageOptions);let a={image:r},i={canvas:t,options:n};z.runKernel(y$,a,i)}var mie=W({fromPixels_:IP}),z2={};We(z2,{prepareAndValidate:()=>CP});function CP(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(At(e.shape)===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));let a=t.shape,i=a[a.length-1],s=1;for(let c=0;c<a.length-1;++c)s*=a[c];let o=e.shape,l=a.slice();l.pop();let d=1;for(let c=i;c<n;++c)d*=o[c],l.push(o[c]);let u=[...vh(e.shape).map(c=>c/d),1].slice(0,i);return[l,s,d,u]}var En={};We(En,{assertParamsValid:()=>bie,computeFlatOffset:()=>kie,computeOutShape:()=>vie,getNormalizedAxes:()=>xie,isSliceContinous:()=>wie,maskToAxes:()=>yie,parseSliceParams:()=>MP,sliceInfo:()=>Sie,startForAxis:()=>DP,startIndicesWithElidedDims:()=>_P,stopForAxis:()=>FP,stopIndicesWithElidedDims:()=>AP,stridesForAxis:()=>RP,stridesWithElidedDims:()=>EP});var Vk=-2,gie=-1;function bie(e,t,n){let r=e.shape.length;D(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")),D(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,")."));for(let a=0;a<r;++a)D(t[a]+n[a]<=e.shape[a],()=>"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")"))}function yie(e){let t=[],n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function vie(e,t,n){let r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function EP(e,t,n,r){let a=[...e];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[t]=1:(a.splice(t,0,1),a.pop());return a}function TP(e,t,n){return n<=e?n:n-(t-1)}function NP(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function xie(e,t,n,r,a,i,s,o,l){let d=e.length,u=new Array(d),c=new Array(d),h=new Array(d);if(t.length&&n>0){let p=t[0],f=n+1;u=_P(s,p,f,r,e),c=AP(o,p,f,a,e),h=EP(i,p,f,e)}else for(let p=0;p<d;p++)u[p]=DP(s,r,i,e,p,l),c[p]=FP(o,a,i,e,p,l),h[p]=RP(i,p,l);return{begin:u,end:c,strides:h}}function _P(e,t,n,r,a){let i=[...a],s=NP(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{let l=TP(t,n,o),d=r[l];e&1<<l&&(d=0),i[o]=d}return i}function AP(e,t,n,r,a){let i=[...a],s=NP(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{let l=TP(t,n,o),d=r[l];e&1<<l&&(d=Number.MAX_SAFE_INTEGER),i[o]=d}for(let o=0;o<i.length;o++){let l=a[o];i[o]<0&&(i[o]+=l),i[o]=sm(0,i[o],a[o])}return i}function RP(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function DP(e,t,n,r,a,i){let s=t[a],o=n[a]||1;(e&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[a];return s<0&&(s+=l),s=sm(0,s,l-1),s}function FP(e,t,n,r,a,i){let s=t[a],o=n[a]||1;(e&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[a];return s<0&&(s+=l),o>0?s=sm(0,s,l):s=sm(-1,s,l-1),s}function wie(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function kie(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function MP(e,t,n){let r,a=e.shape.length;typeof t=="number"?r=[t,...new Array(a-1).fill(0)]:t.length<a?r=t.concat(new Array(a-t.length).fill(0)):r=t.slice(),r.forEach(s=>{D(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((s,o)=>s>=0?s:(D(s===-1,()=>"Negative size values should be exactly -1 but got ".concat(s," for the slice() size at index ").concat(o,".")),e.shape[o]-r[o])),[r,i]}function Sie(e,t,n,r,a,i,s,o,l){let d;if(r==null?(d=new Array(t.length),d.fill(1)):d=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,c={dims:d.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:d.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let y=0;y<c.dims;y++)u&&1<<y&o&&c.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(c.ellipsisMask|=1<<c.dims,c.dims++);let h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Iie(c,h);let p=!0,f=!0,m=!0,g=[],b=[];for(let y=0;y<e.length;++y){if(h.strides[y]===0)throw Error("strides[".concat(y,"] must be non-zero"));let v=!!(h.shrinkAxisMask&1<<y),x=e[y];if(x===-1){g.push(v?1:-1);continue}let w=[h.beginMask&1<<y,h.endMask&1<<y],$=[h.strides[y]>0?0:-1,h.strides[y]>0?x:x-1];if(v&&h.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[y]===1;let C=!!(h.beginMask&1<<y&&h.endMask&1<<y);if(h.beginValid&&h.endValid){if(v){let N=h.begin[y]<0?x+h.begin[y]:h.begin[y];if(h.begin[y]=N,h.end[y]=h.begin[y]+1,N<0||N>=x)throw Error("slice index ".concat(h.begin[y]," of dimension ").concat(y," out of bounds."))}else h.begin[y]=FA(h.begin[y],0,h.strides[y],x,w,$),h.end[y]=FA(h.end[y],1,h.strides[y],x,w,$);let R=h.strides[y]===1&&h.begin[y]===0&&h.end[y]===x;p=p&&R,f=f&&(y===0&&h.strides[y]===1||R)}else p=p&&h.strides[y]===1&&C,f=f&&(y===0&&h.strides[y]===1||C);let E,A=!1;if(h.beginValid&&h.endValid?(E=h.end[y]-h.begin[y],A=!0):v?(E=1,A=!0):C&&x>=0&&(h.strides[y]<0?E=-x:E=x,A=!0),A){let R;E===0||E<0!=h.strides[y]<0?R=0:R=Math.trunc(E/h.strides[y])+(E%h.strides[y]!==0?1:0),g.push(R)}else g.push(-1)}for(let y=0;y<h.finalShapeGatherIndices.length;++y){let v=h.finalShapeGatherIndices[y];v>=0?b.push(g[v]):v===Vk&&b.push(1)}return{finalShapeSparse:b.filter((y,v)=>h.finalShapeGatherIndices[v]!==Vk),finalShape:b,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function Iie(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(Vk),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input has only ").concat(t.dims," dims, ").concat(t.begin.length,"."));e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(gie),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function FA(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{let s=e<0?r+e:e;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var $ie="4.7.0",OP=class{static sgd(e){return new kx(e)}static momentum(e,t,n=!1){return new M2(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new O2(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new D2(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new A2(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new F2(e,t,n,r,a)}static adagrad(e,t=.1){return new R2(e,t)}},cl=OP,Cie=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e())();function B2(){return new Promise(e=>Cie(()=>e()))}var T={};We(T,{ERF_A1:()=>Wie,ERF_A2:()=>Vie,ERF_A3:()=>Uie,ERF_A4:()=>Hie,ERF_A5:()=>jie,ERF_P:()=>Bie,PARALLELIZE_THRESHOLD:()=>W2,RowPartitionType:()=>Wi,SELU_SCALE:()=>PP,SELU_SCALEALPHA:()=>LP,applyActivation:()=>xx,assertAndGetBroadcastShape:()=>St,assertAxesAreInnerMostDims:()=>Tee,assertParamsConsistent:()=>Eie,assignToTypedArray:()=>Zie,axesAreInnerMostDims:()=>Q$,calculateShapes:()=>GL,checkEinsumDimSizes:()=>rse,checkPadOnDimRoundingMode:()=>Ar,combineLocations:()=>pL,combineRaggedTensorToTensorShapes:()=>Nie,complexWithEvenIndex:()=>Kie,complexWithOddIndex:()=>Xie,computeConv2DInfo:()=>fg,computeConv3DInfo:()=>rL,computeDefaultPad:()=>D$,computeDilation2DInfo:()=>CJ,computeOptimalWindowSize:()=>Die,computeOutAndReduceShapes:()=>fL,computeOutShape:()=>Tie,computePool2DInfo:()=>nL,computePool3DInfo:()=>EJ,convertConv2DDataFormat:()=>aL,decodeEinsumEquation:()=>tse,eitherStridesOrDilationsAreOne:()=>ns,expandShapeToKeepDim:()=>Yl,exponent:()=>Jie,exponents:()=>Qie,fromStringArrayToUint8:()=>Ise,fromUint8ToStringArray:()=>Sse,getAxesPermutation:()=>mL,getBroadcastDims:()=>dL,getComplexWithIndex:()=>Yie,getEinsumComputePath:()=>ase,getEinsumPermutation:()=>nse,getFusedBiasGradient:()=>vx,getFusedDyActivation:()=>yx,getImageCenter:()=>Fie,getInnerMostAxes:()=>Nee,getPermuted:()=>Oie,getRaggedRank:()=>Aie,getReductionAxes:()=>gn,getReshaped:()=>Mie,getReshapedPermuted:()=>Lie,getRowPartitionTypesHelper:()=>_ie,getSliceBeginCoords:()=>Pie,getSliceSize:()=>zie,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>lse,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>use,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>dse,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>pse,getSparseReshapeInputOutputMismatchErrorMessage:()=>mse,getSparseReshapeInputOutputMultipleErrorMessage:()=>fse,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>cse,getSparseReshapeNegativeOutputDimErrorMessage:()=>hse,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>vse,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>gse,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>bse,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>yse,getUndoAxesPermutation:()=>J$,isIdentityPermutation:()=>ise,log:()=>zZ,mergeRealAndImagArrays:()=>Gie,prepareAndValidate:()=>CP,prepareSplitSize:()=>ose,segment_util:()=>zP,shouldFuse:()=>wx,slice_util:()=>En,splitRealAndImagArrays:()=>qie,stridesOrDilationsArePositive:()=>Kl,tupleValuesAreOne:()=>$o,upcastType:()=>Ra,validateDefaultValueShape:()=>Rie,validateInput:()=>fx,validateUpdateShape:()=>w2,warn:()=>Qs});function Eie(e,t){let n=e[0].length;e.forEach((a,i)=>{D(a.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(i,"] must be the same as the rank of the rest (").concat(n,")"))}),D(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));let r=e[0];e.forEach((a,i)=>{for(let s=0;s<n;s++)D(s===t||a[s]===r[s],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(i,"] (").concat(a,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(i,"."))})}function Tie(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Wi;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(Wi||(Wi={}));function Nie(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let a=1;a<n.length;++a){let i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(o))}else r[s]=i}return r}function _ie(e){let t={FIRST_DIM_SIZE:Wi.FIRST_DIM_SIZE,VALUE_ROWIDS:Wi.VALUE_ROWIDS,ROW_LENGTHS:Wi.ROW_LENGTHS,ROW_SPLITS:Wi.ROW_SPLITS,ROW_LIMITS:Wi.ROW_LIMITS,ROW_STARTS:Wi.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function Aie(e){return e.length===0?0:e[0]===Wi.FIRST_DIM_SIZE?e.length-1:e.length}function Rie(e,t){if(e==null||t==null)return;let n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let a=0;a<Math.min(n,r-1);++a){let i=e[a],s=t[a+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(s))}}var W2=30;function Die(e){return e<=W2?e:av(e,Math.floor(Math.sqrt(e)))}function Fie(e,t,n){let r=n*(typeof e=="number"?e:e[0]),a=t*(typeof e=="number"?e:e[1]);return[r,a]}function Mie(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);let i=t.length;for(let s=0;s<i;++s)a=a.concat([e[s+1]/t[s],t[s]]);a=a.concat(e.slice(i+1))}return a}function Oie(e,t,n=!0){let r=[];if(n){r.push(t);for(let a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{let a=[],i=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?i.push(s):a.push(s);r.push(...a),r.push(0),r.push(...i)}return r}function Lie(e,t,n,r=!0){let a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Pie(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function zie(e,t,n){let r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var LP=1.7580993408473768,PP=1.0507009873554805,Bie=.3275911,Wie=.254829592,Vie=-.284496736,Uie=1.421413741,Hie=-1.453152027,jie=1.061405429;function Gie(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));let n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function qie(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Kie(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Xie(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Yie(e,t){let n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function Zie(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function Qie(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function Jie(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}var t1="->",ese=/->/g,MA=",",OA="...";function tse(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace(ese,"").length)/t1.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(t1,'").'));let[r,a]=e.split(t1);D(r.indexOf(OA)===-1,()=>'The ellipsis notation ("'.concat(OA,'") is not supported yet.'));let i=r.split(MA),s=i.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let h=0;h<a.length;++h){let p=a[h];if(!i.some(f=>f.indexOf(p)!==-1))throw new Error("Output subscripts contain the label ".concat(p," not present in the input subscripts."));o.indexOf(p)===-1&&o.push(p)}for(let h=0;h<r.length;++h){let p=r[h];o.indexOf(p)===-1&&p!==MA&&o.push(p)}let l=new Array(i.length);for(let h=0;h<s;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error("Found duplicate axes in input component ".concat(i[h],". Support for duplicate axes in input is not implemented yet."));l[h]=[];for(let p=0;p<i[h].length;++p)l[h].push(o.indexOf(i[h][p]))}let d=o.length,u=a.length,c=[];for(let h=u;h<d;++h)c.push(h);return{allDims:o,summedDims:c,idDims:l}}function nse(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;let r=[];for(let a=0;a<e;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function rse(e,t,n){let r=new Array(e);for(let a=0;a<n.length;++a){let i=n[a].shape;for(let s=0;s<t[a].length;++s)r[t[a][s]]===void 0?r[t[a][s]]=i[s]:D(r[t[a][s]]===i[s],()=>"Expected dimension ".concat(r[t[a][s]]," at axis ").concat(s," of input shaped ").concat(JSON.stringify(i),", but got dimension ").concat(i[s]))}}function ase(e,t){let n=e,r=[],a=0;e.length===0&&n.push(-1),a=e.length+1;for(let s=0;s<a;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let o=n[s],l=sse(t,o);for(let d of l)i.indexOf(d)===-1&&(r[s].push(d),i.push(d))}return{path:n,steps:r}}function ise(e){return e.every((t,n)=>t===n)}function sse(e,t){let n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function ose(e,t,n=0){let r=[];if(typeof t=="number")D(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let a=t.reduce((s,o)=>(o===-1&&(s+=1),s),0);D(a<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(i!==-1){let s=t.reduce((o,l)=>l>0?o+l:o);t[i]=e.shape[n]-s}D(e.shape[n]===t.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function lse(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function use(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function dse(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function cse(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function hse(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function pse(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function fse(e,t){let n=At(e),r=At(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function mse(e,t){let n=At(e),r=At(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function gse(){return"segment ids must be >= 0"}function bse(){return"segment ids are not increasing"}function yse(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function vse(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}var zP={};We(zP,{collectGatherOpShapeInfo:()=>kse,computeOutShape:()=>wse,segOpComputeOptimalWindowSize:()=>xse});function xse(e,t){let n=!1,r;for(e<=W2?(r=e,n=!0):r=av(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=av(e,r+1);return r}function wse(e,t,n){let r=[],a=e.length;for(let i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function kse(e,t,n,r){let a=t.shape.length,i=e.shape.length;if(r!==0&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let c=0;c<r;++c)if(e.shape[c]!==t.shape[c])throw new Error("x.shape[".concat(c,"]: ").concat(e.shape[c]," should be equal to indices.shape[").concat(c,"]: ").concat(t.shape[c],"."));let s=e.shape[n],o=[],l=1,d=1,u=1;for(let c=0;c<r;++c)o.push(e.shape[c]),l*=e.shape[c];for(let c=r;c<n;c++)o.push(e.shape[c]),d*=e.shape[c];for(let c=r;c<a;c++)o.push(t.shape[c]);for(let c=n+1;c<i;c++)o.push(e.shape[c]),u*=e.shape[c];return{batchSize:l,sliceSize:u,outerSize:d,dimSize:s,outputShape:o}}function Sse(e){try{return e.map(t=>lv(t))}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(t))}}function Ise(e){return e.map(t=>cg(t))}var as={};We(as,{nonMaxSuppressionV3Impl:()=>sP,nonMaxSuppressionV4Impl:()=>oP,nonMaxSuppressionV5Impl:()=>lP,whereImpl:()=>XL});Vae();var BP={kernelName:xh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,Rd(ce(n,"float32"),-1))}}},$se={kernelName:cu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=xt(ce(n,"float32")),a=Jn(we(Ae(1),r));return Rt(Se(e,a))}}}},Cse={kernelName:hu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Jn(we(xt(ce(n,"float32")),1));return Se(e,r)}}}},Ese={kernelName:Bo,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=e,s=gn(n.shape,a);return s.length>0&&(i=Ie(i,s)),j(i,n.shape)},b:()=>{let i=e,s=gn(r.shape,a);return s.length>0&&(i=Ie(i,s)),j(i,r.shape)}}}},Tse={kernelName:pu,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((r,a)=>{n[a]=()=>e.clone()}),n}},Nse={kernelName:Sh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>et(n)}}},_se={kernelName:Ih,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>et(n)}}},Ase={kernelName:fu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,Jn(we(Ae(1),xt(ce(n,"float32")))))}}},Rse={kernelName:mu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Jn(ne(Ae(1),xt(ce(n,"float32"))));return Se(e,r)}}}},Dse={kernelName:yu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=ne(xt(n),xt(r)),s=U(e,Se(r,i)),o=gn(n.shape,a);return o.length>0&&(s=Ie(s,o)),j(s,n.shape)},b:()=>{let i=ne(xt(n),xt(r)),s=Rt(U(e,Se(n,i))),o=gn(r.shape,a);return o.length>0&&(s=Ie(s,o)),j(s,r.shape)}}}},Fse={kernelName:gu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,ne(xt(ce(n,"float32")),1))}}},Mse={kernelName:bu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,we(Ae(1),xt(ce(n,"float32"))))}}};function Ose(e,t,n,r,a,i){let s=_(e,"dy","avgPool3dGrad"),o=_(t,"input","avgPool3dGrad"),l=s,d=o,u=!1;o.rank===4&&(u=!0,l=j(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=j(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(l.rank===5,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank ".concat(l.rank,".")),D(d.rank===5,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank ".concat(d.rank,".")),Ar("avgPool3dGrad",a,i);let c={dy:l,input:d},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=z.runKernel(Um,c,h);return u?j(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Lse=W({avgPool3dGrad_:Ose}),Pse={kernelName:$h,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>Lse(e,r,a,i,s,o)}}};function zse(e,t,n,r,a){let i=_(e,"dy","avgPoolGrad"),s=_(t,"input","avgPoolGrad");D(s.rank===i.rank,()=>"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(i.rank,")"));let o=s,l=i,d=!1;s.rank===3&&(d=!0,o=j(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=j(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(l.rank===4,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank ".concat(l.rank,".")),D(o.rank===4,()=>"Error in avgPoolGrad: input must be rank 4 but got rank ".concat(o.rank,"."));let u={dy:l,input:o},c={filterSize:n,strides:r,pad:a},h=z.runKernel(Vm,u,c);return d?j(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var Bse=W({avgPoolGrad_:zse}),Wse={kernelName:vu,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>Bse(e,r,a,i,s)}}},Vse={kernelName:xu,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:i,transposeB:s}=n;return!i&&!s?{a:()=>Ge(e,a,!1,!0),b:()=>Ge(r,e,!0,!1)}:!i&&s?{a:()=>Ge(e,a,!1,!1),b:()=>Ge(e,r,!0,!1)}:i&&!s?{a:()=>Ge(a,e,!1,!0),b:()=>Ge(r,e,!1,!1)}:{a:()=>Ge(a,e,!0,!0),b:()=>Ge(e,r,!0,!0)}}},Use={kernelName:Ch,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>kg(e,r,a)}}},Hse={kernelName:E3,gradFunc:(e,t,n)=>{let r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let l=a.length-1;l>=0;l--)if(a[l]===i[l])s[l]=1;else if(a[l]!==1)throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));let o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>Ie(e,o,!0)}}},jse={kernelName:wu,gradFunc:e=>({x:()=>e.clone()})},Gse={kernelName:ku,gradFunc:e=>({x:()=>et(e)})},qse={kernelName:Wo,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>Wn(ei(Os(r,a),jo(r,i)),e,et(e))}}},Kse={kernelName:jm,inputsToSave:["x"],gradFunc:BP.gradFunc},Xse={kernelName:Nh,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(o=>o.shape),{axis:a}=n,i=ti(a,t[0].shape)[0],s=r.map(o=>o[i]);return Br(e,s,i).map(o=>()=>o)}},Yse={kernelName:Su,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:i,strides:s,pad:o,dataFormat:l}=n;return D($o(i),()=>"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(i,"'")),{x:()=>H$(r.shape,e,a,s,o,l),filter:()=>T2(r,e,a.shape,s,o,l)}}},Zse={kernelName:Iu,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:i,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>$r(e,a,i,s,o,1,l),filter:()=>T2(e,r,a.shape,i,s,o,l)}}};function Qse(e,t,n,r,a){let i=e;e.rank===4&&(i=j(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;s.rank===4&&(s=j(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),D(i.rank===5,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape ".concat(i.shape,".")),D(s.rank===5,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape ".concat(s.shape,".")),D(n.length===5,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got ".concat(n,".")),D(i.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must match input depth in filter (").concat(n[3],".")),D(s.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(s.shape[4],") must match output depth for filter (").concat(n[4],")."));let o={x:i,dy:s},l={strides:r,pad:a,filterShape:n};return z.runKernel(_h,o,l)}var Jse=W({conv3DBackpropFilter_:Qse}),eoe={kernelName:$u,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i}=n;D($o(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(r,"'"));let[s,o]=t;return{x:()=>lL(s.shape,e,o,a,i),filter:()=>Jse(s,e,o.shape,a,i)}}},toe={kernelName:Cu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(Rt(ox(ce(n,"float32"))),e)}}},noe={kernelName:Eu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(lx(ce(n,"float32")),e)}}},roe={kernelName:Tu,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{let o=mL([a],r.rank),l=X0(e,a,i,!s);return o!=null&&(l=Ke(l,o)),l}}}},aoe={kernelName:Nu,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=r==null?[1,1]:r;D($o(o),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '".concat(o,"'"));let[l,d]=t;return D(l.rank===4,()=>"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ".concat(l.rank,".")),D(d.rank===4,()=>"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ".concat(d.rank,".")),D(l.shape[3]===d.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input channels (".concat(l.shape[3],") must match the inChannels dimension in filter ").concat(d.shape[2],".")),D(ns(a,o),()=>"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ".concat(a," and dilations '").concat(o,"'.")),Ar("depthwiseConv2d",i,s),{x:()=>rP(l.shape,e,d,a,i,o,s),filter:()=>nP(l,e,d.shape,a,i,o,s)}}},ioe={kernelName:_u,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,i={x:r,filter:a,dy:e},s={x:r,filter:a,dy:e};return{x:()=>z.runKernel(qc,i,n),filter:()=>z.runKernel(Kc,s,n)}}},soe={kernelName:Ru,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>z.runKernel(Mh,r)}}},ooe={kernelName:Du,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=U(Cr(Rt(xt(n))),2/Math.sqrt(Math.PI));return{x:()=>U(e,r)}}},loe={kernelName:Fu,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,n)}}},uoe={kernelName:Lh,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>j(e,n.shape)}}},doe={kernelName:Mu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,Cr(n))}}},coe={kernelName:Ou,gradFunc:e=>({x:()=>et(e)})},hoe={kernelName:Lu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=Se(e,ce(r,"float32")),s=gn(n.shape,a);return s.length>0?j(Ie(i,s),n.shape):i},b:()=>{let i=U(e,ce(n,"float32")),s=gn(r.shape,a);s.length>0&&(i=j(Ie(i,s),r.shape));let o=xt(r);return Rt(Se(i,ce(o,"float32")))}}}},poe={kernelName:Pu,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,i,s,o]=t,l=o==null?Ae(1):o,d=gn(i.shape,a.shape),u=[];if(i.rank===1){for(let m=0;m<a.shape.length-1;++m)u.push(a.shape[m]);u.push(1)}let c=we(a,i),h=U(e,l),p=ix(ne(s,Ae(r))),f=U(U(U(p,p),p),Ae(-.5));return{x:()=>i.rank===1?j(U(U(e,aa(j(p,[1,1,1,i.shape[0]]),u)),l),a.shape):j(U(U(e,p),l),a.shape),mean:()=>{let m=U(U(p,Ae(-1)),h);return i.rank===1&&(m=Ie(m,d)),j(m,i.shape)},variance:()=>{let m=U(U(f,c),h);return i.rank===1&&(m=Ie(m,d)),j(m,i.shape)},scale:()=>{let m=U(c,p),g=U(e,m);return i.rank===1&&(g=Ie(g,d)),j(g,i.shape)},offset:()=>{let m=e;return i.rank===1&&(m=Ie(m,d)),j(m,i.shape)}}}},foe={kernelName:zh,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:i}=n,s=ti(i,r.shape)[0];return{x:()=>{let o=r.shape,l=a.size,d=o.slice(0,s),u=d.length,c=o.slice(i,o.length).slice(1),h=c.length,p=LA(0,u),f=LA(u+1,u+1+h),m=PA([d,[l],c]),g=j(e,m),b=j(a,[l]),y=PA([[u],p,f]),v=Ke(g,y),x=gx(v,b,r.shape[s]),w=J$(y);return x=Ke(x,w),x},indices:()=>a}}};function LA(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function PA(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var moe={kernelName:zu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>et(n),b:()=>et(r)}}},goe={kernelName:Bu,gradFunc:e=>({x:()=>ce(e,"float32")})},boe={kernelName:Wu,gradFunc:e=>({x:()=>et(e)})},yoe={kernelName:Vu,gradFunc:e=>({x:()=>et(e)})},voe={kernelName:Uu,gradFunc:e=>({x:()=>et(e)})},xoe={kernelName:Hu,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,i=Rr(r,0);return{x:()=>Wn(i,e,U(e,a))}}},woe={kernelName:Gu,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,ne(n,1))}}},koe={kernelName:ju,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,ce(n,"float32"))}}},Soe={kernelName:N3,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let i=Cr(r);return we(e,U(Ie(e,a,!0),i))}}}};function Ioe(e,t,n,r=5,a=1,i=1,s=.5){let o={x:e,y:t,dy:n},l={depthRadius:r,bias:a,alpha:i,beta:s};return z.runKernel(Kh,o,l)}var $oe=W({localResponseNormalizationBackprop_:Ioe}),Coe={kernelName:qu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:i,bias:s,alpha:o,beta:l}=n;return{x:()=>$oe(r,a,e,i,s,o,l)}}};function WP(e,t,n,r){return t.rank<n.rank&&(t=j(t,Yl(t.shape,r))),e.rank<n.rank&&(e=j(e,Yl(e.shape,r))),{x:()=>U(e,ce(fa(n,t),e.dtype))}}var zA={kernelName:Ku,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:a}=r,i=t[0],s=t[1],o=ti(a,i.shape),l=WP(e,s,i,o);return{x:()=>l.x()}}},Eoe={kernelName:Xu,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>U(e,ce(Os(n,r),"float32")),b:()=>U(e,ce(Zc(n,r),"float32"))}}};function Toe(e,t,n,r,a,i,s){let o=_(e,"dy","maxPool3dGrad"),l=_(t,"input","maxPool3dGrad"),d=_(n,"output","maxPool3dGrad"),u=o,c=l,h=d,p=!1;l.rank===4&&(p=!0,u=j(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=j(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=j(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),D(u.rank===5,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank ".concat(u.rank,".")),D(c.rank===5,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank ".concat(c.rank,".")),D(h.rank===5,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank ".concat(h.rank,".")),Ar("maxPool3dGrad",i,s);let f={dy:u,input:c,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:s},g=z.runKernel(Ym,f,m);return p?j(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var Noe=W({maxPool3dGrad_:Toe}),_oe={kernelName:Xh,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>Noe(e,r,a,i,s,o,l)}}};function Aoe(e,t,n,r,a,i,s){let o=_(e,"dy","maxPoolGrad"),l=_(t,"input","maxPoolGrad"),d=_(n,"output","maxPoolGrad");D(l.rank===o.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy (").concat(o.rank,")")),D(o.rank===4,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank ".concat(o.rank,".")),D(l.rank===4,()=>"Error in maxPoolGrad: input must be rank 4 but got rank ".concat(l.rank,".")),Ar("maxPoolGrad",i,s);let u={dy:o,input:l,output:d},c={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return z.runKernel(Xm,u,c)}var Roe=W({maxPoolGrad_:Aoe}),Doe={kernelName:Yu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:s,pad:o}=n;return{x:()=>Roe(e,r,a,i,s,o)}}},Foe={kernelName:Zu,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=ti(a,r.shape),s=fL(r.shape,i)[1],o=At(s);return{x:()=>{let l=r.shape.slice();i.forEach(u=>{l[u]=1});let d=j(e,l);return Se(U(d,ia(r.shape,"float32")),o)}}}},Moe={kernelName:Qu,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:a}=r,[i,s]=t,o=ti(a,i.shape),l=WP(e,s,i,o);return{x:()=>l.x()}}},Ooe={kernelName:Ju,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>U(e,ce(jo(n,r),"float32")),b:()=>U(e,ce(Rr(n,r),"float32"))}}},Loe={kernelName:ed,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>Qe(e,i,r.shape)}}},Poe={kernelName:td,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=gn(n.shape,a);return i.length>0?j(Ie(e,i),n.shape):e},b:()=>{let i=U(e,Rt($p(Se(n,r)))),s=gn(r.shape,a);return s.length>0?j(Ie(i,s),r.shape):i}}}},zoe={kernelName:nd,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=U(e,ce(r,"float32")),s=gn(n.shape,a);return s.length>0?j(Ie(i,s),n.shape):i},b:()=>{let i=U(e,ce(n,"float32")),s=gn(r.shape,a);return s.length>0?j(Ie(i,s),r.shape):i}}}},Boe={kernelName:Zh,gradFunc:e=>({x:()=>Rt(e)})},Woe={kernelName:rd,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>Kt(n.shape,"float32")}}},Voe={kernelName:np,gradFunc:e=>({x:()=>et(e)})},Uoe={kernelName:rp,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return tn(e,r).map(a=>()=>a)}},BA={kernelName:ad,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>Qe(e,i,r.shape)}}},Hoe={kernelName:id,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,i=n,s=r,o=St(i.shape,s.shape);return{a:()=>{let l=ce(s,"float32"),d=U(e,U(l,As(i,we(l,Ae(1))))),u=gn(i.shape,o);return u.length>0&&(d=Ie(d,u)),j(d,i.shape)},b:()=>{let l=Rr(i,0),d=Wn(l,ma(i),et(i)),u=U(e,U(a,d)),c=gn(s.shape,o);return c.length>0&&(u=Ie(u,c)),j(u,s.shape)}}}},joe={kernelName:sd,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=Rr(n,0);return{x:()=>Wn(a,e,U(e,r)),alpha:()=>{let i=Wn(a,et(e),U(e,n)),s=gn(r.shape,e.shape);return s.length>0&&(i=Ie(i,s)),j(i,r.shape)}}}};function Goe(e,t,n){let r=e.shape.slice();r[n]=1;let a=j(t,r),i=fm(e,n,!0,!1),s=fm(e,n,!0,!0),o=U(i,s);return U(a,o)}function qoe(e,t,n){let r=e.shape.length,a=r-n.length,i=T.getAxesPermutation(n,r),s=e;i!=null&&(s=Ke(e,i));let o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((c,h)=>c*h,1);o.push(l);let d=s.reshape(o),u=Goe(d,t,a);if(u=u.reshape(s.shape),i!=null){let c=T.getUndoAxesPermutation(i);u=Ke(u,c)}return u}var Koe={kernelName:od,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=[];return a==null?i=r.shape.map((s,o)=>o):typeof a=="number"?i=[a]:i=a,{x:()=>qoe(r,e,i)}}},Xoe={kernelName:Au,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=Se(e,ce(r,"float32")),s=gn(n.shape,a);return s.length>0?j(Ie(i,s),n.shape):i},b:()=>{let i=U(e,ce(n,"float32")),s=gn(r.shape,a);s.length>0&&(i=j(Ie(i,s),r.shape));let o=xt(r);return Rt(Se(i,ce(o,"float32")))}}}},Yoe={kernelName:ld,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,Rt(xt(n)))}}},Zoe={kernelName:hd,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=U(jo(n,6),Rd(n));return{x:()=>U(e,ce(r,"float32"))}}},Qoe={kernelName:ud,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,ce(Rd(n),"float32"))}}},Joe={kernelName:ap,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>j(e,n.shape)}}},ele={kernelName:cd,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>z.runKernel(sp,a,n)}}},tle={kernelName:dd,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>z.runKernel(ip,a,n)}}},nle={kernelName:pd,gradFunc:(e,t,n)=>{let{dims:r}=n,a=ti(r,e.shape);return{x:()=>Da(e,a)}}},rle={kernelName:fd,gradFunc:e=>({x:()=>et(e)})},ale={kernelName:md,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Rt(Se(e,U(As(n,1.5),2)))}}},ile={kernelName:dp,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>ce(et(n),"float32"),t:()=>U(e,ce(n,e.dtype)),e:()=>U(e,ce(xg(n),e.dtype))}}},sle={kernelName:gd,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Rr(n,Ae(0)),a=Ae(LP),i=Ae(PP),s=U(e,i),o=U(U(e,a),Cr(ce(n,"float32")));return Wn(r,s,o)}}}},ole={kernelName:xd,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,U(n,we(Ae(1),n)))}}},lle={kernelName:vd,gradFunc:e=>({x:()=>et(e)})},ule={kernelName:bd,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(gg(ce(n,"float32")),e)}}},dle={kernelName:yd,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(K0(ce(n,"float32")),e)}}},cle={kernelName:cp,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:i}=n,s=r.shape,[o,l]=MP(r,a,i),d=[];for(let u=0;u<e.rank;u++)d.push([o[u],s[u]-o[u]-l[u]]);return{x:()=>Ri(e,d)}}},hle={kernelName:Id,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,i=!0,s=U(e,r);return{logits:()=>we(s,U(Ie(s,[a],i),r))}}},ple={kernelName:wd,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,Za(n))}}},WA={kernelName:hp,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>mg(e,r,a)}}},VA={kernelName:pp,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>kt(e,r)}}},fle={kernelName:kd,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,U(Jn(ce(n,"float32")),2))}}},mle={kernelName:ng,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(e,U(ce(n,"float32"),2))}}},gle={kernelName:$d,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=Ae(2);return{a:()=>U(e,U(a,we(n,r))),b:()=>U(e,U(a,we(r,n)))}}},ble={kernelName:Uo,gradFunc:e=>({x:()=>et(e)})},yle={kernelName:Cd,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=St(n.shape,r.shape);return{a:()=>{let i=e,s=gn(n.shape,a);return s.length>0&&(i=Ie(i,s)),j(i,n.shape)},b:()=>{let i=e,s=gn(r.shape,a);return s.length>0&&(i=Ie(i,s)),j(Rt(i),r.shape)}}}},vle={kernelName:Sd,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:i}=n;ti(i,r.shape).forEach(l=>{a[l]=1});let s=j(e,a),o=U(s,ia(r.shape,"float32"));return{x:()=>o}}},xle={kernelName:Ed,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Se(e,xt(gg(n)))}}},wle={kernelName:Td,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>U(we(Ae(1),xt(n)),e)}}},kle={kernelName:Vo,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n;return{x:()=>{let i=et(r);if(r.rank===1)for(let s=0;s<a[0];++s)i=ne(i,Qe(e,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<a[0];++s)for(let o=0;o<a[1];++o)i=ne(i,Qe(e,[s*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<a[0];++s)for(let o=0;o<a[1];++o)for(let l=0;l<a[2];++l)i=ne(i,Qe(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<a[0];++s)for(let o=0;o<a[1];++o)for(let l=0;l<a[2];++l)for(let d=0;d<a[3];++d)i=ne(i,Qe(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error("Gradient for tile operation is not implemented for rank-".concat(r.rank," tensors yet."));return i}}}},Sle={kernelName:Ss,gradFunc:(e,t,n)=>{let r=n,{perm:a}=r,i=J$(a);return{x:()=>Ke(e,i)}}},Ile={kernelName:vp,gradFunc:(e,t,n)=>{let r=n,{axis:a}=r;return{value:()=>Cn(e,a)}}},$le={kernelName:lg,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Cle(e,n)}}};function Cle(e,t){let n=rs(t,et(t)),r=Cp(e,n),a=Os(t,Ae(0,"int32")),i=r.rank-a.rank;for(let o=0;o<i;++o)a=qn(a,o+1);a=ei(a,ia(r.shape,"bool"));let s=et(r);return Wn(a,r,s)}var Ele={kernelName:xp,gradFunc:e=>({x:()=>et(e)})},Tle=[BP,$se,Cse,Ese,Tse,Nse,_se,Ase,Rse,Dse,Fse,Mse,Pse,Wse,Vse,Use,Hse,jse,Gse,qse,Kse,Xse,Zse,Yse,eoe,toe,noe,roe,aoe,ioe,Xoe,soe,ooe,loe,uoe,doe,hoe,coe,poe,foe,moe,goe,boe,yoe,voe,xoe,woe,koe,Soe,Coe,zA,zA,Eoe,_oe,Doe,Foe,Moe,Ooe,Loe,Poe,zoe,Boe,Woe,Voe,Uoe,BA,BA,Hoe,joe,Koe,Yoe,Zoe,Qoe,Joe,ele,tle,nle,rle,ale,ile,sle,ole,lle,ule,dle,cle,hle,ple,WA,WA,VA,VA,fle,gle,mle,ble,yle,vle,xle,wle,kle,Sle,Ile,$le,Ele];for(let e of Tle)_3(e);re().prototype.abs=function(){return this.throwIfDisposed(),cn(this)};re().prototype.acos=function(){return this.throwIfDisposed(),$$(this)};re().prototype.acosh=function(){return this.throwIfDisposed(),C$(this)};re().prototype.add=function(e){return this.throwIfDisposed(),ne(this,e)};re().prototype.all=function(e,t){return this.throwIfDisposed(),j0(this,e,t)};re().prototype.any=function(e,t){return this.throwIfDisposed(),cm(this,e,t)};re().prototype.argMax=function(e){return this.throwIfDisposed(),ql(this,e)};re().prototype.argMin=function(e){return this.throwIfDisposed(),E$(this,e)};re().prototype.asScalar=function(){return this.throwIfDisposed(),D(this.size===1,()=>"The array must have only 1 element."),j(this,[])};re().prototype.asType=function(e){return this.throwIfDisposed(),ce(this,e)};re().prototype.as1D=function(){return this.throwIfDisposed(),j(this,[this.size])};re().prototype.as2D=function(e,t){return this.throwIfDisposed(),j(this,[e,t])};re().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),j(this,[e,t,n])};re().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),j(this,[e,t,n,r])};re().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),j(this,[e,t,n,r,a])};re().prototype.asin=function(){return this.throwIfDisposed(),T$(this)};re().prototype.asinh=function(){return this.throwIfDisposed(),N$(this)};re().prototype.atan=function(){return this.throwIfDisposed(),_$(this)};re().prototype.atan2=function(e){return this.throwIfDisposed(),A$(this,e)};re().prototype.atanh=function(){return this.throwIfDisposed(),R$(this)};re().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ms(this,e,t,n,r)};re().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),mg(this,e,t)};re().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Nd(this,e,t,n,r,a)};re().prototype.broadcastTo=function(e){return this.throwIfDisposed(),El(this,e)};re().prototype.cast=function(e){return this.throwIfDisposed(),ce(this,e)};re().prototype.ceil=function(){return this.throwIfDisposed(),z$(this)};re().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),cr(this,e,t)};re().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Ue&&(e=[e]),kt([this,...e],t)};re().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),G0(this,e,t,n,r,a,i)};re().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),q0(this,e,t,n,r,a)};re().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),$r(this,e,t,n,r,a,i)};re().prototype.cos=function(){return this.throwIfDisposed(),gg(this)};re().prototype.cosh=function(){return this.throwIfDisposed(),K0(this)};re().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),fm(this,e,t,n)};re().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),X0(this,e,t,n)};re().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),q$(this,e,t)};re().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),_d(this,e,t,n,r,a,i)};re().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),K$(this,e,t,n,r,a)};re().prototype.divNoNan=function(e){return this.throwIfDisposed(),X$(this,e)};re().prototype.div=function(e){return this.throwIfDisposed(),Se(this,e)};re().prototype.dot=function(e){return this.throwIfDisposed(),Y$(this,e)};re().prototype.elu=function(){return this.throwIfDisposed(),Sp(this)};re().prototype.equal=function(e){return this.throwIfDisposed(),fa(this,e)};re().prototype.erf=function(){return this.throwIfDisposed(),Z$(this)};re().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),e2(this,e,t)};re().prototype.exp=function(){return this.throwIfDisposed(),Cr(this)};re().prototype.expandDims=function(e){return this.throwIfDisposed(),qn(this,e)};re().prototype.expm1=function(){return this.throwIfDisposed(),t2(this)};re().prototype.fft=function(){return this.throwIfDisposed(),$g(this)};re().prototype.flatten=function(){return this.throwIfDisposed(),j(this,[this.size])};re().prototype.floor=function(){return this.throwIfDisposed(),$p(this)};re().prototype.floorDiv=function(e){return this.throwIfDisposed(),H0(this,e)};re().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Cp(this,e,t,n)};re().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Os(this,e)};re().prototype.greater=function(e){return this.throwIfDisposed(),Rr(this,e)};re().prototype.ifft=function(){return this.throwIfDisposed(),th(this)};re().prototype.irfft=function(){return this.throwIfDisposed(),dx(this)};re().prototype.isFinite=function(){return this.throwIfDisposed(),n2(this)};re().prototype.isInf=function(){return this.throwIfDisposed(),r2(this)};re().prototype.isNaN=function(){return this.throwIfDisposed(),a2(this)};re().prototype.leakyRelu=function(e){return this.throwIfDisposed(),yg(this,e)};re().prototype.lessEqual=function(e){return this.throwIfDisposed(),jo(this,e)};re().prototype.less=function(e){return this.throwIfDisposed(),Zc(this,e)};re().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),i2(this,e,t,n,r)};re().prototype.logSigmoid=function(){return this.throwIfDisposed(),s2(this)};re().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Q0(this,e)};re().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),J0(this,e,t)};re().prototype.log=function(){return this.throwIfDisposed(),ma(this)};re().prototype.log1p=function(){return this.throwIfDisposed(),vg(this)};re().prototype.logicalAnd=function(e){return this.throwIfDisposed(),ei(this,e)};re().prototype.logicalNot=function(){return this.throwIfDisposed(),xg(this)};re().prototype.logicalOr=function(e){return this.throwIfDisposed(),ex(this,e)};re().prototype.logicalXor=function(e){return this.throwIfDisposed(),o2(this,e)};re().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Ge(this,e,t,n)};re().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Mn(this,e,t,n,r)};re().prototype.max=function(e,t){return this.throwIfDisposed(),_a(this,e,t)};re().prototype.maximum=function(e){return this.throwIfDisposed(),rs(this,e)};re().prototype.mean=function(e,t){return this.throwIfDisposed(),qt(this,e,t)};re().prototype.min=function(e,t){return this.throwIfDisposed(),Yc(this,e,t)};re().prototype.minimum=function(e){return this.throwIfDisposed(),Co(this,e)};re().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),u2(this,e,t)};re().prototype.mod=function(e){return this.throwIfDisposed(),d2(this,e)};re().prototype.mul=function(e){return this.throwIfDisposed(),U(this,e)};re().prototype.neg=function(){return this.throwIfDisposed(),Rt(this)};re().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Ip(this,e,t,n)};re().prototype.notEqual=function(e){return this.throwIfDisposed(),Zl(this,e)};re().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),Qc(this,e,t,n)};re().prototype.onesLike=function(){return this.throwIfDisposed(),ga(this)};re().prototype.pad=function(e,t){return this.throwIfDisposed(),Ri(this,e,t)};re().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),c2(this,e,t,n,r,a,i)};re().prototype.pow=function(e){return this.throwIfDisposed(),As(this,e)};re().prototype.prelu=function(e){return this.throwIfDisposed(),Sg(this,e)};re().prototype.prod=function(e,t){return this.throwIfDisposed(),h2(this,e,t)};re().prototype.reciprocal=function(){return this.throwIfDisposed(),b2(this)};re().prototype.relu=function(){return this.throwIfDisposed(),gt(this)};re().prototype.relu6=function(){return this.throwIfDisposed(),rx(this)};re().prototype.reshapeAs=function(e){return this.throwIfDisposed(),j(this,e.shape)};re().prototype.reshape=function(e){return this.throwIfDisposed(),j(this,e)};re().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),uP(this,e,t,n)};re().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),dP(this,e,t,n)};re().prototype.reverse=function(e){return this.throwIfDisposed(),Da(this,e)};re().prototype.rfft=function(){return this.throwIfDisposed(),Cg(this)};re().prototype.round=function(){return this.throwIfDisposed(),ax(this)};re().prototype.rsqrt=function(){return this.throwIfDisposed(),ix(this)};re().prototype.selu=function(){return this.throwIfDisposed(),sx(this)};re().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ep(this,e,t,n,r,a,i)};re().prototype.sigmoid=function(){return this.throwIfDisposed(),Za(this)};re().prototype.sign=function(){return this.throwIfDisposed(),y2(this)};re().prototype.sin=function(){return this.throwIfDisposed(),ox(this)};re().prototype.sinh=function(){return this.throwIfDisposed(),lx(this)};re().prototype.slice=function(e,t){return this.throwIfDisposed(),Qe(this,e,t)};re().prototype.softmax=function(e){return this.throwIfDisposed(),qo(this,e)};re().prototype.softplus=function(){return this.throwIfDisposed(),Ad(this)};re().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),kg(this,e,t)};re().prototype.split=function(e,t){return this.throwIfDisposed(),Br(this,e,t)};re().prototype.sqrt=function(){return this.throwIfDisposed(),Jn(this)};re().prototype.square=function(){return this.throwIfDisposed(),xt(this)};re().prototype.squaredDifference=function(e){return this.throwIfDisposed(),cx(this,e)};re().prototype.squeeze=function(e){return this.throwIfDisposed(),Ko(this,e)};re().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof Ue?[this,e]:[this,...e];return Cn(n,t)};re().prototype.step=function(e){return this.throwIfDisposed(),Rd(this,e)};re().prototype.stridedSlice=function(e,t,n,r,a,i,s,o){return this.throwIfDisposed(),v2(this,e,t,n,r,a,i,s,o)};re().prototype.sub=function(e){return this.throwIfDisposed(),we(this,e)};re().prototype.sum=function(e,t){return this.throwIfDisposed(),Ie(this,e,t)};re().prototype.tan=function(){return this.throwIfDisposed(),x2(this)};re().prototype.tanh=function(){return this.throwIfDisposed(),Xl(this)};re().prototype.tile=function(e){return this.throwIfDisposed(),aa(this,e)};re().prototype.toBool=function(){return this.throwIfDisposed(),ce(this,"bool")};re().prototype.toFloat=function(){return this.throwIfDisposed(),ce(this,"float32")};re().prototype.toInt=function(){return this.throwIfDisposed(),ce(this,"int32")};re().prototype.topk=function(e,t){return this.throwIfDisposed(),k2(this,e,t)};re().prototype.transpose=function(e){return this.throwIfDisposed(),Ke(this,e)};re().prototype.unique=function(e){return this.throwIfDisposed(),S2(this,e)};re().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),gx(this,e,t)};re().prototype.unstack=function(e){return this.throwIfDisposed(),tn(this,e)};re().prototype.where=function(e,t){return this.throwIfDisposed(),Wn(e,this,t)};re().prototype.zerosLike=function(){return this.throwIfDisposed(),et(this)};var ps=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ps.prototype)}},yi=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,yi.prototype)}},q=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,q.prototype)}},qe=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qe.prototype)}},VP=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,VP.prototype)}},UP=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}};function Jl(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}else{let n=new Array(t);return n.fill(e),n}}function Vi(e,t){if(!e)throw new VP(t)}function UA(e,t){let n=0;for(let r of e)r===t&&n++;return n}function Pr(e){return e.length===1?e[0]:e}function Mt(e){return Array.isArray(e)?e:[e]}function fs(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function fl(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}var Ba={};function V2(e){if(e==null)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Uk(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>Uk(t));else{let t=Object.keys(e);for(let n of t){let r=e[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?e[n]=r.value:Uk(r))}}}function Tg(e,t={},n={},r="object",a=!1){if(typeof e=="string"){let i=e,s;if(i in n)s=n[i];else if(i in Ba)s=Ba[i];else if(s=t[i],s==null)throw new q("Unknown ".concat(r,": ").concat(e,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));return s}else{let i=e;if(i.className==null||i.config==null)throw new q("".concat(r,": Improper config format: ").concat(JSON.stringify(i),".\n'className' and 'config' must set."));let s=i.className,o,l;if(s in n?[o,l]=n[s]:s in Ba?[o,l]=Ba.className:s in t&&([o,l]=t[s]),o==null)throw new q("Unknown ".concat(r,": ").concat(s,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));if(l!=null){let d={};for(let p of Object.keys(Ba))d[p]=Ba[p];for(let p of Object.keys(n))d[p]=n[p];let u=i.config;u.customObjects=d;let c=Object.assign({},Ba);for(let p of Object.keys(n))Ba[p]=n[p];Uk(i.config);let h=l(o,i.config,n,a);return Ba=Object.assign({},c),h}else{let d=Object.assign({},Ba);for(let c of Object.keys(n))Ba[c]=n[c];let u=new o(i.config);return Ba=Object.assign({},d),u}}}function Nle(e,t){return e<t?-1:e>t?1:0}function Nb(e,t){return-1*Nle(e,t)}function go(e){if(e==null)return e;let t=[];for(let n of e)t.indexOf(n)===-1&&t.push(n);return t}function _le(e){if(e==null)throw new q("Invalid value in obj: ".concat(JSON.stringify(e)));for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function Dd(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new q("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function U2(e,t,n=0,r=1/0){return Vi(n>=0),Vi(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(a=>typeof a===t)}function Bn(e,t){Array.isArray(e)?(k.assert(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((n,r)=>Bn(n,"element ".concat(r+1," of ").concat(t)))):k.assert(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ").concat(HP(e),"."))}function HP(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>HP(t)).join(",")+"]":typeof e=="string"?'"'.concat(e,'"'):"".concat(e)}function Ale(e,t,n){let r=n!=null?n():k.now(),a;return(...i)=>{let s=n!=null?n():k.now();return s-r<t||(r=s,a=e(...i)),a}}function jP(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}var Rle=0;function GP(){return Rle++}var _b={};function Sx(e=""){return e in _b||(_b[e]=0),_b[e]+=1,e+_b[e].toString()}var Dle=["channelsFirst","channelsLast"],Fle=["nearest","bilinear"],Mle=["valid","same","causal"],Ole=["max","avg"],Lle=["sum","mul","concat","ave"],Yd=new Map;function on(e){Dd(Dle,"DataFormat",e)}function Ple(e){Dd(Fle,"InterpolationFormat",e)}function za(e){Dd(Mle,"PaddingMode",e)}function qP(e){Dd(Ole,"PoolMode",e)}var Df=[],HA="/";function Tl(e,t){Df.push(e);try{let n=t();return Df.pop(),n}catch(n){throw Df.pop(),n}}function zle(){return Df.length===0?"":Df.join(HA)+HA}function KP(e){if(!YP(e))throw new Error("Not a valid tensor name: '"+e+"'");return zle()+e}function XP(e){if(!YP(e))throw new Error("Not a valid tensor name: '"+e+"'");Yd.has(e)||Yd.set(e,0);let t=Yd.get(e);if(Yd.set(e,Yd.get(e)+1),t>0){let n="".concat(e,"_").concat(t);return Yd.set(n,1),n}else return e}var Ble=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function YP(e){return!!e.match(Ble)}function Wle(e){return e===parseInt(e.toString(),10)}function bo(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function ah(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function To(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function Ni(e,t){if(t<e)throw new q("end (".concat(t,") < begin (").concat(e,") is forbidden."));let n=[];for(let r=e;r<t;++r)n.push(r);return n}var n1;function $n(){return n1==null&&(n1=eL().epsilon()),n1}function _i(){return"channelsLast"}function Rs(e,t){return ce(e,t)}function Ng(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),j(e,n)}function Vle(e,t){return G(()=>{if(e.shape.length!==2)throw new q("repeat() expects a rank-2 tensor, but received a rank-".concat(e.shape.length," tensor."));let n=Ng(e,1);return Hk(n,[1,t,1])})}function Ule(e){let t=[bo(e.shape)];return j(e,t)}function Hle(e){if(e.rank<=1)throw new q("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));let t=[e.shape[0],bo(e.shape,1)];return j(e,t)}function Nl(e,t,n){return G(()=>{switch(e.rank){case 1:return Ig(e,t,n);case 2:return ux(e,[t,0],[n,e.shape[1]]);case 3:return Tp(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return eh(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Qe(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Qe(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new q("sliceAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function r1(e,t,n){return G(()=>{switch(e.rank){case 1:return Ig(e,t,n);case 2:return ux(e,[0,t],[e.shape[0],n]);case 3:return Tp(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return eh(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new q("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function Ab(e,t,n,r){return G(()=>{switch(e.rank){case 1:return Ig(e,t,n);case 2:switch(r){case 1:return Nl(e,t,n);case 2:return r1(e,t,n);default:throw new q("The axis is not within the rank of the tensor ".concat(r))}case 3:switch(r){case 1:return Nl(e,t,n);case 2:return Tp(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return r1(e,t,n);default:throw new q("The axis is not within the rank of the tensor ".concat(r))}case 4:switch(r){case 1:return Nl(e,t,n);case 2:return eh(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return eh(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return r1(e,t,n);default:throw new q("The axis is not within the rank of the tensor ".concat(r))}default:throw new q("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function H2(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),kt(e,t)}function jA(e,t){switch(e.rank){case 1:return B$([e,t]);case 2:return W$([e,t],0);case 3:return V$([e,t],0);case 4:return U$([e,t],0);default:throw new q("concatAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}function Hk(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new q("The length of input n (".concat(t.length,") does not match the number of dimensions in input x (").concat(e.rank,")"));return aa(e,t)}function Ix(e,t=0,n=1,r,a){return nx(e,t,n,r,a)}function Yi(e,t,n,r){if(e.rank<2||t.rank<2)throw new qe("dot requires both inputs to be rank >= 2 but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){let a=e.shape.slice(-1)[0],i=t.shape.slice(-2)[0];if(a!==i)throw new qe("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ".concat(e.shape," and  y shape = ").concat(t.shape))}if(e.rank===2&&t.rank===2)return nh.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?jk(e.rank,r,_i()):null,activation:n});{let a=e.shape.slice(),i=a.pop();e=j(e,[-1,i]);let s=t.shape.slice(),o=s.pop(),l=s.pop(),d=[...s,o],u=Array.from({length:t.rank},(f,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=j(Ke(t,u),[l,-1]);let c=[...a,...d],h=!1,p=!1;return j(nh.matMul({a:e,b:t,transposeA:h,transposeB:p,bias:r?jk(e.rank,r,_i()):null,activation:n}),c)}}function ZP(e,t,n){return G(()=>(Array.isArray(t)?t=mt(t,"int32"):t=ce(t,"int32"),Cp(e,t,n)))}function _g(e){return U(e,e)}function jk(e,t,n){let r=t.shape;if(t.rank!==1&&t.rank!==e)throw new q("Unexpected bias dimensions: ".concat(t.rank,"; expected it to be 1 or ").concat(e));if(e===5){if(n==="channelsFirst")return r.length===1?j(t,[1,r[0],1,1,1]):j(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?j(t,[1,1,1,1,r[0]]):j(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?j(t,[1,r[0],1,1]):j(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?j(t,[1,1,1,r[0]]):j(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?j(t,[1,r[0],1]):j(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?j(t,[1,1,r[0]]):j(t,[1].concat(r))}else if(e<3)return t;throw new q("Unsupported input rank by biasAdd: ".concat(t.rank))}function Di(e,t,n){return G(()=>(n==null&&(n=_i()),on(n),ne(e,jk(e.rank,t,n))))}function jle(e,t=1){if(t!==1)throw new qe("Support for alpha values other than 1 (".concat(t,") is not implemented yet."));return Sp(e)}function Gle(e){return G(()=>Se(e,ne(cn(e),1)))}function QP(e,t,n,r){return G(()=>C2(e,t,n,r))}function qle(e){return G(()=>{let t=ne(.5,U(.2,e));return cr(t,0,1)})}function Ag(e,t,n=!1){return n?e():t()}var Kle=["fanIn","fanOut","fanAvg"],Xle=["normal","uniform","truncatedNormal"];function Yle(e){Dd(Kle,"FanMode",e)}function Zle(e){Dd(Xle,"Distribution",e)}var ni=class extends le.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},j2=class extends ni{apply(e,t){return Kt(e,t)}};j2.className="Zeros";le.registerClass(j2);var $x=class extends ni{apply(e,t){return ia(e,t)}};$x.className="Ones";le.registerClass($x);var G2=class extends ni{constructor(e){if(super(),typeof e!="object")throw new q("Expected argument of type ConstantConfig but got ".concat(e));if(e.value===void 0)throw new q("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return G(()=>U(Ae(this.value),ia(e,t)))}getConfig(){return{value:this.value}}};G2.className="Constant";le.registerClass(G2);var q2=class extends ni{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Go(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};q2.className="RandomUniform";le.registerClass(q2);var K2=class extends ni{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new qe("randomNormal does not support dType ".concat(t,"."));return Ix(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};K2.className="RandomNormal";le.registerClass(K2);var X2=class extends ni{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new qe("truncatedNormal does not support dType ".concat(t,"."));return mx(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};X2.className="TruncatedNormal";le.registerClass(X2);var Y2=class extends ni{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return G(()=>{if(e.length!==2||e[0]!==e[1])throw new q("Identity matrix initializer can only be used for 2D square matrices.");return U(this.gain,Y0(e[0]))})}getConfig(){return{gain:this.gain}}};Y2.className="Identity";le.registerClass(Y2);function Qle(e,t="channelsLast"){let n,r;if(on(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){let a=bo(e,2);n=e[1]*a,r=e[0]*a}else if(t==="channelsLast"){let a=bo(e,0,e.length-2);n=e[e.length-2]*a,r=e[e.length-1]*a}}else{let a=bo(e);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}var Ur=class extends ni{constructor(e){if(super(),e.scale<0)throw new q("scale must be a positive float. Got: ".concat(e.scale));this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Yle(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Zle(this.distribution),this.seed=e.seed}apply(e,t){let n=Qle(e),r=n[0],a=n[1],i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,r):this.mode==="fanOut"?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),this.distribution==="normal"){let s=Math.sqrt(i);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new qe("".concat(this.getClassName()," does not support dType ").concat(t,"."));return mx(e,0,s,t,this.seed)}else{let s=Math.sqrt(3*i);return Go(e,-s,s,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Ur.className="VarianceScaling";le.registerClass(Ur);var Cx=class extends Ur{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ur.className}};Cx.className="GlorotUniform";le.registerClass(Cx);var Ex=class extends Ur{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ur.className}};Ex.className="GlorotNormal";le.registerClass(Ex);var Tx=class extends Ur{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ur.className}};Tx.className="HeNormal";le.registerClass(Tx);var Nx=class extends Ur{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ur.className}};Nx.className="HeUniform";le.registerClass(Nx);var _x=class extends Ur{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ur.className}};_x.className="LeCunNormal";le.registerClass(_x);var Ax=class extends Ur{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ur.className}};Ax.className="LeCunUniform";le.registerClass(Ax);var Z2=class extends ni{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return G(()=>{if(e.length<2)throw new qe("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError("Unsupported data type ".concat(t,"."));t=t;let n=k.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(a,") elements: Slowness may result."));let i=[Math.max(r,n),Math.min(r,n)],s=Ix(i,0,1,t,this.seed),o=_2.qr(s,!1),l=o[0],d=o[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return l=U(l,d.sign()),n<r&&(l=l.transpose()),U(Ae(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}};Z2.className="Orthogonal";le.registerClass(Z2);var GA={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function qA(e,t={}){return Tg(e,le.SerializationMap.getMap().classNameMap,t,"initializer")}function Xt(e){return V2(e)}function Wt(e){if(typeof e=="string"){let t=e in GA?GA[e]:e;if(t==="GlorotNormal")return new Ex;if(t==="GlorotUniform")return new Cx;if(t==="HeNormal")return new Tx;if(t==="HeUniform")return new Nx;if(t==="LeCunNormal")return new _x;if(t==="LeCunUniform")return new Ax;{let n={};return n.className=t,n.config={},qA(n)}}else return e instanceof ni?e:qA(e)}function Gk(e){return Array.isArray(e)&&Array.isArray(e[0])}function hv(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function Me(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new q("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function st(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new q("Expected exactly 1 Shape; got ".concat(e.length))}else return e}function pv(e){let t=0;for(let n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((r,a)=>r*a);return t}var KA="Variable",JP=class{constructor(e,t="float32",n=KA,r=!0,a=null){this.dtype=t==null?"float32":t,this.shape=e.shape,this.id=GP(),n=n==null?KA:n,this.originalName=KP(n),this.name=XP(this.originalName),this.trainable_=r,this.constraint=a,this.val=I2(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Jle(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function Jle(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function qk(e){return e.map(t=>t.read())}function Q2(e){e.forEach(t=>{t[0].write(t[1])})}var pn=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},vi=class{constructor(e,t,n,r,a,i,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=s,this.id=GP(),i!=null&&(this.originalName=KP(i),this.name=XP(this.originalName)),this.rank=t.length}},eue=0,Rx=class{constructor(e,t){this.callArgs=t,this.id=eue++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)n!=null&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},tue=0,Ye=class extends le.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=tue++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let n=this.getClassName();t=fs(n)+"_"+Sx(n)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let n;if(e.batchInputShape!=null)n=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),n=[a].concat(e.inputShape)}this.batchInputShape=n;let r=e.dtype;r==null&&(r=e.inputDType),r==null&&(r="float32"),this.dtype=r}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new yi("The layer has never been called and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new q("Asked to get ".concat(t," at node ").concat(e,", but the layer has only ").concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return Pr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Pr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ps("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.'));if(this.inboundNodes.length===0)throw new ps("Layer ".concat(this.name," is not connected, no input to return."));return Pr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ps("Layer ".concat(this.name," has no inbound nodes."));if(this.inboundNodes.length>1)throw new ps("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.'));return Pr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=Mt(e),this.inputSpec==null||this.inputSpec.length===0)return;let t=Mt(this.inputSpec);if(e.length!==t.length)throw new q("Layer ".concat(this.name," expects ").concat(t.length," inputs, but it received ").concat(e.length," input tensors. Input received: ").concat(e));for(let n=0;n<e.length;n++){let r=e[n],a=t[n];if(a==null)continue;let i=r.rank;if(a.ndim!=null&&i!==a.ndim)throw new q("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected ndim=").concat(a.ndim,", found ndim=").concat(i));if(a.maxNDim!=null&&i>a.maxNDim)throw new q("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected max_ndim=").concat(a.maxNDim,", found ndim=").concat(i));if(a.minNDim!=null&&i<a.minNDim)throw new q("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected min_ndim=").concat(a.minNDim,", found ndim=").concat(i,"."));if(a.dtype!=null&&r.dtype!==a.dtype)throw new q("Input ".concat(n," is incompatible with layer ").concat(this.name," : expected dtype=").concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){let s=r.shape;for(let o in a.axes){let l=Number(o),d=a.axes[o],u=l>=0?s[l]:s[s.length+l];if(d!=null&&[d,null].indexOf(u)===-1)throw new q("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected axis ").concat(l," of input shape to have value ").concat(d," but got shape ").concat(s,"."))}}if(a.shape!=null)for(let s=0;s<a.shape.length;++s){let o=a.shape[s],l=r.shape[s];if(o!=null&&l!=null&&o!==l)throw new q("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected shape=").concat(a.shape,", found shape=").concat(r.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=Mt(e),r=!0;for(let i of n)if(!(i instanceof vi)){r=!1;break}let a=!0;for(let i of n)if(i instanceof vi){a=!1;break}if(r===a)throw new q("Arguments to apply() must be all SymbolicTensors or all Tensors");return Tl(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let i=[];for(let s of Mt(e))i.push(s.shape);this.build(Pr(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let i=this.call(e,t),s=Mt(i),o=[];for(let l of s)n.indexOf(l)!==-1&&(l=l.clone()),o.push(l);if(i=Pr(o),this.activityRegularizer!=null)throw new qe("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{let i=nue(e),s=this.computeOutputShape(i),o,l=rue(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),s!=null&&s.length>0&&Array.isArray(s[0])?o=s.map((d,u)=>new vi(l,d,this,Mt(e),t,this.name,u)):o=new vi(l,s,this,Mt(e),t,this.name),this.addInboundNode(e,o,null,null,i,s,t),this._refCount++,this.activityRegularizer!=null)throw new qe("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: ".concat(JSON.stringify(e),") does not match that of the batchInputShape (").concat(JSON.stringify(this.batchInputShape),") of the layer ").concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{n!=null&&e[r]!=null&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor (".concat(JSON.stringify(e),") does not match the expectation of layer ").concat(this.name,": ").concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ps("The layer ".concat(this.name," has never been called and thus has no defined output shape."));let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);e.indexOf(n)===-1&&e.push(n)}if(e.length===1){let t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new ps("The layer ".concat(this.name,' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.'))}countParams(){if(!this.built)throw new yi("You tried to call countParams() on ".concat(this.name,", but the layer is not built yet. Build it first by calling build(batchInputShape)."));return pv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return qk(e?this.trainableWeights:this.weights)}setWeights(e){G(()=>{let t=this.weights;if(t.length!==e.length)throw new q('You called setWeights(weights) on layer "'.concat(this.name,'" with a weight list of length ').concat(e.length,", but the layer was expecting ").concat(t.length," weights. Provided weights: ").concat(e,"..."));if(t.length===0)return;let n=[],r=qk(t);for(let a=0;a<r.length;++a){let i=r[a],s=t[a],o=e[a];if(!k.arraysEqual(i.shape,o.shape))throw new q("Layer weight shape ".concat(i.shape," not compatible with provided weight shape ").concat(o.shape));n.push([s,o])}Q2(n)})}addWeight(e,t,n,r,a,i,s,o){if(this._addedWeightNames.indexOf(e)!==-1)throw new q("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),n==null&&(n="float32"),this.fastWeightInitDuringBuild&&(r=o!=null?o():Wt("zeros"));let l=r.apply(t,n),d=new JP(l,n,e,i,s);return l.dispose(),a!=null&&this.addLoss(()=>a.apply(d.read())),i==null&&(i=!0),i?this._trainableWeights.push(d):this._nonTrainableWeights.push(d),d}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Mt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(n=>{if(n!=null)throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."))});else throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."));return null}return t}addInboundNode(e,t,n,r,a,i,s=null){let o=Mt(e);t=Mt(t),n=Mt(n),r=Mt(r),a=hv(a),i=hv(i);let l=[],d=[],u=[];for(let c of o)l.push(c.sourceLayer),d.push(c.nodeIndex),u.push(c.tensorIndex);new Rx({outboundLayer:this,inboundLayers:l,nodeIndices:d,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},s);for(let c=0;c<t.length;c++)t[c].sourceLayer=this,t[c].nodeIndex=this.inboundNodes.length-1,t[c].tensorIndex=c}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been built yet."));if(this._refCount===null)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used yet."));this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function nue(e){e=Mt(e);let t=[];for(let n of e)t.push(n.shape);return Pr(t)}function rue(e){return"float32"}function ez(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{let r=t.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{let a=[];for(let i=0;i<r.inboundLayers.length;i++){let s=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],d=ez(s,o,l);for(let u of d)a.indexOf(u)===-1&&a.push(u)}return a}}}var _p=class extends Ye{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Sx("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new q("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new q("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new q("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new vi(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Rx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new q("Cannot pass any input to an InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};_p.className="InputLayer";le.registerClass(_p);function tz(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new q("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new _p({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function aue(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return ce(t,e.dtype)}catch(n){throw new q("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype of the key '").concat(e.name,"' (").concat(e.dtype,")."))}}var Sl=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Sl)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(this.id2Value[e.id]==null)this.id2Value[e.id]=aue(e,t),this.name2Id[e.name]=e.id,n!=null&&(this.id2Mask[e.id]=n);else throw new q("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof vi){if(this.id2Value[e.id]==null)throw new q("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}else{let t=this.name2Id[e];if(t==null)throw new q("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof vi){if(this.id2Value[e.id]==null)throw new q("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}else{let t=this.name2Id[e];if(t==null)throw new q("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&Be(this.id2Mask)}},fv=new UP,mv=new UP;function iue(e){fv!=null&&fv.setMaxEntries(e),mv!=null&&mv.setMaxEntries(e)}function hf(e,t,n,r){let a=n==null?!1:n.training,i=Array.isArray(e),s=i?e:[e],o=s.map(f=>f.name),l=[],d=t.names();for(let f of o)d.indexOf(f)!==-1?l.push(t.getValue(f)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u=o.join(",")+"|"+t.names().sort().join(","),c=fv.get(u),h;if(c==null){let f=sue(s,t);c=f.sorted,h=f.recipientCounts,fv.put(u,c),mv.put(u,h)}h={},a||Object.assign(h,mv.get(u));let p=new Sl(t);for(let f=0;f<c.length;++f){if(r!=null){let A=dv().numTensors;A>r.maxNumTensors&&(r.maxNumTensors=A),A<r.minNumTensors&&(r.minNumTensors=A)}let m=c[f],g=m.sourceLayer;if(g instanceof _p)continue;let b=[],y=[],v=[],x=!1;for(let A of m.inputs){let R=p.getValue(A),N=p.getMask(A);b.push(R),y.push(N),N!=null&&(x=!0),a||(h[A.name]--,h[A.name]===0&&!t.hasKey(A)&&o.indexOf(A.name)===-1&&!R.isDisposed&&A.sourceLayer.stateful!==!0&&v.push(R))}x&&(n=n||{},n.mask=y[0]);let w=Mt(g.apply(b,n)),$=null;g.supportsMasking&&($=g.computeMask(b,y));let C=lue(m),E=Array.isArray(C)?C:[C];for(let A=0;A<E.length;++A){p.hasKey(E[A])||p.add(E[A],w[A],Array.isArray($)?$[0]:$);let R=o.indexOf(E[A].name);R!==-1&&(l[R]=w[A])}a||Be(v)}return p.disposeMasks(),i?l:l[0]}function sue(e,t){k.assert(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(e.length===1){let a=XA(e[0],t);n=a.sorted,r=a.recipientMap}else{let a=new Set;for(let i of e){let{sorted:s,recipientMap:o}=XA(i,t);for(let l of s)a.has(l.name)||(n.push(l),a.add(l.name));for(let l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(d=>r[l].add(d))}}return{sorted:n,recipientCounts:oue(r)}}function oue(e){let t={};for(let n in e)t[n]=e[n].size;return t}function XA(e,t){let n=new Set,r=[],a={};for(let o of t.names())n.add(o);let i=[],s=[];for(i.push(e);i.length>0;){let o=i[i.length-1];if(n.has(o.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),n.add(o.name),l&&s.pop();else{s.push(i.length-1);for(let d of o.inputs)a[d.name]==null&&(a[d.name]=new Set),a[d.name].add(o.name),!n.has(d.name)&&i.push(d)}}return{sorted:r,recipientMap:a}}function lue(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(let a of e.sourceLayer.inboundNodes[r].outputTensors)if(a.id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}var uue=Z();uue.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,iue);var nz={};We(nz,{maxNorm:()=>due,minMaxNorm:()=>pue,nonNeg:()=>hue,unitNorm:()=>cue});function J2(e,t){return G(()=>Jn(Ie(U(e,e),t,!0)))}var Rg=class extends le.Serializable{getConfig(){return{}}},eC=class extends Rg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return G(()=>{let t=J2(e,this.axis),n=cr(t,0,this.maxValue);return U(e,Se(n,ne($n(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};eC.className="MaxNorm";le.registerClass(eC);var tC=class extends Rg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return G(()=>Se(e,ne($n(),J2(e,this.axis))))}getConfig(){return{axis:this.axis}}};tC.className="UnitNorm";le.registerClass(tC);var nC=class extends Rg{apply(e){return gt(e)}};nC.className="NonNeg";le.registerClass(nC);var rC=class extends Rg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return G(()=>{let t=J2(e,this.axis),n=ne(U(this.rate,cr(t,this.minValue,this.maxValue)),U(1-this.rate,t));return U(e,Se(n,ne($n(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};rC.className="MinMaxNorm";le.registerClass(rC);var YA={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Tn(e){return V2(e)}function ZA(e,t={}){return Tg(e,le.SerializationMap.getMap().classNameMap,t,"constraint")}function Nn(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in YA?YA[e]:e,config:{}};return ZA(t)}else return e instanceof Rg?e:ZA(e)}function due(e){return new eC(e)}function cue(e){return new tC(e)}function hue(){return new nC}function pue(e){return new rC(e)}var rz={};We(rz,{constant:()=>gue,glorotNormal:()=>Sue,glorotUniform:()=>kue,heNormal:()=>Iue,heUniform:()=>$ue,identity:()=>xue,leCunNormal:()=>Cue,leCunUniform:()=>Eue,ones:()=>mue,orthogonal:()=>Tue,randomNormal:()=>yue,randomUniform:()=>bue,truncatedNormal:()=>vue,varianceScaling:()=>wue,zeros:()=>fue});function fue(){return new j2}function mue(){return new $x}function gue(e){return new G2(e)}function bue(e){return new q2(e)}function yue(e){return new K2(e)}function vue(e){return new X2(e)}function xue(e){return new Y2(e)}function wue(e){return new Ur(e)}function kue(e){return new Cx(e)}function Sue(e){return new Ex(e)}function Iue(e){return new Tx(e)}function $ue(e){return new Nx(e)}function Cue(e){return new _x(e)}function Eue(e){return new Ax(e)}function Tue(e){return new Z2(e)}var az={};We(az,{Layer:()=>Ye,RNN:()=>is,RNNCell:()=>Lg,activation:()=>nce,add:()=>cce,alphaDropout:()=>Kce,average:()=>hce,averagePooling1d:()=>fE,averagePooling2d:()=>mE,averagePooling3d:()=>gE,avgPool1d:()=>wce,avgPool2d:()=>Sce,avgPool3d:()=>$ce,avgPooling1d:()=>kce,avgPooling2d:()=>Ice,avgPooling3d:()=>Cce,batchNormalization:()=>yce,bidirectional:()=>Bce,categoryEncoding:()=>Jce,centerCrop:()=>Zce,concatenate:()=>pce,conv1d:()=>qde,conv2d:()=>Kde,conv2dTranspose:()=>Xde,conv3d:()=>Yde,conv3dTranspose:()=>Zde,convLstm2d:()=>Oce,convLstm2dCell:()=>Lce,cropping2D:()=>Jde,dense:()=>rce,depthwiseConv2d:()=>tce,dot:()=>bce,dropout:()=>ace,elu:()=>Wde,embedding:()=>dce,flatten:()=>sce,gaussianDropout:()=>qce,gaussianNoise:()=>Gce,globalAveragePooling1d:()=>Ece,globalAveragePooling2d:()=>Tce,globalMaxPool1d:()=>Vce,globalMaxPool2d:()=>Uce,globalMaxPooling1d:()=>Zz,globalMaxPooling2d:()=>Qz,gru:()=>_ce,gruCell:()=>Ace,input:()=>kz,inputLayer:()=>Bde,layerNormalization:()=>vce,leakyReLU:()=>Ude,lstm:()=>Rce,lstmCell:()=>Dce,masking:()=>Xce,maxPool1d:()=>Hce,maxPool2d:()=>jce,maxPooling1d:()=>Jz,maxPooling2d:()=>eB,maxPooling3d:()=>Nce,maximum:()=>fce,minimum:()=>mce,multiply:()=>gce,permute:()=>uce,prelu:()=>Hde,randomWidth:()=>ehe,reLU:()=>Vde,repeatVector:()=>oce,rescaling:()=>Yce,reshape:()=>lce,resizing:()=>Qce,rnn:()=>Pce,separableConv2d:()=>Qde,simpleRNN:()=>Fce,simpleRNNCell:()=>Mce,softmax:()=>jde,spatialDropout1d:()=>ice,stackedRNNCells:()=>zce,thresholdedReLU:()=>Gde,timeDistributed:()=>Wce,upSampling2d:()=>ece,zeroPadding2d:()=>xce});async function js(e){if(e==null)return;let t=[],n=[],r=[];for(let a in e){let i=e[a];if(typeof i!="number"){let s=i;t.push(s.data()),n.push(a),r.push(s)}}if(t.length>0){let a=await Promise.all(t);for(let i=0;i<a.length;++i)e[n[i]]=a[i][0];Be(r)}}function iz(e){if(e!=null)for(let t in e){let n=e[t];typeof n!="number"&&n.dispose()}}var QA;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(QA||(QA={}));var Nue=125,ih=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},sz=class{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},_ue=class extends ih{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});let n=t.size==null?0:t.size;this.seen+=n;for(let r in t){let a=t[r];if(typeof a=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+a*n;else{let i;r in this.totals?i=this.totals[r]:this.totals[r]=0;let s=G(()=>ne(this.totals[r],U(a,n)));this.totals[r]=s,i!=null&&i.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(let n of this.params.metrics)this.totals[n]!=null&&(typeof this.totals[n]=="number"?t[n]=this.totals[n]/this.seen:G(()=>{let r=U(Se(1,this.seen),this.totals[n]);t[n]=r,this.totals[n].dispose(),In(t[n])}))}},oz=class extends ih{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(let n in t)this.history[n]==null&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let a in this.history){let i=this.history[a];for(let s=0;s<i.length;++s)if(typeof i[s]!="number"){let o=i[s];e.push(o.data()),t.push(a),n.push(s)}}let r=await Promise.all(e);for(let a=0;a<r.length;++a)this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}},lz=class extends ih{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||B2,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Nue),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");k.isNumber(this.yieldEvery)&&(this.maybeWait=Ale(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];this.yield!=null&&(await js(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await js(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];this.epochEnd!=null&&(await js(t),n.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){this.batchBegin!=null&&(await js(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];this.batchEnd!=null&&(await js(t),n.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?n.push(this.nextFrameFunc()):k.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){this.trainBegin!=null&&(await js(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await js(e),await this.trainEnd(e))}};function uz(e,t){return e==null&&(e={}),e instanceof ih?[e]:Array.isArray(e)&&e[0]instanceof ih?e:Mt(e).map(n=>new lz(n,t))}var Ha=class{constructor(){}static registerCallbackConstructor(e,t){k.assert(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, but got ".concat(e)),Ha.checkForDuplicate(t),Ha.constructors[e]==null&&(Ha.constructors[e]=[]),Ha.constructors[e].push(t)}static checkForDuplicate(e){for(let t in Ha.constructors)Ha.constructors[+t].forEach(n=>{if(n===e)throw new q("Duplicate callback constructor.")})}static clear(){Ha.constructors={}}static createCallbacks(e){let t=[];for(let n in Ha.constructors){let r=+n;e>=r&&t.push(...Ha.constructors[r])}return t.map(n=>new n)}};Ha.constructors={};function dz(e,t,n,r,a,i,s,o,l){let d=new oz,u=[new _ue,...Ha.createCallbacks(t)];e!=null&&u.push(...e),u.push(d);let c=new sz(u);return c.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:c,history:d}}function $i(e,t={},n=!1){return Tg(e,le.SerializationMap.getMap().classNameMap,t,"layer",n)}function gv(e,t){return G(()=>{e.dtype!=="float32"&&(e=ce(e,"float32"));let n=Ie(_g(e),t,!0),r=ca(n.shape,$n()),a=Jn(rs(n,r));return Se(e,a)})}function Fd(e,t){return G(()=>qt(_g(we(t,e)),-1))}function Dx(e,t){return G(()=>qt(cn(we(t,e)),-1))}function Ap(e,t){return G(()=>{let n=we(e,t),r=cr(cn(e),$n(),Number.MAX_VALUE),a=cn(Se(n,r));return U(100,qt(a,-1))})}function Aue(e,t){return G(()=>{let n=cr(t,$n(),Number.MAX_VALUE),r=ma(ne(1,n)),a=cr(e,$n(),Number.MAX_VALUE),i=ma(ne(1,a));return qt(_g(we(r,i)),-1)})}function Rue(e,t){return G(()=>{let n=rs(0,we(1,U(e,t)));return qt(_g(n),-1)})}function Due(e,t){return G(()=>{let n=rs(0,we(1,U(e,t)));return qt(n,-1)})}function Fue(e,t){return G(()=>{let n=Ie(U(e,t),-1),r=_a(U(we(1,e),t),-1);return rs(0,ne(1,we(r,n)))})}function Mue(e,t){return G(()=>{let n=Math.log(2),r=we(t,e),a=we(ne(r,Ad(U(-2,r))),n);return qt(a,-1)})}function mm(e,t,n=!1){return G(()=>{if(n)t=qo(t);else{let r=Ie(t,t.shape.length-1,!0);t=Se(t,r)}return t=cr(t,$n(),1-$n()),Rt(Ie(U(ce(e,"float32"),ma(t)),t.shape.length-1))})}function bv(e,t,n=!1){return G(()=>{let r=ce($p(Ule(e)),"int32");t=cr(t,$n(),1-$n());let a=t.shape,i=j(Qc(r,a[a.length-1]),a);return mm(i,t,n)})}function Oue(e,t){if(!k.arraysEqual(e.shape,t.shape))throw new q("logits and labels must have the same shape, but got shapes ".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return G(()=>{let n=gt(t),r=Rt(cn(t));return ne(we(n,U(t,e)),vg(Cr(r)))})}function Fx(e,t){return G(()=>{let n;return n=cr(t,$n(),1-$n()),n=ma(Se(n,we(1,n))),qt(Oue(e,n),-1)})}function Lue(e,t){return G(()=>{let n=cr(e,$n(),1),r=cr(t,$n(),1);return Ie(U(e,ma(Se(n,r))),-1)})}function Pue(e,t){return G(()=>{let n=ma(ne($n(),t));return qt(we(t,U(e,n)),-1)})}function aC(e,t){return G(()=>{let n=gv(e,-1),r=gv(t,-1),a=U(n,r);return Rt(Ie(a,-1))})}var yv={meanSquaredError:Fd,meanAbsoluteError:Dx,meanAbsolutePercentageError:Ap,meanSquaredLogarithmicError:Aue,squaredHinge:Rue,hinge:Due,categoricalHinge:Fue,logcosh:Mue,categoricalCrossentropy:mm,sparseCategoricalCrossentropy:bv,binaryCrossentropy:Fx,kullbackLeiblerDivergence:Lue,poisson:Pue,cosineProximity:aC};function a1(e){if(typeof e=="string"){if(e in yv)return yv[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy')),new q(t)}else return e}function iC(e,t){return G(()=>{let n=U(.5,ga(t)),r=Rs(Rr(t,n),e.dtype);return qt(fa(e,r),-1)})}function sC(e,t){return G(()=>Rs(fa(ql(e,-1),ql(t,-1)),"float32"))}function cz(e,t){return G(()=>ce(Ie(ei(fa(e,1),fa(t,1))),"float32"))}function zue(e,t){return G(()=>ce(Ie(ei(fa(e,1),fa(t,0))),"float32"))}function Bue(e,t){return G(()=>ce(Ie(ei(fa(e,0),fa(t,1))),"float32"))}function hz(e,t){return G(()=>{let n=cz(e,t),r=Bue(e,t),a=ne(n,r);return ce(Wn(Rr(a,0),Se(n,a),0),"float32")})}function Wue(e,t){return G(()=>{let n=cz(e,t),r=zue(e,t),a=ne(n,r);return ce(Wn(Rr(a,0),Se(n,a),0),"float32")})}function pz(e,t){return Fx(e,t)}function fz(e,t){return e.rank===t.rank&&(e=Ko(e,[e.rank-1])),t=ql(t,-1),t.dtype!==e.dtype&&(t=ce(t,e.dtype)),ce(fa(e,t),"float32")}var Vue=Fd,Uue=Fd,Hue=Dx,jue=Dx,Gue=Ap,que=Ap,oC=mm,Kue=aC,mz=bv,vv={binaryAccuracy:iC,categoricalAccuracy:sC,precision:hz,categoricalCrossentropy:oC,sparseCategoricalCrossentropy:mz,mse:Vue,MSE:Uue,mae:Hue,MAE:jue,mape:Gue,MAPE:que,cosine:Kue};function Xue(e){if(typeof e=="string"&&e in vv)return vv[e];if(typeof e!="string"&&e!=null)return e;throw new q("Unknown metric ".concat(e))}function Rb(e){if(Vi(e!==null,"Unknown LossOrMetricFn ".concat(e)),typeof e=="string")return e;{let t;for(let n of Object.keys(yv))if(yv[n]===e){t=n;break}if(t!==void 0)return t;for(let n of Object.keys(vv))if(vv[n]===e){t=n;break}return t!==void 0?t:e.name}}function Yue(e){let t={Adagrad:()=>cl.adagrad(.01),Adadelta:()=>cl.adadelta(1,.95,$n()),Adam:()=>cl.adam(.001,.9,.999,$n()),Adamax:()=>cl.adamax(.002,.9,.999,$n(),0),RMSProp:()=>cl.rmsprop(.001,.9,0,$n()),SGD:()=>cl.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new q("Unknown Optimizer ".concat(e))}function JA(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!Kk(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let r=JSON.stringify(e);r.length>1048576&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in size (length=').concat(r.length," when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576."))}}function Kk(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){let t=Object.keys(e);for(let n of t)if(typeof n!="string"||!Kk(e[n]))return!1;return!0}else if(Array.isArray(e)){for(let t of e)if(!Kk(t))return!1;return!0}else return!1;else{let t=typeof e;return t==="string"||t==="number"||t==="boolean"}}function Zue(e,t,n,r=console.log){let a=Jue(e),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(t*u)));let s;if(!a){i.push("Receives inputs"),s=[];for(let u in e.nodesByDepth)s.push(...e.nodesByDepth[u])}r("_".repeat(t)),xv(i,n,r),r("=".repeat(t));let o=e.layers;for(let u=0;u<o.length;++u)a?ede(o[u],n,r):tde(o[u],n,s,r),r((u===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=Que(e),d=pv(e.nonTrainableWeights);r("Total params: ".concat(l+d)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(d)),r("_".repeat(t))}function Que(e){let t;return e.collectedTrainableWeights!=null?t=pv(e.collectedTrainableWeights):t=pv(e.trainableWeights),t}function Jue(e){let t=!0,n=[],r=[];for(let a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(let a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(let a of e.layers){let i=!1;for(let s of a.inboundNodes)if(r.indexOf(s)!==-1)if(i){t=!1;break}else i=!0;if(!t)break}return t}function xv(e,t,n=console.log){let r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function ede(e,t,n){let r,a;try{a=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch(l){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(l){r="multiple"}let i=e.name,s=e.getClassName(),o=["".concat(i," (").concat(s,")"),a,r,e.countParams().toString()];xv(o,t,n)}function tde(e,t,n,r){let a,i;try{i=e.inboundNodes.map(c=>JSON.stringify(c.inputShapes)).join(",")}catch(c){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(c){a="multiple"}let s=[];for(let c of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(c)===-1))for(let h=0;h<c.inboundLayers.length;++h){let p=c.inboundLayers[h].name,f=c.nodeIndices[h],m=c.tensorIndices[h];s.push("".concat(p,"[").concat(f,"][").concat(m,"]"))}let o=e.name,l=e.getClassName(),d=s.length===0?"":s[0],u=["".concat(o," (").concat(l,")"),i,a,e.countParams().toString(),d];xv(u,t,r);for(let c=1;c<s.length;++c)xv(["","","","",s[c]],t,r)}function gz(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function gm(e,t){if(e===null)return null;if(typeof e=="string")return fl(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let i=e[a];gz(t,a,i)?n.push(i):n.push(gm(i,t))}return n}else{let n={};for(let r of Object.keys(e)){let a=e[r];if(r==="name"&&typeof a=="string")n[r]=a;else{let i=fl(r);n[i]=gm(a,i)}}return n}}function Xk(e,t){if(e==null)return null;if(typeof e=="string")return fs(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let i=e[a];gz(t,a,i)?n.push(i):n.push(Xk(i,t))}return n}else{let n={};for(let r of Object.keys(e)){let a=e[r],i=fs(r);(r==="name"||r==="className")&&typeof a=="string"?n[i]=a:n[i]=Xk(a,r)}return n}}var lC="4.7.0",Pi=class extends Ye{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){let b=this.getClassName().toLowerCase();this.name=Sx(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],go(this.inputs).length!==this.inputs.length)throw new q("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ".concat(this.inputs.map(b=>b.name)));go(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ".concat(this.outputs.map(b=>b.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let y=b.sourceLayer,v=b.nodeIndex,x=b.tensorIndex;this.outputLayers.push(y),this.outputLayersNodeIndices.push(v),this.outputLayersTensorIndices.push(x)}for(let b of this.inputs){let y=b.sourceLayer,v=b.nodeIndex,x=b.tensorIndex;Vi(v===0,"input layer has >1 nodes"),Vi(x===0,"input layer has >1 tensors"),this.inputLayers.push(y),this.inputLayersNodeIndices.push(v),this.inputLayersTensorIndices.push(x)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let y=this.inputLayers[b];if(!(y instanceof _p))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: ".concat(e.inputs,". Input ").concat(b," (0-based) originates from layer type ").concat(y.getClassName(),"."));this.inputNames.push(y.name),this.feedInputShapes.push(y.batchInputShape),this.feedInputNames.push(y.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let t={},n={},r={},a={},i={},s=[],o=(b,y,v,x,w,$)=>{(x==null||w==null||$==null)&&(x=b.sourceLayer,w=b.nodeIndex,$=b.tensorIndex);let C=x.inboundNodes[w];if(v.indexOf(C)!==-1)throw new yi("The tensor ".concat(b.name,' at layer "').concat(x.name,'" is part of a cycle.'));if(y.indexOf(C)!==-1)return;this.containerNodes.add(Pi.nodeKey(x,w)),x.id in i||(i[x.id]=Object.keys(i).length),v.indexOf(C)===-1&&v.push(C);let E=C.inboundLayers.length;for(let A=0;A<E;A++){let R=C.inputTensors[A],N=C.inboundLayers[A],I=C.nodeIndices[A],F=C.tensorIndices[A];o(R,y,v,N,I,F)}for(y.push(C);v.indexOf(C)>=0;)v.splice(v.indexOf(C),1);s.push(C)},l=[],d=[];for(let b of this.outputs)o(b,l,d);let u=s.slice().reverse();for(let b of u){n[b.id]=b,b.id in t||(t[b.id]=0);let y=t[b.id],v=r[b.outboundLayer.id]==null?0:r[b.outboundLayer.id];y=Math.max(y,v),r[b.outboundLayer.id]=y,a[b.outboundLayer.id]=b.outboundLayer,t[b.id]=y;for(let x=0;x<b.inboundLayers.length;x++){let w=b.inboundLayers[x],$=b.nodeIndices[x],C=w.inboundNodes[$],E=t[C.id]==null?0:t[C.id];t[C.id]=Math.max(y+1,E),n[C.id]=C}}let c={};for(let b in t){let y=t[b];y in c||(c[y]=[]),c[y].push(n[b])}let h={};for(let b in r){let y=r[b];y in h||(h[y]=[]),h[y].push(a[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(Nb);this.layers=[];for(let b of p){let y=h[b];y.sort((v,x)=>{let w=i[v.id],$=i[x.id];return w<$?-1:w>$?1:0});for(let v of y)v instanceof Pi&&this.internalContainerRefs.push(v),this.layers.push(v)}this.layersByDepth=h,p=Object.keys(c).map(b=>parseInt(b,10)).sort(Nb);let f=this.inputs.slice(),m=[];for(let b of p)for(let y of c[b]){let v=y.outboundLayer;if(v!=null){for(let x of y.inputTensors)if(f.indexOf(x)===-1)throw new yi("Graph disconnected: cannot obtain value for tensor ".concat(x,' at layer "').concat(v.name,'". The following previous layers were accessed without issue: ').concat(m));for(let x of y.outputTensors)f.push(x);m.push(v.name)}}this.nodesByDepth=c;let g=this.layers.map(b=>b.name);for(let b of g){let y=g.filter(v=>v===b).length;if(y!==1)throw new yi('The name "'.concat(b,'" is used ').concat(y," times in the model. All layer names should be unique. Layer names: ")+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Rx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(n=>n.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new q("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.layers)t.push(...n.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let n={},r=0;for(let i of this.layers)for(let s of i.weights){if(n[s.originalName]!=null)throw new q("Duplicate weight name: ".concat(s.originalName));n[s.originalName]=s,r++}let a=[];for(let i in e){let s=i;if(n[i]==null){let o=i.split("/");s=o.slice(0,-2).concat([o[o.length-1]]).join("/")}if(n[s]!=null)a.push([n[s],e[i]]);else if(t)throw new q("Provided weight data has no target variable: ".concat(i));delete n[s]}if(t){let i=[];for(let s in n)i.push(s);if(i.length>0)throw new q("".concat(i.length," of ").concat(r," weights are not set: ").concat(i))}Q2(a)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(lC),t.backend="TensorFlow.js",t}toJSON(e,t=!0){let n=Xk(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return G(()=>{e=Mt(e);let n=new Sl;for(let r=0;r<this.inputs.length;++r)n.add(this.inputs[r],e[r]);return hf(this.outputs,n,t)})}computeMask(e,t){return G(()=>{e=Mt(e);let n;return t==null?n=Jl(null,e.length):n=Mt(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=hv(e);if(t.length!==this.inputLayers.length)throw new q("Invalid inputShape argument ".concat(e,": model has ").concat(this.inputLayers.length," tensor inputs."));let n={};for(let s=0;s<t.length;s++){let o=this.inputLayers[s],l=t[s],d=o.name+"_0_0";n[d]=l}let r=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(Nb);if(r.length>1)for(let s of r){let o=this.nodesByDepth[s];for(let l of o){let d=l.outboundLayer;if(this.inputLayers.map(f=>f.id).indexOf(d.id)!==-1)continue;let u=[];for(let f=0;f<l.inboundLayers.length;f++){let m=l.inboundLayers[f],g=l.nodeIndices[f],b=l.tensorIndices[f],y="".concat(m.name,"_").concat(g,"_").concat(b),v=n[y];u.push(v)}let c=d.computeOutputShape(Pr(u)),h=hv(c),p=d.inboundNodes.indexOf(l);for(let f=0;f<h.length;f++){let m="".concat(d.name,"_").concat(p,"_").concat(f);n[m]=h[f]}}}let a=[],i=[];for(let s=0;s<this.outputLayers.length;s++){let o=this.outputLayers[s],l=this.outputLayersNodeIndices[s],d=this.outputLayersTensorIndices[s],u="".concat(o.name,"_").concat(l,"_").concat(d);i.push(u)}for(let s=0;s<i.length;s++){let o=i[s];Vi(o in n),a.push(n[o])}return Pr(a)}runInternalGraph(e,t){t==null&&(t=Jl(null,e.length));let n={};for(let o=0;o<this.inputs.length;++o){let l=this.inputs[o],d=e[o],u=t[o];n[l.id]=[d,u]}let r=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Nb);for(let o of r){let l=this.nodesByDepth[o];for(let d of l){let u=d.outboundLayer,c=d.inputTensors,h=d.outputTensors,p=new Array;for(let f of c)f.id in n&&p.push(n[f.id]);if(p.length===c.length){let f={},m,g,b,y;if(d.callArgs!=null&&(f=d.callArgs),p.length===1){let[v,x]=p[0];f.mask==null&&(f.mask=x),b=Mt(u.call(v,f)),y=Mt(u.computeMask(v,x)),m=[v],g=[x]}else m=p.map(v=>v[0]),g=p.map(v=>v[1]),f.mask==null&&(f.mask=g),b=Mt(u.call(m,f)),y=Mt(u.computeMask(m,g));if(u.activityRegularizer)throw new qe("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let v=0;v<h.length;++v){let x=h[v],w=b[v],$=y[v];n[x.id]=[w,$]}}}}let a=[],i=[],s=[];for(let o of this.outputs){Vi(o.id in n,"Could not compute output ".concat(o.name," : ").concat(o.id));let[l,d]=n[o.id];s.push(l.shape),a.push(l),i.push(d)}return[a,i,s]}buildNodeConversionMap(e){let t={},n;for(let r of this.layers){n=r instanceof Pi?1:0;for(let a=0;a<r.inboundNodes.length;a++){let i=Pi.nodeKey(r,a);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new q("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(let n of this.layers)if(n.name===e)return n;throw new q("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new q("Was asked to retrieve layer at index ".concat(e,", but model only has ").concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return G(()=>{let e=[];for(let t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){let r=Pi.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(let i of this.layers){let s=i.getClassName(),o=i.getConfig(),l=[];for(let u=0;u<i.inboundNodes.length;u++){let c=i.inboundNodes[u],h=Pi.nodeKey(i,u),p={};if(this.containerNodes.has(h)){if(c.callArgs)try{JSON.stringify(c.callArgs),p=c.callArgs}catch(f){console.warn("Layer ".concat(i.name," was passed non-serializable keyword arguments: ").concat(c.callArgs,". They will not be included in the serialized model (and thus will be missing at deserialization time).")),p={}}if(c.inboundLayers.length>0){let f=[];for(let m=0;m<c.inboundLayers.length;m++){let g=c.inboundLayers[m],b=c.nodeIndices[m],y=c.tensorIndices[m],v=Pi.nodeKey(g,b),x=t[v];x==null&&(x=0),f.push([g.name,x,y,p])}l.push(f)}}}let d={};d.name=i.name,d.className=s,d.config=o,d.inboundNodes=l,n.push(d)}e.layers=n;let r=[];for(let i=0;i<this.inputLayers.length;i++){let s=this.inputLayers[i],o=this.inputLayersNodeIndices[i],l=Pi.nodeKey(s,o);if(!this.containerNodes.has(l))continue;let d=t[l];d==null&&(d=0);let u=this.inputLayersTensorIndices[i];r.push([s.name,d,u])}e.inputLayers=r;let a=[];for(let i=0;i<this.outputLayers.length;i++){let s=this.outputLayers[i],o=this.outputLayersNodeIndices[i],l=Pi.nodeKey(s,o);if(!this.containerNodes.has(l))continue;let d=t[l];d==null&&(d=0);let u=this.outputLayersTensorIndices[i];a.push([s.name,d,u])}return e.outputLayers=a,e}static fromConfig(e,t,n={},r=!1){let a={},i={};function s(m,g){m.name in i?i[m.name].push(g):i[m.name]=[g]}function o(m,g){let b=[],y;for(let v of g){let x=v[0],w=v[1],$=v[2];if(y=v[3]==null?{}:v[3],!(x in a)){s(m,g);return}let C=a[x];if(C.inboundNodes.length<=w){s(m,g);return}let E=C.inboundNodes[w];b.push(E.outputTensors[$])}b.length>0&&m.apply(Pr(b),y)}function l(m){let g=m.name,b=$i(m,t.customObjects!=null?t.customObjects:{});b.setFastWeightInitDuringBuild(r),a[g]=b,m.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new q("Corrupted configuration, expected array for nodeData: ".concat(y));s(b,y)})}let d=t.name,u=t.layers;for(let m of u)l(m);for(;!_le(i);)for(let m of u){let g=a[m.name];if(g.name in i){let b=i[g.name];delete i[g.name];for(let y of b)o(g,y)}}let c=[],h=[],p=t.inputLayers;for(let m of p){let g=m[0],b=m[1],y=m[2];Vi(g in a);let v=a[g].inboundNodes[b].outputTensors;c.push(v[y])}let f=t.outputLayers;for(let m of f){let g=m[0],b=m[1],y=m[2];Vi(g in a);let v=a[g].inboundNodes[b].outputTensors;h.push(v[y])}return new e({inputs:c,outputs:h,name:d})}get stateful(){if(this._stateful)throw new q("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){G(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function nde(e,t,n){let r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(a=>null);if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," element(s), but the model has ").concat(r," outputs. Make sure a set of weights is provided for each model output."));return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){let a=[];return t.forEach(i=>{i in e?a.push(e[i]):a.push(null)}),a}else throw new Error("The model has multiple (".concat(r,") outputs, so ").concat(n," must be either an array with ").concat(r," elements or an object with ").concat(t," keys. Provided ").concat(n," not understood: ").concat(JSON.stringify(e)))}function bz(e,t){return nde(e,t,"classWeight")}async function yz(e,t,n,r){if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let a=G(()=>{if(e.shape.length===1)return Ki(e);if(e.shape.length===2){if(e.shape[1]>1)return ql(e,1);if(e.shape[1]===1)return j(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") during handling of class weights. The size is expected to be >= 1."))}else throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during handling of class weights. The rank is expected to be 1 or 2."))}),i=Array.from(await a.data());Be(a);let s=[];return i.forEach(o=>{if(n[o]==null)throw new Error("classWeight must contain all classes in the training data. The class ".concat(o," exists in the data but not in classWeight"));s.push(n[o])}),mt(s,"float32")}else return null}function rde(e,t){return U(e,t)}var ade=32;function vz(e,t){let n,r,a=t;n=a.xs,r=a.ys,k.assert(n!=null&&r!=null,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ".concat(t));let i=eR("input",e.inputNames,n),s=eR("output",e.outputNames,r),o=i[0].shape[0];k.assert(i.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset provides ").concat(i.length," inputs.  (Expected input keys: ").concat(JSON.stringify(e.inputNames),")")),k.assert(s.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset provides ").concat(s.length," outputs.  (Expected output keys: ").concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<i.length;l++)k.assert(i[l].shape[0]===o,()=>"Batch size mismatch: input ".concat(e.inputNames[l]," has ").concat(i[l].shape[0],"; expected  ").concat(o," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<s.length;l++)k.assert(s[l].shape[0]===o,()=>"Batch size mismatch: output ".concat(e.outputNames[l]," has ").concat(s[l].shape[0],"; expected  ").concat(o," based on input ").concat(e.inputNames[0],"."));return{xs:i,ys:s}}function eR(e,t,n){if(n instanceof Ue)return[n];if(Array.isArray(n))return k.assert(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{let r=[];for(let a of t){if(n[a]==null)throw new q("The feature data generated by the dataset lacks the required ".concat(e," key '").concat(a,"'."));r.push(n[a])}return r}}function ide(e){if(e.length===3)throw new qe("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function sde(e,t,n){let r=n.batchesPerEpoch!=null;if(k.assert(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),k.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),k.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got ".concat(n.epochs)),k.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ".concat(n.batchesPerEpoch)),k.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let a=n.validationData!=null,i,s;if(a)if(tR(n.validationData))k.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ".concat(n.validationBatches));else{let g=ide(n.validationData);i=g.xs,s=g.ys}let o=e.makeTrainFunction(),l=e.getDedupedMetricsNames(),d;a?d=l.slice().concat(l.map(g=>"val_"+g)):d=l.slice();let u=uz(n.callbacks,n.yieldEvery),c=n.verbose==null?1:n.verbose,{callbackList:h,history:p}=dz(u,c,n.epochs,null,null,ode(t,n),null,a,d);h.setModel(e),e.history=p,await h.onTrainBegin(),e.stopTraining_=!1;let f=n.initialEpoch==null?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){let g={};await h.onEpochBegin(f);let b=0,y=0;for(r||(m=await t.iterator());!r||b<n.batchesPerEpoch;){let v=await m.next();if(r&&v.done){console.warn("You provided `batchesPerEpoch` as ".concat(n.batchesPerEpoch,", but your dataset iterator ran out of data after ").concat(b," batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, ").concat(n.batchesPerEpoch*n.epochs," batches). You may need to use the repeat() function when building your dataset."));break}if(v.value!=null){let{xs:x,ys:w}=vz(e,v.value),$={};$.batch=y,$.size=x[0].shape[0],await h.onBatchBegin(y,$);let C=[];if(n.classWeight!=null){let R=bz(n.classWeight,e.outputNames);for(let N=0;N<R.length;++N)C.push(await yz(w[N],null,R[N]))}let E=x.concat(w).concat(C),A=o(E);Be(E);for(let R=0;R<l.length;++R){let N=l[R],I=A[R];$[N]=I,In(I)}await h.onBatchEnd(y,$),iz($),y++,b++}if(r?b>=n.batchesPerEpoch:v.done){if(a){let x;tR(n.validationData)?x=Mt(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=Mt(e.evaluate(i,s,{batchSize:n.validationBatchSize==null?ade:n.validationBatchSize,verbose:0}));for(let w=0;w<e.metricsNames.length;++w)g["val_".concat(e.metricsNames[w])]=x[w]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(f,g),f++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function ode(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function tR(e){return typeof e.iterator=="function"}function lde(e){return typeof e.next=="function"}async function ude(e,t,n){n=n||{};let r=n.batches!=null,a=e.testFunction,i=[];if(n.verbose>0)throw new qe("Verbose mode is not implemented yet.");k.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received ".concat(JSON.stringify(n.batches)));let s=lde(t)?t:await t.iterator(),o=0,l=0;for(;!r||l<n.batches;){let d=await s.next();if(i=G(()=>{if(d.value){let{xs:u,ys:c}=vz(e,d.value),h=u.concat(c),p=G(()=>a(h));if(Be(h),l===0)for(let m=0;m<p.length;++m)i.push(Ae(0));let f=h[0].shape[0];for(let m=0;m<p.length;++m){let g=p[m],b=i[m];i[m]=G(()=>ne(i[m],U(f,g))),l>0&&Be(b)}Be(p),o+=f,++l}return i}),d.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, ".concat(n.batches," batches). You may need to use the repeat() function when building your dataset."));break}}for(let d=0;d<i.length;++d){let u=i[d];i[d]=Se(i[d],o),Be(u)}return Pr(i)}function i1(e){k.assert(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function ef(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(r=>Nl(r,t,n-t)):Nl(e,t,n-t)}function Yk(e,t){return G(()=>e==null?null:Array.isArray(e)?e.map(n=>Yk(n,t)):ZP(e,t.dtype==="int32"?t:ce(t,"int32")))}function s1(e,t){let n=[],r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function xz(e){let t=[];e instanceof Ue&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(r.rank===1)t.push(Ng(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function di(e,t){if(e==null)return;let n=[];if(t instanceof Ue)n.push(t.id);else if(Array.isArray(t))t.forEach(a=>n.push(a.id));else if(t!=null)for(let a in t){let i=t[a];n.push(i.id)}let r=[];if(e instanceof Ue)n.indexOf(e.id)===-1&&r.push(e);else if(Array.isArray(e))e.forEach(a=>{n.indexOf(a.id)===-1&&r.push(a)});else if(e!=null)for(let a in e){let i=e[a];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(a=>{a.isDisposed||a.dispose()})}function dde(e){return e instanceof Ue}function Zk(e){return Array.isArray(e)}function nR(e){return!dde(e)&&!Zk(e)}function rR(e,t,n,r=!0,a=""){if(t==null||t.length===0){if(e!=null){let s=!1;if(Zk(e)&&e.length>0)s=!0;else if(nR(e)){for(let o in e)if(e.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new q("Error when checking model ".concat(a," expected no data, but got ").concat(e))}return[]}if(e==null)return t.map(s=>null);let i;if(nR(e)){e=e,i=[];for(let s of t){if(e[s]==null)throw new q('No data provided for "'.concat(s,'". Need data for each key in: ').concat(t));i.push(e[s])}}else if(Zk(e)){if(e=e,e.length!==t.length)throw new q("Error when checking model ".concat(a,": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got the following list of Tensor(s): ").concat(e));i=e}else{if(e=e,t.length>1)throw new q("The model ".concat(a," expects ").concat(t.length," Tensor(s), but only received one Tensor. Found: Tensor with shape ").concat(e.shape));i=[e]}if(i=xz(i),n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;let o=i[s];if(o.shape.length!==n[s].length)throw new q("Error when checking ".concat(a,": expected ").concat(t[s]," to have ").concat(n[s].length," dimension(s). but got array with shape ").concat(o.shape));for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;let d=o.shape[l],u=n[s][l];if(u!=null&&u>=0&&d!==u)throw new q("".concat(a," expected a batch of elements where each example has shape [").concat(n[s].slice(1,n[s].length),"] (i.e.,tensor shape [*,").concat(n[s].slice(1,n[s].length),"]) but the ").concat(a," received an input with ").concat(o.shape[0]," examples, each with shape [").concat(o.shape.slice(1,o.shape.length),"] (tensor shape [").concat(o.shape,"])"))}}return i}function cde(e,t,n){let r=go(e.map(i=>i.shape[0]));r.sort();let a=go(t.map(i=>i.shape[0]));if(a.sort(),r.length>1)throw new q("All input Tensors (x) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(e.map(i=>i.shape))));if(a.length>1)throw new q("All target Tensors (y) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(t.map(i=>i.shape))));if(r.length>0&&a.length>0&&!k.arraysEqual(r,a))throw new q("Input Tensors should have the same number of samples as target Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target sample(s)."))}function hde(e,t,n){let r=[Fd,Fx,mm];for(let a=0;a<e.length;++a){let i=e[a],s=t[a],o=n[a];if(s!=null){if(s===mm&&i.shape[i.shape.length-1]===1)throw new q("You are passing a target array of shape ".concat(i.shape," while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes]."));if(r.indexOf(s)!==-1){let l=i.shape.slice(1),d=o.slice(1);for(let u=0;u<l.length;++u){let c=l[u],h=d[u];if(h!=null&&c!==h)throw new q("A target Tensor with shape ".concat(i.shape," was passed for an output of shape ").concat(o,", while using a loss function that expects targets to have the same shape as the output."))}}}}}function aR(e,t,n,r=!0,a=""){let i;if(Array.isArray(e)){if(e.length!==t.length)throw new q("Error when checking model ".concat(a,": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got ").concat(e.length," Tensors(s)."));i=e}else{if(t.length>1)throw new q("The model expects ".concat(t.length," ").concat(a," Tensors, but only received one Tensor. Found: array with shape ").concat(JSON.stringify(e.shape),"."));i=[e]}if(n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;let o=i[s];if(o.shape.length!==n[s].length)throw new q("Error when checking ".concat(a,": expected ").concat(t[s]," to have ").concat(n[s].length," dimension(s), but got array with shape ").concat(JSON.stringify(o.shape)));for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;let d=o.shape[l],u=n[s][l];if(u!=null&&u!==d)throw new q("Error when checking ".concat(a,": expected ").concat(t[s]," to have shape ").concat(JSON.stringify(n[s])," but got array with shape ").concat(JSON.stringify(o.shape),"."))}}}function pde(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(r=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ".concat(e));if(Array.isArray(n))return t.map(r=>n);{let r=[];for(let a of t){let i=n.hasOwnProperty(a)?n[a]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}var fde="layers-model",Is=class extends Pi{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new q("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Zue(this,e,t,n)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Yue(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Ps))throw new q("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new q('Unknown entry in loss dictionary: "'.concat(i,'". Only expected the following keys: ').concat(this.outputNames));for(let i of this.outputNames)e.loss[i]==null&&console.warn('Output "'.concat(i,'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ').concat(i," during training")),t.push(a1(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new q("When passing an Array as loss, it should have one entry per model output. The model has ".concat(this.outputs.length," output(s), but you passed loss=").concat(e.loss,"."));t=e.loss.map(i=>a1(i))}else{let i=a1(e.loss);this.outputs.forEach(s=>{t.push(i)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){let s=this.internalOutputShapes[i],o=this.outputNames[i];this.feedOutputNames.push(o),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[i])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Tl("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(n.indexOf(i)!==-1)continue;let s=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([s,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});let r=pde(e.metrics,this.outputNames),a=(i,s,o)=>{this.outputNames.length>1&&(s=this.outputNames[i]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([o,i])};Tl("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(n.indexOf(i)!==-1)continue;let s=r[i];(o=>{let l="",d,u,c;for(let h of o){if(typeof h=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(h)!==-1){let f=this.internalOutputShapes[i];f[f.length-1]===1||this.lossFunctions[i]===Fx?["accuracy","acc"].indexOf(h)!==-1?u=iC:["crossentropy","ce"].indexOf(h)!==-1&&(u=pz):this.lossFunctions[i]===bv?["accuracy","acc"].indexOf(h)!==-1?u=fz:["crossentropy","ce"].indexOf(h)!==-1&&(u=mz):["accuracy","acc"].indexOf(h)!==-1?u=sC:["crossentropy","ce"].indexOf(h)!==-1&&(u=oC);let m;["accuracy","acc"].indexOf(h)!==-1?m="acc":["crossentropy","ce"].indexOf(h)!==-1&&(m="ce"),c=u,d=l+m}else c=Xue(h),d=l+Rb(h);let p;Tl(d,()=>{p=c}),a(i,d,p)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let r=n.batchSize==null?32:n.batchSize;i1(r);let a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{let s=i[0].concat(i[1]);this.makeTestFunction();let o=this.testFunction,l=this.testLoop(o,s,r,n.verbose,n.steps);return Pr(l)}finally{di(i[0],e),di(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),ude(this,e,t)}checkNumSamples(e,t,n,r="steps"){let a;if(n!=null){if(a=null,t!=null)throw new q("If ".concat(r," is set, batchSize must be null or undefined.Got batchSize = ").concat(t))}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new q("Either the input data should have a defined shape, or ".concat(r," shoud be specified."));return a}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new q("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new Sl;if(e instanceof Ue&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new q("The number of inputs provided (".concat(e.length,") does not match the number of inputs of this model (").concat(this.inputs.length,")."));for(let o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else for(let o of this.inputs){let l=e[o.name];if(l==null)throw new q("No value is provided for the model's input ".concat(o.name));i.add(o,l)}let s=hf(a,i);return n?s:s[0]}retrieveSymbolicTensors(e){let t=Jl(null,e.length),n=e.length;for(let r of this.layers){let a=Array.isArray(r.output)?r.output:[r.output],i=a.map(s=>s.name);for(let s=0;s<e.length;++s){let o=i.indexOf(e[s]);if(o!==-1&&(t[s]=a[o],n--),n===0)break}if(n===0)break}if(n>0){let r=[];throw t.forEach((a,i)=>{a==null&&r.push(e[i])}),new q("Cannot find SymbolicTensors for output name(s): ".concat(JSON.stringify(r)))}return t}predictLoop(e,t=32,n=!1){return G(()=>{let r=this.checkNumSamples(e);if(n)throw new qe("Verbose predictLoop() is not implemented yet.");let a=s1(r,t),i=this.outputs.map(s=>[]);for(let s=0;s<a.length;++s)G(()=>{let o=a[s][0],l=a[s][1],d=ef(e,o,l),u=[];if(Array.isArray(d))for(let h=0;h<d.length;++h)u.push({key:this.inputs[h],value:d[h]});else u.push({key:this.inputs[0],value:d});let c=new Sl(u);return hf(this.outputs,c)}).forEach((o,l)=>i[l].push(o));return Pr(i.map(s=>kt(s,0)))})}predict(e,t={}){let n=xz(e);aR(n,this.inputNames,this.feedInputShapes,!1);try{let r=t.batchSize==null?32:t.batchSize;return i1(r),this.predictLoop(n,r)}finally{di(n,e)}}predictOnBatch(e){aR(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(this.optimizer_==null)throw new yi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let a=[];for(let i=0;i<this.feedOutputShapes.length;++i){let s=this.feedOutputShapes[i];this.feedLossFns[i]===bv?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(e=rR(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=rR(t,this.feedOutputNames,a,!1,"target"),cde(e,t),hde(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&r!=null&&r>0&&e[0].shape[0]%r!==0)throw new q("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ".concat(r,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r,a=!0,i){let[s,o]=this.standardizeUserDataXY(e,t,a,i);if(n!=null)throw new Error("sample weight is not supported yet.");let l=null;if(r!=null){let d=bz(r,this.outputNames);l=[];for(let u=0;u<d.length;++u)l.push(await yz(o[u],null,d[u]))}return[s,o,l]}testLoop(e,t,n,r=0,a){return G(()=>{let i=this.checkNumSamples(t,n,a,"steps"),s=[];if(r>0)throw new qe("Verbose mode is not implemented yet.");if(a!=null)throw new qe("steps mode in testLoop() is not implemented yet");{let o=s1(i,n),l=mt(Ni(0,i));for(let d=0;d<o.length;++d){let u=o[d][0],c=o[d][1],h=Nl(l,u,c-u),p=Yk(t,h),f=e(p);if(d===0)for(let m=0;m<f.length;++m)s.push(Ae(0));for(let m=0;m<f.length;++m){let g=f[m];s[m]=ne(s[m],U(c-u,g))}}for(let d=0;d<s.length;++d)s[d]=Se(s[d],i)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let r=e[n],a=r;if(UA(e,r)>1){let i=UA(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],s=()=>{let d=[];for(let p=0;p<this.inputs.length;++p)d.push({key:this.inputs[p],value:n[p]});let u=new Sl(d),c=hf(this.outputs,u,{training:!0}),h;for(let p=0;p<this.lossFunctions.length;++p){let f=this.lossFunctions[p],m=f(r[p],c[p]);a[p]!=null&&(m=rde(m,a[p]));let g=qt(m);t.push(g),p===0?h=m:h=ne(h,m)}for(let p=0;p<this.metricsTensors.length;++p){let f;if(this.outputs.length>1&&p<this.outputs.length)f=t[p];else{let m=this.metricsTensors[p][0],g=this.metricsTensors[p][1];f=qt(m(r[g],c[g]))}In(f),i.push(f)}return h=qt(h),this.calculateLosses().forEach(p=>{h=ne(h,p)}),h},o=this.collectedTrainableWeights.map(d=>d.read()),l=!0;return[this.optimizer_.minimize(s,l,o)].concat(i)}}makeTestFunction(){this.testFunction=e=>G(()=>{let t=[],n,r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:r[l]});let s=new Sl(i),o=hf(this.outputs,s);for(let l=0;l<this.lossFunctions.length;++l){let d=this.lossFunctions[l],u=qt(d(a[l],o[l]));l===0?n=u:n=ne(n,u),t.push(n)}for(let l=0;l<this.metricsTensors.length;++l){let d=this.metricsTensors[l][0],u=this.metricsTensors[l][1],c=qt(d(a[u],o[u]));t.push(c)}return t})}async fit(e,t,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let r,a,i,s,o,l,d,u,c;try{let h=n.batchSize==null?32:n.batchSize;i1(h);let p=!1,f=await this.standardizeUserData(e,t,n.sampleWeight,n.classWeight,p,h);r=f[0],a=f[1],c=f[2];let m=!1,g;if(n.validationData!=null&&n.validationData.length>0){if(m=!0,n.validationData.length===2)o=n.validationData[0],l=n.validationData[1];else throw n.validationData.length===3?new qe("validationData including sample weights is not supported yet."):new q("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ".concat(n.validationData," is invalid."));let C=!0,E=await this.standardizeUserData(o,l,null,null,C,h);d=E[0],u=E[1],g=d.concat(u)}else if(n.validationSplit!=null&&n.validationSplit>0&&n.validationSplit<1){m=!0;let C=Math.floor(r[0].shape[0]*(1-n.validationSplit)),E=r[0].shape[0];d=ef(r,C,E),i=r,r=ef(r,0,C),u=ef(a,C,E),s=a,a=ef(a,0,C),g=d.concat(u)}else n.validationSteps!=null&&(m=!0);let b=r.concat(a).concat(c);this.checkTrainableWeightsConsistency();let y=this.makeTrainFunction(),v=this.getDedupedMetricsNames(),x,w;m?(this.makeTestFunction(),x=this.testFunction,w=v.slice().concat(v.map(C=>"val_"+C))):(x=null,g=[],w=v.slice());let $=uz(n.callbacks,n.yieldEvery);return await this.fitLoop(y,b,v,h,n.epochs,n.verbose,$,x,g,n.shuffle,w,n.initialEpoch,null,null)}finally{this.isTraining=!1,di(r,e),di(a,t),di(i,e),di(s,t),di(d,o),di(u,l),c!=null&&Be(c)}}async fitLoop(e,t,n,r,a,i,s,o,l,d,u,c,h,p){r==null&&(r=32),a==null&&(a=1),d==null&&(d=!0),c==null&&(c=0);let f=!1;if(o!=null&&l!=null&&(f=!0),p!=null&&(f=!0,h==null))throw new q("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let m=this.checkNumSamples(t,r,h,"steps_per_epoch"),g;m!=null&&(g=Ni(0,m)),i==null&&(i=1);let{callbackList:b,history:y}=dz(s,i,a,c,m,h,r,f,u);b.setModel(this),this.history=y,await b.onTrainBegin(),this.stopTraining_=!1;for(let v=c;v<a;++v){await b.onEpochBegin(v);let x={};if(h!=null)throw new qe("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new qe("batch shuffling is not implemneted yet");d&&k.shuffle(g);let w=mt(g),$=s1(m,r);for(let C=0;C<$.length;++C){let E={};if(await b.onBatchBegin(C,E),G(()=>{let A=$[C][0],R=$[C][1],N=Nl(w,A,R-A);E.batch=C,E.size=R-A;let I=Yk(t,N),F=e(I);for(let L=0;L<n.length;++L){let P=n[L],H=F[L];E[P]=H,In(H)}if(C===$.length-1&&f){let L=this.testLoop(o,l,r);for(let P=0;P<n.length;++P){let H=n[P],X=L[P];In(X),x["val_"+H]=X}}}),await b.onBatchEnd(C,E),iz(E),this.stopTraining_)break}w.dispose()}if(await b.onEpochEnd(v,x),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return sde(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),r=n[0],a=n[1],i=this.makeTrainFunction()(r.concat(a)),s=[];for(let o of i){let l=await o.data();s.push(l[0])}return Be(i),di(n[0],e),di(n[1],t),Pr(s)}getNamedWeights(e){let t=[],n=e!=null&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let t=dv().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-dv().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=fs(this.loss);else if(Array.isArray(this.loss)){for(let t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>fs(t))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let r of t)if(typeof n[r]=="string")e[r]=fs(n[r]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[fs(Rb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>fs(Rb(e)));{let e={};for(let t in this.metrics)e[t]=fs(Rb(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let t=gm(e.optimizer_config),n=$i(t),r;if(typeof e.loss=="string")r=fl(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(i=>fl(i));else if(e.loss!=null){r={};for(let i in e.loss)r[i]=fl(e.loss[i])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(i=>fl(i));else if(e.metrics!=null){a={};for(let i in e.metrics)a[i]=fl(e.metrics[i])}this.compile({loss:r,metrics:a,optimizer:n})}async save(e,t){if(typeof e=="string"){let s=Yn.getSaveHandlers(e);if(s.length===0)throw new q("Cannot find any save handlers for URL '".concat(e,"'"));if(s.length>1)throw new q("Found more than one (".concat(s.length,") save handlers for URL '").concat(e,"'"));e=s[0]}if(e.save==null)throw new q("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Yn.encodeWeights(this.getNamedWeights(t)),r=!1,a=null,i={modelTopology:this.toJSON(a,r),format:fde,generatedBy:"TensorFlow.js tfjs-layers v".concat(lC),convertedBy:null};if(t!=null&&t.includeOptimizer&&this.optimizer!=null){i.trainingConfig=this.getTrainingConfig();let s="optimizer",{data:o,specs:l}=await Yn.encodeWeights(await this.optimizer.getWeights(),s);n.specs.push(...l),n.data=Yn.concatenateArrayBuffers([n.data,o])}return this.userDefinedMetadata!=null&&(JA(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=n.data,i.weightSpecs=n.specs,e.save(i)}setUserDefinedMetadata(e){JA(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Is.className="Model";le.registerClass(Is);var wz=class extends Is{};wz.className="Functional";le.registerClass(wz);async function mde(e,t){"modelTopology"in e||(e={modelTopology:e}),e=e;let n=e.modelTopology;n.model_config!=null&&(n=n.model_config);let r=gm(n),a=$i(r,t);if(e.weightsManifest!=null){let i=await Yn.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map(o=>o.originalName)),s={};for(let o of a.weights)s[o.originalName]=i[o.originalName];a.loadWeights(s),Be(i)}return a}async function gde(e,t){if(t==null&&(t={}),typeof e=="string"){let n=Yn.getLoadHandlers(e,t);if(n.length===0)n.push(Yn.browserHTTPRequest(e,t));else if(n.length>1)throw new q("Found more than one (".concat(n.length,") load handlers for URL '").concat(e,"'"));e=n[0]}return bde(e,void 0,t)}async function bde(e,t,n){if(n==null&&(n={}),e.load==null)throw new q("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),a=r.modelTopology;a.model_config!=null&&(a=a.model_config);let i=n.strict==null?!0:n.strict,s=r.weightData!=null&&r.weightSpecs!=null&&i,o=$i(gm(a),t,s),l=r.trainingConfig;if(l!=null&&o.loadTrainingConfig(l),r.userDefinedMetadata!=null&&o.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new q("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:d,optimizerWeights:u}=yde(r.weightData,r.weightSpecs);o.loadWeights(d,i),o.optimizer!=null&&u.length>0&&await o.optimizer.setWeights(u),Be(d),Be(u.map(c=>c.tensor))}return o}function yde(e,t){let n=Yn.decodeWeights(e,t),r={},a=[];return t.forEach(i=>{i.group==="optimizer"?a.push({name:i.name,tensor:n[i.name]}):r[i.name]=n[i.name]}),{modelWeights:r,optimizerWeights:a}}var sh=class extends Is{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Sx("sequential_"),e.layers!=null)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new q("Negative dimension size caused by adding layer ".concat(e.name," with input shape [").concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){let t=e instanceof sh||e instanceof Is,n;if(t){if(n=e,n.outputs.length!==1)throw new q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(n.inputs.length!==1)throw new q("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new q("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let r=tz({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(e.inboundNodes.length!==1)throw new q("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ".concat(e.name," which has ").concat(e.inboundNodes.length," pre-existing inbound connections."));if(e.inboundNodes[0].outputTensors.length!==1)throw new q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=ez(this.outputs[0])}this.inboundNodes=[],new Rx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Jl(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{let r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(st(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Is({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new yi("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new yi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new yi("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new yi("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a,i={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new q("Legacy serialization format not supported yet.");a=t}else k.assert(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,i=t;let s=new e(i);if(!(s instanceof sh))throw new qe("Sequential.fromConfig called on non-Sequential input: ".concat(s));for(let o of a){let l=$i(o,void 0,r);r&&l.setFastWeightInitDuringBuild(!0),s.add(l)}return s}set stopTraining(e){if(this.model==null)throw new q("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new q("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};sh.className="Sequential";le.registerClass(sh);function vde(e){return new Is(e)}function xde(e){return new sh(e)}function kz(e){return tz(e)}function wde(e,t){Ha.registerCallbackConstructor(e,t)}var qr=class extends le.Serializable{getConfig(){return{}}},Sz=class extends qr{apply(e,t=1){return jle(e,t)}};Sz.className="elu";le.registerClass(Sz);var Iz=class extends qr{apply(e){return sx(e)}};Iz.className="selu";le.registerClass(Iz);var $z=class extends qr{apply(e){return gt(e)}};$z.className="relu";le.registerClass($z);var Cz=class extends qr{apply(e){return G(()=>Co(6,gt(e)))}};Cz.className="relu6";le.registerClass(Cz);var Ez=class extends qr{apply(e){return e}};Ez.className="linear";le.registerClass(Ez);var Tz=class extends qr{apply(e){return Za(e)}};Tz.className="sigmoid";le.registerClass(Tz);var Nz=class extends qr{apply(e){return qle(e)}};Nz.className="hardSigmoid";le.registerClass(Nz);var _z=class extends qr{apply(e){return Ad(e)}};_z.className="softplus";le.registerClass(_z);var Az=class extends qr{apply(e){return Gle(e)}};Az.className="softsign";le.registerClass(Az);var Rz=class extends qr{apply(e){return Xl(e)}};Rz.className="tanh";le.registerClass(Rz);var uC=class extends qr{apply(e,t=-1){return qo(e,t)}};uC.className="softmax";le.registerClass(uC);var Dz=class extends qr{apply(e,t=-1){return Q0(e,t)}};Dz.className="logSoftmax";le.registerClass(Dz);var Fz=class extends qr{apply(e,t=1){return G(()=>U(Za(U(e,t)),e))}};Fz.className="swish";le.registerClass(Fz);var Mz=class extends qr{apply(e){return G(()=>U(e,Xl(Ad(e))))}};Mz.className="mish";le.registerClass(Mz);function No(e){return e.getClassName()}function o1(e,t={}){return Tg(e,le.SerializationMap.getMap().classNameMap,t,"activation")}function _o(e){if(e==null){let t={};return t.className="linear",t.config={},o1(t)}if(typeof e=="string"){let t={};return t.className=e,t.config={},o1(t)}else return e instanceof qr?e:o1(e)}function dC(e){if(e!=null&&typeof e!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: ".concat(e))}var Oz=class extends le.Serializable{},Dg=class extends Oz{constructor(e){super(),dC(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return G(()=>{let t=Kt([1]);return this.hasL1&&(t=ne(t,Ie(U(this.l1,cn(e))))),this.hasL2&&(t=ne(t,Ie(U(this.l2,_g(e))))),j(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};Dg.className="L1L2";le.registerClass(Dg);function kde(e){return dC(e),new Dg({l1:e!=null?e.l1:null,l2:0})}function Sde(e){return dC(e),new Dg({l2:e!=null?e.l2:null,l1:0})}var iR={l1l2:"L1L2"};function Et(e){return V2(e)}function sR(e,t={}){return Tg(e,le.SerializationMap.getMap().classNameMap,t,"regularizer")}function Vt(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in iR?iR[e]:e,config:{}};return sR(t)}else return e instanceof Oz?e:sR(e)}var cC=class extends Ye{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=Me(e);let n=gt(e);return this.maxValue!=null&&(n=cr(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};cC.className="ReLU";le.registerClass(cC);var hC=class extends Ye{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=Me(e);return yg(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};hC.className="LeakyReLU";le.registerClass(hC);var pC=class extends Ye{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Wt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Vt(e.alphaRegularizer),this.alphaConstraint=Nn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new q("Expected sharedAxes to be a number or an array of numbers, but got ".concat(e.sharedAxes))}build(e){e=st(e);let t=e.slice(1);if(this.sharedAxes!=null)for(let r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(this.sharedAxes!=null)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new pn({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Me(e),Sg(e,this.alpha.read())}getConfig(){let e={alphaInitializer:Xt(this.alphaInitializer),alphaRegularizer:Et(this.alphaRegularizer),alphaConstraint:Tn(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};pC.className="PReLU";le.registerClass(pC);var fC=class extends Ye{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new qe("Non-default alpha value (".concat(e.alpha,") is not supported by the ELU layer yet."));this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=Me(e);return Sp(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};fC.className="ELU";le.registerClass(fC);var mC=class extends Ye{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){let n=Me(e);return U(n,ce(Rr(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};mC.className="ThresholdedReLU";le.registerClass(mC);var gC=class extends Ye{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new uC().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){let n=Me(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};gC.className="Softmax";le.registerClass(gC);function Dc(e,t,n){if(typeof e=="number")return Jl(e,t);if(e.length!==t)throw new q("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(e.length," elements."));for(let r=0;r<t;++r){let a=e[r];if(!Wle(a))throw new q("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(JSON.stringify(e)," including a non-integer number ").concat(a))}return e}function Ci(e,t,n,r,a=1){if(e==null)return e;let i=t+(t-1)*(a-1),s;return n==="same"?s=e:s=e-i+1,Math.floor((s+r-1)/r)}function Ui(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+To([n-t,0]);else if(r==="same")e=e*t;else throw new q("Unsupport padding mode: ".concat(r,"."));return e}function bC(e,t){return G(()=>(on(t),t==="channelsFirst"?Ke(e,[0,2,3,1]):e))}function Lz(e,t){return G(()=>(on(t),t==="channelsFirst"?Ke(e,[0,2,3,4,1]):e))}function Ide(e,t,n,r=1,a="valid",i,s=1){return G(()=>{if(i==null&&(i=_i()),on(i),e.shape.length!==3)throw new q("The input of a conv1dWithBias operation should be 3, but is ".concat(e.shape.length," instead."));if(t.shape.length!==3)throw new q("The kernel for a conv1dWithBias operation should be 3, but is ".concat(t.shape.length," instead"));if(n!=null&&n.shape.length!==1)throw new q("The bias for a conv1dWithBias operation should be 1, but is ".concat(t.shape.length," instead"));if(i==="channelsFirst"&&(e=Ke(e,[0,2,1])),a==="causal")throw new qe("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=G0(e,t,r,a==="same"?"same":"valid","NWC",s);return n!=null&&(o=Di(o,n)),o})}function oR(e,t,n,r=[1,1],a="valid",i,s,o=null){return G(()=>{if(i==null&&(i=_i()),on(i),e.rank!==3&&e.rank!==4)throw new q("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ".concat(e.rank,"."));if(t.rank!==3&&t.rank!==4)throw new q("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ".concat(e.rank,"."));let l=bC(e,i);if(a==="causal")throw new qe("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=nh.conv2d({x:l,filter:t,strides:r,pad:a==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(l=Ke(l,[0,3,1,2])),l})}function $de(e,t,n,r=[1,1,1],a="valid",i,s){return G(()=>{if(i==null&&(i=_i()),on(i),e.rank!==4&&e.rank!==5)throw new q("conv3dWithBias expects input to be of rank 4 or 5, but received ".concat(e.rank,"."));if(t.rank!==4&&t.rank!==5)throw new q("conv3dWithBias expects kernel to be of rank 4 or 5, but received ".concat(e.rank,"."));let o=Lz(e,i);if(a==="causal")throw new qe("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=j$(o,t,r,a==="same"?"same":"valid","NDHWC",s),n!=null&&(o=Di(o,n)),i==="channelsFirst"&&(o=Ke(o,[0,4,1,2,3])),o})}var yC=class extends Ye{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",yC.verifyArgs(t),this.rank=e,Bn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new qe("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is not implemented yet."));if(this.kernelSize=Dc(t.kernelSize,e,"kernelSize"),this.strides=Dc(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,za(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,on(this.dataFormat),this.activation=_o(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=Wt(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Nn(t.biasConstraint),this.biasRegularizer=Vt(t.biasRegularizer),this.activityRegularizer=Vt(t.activityRegularizer),this.dilationRate=Dc(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new q("dilationRate must be a number or an array of a single number for 1D convolution, but received ".concat(JSON.stringify(this.dilationRate)));if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new q("dilationRate must be a number or array of two numbers for 2D convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new q("dilationRate must be a number or array of three numbers for 3D convolution, but received ".concat(JSON.stringify(this.dilationRate)))}}static verifyArgs(e){if(Vi("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!U2(e.kernelSize,"number",1,3))throw new q("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:No(this.activation),useBias:this.useBias,biasInitializer:Xt(this.biasInitializer),biasRegularizer:Et(this.biasRegularizer),activityRegularizer:Et(this.activityRegularizer),biasConstraint:Tn(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},Fg=class extends yC{constructor(e,t){super(e,t),this.kernel=null,Fg.verifyArgs(t),this.filters=t.filters,Bn(this.filters,"filters"),this.kernelInitializer=Wt(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Nn(t.kernelConstraint),this.kernelRegularizer=Vt(t.kernelRegularizer)}build(e){e=st(e);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new q("The channel dimension of the input should be defined. Found ".concat(e[t]));let n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return G(()=>{e=Me(e);let n,r=this.bias==null?null:this.bias.read(),a=jP(this.activation.getClassName());if(a!=null&&this.rank===2)n=oR(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)n=Ide(e,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)n=oR(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)n=$de(e,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new qe("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(n=this.activation.apply(n))}return n})}computeOutputShape(e){e=st(e);let t=[],n=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){let i=Ci(n[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);t.push(i)}let r=[e[0]];return this.dataFormat==="channelsLast"?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){let e={filters:this.filters,kernelInitializer:Xt(this.kernelInitializer),kernelRegularizer:Et(this.kernelRegularizer),kernelConstraint:Tn(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new q("Convolution layer expected config.filters to be a 'number' > 0 but got ".concat(JSON.stringify(e.filters)))}},Mg=class extends Fg{constructor(e){super(2,e),Mg.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!U2(e.kernelSize,"number",1,2))throw new q("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}};Mg.className="Conv2D";le.registerClass(Mg);var Og=class extends Fg{constructor(e){super(3,e),Og.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new q("Conv3D expects config.kernelSize to be number or [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}};Og.className="Conv3D";le.registerClass(Og);var vC=class extends Mg{constructor(e){if(super(e),this.inputSpec=[new pn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new q("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(this.padding))}build(e){if(e=st(e),e.length!==4)throw new q("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new q("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pn({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return G(()=>{let n=Me(e);if(n.shape.length!==4)throw new q("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(n.shape.length));let r=n.shape,a=r[0],i,s;this.dataFormat==="channelsFirst"?(i=2,s=3):(i=1,s=2);let o=r[i],l=r[s],d=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],h=this.strides[1],p=Ui(o,c,d,this.padding),f=Ui(l,h,u,this.padding),m=[a,p,f,this.filters];this.dataFormat!=="channelsLast"&&(n=Ke(n,[0,2,3,1]));let g=q0(n,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=Ke(g,[0,3,1,2])),this.bias!=null&&(g=Di(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=st(e);let t=e.slice(),n,r,a;this.dataFormat==="channelsFirst"?(n=1,r=2,a=3):(n=3,r=1,a=2);let i=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=Ui(t[r],o,i,this.padding),t[a]=Ui(t[a],l,s,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};vC.className="Conv2DTranspose";le.registerClass(vC);var xC=class extends Og{constructor(e){if(super(e),this.inputSpec=[new pn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new q("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(this.padding))}build(e){if(e=st(e),e.length!==5)throw new q("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new q("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pn({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return G(()=>{let n=Me(e);if(n.shape.length!==5)throw new q("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(n.shape.length));let r=n.shape,a=r[0],i,s,o;this.dataFormat==="channelsFirst"?(o=2,i=3,s=4):(o=1,i=2,s=3);let l=r[o],d=r[i],u=r[s],c=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],f=this.strides[0],m=this.strides[1],g=this.strides[2],b=Ui(l,f,c,this.padding),y=Ui(d,m,h,this.padding),v=Ui(u,g,p,this.padding),x=[a,b,y,v,this.filters];this.dataFormat!=="channelsLast"&&(n=Ke(n,[0,2,3,4,1]));let w=G$(n,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=Ke(w,[0,4,1,2,3])),this.bias!==null&&(w=Di(w,this.bias.read(),this.dataFormat)),this.activation!==null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=st(e);let t=e.slice(),n,r,a,i;this.dataFormat==="channelsFirst"?(n=1,r=2,a=3,i=4):(n=4,r=1,a=2,i=3);let s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],d=this.strides[0],u=this.strides[1],c=this.strides[2];return t[n]=this.filters,t[r]=Ui(t[r],d,s,this.padding),t[a]=Ui(t[a],u,o,this.padding),t[i]=Ui(t[i],c,l,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};xC.className="Conv3DTranspose";le.registerClass(xC);var Pz=class extends Fg{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new q("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new q("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new q("SeparableConv".concat(this.rank,"D supports only padding modes: 'same' and 'valid', but received ").concat(JSON.stringify(t.padding)));this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Wt(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Vt(t.depthwiseRegularizer),this.depthwiseConstraint=Nn(t.depthwiseConstraint),this.pointwiseInitializer=Wt(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Vt(t.pointwiseRegularizer),this.pointwiseConstraint=Nn(t.pointwiseConstraint)}build(e){if(e=st(e),e.length<this.rank+2)throw new q("Inputs to SeparableConv".concat(this.rank,"D should have rank ").concat(this.rank+2,", but received input shape: ").concat(JSON.stringify(e)));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new q("The channel dimension of the inputs should be defined, but found ".concat(JSON.stringify(e[t])));let n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(n*this.depthMultiplier,this.filters);let i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new pn({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return G(()=>{e=Me(e);let n;if(this.rank===1)throw new qe("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ke(e,[0,2,3,1])),n=Ep(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(n=Di(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),this.dataFormat==="channelsFirst"&&(n=Ke(n,[0,3,1,2])),n})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Xt(this.depthwiseInitializer),e.pointwiseInitializer=Xt(this.pointwiseInitializer),e.depthwiseRegularizer=Et(this.depthwiseRegularizer),e.pointwiseRegularizer=Et(this.pointwiseRegularizer),e.depthwiseConstraint=Tn(this.depthwiseConstraint),e.pointwiseConstraint=Tn(this.pointwiseConstraint),e}};Pz.className="SeparableConv";var wC=class extends Pz{constructor(e){super(2,e)}};wC.className="SeparableConv2D";le.registerClass(wC);var Mx=class extends Fg{constructor(e){super(1,e),Mx.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!U2(e.kernelSize,"number",1,1))throw new q("Conv1D expects config.kernelSize to be number or number[] with length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}};Mx.className="Conv1D";le.registerClass(Mx);var kC=class extends Ye{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return G(()=>{if(e=Me(e),this.dataFormat==="channelsLast"){let n=Ab(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Ab(n,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let n=Ab(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Ab(n,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};kC.className="Cropping2D";le.registerClass(kC);var SC=class extends Ye{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Ple(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let t=e[2]==null?null:this.size[0]*e[2],n=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,n]}else{let t=e[1]==null?null:this.size[0]*e[1],n=e[2]==null?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return G(()=>{let n=Me(e),r=n.shape;if(this.dataFormat==="channelsFirst"){n=Ke(n,[0,2,3,1]);let a=this.size[0]*r[2],i=this.size[1]*r[3],s=this.interpolation==="nearest"?$a.resizeNearestNeighbor(n,[a,i]):$a.resizeBilinear(n,[a,i]);return Ke(s,[0,3,1,2])}else{let a=this.size[0]*r[1],i=this.size[1]*r[2];return this.interpolation==="nearest"?$a.resizeNearestNeighbor(n,[a,i]):$a.resizeBilinear(n,[a,i])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}};SC.className="UpSampling2D";le.registerClass(SC);function Cde(e,t,n=[1,1],r="valid",a,i){return G(()=>{a==null&&(a=_i()),on(a);let s=bC(e,a);if(e.rank!==4)throw new q("Input for depthwiseConv2d is required to be 4-D, but is instead ".concat(e.rank,"-D"));if(t.rank!==4)throw new q("depthwiseKernel is required to be 4-D, but is instead ".concat(t.rank,"-D"));return s=_d(s,t,n,r==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(s=Ke(s,[0,3,1,2])),s})}var IC=class extends yC{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Wt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Nn(e.depthwiseConstraint),this.depthwiseRegularizer=Vt(e.depthwiseRegularizer)}build(e){if(e=st(e),e.length<4)throw new q("Inputs to DepthwiseConv2D should have rank 4. Received input shape: ".concat(JSON.stringify(e),"."));let t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new q("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (".concat(e[t],")."));let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return G(()=>{e=Me(e);let n=Cde(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(n=Di(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),n})}computeOutputShape(e){e=st(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Ci(t,this.kernelSize[0],this.padding,this.strides[0]),i=Ci(n,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Xt(this.depthwiseInitializer),e.depthwiseRegularizer=Et(this.depthwiseRegularizer),e.depthwiseConstraint=Tn(this.depthwiseRegularizer),e}};IC.className="DepthwiseConv2D";le.registerClass(IC);function zz(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new q("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return t=a(t),n=a(n),{inputs:e,initialState:t,constants:n}}function Bz(e,t,n,r=!1,a,i,s=!1,o=!1){return G(()=>{let l=t.shape.length;if(l<3)throw new q("Input should be at least 3D, but is ".concat(l,"D."));let d=[1,0].concat(Ni(2,l));if(t=Ke(t,d),i!=null)throw new qe("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=ce(ce(a,"bool"),"float32"),a.rank===l-1&&(a=qn(a,-1)),a=Ke(a,d)),r&&(t=Da(t,0),a!=null&&(a=Da(a,0)));let u=[],c,h=n,p=t.shape[0],f=tn(t),m;a!=null&&(m=tn(a));for(let b=0;b<p;++b){let y=f[b],v=G(()=>e(y,h));if(a==null)c=v[0],h=v[1];else{let x=G(()=>{let w=m[b],$=we(ga(w),w),C=ne(U(v[0],w),U(h[0],$)),E=h.map((A,R)=>ne(U(v[1][R],w),U(A,$)));return{output:C,newStates:E}});c=x.output,h=x.newStates}o&&u.push(c)}let g;return o&&(g=Cn(u,1)),[c,g,h]})}var is=class extends Ye{constructor(e){super(e);let t;if(e.cell==null)throw new q("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new Px({cells:e.cell}):t=e.cell,t.stateSize==null)throw new q("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new pn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ni(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Gk(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n=t[0],r;if(this.returnSequences?r=[e[0],e[1],n]:r=[e[0],n],this.returnState){let a=[];for(let i of t)a.push([e[0],i]);return[r].concat(a)}else return r}computeMask(e,t){return G(()=>{Array.isArray(t)&&(t=t[0]);let n=this.returnSequences?t:null;if(this.returnState){let r=this.states.map(a=>null);return[n].concat(r)}else return n})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new qe("Constants support is not implemented in RNN yet.");Gk(e)&&(e=e[0]),e=e;let t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new pn({shape:[t,null,...n]});let r=[e[0]].concat(e.slice(2));this.cell.build(r);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!k.arraysEqual(this.stateSpec.map(i=>i.shape[i.shape.length-1]),a))throw new q("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; However cell.stateSize is ").concat(this.cell.stateSize))}else this.stateSpec=a.map(i=>new pn({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){G(()=>{if(!this.stateful)throw new ps("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(n==null)throw new q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Kt([n,r])):this.states_=[Kt([n,this.cell.stateSize])];else if(e==null)Be(this.states_),this.keptStates!=null&&(Be(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Kt([n,r])):this.states_[0]=Kt([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new q("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));t===!0?this.keptStates.push(this.states_.slice()):Be(this.states_);for(let r=0;r<this.states_.length;++r){let a=e[r],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,s=[n,i];if(!k.arraysEqual(a.shape,s))throw new q("State ".concat(r," is incompatible with layer ").concat(this.name,": expected shape=").concat(s,", received shape=").concat(a.shape));this.states_[r]=a}}this.states_=this.states_.map(r=>In(r.clone()))})}apply(e,t){let n=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});let a=zz(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let i=[],s=[];if(n!=null){t.initialState=n,i=i.concat(n),this.stateSpec=[];for(let o of n)this.stateSpec.push(new pn({shape:o.shape}));s=s.concat(this.stateSpec)}if(r!=null&&(t.constants=r,i=i.concat(r),this.numConstants=r.length),i[0]instanceof vi){let o=[e].concat(i),l=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=l;let u=super.apply(o,t);return this.inputSpec=d,u}else return super.apply(e,t)}call(e,t){return G(()=>{let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;e=Me(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));let i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new q("RNN Layer has ".concat(i," state(s) but was passed ").concat(a.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let s={training:r},o=Bz((h,p)=>{let f=this.cell.call([h].concat(p),s);return[f[0],f.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],d=o[1],u=o[2];this.stateful&&this.resetStates(u,r);let c=this.returnSequences?d:l;return this.returnState?[c].concat(u):c})}getInitialState(e){return G(()=>{let t=Kt(e.shape);return t=Ie(t,[1,2]),t=Ng(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(n=>n>1?Hk(t,[1,n]):t):this.cell.stateSize>1?[Hk(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===is.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t,n={}){let r=t.cell,a=$i(r,n);return new e(Object.assign(t,{cell:a}))}};is.className="RNN";le.registerClass(is);var Lg=class extends Ye{},Ox=class extends Lg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Bn(this.units,"units"),this.activation=_o(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Wt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Wt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Wt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Vt(e.kernelRegularizer),this.recurrentRegularizer=Vt(e.recurrentRegularizer),this.biasRegularizer=Vt(e.biasRegularizer),this.kernelConstraint=Nn(e.kernelConstraint),this.recurrentConstraint=Nn(e.recurrentConstraint),this.biasConstraint=Nn(e.biasConstraint),this.dropout=ah([1,To([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=ah([1,To([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=st(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return G(()=>{if(e=e,e.length!==2)throw new q("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];let r=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ao({ones:()=>ga(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ao({ones:()=>ga(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let a,i=this.dropoutMask,s=this.recurrentDropoutMask;i!=null?a=Yi(U(e,i),this.kernel.read()):a=Yi(e,this.kernel.read()),this.bias!=null&&(a=Di(a,this.bias.read())),s!=null&&(n=U(n,s));let o=ne(a,Yi(n,this.recurrentKernel.read()));return this.activation!=null&&(o=this.activation.apply(o)),[o,o]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:No(this.activation),useBias:this.useBias,kernelInitializer:Xt(this.kernelInitializer),recurrentInitializer:Xt(this.recurrentInitializer),biasInitializer:Xt(this.biasInitializer),kernelRegularizer:Et(this.kernelRegularizer),recurrentRegularizer:Et(this.recurrentRegularizer),biasRegularizer:Et(this.biasRegularizer),activityRegularizer:Et(this.activityRegularizer),kernelConstraint:Tn(this.kernelConstraint),recurrentConstraint:Tn(this.recurrentConstraint),biasConstraint:Tn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}};Ox.className="SimpleRNNCell";le.registerClass(Ox);var $C=class extends is{constructor(e){e.cell=new Ox(e),super(e)}call(e,t){return G(()=>{this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}};$C.className="SimpleRNN";le.registerClass($C);var Lx=class extends Lg{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new q("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Bn(this.units,"units"),this.activation=_o(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=_o(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Wt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Wt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Wt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Vt(e.kernelRegularizer),this.recurrentRegularizer=Vt(e.recurrentRegularizer),this.biasRegularizer=Vt(e.biasRegularizer),this.kernelConstraint=Nn(e.kernelConstraint),this.recurrentConstraint=Nn(e.recurrentConstraint),this.biasConstraint=Nn(e.biasConstraint),this.dropout=ah([1,To([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=ah([1,To([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=st(e);let t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return G(()=>{if(e=e,e.length!==2)throw new q("GRUCell expects 2 input Tensors (inputs, h, c), got ".concat(e.length,"."));let n=t.training==null?!1:t.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ao({ones:()=>ga(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ao({ones:()=>ga(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,i=this.recurrentDropoutMask,s,o,l;0<this.dropout&&this.dropout<1&&(e=U(e,a[0]));let d=Yi(e,this.kernel.read());this.useBias&&(d=Di(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=U(r,i[0]));let u=this.recurrentKernel.read(),[c,h]=Br(u,[2*this.units,this.units],u.rank-1),p=Yi(r,c),[f,m,g]=Br(d,3,d.rank-1),[b,y]=Br(p,2,p.rank-1);s=this.recurrentActivation.apply(ne(f,b)),o=this.recurrentActivation.apply(ne(m,y));let v=Yi(U(o,r),h);l=this.activation.apply(ne(g,v));let x=ne(U(s,r),U(ne(1,Rt(s)),l));return[x,x]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:No(this.activation),recurrentActivation:No(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Xt(this.kernelInitializer),recurrentInitializer:Xt(this.recurrentInitializer),biasInitializer:Xt(this.biasInitializer),kernelRegularizer:Et(this.kernelRegularizer),recurrentRegularizer:Et(this.recurrentRegularizer),biasRegularizer:Et(this.biasRegularizer),activityRegularizer:Et(this.activityRegularizer),kernelConstraint:Tn(this.kernelConstraint),recurrentConstraint:Tn(this.recurrentConstraint),biasConstraint:Tn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}};Lx.className="GRUCell";le.registerClass(Lx);var CC=class extends is{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Lx(e),super(e)}call(e,t){return G(()=>{this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};CC.className="GRU";le.registerClass(CC);var Pg=class extends Lg{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Bn(this.units,"units"),this.activation=_o(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=_o(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Wt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Wt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Wt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Vt(e.kernelRegularizer),this.recurrentRegularizer=Vt(e.recurrentRegularizer),this.biasRegularizer=Vt(e.biasRegularizer),this.kernelConstraint=Nn(e.kernelConstraint),this.recurrentConstraint=Nn(e.recurrentConstraint),this.biasConstraint=Nn(e.biasConstraint),this.dropout=ah([1,To([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=ah([1,To([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=st(e);let n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let r;if(this.useBias){if(this.unitForgetBias){let a=this.biasInitializer,i=this.units;r=new(t=class extends ni{apply(s,o){let l=a.apply([i]),d=new $x().apply([i]),u=a.apply([i*2]);return jA(jA(l,d),u)}},t.className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return G(()=>{let n=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new q("LSTMCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));let r=e[1],a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ao({ones:()=>ga(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ao({ones:()=>ga(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let i=this.dropoutMask,s=this.recurrentDropoutMask,o,l,d,u;0<this.dropout&&this.dropout<1&&(e=U(e,i[0]));let c=Yi(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=U(r,s[0])),c=ne(c,Yi(r,this.recurrentKernel.read())),this.useBias&&(c=Di(c,this.bias.read()));let[h,p,f,m]=Br(c,4,c.rank-1);o=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),d=ne(U(l,a),U(o,this.activation.apply(f))),u=this.recurrentActivation.apply(m);let g=U(u,this.activation.apply(d));return[g,g,d]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:No(this.activation),recurrentActivation:No(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Xt(this.kernelInitializer),recurrentInitializer:Xt(this.recurrentInitializer),biasInitializer:Xt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Et(this.kernelRegularizer),recurrentRegularizer:Et(this.recurrentRegularizer),biasRegularizer:Et(this.biasRegularizer),activityRegularizer:Et(this.activityRegularizer),kernelConstraint:Tn(this.kernelConstraint),recurrentConstraint:Tn(this.recurrentConstraint),biasConstraint:Tn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}};Pg.className="LSTMCell";le.registerClass(Pg);var EC=class extends is{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Pg(e),super(e)}call(e,t){return G(()=>{this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};EC.className="LSTM";le.registerClass(EC);var Px=class extends Lg{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return G(()=>{e=e;let n=e.slice(1),r=[];for(let s of this.cells.slice().reverse())Array.isArray(s.stateSize)?r.push(n.splice(0,s.stateSize.length)):r.push(n.splice(0,1));r.reverse();let a=[],i;for(let s=0;s<this.cells.length;++s){let o=this.cells[s];n=r[s],s===0?i=[e[0]].concat(n):i=[i[0]].concat(n),i=o.call(i,t),a.push(i.slice(1))}n=[];for(let s of a.slice().reverse())n.push(...s);return[i[0]].concat(n)})}build(e){Gk(e)&&(e=e[0]),e=e;let t;this.cells.forEach((n,r)=>{Tl("RNNCell_".concat(r),()=>{n.build(e),Array.isArray(n.stateSize)?t=n.stateSize[0]:t=n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t=r=>({className:r.getClassName(),config:r.getConfig()}),n={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),n)}static fromConfig(e,t,n={}){let r=[];for(let a of t.cells)r.push($i(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.cells)t.push(...n.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return qk(e)}setWeights(e){let t=[];for(let n of this.cells){let r=n.weights.length,a=e.splice(r);for(let i=0;i<n.weights.length;++i)t.push([n.weights[i],a[i]])}Q2(t)}};Px.className="StackedRNNCells";le.registerClass(Px);function Ao(e){let{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=e,s=()=>i!=null?i(t(),n):QP(t(),n),o=()=>Ag(s,t,r);return!a||a<=1?In(o().clone()):Array(a).fill(void 0).map(o).map(l=>In(l.clone()))}var Ede=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},Wz=class extends is{constructor(e){if(e.unroll)throw new qe("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new qe("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new pn({ndim:5})]}call(e,t){return G(()=>{if(this.cell.dropoutMask!=null&&(Be(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Be(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new q("ConvRNN2D cell does not support constants");let n=t==null?null:t.mask,r=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return G(()=>{let{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)],i=Kt(a);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){G(()=>{if(!this.stateful)throw new ps("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(n[0]==null)throw new q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kt(a)):this.states_=[Kt(a)];else if(e==null)Be(this.states_),this.keptStates!=null&&(Be(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kt(a)):this.states_[0]=Kt(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new q("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));t?this.keptStates.push(this.states_.slice()):Be(this.states_);for(let i=0;i<this.states_.length;++i){let s=e[i],o=a;if(!k.arraysEqual(s.shape,o))throw new q("State ".concat(i," is incompatible with layer ").concat(this.name,": expected shape=").concat(o,", received shape=").concat(s.shape));this.states_[i]=s}}this.states_=this.states_.map(i=>In(i.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:i,dilationRate:s}=this.cell,o=t==="channelsFirst",l=e[o?3:2],d=e[o?4:3],u=Ci(l,r[0],a,i[0],s[0]),c=Ci(d,r[1],a,i[1],s[1]);return[...e.slice(0,2),...o?[n,u,c]:[u,c,n]]}};Wz.className="ConvRNN2D";var zx=class extends Pg{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Bn(this.filters,"filters"),this.kernelSize=Dc(n,2,"kernelSize"),this.kernelSize.forEach(o=>Bn(o,"kernelSize")),this.strides=Dc(r||1,2,"strides"),this.strides.forEach(o=>Bn(o,"strides")),this.padding=a||"valid",za(this.padding),this.dataFormat=i||"channelsLast",on(this.dataFormat),this.dilationRate=Dc(s||1,2,"dilationRate"),this.dilationRate.forEach(o=>Bn(o,"dilationRate"))}build(e){var t;e=st(e);let n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new q("The channel dimension of the input should be defined. Found ".concat(e[n]));let r=e[n],a=4,i=this.kernelSize.concat([r,this.filters*a]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let s=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let o;if(this.unitForgetBias){let l=this.biasInitializer,d=this.filters;o=new(t=class extends ni{apply(u,c){let h=l.apply([d]),p=ia([d]),f=l.apply([d*2]);return H2([h,p,f])}},t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return G(()=>{if(e.length!==3)throw new q("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));let n=t.training||!1,r=e[0],a=e[1],i=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ao({ones:()=>ga(r),rate:this.dropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,l=(B,V,K)=>!V||!V[K]?B:U(V[K],B),d=l(r,o,0),u=l(r,o,1),c=l(r,o,2),h=l(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ao({ones:()=>ga(a),rate:this.recurrentDropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let p=this.recurrentDropoutMask,f=l(a,p,0),m=l(a,p,1),g=l(a,p,2),b=l(a,p,3),y=3,[v,x,w,$]=Br(this.kernel.read(),s,y),[C,E,A,R]=this.useBias?Br(this.bias.read(),s):[null,null,null,null];d=this.inputConv(d,v,C,this.padding),u=this.inputConv(u,x,E,this.padding),c=this.inputConv(c,w,A,this.padding),h=this.inputConv(h,$,R,this.padding);let[N,I,F,L]=Br(this.recurrentKernel.read(),s,y);f=this.recurrentConv(f,N),m=this.recurrentConv(m,I),g=this.recurrentConv(g,F),b=this.recurrentConv(b,L);let P=this.recurrentActivation.apply(ne(d,f)),H=this.recurrentActivation.apply(ne(u,m)),X=ne(U(H,i),U(P,this.activation.apply(ne(c,g)))),M=U(this.recurrentActivation.apply(ne(h,b)),this.activation.apply(X));return[M,M,X]})}getConfig(){let e=super.getConfig(),t=Ede(e,["units"]),n={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),n)}inputConv(e,t,n,r){let a=$r(e,t,this.strides,r||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return n?Di(a,n,this.dataFormat):a}recurrentConv(e,t){return $r(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};zx.className="ConvLSTM2DCell";le.registerClass(zx);var TC=class extends Wz{constructor(e){let t=new zx(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}};TC.className="ConvLSTM2D";le.registerClass(TC);var Bx=class extends Ye{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(this.noiseShape[r]==null?t[r]:this.noiseShape[r]);return n}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e);if(0<this.rate&&this.rate<1){let r=t.training==null?!1:t.training,a=this.getNoiseShape(n);return Ag(()=>QP(n,this.rate,a,this.seed),()=>n,r)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};Bx.className="Dropout";le.registerClass(Bx);var NC=class extends Bx{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};NC.className="SpatialDropout1D";le.registerClass(NC);var _C=class extends Ye{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Bn(this.units,"units"),this.activation=_o(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Wt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Wt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Nn(e.kernelConstraint),this.biasConstraint=Nn(e.biasConstraint),this.kernelRegularizer=Vt(e.kernelRegularizer),this.biasRegularizer=Vt(e.biasRegularizer),this.activityRegularizer=Vt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=st(e);let t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=st(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e),r=jP(this.activation.getClassName()),a;return r!=null?a=Yi(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=Yi(n,this.kernel.read()),this.bias!=null&&(a=Di(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){let e={units:this.units,activation:No(this.activation),useBias:this.useBias,kernelInitializer:Xt(this.kernelInitializer),biasInitializer:Xt(this.biasInitializer),kernelRegularizer:Et(this.kernelRegularizer),biasRegularizer:Et(this.biasRegularizer),activityRegularizer:Et(this.activityRegularizer),kernelConstraint:Tn(this.kernelConstraint),biasConstraint:Tn(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};_C.className="Dense";le.registerClass(_C);var AC=class extends Ye{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=st(e);for(let t of e.slice(1))if(t==null)throw new q('The shape of the input to "Flatten" is not fully defined (got '.concat(e.slice(1),'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.'));return[e[0],bo(e,1)]}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e);if(this.dataFormat==="channelsFirst"&&n.rank>1){let r=[0];for(let a=2;a<n.rank;++a)r.push(a);r.push(1),n=Ke(n,r)}return Hle(n)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};AC.className="Flatten";le.registerClass(AC);var RC=class extends Ye{constructor(e){super(e),this.supportsMasking=!0,this.activation=_o(e.activation)}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e);return this.activation.apply(n)})}getConfig(){let e={activation:No(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};RC.className="Activation";le.registerClass(RC);var DC=class extends Ye{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return G(()=>(e=Me(e),Vle(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};DC.className="RepeatVector";le.registerClass(DC);var FC=class extends Ye{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null;for(let o=0;o<r.length;++o){let l=r[o];if(this.isUnknown(l))if(i===null)i=o;else throw new q("Can only specifiy one unknown dimension.");else a*=l}let s=bo(e);if(i!==null){if(a===0||s%a!==0)throw new q(n);r[i]=s/a}else if(s!==a)throw new q(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return j(n,a)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};FC.className="Reshape";le.registerClass(FC);var MC=class extends Ye{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received ".concat(e.dims," instead."));let t=Ni(1,e.dims.length+1);if(!k.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new pn({ndim:this.dims.length+1})]}computeOutputShape(e){e=st(e);let t=e.slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return Ke(Me(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};MC.className="Permute";le.registerClass(MC);var OC=class extends Ye{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=Me(e),r=-1;return cm(Zl(n,this.maskValue),r)}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e),r=-1,a=!0,i=cm(Zl(n,this.maskValue),r,a);return U(n,ce(i,n.dtype))})}};OC.className="Masking";le.registerClass(OC);var LC=class extends Ye{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Mt(e.inputLength))}this.inputDim=e.inputDim,Bn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Bn(this.outputDim,"outputDim"),this.embeddingsInitializer=Wt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Vt(e.embeddingsRegularizer),this.activityRegularizer=Vt(e.activityRegularizer),this.embeddingsConstraint=Nn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return G(()=>this.maskZero?(e=Me(e),Zl(e,et(e))):null)}computeOutputShape(e){if(e=st(e),this.inputLength==null)return[...e,this.outputDim];let t=Mt(this.inputLength);if(t.length!==e.length-1)throw new q('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));{let n=0;for(let r=0;r<t.length;++r){let a=t[r],i=e[r+1];if(a!=null&&i!=null&&a!==i)throw new q('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));a==null&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e);n.dtype!=="int32"&&(n=Rs(n,"int32"));let r=ZP(this.embeddings.read(),j(n,[n.size]));return j(r,st(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Xt(this.embeddingsInitializer),embeddingsRegularizer:Et(this.embeddingsRegularizer),activityRegularizer:Et(this.activityRegularizer),embeddingsConstraint:Tn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};LC.className="Embedding";le.registerClass(LC);var Md=class extends Ye{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new qe}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let a=e[e.length-t.length+r],i=t[r];if(a==null||i==null||a<0||i<0)n.push(null);else if(a===1)n.push(i);else if(i===1)n.push(a);else{if(a!==i)throw new q("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[st(e)]),e=e,e.length<2)throw new q("A merge layer should be called on an Array of at least 2 inputs. Got ".concat(e.length," input(s)."));let t=[];for(let a of e)a!=null&&a[0]!==null&&t.push(a[0]);if(t=go(t),t.length>1)throw new q("Can not merge tensors with different batch sizes. Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){let i=e[a]==null?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=e.map(a=>a.length);e.indexOf(null)===-1&&go(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return G(()=>{if(e=e,this.reshapeRequired){let n=[],r=e.map(a=>a.rank);if(r.indexOf(null)===-1){let a=To(r);for(let i of e){let s=i.rank;for(let o=0;o<a-s;++o)i=Ng(i,1);n.push(i)}return this.mergeFunction(n)}else{let a=!1;for(let o of e){let l=o.rank;if(l==null){let d=o.shape,u=d[0],c=d.slice(1).concat([u]),h=j(o,[u].concat(bo(d.slice(1))));h=Ke(h,[1,0]),h=j(h,c),n.push(h),a=!0}else if(l>1){let d=Ni(1,l).concat([0]);n.push(Ke(o,d)),a=!0}else n.push(o)}let i=this.mergeFunction(n),s=i.rank;if(a){if(s==null){let o=i.shape,l=o.length,d=o[l-1],u=[d].concat(o.slice(0,o.length-1));i=j(Ke(j(i,[-1,d]),[1,0]),u)}else if(s>1){let o=[s-1].concat(Ni(0,s-1));i=Ke(i,o)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let r=1;r<e.length;++r){let a=e[r]==null?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let n=[];for(let r of e)r!=null&&r[0]!==null&&n.push(r[0]);return n=go(n),n.length===1?t=n.concat(t):t=[null].concat(t),t}computeMask(e,t){return G(()=>{if(t==null)return null;if(!Array.isArray(t))throw new q("`mask` should be an Array");if(!Array.isArray(e))throw new q("`inputs` should be an Array");if(t.length!==e.length)throw new q("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (".concat(e.length," vs ").concat(t.length,")"));if(t.every(r=>r==null))return null;t=t.map(r=>r==null?r:qn(r,0));let n=t[0];for(let r=1;r<t.length-1;++r)n=ei(n,t[r]);return n})}},PC=class extends Md{constructor(e){super(e)}mergeFunction(e){return G(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ne(t,e[n]);return t})}};PC.className="Add";le.registerClass(PC);var zC=class extends Md{constructor(e){super(e)}mergeFunction(e){return G(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=U(t,e[n]);return t})}};zC.className="Multiply";le.registerClass(zC);var BC=class extends Md{constructor(e){super(e)}mergeFunction(e){return G(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ne(t,e[n]);return U(1/e.length,t)})}};BC.className="Average";le.registerClass(BC);var WC=class extends Md{constructor(e){super(e)}mergeFunction(e){return G(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=rs(t,e[n]);return t})}};WC.className="Maximum";le.registerClass(WC);var VC=class extends Md{constructor(e){super(e)}mergeFunction(e){return G(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Co(t,e[n]);return t})}};VC.className="Minimum";le.registerClass(VC);var UC=class extends Md{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new q("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let r of e)if(r!=null){t=!1;break}if(t)return;let n=[];for(let r=0;r<e.length;++r){let a=e[r].slice();a.splice(this.axis,1);let i=!1;for(let s of n)if(k.arraysEqual(s,a)){i=!0;break}i||n.push(a)}if(n.length>1)throw new q("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return G(()=>H2(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new q("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(let a of t.slice(1)){if(n[r]==null||a[r]==null){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new q("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new q("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new q("Mismatch in the length of mask (".concat(t.length,") and the legnth of inputs (").concat(e.length,")"));return G(()=>{let n=!0;if(t.forEach(i=>{if(i!=null){n=!1;return}}),n)return null;let r=[];for(let i=0;i<e.length;++i)t[i]==null?r.push(ce(ga(e[i]),"bool")):t[i].rank<e[i].rank?r.push(qn(t[i],-1)):r.push(t[i]);let a=kt(r,this.axis);return j0(a,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};UC.className="Concatenate";le.registerClass(UC);function tf(e,t){for(;e<0;)e+=t;return e}function Tde(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new qe("batchDot is not implemented for tensors of 4D or higher rank yet");if(k.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got ".concat(e.shape.length)),k.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got ".concat(t.shape.length)),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new qe("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,a=t.shape.length;n==null&&(n=[r-1,a-2]);let i=n;return G(()=>{let s;if(r>a){s=r-a;let l=[];for(let d=0;d<s;++d)l.push(1);t=j(t,t.shape.concat(l))}else if(a>r){s=a-r;let l=[];for(let d=0;d<s;++d)l.push(1);e=j(e,e.shape.concat(l))}else s=0;let o;if(e.shape.length===2&&t.shape.length===2)i[0]===i[1]?o=Ie(U(e,t),i[0]):o=Ie(U(Ke(e,[1,0]),t),i[1]);else{let l=i[0]!==e.shape.length-1,d=i[1]===t.shape.length-1;o=Ge(e,t,l,d)}if(s>0){let l;r>a?l=r+a-3:l=r-1;let d=[];for(let u=l;u<l+s;++u)d.push(u);o=Ko(o,d)}return o.shape.length===1&&(o=qn(o,1)),o})}var HC=class extends Md{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){k.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new qe("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new q("Dimension incompatibility: ".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(e.length!==2)throw new q("A `Dot` layer must be called on exactly 2 inputs, but received ".concat(e.length," input(s)."));let t=e[0],n=e[1],r;return Array.isArray(this.axes)?r=this.axes.map((a,i)=>tf(a,e[i].shape.length)):r=[tf(this.axes,t.shape.length),tf(this.axes,n.shape.length)],this.normalize&&(t=gv(t,r[0]),n=gv(n,r[1])),Tde(t,n,r)}interpretAxes(e,t){let n;return Array.isArray(this.axes)?n=this.axes:n=[tf(this.axes,e.length),tf(this.axes,t.length)],n}computeOutputShape(e){k.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new qe("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let a=t.concat(n);return a.length===1&&a.push(1),a}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};HC.className="Dot";le.registerClass(HC);var jC=class extends Ye{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e);return Ag(()=>ne(Ix(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}};jC.className="GaussianNoise";le.registerClass(jC);var GC=class extends Ye{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return G(()=>{this.invokeCallHook(e,t);let n=Me(e);return this.rate>0&&this.rate<1?Ag(()=>{let r=Math.sqrt(this.rate/(1-this.rate));return U(n,Ix(n.shape,1,r))},()=>n,t.training||!1):n})}};GC.className="GaussianDropout";le.registerClass(GC);var qC=class extends Ye{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Me(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return G(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return Ag(()=>{let r=Me(e),a=1.6732632423543772,i=1.0507009873554805,s=-a*i,o=Os(Go(n),this.rate);o=Rs(o,"float32");let l=((1-this.rate)*(1+this.rate*s**2))**-.5,d=-l*s*this.rate,u=ne(U(r,o),U(ne(o,-1),s));return ne(U(u,l),d)},()=>Me(e),t.training||!1)}return e})}};qC.className="AlphaDropout";le.registerClass(qC);function bm(e,t,n,r,a,i=.001){let s;if(e.rank===2)s=M$(e,t,n,r,a,i);else if(e.rank===3)s=O$(e,t,n,r,a,i);else if(e.rank===4)s=L$(e,t,n,r,a,i);else throw new qe("batchNormalization is not implemented for array of rank ".concat(e.rank," yet"));return s}function Nde(e,t,n,r,a=.001){return G(()=>{let i=wg(e,r),s=i.mean,o=i.variance;return[bm(e,s,o,n,t,a),s,o]})}function _de(e,t,n,r,a=.001){return G(()=>{let i=wg(e,r),s=i.mean,o=i.variance,l=[];for(let p of Ni(0,e.rank))r.indexOf(p)!==-1?l.push(1):l.push(e.shape[p]);let d=j(s,l),u=j(o,l),c=t==null?null:j(t,l),h=n==null?null:j(n,l);return[bm(e,d,u,h,c,a),s,o]})}function Ade(e,t,n,r,a=.001){return k.arraysEqual(r.slice().sort(),Ni(0,e.rank-1))?Nde(e,t,n,r,a):_de(e,t,n,r,a)}var KC=class extends Ye{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Wt(e.betaInitializer||"zeros"),this.gammaInitializer=Wt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Wt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Wt(e.movingVarianceInitializer||"ones"),this.betaConstraint=Nn(e.betaConstraint),this.gammaConstraint=Nn(e.gammaConstraint),this.betaRegularizer=Vt(e.betaRegularizer),this.gammaRegularizer=Vt(e.gammaRegularizer)}build(e){e=st(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(n==null)throw new q("Axis ".concat(t," of input tensor should have a defined dimension but the layer received an input with shape ").concat(JSON.stringify(e),"."));this.inputSpec=[new pn({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return G(()=>{let n=t.training==null?!1:t.training,r=Me(e),a=r.shape,i=a.length,s=Ni(0,i),o=this.axis>=0?this.axis:this.axis+i;s.splice(o,1);let l=Jl(1,i);l[o]=a[o];let d=s.slice();d.sort();let u=!k.arraysEqual(d,Ni(0,i).slice(0,i-1)),c=()=>{if(u){let g=j(this.movingMean.read(),l),b=j(this.movingVariance.read(),l),y=this.center?j(this.beta.read(),l):null,v=this.scale?j(this.gamma.read(),l):null;return bm(r,g,b,y,v,this.epsilon)}else return bm(r,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!n)return c();let[h,p,f]=Ade(r,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(g,b,y)=>{G(()=>{let v=1-y,x=g.read(),w=U(we(x,b),v);g.write(we(x,w))})};return m(this.movingMean,p,this.momentum),m(this.movingVariance,f,this.momentum),h})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Xt(this.betaInitializer),gammaInitializer:Xt(this.gammaInitializer),movingMeanInitializer:Xt(this.movingMeanInitializer),movingVarianceInitializer:Xt(this.movingVarianceInitializer),betaRegularizer:Et(this.betaRegularizer),gammaRegularizer:Et(this.gammaRegularizer),betaConstraint:Tn(this.betaConstraint),gammaConstraint:Tn(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};KC.className="BatchNormalization";le.registerClass(KC);var XC=class extends Ye{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else if(Array.isArray(this.axis)){for(let t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, but received ".concat(JSON.stringify(this.axis)))}else throw new Error("Expected axis to be an integer or an array of integers, but received ".concat(JSON.stringify(this.axis)));this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Wt(e.betaInitializer||"zeros"),this.gammaInitializer=Wt(e.gammaInitializer||"ones"),this.betaRegularizer=Vt(e.betaRegularizer),this.gammaRegularizer=Vt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=st(e);let t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(let a of this.axis)if(a<0||a>=t)throw new Error("Invalid axis: ".concat(a));if(this.axis.length!==go(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));let n=this.axis.map(a=>e[a]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){let n=Me(e),r=n.shape,a=r.length;return G(()=>{let{mean:i,variance:s}=wg(n,this.axis,!0),o=Jl(1,a);for(let p of this.axis)o[p]=r[p];let l=p=>p!=null&&p.shape.length!==a?j(p,o):p,d=this.scale?l(this.gamma.read()):null,u=this.center?l(this.beta.read()):null,c=[],h=[];for(let p=0;p<a;++p)this.axis.indexOf(p)!==-1?(c.push(r[p]),h.push(1)):(c.push(1),h.push(r[p]));return i=aa(i,c),s=aa(s,c),d!=null&&(d=aa(d,h)),u!=null&&(u=aa(u,h)),bm(n,i,s,u,d,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Xt(this.betaInitializer),gammaInitializer:Xt(this.gammaInitializer),betaRegularizer:Et(this.betaRegularizer),gammaRegularizer:Et(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};XC.className="LayerNormalization";le.registerClass(XC);function Rde(e,t,n){return G(()=>{if(e.rank!==4)throw new q("temporalPadding expects input tensor to be 4-D, but received a ".concat(e.rank,"-D tensor."));if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new q("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=_i()),n!=="channelsLast"&&n!=="channelsFirst")throw new q("Unknown data format: ".concat(n,". Supported data formats are 'channelsLast' and 'channelsFirst."));let r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],Ri(e,r)})}var YC=class extends Ye{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?_i():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new q("ZeroPadding2D expects padding to be a length-2 array, but received a length-".concat(e.padding.length," array."));let t,n;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new q("ZeroPadding2D expects height padding to be a length-2 array, but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],e.padding[1].length!==2)throw new q("ZeroPadding2D expects width padding to be a length-2 array, but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new pn({ndim:4})]}computeOutputShape(e){e=st(e);let t,n;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?n=e[3]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],e[1],t,n]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?n=e[2]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],t,n,e[3]])}call(e,t){return G(()=>Rde(Me(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};YC.className="ZeroPadding2D";le.registerClass(YC);function Wx(e,t,n,r,a,i){return G(()=>{on(a),qP(i),za(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=_i()),i==null&&(i="max"),e=bC(e,a);let s,o=r==="same"?"same":"valid";return i==="max"?s=Mn(e,t,n,o):s=Ms(e,t,n,o),a==="channelsFirst"&&(s=Ke(s,[0,3,1,2])),s})}function Vz(e,t,n,r,a,i){return G(()=>{on(a),qP(i),za(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=_i()),i==null&&(i="max"),e=Lz(e,a);let s,o=r==="same"?"same":"valid";return i==="max"?s=l2(e,t,n,o):s=F$(e,t,n,o),a==="channelsFirst"&&(s=Ke(s,[0,4,1,2,3])),s})}var Uz=class extends Ye{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new q("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.poolSize)));if(Bn(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new q("strides for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.strides)));Bn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,za(this.padding),this.inputSpec=[new pn({ndim:3})]}computeOutputShape(e){e=st(e);let t=Ci(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return G(()=>{this.invokeCallHook(e,t),e=Ng(Me(e),2);let n=this.poolingFunction(Me(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ko(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},ZC=class extends Uz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return on(a),za(r),Wx(e,t,n,r,a,"max")}};ZC.className="MaxPooling1D";le.registerClass(ZC);var QC=class extends Uz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return on(a),za(r),Wx(e,t,n,r,a,"avg")}};QC.className="AveragePooling1D";le.registerClass(QC);var Hz=class extends Ye{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new q("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];Bn(this.poolSize,"poolSize"),Bn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),za(this.padding),this.inputSpec=[new pn({ndim:4})]}computeOutputShape(e){e=st(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=Ci(t,this.poolSize[0],this.padding,this.strides[0]),n=Ci(n,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return G(()=>(this.invokeCallHook(e,t),this.poolingFunction(Me(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},JC=class extends Hz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return on(a),za(r),Wx(e,t,n,r,a,"max")}};JC.className="MaxPooling2D";le.registerClass(JC);var eE=class extends Hz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return on(a),za(r),Wx(e,t,n,r,a,"avg")}};eE.className="AveragePooling2D";le.registerClass(eE);var jz=class extends Ye{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new q("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Bn(this.poolSize,"poolSize"),Bn(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),za(this.padding),this.inputSpec=[new pn({ndim:5})]}computeOutputShape(e){e=st(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=Ci(t,this.poolSize[0],this.padding,this.strides[0]),n=Ci(n,this.poolSize[1],this.padding,this.strides[1]),r=Ci(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return G(()=>(this.invokeCallHook(e,t),this.poolingFunction(Me(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},tE=class extends jz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return on(a),za(r),Vz(e,t,n,r,a,"max")}};tE.className="MaxPooling3D";le.registerClass(tE);var nE=class extends jz{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return on(a),za(r),Vz(e,t,n,r,a,"avg")}};nE.className="AveragePooling3D";le.registerClass(nE);var Gz=class extends Ye{constructor(e){super(e),this.inputSpec=[new pn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new qe}},rE=class extends Gz{constructor(e){super(e||{})}call(e,t){return G(()=>{let n=Me(e);return qt(n,1)})}};rE.className="GlobalAveragePooling1D";le.registerClass(rE);var aE=class extends Gz{constructor(e){super(e||{})}call(e,t){return G(()=>{let n=Me(e);return _a(n,1)})}};aE.className="GlobalMaxPooling1D";le.registerClass(aE);var qz=class extends Ye{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),this.inputSpec=[new pn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new qe}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},iE=class extends qz{call(e,t){return G(()=>{let n=Me(e);return this.dataFormat==="channelsLast"?qt(n,[1,2]):qt(n,[2,3])})}};iE.className="GlobalAveragePooling2D";le.registerClass(iE);var sE=class extends qz{call(e,t){return G(()=>{let n=Me(e);return this.dataFormat==="channelsLast"?_a(n,[1,2]):_a(n,[2,3])})}};sE.className="GlobalMaxPooling2D";le.registerClass(sE);var Kz=class extends Ye{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=t.layer,a=$i(r,n);delete t.layer;let i={layer:a};return Object.assign(i,t),new e(i)}},oE=class extends Kz{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=st(e),e.length<3)throw new q("TimeDistributed layer expects an input shape >= 3D, but received input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=st(e);let t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return G(()=>(e=Me(e),Bz((n,r)=>[Me(this.layer.call(n,t)),[]],e,[],!1,null,null,!1,!0)[1]))}};oE.className="TimeDistributed";le.registerClass(oE);function Dde(e){Dd(Lle,"BidirectionalMergeMode",e)}var Fde="concat",lE=class extends Kz{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=$i(n),t.goBackwards=t.goBackwards!==!0;let r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=$i(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?Fde:e.mergeMode,Dde(this.mergeMode),e.weights)throw new qe("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let n,r,a;return this.returnState&&(a=t.slice(1)),n=t[0],n=n,this.mergeMode==="concat"?(n[n.length-1]*=2,r=[n]):this.mergeMode==null?r=[n,n.slice()]:r=[n],this.returnState?this.mergeMode==null?r.concat(a).concat(a.slice()):[n].concat(a).concat(a.slice()):Pr(r)}apply(e,t){let n=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});let a=zz(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(n==null||n.length===0)&&r==null)return super.apply(e,t);let i=[],s=[];if(n!=null){let l=n.length;if(l%2>0)throw new q("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);let d=n.map(u=>new pn({shape:u.shape}));this.forwardLayer.stateSpec=d.slice(0,l/2),this.backwardLayer.stateSpec=d.slice(l/2),s.push(...d)}if(r!=null)throw new qe("Support for constants in Bidirectional layers is not implemented yet.");let o=i[0]instanceof vi;for(let l of i)if(l instanceof vi!==o)throw new q("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let l=[e].concat(i),d=this.inputSpec.concat(s),u=this.inputSpec;this.inputSpec=d;let c=super.apply(l,t);return this.inputSpec=u,c}else return super.apply(e,t)}call(e,t){return G(()=>{let n=t.initialState,r,a;if(n==null)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{let o=n.slice(0,n.length/2),l=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:l}))}let i;this.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=Da(a,1));let s;return this.mergeMode==="concat"?s=H2([r,a]):this.mergeMode==="sum"?s=ne(r,a):this.mergeMode==="ave"?s=U(.5,ne(r,a)):this.mergeMode==="mul"?s=U(r,a):this.mergeMode==null&&(s=[r,a]),this.returnState?this.mergeMode==null?s.concat(i):[s].concat(i):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Tl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Tl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let n;if(this.returnSequences?this.mergeMode==null?n=[t,t]:n=t:this.mergeMode==null?n=[null,null]:n=null,this.returnState){let r=this.forwardLayer.states.map(a=>null);return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}else return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=$i(t.layer);if(delete t.layer,t.numConstants!=null)throw new qe("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}};lE.className="Bidirectional";le.registerClass(lE);var uE=class extends Ye{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return G(()=>(e=Me(e),e.dtype!=="float32"&&(e=Rs(e,"float32")),ne(U(e,this.scale),this.offset)))}};uE.className="Rescaling";le.registerClass(uE);var{resizeBilinear:Mde,cropAndResize:Ode}=$a,dE=class extends Ye{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,i,s,o){return G(()=>{let l,d=!1,u=t/i,c=n/s,h=(r+t)/i,p=(a+n)/s,f=[u,c,h,p],m=[];e.rank===3?(d=!0,l=Cn([e])):l=e;for(let v=0;v<l.shape[0];v++)m.push(f);let g=wr(m,[m.length,4]),b=Ql(0,m.length,1,"int32"),y=Ode(l,g,b,[r,a],"nearest");return Rs(d?Me(tn(y)):y,o)})}upsize(e,t,n,r){return G(()=>{let a=Mde(e,[t,n]);return Rs(a,r)})}call(e,t){return G(()=>{let n=Me(e),r=n.dtype,a=n.shape,i=a[a.length-3],s=a[a.length-2],o=0;i!==this.height&&(o=Math.floor((i-this.height)/2));let l=0;return s!==this.width&&(l=Math.floor((s-this.width)/2),l===0&&(l=1)),o>=0&&l>=0?this.centerCrop(n,o,l,this.height,this.width,i,s,r):this.upsize(e,this.height,this.width,r)})}getConfig(){let e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=st(e);let t=e.length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}};dE.className="CenterCrop";le.registerClass(dE);function Lde(e,t,n,r){let a=Me(e);if(a.dtype!=="int32"&&(a=Rs(a,"int32")),t==="int")return a;let i=a.shape;if(a.rank===0&&(a=qn(a,-1)),t==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=qn(a,-1)),a.rank>2)throw new q("When outputMode is not int, maximum output rank is 2 Received outputMode ".concat(t," and input shape ").concat(i," which would result in output rank ").concat(a.rank,"."));let s=["multiHot","oneHot"].includes(t),o=a,l;if(typeof r<"u"&&t==="count"?l=cv(o,r,n,s):l=cv(o,[],n,s),t!=="tfIdf")return l;if(r)return U(l,r);throw new q("When outputMode is 'tfIdf', weights must be provided.")}var cE=class extends Ye{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=st(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return G(()=>{e=Me(e),e.dtype!=="int32"&&(e=Rs(e,"int32"));let n;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new q("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=Me(t.countWeights)}let r=_a(e),a=Yc(e),i=Rr(this.numTokens,r).bufferSync().get(0),s=Os(a,0).bufferSync().get(0);if(!(i&&s))throw new q("Input values must be between 0 < values <= numTokens with numTokens=".concat(this.numTokens));return Lde(e,this.outputMode,this.numTokens,n)})}};cE.className="CategoryEncoding";le.registerClass(cE);var Pde=["bilinear","nearest"],lR=new Set(Pde),hE=class extends Ye{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(lR.has(e.interpolation))this.interpolation=e.interpolation;else throw new q("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=st(e);let t=e[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return G(()=>{let n=[this.height,this.width];if(this.interpolation==="bilinear")return $a.resizeBilinear(e,n,!this.cropToAspectRatio);if(this.interpolation==="nearest")return $a.resizeNearestNeighbor(e,n,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...lR]," are supported"))})}};hE.className="Resizing";le.registerClass(hE);var Xz=class{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}};Xz.className="RandomSeed";var Yz=class extends Ye{constructor(e){super(e),this.randomGenerator=new Xz(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}};Yz.className="BaseRandomLayer";var zde=["bilinear","nearest"],uR=new Set(zde),pE=class extends Yz{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new q("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));if(this.widthLower<-1||this.widthUpper<-1)throw new q("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new q("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n)if(uR.has(n))this.interpolation=n;else throw new q("Invalid interpolation parameter: ".concat(n," is not implemented"))}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=st(e);let t=e[2];return[this.imgHeight,-1,t]}call(e,t){return G(()=>{let n=Me(e);this.imgHeight=n.shape[n.shape.length-3];let r=n.shape[n.shape.length-2];this.widthFactor=Go([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*r;a=Math.round(a);let i=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return $a.resizeBilinear(e,i);case"nearest":return $a.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...uR]," are supported"))}})}};pE.className="RandomWidth";le.registerClass(pE);function Bde(e){return new _p(e)}function Wde(e){return new fC(e)}function Vde(e){return new cC(e)}function Ude(e){return new hC(e)}function Hde(e){return new pC(e)}function jde(e){return new gC(e)}function Gde(e){return new mC(e)}function qde(e){return new Mx(e)}function Kde(e){return new Mg(e)}function Xde(e){return new vC(e)}function Yde(e){return new Og(e)}function Zde(e){return new xC(e)}function Qde(e){return new wC(e)}function Jde(e){return new kC(e)}function ece(e){return new SC(e)}function tce(e){return new IC(e)}function nce(e){return new RC(e)}function rce(e){return new _C(e)}function ace(e){return new Bx(e)}function ice(e){return new NC(e)}function sce(e){return new AC(e)}function oce(e){return new DC(e)}function lce(e){return new FC(e)}function uce(e){return new MC(e)}function dce(e){return new LC(e)}function cce(e){return new PC(e)}function hce(e){return new BC(e)}function pce(e){return new UC(e)}function fce(e){return new WC(e)}function mce(e){return new VC(e)}function gce(e){return new zC(e)}function bce(e){return new HC(e)}function yce(e){return new KC(e)}function vce(e){return new XC(e)}function xce(e){return new YC(e)}function fE(e){return new QC(e)}function wce(e){return fE(e)}function kce(e){return fE(e)}function mE(e){return new eE(e)}function Sce(e){return mE(e)}function Ice(e){return mE(e)}function gE(e){return new nE(e)}function $ce(e){return gE(e)}function Cce(e){return gE(e)}function Ece(e){return new rE(e)}function Tce(e){return new iE(e)}function Zz(e){return new aE(e)}function Qz(e){return new sE(e)}function Jz(e){return new ZC(e)}function eB(e){return new JC(e)}function Nce(e){return new tE(e)}function _ce(e){return new CC(e)}function Ace(e){return new Lx(e)}function Rce(e){return new EC(e)}function Dce(e){return new Pg(e)}function Fce(e){return new $C(e)}function Mce(e){return new Ox(e)}function Oce(e){return new TC(e)}function Lce(e){return new zx(e)}function Pce(e){return new is(e)}function zce(e){return new Px(e)}function Bce(e){return new lE(e)}function Wce(e){return new oE(e)}var Vce=Zz,Uce=Qz,Hce=Jz,jce=eB;function Gce(e){return new jC(e)}function qce(e){return new GC(e)}function Kce(e){return new qC(e)}function Xce(e){return new OC(e)}function Yce(e){return new uE(e)}function Zce(e){return new dE(e)}function Qce(e){return new hE(e)}function Jce(e){return new cE(e)}function ehe(e){return new pE(e)}var tB={};We(tB,{MAPE:()=>che,MSE:()=>fhe,binaryAccuracy:()=>the,binaryCrossentropy:()=>nhe,categoricalAccuracy:()=>ahe,categoricalCrossentropy:()=>ihe,cosineProximity:()=>lhe,mape:()=>hhe,meanAbsoluteError:()=>uhe,meanAbsolutePercentageError:()=>dhe,meanSquaredError:()=>phe,mse:()=>mhe,precision:()=>she,recall:()=>ohe,sparseCategoricalAccuracy:()=>rhe});function the(e,t){return iC(e,t)}function nhe(e,t){return pz(e,t)}function rhe(e,t){return fz(e,t)}function ahe(e,t){return sC(e,t)}function ihe(e,t){return oC(e,t)}function she(e,t){return hz(e,t)}function ohe(e,t){return Wue(e,t)}function lhe(e,t){return aC(e,t)}function uhe(e,t){return Dx(e,t)}function dhe(e,t){return Ap(e,t)}function che(e,t){return Ap(e,t)}function hhe(e,t){return Ap(e,t)}function phe(e,t){return Fd(e,t)}function fhe(e,t){return Fd(e,t)}function mhe(e,t){return Fd(e,t)}var nB={};We(nB,{modelFromJSON:()=>mde});var rB={};We(rB,{l1:()=>bhe,l1l2:()=>ghe,l2:()=>yhe});function ghe(e){return new Dg(e)}function bhe(e){return kde(e)}function yhe(e){return Sde(e)}var aB=class extends ih{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Is))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function Db(e,t){return e<t}function dR(e,t){return e>t}var iB=class extends aB{constructor(e){if(super(),e==null&&(e={}),e.restoreBestWeights)throw new qe("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn("EarlyStopping mode '".concat(this.mode,"' is invalid. Falling back to mode 'auto'.")),this.mode="auto"),this.mode==="min"?this.monitorFunc=Db:this.mode==="max"?this.monitorFunc=dR:this.monitor.indexOf("acc")!==-1?this.monitorFunc=dR:this.monitorFunc=Db,this.monitorFunc===Db&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===Db?1/0:-1/0}async onEpochEnd(e,t){await js(t);let n=this.getMonitorValue(t);n!=null&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."))}getMonitorValue(e){e==null&&(e={});let t=e[this.monitor];return t==null&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. Available metrics are: ").concat(Object.keys(e))),t}};function vhe(e){return new iB(e)}var xhe={earlyStopping:vhe},whe=Z();whe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Va;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(Va||(Va={}));var cR;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(cR||(cR={}));var bE={};function khe(e,t){let n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};bE[e]=n}function sB(e){return bE[e]}function She(e){delete bE[e]}function S(e,t,n,r,a){let i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){let o=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,d=o<0?t.inputNames.length+o:o;if(i.type==="tensor")return Kn(t.inputNames[d],n,r,a);if(i.type==="tensors"){let h=t.inputs.slice(o,l);return t.inputNames.slice(o,l).filter((p,f)=>{var m;return((m=h[f])===null||m===void 0?void 0:m.op)!=="NoOp"}).map(p=>Kn(p,n,r,a))}let u=Kn(t.inputNames[d],n,r,a),c=u.dataSync();return i.type==="number"?c[0]:k.toNestedArray(u.shape,c)}let s=t.attrParams[e];return s&&s.value}function Kn(e,t,n,r){let[a,i]=Jr(e,n);if(r!=null){let o=r.getHashTableHandleByName(a);if(o!=null)return o}let s=n.currentContextIds.find(o=>!!t[wv(a,o)]);return s!==void 0?t[wv(a,s)][i]:void 0}function hR(e,t,n){return t[wv(e,n.currentContextId)]}function ms(e,t){let[n,r,a]=Jr(e,t);return[wv(n,t&&t.currentContextId),r,a]}function wv(e,t){return t?"".concat(e,"-").concat(t):e}function Jr(e,t){if(e==="")return["",0,void 0];let n=t!=null&&t.parseNodeNameCache!=null;if(n){let i=t.parseNodeNameCache.get(e);if(i!=null)return i}let r=e.split(":"),a;if(r.length===1)a=[e,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);a=[i,o,s]}return n&&t.parseNodeNameCache.set(e,a),a}function sy(e,t,n){let r=S("pad",e,t,n);if(r==="explicit"){r=S("explicitPaddings",e,t,n);let a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function gs(e){return e.kept?e:Ki(e)}var oB={};We(oB,{json:()=>Ihe});var Ihe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lB={};We(lB,{json:()=>$he});var $he=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],uB={};We(uB,{json:()=>Che});var Che=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],dB={};We(dB,{json:()=>Ehe});var Ehe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],cB={};We(cB,{json:()=>The});var The=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],hB={};We(hB,{json:()=>Nhe});var Nhe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pB={};We(pB,{json:()=>_he});var _he=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],fB={};We(fB,{json:()=>Ahe});var Ahe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],mB={};We(mB,{json:()=>Rhe});var Rhe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],gB={};We(gB,{json:()=>Dhe});var Dhe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],bB={};We(bB,{json:()=>Fhe});var Fhe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],yB={};We(yB,{json:()=>Mhe});var Mhe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],vB={};We(vB,{json:()=>Ohe});var Ohe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],xB={};We(xB,{json:()=>Lhe});var Lhe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],wB={};We(wB,{json:()=>Phe});var Phe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],kB={};We(kB,{json:()=>zhe});var zhe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],SB={};We(SB,{json:()=>Bhe});var Bhe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],IB={};We(IB,{json:()=>Whe});var Whe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],$B={};We($B,{json:()=>Vhe});var Vhe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],pR=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[oB,lB,uB,dB,cB,hB,pB,fB,mB,gB,bB,yB,vB,xB,wB,kB,SB,IB,$B],t=[].concat(...e.map(n=>n.json));this.opMappers=t.reduce((n,r)=>(n[r.tfOpName]=r,n),{})}transformGraph(e,t={}){let n=e.node,r=[],a=[],i=[],s=n.reduce((f,m)=>(f[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?r.push(f[m.name]):m.op==="Const"?a.push(f[m.name]):(m.input==null||m.input.length===0)&&i.push(f[m.name]),f),{}),o=[],l=[],d={},u={};t!=null&&(d=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));let c=Object.keys(s);c.forEach(f=>{let m=s[f];m.inputNames.forEach((g,b)=>{let[y,,v]=ms(g),x=s[y];if(x.outputs!=null){let w=x.outputs.indexOf(v);if(w!==-1){let $="".concat(y,":").concat(w);m.inputNames[b]=$}}m.inputs.push(x),x.children.push(m)})}),Object.keys(u).length===0?c.forEach(f=>{let m=s[f];m.children.length===0&&l.push(m)}):Object.keys(u).forEach(f=>{let[m]=ms(f),g=s[m];g!=null&&(g.signatureKey=u[f],l.push(g))}),Object.keys(d).length>0?Object.keys(d).forEach(f=>{let[m]=ms(f),g=s[m];g&&(g.signatureKey=d[f],o.push(g))}):o=r;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((f,m)=>(f[m.signature.name]=this.mapFunction(m),f),{}));let p={nodes:s,inputs:o,outputs:l,weights:a,placeholders:r,signature:t,functions:h};return i.length>0&&(p.initNodes=i),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=sB(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(n.inputParams=t.inputs.reduce((r,a)=>(r[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},r),{})),t.attrs!=null&&(n.attrParams=t.attrs.reduce((r,a)=>{let i=a.type,s;switch(a.type){case"string":s=Qk(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=Qk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":s=iS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=iS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":s=eS(e.attr,a.tfName,a.defaultValue||0),s===void 0&&a.tfDeprecatedName&&(s=eS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":s=aS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=aS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":s=Jk(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=Jk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":s=oS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=oS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":s=rS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=rS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":s=sS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=sS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":s=tS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=tS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":s=nS(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=nS(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":s=fR(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=fR(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(a.type," for op: ").concat(e.op))}return r[a.name]={value:s,type:i},r},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r=[],a={};t!=null&&(a=t.reduce((d,u)=>(d[u.name]=this.mapNode(u),u.op==="Const"&&r.push(d[u.name]),d),{}));let i=[],s=[];e.signature.inputArg.forEach(d=>{let[u]=ms(d.name),c={name:u,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:yE(d.type),type:"dtype"}},children:[]};c.signatureKey=d.name,i.push(c),a[u]=c}),Object.keys(a).forEach(d=>{let u=a[d];u.inputNames.forEach((c,h)=>{let[p,,f]=ms(c),m=a[p];if(m.outputs!=null){let g=m.outputs.indexOf(f);if(g!==-1){let b="".concat(p,":").concat(g);u.inputNames[h]=b}}u.inputs.push(m),m.children.push(u)})});let o=e.ret;e.signature.outputArg.forEach(d=>{let[u,c]=ms(o[d.name]),h=a[u];h!=null&&(h.defaultOutput=c,s.push(h))});let l=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:s,weights:r,placeholders:n,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n),t),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return t!=null&&(n=t[n]),{name:n,dtype:e.type}}};function Uhe(e){let t=Z().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function CB(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):Uhe(e);return t?n:n.toLowerCase()}function Qk(e,t,n,r=!1){let a=e[t];return a!=null?CB(a.s,r):n}function Jk(e,t,n){let r=e[t];return r?r.b:n}function eS(e,t,n){let r=e[t]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function yE(e){switch(typeof e=="string"&&(e=Va[e]),e){case Va.DT_FLOAT:case Va.DT_HALF:return"float32";case Va.DT_INT32:case Va.DT_INT64:case Va.DT_INT8:case Va.DT_UINT8:return"int32";case Va.DT_BOOL:return"bool";case Va.DT_DOUBLE:return"float32";case Va.DT_STRING:return"string";default:return null}}function fR(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function tS(e,t,n){let r=e[t];return r&&r.type?yE(r.type):n}function nS(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(a=>yE(a)):n}function EB(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function rS(e,t,n){let r=e[t];return r&&r.shape?EB(r.shape):n}function aS(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function iS(e,t,n,r=!1){let a=e[t];return a&&a.list&&a.list.s?a.list.s.map(i=>CB(i,r)):n}function sS(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(a=>EB(a)):n}function oS(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Hhe=class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,a)=>(r[a]=this.getAttr(a),r),{}))}getInput(e){return Kn(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(n.tensor!=null)return Kn(e,this.tensorMap,this.context);if(n.i!=null||n.f!=null)return eS(this.node.rawAttrs,e,t);if(n.s!=null)return Qk(this.node.rawAttrs,e,t);if(n.b!=null)return Jk(this.node.rawAttrs,e,t);if(n.shape!=null)return rS(this.node.rawAttrs,e,t);if(n.type!=null)return tS(this.node.rawAttrs,e,t);if(n.list!=null){if(n.list.i!=null||n.list.f!=null)return aS(this.node.rawAttrs,e,t);if(n.list.s!=null)return iS(this.node.rawAttrs,e,t);if(n.list.shape!=null)return sS(this.node.rawAttrs,e,t);if(n.list.b!=null)return oS(this.node.rawAttrs,e,t);if(n.list.type!=null)return nS(this.node.rawAttrs,e,t)}return t}},Hn={};We(Hn,{OP_SCOPE_SUFFIX:()=>w$,abs:()=>cn,acos:()=>$$,acosh:()=>C$,add:()=>ne,addN:()=>tL,all:()=>j0,any:()=>cm,argMax:()=>ql,argMin:()=>E$,asin:()=>T$,asinh:()=>N$,atan:()=>_$,atan2:()=>A$,atanh:()=>R$,avgPool:()=>Ms,avgPool3d:()=>F$,basicLSTMCell:()=>iL,batchNorm:()=>Nd,batchNorm2d:()=>M$,batchNorm3d:()=>O$,batchNorm4d:()=>L$,batchToSpaceND:()=>mg,bincount:()=>P$,bitwiseAnd:()=>sL,booleanMaskAsync:()=>YL,broadcastArgs:()=>oL,broadcastTo:()=>El,buffer:()=>Xe,cast:()=>ce,ceil:()=>z$,clipByValue:()=>cr,clone:()=>Ki,complex:()=>_s,concat:()=>kt,concat1d:()=>B$,concat2d:()=>W$,concat3d:()=>V$,concat4d:()=>U$,conv1d:()=>G0,conv2d:()=>$r,conv2dTranspose:()=>q0,conv3d:()=>j$,conv3dTranspose:()=>G$,cos:()=>gg,cosh:()=>K0,cosineWindow:()=>bx,cumprod:()=>fm,cumsum:()=>X0,denseBincount:()=>cv,depthToSpace:()=>q$,depthwiseConv2d:()=>_d,diag:()=>uL,dilation2d:()=>K$,div:()=>Se,divNoNan:()=>X$,dot:()=>Y$,dropout:()=>C2,einsum:()=>cL,elu:()=>Sp,enclosingPowerOfTwo:()=>E2,ensureShape:()=>hL,equal:()=>fa,erf:()=>Z$,euclideanNorm:()=>e2,exp:()=>Cr,expandDims:()=>qn,expm1:()=>t2,eye:()=>Y0,fft:()=>$g,fill:()=>ca,floor:()=>$p,floorDiv:()=>H0,fused:()=>nh,gather:()=>Cp,gatherND:()=>eP,greater:()=>Rr,greaterEqual:()=>Os,ifft:()=>th,imag:()=>bg,image:()=>$a,inTopKAsync:()=>tP,irfft:()=>dx,isFinite:()=>n2,isInf:()=>r2,isNaN:()=>a2,leakyRelu:()=>yg,less:()=>Zc,lessEqual:()=>jo,linalg:()=>_2,linspace:()=>bL,localResponseNormalization:()=>i2,log:()=>ma,log1p:()=>vg,logSigmoid:()=>s2,logSoftmax:()=>Q0,logSumExp:()=>J0,logicalAnd:()=>ei,logicalNot:()=>xg,logicalOr:()=>ex,logicalXor:()=>o2,losses:()=>pP,lowerBound:()=>vL,matMul:()=>Ge,max:()=>_a,maxPool:()=>Mn,maxPool3d:()=>l2,maxPoolWithArgmax:()=>xL,maximum:()=>rs,mean:()=>qt,meshgrid:()=>wL,min:()=>Yc,minimum:()=>Co,mirrorPad:()=>u2,mod:()=>d2,moments:()=>wg,movingAverage:()=>ZL,mul:()=>U,multiRNNCell:()=>kL,multinomial:()=>SL,neg:()=>Rt,norm:()=>Ip,notEqual:()=>Zl,oneHot:()=>Qc,ones:()=>ia,onesLike:()=>ga,op:()=>W,outerProduct:()=>IL,pad:()=>Ri,pad1d:()=>$L,pad2d:()=>CL,pad3d:()=>EL,pad4d:()=>TL,pool:()=>c2,pow:()=>As,prelu:()=>Sg,print:()=>I$,prod:()=>h2,raggedGather:()=>NL,raggedRange:()=>_L,raggedTensorToTensor:()=>AL,rand:()=>RL,randomGamma:()=>OL,randomNormal:()=>nx,randomStandardNormal:()=>LL,randomUniform:()=>Go,randomUniformInt:()=>PL,range:()=>Ql,real:()=>Jc,reciprocal:()=>b2,relu:()=>gt,relu6:()=>rx,reshape:()=>j,reverse:()=>Da,reverse1d:()=>zL,reverse2d:()=>BL,reverse3d:()=>WL,reverse4d:()=>VL,rfft:()=>Cg,round:()=>ax,rsqrt:()=>ix,scalar:()=>Ae,scatterND:()=>QL,searchSorted:()=>tx,selu:()=>sx,separableConv2d:()=>Ep,setdiff1dAsync:()=>UL,sigmoid:()=>Za,sign:()=>y2,signal:()=>hP,sin:()=>ox,sinh:()=>lx,slice:()=>Qe,slice1d:()=>Ig,slice2d:()=>ux,slice3d:()=>Tp,slice4d:()=>eh,softmax:()=>qo,softplus:()=>Ad,spaceToBatchND:()=>kg,sparse:()=>fP,sparseToDense:()=>JL,spectral:()=>cP,split:()=>Br,sqrt:()=>Jn,square:()=>xt,squaredDifference:()=>cx,squeeze:()=>Ko,stack:()=>Cn,step:()=>Rd,stridedSlice:()=>v2,string:()=>mP,sub:()=>we,sum:()=>Ie,tan:()=>x2,tanh:()=>Xl,tensor:()=>wr,tensor1d:()=>mt,tensor2d:()=>Xi,tensor3d:()=>hx,tensor4d:()=>Eo,tensor5d:()=>HL,tensor6d:()=>jL,tensorScatterUpdate:()=>qL,tile:()=>aa,topk:()=>k2,transpose:()=>Ke,truncatedNormal:()=>mx,unique:()=>S2,unsortedSegmentSum:()=>gx,unstack:()=>tn,upperBound:()=>KL,variable:()=>I2,where:()=>Wn,whereAsync:()=>$2,zeros:()=>Kt,zerosLike:()=>et});var jhe=(e,t,n,r=Hn)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(S("a",e,t,n),S("b",e,t,n))];case"AddN":return[r.addN(S("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(S("a",e,t,n),S("b",e,t,n))];case"Mul":return[r.mul(S("a",e,t,n),S("b",e,t,n))];case"RealDiv":case"Div":return[r.div(S("a",e,t,n),S("b",e,t,n))];case"DivNoNan":return[r.divNoNan(S("a",e,t,n),S("b",e,t,n))];case"FloorDiv":return[r.floorDiv(S("a",e,t,n),S("b",e,t,n))];case"Sub":return[r.sub(S("a",e,t,n),S("b",e,t,n))];case"Minimum":return[r.minimum(S("a",e,t,n),S("b",e,t,n))];case"Maximum":return[r.maximum(S("a",e,t,n),S("b",e,t,n))];case"Pow":return[r.pow(S("a",e,t,n),S("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(S("a",e,t,n),S("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ghe=(e,t,n,r=Hn)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(S("x",e,t,n))];case"Acos":return[r.acos(S("x",e,t,n))];case"Acosh":return[r.acosh(S("x",e,t,n))];case"Asin":return[r.asin(S("x",e,t,n))];case"Asinh":return[r.asinh(S("x",e,t,n))];case"Atan":return[r.atan(S("x",e,t,n))];case"Atan2":return[r.atan2(S("x",e,t,n),S("y",e,t,n))];case"Atanh":return[r.atanh(S("x",e,t,n))];case"Ceil":return[r.ceil(S("x",e,t,n))];case"Complex":return[r.complex(S("real",e,t,n),S("imag",e,t,n))];case"Cos":return[r.cos(S("x",e,t,n))];case"Cosh":return[r.cosh(S("x",e,t,n))];case"Elu":return[r.elu(S("x",e,t,n))];case"Erf":return[r.erf(S("x",e,t,n))];case"Exp":return[r.exp(S("x",e,t,n))];case"Expm1":return[r.expm1(S("x",e,t,n))];case"Floor":return[r.floor(S("x",e,t,n))];case"Log":return[r.log(S("x",e,t,n))];case"Log1p":return[r.log1p(S("x",e,t,n))];case"Imag":return[r.imag(S("x",e,t,n))];case"Neg":return[r.neg(S("x",e,t,n))];case"Reciprocal":return[r.reciprocal(S("x",e,t,n))];case"Real":return[r.real(S("x",e,t,n))];case"Relu":return[r.relu(S("x",e,t,n))];case"Round":return[r.round(S("x",e,t,n))];case"Selu":return[r.selu(S("x",e,t,n))];case"Sigmoid":return[r.sigmoid(S("x",e,t,n))];case"Sin":return[r.sin(S("x",e,t,n))];case"Sign":return[r.sign(S("x",e,t,n))];case"Sinh":return[r.sinh(S("x",e,t,n))];case"Softplus":return[r.softplus(S("x",e,t,n))];case"Sqrt":return[r.sqrt(S("x",e,t,n))];case"Square":return[r.square(S("x",e,t,n))];case"Tanh":return[r.tanh(S("x",e,t,n))];case"Tan":return[r.tan(S("x",e,t,n))];case"ClipByValue":return[r.clipByValue(S("x",e,t,n),S("clipValueMin",e,t,n),S("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(S("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Kn(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(S("x",e,t,n),S("alpha",e,t,n))];case"Prelu":return[r.prelu(S("x",e,t,n),S("alpha",e,t,n))];case"IsNan":return[r.isNaN(Kn(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(Kn(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(Kn(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Ga(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){k.assert(e.length===t.length,()=>n+" Shapes ".concat(e," and ").concat(t," must match"));for(let r=0;r<e.length;r++){let a=e[r],i=t[r];k.assert(a<0||i<0||a===i,()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}}}function mR(e){return!(typeof e=="number"||e.some(t=>t<0))}function nf(e,t,n){let r=lS(e,n),a=!mR(r);if(a&&t.length===0)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach(i=>{r=lS(i.shape,r)}),!mR(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function lS(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));let n=[];for(let r=0;r<e.length;++r){let a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var qhe=class{constructor(e,t,n,r,a,i,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Ae(0),In(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));let t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Ga(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,In(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((n,r)=>this.write(n,t[r]))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return wr([],[0].concat(this.elementShape));let n=this.readMany(e);return Ga(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Cn(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(this.size()===0)return wr([],[0].concat(this.elementShape));let t=[];for(let r=0;r<this.size();r++)t.push(r);let n=this.readMany(t);return Ga(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),kt(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,tn(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0,r=e.map(o=>(n+=o,n));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));let a=n===0?0:t.size/n,i=[];G(()=>{t=j(t,[1,n,a]);for(let o=0;o<e.length;++o){let l=[0,o===0?0:r[o-1],0],d=[1,e[o],a];i[o]=j(Qe(t,l,d),this.elementShape)}return i});let s=[];for(let o=0;o<e.length;o++)s[o]=o;this.writeMany(s,i)}},oh=class{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,e!=null&&e.forEach(a=>{if(n!==a.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(a.dtype));Ga(t,a.shape,"TensorList shape mismatch: "),In(a)}),this.idTensor=Ae(0),this.maxNumElements=r,In(this.idTensor)}copy(){return new oh([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(n!==-1&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));Ga(e,this.elementShape,"TensorList shape mismatch: ");let r=nf(this.elementShape,this.tensors,e);return G(()=>{let a=this.tensors.map(i=>j(i,r));return Cn(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(this.size()===0)throw new Error("Trying to pop from an empty list.");let n=nf(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,Ga(r.shape,e,"TensorList shape mismatch: "),j(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Ga(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");In(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));let t=new oh([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(this.tensors[e]==null)throw new Error("element at index ".concat(e," is null."));Ga(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=nf(this.elementShape,this.tensors,t);return j(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Ga(this.elementShape,t.shape,"TensorList shape mismatch: "),In(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Ga(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=nf(this.elementShape,this.tensors,n);return e.length===0?wr([],[0].concat(r)):G(()=>{let a=e.map(i=>j(this.tensors[i],r));return Cn(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Ga(this.elementShape,t,"TensorList shape mismatch: ");let n=nf(this.elementShape,this.tensors,t);return this.size()===0?wr([],[0].concat(n)):G(()=>{let r=this.tensors.map(a=>j(a,n));return kt(r,0)})}};function Khe(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));let a=e.shape.slice(1);Ga(a,t,"TensorList shape mismatch: ");let i=tn(e);return new oh(i,t,r)}function Xhe(e,t,n,r){return new oh([],e,t,r)}function Yhe(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));let a=Math.max(...t);if(r!=null&&r!==-1&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));let i=new oh([],n,e.dtype,r),s=tn(e,0);return t.forEach((o,l)=>{i.setItem(o,s[l])}),i}function Zhe(e,t,n){let r=0,a=t.map(u=>(r+=u,r));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));let i=e.shape.slice(1),s=lS(i,n),o=r===0?0:e.size/r,l=G(()=>{let u=[];e=j(e,[1,r,o]);for(let c=0;c<t.length;++c){let h=[0,c===0?0:a[c-1],0],p=[1,t[c],o];u[c]=j(Qe(e,h,p),s)}return e.dispose(),u}),d=new oh([],n,e.dtype,t.length);for(let u=0;u<l.length;u++)d.setItem(u,l[u]);return d}var Qhe=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=S("thenBranch",e,t,n),a=S("elseBranch",e,t,n),i=S("cond",e,t,n),s=S("args",e,t,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=S("body",e,t,n),a=S("cond",e,t,n),i=S("args",e,t,n),s=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(u=>u.id),l=await s[0].data();s.forEach(u=>{!u.kept&&o.indexOf(u.id)===-1&&u.dispose()});let d=i;for(;l[0];){let u=d;d=await n.functionMap[r].executeFunctionAsync(d,n.tensorArrayMap,n.tensorListMap);let c=d.map(p=>p.id);u.forEach(p=>{!p.kept&&o.indexOf(p.id)===-1&&c.indexOf(p.id)===-1&&p.dispose()});let h=await n.functionMap[a].executeFunctionAsync(d,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(p=>{!p.kept&&o.indexOf(p.id)===-1&&c.indexOf(p.id)===-1&&p.dispose()})}return d}case"LoopCond":{let r=S("pred",e,t,n);return[gs(r)]}case"Switch":{let r=S("pred",e,t,n),a=S("data",e,t,n);return a.kept||(a=gs(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let r=e.inputNames.find(a=>Kn(a,t,n)!==void 0);if(r){let a=Kn(r,t,n);return[gs(a)]}return}case"Enter":{let r=S("frameName",e,t,n),a=S("tensor",e,t,n);return n.enterFrame(r),[gs(a)]}case"Exit":{let r=S("tensor",e,t,n);return n.exitFrame(),[gs(r)]}case"NextIteration":{let r=S("tensor",e,t,n);return n.nextIteration(),[gs(r)]}case"TensorArrayV3":{let r=S("size",e,t,n),a=S("dtype",e,t,n),i=S("elementShape",e,t,n),s=S("dynamicSize",e,t,n),o=S("clearAfterRead",e,t,n),l=S("identicalElementShapes",e,t,n),d=S("name",e,t,n),u=new qhe(d,a,r,i,l,s,o);return n.addTensorArray(u),[u.idTensor,Ae(1)]}case"TensorArrayWriteV3":{let r=S("tensorArrayId",e,t,n),a=S("index",e,t,n),i=S("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(a,i),[s.idTensor]}case"TensorArrayReadV3":{let r=S("tensorArrayId",e,t,n),a=S("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{let r=S("tensorArrayId",e,t,n),a=S("indices",e,t,n),i=S("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{let r=S("tensorArrayId",e,t,n),a=S("indices",e,t,n),i=S("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(a,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=S("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),i=S("dtype",e,t,n);return[a.concat(i)]}case"TensorArraySplitV3":{let r=S("tensorArrayId",e,t,n),a=S("tensor",e,t,n),i=S("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,a),[s.idTensor]}case"TensorArraySizeV3":{let r=S("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return[Ae(a.size(),"int32")]}case"TensorArrayCloseV3":{let r=S("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let r=S("tensorListId",e,t,n),a=S("index",e,t,n),i=S("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(a,i),[s.idTensor]}case"TensorListGetItem":{let r=S("tensorListId",e,t,n),a=S("index",e,t,n),i=S("elementShape",e,t,n),s=S("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=S("indices",e,t,n),a=S("tensor",e,t,n),i=S("elementShape",e,t,n),s=S("numElements",e,t,n),o=Yhe(a,r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=S("elementShape",e,t,n),a=S("elementDType",e,t,n),i;e.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=S(i,e,t,n),o=e.op==="TensorListReserve"?-1:s,l=Xhe(r,a,s,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=S("tensorListId",e,t,n),a=S("indices",e,t,n),i=S("elementShape",e,t,n),s=S("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,s,i)]}case"TensorListStack":{let r=S("tensorListId",e,t,n),a=S("elementShape",e,t,n),i=S("elementDType",e,t,n),s=S("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,i,s)]}case"TensorListFromTensor":{let r=S("tensor",e,t,n),a=S("elementShape",e,t,n),i=S("elementDType",e,t,n),s=Khe(r,a,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=S("tensorListId",e,t,n),a=n.getTensorList(r.id),i=S("dtype",e,t,n),s=S("elementShape",e,t,n);return[a.concat(i,s)]}case"TensorListPushBack":{let r=S("tensorListId",e,t,n),a=S("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{let r=S("tensorListId",e,t,n),a=S("elementShape",e,t,n),i=S("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{let r=S("tensor",e,t,n),a=S("elementShape",e,t,n),i=S("lengths",e,t,n),s=Zhe(r,i,a);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=S("tensorListId",e,t,n),a=n.getTensorList(r.id);return[Ae(a.size(),"int32")]}case"TensorListResize":{let r=S("tensorListId",e,t,n),a=S("size",e,t,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function gR(e,t,n){let[r,a]=S("fusedOps",e,t,n),i=r==="biasadd",s=!i,o=a==="prelu",l=r==="fusedbatchnorm",d=S("numArgs",e,t,n);if(i){if(o&&d!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&d!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=S("strides",e,t,n),c=sy(e,t,n),h=S("dataFormat",e,t,n).toUpperCase(),p=S("dilations",e,t,n),[f,m]=S("args",e,t,n);s&&(m=f,f=void 0);let g=S("leakyreluAlpha",e,t,n);return{stride:u,pad:c,dataFormat:h,dilations:p,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:g}}var Jhe=(e,t,n,r=Hn)=>{switch(e.op){case"Conv1D":{let a=S("stride",e,t,n),i=S("pad",e,t,n),s=S("dataFormat",e,t,n).toUpperCase(),o=S("dilation",e,t,n);return[r.conv1d(S("x",e,t,n),S("filter",e,t,n),a,i,s,o)]}case"Conv2D":{let a=S("strides",e,t,n),i=sy(e,t,n),s=S("dataFormat",e,t,n).toUpperCase(),o=S("dilations",e,t,n);return[r.conv2d(S("x",e,t,n),S("filter",e,t,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":{let{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:l,preluArg:d,activationFunc:u,leakyreluAlpha:c}=gR(e,t,n);return[r.fused.conv2d({x:S("x",e,t,n),filter:S("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:d,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:l,preluArg:d,activationFunc:u,leakyreluAlpha:c}=gR(e,t,n);return[r.fused.depthwiseConv2d({x:S("x",e,t,n),filter:S("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:d,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=S("outputShape",e,t,n),i=S("strides",e,t,n),s=sy(e,t,n);return[r.conv2dTranspose(S("x",e,t,n),S("filter",e,t,n),a,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=S("strides",e,t,n),i=sy(e,t,n),s=S("dilations",e,t,n),o=S("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(S("input",e,t,n),S("filter",e,t,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"Conv3D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("dataFormat",e,t,n).toUpperCase(),o=S("dilations",e,t,n);return[r.conv3d(S("x",e,t,n),S("filter",e,t,n),[a[1],a[2],a[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.avgPool(S("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPool":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.maxPool(S("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n),o=S("includeBatchInIndex",e,t,n),{result:l,indexes:d}=r.maxPoolWithArgmax(S("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i,o);return[l,d]}case"AvgPool3D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.avgPool3d(S("x",e,t,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("kernelSize",e,t,n);return[r.maxPool3d(S("x",e,t,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{let a=S("strides",e,t,n),i=S("pad",e,t,n),s=S("dilations",e,t,n),o=a[1],l=a[2],d=s[1],u=s[2];return[r.dilation2d(S("x",e,t,n),S("filter",e,t,n),[o,l],i,[d,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},epe=(e,t,n,r=Hn)=>{switch(e.op){case"Fill":{let a=S("shape",e,t,n),i=S("dtype",e,t,n),s=S("value",e,t,n);return[r.fill(a,s,i)]}case"LinSpace":{let a=S("start",e,t,n),i=S("stop",e,t,n),s=S("num",e,t,n);return[r.linspace(a,i,s)]}case"Multinomial":{let a=S("logits",e,t,n),i=S("numSamples",e,t,n),s=S("seed",e,t,n);return[r.multinomial(a,i,s)]}case"OneHot":{let a=S("indices",e,t,n),i=S("depth",e,t,n),s=S("onValue",e,t,n),o=S("offValue",e,t,n),l=S("dtype",e,t,n);return[r.oneHot(a,i,s,o,l)]}case"Ones":return[r.ones(S("shape",e,t,n),S("dtype",e,t,n))];case"OnesLike":return[r.onesLike(S("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(S("shape",e,t,n),S("dtype",e,t,n),S("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(S("shape",e,t,n),S("minval",e,t,n),S("maxval",e,t,n),S("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(S("shape",e,t,n),S("minval",e,t,n),S("maxval",e,t,n),S("seed",e,t,n))];case"Range":{let a=S("start",e,t,n),i=S("stop",e,t,n),s=S("step",e,t,n);return[r.range(a,i,s,S("dtype",e,t,n))]}case"TruncatedNormal":{let a=S("shape",e,t,n),i=S("mean",e,t,n),s=S("stdDev",e,t,n),o=S("seed",e,t,n);return[r.truncatedNormal(a,i,s,S("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(S("shape",e,t,n),S("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(S("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function l1(e,t,n){let r=S("boxes",e,t,n),a=S("scores",e,t,n),i=S("maxOutputSize",e,t,n),s=S("iouThreshold",e,t,n),o=S("scoreThreshold",e,t,n),l=S("softNmsSigma",e,t,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:o,softNmsSigma:l}}var tpe=async(e,t,n,r,a=Hn)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:i,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:d,softNmsSigma:u}=l1(e,t,n),c=await a.image.nonMaxSuppressionWithScoreAsync(i,s,o,l,d,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:i,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:d}=l1(e,t,n),u=S("padToMaxOutputSize",e,t,n),c=await a.image.nonMaxSuppressionPaddedAsync(i,s,o,l,d,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:i,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:d}=l1(e,t,n);return[await a.image.nonMaxSuppressionAsync(i,s,o,l,d)]}case"Where":{let i=a.cast(S("condition",e,t,n),"bool"),s=[await a.whereAsync(i)];return i.dispose(),s}case"ListDiff":return a.setdiff1dAsync(S("x",e,t,n),S("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},npe=(e,t,n,r=Hn)=>{switch(e.op){case"LowerBound":{let a=S("sortedSequence",e,t,n),i=S("values",e,t,n);return[r.lowerBound(a,i)]}case"TopKV2":{let a=S("x",e,t,n),i=S("k",e,t,n),s=S("sorted",e,t,n),o=r.topk(a,i,s);return[o.values,o.indices]}case"UpperBound":{let a=S("sortedSequence",e,t,n),i=S("values",e,t,n);return[r.upperBound(a,i)]}case"Unique":{let a=S("x",e,t,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{let a=S("x",e,t,n),i=S("axis",e,t,n),s=r.unique(a,i);return[s.values,s.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},rpe=(e,t,n,r=Hn)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=S("default",e,t,n);return[Kn(e.name,t,n)||a];case"Placeholder":return[Kn(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=S("x",e,t,n);return[gs(u)]}case"IdentityN":return S("x",e,t,n).map(u=>gs(u));case"Snapshot":let i=S("x",e,t,n);return[gs(i)];case"Shape":return[r.tensor1d(S("x",e,t,n).shape,"int32")];case"ShapeN":return S("x",e,t,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(S("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(S("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=S("x",e,t,n),o=S("data",e,t,n),l=S("message",e,t,n),d=S("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,d));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ape=class{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Ae(0),this.tensorMap=new Map,In(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ae(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),G(()=>{let r=tn(t),a=n.length,i=r.length;k.assert(a===i,()=>"The number of elements doesn't match, keys has ".concat(a," elements, the values has ").concat(i," elements."));for(let s=0;s<a;s++){let o=n[s],l=r[s];In(l),this.tensorMap.set(o,l)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return G(()=>{let r=[];for(let a=0;a<n.length;a++){let i=n[a],s=this.findWithDefault(i,t);r.push(s)}return Cn(r)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return n!=null?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}},ipe=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=r.getHashTableHandleByName(e.name);if(a!=null)return[a];{let i=S("keyDType",e,t,n),s=S("valueDType",e,t,n),o=new ape(i,s);return r.addHashTable(e.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let a=S("tableHandle",e,t,n,r),i=S("keys",e,t,n),s=S("values",e,t,n);return[await r.getHashTableById(a.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let a=S("tableHandle",e,t,n,r),i=S("keys",e,t,n),s=S("defaultValue",e,t,n);return[await r.getHashTableById(a.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=S("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},spe=(e,t,n,r=Hn)=>{switch(e.op){case"ResizeBilinear":{let a=S("images",e,t,n),i=S("size",e,t,n),s=S("alignCorners",e,t,n),o=S("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],s,o)]}case"ResizeNearestNeighbor":{let a=S("images",e,t,n),i=S("size",e,t,n),s=S("alignCorners",e,t,n),o=S("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],s,o)]}case"CropAndResize":{let a=S("image",e,t,n),i=S("boxes",e,t,n),s=S("boxInd",e,t,n),o=S("cropSize",e,t,n),l=S("method",e,t,n),d=S("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,i,s,o,l,d)]}case"ImageProjectiveTransformV3":{let a=S("images",e,t,n),i=S("transforms",e,t,n),s=S("outputShape",e,t,n),o=S("fillValue",e,t,n),l=S("interpolation",e,t,n),d=S("fillMode",e,t,n);return[r.image.transform(a,i,l.toLowerCase(),d.toLowerCase(),o,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ope=(e,t,n,r=Hn)=>{switch(e.op){case"Equal":return[r.equal(S("a",e,t,n),S("b",e,t,n))];case"NotEqual":return[r.notEqual(S("a",e,t,n),S("b",e,t,n))];case"Greater":return[r.greater(S("a",e,t,n),S("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(S("a",e,t,n),S("b",e,t,n))];case"Less":return[r.less(S("a",e,t,n),S("b",e,t,n))];case"LessEqual":return[r.lessEqual(S("a",e,t,n),S("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(S("a",e,t,n),S("b",e,t,n))];case"LogicalNot":return[r.logicalNot(S("a",e,t,n))];case"LogicalOr":return[r.logicalOr(S("a",e,t,n),S("b",e,t,n))];case"Select":case"SelectV2":return[r.where(S("condition",e,t,n),S("a",e,t,n),S("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(S("a",e,t,n),S("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},lpe=(e,t,n,r=Hn)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(S("a",e,t,n),S("b",e,t,n),S("transposeA",e,t,n),S("transposeB",e,t,n))];case"Einsum":return[r.einsum(S("equation",e,t,n),...S("tensors",e,t,n))];case"Transpose":return[r.transpose(S("x",e,t,n),S("perm",e,t,n))];case"_FusedMatMul":let[a,i]=S("fusedOps",e,t,n),s=a==="biasadd",o=i==="prelu",l=S("numArgs",e,t,n),d=S("leakyreluAlpha",e,t,n);if(s){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,c]=S("args",e,t,n);return[r.fused.matMul({a:S("a",e,t,n),b:S("b",e,t,n),transposeA:S("transposeA",e,t,n),transposeB:S("transposeB",e,t,n),bias:u,activation:i,preluActivationWeights:c,leakyreluAlpha:d})];case"MatrixBandPart":return[r.linalg.bandPart(S("a",e,t,n),S("numLower",e,t,n),S("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},upe=(e,t,n,r=Hn)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(S("x",e,t,n),S("axis",e,t,n),S("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(S("x",e,t,n),S("mean",e,t,n),S("variance",e,t,n),S("offset",e,t,n),S("scale",e,t,n),S("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(S("x",e,t,n),S("mean",e,t,n),S("variance",e,t,n),S("offset",e,t,n),S("scale",e,t,n),S("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(S("x",e,t,n),S("radius",e,t,n),S("bias",e,t,n),S("alpha",e,t,n),S("beta",e,t,n))];case"Softmax":return[r.softmax(S("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(S("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},dpe=(e,t,n,r=Hn)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:a,outputDenseValues:i}=r.raggedGather(S("paramsNestedSplits",e,t,n),S("paramsDenseValues",e,t,n),S("indices",e,t,n),S("outputRaggedRank",e,t,n));return a.concat(i)}case"RaggedRange":{let{rtNestedSplits:a,rtDenseValues:i}=r.raggedRange(S("starts",e,t,n),S("limits",e,t,n),S("splits",e,t,n));return[a,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(S("shape",e,t,n),S("values",e,t,n),S("defaultValue",e,t,n),S("rowPartitionTensors",e,t,n),S("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},cpe=(e,t,n,r=Hn)=>{switch(e.op){case"Max":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.max(S("x",e,t,n),o,l)]}case"Mean":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.mean(S("x",e,t,n),o,l)]}case"Min":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.min(S("x",e,t,n),o,l)]}case"Sum":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.sum(S("x",e,t,n),o,l)]}case"All":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.all(S("x",e,t,n),o,l)]}case"Any":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.any(S("x",e,t,n),o,l)]}case"ArgMax":{let o=S("axis",e,t,n);return[r.argMax(S("x",e,t,n),o)]}case"ArgMin":{let o=S("axis",e,t,n);return[r.argMin(S("x",e,t,n),o)]}case"Prod":{let o=S("axis",e,t,n),l=S("keepDims",e,t,n);return[r.prod(S("x",e,t,n),o,l)]}case"Cumprod":{let o=S("axis",e,t,n),l=S("exclusive",e,t,n),d=S("reverse",e,t,n);return[r.cumprod(S("x",e,t,n),o,l,d)]}case"Cumsum":{let o=S("axis",e,t,n),l=S("exclusive",e,t,n),d=S("reverse",e,t,n);return[r.cumsum(S("x",e,t,n),o,l,d)]}case"Bincount":let a=S("x",e,t,n),i=S("weights",e,t,n),s=S("size",e,t,n);return[r.bincount(a,i,s)];case"DenseBincount":{let o=S("x",e,t,n),l=S("weights",e,t,n),d=S("size",e,t,n),u=S("binaryOutput",e,t,n);return[r.denseBincount(o,l,d,u)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},hpe=(e,t,n,r=Hn)=>{switch(e.op){case"ConcatV2":case"Concat":{let a=S("n",e,t,n),i=S("axis",e,t,n),s=S("tensors",e,t,n);return s=s.slice(0,a),[r.concat(s,i)]}case"Gather":{let a=S("x",e,t,n),i=S("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{let a=S("axis",e,t,n),i=S("batchDims",e,t,n),s=S("x",e,t,n),o=S("indices",e,t,n);return[r.gather(s,r.cast(o,"int32"),a,i)]}case"Reverse":{let a=S("dims",e,t,n),i=[];for(let o=0;o<a.length;o++)a[o]&&i.push(o);let s=S("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{let a=S("axis",e,t,n),i=S("x",e,t,n);return[r.reverse(i,a)]}case"Slice":{let a=S("begin",e,t,n),i=S("size",e,t,n);return[r.slice(S("x",e,t,n),a,i)]}case"StridedSlice":{let a=S("begin",e,t,n),i=S("end",e,t,n),s=S("strides",e,t,n),o=S("beginMask",e,t,n),l=S("endMask",e,t,n),d=S("ellipsisMask",e,t,n),u=S("newAxisMask",e,t,n),c=S("shrinkAxisMask",e,t,n),h=S("x",e,t,n);return[r.stridedSlice(h,a,i,s,o,l,d,u,c)]}case"Pack":return G(()=>{let a=S("axis",e,t,n),i=S("tensors",e,t,n),s=i[0].shape,o=r.squeeze(i[0]).shape,l=i.map(d=>{let u=k.arraysEqual(d.shape,s);if(!u&&!k.arraysEqual(r.squeeze(d).shape,o))throw new Error("the input tensors shape does not match");return u?d:r.reshape(d,s)});return[r.stack(l,a)]});case"Unpack":{let a=S("axis",e,t,n),i=S("tensor",e,t,n);return r.unstack(i,a)}case"Tile":{let a=S("reps",e,t,n);return[r.tile(S("x",e,t,n),a)]}case"Split":case"SplitV":{let a=S("axis",e,t,n),i=S("numOrSizeSplits",e,t,n),s=S("x",e,t,n);return r.split(s,i,a)}case"ScatterNd":{let a=S("indices",e,t,n),i=S("values",e,t,n),s=S("shape",e,t,n);return[r.scatterND(a,i,s)]}case"GatherNd":{let a=S("x",e,t,n),i=S("indices",e,t,n);return[r.gatherND(a,i)]}case"SparseToDense":{let a=S("sparseIndices",e,t,n),i=S("outputShape",e,t,n),s=S("sparseValues",e,t,n),o=S("defaultValue",e,t,n);return[r.sparseToDense(a,s,i,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{let a=S("indices",e,t,n),i=S("values",e,t,n),s=S("tensor",e,t,n);return[r.tensorScatterUpdate(s,a,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ppe=(e,t,n,r=Hn)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:i,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(S("indices",e,t,n),S("values",e,t,n),S("denseShape",e,t,n),S("defaultValue",e,t,n));return[a,i,s,o]}case"SparseReshape":{let{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(S("inputIndices",e,t,n),S("inputShape",e,t,n),S("newShape",e,t,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(S("data",e,t,n),S("indices",e,t,n),S("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(S("data",e,t,n),S("indices",e,t,n),S("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},fpe=(e,t,n,r=Hn)=>{switch(e.op){case"FFT":return[r.fft(S("x",e,t,n))];case"IFFT":return[r.ifft(S("x",e,t,n))];case"RFFT":return[r.rfft(S("x",e,t,n))];case"IRFFT":return[r.irfft(S("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},mpe=(e,t,n,r=Hn)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(S("input",e,t,n),S("pattern",e,t,n),S("rewrite",e,t,n),S("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(S("data",e,t,n),S("dataSplits",e,t,n),S("separator",e,t,n),S("nGramWidths",e,t,n),S("leftPad",e,t,n),S("rightPad",e,t,n),S("padWidth",e,t,n),S("preserveShortSequences",e,t,n));return[a,i]}case"StringSplit":{let{indices:a,values:i,shape:s}=r.string.stringSplit(S("input",e,t,n),S("delimiter",e,t,n),S("skipEmpty",e,t,n));return[a,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(S("input",e,t,n),S("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},gpe=(e,t,n,r=Hn)=>{switch(e.op){case"Cast":return[r.cast(S("x",e,t,n),S("dtype",e,t,n))];case"ExpandDims":{let a=S("axis",e,t,n);return[r.expandDims(S("x",e,t,n),a)]}case"Squeeze":{let a=S("axis",e,t,n);return[r.squeeze(S("x",e,t,n),a)]}case"Reshape":return[r.reshape(S("x",e,t,n),S("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(S("x",e,t,n),S("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(S("x",e,t,n),S("padding",e,t,n),S("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(S("x",e,t,n),S("padding",e,t,n),S("constantValue",e,t,n))];case"SpaceToBatchND":{let a=S("blockShape",e,t,n),i=S("paddings",e,t,n);return[r.spaceToBatchND(S("x",e,t,n),a,i)]}case"BatchToSpaceND":{let a=S("blockShape",e,t,n),i=S("crops",e,t,n);return[r.batchToSpaceND(S("x",e,t,n),a,i)]}case"DepthToSpace":{let a=S("blockSize",e,t,n),i=S("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(S("x",e,t,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(S("x",e,t,n),S("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(S("s0",e,t,n),S("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function bR(e,t,n,r,a=G){let i=((s,o,l)=>{switch(s.category){case"arithmetic":return a(()=>jhe(s,o,l));case"basic_math":return a(()=>Ghe(s,o,l));case"control":return Qhe(s,o,l);case"convolution":return a(()=>Jhe(s,o,l));case"creation":return a(()=>epe(s,o,l));case"dynamic":return tpe(s,o,l);case"evaluation":return a(()=>npe(s,o,l));case"image":return a(()=>spe(s,o,l));case"graph":return a(()=>rpe(s,o,l));case"logical":return a(()=>ope(s,o,l));case"matrices":return a(()=>lpe(s,o,l));case"normalization":return a(()=>upe(s,o,l));case"ragged":return a(()=>dpe(s,o,l));case"reduction":return a(()=>cpe(s,o,l));case"slice_join":return a(()=>hpe(s,o,l));case"sparse":return a(()=>ppe(s,o,l));case"spectral":return a(()=>fpe(s,o,l));case"string":return a(()=>mpe(s,o,l));case"transformation":return a(()=>gpe(s,o,l));case"hash_table":return ipe(s,o,l,r);case"custom":let d=sB(s.op);if(d&&d.customExecutor)return d.customExecutor(new Hhe(s,o,l));throw TypeError("Custom op ".concat(s.op," is not registered."));default:throw TypeError("Unknown op '".concat(s.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}})(e,t,n);return k.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var yR=class{constructor(e={},t={},n={},r={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":"".concat(t.frameName,"-").concat(t.iterationId)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function vR(e,t,n,r){let a=new Set,i=[],s=null,o=null,l=new Set,d=new Set(Object.keys(e).map(h=>Jr(h)[0]));r=r||[];let u=new Set(r.map(h=>Jr(h.name)[0])),c=[...t];for(;c.length>0;){let h=c.pop();if((ml(h)||Ipe(h)||$pe(h))&&s==null&&(s=h,o=s.children.map(p=>p.name).filter(p=>a.has(p))),a.add(h.name),n[h.name]==null&&!d.has(h.name)&&!u.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),c.push(p))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:s,syncInputs:o}}function bpe(e,t){let{usedNodes:n,inputs:r}=t,a=Object.keys(r).map(g=>Jr(g)[0]).map(g=>e.nodes[g]),i=e.initNodes||[],s=g=>n.has(typeof g=="string"?g:g.name);function o(g){return[...new Map(g.map(b=>[b.name,b])).values()]}let l=o([...a,...e.weights,...i]).filter(s),d=o([...l,...Object.values(e.nodes)]).filter(s),u=new Map(d.map(g=>[g.name,g])),c={};for(let g of d){c[g.name]=c[g.name]||0;for(let b of g.children)s(b)||(c[b.name]=Number.POSITIVE_INFINITY),c[b.name]=(c[b.name]||0)+1}let h=Object.entries(c).filter(([,g])=>g===0).map(([g])=>g),p=[...h];for(;h.length>0;){let g=h.pop(),b=u.get(g);for(let y of b.children.filter(s))--c[y.name]===0&&(p.push(y.name),h.push(y.name))}let f=p.map(g=>u.get(g)),m=ype(f,l);return vpe(m,l),m}function ype(e,t){let n=new Map(e.map(i=>[i.name,i])),r=t.map(i=>i.name),a=new Set(r);for(;r.length>0;){let i=r.pop(),s=n.get(i);for(let o of s.children)!n.has(o.name)||a.has(o.name)||(a.add(o.name),r.push(o.name))}return e.filter(i=>a.has(i.name))}var Fb=class extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}};function vpe(e,t){let n=new Map(e.map((o,l)=>[o.name,l])),r=new Set(t.map(o=>o.name)),a=o=>r.has(typeof o=="string"?o:o.name),i=new Set(e.map(o=>o.name)),s=o=>i.has(typeof o=="string"?o:o.name);for(let o of e){for(let l of o.children.filter(s)){if(!n.has(l.name))throw new Fb("Child ".concat(l.name," of node ").concat(o.name," is unreachable."));if(n.get(o.name)>n.get(l.name))throw new Fb("Node ".concat(o.name," is scheduled to run after its child ").concat(l.name,"."))}if(!a(o))for(let l of o.inputs){if(!n.has(l.name))throw new Fb("Input ".concat(l.name," of node ").concat(o.name," is unreachable."));if(n.get(l.name)>n.get(o.name))throw new Fb("Node ".concat(o.name," is scheduled to run before its input ").concat(l.name,"."))}}}function xpe(e){let t=new Map(e.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=e.map((o,l)=>ml(o)?n:l),a=o=>{let l=r[t.get(o.name)];return l==null?-1:l},i=e.map((o,l)=>o.children.map(a).reduce((d,u)=>Math.max(d,u),r[l])),s=new Map;for(let o=0;o<e.length;++o){let l=i[o];if(l===n)continue;let d=e[o],u=e[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(d)}return s}var wpe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),kpe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Spe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function ml(e){return wpe.has(e.op)}function Ipe(e){return kpe.has(e.op)}function $pe(e){return Spe.has(e.op)}var uS=class{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(n=>e[n].map(r=>r.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(n=>{this._functionExecutorMap[n]=new uS(e.functions[n],this)})}getCompilationKey(e,t){let n=e.map(a=>a.name).sort(),r=t.map(a=>a.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){let n=vR(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:i}=n;if(a!=null)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(i,"]"));if(r.length>0){let l=t.map(u=>u.name),d=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(l,"] from the provided inputs [").concat(d,"]. Missing the following inputs: [").concat(r,"]"))}let s=bpe(this.graph,n),o=xpe(s);return{orderedNodes:s,nodeLiveUntilMap:o}}cloneAndKeepTensor(e){if(e==null)return null;let t=e.clone();return In(t),t}cloneTensorList(e){return e?e.map(t=>this.cloneAndKeepTensor(t)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,this.cloneTensorList(n)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(c=>this.graph.nodes[Jr(c)[0]]),a=t.map(c=>Jr(c)[0]),i=new Set(a),s=a.map(c=>this.graph.nodes[c]);s.length===0&&(s=this._outputs);let o=this.getCompilationKey(r,s),l=this.compiledMap.get(o);l==null&&(l=this.compile(e,s),this.compiledMap.set(o,l));try{this.keepIntermediateTensors=Z().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){this.keepIntermediateTensors=!1,console.warn(c.message)}let d={},u={};return G(()=>{let c=new yR(this.weightMap,d,u,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(g=>{let[b,y]=Jr(g,c),v=[];v[y]=e[g],h[b]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(v))});let p=this.getFrozenTensorIds(h),{orderedNodes:f,nodeLiveUntilMap:m}=l;for(let g of f){if(h[g.name])continue;let b=bR(g,h,c,this._resourceManager);if(k.isPromise(b))throw new Error("The execution of the op '".concat(g.op,"' returned a promise. Please use model.executeAsync() instead."));h[g.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,h,c,p,i,m.get(g.name))}return this.parent==null&&c.dispose(p),t.map(g=>Kn(g,h,c))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(n=>e[n]).map(n=>n.map(r=>r.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,i,s){if(!(ml(t)||i.has(e))){for(let o of n[e])o!=null&&(s[o.id]=(s[o.id]||0)+t.children.length);for(let o of t.inputs){if(ml(o))continue;let l=hR(o.name,n,r);if(l!=null)for(let d of l){if(!d||d.kept||a.has(d.id))continue;let u=s[d.id];u===1?(d.dispose(),delete s[d.id]):u!=null&&s[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,a,i){function s(o){return ml(o)||a.has(o.name)}if(!(ml(e)||i==null))for(let o of i){if(s(o))continue;let l=hR(o.name,t,n);for(let d of l)!d||d.kept||r.has(d.id)||d.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},a={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Z().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){this.keepIntermediateTensors=!1,console.warn(c.message)}let i=new yR(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let s=await this.executeWithControlFlow(e,i,t,n),o=t.map(c=>Kn(c,s,i)),l=o.map(c=>c.id),d=Object.keys(e).map(c=>e[c].id),u=new Set([...l,...d,...this.weightIds]);return Object.values(s).forEach(c=>{c.forEach(h=>{h&&!h.isDisposed&&!u.has(h.id)&&h.dispose()})}),this.parent==null&&i.dispose(u),o}async executeFunctionAsync(e,t,n){let r=e.reduce((a,i,s)=>(a[this.inputs[s].name]=i,a),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let a=Object.keys(e),i=a.map(v=>this.graph.nodes[Jr(v)[0]]),s=n.map(v=>Jr(v)[0]),o=new Set(s),l=s.map(v=>this.graph.nodes[v]);l.length===0&&(l=this._outputs);let{usedNodes:d,missingInputs:u,dynamicNode:c,syncInputs:h}=vR(e,l,this.weightMap,this._initNodes),p=[...i,...this.graph.weights,...this._initNodes||[]].map(v=>({node:v,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(v=>{let[x,w]=Jr(v),$=[];$[w]=e[v],f[x]=$});let m={},g=this.getFrozenTensorIds(f),b={};for(;p.length>0;){let v=this.processStack(i,p,t,f,b,g,o,m,d);await Promise.all(v)}c==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=l.filter(v=>!ml(v)&&!Kn(v.name,f,t)).map(v=>v.name);if(y.length>0){let v="";throw c!=null&&(v="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(h,"]")),new Error("Cannot compute the outputs [".concat(y,"] from the provided inputs [").concat(a,"]. Consider providing the following inputs: [").concat(u,"]. ").concat(v))}return f}processStack(e,t,n,r,a,i,s,o,l){let d=[];for(;t.length>0;){let u=t.pop();n.currentContext=u.contexts;let c="";if(u.node.op==="Enter"&&S("isConstant",u.node,r,n)&&([c]=ms(u.node.name,n)),r[u.node.name]==null){let h=bR(u.node,r,n,this._resourceManager);c||([c]=ms(u.node.name,n));let p=n.currentContext;k.isPromise(h)?d.push(h.then(f=>(r[c]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(f)),n.currentContext=p,this.checkTensorForDisposal(c,u.node,r,n,i,s,o),this.processChildNodes(u.node,t,n,r,a,l),f))):(r[c]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(h)),this.checkTensorForDisposal(c,u.node,r,n,i,s,o),this.processChildNodes(u.node,t,n,r,a,l))}else this.processChildNodes(u.node,t,n,r,a,l)}return d}processChildNodes(e,t,n,r,a,i){e.children.forEach(s=>{let[o]=ms(s.name,n);a[o]||!i.has(s.name)||(s.op==="Merge"?s.inputNames.some(l=>!!Kn(l,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:s})):s.inputNames.every(l=>!!Kn(l,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=Jr(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){let i=a.attrParams.shape.value,s=i.length===n.shape.length&&n.shape.every((o,l)=>i[l]===-1||i[l]===o);k.assert(s,()=>"The shape of dict['".concat(a.name,"'] provided in model.execute(dict) must be [").concat(i,"], but was [").concat(n.shape,"]"))}a.attrParams.dtype&&a.attrParams.dtype.value&&k.assert(n.dtype===a.attrParams.dtype.value,()=>"The dtype of dict['".concat(a.name,"'] provided in model.execute(dict) must be ").concat(a.attrParams.dtype.value,", but was ").concat(n.dtype))})}mapInputs(e){var t,n;let r={};for(let a in e){let i=(n=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||n===void 0?void 0:n[a];i!=null?r[i.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){let t=Object.keys(e).filter(n=>{let[r]=Jr(n);return this.graph.nodes[r]==null});if(t.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map(t=>{var n,r;let a=(r=(n=this._signature)===null||n===void 0?void 0:n.outputs)===null||r===void 0?void 0:r[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{let[n]=Jr(t);if(!this.graph.nodes[n])throw new Error("The output '".concat(t,"' is not found in the graph"))})}},Cpe=class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}},Epe="?tfjs-format=file",Tpe="model.json",vE=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=Yn){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,t==null&&(this.loadOptions={}),this.resourceManager=new Cpe}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for URL '").concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return k.isPromise(e)?e.then(t=>this.loadSync(t)):this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,n=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let a=this.artifacts.userDefinedMetadata;a.signature!=null&&(n=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);let r=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new uS(pR.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let a=pR.Instance.transformGraph(e.modelInitializer);this.initializer=new uS(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){let n=this.io.getSaveHandlers(e);if(n.length===0)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(n.length>1)throw new Error("Found more than one (".concat(n.length,") save handlers for URL '").concat(e,"'"));e=n[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t=e instanceof Ue?[e]:e,n={};return t.forEach((r,a)=>n[this.structuredOutputKeys[a]]=r),n}return e}predict(e,t){let n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){let n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof Ue)&&!Array.isArray(e)){let a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(let i in a){let s=a[i];s.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)?e:[e];let n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce((a,i)=>{var s,o,l;let d=(l=(o=(s=this.signature)===null||s===void 0?void 0:s.inputs)===null||o===void 0?void 0:o[i])===null||l===void 0?void 0:l.resourceId;return d!=null?a[i]=this.resourceIdToCapturedInput[d]:a[i]=e[r++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){let a=n[r],i=t[a];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Be(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function Npe(e,t={},n=Yn){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=Ape(e));let r=new vE(e,t,n);return await r.load(),r}function _pe(e){if(e==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){let[r,a]=e;if(!r)throw new Error("modelJSON must be the first element of the array");if(!a||!(a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let i=Yn.getWeightSpecs(r.weightsManifest),s=Yn.getModelArtifactsForJSONSync(r,i,a);t=Yn.fromMemorySync(s)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=Yn.fromMemorySync(e);else throw new Error("Unknown model format");let n=new vE(t);return n.load(),n}function Ape(e){return e.endsWith("/")||(e=e+"/"),"".concat(e).concat(Tpe).concat(Epe)}var Rpe="4.7.0",TB={};We(TB,{CSVDataset:()=>LB,Dataset:()=>Rp,FileDataSource:()=>HB,TextLineDataset:()=>OB,URLDataSource:()=>jB,array:()=>tfe,csv:()=>hfe,func:()=>pfe,generator:()=>ffe,microphone:()=>gfe,version_data:()=>bfe,webcam:()=>mfe,zip:()=>nfe});var Dpe=zo($0()),Fpe=zo($0());function Mpe(e,t){return kv(e,t)}function kv(e,t,n=new Map,r=new Set){if(e==null)return null;if(typeof Blob=="function"&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);let a=t(e);if(a.recurse&&a.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse)if(lh(e)){let i=Array.isArray(e)?[]:{};r.add(e);for(let s in e){let o=e[s],l=kv(o,t,n,r);i[s]=l}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}else throw new Error("Can't recurse into non-iterable type: ".concat(e));else return n.set(e,a.value),a.value}function Ope(e,t=_B){return NB(e,t)}function NB(e,t,n=new Set){let r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");let a=t(e);if(a.recurse&&a.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse)if(lh(r)){let i=Array.isArray(r)?[]:{};n.add(r);for(let s in r){let o=e.map(d=>d[s]),l=NB(o,t,n);i[s]=l}return n.delete(r),i}else throw new Error("Can't recurse into non-iterable type: ".concat(r));else return a.value}function _B(e){return e===null?null:lh(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function AB(e,t){let n=new Map;kv(e,t,n);for(let r of Array.from(n.keys())){let a=n.get(r);if(k.isPromise(a)){let i=await a;n.set(r,i)}}return kv(e,t,n)}function lh(e){let t=!1;if(Z().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:n}=p3();t=e instanceof n}return e!=null&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||typeof e=="object"&&!(e instanceof Ue)&&!(e instanceof Promise)&&!t)}function Lpe(e){return e==null||Ppe(e)||Array.isArray(e)||typeof e=="object"&&e instanceof Ue||k.isTypedArray(e)}function Ppe(e){return e===null||typeof e!="object"&&typeof e!="function"}function zpe(e){return Mpe(e,Bpe)}function Bpe(e){return e instanceof Ue?{value:e.clone(),recurse:!1}:lh(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var RB=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},xE=class extends RB{constructor(){super(xE.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}};xE.INITIAL_CAPACITY=32;function DB(e){return new Upe(e)}function wE(e){return new Hpe(e)}function Wpe(e,t){return new FB(e,t)}function Vpe(e,t=ao.FAIL){return new Jpe(e,t)}var Vn=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new Zpe(this,e)}filter(e){return new Xpe(this,e)}map(e){return new Ype(this,e)}mapAsync(e){return new xR(this,e)}serialMapAsync(e){return new xR(this,e).serial()}flatmap(e){return new Qpe(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(t=>t===!0)}rowMajorBatch(e,t=!0){return new Kpe(this,e,t)}columnMajorBatch(e,t=!0,n=_B){return this.rowMajorBatch(e,t).map(r=>Ope(r,n))}concatenate(e,t){return new FB(DB([this,e]),t)}take(e){return e<0||e==null?this:new qpe(this,e)}skip(e){return e<0||e==null?this:new Gpe(this,e)}prefetch(e){return new MB(this,e)}shuffle(e,t){return new efe(this,e,t)}serial(){return new jpe(this)}},Upe=class extends Vn{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:zpe(e),done:!1}}},Hpe=class extends Vn{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}},jpe=class extends Vn{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},Gpe=class extends Vn{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;Be(e.value)}return this.upstream.next()}},qpe=class extends Vn{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},Kpe=class extends Vn{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},Xpe=class extends Vn{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Be(e.value)}}},Ype=class extends Vn{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Ii.getTensorsInContainer(e.value),n=this.transform(e.value),r=Ii.getTensorsInContainer(n);for(let a of t)Ii.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},Zpe=class extends Vn{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},xR=class extends Vn{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Ii.getTensorsInContainer(e.value),n=await this.transform(e.value),r=Ii.getTensorsInContainer(n);for(let a of t)Ii.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},kE=class extends Vn{constructor(){super(),this.outputQueue=new xE,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},Qpe=class extends kE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=Ii.getTensorsInContainer(e.value),n=this.transform(e.value),r=Ii.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let a of t)Ii.isTensorInList(a,r)||a.dispose();return!0}},FB=class extends Vn{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){let n=await this.moreIterators.next();if(n.done)return{value:null,done:!0};this.iterator=n.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}},ao;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(ao||(ao={}));var Jpe=class extends Vn{constructor(e,t=ao.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;function r(i){return i instanceof Vn?{value:i.next().then(s=>(t++,s.done&&n++,s.value)),recurse:!1}:{value:null,recurse:!0}}let a=await AB(this.iterators,r);if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case ao.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element ".concat(this.count,"."));case ao.SHORTEST:return{value:null,done:!0};case ao.LONGEST:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},MB=class extends Vn{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new RB(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},efe=class extends MB{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Fpe.alea(n||k.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(t.done)this.upstreamExhausted=!0;else return this.refill(),t}return{value:null,done:!0}}},Rp=class{constructor(){this.size=null}batch(e,t=!0){let n=this;k.assert(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e));let r;return this.size===1/0||this.size==null?r=this.size:t?r=Math.ceil(this.size/e):r=Math.floor(this.size/e),Qr(async()=>(await n.iterator()).columnMajorBatch(e,t,rfe),r)}concatenate(e){let t=this,n;return this.size===1/0||e.size===1/0?n=1/0:this.size!=null&&e.size!=null?n=this.size+e.size:n=null,Qr(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){let t=this,n;return this.size===1/0?n=1/0:n=null,Qr(async()=>(await t.iterator()).filter(r=>G(()=>e(r))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return Qr(async()=>(await t.iterator()).map(n=>G(()=>e(n))),this.size)}mapAsync(e){let t=this;return Qr(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return Qr(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this,n;return this.size!=null&&e>0?n=this.size*e:e===0?n=0:this.size!=null&&(e===void 0||e<0)?n=1/0:n=null,Qr(async()=>{let r=wE(async()=>({value:await t.iterator(),done:!1}));return Wpe(r.take(e))},n)}skip(e){let t=this,n;return this.size!=null&&e>=0&&this.size>=e?n=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?n=0:n=null,Qr(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t,n=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size (".concat(this.size," elements)"));let r=this,a=Dpe.alea(t||k.now().toString());return Qr(async()=>{let i=a.int32();return n&&(i+=a.int32()),(await r.iterator()).shuffle(e,i.toString())},this.size)}take(e){let t=this,n;return this.size!=null&&this.size>e?n=e:this.size!=null&&this.size<=e?n=this.size:n=null,Qr(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};Rp.MAX_BUFFER_SIZE=1e4;function Qr(e,t=null){return new class extends Rp{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function tfe(e){return Qr(async()=>DB(e),e.length)}function nfe(e){if(!lh(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=t==null?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=t==null?e[n].size:Math.min(t,e[n].size);return Qr(async()=>{let n=await AB(e,r=>{if(r instanceof Rp)return{value:r.iterator(),recurse:!1};if(lh(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Vpe(n,ao.SHORTEST)},t)}function rfe(e){if(e===null)return null;let t=e[0];return Lpe(t)?{value:afe(e),recurse:!1}:{value:null,recurse:!0}}function afe(e){if(e.length===0)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Ue?Cn(e):wr(e)}var OB=class extends Rp{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},Mb='"',rf=Symbol("out"),wR=Symbol("field"),Ob=Symbol("quote"),u1=Symbol("quoteafterquote"),kR=Symbol("quoteinquote"),LB=class extends Rp{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&k.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((r,a)=>(r[a]=r[a]+1||1,r),{}),n=Object.keys(t).filter(r=>t[r]>1);if(k.assert(n.length===0,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs){for(let r of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(r)===-1)throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let t=e.value;return this.parseRow(t,!1)}else return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new OB(e),t||(t={}),this.hasHeader=t.hasHeader!==!1,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(k.assert(t.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(t=>this.makeDataElement(t))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){let i=this.fullColumnNames[a],s=this.columnConfigs?this.columnConfigs[i]:null;if(!(this.configuredColumnsOnly&&!s)){let o=t[a],l=null;if(o==="")if(s&&s.default!==void 0)l=s.default;else{if(s&&(s.required||s.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));l=void 0}else{let d=Number(o);if(isNaN(d))s&&s.dtype==="bool"?l=this.getBoolean(o):l=o;else if(!s||!s.dtype)l=d;else switch(s.dtype){case"float32":l=d;break;case"int32":l=Math.floor(d);break;case"bool":l=this.getBoolean(o);break;default:l=d}}s&&s.isLabel?r[i]=l:n[i]=l}}return Object.keys(r).length===0?n:{xs:n,ys:r}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,t=!0){let n=[],r=0,a=e.length,i=rf;for(let s=0;s<a;s++)switch(i){case rf:switch(e.charAt(s)){case Mb:r=s+1,i=Ob;break;case this.delimiter:if(r=s+1,this.delimiter===" "&&this.delimWhitespace)break;n.push(""),i=rf;break;default:i=wR,r=s;break}break;case wR:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s)),i=rf,r=s+1;break}break;case Ob:switch(e.charAt(s)){case Mb:i=u1;break}break;case u1:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s-1)),i=rf,r=s+1;break;case Mb:i=Ob;break;default:i=kR;break}break;case kR:switch(e.charAt(s)){case Mb:i=Ob;break}break}if(i===u1?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}},PB=class extends Vn{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ".concat(this.fftSize));if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=e.includeSpectrogram!==!1,this.includeWaveform=e.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!Z().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let t=new PB(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: ".concat(n.message))}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: ".concat(this.sampleRateHz,"; Actual: ").concat(this.audioContext.sampleRate));let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,n=await this.getAudioData();if(this.includeSpectrogram){let r=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(r,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let r=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(r,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((r,a)=>n.set(r,a*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(k.sizeFromShape(t));return n.set(e,n.length-e.length),wr(n,t)}},zB=class extends Vn{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=mt([0],"int32"),this.webcamConfig.centerCrop){let n=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,r=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,a=(1-n)/2,i=(1-r)/2,s=a+n,o=r+i;this.cropBox=Xi([i,a,o,s],[1,4])}else this.cropBox=Xi([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(!Z().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new zB(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&k.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>"Invalid webcam facing mode: ".concat(this.webcamConfig.facingMode,". Please provide 'user' or 'environment'"));try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message="Error thrown while initializing video stream: ".concat(e.message),e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=Eg.fromPixels(this.webcamVideoElement)}catch(t){throw new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(t)))}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error("Error thrown cropping the video: ".concat(t.message))}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return G(()=>{let t=qn(ce(e,"float32"),0),n;n=$a.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let r=n.shape;return j(n,r.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},BB=class{},WB=class extends Vn{split(e){return new ife(this,e)}},ife=class extends WB{constructor(e,t){super(),this.upstream=e,this.impl=new sfe(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},sfe=class extends kE{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}async pump(){let e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}},ofe=class extends Vn{decodeUTF8(){return new lfe(this)}},lfe=class extends WB{constructor(e){super(),this.upstream=e,this.impl=new ufe(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},ufe=class extends kE{constructor(e){if(super(),this.upstream=e,Z().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:t}=p3();this.decoder=new t("utf8")}}summary(){return"".concat(this.upstream.summary()," -> Utf8")}async pump(){let e=await this.upstream.next(),t;if(e.done)return!1;t=e.value;let n;return Z().get("IS_BROWSER")?n=this.decoder.decode(t,{stream:!0}):n=this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0}},VB=class extends ofe{constructor(e,t={}){super(),this.file=e,this.options=t,k.assert(e instanceof Uint8Array||(Z().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1024*1024}summary(){return"FileChunks ".concat(this.file)}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=i=>{let s=r.result;if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),!(s instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(s)},r.onabort=i=>t(new Error("Aborted")),r.onerror=i=>t(new Error(i.type));let a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n}),done:!1}}};async function dfe(e,t={},n){let r,a;typeof e=="string"?r=e:(r=e.url,a=cfe(e));let i=await(n||k.fetch)(r,a);if(i.ok){let s=new Uint8Array(await i.arrayBuffer());return new VB(s,t)}else throw new Error(i.statusText)}var cfe=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function UB(e){return typeof e=="string"&&e.slice(0,7)==="file://"}var HB=class extends BB{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(UB(this.input)&&Z().get("IS_NODE")){let e=p$();this.input=e.readFileSync(this.input.slice(7))}return new VB(this.input,this.options)}},jB=class extends BB{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return UB(this.url)?new HB(this.url,this.fileOptions).iterator():dfe(this.url,this.fileOptions)}};function hfe(e,t={}){return new LB(new jB(e),t)}function pfe(e){let t=wE(e);return Qr(async()=>t)}function ffe(e){return Qr(async()=>{let t=await e();return wE(()=>t.next())})}async function mfe(e,t){return zB.create(e,t)}async function gfe(e){return PB.create(e)}var bfe="4.7.0";function Ce(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&k.assert(n.dtype!=="complex64",()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}var yfe=as.whereImpl,Vx=class extends Bm{nextDataId(){return Vx.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new C0(this,ja())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Z().get("IS_NODE")&&T.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if(t==="string"&&n!=null&&n.length>0&&k.isString(n[0])){let a=n.map(i=>k.encodeString(i));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if(t==="complex64"){let r=this.readSync(n.real.dataId),a=this.readSync(n.imag.dataId);return T.mergeRealAndImagArrays(r,a)}return k.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if(e.dtype==="string")try{let n=t.map(r=>k.decodeString(r));return Xe(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Xe(e.shape,e.dtype,t)}makeOutput(e,t,n){return ja().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);n!=null&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=k.now();return e(),{kernelMs:k.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ce([e],"where");let t=this.readSync(e.dataId);return yfe(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};Vx.nextDataId=0;var SE={};We(SE,{addImpl:()=>KB,bincountImpl:()=>$E,bincountReduceImpl:()=>XB,bitwiseAndImpl:()=>YB,castImpl:()=>qB,ceilImpl:()=>ZB,concatImpl:()=>CE,equalImpl:()=>QB,expImpl:()=>e4,expm1Impl:()=>n4,floorDivImpl:()=>a4,floorImpl:()=>r4,gatherNdImpl:()=>i4,gatherV2Impl:()=>s4,greaterEqualImpl:()=>l4,greaterImpl:()=>o4,lessEqualImpl:()=>d4,lessImpl:()=>u4,linSpaceImpl:()=>c4,logImpl:()=>h4,maxImpl:()=>p4,maximumImpl:()=>f4,minimumImpl:()=>m4,multiplyImpl:()=>EE,negImpl:()=>g4,notEqualImpl:()=>b4,prodImpl:()=>y4,raggedGatherImpl:()=>v4,raggedRangeImpl:()=>x4,raggedTensorToTensorImpl:()=>w4,rangeImpl:()=>NE,rsqrtImpl:()=>k4,scatterImpl:()=>Il,sigmoidImpl:()=>gme,simpleAbsImpl:()=>GB,sliceImpl:()=>Iv,sparseFillEmptyRowsImpl:()=>I4,sparseReshapeImpl:()=>$4,sparseSegmentReductionImpl:()=>_E,sqrtImpl:()=>vme,squaredDifferenceImpl:()=>C4,staticRegexReplaceImpl:()=>E4,stridedSliceImpl:()=>T4,stringNGramsImpl:()=>AE,stringSplitImpl:()=>RE,stringToHashBucketFastImpl:()=>DE,subImpl:()=>N4,tileImpl:()=>_4,topKImpl:()=>R4,transposeImpl:()=>TE,uniqueImpl:()=>ME});function GB(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var vfe=e=>{let{x:t}=e.inputs,n=e.backend;Ce(t,"abs");let r=new Float32Array(k.sizeFromShape(t.shape)),a=n.data.get(t.dataId).values;return r=GB(a),n.makeOutput(r,t.shape,t.dtype)},xfe={kernelName:xh,backendName:"cpu",kernelFunc:vfe};function ln(e){return(t,n,r,a,i)=>{let s=T.assertAndGetBroadcastShape(t,n),o=s.length,l=k.computeStrides(s),d=k.sizeFromShape(s),u=k.getTypedArrayFromDType(i,d),c=t.length,h=n.length,p=k.computeStrides(t),f=k.computeStrides(n),m=T.getBroadcastDims(t,s),g=T.getBroadcastDims(n,s);if(m.length+g.length===0)for(let b=0;b<u.length;++b)u[b]=e(r[b%r.length],a[b%a.length]);else for(let b=0;b<u.length;++b){let y=k.indexToLoc(b,o,l),v=y.slice(-c);m.forEach(C=>v[C]=0);let x=k.locToIndex(v,c,p),w=y.slice(-h);g.forEach(C=>w[C]=0);let $=k.locToIndex(w,h,f);u[b]=e(r[x],a[$])}return[u,s]}}function ta(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}var wfe={kernelName:N0,backendName:"cpu",kernelFunc:ta};function Sv(e,t,n="float32"){if(n==="complex64"){let a=Sv(e,t,"float32"),i=Sv(e,t,"float32");return ta({inputs:{real:a,imag:i},backend:e})}let r=k.makeZerosTypedArray(k.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function Ji(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var kfe={kernelName:Bu,backendName:"cpu",kernelFunc:Ji};function eu(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Sfe={kernelName:B0,backendName:"cpu",kernelFunc:eu};function qB(e,t,n,r){if(r==="int32"){let a=Int32Array.from(e);return[t,"int32",a]}if(r==="bool"){let a=k.toTypedArray([0],n),[i,s]=ln((o,l)=>o!==l?1:0)(t,[],e,a,"bool");return[s,"bool",i]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Ro(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Ji({inputs:{x:a},backend:n});let u=Sv(n,a.shape,a.dtype),c=Ro({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),h=ta({inputs:{real:c,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),h}if(a.dtype==="complex64"){let u=eu({inputs:{input:a},backend:n}),c=Ro({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),c}if(!k.hasEncodingLoss(a.dtype,i)){let u=Ji({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}let s=n.data.get(a.dataId).values,[o,l,d]=qB(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,d)}var Ife={kernelName:wu,backendName:"cpu",kernelFunc:Ro};function _n(e,t,n,r){return n==null?({inputs:a,backend:i})=>{let{a:s,b:o}=a,l=i;Ce([s,o],e);let d=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,c=s.dtype==="string"?T.fromUint8ToStringArray(d):d,h=s.dtype==="string"?T.fromUint8ToStringArray(u):u,p=r||s.dtype,[f,m]=t(s.shape,o.shape,c,h,p);return l.makeTensorInfo(m,p,f)}:({inputs:a,backend:i})=>{let{a:s,b:o}=a,l=i;if(s.dtype==="complex64"||o.dtype==="complex64"){let d=Ro({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(d.dataId),c=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,p=l.data.get(c.dataId).values,f=l.data.get(h.dataId).values,m=Ro({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),b=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,v=l.data.get(b.dataId).values,x=l.data.get(y.dataId).values,[w,$,C]=n(s.shape,o.shape,p,f,v,x),E=l.makeTensorInfo(C,"float32",w),A=l.makeTensorInfo(C,"float32",$),R=ta({inputs:{real:E,imag:A},backend:l});return l.disposeIntermediateTensorInfo(d),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo(A),R}else{let d=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,c=r||s.dtype,[h,p]=t(s.shape,o.shape,d,u,c);return l.makeTensorInfo(p,c,h)}}}function IE(e){return(t,n,r,a,i,s)=>{let o=T.assertAndGetBroadcastShape(t,n),l=k.sizeFromShape(o),d=o.length,u=k.computeStrides(o),c=k.getTypedArrayFromDType("float32",l),h=k.getTypedArrayFromDType("float32",l),p=T.getBroadcastDims(t,o),f=T.getBroadcastDims(n,o),m=T.mergeRealAndImagArrays(r,a),g=T.mergeRealAndImagArrays(i,s),b=t.length,y=k.computeStrides(t),v=n.length,x=k.computeStrides(n);if(p.length+f.length===0)for(let w=0;w<c.length;w++){let $=w%m.length,C=w%g.length,E=e(m[$*2],m[$*2+1],g[C*2],g[C*2+1]);c[w]=E.real,h[w]=E.imag}else for(let w=0;w<c.length;w++){let $=k.indexToLoc(w,d,u),C=$.slice(-b);p.forEach(I=>C[I]=0);let E=k.locToIndex(C,b,y),A=$.slice(-v);f.forEach(I=>A[I]=0);let R=k.locToIndex(A,v,x),N=e(m[E*2],m[E*2+1],g[R*2],g[R*2+1]);c[w]=N.real,h[w]=N.imag}return[c,h,o]}}var KB=ln((e,t)=>e+t),$fe=IE((e,t,n,r)=>({real:e+n,imag:t+r})),uh=_n(Bo,KB,$fe),Cfe={kernelName:Bo,backendName:"cpu",kernelFunc:uh};function $E(e,t,n,r,a){let i=k.sizeFromShape(r),s=k.makeZerosTypedArray(a,n);for(let o=0;o<e.length;o++){let l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(i>0?s[l]+=t[o]:s[l]+=1)}return s}function XB(e,t,n,r=!1){let a=e.shape[0],i=e.shape[1],s=Xe([a,n],t.dtype);for(let o=0;o<a;o++)for(let l=0;l<i;l++){let d=e.get(o,l);if(d<0)throw new Error("Input x must be non-negative!");d>=n||(r?s.set(1,o,d):t.size>0?s.set(s.get(o,d)+t.get(o,l),o,d):s.set(s.get(o,d)+1,o,d))}return s}var YB=ln((e,t)=>e&t),Efe=_n(Th,YB),Tfe={kernelName:Th,backendName:"cpu",kernelFunc:Efe};function ss(e){return(t,n,r)=>{let a=k.getArrayFromDType(n,t.length);for(let i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function bt(e,t,n){let r=ss(t);return Xo(e,r,n)}function Xo(e,t,n){return({inputs:r,attrs:a,backend:i})=>{let{x:s}=r;Ce(s,e);let o=i,l=o.data.get(s.dataId).values,d;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");d=T.fromUint8ToStringArray(l)}else d=l;let u=n||s.dtype,c=t(d,u,a);return o.makeTensorInfo(s.shape,u,c)}}var ZB=ss(e=>Math.ceil(e)),Nfe=Xo(ku,ZB),_fe={kernelName:ku,backendName:"cpu",kernelFunc:Nfe};function CE(e,t,n,r){let a=k.getArrayFromDType(n,k.sizeFromShape(t));if(r&&n!=="string"){let i=0;e.forEach(s=>{let o=k.sizeFromShape(s.shape);a.set(s.vals,i),i+=o})}else{let i=0;e.forEach(s=>{let o=n==="string"?T.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let d=0;d<s.shape[0];++d){let u=d*t[1]+i;for(let c=0;c<s.shape[1];++c)a[u+c]=o[l++]}i+=s.shape[1]})}return a}var QB=ln((e,t)=>e===t?1:0),JB=_n(Oh,QB,null,"bool"),Afe={kernelName:Oh,backendName:"cpu",kernelFunc:JB},e4=ss(e=>Math.exp(e)),t4=Xo(Fu,e4,"float32"),Rfe={kernelName:Fu,backendName:"cpu",kernelFunc:t4},n4=ss(e=>Math.expm1(e)),Dfe=Xo(Mu,n4),Ffe={kernelName:Mu,backendName:"cpu",kernelFunc:Dfe},r4=ss(e=>Math.floor(e)),Mfe=Xo(Ou,r4),Ofe={kernelName:Ou,backendName:"cpu",kernelFunc:Mfe},a4=ln((e,t)=>Math.floor(e/t)),Lfe=_n(Lu,a4,null,"int32"),Pfe={kernelName:Lu,backendName:"cpu",kernelFunc:Lfe};function i4(e,t,n,r,a,i,s,o,l){let d=Xe([r,i],n);for(let u=0;u<r;u++){let c=[],h=0;for(let p=0;p<a;p++){let f=e[u*a+p];h+=f*s[p],c.push(f)}if(h<0||h>=l/i)throw new Error("Invalid indices: ".concat(c," does not index into ").concat(o));for(let p=0;p<i;p++)d.values[u*i+p]=t.get(...t.indexToLoc(h*i+p))}return d}function s4(e,t,n){let r=Xe(n,e.dtype);for(let a=0;a<r.size;++a){let i=r.indexToLoc(a).slice(),s=i[0],o=i[2],l=t.locToIndex([s,o]);i[2]=t.values[l];let d=e.locToIndex(i);0<=d&&d<e.values.length&&(r.values[a]=e.values[d])}return r}var o4=ln((e,t)=>e>t?1:0),zfe=_n(Wh,o4,null,"bool"),Bfe={kernelName:Wh,backendName:"cpu",kernelFunc:zfe},l4=ln((e,t)=>e>=t?1:0),Wfe=_n(zu,l4,null,"bool"),Vfe={kernelName:zu,backendName:"cpu",kernelFunc:Wfe},u4=ln((e,t)=>e<t?1:0),Ufe=_n(Vh,u4,null,"bool"),Hfe={kernelName:Vh,backendName:"cpu",kernelFunc:Ufe},d4=ln((e,t)=>e<=t?1:0),jfe=_n(Uh,d4,null,"bool"),Gfe={kernelName:Uh,backendName:"cpu",kernelFunc:jfe};function c4(e,t,n){let r=(t-e)/(n-1),a=k.makeZerosTypedArray(n,"float32");a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var h4=ss(e=>Math.log(e)),qfe=Xo(ju,h4),Kfe={kernelName:ju,backendName:"cpu",kernelFunc:qfe};function p4(e,t,n,r){let a=k.getTypedArrayFromDType(r,k.sizeFromShape(n));for(let i=0;i<a.length;++i){let s=i*t,o=e[s];for(let l=0;l<t;++l){let d=e[s+l];(Number.isNaN(d)||d>o)&&(o=d)}a[i]=o}return a}var f4=ln((e,t)=>Math.max(e,t)),Xfe=_n(Xu,f4),Yfe={kernelName:Xu,backendName:"cpu",kernelFunc:Xfe},m4=ln((e,t)=>Math.min(e,t)),Zfe=_n(Ju,m4),Qfe={kernelName:Ju,backendName:"cpu",kernelFunc:Zfe},EE=ln((e,t)=>e*t),Jfe=IE((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),Ux=_n(nd,EE,Jfe),eme={kernelName:nd,backendName:"cpu",kernelFunc:Ux};function g4(e,t,n){let r=k.createScalarValue(-1,n);return EE([],t,r,e,n)}function tme(e){let{inputs:t,backend:n}=e,{x:r}=t;Ce(r,"neg");let a=n.data.get(r.dataId).values,[i,s]=g4(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}var nme={kernelName:Zh,backendName:"cpu",kernelFunc:tme},b4=ln((e,t)=>e!==t?1:0),rme=_n(Qh,b4,null,"bool"),ame={kernelName:Qh,backendName:"cpu",kernelFunc:rme};function TE(e,t,n,r,a){let i=t.length,s=k.sizeFromShape(t),o=k.computeStrides(t),l=k.computeStrides(a),d=k.getTypedArrayFromDType(n,k.sizeFromShape(a));for(let u=0;u<s;++u){let c=k.indexToLoc(u,i,o),h=new Array(c.length);for(let f=0;f<h.length;f++)h[f]=c[r[f]];let p=k.locToIndex(h,i,l);d[p]=e[u]}return d}function Hr(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:i}=n;Ce(a,"transpose");let s=a.shape.length,o=new Array(s);for(let u=0;u<o.length;u++)o[u]=a.shape[i[u]];let l=r.data.get(a.dataId).values,d=TE(l,a.shape,a.dtype,i,o);return{dataId:r.write(d,o,a.dtype),shape:o,dtype:a.dtype}}var ime={kernelName:Ss,backendName:"cpu",kernelFunc:Hr};function y4(e,t,n,r){let[a,i]=T.computeOutAndReduceShapes(e,r),s=Ra(t,"int32"),o=k.makeZerosTypedArray(k.sizeFromShape(a),s),l=k.sizeFromShape(i);for(let d=0;d<o.length;++d){let u=d*l,c=1;for(let h=0;h<l;++h)c*=n[u+h];o[d]=c}return{outVals:o,outShape:a,outDtype:s}}function sme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;Ce(a,"prod");let o=a.shape.length,l=k.parseAxisParam(i,a.shape),d=T.getAxesPermutation(l,o),u=l,c=a,h=[];d!=null&&(c=Hr({inputs:{x:a},backend:n,attrs:{perm:d}}),h.push(c),u=T.getInnerMostAxes(u.length,o));let p=n.data.get(c.dataId).values,{outVals:f,outShape:m,outDtype:g}=y4(c.shape,c.dtype,p,u),b=m;return s&&(b=T.expandShapeToKeepDim(m,l)),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(b,g,f)}var ome={kernelName:od,backendName:"cpu",kernelFunc:sme};function lme(e,t,n){e.forEach((r,a)=>{if(r<0||r>=n){let i=k.indexToLoc(a,t.length,k.computeStrides(t)).join(",");throw new Error("indices[".concat(i,"] = ").concat(r," is not in [0, ").concat(n,")"))}})}function ume(e,t){for(let n=0;n<e.length;++n){let r=e[n],a=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function dme(e,t,n,r){let a=[],i=0,s=t.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);ume(n,r);let l=1;for(let d=0;d<t.length-1;++d){l*=t[d];let u=t[d+1];for(let c=1;c<l+1;++c)o[d].push(c*u)}for(let d=0;d<e.length;++d){let u=e[d],c=e[d]+1;for(let h=0;h<n.length;++h){let p=n[h],f=h+t.length-1;if(f>=0){let m=o[f],g=m[m.length-1]-p[u];for(let b=u;b<c;++b)o[f].push(p[b+1]+g)}u=p[u],c=p[c]}c!==u&&(a.push([u,c]),i+=c-u)}return{outSplits:o,valueSlices:a,numValues:i}}function cme(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,a=k.getArrayFromDType("int32",r);t.push(a),e[n].forEach((i,s)=>a[s]=i)}return t}function SR(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function hme(e,t,n,r,a,i){let s=SR(t,2)[1],o=SR(i,2)[1],l=0;for(let d of n)for(let u=d[0];u<d[1];++u){for(let c=0;c<r;++c)a[l*o+c]=e[u*s+c];++l}}function pme(e,t,n,r,a){let i=t.slice();i[0]=a;let s=k.getArrayFromDType(n,k.sizeFromShape(i)),o=e.length,l=o===0?0:o/t[0];return hme(e,t,r,l,s,i),[s,i]}function v4(e,t,n,r,a,i,s,o){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");let l=t[0][0]-1;if(lme(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");let d=r[0],{outSplits:u,valueSlices:c,numValues:h}=dme(i,s,e,d),p=cme(u),f=pme(n,r,a,c,h);return[p,f[0],f[1]]}var IR=2147483647;function x4(e,t,n,r,a,i,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let o=t.length===0,l=a.length===0,d=s.length===0,u=[];o||u.push(t[0]),l||u.push(a[0]),d||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let c=u.length===0?1:u[0],h=k.getArrayFromDType("int32",c+1);h[0]=0;for(let g=0;g<c;++g){let b=o?e[0]:e[g],y=l?r[0]:r[g],v=d?i[0]:i[g];if(v===0)throw new Error("Requires delta != 0");let x;if(v>0&&y<b||v<0&&y>b)x=0;else if(x=Math.ceil(Math.abs((y-b)/v)),x>IR)throw new Error("Requires ((limit - start) / delta) <= ".concat(IR));h[g+1]=h[g]+x}let p=h[c],f=k.getArrayFromDType(n,p),m=0;for(let g=0;g<c;++g){let b=h[g+1]-h[g],y=o?e[0]:e[g],v=d?i[0]:i[g];for(let x=0;x<b;++x)f[m++]=y,y+=v}return[h,f]}var Wa=T.RowPartitionType,dS=class{constructor(e,t,n,r,a,i,s,o,l,d){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=T.getRowPartitionTypesHelper(d),this.raggedRank=T.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Wa.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Wa.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){let t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Wa.VALUE_ROWIDS:return dS.getMaxWidthValueRowID(t);case Wa.ROW_SPLITS:return dS.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(Wa[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){let t=e.length;if(t===0||t===1)return 0;let n=0;for(let r=0;r<t-1;++r){let a=e[r+1]-e[r];a>n&&(n=a)}return n}static getMaxWidthValueRowID(e){let t=e.length;if(t===0)return 0;let n=0,r=e[0],a=0;for(let i=1;i<t;++i){let s=e[i];s!==r&&(r=s,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t,n=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return CR(e,n)}calculateOutputSize(e){let t=this.valuesShape,n=this.defaultValueShape;T.validateDefaultValueShape(n,t);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=T.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);a[0]<0&&(a[0]=e);for(let i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}calculateFirstParentOutputIndex(e,t,n){let r=Math.min(e,n),a=[],i=0;for(let s=0;s<r;++s,i+=t)a.push(i);for(let s=r;s<e;++s)a.push(-1);return k.assert(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){let a=e.length,i=[];for(let s=0;s<a-1;++s){let o=e[s+1]-e[s],l=Math.min(r,o),d=t[s];d===-1&&(l=0);for(let u=0;u<l;++u)i.push(d),d+=n;for(let u=0;u<o-l;++u)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){let a=e.length,i=[];if(a===0)return[];let s=0,o=e[0];if(o>=t.length)throw new Error("Got currentValueRowId=".concat(o,", which is not less than ").concat(t.length));let l=t[o];i.push(l);for(let d=1;d<a;++d){let u=e[d];if(u===o)l>=0&&(++s,s<r?l+=n:l=-1);else{if(s=0,o=u,u>=t.length)throw new Error("Got nextValueRowId=".concat(u," which is not less than ").concat(t.length));l=t[u]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){let a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Wa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case Wa.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Wa[i]))}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case Wa.FIRST_DIM_SIZE:return e[0];case Wa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Wa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Wa[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let i=n.length-2;i>=0;--i)n[i]=n[i+1]*t[i+1];let r=CR(t,!1),a=k.getArrayFromDType(this.valuesDType,k.sizeFromShape(r));if(n[0]*t[0]>0){let i=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let s=1;s<=this.raggedRank;++s)i=this.calculateOutputIndex(s-1,i,n[s],t[s]);this.setOutput(this.raggedRank,i,a,r)}return[r,a]}setOutput(e,t,n,r){if(n.length===0)return;let a=this.values,i=n,s=r.slice();s=s.slice(e+1);let o=k.sizeFromShape(s),l=t.length,d=this.defaultValue;if(d.length!==o&&d.length!==1){let p=this.defaultValueShape;G(()=>{let f=j(d,p);d=El(f,s).dataSync()})}let u=0,c=0,h=0;for(let p=0;p<=l;++p){let f=p<l?t[p]:-1;if(f===h){++h;continue}if(c<h){let m=a.subarray(u*o),g=i.subarray(c*o),b=(h-c)*o;$R(g,m,b)}if(p>=l){let m=n.length;f=Math.floor(m/o)}if(f>h)if(this.defaultValue.length===1)i.subarray(h*o,f*o).fill(this.defaultValue[0]),h=f;else for(;f>h;){let m=i.slice(h*o);$R(m,d,o),++h}f<0?(u=p+1,c=h):(u=p,c=h,h=c+1)}}};function $R(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function CR(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function w4(e,t,n,r,a,i,s,o,l,d){return new dS(e,t,n,r,a,i,s,o,l,d).compute()}function NE(e,t,n,r){let a=e===t,i=e<t&&n<0,s=t<e&&n>1;if(a||i||s)return k.makeZerosTypedArray(0,r);let o=Math.abs(Math.ceil((t-e)/n)),l=k.makeZerosTypedArray(o,r);t<e&&n===1&&(n=-1),l[0]=e;for(let d=1;d<l.length;d++)l[d]=l[d-1]+n;return l}var k4=ss(e=>1/Math.sqrt(e)),fme=Xo(md,k4),mme={kernelName:md,backendName:"cpu",kernelFunc:fme};function Il(e,t,n,r,a,i,s,o,l,d){let u=[r/a,a],c=e.values,h=t.values;if(r===0)return Xe(n,t.dtype);let p=l instanceof mn?l:Xe(u,t.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let f=0;f<i;f++){let m=[],g=0;for(let b=0;b<s;b++){let y=c[f*s+b];m.push(y),g+=y*o[b]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(let b=0;b<a;b++)d?p.values[g*a+b]+=h[f*a+b]:p.values[g*a+b]=t.rank===0?h[0]:h[f*a+b]}return p}var gme=ss(e=>1/(1+Math.exp(-e))),S4=bt(xd,e=>1/(1+Math.exp(-e))),bme={kernelName:xd,backendName:"cpu",kernelFunc:S4};function Iv(e,t,n,r,a){let i=En.isSliceContinous(r,t,n),s=k.sizeFromShape(n),o=k.computeStrides(r);if(i){let c=En.computeFlatOffset(t,o);return a==="string"?e.slice(c,c+s):e.subarray(c,c+s)}let l=a==="string"?T.fromUint8ToStringArray(e):e,d=Xe(r,a,l),u=Xe(n,a);for(let c=0;c<u.size;++c){let h=u.indexToLoc(c),p=h.map((f,m)=>f+t[m]);u.set(d.get(...p),...h)}return a==="string"?T.fromStringArrayToUint8(u.values):u.values}function tu(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r;Ce(a,"slice");let[o,l]=En.parseSliceParams(a,i,s);En.assertParamsValid(a,o,l);let d=n.data.get(a.dataId).values,u=Iv(d,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,u)}var yme={kernelName:cp,backendName:"cpu",kernelFunc:tu};function I4(e,t,n,r,a,i,s){let o=t[0],l=i[0],d=new Array(l),u=new Array(o),c=t[1];if(l===0){if(o!==0)throw new Error(T.getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));let g=k.getArrayFromDType(n,0),b=k.getArrayFromDType(a,0);return[g,[0,c],b,d,u]}let h=!0,p=0,f=new Array(l).fill(0);for(let g=0;g<o;++g){let b=e[g*c];if(b<0)throw new Error(T.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,b));if(b>=l)throw new Error(T.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,b,l));++f[b],h=h&&b>=p,p=b}let m=!0;for(let g=0;g<l;++g){let b=f[g]===0;d[g]=b,m=m&&!b,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&h){let g=e,b=r;for(let y=0;y<o;++y)u[y]=y;return[g,[o,c],b,d,u]}else{let g=f[l-1],b=k.getArrayFromDType(n,g*c),y=k.getArrayFromDType(a,g),v=new Array(l).fill(0);for(let x=0;x<o;++x){let w=e[x*c],$=v[w],C=(w===0?0:f[w-1])+$;v[w]++;for(let E=0;E<c;++E)b[C*c+E]=e[x*c+E];y[C]=r[x],u[x]=C}for(let x=0;x<l;++x)if(v[x]===0){let w=x===0?0:f[x-1];b[w*c+0]=x;for(let $=1;$<c;++$)b[w*c+$]=0;y[w]=s}return[b,[g,c],y,d,u]}}function $4(e,t,n,r,a){let i=k.sizeFromShape(r),s=t[0],o=a.length,l=[],d=1,u=-1;for(let m=0;m<o;++m){let g=a[m];if(g===-1){if(u!==-1)throw new Error(T.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,m));u=m,l.push(1)}else{if(g<0)throw new Error(T.getSparseReshapeNegativeOutputDimErrorMessage(m,g));d*=g,l.push(g)}}if(u!==-1){if(d<=0)throw new Error(T.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let m=Math.trunc(i/d);if(d*m!==i)throw new Error(T.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=m}if(k.sizeFromShape(l)!==i)throw new Error(T.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let c=r.length,h=[];if(c>0){h[c-1]=1;for(let m=c-2;m>=0;--m)h[m]=h[m+1]*r[m+1]}let p=[];if(o>0){p[o-1]=1;for(let m=o-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}let f=k.getArrayFromDType(n,s*o);for(let m=0;m<s;++m){let g=0;for(let b=0;b<c;++b)g+=e[m*c+b]*h[b];for(let b=0;b<o;++b)f[m*o+b]=Math.trunc(g/p[b]),g%=p[b]}return[f,[s,o],l]}function _E(e,t,n,r,a,i=!1,s=0){let o=r.length,l=[t[0],e.length/t[0]],d=l[1],u=o>0?a[o-1]+1:0;if(u<0)throw new Error(T.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let c=t.slice();c[0]=u;let h=c.reduce((y,v)=>y*v,1),p=k.getArrayFromDType(n,h);if(o===0)return u>0&&p.fill(s),[p,c];if(u<=0)throw new Error(T.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let f=0,m=1,g=0,b=a[f];for(;;){let y=0;if(m<o){if(y=a[m],b===y){++m;continue}if(b>=y)throw new Error(T.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=u)throw new Error(T.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,u));b>g&&p.fill(s,g*d,b*d);for(let v=f;v<m;++v){let x=r[v];if(x<0||x>=l[0])throw new Error(T.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(v,r[v],l[0]));for(let w=0;w<d;w++)p[b*d+w]+=e[x*d+w]}if(i)for(let v=0;v<d;v++)p[b*d+v]/=m-f;if(f=m,++m,g=b+1,b=y,m>o)break}return g<u&&p.fill(s,g*d,u*d),[p,c]}var vme=ss(e=>Math.sqrt(e)),xme=bt(kd,e=>Math.sqrt(e)),wme={kernelName:kd,backendName:"cpu",kernelFunc:xme},C4=ln((e,t)=>{let n=e-t;return n*n}),kme=_n($d,C4),Sme={kernelName:$d,backendName:"cpu",kernelFunc:kme},E4=ss((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)}),Ime=Xo(rg,E4),$me={kernelName:rg,backendName:"cpu",kernelFunc:Ime};function T4(e,t,n,r){let a=Xe(e,t.dtype);for(let i=0;i<a.size;i++){let s=a.indexToLoc(i),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*n[l]+r[l];a.set(t.get(...o),...s)}return a}var Cme=class{constructor(e,t,n,r,a,i){this.separator=k.encodeString(e),this.nGramWidths=t,this.leftPad=k.encodeString(n),this.rightPad=k.encodeString(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,i){for(let s=0;s<a;++s){let o=this.getPadWidth(i),l=Math.max(0,o-s),d=Math.max(0,o-(a-(s+1))),u=i-(l+d),c=t+(l>0?0:s-o),h=0;h+=l*this.leftPad.length;for(let b=0;b<u;++b)h+=e[c+b].length;h+=d*this.rightPad.length;let p=l+d+u-1;h+=p*this.separator.length,n[r+s]=new Uint8Array(h);let f=n[r+s],m=0,g=b=>b.forEach(y=>f[m++]=y);for(let b=0;b<l;++b)g(this.leftPad),g(this.separator);for(let b=0;b<u-1;++b)g(e[c+b]),g(this.separator);if(u>0){g(e[c+u-1]);for(let b=0;b<d;++b)g(this.separator),g(this.rightPad)}else{for(let b=0;b<d-1;++b)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let o=t[0];if(o!==0)throw new Error("First split value must be 0, got ".concat(o));for(let l=1;l<r;++l){let d=t[l]>=o;if(d=d&&t[l]<=n,!d)throw new Error("Invalid split value ".concat(t[l],", must be in [").concat(o,", ").concat(n,"]"));o=t[l]}if(o!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(o))}let a=r-1,i=k.getArrayFromDType("int32",r);if(n===0||r===0){let o=new Array(n);for(let l=0;l<=a;++l)i[l]=0;return[o,i]}i[0]=0;for(let o=1;o<=a;++o){let l=t[o]-t[o-1],d=0;this.nGramWidths.forEach(u=>{d+=this.getNumNGrams(l,u)}),this.preserveShort&&l>0&&d===0&&(d=1),i[o]=i[o-1]+d}let s=new Array(i[a]);for(let o=0;o<a;++o){let l=t[o],d=i[o];if(this.nGramWidths.forEach(u=>{let c=t[o+1]-t[o],h=this.getNumNGrams(c,u);this.createNGrams(e,l,s,d,h,u),d+=h}),this.preserveShort&&d===i[o]){let u=t[o+1]-t[o];if(u===0)continue;let c=u+2*this.padWidth,h=1;this.createNGrams(e,l,s,d,h,c)}}return[s,i]}};function AE(e,t,n,r,a,i,s,o){return new Cme(n,r,a,i,s,o).compute(e,t)}function Eme(e,t,n,r){if(!e.length)return;if(t.length===0){for(let i=0;i<e.length;++i)r.push(e.subarray(i,i+1));return}if(t.length===1){let i=t[0],s=e.indexOf(i);for(;s!==-1;){let o=e.subarray(0,s);(!n||o.length!==0)&&r.push(o),e=e.subarray(s+1),s=e.indexOf(i)}(!n||e.length!==0)&&r.push(e);return}let a=0;for(let i=0;i<e.length+1;i++)if(i===e.length||t.indexOf(e[i])!==-1){let s=e.subarray(a,i);(!n||s.length!==0)&&r.push(s),a=i+1}}function RE(e,t,n){let r=e.length,a=[],i=0,s=0,o=new Array(r);for(let h=0;h<r;++h){let p=a.length;Eme(e[h],t,n,a);let f=a.length-p;o[h]=f,i+=f,s=Math.max(s,f)}let l=k.getArrayFromDType("int32",i*2),d=new Array(i),u=[r,s],c=0;for(let h=0;h<r;++h)for(let p=0;p<o[h];++p)l[c*2]=h,l[c*2+1]=p,d[c]=a[c],++c;return[l,d,u]}function DE(e,t){let n=k.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=k.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var N4=ln((e,t)=>e-t),Tme=IE((e,t,n,r)=>({real:e-n,imag:t-r})),FE=_n(Cd,N4,Tme),Nme={kernelName:Cd,backendName:"cpu",kernelFunc:FE};function _4(e,t){let n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];let r=Xe(n,e.dtype);for(let a=0;a<r.values.length;++a){let i=r.indexToLoc(a),s=new Array(e.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%e.shape[l];let o=e.locToIndex(s);r.values[a]=e.values[o]}return r}var pf=(e,t)=>{let n=t.value-e.value;return n===0?e.index-t.index:n};function A4(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){let o=r-n+1,l=t-n+1,d=Math.log(o),u=.5*Math.exp(2*d/3),c=.5*Math.sqrt(d*u*(o-u)/o)*Math.sign(l-o/2),h=Math.max(n,Math.floor(t-l*u/o+c)),p=Math.min(r,Math.floor(t+(o-l)*u/o+c));A4(e,t,h,p)}let a=e[t],i=n,s=r;for(k.swap(e,n,t),pf(e[r],a)>0&&k.swap(e,n,r);i<s;){for(k.swap(e,i,s),i++,s--;pf(e[i],a)<0;)i=i+1;for(;pf(e[s],a)>0;)s=s-1}pf(e[n],a)===0?k.swap(e,n,s):(s=s+1,k.swap(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function R4(e,t,n,r,a){let i=t[t.length-1],[s,o]=[e.length/i,i],l=k.getTypedArrayFromDType(n,s*r),d=k.getTypedArrayFromDType("int32",s*r);for(let c=0;c<s;c++){let h=c*o,p=e.subarray(h,h+o),f=new Array(p.length);p.forEach((y,v)=>f[v]={value:y,index:v}),r<f.length&&(A4(f,r),f=f.slice(0,r)),a&&f.sort(pf);let m=c*r,g=l.subarray(m,m+r),b=d.subarray(m,m+r);for(let y=0;y<r;y++)g[y]=f[y].value,b[y]=f[y].index}let u=t.slice();return u[u.length-1]=r,[Xe(u,n,l),Xe(u,"int32",d)]}function ME(e,t,n,r){let a=k.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let f=0;f<a;f++)i[0]*=n[f];i[1]=n[a];for(let f=a+1;f<n.length;f++)i[2]*=n[f];let s=new Map,o=new Int32Array(n[a]),l=new mn(i,r,e),d=[],u=i[0]===1&&i[2]===1;for(let f=0;f<n[a];f++){let m;if(u)m=e[f].toString();else{let b=[];for(let y=0;y<i[0];y++)for(let v=0;v<i[2];v++)b.push(l.get(y,f,v));m=b.join(",")}let g=s.get(m);if(g!=null)o[f]=g;else{let b=s.size;s.set(m,b),o[f]=b,d.push(f)}}let c=i.slice();c[1]=s.size;let h=new mn(c,r);d.forEach((f,m)=>{for(let g=0;g<i[0];g++)for(let b=0;b<i[2];b++)h.set(l.get(g,f,b),g,m,b)});let p=n.slice();return p[a]=c[1],{outputValues:h.values,outputShape:p,indices:o}}var _me="4.7.0";U0("cpu",()=>new Vx,1);var D4=bt(Ru,e=>e>=0?e:Math.exp(e)-1),Ame={kernelName:Ru,backendName:"cpu",kernelFunc:D4};function F4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r;Ce([a],"leakyRelu");let s=k.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,l=k.getTypedArrayFromDType("float32",s);for(let d=0;d<o.length;d++)l[d]=o[d]<0?i*o[d]:o[d];return n.makeTensorInfo(a.shape,"float32",l)}var Rme={kernelName:Hu,backendName:"cpu",kernelFunc:F4},Dme=ln((e,t)=>e<0?t*e:e);function M4(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t;Ce([r,a],"prelu");let i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,l]=Dme(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(l,"float32",o)}var Fme={kernelName:sd,backendName:"cpu",kernelFunc:M4},O4=bt(ud,e=>Math.max(0,e)),Mme={kernelName:ud,backendName:"cpu",kernelFunc:O4},L4=bt(hd,e=>Math.min(Math.max(0,e),6)),Ome={kernelName:hd,backendName:"cpu",kernelFunc:L4};function $v(e,t,n,r,a){if(n==="linear")return Ji({inputs:{x:t},backend:e});if(n==="relu")return O4({inputs:{x:t},backend:e});if(n==="elu")return D4({inputs:{x:t},backend:e});if(n==="relu6")return L4({inputs:{x:t},backend:e});if(n==="prelu")return M4({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return F4({inputs:{x:t},backend:e,attrs:{alpha:a}});if(n==="sigmoid")return S4({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Dt(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=k.sizeFromShape(a.shape),o=k.inferFromImplicitShape(i,s),l=k.sizeFromShape(o);k.assert(s===l,()=>"The new shape (".concat(o,") has ").concat(l," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")),n.incRef(a.dataId);let d=n.data.get(a.dataId);if(d.complexTensorInfos!=null){let u=d.complexTensorInfos.real,c=d.complexTensorInfos.imag;u.shape=o,c.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}var Lme={kernelName:ap,backendName:"cpu",kernelFunc:Dt};function P4(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:s,transposeB:o}=r;Ce([a,i],"matMul");let l=a.shape.length,d=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],c=o?i.shape[d-1]:i.shape[d-2],h=s?a.shape[l-1]:a.shape[l-2],p=o?i.shape[d-2]:i.shape[d-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=k.sizeFromShape(f),b=k.sizeFromShape(m),y=kp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);k.assert(u===c,()=>"Error in matMul: inner shapes (".concat(u,") and (").concat(c,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(s," and transposeB=").concat(o," must match."));let v=s?[g,u,h]:[g,h,u],x=o?[b,p,c]:[b,c,p],w=Dt({inputs:{x:a},backend:n,attrs:{shape:v}}),$=Dt({inputs:{x:i},backend:n,attrs:{shape:x}}),C=s?w.shape[1]:w.shape[2],E=s?w.shape[2]:w.shape[1],A=o?$.shape[1]:$.shape[2],R=Math.max(g,b),N=n.data.get(w.dataId).values,I=n.data.get($.dataId).values,F=k.computeStrides(w.shape),L=k.computeStrides($.shape),[P,H,X]=s?[F[0],1,F[1]]:[F[0],F[1],1],[M,B,V]=o?[1,L[1],L[0]]:[L[1],1,L[0]],K=E*A,Q=Xe([R,E,A],w.dtype),ee=Q.values,ie=n.blockSize;for(let se=0;se<R;se++){let ge=se%g,fe=se%b;for(let pe=0;pe<E;pe+=ie){let Ne=Math.min(pe+ie,E);for(let De=0;De<A;De+=ie){let Ve=Math.min(De+ie,A);for(let Le=0;Le<C;Le+=ie){let ct=Math.min(Le+ie,C);for(let Ze=pe;Ze<Ne;Ze++)for(let Je=De;Je<Ve;Je++){let Oe=0;for(let at=Le;at<ct;at++){let yt=N[ge*P+Ze*H+at*X],pr=I[at*M+Je*B+fe*V];Oe+=yt*pr}ee[se*K+(Ze*A+Je)]+=Oe}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(y,Q.dtype,Q.values)}var Pme={kernelName:xu,backendName:"cpu",kernelFunc:P4};function zme(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:d,activation:u,leakyreluAlpha:c}=r,h,p,f,m=[];h=P4({inputs:{a,b:i},attrs:{transposeA:l,transposeB:d},backend:n}),s&&(p=uh({inputs:{a:h,b:s},backend:n}),m.push(h),h=p),u&&(f=$v(n,h,u,o,c),m.push(h),h=f);for(let g of m)n.disposeIntermediateTensorInfo(g);return h}var Bme={kernelName:Wl,backendName:"cpu",kernelFunc:zme},Wme=bt(cu,e=>Math.acos(e)),Vme={kernelName:cu,backendName:"cpu",kernelFunc:Wme},Ume=bt(hu,e=>Math.acosh(e)),Hme={kernelName:hu,backendName:"cpu",kernelFunc:Ume};function jme(e){let{inputs:t,backend:n}=e,r=t;Ce(t,"addN");let a=r.map(o=>n.data.get(o.dataId).values),i=Xe(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){let l=a[o];for(let d=0;d<s.length;d++)s[d]+=l[d]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}var Gme={kernelName:pu,backendName:"cpu",kernelFunc:jme};function qme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;Ce(a,"all");let o=k.parseAxisParam(i,a.shape),l=o,d=T.getAxesPermutation(l,a.shape.length),u=a;d!=null&&(u=Hr({inputs:{x:a},backend:n,attrs:{perm:d}}),l=T.getInnerMostAxes(l.length,a.shape.length)),T.assertAxesAreInnerMostDims("all",l,u.shape.length);let[c,h]=T.computeOutAndReduceShapes(u.shape,l),p=k.sizeFromShape(h),f=k.makeZerosTypedArray(k.sizeFromShape(c),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<f.length;++b){let y=b*p,v=m[y];for(let x=0;x<p;++x){let w=m[y+x];v=v&&w}f[b]=v}d!=null&&n.disposeIntermediateTensorInfo(u);let g=n.makeTensorInfo(c,u.dtype,f);if(s){let b=T.expandShapeToKeepDim(c,o),y=Dt({inputs:{x:g},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(g),y}return g}var Kme={kernelName:wh,backendName:"cpu",kernelFunc:qme};function Xme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;Ce(a,"any");let o=k.parseAxisParam(i,a.shape),l=o,d=T.getAxesPermutation(l,a.shape.length),u=a;d!=null&&(u=Hr({inputs:{x:a},backend:n,attrs:{perm:d}}),l=T.getInnerMostAxes(l.length,a.shape.length)),T.assertAxesAreInnerMostDims("any",l,u.shape.length);let[c,h]=T.computeOutAndReduceShapes(u.shape,l),p=k.sizeFromShape(h),f=k.makeZerosTypedArray(k.sizeFromShape(c),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<f.length;++b){let y=b*p,v=m[y];for(let x=0;x<p;++x){let w=m[y+x];v=v||w}f[b]=v}d!=null&&n.disposeIntermediateTensorInfo(u);let g=n.makeTensorInfo(c,u.dtype,f);if(s){let b=T.expandShapeToKeepDim(c,o),y=Dt({inputs:{x:g},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(g),y}return g}var Yme={kernelName:kh,backendName:"cpu",kernelFunc:Xme};function Zme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;Ce(a,"argMax");let s=k.parseAxisParam(i,a.shape),o=T.getAxesPermutation(s,a.shape.length),l=a,d=[];o!=null&&(l=Hr({inputs:{x:a},backend:n,attrs:{perm:o}}),d.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],T.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,c]=T.computeOutAndReduceShapes(l.shape,s),h=k.sizeFromShape(u),p=k.makeZerosTypedArray(h,"int32"),f=k.sizeFromShape(c),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let b=g*f,y=m[b],v=0;for(let x=0;x<f;++x){let w=m[b+x];w>y&&(y=w,v=x)}p[g]=v}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",p)}var Qme={kernelName:Sh,backendName:"cpu",kernelFunc:Zme};function Jme(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;Ce(a,"argMin");let s=k.parseAxisParam(i,a.shape),o=T.getAxesPermutation(s,a.shape.length),l=a,d=[];o!=null&&(l=Hr({inputs:{x:a},backend:n,attrs:{perm:o}}),d.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],T.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,c]=T.computeOutAndReduceShapes(l.shape,s),h=k.sizeFromShape(u),p=k.makeZerosTypedArray(h,"int32"),f=k.sizeFromShape(c),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let b=g*f,y=m[b],v=0;for(let x=0;x<f;++x){let w=m[b+x];w<y&&(y=w,v=x)}p[g]=v}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",p)}var ege={kernelName:Ih,backendName:"cpu",kernelFunc:Jme},tge=bt(fu,e=>Math.asin(e)),nge={kernelName:fu,backendName:"cpu",kernelFunc:tge},rge=bt(mu,e=>Math.asinh(e)),age={kernelName:mu,backendName:"cpu",kernelFunc:rge},ige=bt(gu,e=>Math.atan(e)),sge={kernelName:gu,backendName:"cpu",kernelFunc:ige},oge=ln((e,t)=>Math.atan2(e,t)),lge=_n(yu,oge),uge={kernelName:yu,backendName:"cpu",kernelFunc:lge},dge=bt(bu,e=>Math.atanh(e)),cge={kernelName:bu,backendName:"cpu",kernelFunc:dge};function OE(e,t,n,r,a,i){let s=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,d=a.dilationWidth,u=a.effectiveFilterHeight,c=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Xe(a.outShape,n),g=m.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],v=a.outShape[3];for(let x=0;x<a.batchSize;++x){let w=x*b,$=x*r[0];for(let C=0;C<a.inChannels;++C)for(let E=0;E<a.outHeight;++E){let A=E*s-h,R=Math.max(0,A),N=Math.min(a.inHeight,u+A),I=w+E*y;for(let F=0;F<a.outWidth;++F){let L=F*o-p,P=Math.max(0,L),H=Math.min(a.inWidth,c+L),X=f,M=0,B=0;for(let K=R;K<N;K+=l){let Q=$+K*r[1];for(let ee=P;ee<H;ee+=d){let ie=Q+ee*r[2],se=e[ie+C];i==="max"&&se>X?X=se:i==="avg"&&(M+=se,B++)}if(isNaN(X))break}let V=I+F*v+C;g[V]=i==="avg"?M/B:X}}}return m}function z4(e,t,n,r,a=!1,i=!1){let s=Xe(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,d=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=Xe(t,n,e);for(let g=0;g<r.batchSize;++g)for(let b=0;b<r.inChannels;++b)for(let y=0;y<r.outHeight;++y){let v=y*o-p,x=v;for(;x<0;)x+=d;let w=Math.min(r.inHeight,c+v);for(let $=0;$<r.outWidth;++$){let C=$*l-f,E=C;for(;E<0;)E+=u;let A=Math.min(r.inWidth,h+C),R=Number.NEGATIVE_INFINITY,N=-1;for(let I=x;I<w;I+=d){let F=I-v;for(let L=E;L<A;L+=u){let P=L-C,H=m.get(g,I,L,b);H>R&&(R=H,a?N=i?((g*r.inHeight+I)*r.inWidth+L)*r.inChannels+b:(I*r.inWidth+L)*r.inChannels+b:N=F*h+P)}}s.set(N,g,y,$,b)}}return s}function B4(e,t,n,r,a,i){let s=a.strideDepth,o=a.strideHeight,l=a.strideWidth,d=a.dilationDepth,u=a.dilationHeight,c=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,b=a.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Xe(a.outShape,n),x=v.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],$=a.outShape[2]*a.outShape[3]*a.outShape[4],C=a.outShape[3]*a.outShape[4],E=a.outShape[4];for(let A=0;A<a.batchSize;++A){let R=A*w,N=A*r[0];for(let I=0;I<a.inChannels;++I)for(let F=0;F<a.outDepth;++F){let L=F*s-m,P=L;for(;P<0;)P+=d;let H=Math.min(a.inDepth,h+L),X=R+F*$;for(let M=0;M<a.outHeight;++M){let B=M*o-g,V=B;for(;V<0;)V+=u;let K=Math.min(a.inHeight,p+B),Q=X+M*C;for(let ee=0;ee<a.outWidth;++ee){let ie=ee*l-b,se=ie;for(;se<0;)se+=c;let ge=Math.min(a.inWidth,f+ie),fe=Q+ee*E,pe=y,Ne=0,De=0;for(let Le=P;Le<H;Le+=d){let ct=N+Le*r[1];for(let Ze=V;Ze<K;Ze+=u){let Je=ct+Ze*r[2];for(let Oe=se;Oe<ge;Oe+=c){let at=Je+Oe*r[3],yt=e[at+I];if(i==="max"&&yt>pe?pe=yt:i==="avg"&&(Ne+=yt,De++),isNaN(pe))break}if(isNaN(pe))break}if(isNaN(pe))break}let Ve=fe+I;x[Ve]=i==="avg"?Ne/Math.max(De,1):pe}}}}return v}function hge(e,t){let n=Xe(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let b=0;b<t.outDepth;++b){let y=b*r-h,v=y;for(;v<0;)v+=s;let x=Math.min(t.inDepth,d+y);for(let w=0;w<t.outHeight;++w){let $=w*a-p,C=$;for(;C<0;)C+=o;let E=Math.min(t.inHeight,u+$);for(let A=0;A<t.outWidth;++A){let R=A*i-f,N=R;for(;N<0;)N+=l;let I=Math.min(t.inWidth,c+R),F=Number.NEGATIVE_INFINITY,L=-1;for(let P=v;P<x;P+=s){let H=P-y;for(let X=C;X<E;X+=o){let M=X-$;for(let B=N;B<I;B+=l){let V=B-R,K=e.get(m,P,X,B,g);K>=F&&(F=K,L=H*u*c+M*u+V)}}}n.set(L,m,b,w,A,g)}}}return n}function pge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;Ce(a,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,d=1;k.assert(T.eitherStridesOrDilationsAreOne(s,d),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(d,"'"));let u=T.computePool2DInfo(a.shape,i,s,d,o,l),c;if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))c=Ji({inputs:{x:a},backend:n});else{let h=n.data.get(a.dataId).values,p=k.computeStrides(a.shape),f=OE(h,a.shape,a.dtype,p,u,"avg");c=n.makeTensorInfo(u.outShape,a.dtype,f.values)}return c}var fge={kernelName:vu,backendName:"cpu",kernelFunc:pge};function mge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:d}=r;Ce(a,"avgPool3d");let u=T.computePool3DInfo(a.shape,i,s,1,o,l,d),c=n.data.get(a.dataId).values,h=B4(c,a.shape,a.dtype,k.computeStrides(a.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}var gge={kernelName:$h,backendName:"cpu",kernelFunc:mge};function bge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=r;Ce([a,i],"avgPool3DGrad");let u=T.computePool3DInfo(i.shape,s,o,1,l,d),c=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,b=u.dilationDepth,y=u.dilationHeight,v=u.dilationWidth,x=u.effectiveFilterDepth,w=u.effectiveFilterHeight,$=u.effectiveFilterWidth,C=x-1-u.padInfo.front,E=$-1-u.padInfo.left,A=w-1-u.padInfo.top,R=Xe(i.shape,"float32"),N=1/(f*m*g),I=n.bufferSync(a);for(let F=0;F<u.batchSize;++F)for(let L=0;L<u.inChannels;++L)for(let P=0;P<u.inDepth;++P)for(let H=0;H<u.inHeight;++H)for(let X=0;X<u.inWidth;++X){let M=P-C,B=H-A,V=X-E,K=0;for(let Q=0;Q<x;Q+=b){let ee=(M+Q)/c;if(!(ee<0||ee>=u.outDepth||Math.floor(ee)!==ee))for(let ie=0;ie<w;ie+=y){let se=(B+ie)/h;if(!(se<0||se>=u.outHeight||Math.floor(se)!==se))for(let ge=0;ge<$;ge+=v){let fe=(V+ge)/p;if(fe<0||fe>=u.outWidth||Math.floor(fe)!==fe)continue;let pe=I.get(F,ee,se,fe,L);K+=pe}}}R.set(K*N,F,P,H,X,L)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}var yge={kernelName:Um,backendName:"cpu",kernelFunc:bge};function vge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;Ce([a,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:d}=r,u=T.computePool2DInfo(s.shape,o,l,1,d),c=u.strideHeight,h=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,b=u.effectiveFilterHeight,y=u.effectiveFilterWidth,v=y-1-u.padInfo.left,x=b-1-u.padInfo.top,w=Xe(s.shape,"float32"),$=1/(p*f),C=n.data.get(a.dataId).values,E=Xe(a.shape,"float32",C);for(let A=0;A<u.batchSize;++A)for(let R=0;R<u.inChannels;++R)for(let N=0;N<u.inHeight;++N)for(let I=0;I<u.inWidth;++I){let F=N-x,L=I-v,P=0;for(let H=0;H<b;H+=m){let X=(F+H)/c;if(!(X<0||X>=u.outHeight||Math.floor(X)!==X))for(let M=0;M<y;M+=g){let B=(L+M)/h;if(B<0||B>=u.outWidth||Math.floor(B)!==B)continue;let V=E.get(A,X,B,R);P+=V}}w.set(P*$,A,N,I,R)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var xge={kernelName:Vm,backendName:"cpu",kernelFunc:vge};function wge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,scale:i,offset:s,mean:o,variance:l}=t;k.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),k.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),k.assert(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ce([a,o,l,i,s],"batchNorm");let{varianceEpsilon:d}=r;d==null&&(d=.001);let u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=s?n.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,b=p.length,y=h.length,v=c.length,x=0,w=0,$=0,C=0;for(let E=0;E<u.length;++E)m[E]=f[x++]+(u[E]-c[w++])*p[$++]/Math.sqrt(h[C++]+d),x>=g&&(x=0),w>=v&&(w=0),$>=b&&($=0),C>=y&&(C=0);return n.makeTensorInfo(a.shape,a.dtype,m)}var kge={kernelName:Pu,backendName:"cpu",kernelFunc:wge};function Sge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;Ce([a],"batchToSpaceND");let o=i.reduce((b,y)=>b*y),l=T.getReshaped(a.shape,i,o),d=T.getPermuted(l.length,i.length),u=T.getReshapedPermuted(a.shape,i,o),c=T.getSliceBeginCoords(s,i.length),h=T.getSliceSize(u,s,i.length),p=Dt({inputs:{x:a},backend:n,attrs:{shape:l}}),f=Hr({inputs:{x:p},backend:n,attrs:{perm:d}}),m=Dt({inputs:{x:f},backend:n,attrs:{shape:u}}),g=tu({inputs:{x:m},backend:n,attrs:{begin:c,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var Ige={kernelName:Ch,backendName:"cpu",kernelFunc:Sge};function $ge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=$E(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,d)}var Cge={kernelName:Eh,backendName:"cpu",kernelFunc:$ge};function Ege(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=T.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var Tge={kernelName:Hm,backendName:"cpu",kernelFunc:Ege},Nge=bt(Wo,(e,t)=>{let n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),_ge={kernelName:Wo,backendName:"cpu",kernelFunc:Nge},Age=e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(k.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let d=0;d<o.length;d++){let u=o[d],c=l[d];r[d]=Math.hypot(u,c)}return n.makeOutput(r,t.shape,"float32")},Rge={kernelName:jm,backendName:"cpu",kernelFunc:Age};function dh(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Dge={kernelName:O0,backendName:"cpu",kernelFunc:dh};function ch(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=k.parseAxisParam(a,t[0].shape)[0],s=t.map(m=>m.shape);T.assertParamsConsistent(s,i);let o=T.computeOutShape(t.map(m=>m.shape),i);if(k.sizeFromShape(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(m=>k.sizeFromShape(m.shape)>0);if(l.length===1)return Ji({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){let m=l.map(x=>eu({inputs:{input:x},backend:n})),g=l.map(x=>dh({inputs:{input:x},backend:n})),b=ch({inputs:m,backend:n,attrs:{axis:i}}),y=ch({inputs:g,backend:n,attrs:{axis:i}}),v=ta({inputs:{real:b,imag:y},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),v}let d=l.map(m=>{let g=[-1,k.sizeFromShape(m.shape.slice(i))];return Dt({inputs:{x:m},backend:n,attrs:{shape:g}})}),u=d.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));o=T.computeOutShape(d.map(m=>m.shape),1);let c=d[0].shape[0]===1,h=CE(u,o,t[0].dtype,c),p=T.computeOutShape(l.map(m=>m.shape),i),f=n.makeTensorInfo(p,t[0].dtype,h);return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}var Fge={kernelName:Nh,backendName:"cpu",kernelFunc:ch};function W4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:d,dimRoundingMode:u}=r;Ce([a,i],"conv2d");let c=T.convertConv2DDataFormat(l),h=T.computeConv2DInfo(a.shape,i.shape,s,d,o,u,!1,c),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,b=h.padInfo.left,y=h.padInfo.top,v=h.dataFormat==="channelsLast",x=new mn(h.outShape,a.dtype),w=k.computeStrides(a.shape),$=k.computeStrides(i.shape),C=w[0],E=v?w[1]:w[2],A=v?w[2]:1,R=v?1:w[1],N=x.strides[0],I=v?x.strides[1]:x.strides[2],F=v?x.strides[2]:1,L=v?1:x.strides[1],P=n.data.get(a.dataId).values,H=n.data.get(i.dataId).values,X=x.values;for(let M=0;M<h.batchSize;++M){let B=M*C,V=M*N;for(let K=0;K<h.outHeight;++K){let Q=V+K*I,ee=K*h.strideHeight-y;for(let ie=0;ie<p;++ie){let se=ee+ie*m;if(se<0||se>=h.inHeight)continue;let ge=ie*$[0],fe=B+se*E;for(let pe=0;pe<h.outWidth;++pe){let Ne=Q+pe*F,De=pe*h.strideWidth-b;for(let Ve=0;Ve<f;++Ve){let Le=De+Ve*g;if(Le<0||Le>=h.inWidth)continue;let ct=ge+Ve*$[1],Ze=fe+Le*A,Je=ct;for(let Oe=0;Oe<h.inChannels;++Oe){let at=P[Ze+Oe*R];for(let yt=0;yt<h.outChannels;++yt)X[Ne+yt*L]+=at*H[Je+yt];Je+=h.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,X)}var Mge={kernelName:Su,backendName:"cpu",kernelFunc:W4};function Oge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:d,filterShape:u}=r;Ce([a,i],"conv2dBackpropFilter");let c=T.convertConv2DDataFormat(l),h=T.computeConv2DInfo(a.shape,u,s,1,o,d,!1,c),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=h,b=h.dataFormat==="channelsLast",y=new mn(h.filterShape,"float32"),v=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,$=n.data.get(i.dataId).values,C=new mn(a.shape,a.dtype,w),E=new mn(i.shape,i.dtype,$);for(let A=0;A<m;++A){let R=Math.max(0,Math.ceil((x-A)/p)),N=Math.min(h.outHeight,(h.inHeight+x-A)/p);for(let I=0;I<g;++I){let F=Math.max(0,Math.ceil((v-I)/f)),L=Math.min(h.outWidth,(h.inWidth+v-I)/f);for(let P=0;P<h.inChannels;++P)for(let H=0;H<h.outChannels;++H){let X=0;for(let M=0;M<h.batchSize;++M)for(let B=R;B<N;++B){let V=A+B*p-x;for(let K=F;K<L;++K){let Q=I+K*f-v;b?X+=C.get(M,V,Q,P)*E.get(M,B,K,H):X+=C.get(M,P,V,Q)*E.get(M,H,B,K)}}y.set(X,A,I,P,H)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var Lge={kernelName:_0,backendName:"cpu",kernelFunc:Oge};function Pge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:d,dimRoundingMode:u}=r;Ce([a,i],"conv2dBackpropInput");let c=k.computeStrides(i.shape),h=k.computeStrides(a.shape),p=T.convertConv2DDataFormat(d),f=T.computeConv2DInfo(s,i.shape,o,1,l,u,!1,p),m=new mn(f.inShape,"float32"),g=m.values,b=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,[v,x,w]=c,{batchSize:$,filterHeight:C,filterWidth:E,inChannels:A,inHeight:R,inWidth:N,outChannels:I,outHeight:F,outWidth:L,strideHeight:P,strideWidth:H}=f;p=f.dataFormat;let X=C-1-f.padInfo.top,M=E-1-f.padInfo.left,B=p==="channelsLast",V=m.strides[0],K=B?m.strides[1]:m.strides[2],Q=B?m.strides[2]:1,ee=B?1:m.strides[1],ie=h[0],se=B?h[1]:h[2],ge=B?h[2]:1,fe=B?1:h[1];for(let pe=0;pe<$;++pe)for(let Ne=0;Ne<A;++Ne)for(let De=0;De<R;++De){let Ve=De-X,Le=Math.max(0,Math.ceil(Ve/P)),ct=Math.min(F,(C+Ve)/P);for(let Ze=0;Ze<N;++Ze){let Je=Ze-M,Oe=Math.max(0,Math.ceil(Je/H)),at=Math.min(L,(E+Je)/H),yt=0;for(let Lt=Le;Lt<ct;++Lt){let rr=Lt*P-Ve;for(let vn=Oe;vn<at;++vn){let ar=vn*H-Je,Kr=ie*pe+se*Lt+ge*vn,fr=v*(C-1-rr)+x*(E-1-ar)+w*Ne;for(let ir=0;ir<I;++ir){let xn=b[Kr+fe*ir],An=y[fr+ir];yt+=xn*An}}}let pr=V*pe+K*De+Q*Ze+ee*Ne;g[pr]=yt}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var zge={kernelName:Iu,backendName:"cpu",kernelFunc:Pge};function Bge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;Ce([a,i],"conv3d");let d=T.computeConv3DInfo(a.shape,i.shape,s,l,o),{filterDepth:u,filterHeight:c,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=d,b=g.front,y=g.left,v=g.top,x=new mn(d.outShape,a.dtype),w=n.data.get(a.dataId).values,$=n.data.get(i.dataId).values,C=x.values,E=k.computeStrides(a.shape),A=k.computeStrides(i.shape);for(let R=0;R<d.batchSize;++R){let N=R*E[0],I=R*x.strides[0];for(let F=0;F<d.outDepth;++F){let L=I+F*x.strides[1],P=F*d.strideDepth-b;for(let H=0;H<u;++H){let X=P+H*p;if(X<0||X>=d.inDepth)continue;let M=H*A[0],B=N+X*E[1];for(let V=0;V<d.outHeight;++V){let K=L+V*x.strides[2],Q=V*d.strideHeight-v;for(let ee=0;ee<c;++ee){let ie=Q+ee*f;if(ie<0||ie>=d.inHeight)continue;let se=M+ee*A[1],ge=B+ie*E[2];for(let fe=0;fe<d.outWidth;++fe){let pe=K+fe*d.outChannels,Ne=fe*d.strideWidth-y;for(let De=0;De<h;++De){let Ve=Ne+De*m;if(Ve<0||Ve>=d.inWidth)continue;let Le=se+De*A[2],ct=ge+Ve*d.inChannels,Ze=Le;for(let Je=0;Je<d.inChannels;++Je){let Oe=w[ct+Je];for(let at=0;at<d.outChannels;++at)C[pe+at]+=Oe*$[Ze+at];Ze+=d.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var Wge={kernelName:$u,backendName:"cpu",kernelFunc:Bge};function Vge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;Ce([a,i],"conv3dBackpropFilterV2");let d=k.computeStrides(a.shape),u=k.computeStrides(i.shape),c=T.computeConv3DInfo(a.shape,l,s,1,o),h=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.filterDepth,g=c.filterHeight,b=c.filterWidth,y=new mn(c.filterShape,"float32"),v=y.values,[x,w,$,C]=y.strides,E=n.data.get(i.dataId).values,[A,R,N,I]=u,F=n.data.get(a.dataId).values,[L,P,H,X]=d,M=c.padInfo.front,B=c.padInfo.left,V=c.padInfo.top;for(let K=0;K<m;++K){let Q=Math.max(0,Math.ceil((M-K)/h)),ee=Math.min(c.outDepth,(c.inDepth+M-K)/h),ie=K*x;for(let se=0;se<g;++se){let ge=Math.max(0,Math.ceil((V-se)/p)),fe=Math.min(c.outHeight,(c.inHeight+V-se)/p),pe=se*w+ie;for(let Ne=0;Ne<b;++Ne){let De=Math.max(0,Math.ceil((B-Ne)/f)),Ve=Math.min(c.outWidth,(c.inWidth+B-Ne)/f),Le=Ne*$+pe;for(let ct=0;ct<c.inChannels;++ct){let Ze=ct*C+Le;for(let Je=0;Je<c.outChannels;++Je){let Oe=0;for(let at=0;at<c.batchSize;++at){let yt=at*L,pr=at*A;for(let Lt=Q;Lt<ee;++Lt){let rr=(K+Lt*h-M)*P+yt,vn=Lt*R+pr;for(let ar=ge;ar<fe;++ar){let Kr=(se+ar*p-V)*H+rr,fr=ar*N+vn;for(let ir=De;ir<Ve;++ir){let xn=(Ne+ir*f-B)*X+Kr,An=ir*I+fr;Oe+=F[xn+ct]*E[An+Je]}}}}v[Ze+Je]=Oe}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var Uge={kernelName:_h,backendName:"cpu",kernelFunc:Vge};function Hge(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;Ce([a],"conv3dBackpropInputV2");let d=k.computeStrides(a.shape),u=k.computeStrides(i.shape),c=T.computeConv3DInfo(l,i.shape,o,1,s),h=new mn(c.inShape,"float32"),p=h.values,[f,m,g,b]=h.strides,y=n.data.get(a.dataId).values,[v,x,w,$]=d,C=n.data.get(i.dataId).values,[E,A,R,N]=u,{batchSize:I,filterDepth:F,filterHeight:L,filterWidth:P,inChannels:H,inDepth:X,inHeight:M,inWidth:B,outChannels:V,outDepth:K,outHeight:Q,outWidth:ee,strideDepth:ie,strideHeight:se,strideWidth:ge}=c,fe=F-1-c.padInfo.front,pe=L-1-c.padInfo.top,Ne=P-1-c.padInfo.left;for(let De=0;De<I;++De)for(let Ve=0;Ve<H;++Ve)for(let Le=0;Le<X;++Le){let ct=Le-fe,Ze=Math.max(0,Math.ceil(ct/ie)),Je=Math.min(K,(F+ct)/ie);for(let Oe=0;Oe<M;++Oe){let at=Oe-pe,yt=Math.max(0,Math.ceil(at/se)),pr=Math.min(Q,(L+at)/se);for(let Lt=0;Lt<B;++Lt){let rr=Lt-Ne,vn=Math.max(0,Math.ceil(rr/ge)),ar=Math.min(ee,(P+rr)/ge),Kr=0;for(let fr=Ze;fr<Je;++fr){let ir=fr*ie-ct;for(let xn=yt;xn<pr;++xn){let An=xn*se-at;for(let Fr=vn;Fr<ar;++Fr){let ai=Fr*ge-rr,un=v*De+x*fr+w*xn+$*Fr,Xr=E*(F-1-ir)+A*(L-1-An)+R*(P-1-ai)+N*Ve;for(let sr=0;sr<V;++sr){let Fi=y[un+sr],wn=C[Xr+sr];Kr+=Fi*wn}}}}p[f*De+m*Le+g*Oe+b*Lt+Ve]=Kr}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}var jge={kernelName:Ah,backendName:"cpu",kernelFunc:Hge},Gge=bt(Cu,e=>Math.cos(e)),qge={kernelName:Cu,backendName:"cpu",kernelFunc:Gge},Kge=bt(Eu,e=>Math.cosh(e)),Xge={kernelName:Eu,backendName:"cpu",kernelFunc:Kge};function Yge(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:d}=r,[u,c,h,p]=a.shape,f=i.shape[0],[m,g]=o,b=Xe([f,m,g,p],"float32"),y=n.data.get(i.dataId).values,v=n.data.get(s.dataId).values,x=n.data.get(a.dataId).values,w=k.computeStrides(a.shape),$=k.computeStrides(b.shape);for(let C=0;C<f;C++){let E=C*4,A=y[E],R=y[E+1],N=y[E+2],I=y[E+3],F=v[C];if(F>=u)continue;let L=m>1?(N-A)*(c-1)/(m-1):0,P=g>1?(I-R)*(h-1)/(g-1):0;for(let H=0;H<m;H++){let X=m>1?A*(c-1)+H*L:.5*(A+N)*(c-1);if(X<0||X>c-1){for(let M=0;M<g;M++)for(let B=0;B<p;B++){let V=B+M*$[2]+H*$[1]+C*$[0];b.values[V]=d}continue}if(l==="bilinear"){let M=Math.floor(X),B=Math.ceil(X),V=X-M;for(let K=0;K<g;K++){let Q=g>1?R*(h-1)+K*P:.5*(R+I)*(h-1);if(Q<0||Q>h-1){for(let ge=0;ge<p;ge++){let fe=ge+K*$[2]+H*$[1]+C*$[0];b.values[fe]=d}continue}let ee=Math.floor(Q),ie=Math.ceil(Q),se=Q-ee;for(let ge=0;ge<p;ge++){let fe=ge+ee*w[2]+M*w[1]+F*w[0],pe=x[fe];fe=ge+ie*w[2]+M*w[1]+F*w[0];let Ne=x[fe];fe=ge+ee*w[2]+B*w[1]+F*w[0];let De=x[fe];fe=ge+ie*w[2]+B*w[1]+F*w[0];let Ve=x[fe],Le=pe+(Ne-pe)*se,ct=De+(Ve-De)*se;fe=ge+K*$[2]+H*$[1]+C*$[0],b.values[fe]=Le+(ct-Le)*V}}}else for(let M=0;M<g;++M){let B=g>1?R*(h-1)+M*P:.5*(R+I)*(h-1);if(B<0||B>h-1){for(let Q=0;Q<p;Q++){let ee=Q+M*$[2]+H*$[1]+C*$[0];b.values[ee]=d}continue}let V=Math.round(B),K=Math.round(X);for(let Q=0;Q<p;Q++){let ee=Q+V*w[2]+K*w[1]+F*w[0],ie=Q+M*$[2]+H*$[1]+C*$[0];b.values[ie]=x[ee]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var Zge={kernelName:Dh,backendName:"cpu",kernelFunc:Yge};function Qge(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;Ce(a,"cumprod");let l=T.getAxesPermutation([i],a.shape.length),d=a;l!=null&&(d=Hr({inputs:{x:a},backend:n,attrs:{perm:l}}));let u=T.getInnerMostAxes(1,a.shape.length)[0];if(u!==d.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most axis=".concat(d.shape.length-1," but got axis=").concat(u));let c=Ra(d.dtype,"int32"),h=k.makeOnesTypedArray(k.sizeFromShape(d.shape),c),p=n.data.get(d.dataId).values,f=d.shape[d.shape.length-1],m=o?(b,y)=>b+f-y-1:(b,y)=>b+y;for(let b=0;b<p.length;b+=f)for(let y=0;y<f;y++){let v=m(b,y);if(y===0)h[v]=s?1:p[v];else{let x=m(b,y-1);h[v]=s?p[x]*h[x]:p[v]*h[x]}}let g=n.makeTensorInfo(d.shape,c,h);if(l!=null){let b=T.getUndoAxesPermutation(l),y=Hr({inputs:{x:g},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),y}return g}var Jge={kernelName:Rh,backendName:"cpu",kernelFunc:Qge};function ebe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;Ce(a,"cumsum");let l=T.getAxesPermutation([i],a.shape.length),d=a;l!=null&&(d=Hr({inputs:{x:a},backend:n,attrs:{perm:l}}));let u=T.getInnerMostAxes(1,a.shape.length)[0];if(u!==d.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(d.shape.length-1," but got axis=").concat(u));let c=Ra(d.dtype,"int32"),h=k.makeZerosTypedArray(k.sizeFromShape(d.shape),c),p=n.data.get(d.dataId).values,f=d.shape[d.shape.length-1],m=o?(b,y)=>b+f-y-1:(b,y)=>b+y;for(let b=0;b<p.length;b+=f)for(let y=0;y<f;y++){let v=m(b,y);if(y===0)h[v]=s?0:p[v];else{let x=m(b,y-1);h[v]=s?p[x]+h[x]:p[v]+h[x]}}let g=n.makeTensorInfo(d.shape,c,h);if(l!=null){let b=T.getUndoAxesPermutation(l),y=Hr({inputs:{x:g},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),y}return g}var tbe={kernelName:Tu,backendName:"cpu",kernelFunc:ebe};function nbe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(a.shape.length===1){let l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,u=$E(l,d,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}else if(a.shape.length===2){let l=n.bufferSync(a),d=n.bufferSync(i),u=XB(l,d,s,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}var rbe={kernelName:Gm,backendName:"cpu",kernelFunc:nbe};function abe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r;k.assert(s==="NHWC",()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s));let o=a.shape[0],l=a.shape[1],d=a.shape[2],u=a.shape[3],c=l*i,h=d*i,p=u/(i*i),f=n.data.get(a.dataId).values,m=new Float32Array(o*c*h*p),g=0;for(let b=0;b<o;++b)for(let y=0;y<c;++y){let v=Math.floor(y/i),x=y%i;for(let w=0;w<h;++w){let $=Math.floor(w/i),C=w%i,E=(x*i+C)*p;for(let A=0;A<p;++A){let R=A+E+u*($+d*(v+l*b));m[g++]=f[R]}}}return n.makeTensorInfo([o,c,h,p],a.dtype,m)}var ibe={kernelName:Fh,backendName:"cpu",kernelFunc:abe};function V4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:d}=r;Ce([a,i],"depthwiseConv2DNative");let u=k.computeStrides(a.shape),c=k.computeStrides(i.shape),h=l;h==null&&(h=[1,1]),k.assert(T.eitherStridesOrDilationsAreOne(s,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(h,"'"));let p=T.computeConv2DInfo(a.shape,i.shape,s,h,o,d,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:b,padInfo:y}=p,v=y.left,x=y.top,w=p.outChannels/p.inChannels,$=new mn(p.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,A=$.values;for(let R=0;R<p.batchSize;++R){let N=R*u[0],I=R*$.strides[0];for(let F=0;F<p.outHeight;++F){let L=I+F*$.strides[1],P=F*p.strideHeight-x;for(let H=0;H<f;++H){let X=P+H*g;if(X<0||X>=p.inHeight)continue;let M=H*c[0],B=N+X*u[1];for(let V=0;V<p.outWidth;++V){let K=L+V*$.strides[2],Q=V*p.strideWidth-v;for(let ee=0;ee<m;++ee){let ie=Q+ee*b;if(ie<0||ie>=p.inWidth)continue;let se=M+ee*c[1],ge=B+ie*p.inChannels,fe=K,pe=se;for(let Ne=0;Ne<p.inChannels;++Ne){let De=C[ge+Ne];for(let Ve=0;Ve<w;++Ve)A[fe+Ve]+=De*E[pe+Ve];fe+=w,pe+=w}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}var sbe={kernelName:Nu,backendName:"cpu",kernelFunc:V4};function obe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:d,filterShape:u}=r;Ce([a,i],"depthwiseConv2dNativeBackpropFilter");let c=T.computeConv2DInfo(a.shape,u,s,o,l,d,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=c,g=new mn(c.filterShape,"float32"),b=c.padInfo.left,y=c.padInfo.top,v=c.outChannels/c.inChannels,x=n.data.get(a.dataId).values,w=new mn(a.shape,a.dtype,x),$=n.data.get(i.dataId).values,C=new mn(i.shape,i.dtype,$);for(let E=0;E<f;++E){let A=Math.max(0,Math.ceil((y-E)/h)),R=Math.min(c.outHeight,(c.inHeight+y-E)/h);for(let N=0;N<m;++N){let I=Math.max(0,Math.ceil((b-N)/p)),F=Math.min(c.outWidth,(c.inWidth+b-N)/p);for(let L=0;L<c.outChannels;++L){let P=Math.trunc(L/v),H=L%v,X=0;for(let M=0;M<c.batchSize;++M)for(let B=A;B<R;++B){let V=E+B*h-y;for(let K=I;K<F;++K){let Q=N+K*p-b;X+=w.get(M,V,Q,P)*C.get(M,B,K,L)}}g.set(X,E,N,P,H)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var lbe={kernelName:A0,backendName:"cpu",kernelFunc:obe};function ube(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:d,inputShape:u}=r;Ce([a,i],"depthwiseConv2DNativeBackpropInput");let c=k.computeStrides(a.shape),h=k.computeStrides(i.shape),p=T.computeConv2DInfo(u,i.shape,s,o,l,d,!0),f=new mn(p.inShape,"float32"),m=f.values,[g,b,y]=f.strides,v=n.data.get(a.dataId).values,[x,w,$]=c,C=n.data.get(i.dataId).values,[E,A,R]=h,{batchSize:N,filterHeight:I,filterWidth:F,inChannels:L,inHeight:P,inWidth:H,outChannels:X,outHeight:M,outWidth:B,strideHeight:V,strideWidth:K}=p,Q=I-1-p.padInfo.top,ee=F-1-p.padInfo.left,ie=X/L;for(let se=0;se<N;++se)for(let ge=0;ge<L;++ge)for(let fe=0;fe<P;++fe){let pe=fe-Q,Ne=Math.max(0,Math.ceil(pe/V)),De=Math.min(M,(I+pe)/V);for(let Ve=0;Ve<H;++Ve){let Le=Ve-ee,ct=Math.max(0,Math.ceil(Le/K)),Ze=Math.min(B,(F+Le)/K),Je=0;for(let Oe=Ne;Oe<De;++Oe){let at=Oe*V-pe;for(let yt=ct;yt<Ze;++yt){let pr=yt*K-Le,Lt=x*se+w*Oe+$*yt,rr=E*(I-1-at)+A*(F-1-pr)+R*ge;for(let vn=0;vn<ie;++vn){let ar=ge*ie+vn,Kr=v[Lt+ar],fr=C[rr+vn];Je+=Kr*fr}}}m[g*se+b*fe+y*Ve+ge]=Je}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}var dbe={kernelName:R0,backendName:"cpu",kernelFunc:ube};function cbe(e){let{inputs:t,backend:n}=e,{x:r}=t,a=k.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,s=Xe([a,a],r.dtype),o=s.values;for(let d=0;d<i.length;d++)o[d*a+d]=i[d];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}var hbe={kernelName:qm,backendName:"cpu",kernelFunc:cbe},pbe={kernelName:_u,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a}=e,{strides:i,pad:s,dilations:o}=n,l=t,d=l.data.get(r.dataId).values,u=r.shape.length,c=l.data.get(a.dataId).values,h=a.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:$,filterWidth:C,dilationHeight:E,dilationWidth:A,outShape:R}=T.computeDilation2DInfo(r.shape,a.shape,i,s,"NHWC",o),N=k.sizeFromShape(R),I=R.length,F=k.getArrayFromDType(r.dtype,N);for(let L=0;L<p;++L)for(let P=0;P<b;++P){let H=P*x-v.top;for(let X=0;X<y;++X){let M=X*w-v.left;for(let B=0;B<g;++B){let V=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<$;++Q){let ee=H+Q*E;if(ee>=0&&ee<f)for(let ie=0;ie<C;++ie){let se=M+ie*A;if(se>=0&&se<m){let ge=k.locToIndex([L,ee,se,B],u,k.computeStrides(r.shape)),fe=k.locToIndex([Q,ie,B],h,k.computeStrides(a.shape)),pe=d[ge]+c[fe];pe>V&&(V=pe)}}}let K=k.locToIndex([L,P,X,B],I,k.computeStrides(R));F[K]=V}}}return{dataId:l.write(k.toTypedArray(F,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}},fbe={kernelName:Kc,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:i}=e,{strides:s,pad:o,dilations:l}=n,d=t,u=k.toNestedArray(r.shape,d.data.get(r.dataId).values),c=k.toNestedArray(a.shape,d.data.get(a.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:b,padInfo:y,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:$,dilationHeight:C,dilationWidth:E,outShape:A}=T.computeDilation2DInfo(r.shape,a.shape,s,o,"NHWC",l);k.assert(i.rank===A.length,()=>"Error in ".concat(Kc,", dy must have the same rank as output ").concat(A.length,", but got ").concat(i.rank));let R=k.toNestedArray(A,d.data.get(i.dataId).values),N=k.makeZerosNestedTypedArray(a.shape,a.dtype);for(let I=0;I<h;++I)for(let F=0;F<g;++F){let L=F*v-y.top;for(let P=0;P<b;++P){let H=P*x-y.left;for(let X=0;X<m;++X){let M=Number.MIN_SAFE_INTEGER,B=0,V=0;for(let K=0;K<w;++K){let Q=L+K*C;if(Q>=0&&Q<p)for(let ee=0;ee<$;++ee){let ie=H+ee*E;if(ie>=0&&ie<f){let se=u[I][Q][ie][X]+c[K][ee][X];se>M&&(M=se,B=K,V=ee)}}}N[B][V][X]+=R[I][F][P][X]}}}return{dataId:d.write(k.toTypedArray(N,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},mbe={kernelName:qc,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:i}=e,{strides:s,pad:o,dilations:l}=n,d=t,u=k.toNestedArray(r.shape,d.data.get(r.dataId).values),c=k.toNestedArray(a.shape,d.data.get(a.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:b,padInfo:y,strideHeight:v,strideWidth:x,filterHeight:w,filterWidth:$,dilationHeight:C,dilationWidth:E,outShape:A}=T.computeDilation2DInfo(r.shape,a.shape,s,o,"NHWC",l);k.assert(i.rank===A.length,()=>"Error in ".concat(qc,", dy must have the same rank as output ").concat(A.length,", but got ").concat(i.rank));let R=k.toNestedArray(A,d.data.get(i.dataId).values),N=k.makeZerosNestedTypedArray(r.shape,r.dtype);for(let I=0;I<h;++I)for(let F=0;F<g;++F){let L=F*v-y.top;for(let P=0;P<b;++P){let H=P*x-y.left;for(let X=0;X<m;++X){let M=Number.MIN_SAFE_INTEGER,B=L<0?0:L,V=H<0?0:H;for(let K=0;K<w;++K){let Q=L+K*C;if(Q>=0&&Q<p)for(let ee=0;ee<$;++ee){let ie=H+ee*E;if(ie>=0&&ie<f){let se=u[I][Q][ie][X]+c[K][ee][X];se>M&&(M=se,B=Q,V=ie)}}}N[I][B][V][X]+=R[I][F][P][X]}}}return{dataId:d.write(k.toTypedArray(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function gbe(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},d=(l==null?void 0:l.alpha)||1,u=(o==null?void 0:o.contextType)||"2d";if(u!=="2d")throw new Error("Context type ".concat(o.contextType," is not supported by the CPU backend."));let c=i.getContext(u,(o==null?void 0:o.contextAttributes)||{});if(c==null)throw new Error("Could not get the context with ".concat(u," type."));let[h,p]=a.shape.slice(0,2),f=a.shape.length===2?1:a.shape[2],m=n.data.get(a.dataId).values,g=a.dtype==="float32"?255:1,b=new Uint8ClampedArray(p*h*4);for(let v=0;v<h*p;++v){let x=[0,0,0,255*d];for(let $=0;$<f;$++){let C=m[v*f+$];if(a.dtype==="float32"){if(C<0||C>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(C,"."))}else if(a.dtype==="int32"&&(C<0||C>255))throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(C,"."));f===1?(x[0]=C*g,x[1]=C*g,x[2]=C*g):x[$]=C*g}let w=v*4;b[w+0]=Math.round(x[0]),b[w+1]=Math.round(x[1]),b[w+2]=Math.round(x[2]),b[w+3]=Math.round(x[3])}i.width=p,i.height=h;let y=new ImageData(b,p,h);return c.putImageData(y,0,0),a}var bbe={kernelName:y$,backendName:"cpu",kernelFunc:gbe};function zg(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;Ce(a,"sum");let o;a.dtype==="bool"?o=Ro({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):o=Ji({inputs:{x:a},backend:n});let l=o.shape.length,d=k.parseAxisParam(i,o.shape),u=T.getAxesPermutation(d,l),c=d,h=o;u!=null&&(h=Hr({inputs:{x:o},backend:n,attrs:{perm:u}}),c=T.getInnerMostAxes(c.length,l)),T.assertAxesAreInnerMostDims("sum",c,h.shape.length);let[p,f]=T.computeOutAndReduceShapes(h.shape,c),m=T.upcastType(h.dtype,"int32"),g=Sv(n,p,m),b=k.sizeFromShape(f),y=n.data.get(g.dataId).values,v=n.data.get(h.dataId).values;for(let x=0;x<y.length;++x){let w=x*b,$=0;for(let C=0;C<b;++C)$+=v[w+C];y[x]=$}if(s){let x=T.expandShapeToKeepDim(g.shape,d),w=g;g=Dt({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(o),u!=null&&n.disposeIntermediateTensorInfo(h),g}var ybe={kernelName:Sd,backendName:"cpu",kernelFunc:zg};function vbe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=T.decodeEinsumEquation(a,i.length);T.checkEinsumDimSizes(s.length,l,i);let{path:d,steps:u}=T.getEinsumComputePath(o,l),c=u.length,h=null,p=s.length,f=[];for(let m=0;m<c;++m){for(let g of u[m]){let{permutationIndices:b,expandDims:y}=T.getEinsumPermutation(p,l[g]),v;T.isIdentityPermutation(b)?v=i[g]:(v=Hr({inputs:{x:i[g]},backend:n,attrs:{perm:b}}),f.push(v));let x=v.shape.slice();for(let w=0;w<y.length;++w)x.splice(y[w],0,1);k.arraysEqual(v.shape,x)||(v=Dt({inputs:{x:v},backend:n,attrs:{shape:x}}),f.push(v)),h===null?h=v:(h=Ux({inputs:{a:v,b:h},backend:n}),f.push(h))}m<c-1&&(d[m]>=0&&(h=zg({inputs:{x:h},backend:n,attrs:{axis:d[m]-(s.length-p),keepDims:!1}}),f.push(h)),p--)}for(let m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}var xbe={kernelName:D0,backendName:"cpu",kernelFunc:vbe};function wbe(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t;Ce([r,a],"eluGrad");let i=new Float32Array(k.sizeFromShape(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let d=s[l];d>=0?i[l]=o[l]:i[l]=o[l]*(d+1)}return n.makeTensorInfo(a.shape,"float32",i)}var kbe={kernelName:Mh,backendName:"cpu",kernelFunc:wbe},Sbe=T.ERF_P,Ibe=T.ERF_A1,$be=T.ERF_A2,Cbe=T.ERF_A3,Ebe=T.ERF_A4,Tbe=T.ERF_A5,Nbe=bt(Du,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+Sbe*n);return t*(1-((((Tbe*r+Ebe)*r+Cbe)*r+$be)*r+Ibe)*r*Math.exp(-n*n))}),_be={kernelName:Du,backendName:"cpu",kernelFunc:Nbe};function Cv(e){let{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:i}=r,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(k.assert(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),Dt({inputs:{x:a},backend:n,attrs:{shape:o}})}var Abe={kernelName:Lh,backendName:"cpu",kernelFunc:Cv},Rbe=ln((e,t)=>e/t),LE=_n(Au,Rbe),cS={kernelName:Au,backendName:"cpu",kernelFunc:LE};function U4(e,t,n){let r=e.shape,a=r[0],i=r[1],s=n.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,d=[a,i],u=k.sizeFromShape(d),c=k.getTypedArrayFromDType("float32",u),h=k.getTypedArrayFromDType("float32",u);for(let g=0;g<a;g++){let b=tu({inputs:{x:o},backend:n,attrs:{begin:[g,0],size:[1,i]}}),y=tu({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=ta({inputs:{real:b,imag:y},backend:n}),{real:x,imag:w}=Dbe(v,t,n),$=T.mergeRealAndImagArrays(x,w);for(let C=0;C<i;C++){let E=T.getComplexWithIndex($,C);c[g*i+C]=E.real,h[g*i+C]=E.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v)}let p=n.makeTensorInfo(d,"float32",c),f=n.makeTensorInfo(d,"float32",h),m=ta({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function Dbe(e,t,n){let r=k.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if(Fbe(r)){let o=hS(i,s,r,t,n),l=[e.shape[0],e.shape[1]];if(t){let d=n.makeTensorInfo(l,"float32",o.real),u=n.makeTensorInfo(l,"float32",o.imag),c=n.makeTensorInfo([],"float32",k.createScalarValue(r,"float32")),h=Ji({inputs:{x:c},backend:n}),p=cS.kernelFunc({inputs:{a:d,b:c},backend:n}),f=cS.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(f.dataId).values;return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return o}else{let o=T.mergeRealAndImagArrays(i,s),l=Mbe(o,r,t);return T.splitRealAndImagArrays(l)}}function Fbe(e){return(e&e-1)===0}function hS(e,t,n,r,a){if(n===1)return{real:e,imag:t};let i=T.mergeRealAndImagArrays(e,t),s=n/2,o=T.complexWithEvenIndex(i),l=o.real,d=o.imag,u=[l.length],c=a.makeTensorInfo(u,"float32",l),h=a.makeTensorInfo(u,"float32",d),p=ta({inputs:{real:c,imag:h},backend:a}),f=T.complexWithOddIndex(i),m=f.real,g=f.imag,b=[m.length],y=a.makeTensorInfo(b,"float32",m),v=a.makeTensorInfo(b,"float32",g),x=ta({inputs:{real:y,imag:v},backend:a}),w=hS(l,d,s,r,a),$=w.real,C=w.imag,E=[$.length],A=a.makeTensorInfo(E,"float32",$),R=a.makeTensorInfo(E,"float32",C),N=ta({inputs:{real:A,imag:R},backend:a}),I=hS(m,g,s,r,a),F=I.real,L=I.imag,P=[F.length],H=a.makeTensorInfo(P,"float32",F),X=a.makeTensorInfo(P,"float32",L),M=ta({inputs:{real:H,imag:X},backend:a}),B=T.exponents(n,r),V=[B.real.length],K=a.makeTensorInfo(V,"float32",B.real),Q=a.makeTensorInfo(V,"float32",B.imag),ee=ta({inputs:{real:K,imag:Q},backend:a}),ie=Ux({inputs:{a:ee,b:M},backend:a}),se=uh({inputs:{a:N,b:ie},backend:a}),ge=FE({inputs:{a:N,b:ie},backend:a}),fe=eu({inputs:{input:se},backend:a}),pe=eu({inputs:{input:ge},backend:a}),Ne=dh({inputs:{input:se},backend:a}),De=dh({inputs:{input:ge},backend:a}),Ve=ch({inputs:[fe,pe],backend:a,attrs:{axis:0}}),Le=ch({inputs:[Ne,De],backend:a,attrs:{axis:0}}),ct=a.data.get(Ve.dataId).values,Ze=a.data.get(Le.dataId).values;return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(Q),a.disposeIntermediateTensorInfo(ee),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(ge),a.disposeIntermediateTensorInfo(fe),a.disposeIntermediateTensorInfo(Ne),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(De),a.disposeIntermediateTensorInfo(Ve),a.disposeIntermediateTensorInfo(Le),{real:ct,imag:Ze}}function Mbe(e,t,n){let r=new Float32Array(t*2);for(let a=0;a<t;a++){let i=0,s=0;for(let o=0;o<t;o++){let l=T.exponent(a*o,t,n),d=T.getComplexWithIndex(e,o);i+=d.real*l.real-d.imag*l.imag,s+=d.real*l.imag+d.imag*l.real}n&&(i/=t,s/=t),T.assignToTypedArray(r,i,s,a)}return r}function Obe(e){let{inputs:t,backend:n}=e,{input:r}=t,a=k.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Dt({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=U4(o,!1,n),d=Dt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),d}var Lbe={kernelName:F0,backendName:"cpu",kernelFunc:Obe};function PE(e){let{backend:t,attrs:n}=e,{shape:r,value:a,dtype:i}=n,s=i||k.inferDtype(a),o=k.getArrayFromDType(s,k.sizeFromShape(r));return zbe(o,a),t.makeTensorInfo(r,s,o)}var Pbe={kernelName:Km,backendName:"cpu",kernelFunc:PE};function zbe(e,t,n){e.fill(t)}var Bbe={kernelName:Ph,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,a=n,i=k.getTypedArrayFromDType(r.dtype,k.sizeFromShape(r.shape)),[s,o,l,d]=r.shape,u=a.data.get(r.dataId).values;for(let c=0;c<s;c++){let h=c*l*o*d;for(let p=0;p<o;p++){let f=p*(l*d);for(let m=0;m<l;m++){let g=m*d;for(let b=0;b<d;b++){let y=Math.round(l-m-1),v=h+f+g+b,x=u[v];if(y>=0&&y<l){let w=y*d,$=h+f+w+b;x=u[$]}i[v]=x}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function Wbe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:d,dataFormat:u,dilations:c,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=W4({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:d,dataFormat:u,dilations:c,dimRoundingMode:h}});if(s){let g=m;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let b=Dt({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=uh({inputs:{a:m,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else m=uh({inputs:{a:m,b:s},backend:n});n.disposeIntermediateTensorInfo(g)}if(p){let g=m;if(u==="NCHW"&&p==="prelu"&&o.shape.length===1&&o.shape[0]!==1){let b=Dt({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=$v(n,m,p,b,f),n.disposeIntermediateTensorInfo(b)}else m=$v(n,m,p,o,f);n.disposeIntermediateTensorInfo(g)}return m}var Vbe={kernelName:Vl,backendName:"cpu",kernelFunc:Wbe};function Ube(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:d,dataFormat:u,dilations:c,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=V4({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:d,dataFormat:u,dilations:c,dimRoundingMode:h}});if(s){let g=m;m=uh({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){let g=m;m=$v(n,m,p,o,f),n.disposeIntermediateTensorInfo(g)}return m}var Hbe={kernelName:Ul,backendName:"cpu",kernelFunc:Ube};function jbe(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=k.sizeFromShape(r.shape),s=a.shape,o=s[s.length-1],[l,d,u,c]=T.prepareAndValidate(r,a);if(d===0)return n.makeTensorInfo(l,r.dtype,[]);let h=n.data.get(a.dataId).values,p=n.bufferSync(r),f=i4(h,p,r.dtype,d,o,u,c,r.shape,i);return n.makeTensorInfo(l,r.dtype,f.values)}var Gbe={kernelName:Bh,backendName:"cpu",kernelFunc:jbe};function qbe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r;Ce([a,i],"gatherV2");let l=k.parseAxisParam(s,a.shape)[0],d=n.data.get(i.dataId).values,u=a.shape[l];for(let x=0;x<d.length;++x){let w=d[x];k.assert(w<=u-1&&w>=0,()=>"GatherV2: the index value ".concat(w," is not in [0, ").concat(u-1,"]"))}let c=o;o==null&&(c=0);let h=k.sizeFromShape(i.shape),p=T.segment_util.collectGatherOpShapeInfo(a,i,l,c),f=Dt({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Dt({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}}),g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],b=n.bufferSync(m),y=n.bufferSync(f),v=s4(y,b,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}var Kbe={kernelName:zh,backendName:"cpu",kernelFunc:qbe};function Xbe(e){let{inputs:t,backend:n}=e,{input:r}=t,a=k.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Dt({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),l=U4(o,!0,n),d=Dt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),d}var Ybe={kernelName:M0,backendName:"cpu",kernelFunc:Xbe},Zbe=bt(Wu,e=>Number.isFinite(e)?1:0,"bool"),Qbe={kernelName:Wu,backendName:"cpu",kernelFunc:Zbe},Jbe=bt(Vu,e=>Math.abs(e)===1/0?1:0,"bool"),eye={kernelName:Vu,backendName:"cpu",kernelFunc:Jbe},tye=bt(Uu,e=>Number.isNaN(e)?1:0,"bool"),nye={kernelName:Uu,backendName:"cpu",kernelFunc:tye};function rye(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=c4(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}var aye={kernelName:Hh,backendName:"cpu",kernelFunc:rye},iye=bt(Gu,e=>Math.log1p(e)),sye={kernelName:Gu,backendName:"cpu",kernelFunc:iye},oye=ln((e,t)=>e&&t),lye=_n(jh,oye,null,"bool"),uye={kernelName:jh,backendName:"cpu",kernelFunc:lye},dye=bt(Gh,e=>e?0:1,"bool"),cye={kernelName:Gh,backendName:"cpu",kernelFunc:dye},hye=ln((e,t)=>e||t),pye=_n(qh,hye,null,"bool"),fye={kernelName:qh,backendName:"cpu",kernelFunc:pye};function mye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;Ce(a,"LRN");let d=a.shape[3],u=d-1,c=n.data.get(a.dataId).values,h=k.sizeFromShape(a.shape),p=new Float32Array(h);function f(m){let g=m%d,b=m-g+Math.max(0,g-i),y=m-g+Math.min(g+i,u),v=0;for(;b<=y;b++){let x=c[b];v+=x*x}return v}for(let m=0;m<h;m++){let g=f(m),b=c[m]*Math.pow(s+o*g,-l);p[m]=b}return n.makeTensorInfo(a.shape,a.dtype,p)}var gye={kernelName:qu,backendName:"cpu",kernelFunc:mye};function bye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:d,beta:u}=r;Ce(s,"LRNGrad");let c=k.sizeFromShape(s.shape),h=s.shape[3],p=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(c),b=c;for(let y=0;y<b;y++){let v=y%h,x=y-v+Math.max(0,v-o),w=y-v+Math.min(h,v+o+1),$=0;for(let C=x;C<w;C++)$+=Math.pow(f[C],2);$=d*$+l;for(let C=x;C<w;C++){let E=-2*d*u*f[C]*m[y]/$;y===C&&(E+=Math.pow($,-u)),E*=p[y],g[C]+=E}}return n.makeTensorInfo(s.shape,a.dtype,g)}var yye={kernelName:Kh,backendName:"cpu",kernelFunc:bye};function H4(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=n,l=a.shape,d=l.length,u=k.parseAxisParam(i,l),c=u,h=T.getAxesPermutation(c,d),p=o.data.get(a.dataId).values;if(h!=null){let x=new Array(d);for(let w=0;w<x.length;w++)x[w]=l[h[w]];p=TE(p,l,a.dtype,h,x),c=T.getInnerMostAxes(c.length,d),l=x}Ce(a,"max"),T.assertAxesAreInnerMostDims("max",c,d);let[f,m]=T.computeOutAndReduceShapes(l,c),g=k.sizeFromShape(m),b=p4(p,g,f,a.dtype),y=o.write(b,f,a.dtype),v=f;return s&&(v=T.expandShapeToKeepDim(f,u)),{dataId:y,shape:v,dtype:a.dtype}}var vye={kernelName:Ku,backendName:"cpu",kernelFunc:H4};function xye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;Ce(a,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,d=1;k.assert(T.eitherStridesOrDilationsAreOne(s,d),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(d,"'"));let u=T.computePool2DInfo(a.shape,i,s,d,o,l),c;if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))c=Ji({inputs:{x:a},backend:n});else{let h=n.data.get(a.dataId).values,p=k.computeStrides(a.shape),f=OE(h,a.shape,a.dtype,p,u,"max");c=n.makeTensorInfo(u.outShape,a.dtype,f.values)}return c}var wye={kernelName:Yu,backendName:"cpu",kernelFunc:xye};function kye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:d}=r;Ce(a,"maxPool3d");let u=T.computePool3DInfo(a.shape,i,s,1,o,l,d),c=n.data.get(a.dataId).values,h=B4(c,a.shape,a.dtype,k.computeStrides(a.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}var Sye={kernelName:Xh,backendName:"cpu",kernelFunc:kye};function Iye(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=r;Ce([a,i],"maxPool3DGrad");let u=T.computePool3DInfo(i.shape,s,o,1,l,d),c=n.bufferSync(i),h=hge(c,u),p=u.strideDepth,f=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,b=u.dilationHeight,y=u.dilationWidth,v=u.effectiveFilterDepth,x=u.effectiveFilterHeight,w=u.effectiveFilterWidth,$=v-1-u.padInfo.front,C=w-1-u.padInfo.left,E=x-1-u.padInfo.top,A=Xe(i.shape,"float32"),R=n.bufferSync(a);for(let N=0;N<u.batchSize;++N)for(let I=0;I<u.inChannels;++I)for(let F=0;F<u.inDepth;++F)for(let L=0;L<u.inHeight;++L)for(let P=0;P<u.inWidth;++P){let H=F-$,X=L-E,M=P-C,B=0;for(let V=0;V<v;V+=g){let K=(H+V)/p;if(!(K<0||K>=u.outDepth||Math.floor(K)!==K))for(let Q=0;Q<x;Q+=b){let ee=(X+Q)/f;if(!(ee<0||ee>=u.outHeight||Math.floor(ee)!==ee))for(let ie=0;ie<w;ie+=y){let se=(M+ie)/m;if(se<0||se>=u.outWidth||Math.floor(se)!==se)continue;let ge=v*x*w-1-h.get(N,K,ee,se,I),fe=V*x*w+Q*w+ie,pe=ge===fe?1:0;if(pe===0)continue;let Ne=R.get(N,K,ee,se,I);B+=Ne*pe}}}A.set(B,N,F,L,P,I)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}var $ye={kernelName:Ym,backendName:"cpu",kernelFunc:Iye};function Cye(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;Ce([i,s],"maxPoolGrad");let{filterSize:l,strides:d,pad:u,dimRoundingMode:c}=r,h=T.computePool2DInfo(o.shape,l,d,1,u,c),p=n.data.get(o.dataId).values,f=Xe(h.outShape,o.dtype,z4(p,o.shape,o.dtype,h).values),m=h.strideHeight,g=h.strideWidth,b=h.dilationHeight,y=h.dilationWidth,v=h.effectiveFilterHeight,x=h.effectiveFilterWidth,w=x-1-h.padInfo.left,$=v-1-h.padInfo.top,C=Xe(o.shape,"float32"),E=n.data.get(a.dataId).values,A=Xe(a.shape,"float32",E);for(let R=0;R<h.batchSize;++R)for(let N=0;N<h.inChannels;++N)for(let I=0;I<h.inHeight;++I)for(let F=0;F<h.inWidth;++F){let L=I-$,P=F-w,H=0;for(let X=0;X<v;X+=b){let M=(L+X)/m;if(!(M<0||M>=h.outHeight||Math.floor(M)!==M))for(let B=0;B<x;B+=y){let V=(P+B)/g;if(V<0||V>=h.outWidth||Math.floor(V)!==V)continue;let K=v*x-1-f.get(R,M,V,N),Q=X*x+B,ee=K===Q?1:0;if(ee===0)continue;let ie=A.get(R,M,V,N);H+=ie*ee}}C.set(H,R,I,F,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}var Eye={kernelName:Xm,backendName:"cpu",kernelFunc:Cye};function Tye(e,t,n,r,a){let i=k.computeStrides(t),s=OE(e,t,n,i,a,"max"),o=z4(e,t,n,a,!0,r);return[s.values,o.values]}var Nye={kernelName:Zm,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=t,l=n;Ce(r,"MaxPoolWithArgmax");let d=l.data.get(r.dataId).values,u=T.computePool2DInfo(r.shape,a,i,[1,1],s),[c,h]=Tye(d,r.shape,r.dtype,o,u),p=l.write(c,u.outShape,r.dtype),f=l.write(h,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}};function _ye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=k.parseAxisParam(i,a.shape),l=T.computeOutAndReduceShapes(a.shape,o)[1],d=k.sizeFromShape(l),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([d]));u.push(c);let h=Ro({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});u.push(h);let p=LE({inputs:{a:h,b:c},backend:n});u.push(p);let f=zg({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:s}});return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}var Aye={kernelName:Zu,backendName:"cpu",kernelFunc:_ye};function Rye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;Ce(a,"min");let o=k.parseAxisParam(i,a.shape),l=o,d=T.getAxesPermutation(l,a.shape.length),u=a;d!=null&&(u=Hr({inputs:{x:a},backend:n,attrs:{perm:d}}),l=T.getInnerMostAxes(l.length,a.shape.length)),T.assertAxesAreInnerMostDims("min",l,u.shape.length);let[c,h]=T.computeOutAndReduceShapes(u.shape,l),p=k.sizeFromShape(h),f=k.makeZerosTypedArray(k.sizeFromShape(c),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<f.length;++b){let y=b*p,v=m[y];for(let x=0;x<p;++x){let w=m[y+x];(Number.isNaN(w)||w<v)&&(v=w)}f[b]=v}d!=null&&n.disposeIntermediateTensorInfo(u);let g=n.makeTensorInfo(c,u.dtype,f);if(s){let b=T.expandShapeToKeepDim(c,o),y=Dt({inputs:{x:g},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(g),y}return g}var Dye={kernelName:Qu,backendName:"cpu",kernelFunc:Rye};function Fye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:s}=r;Ce(a,"mirrorPad");let o=i.map((y,v)=>y[0]+a.shape[v]+y[1]),l=i.map(y=>y[0]),d=i.map((y,v)=>y[0]+a.shape[v]),u=s==="reflect"?0:1,c=n.data.get(a.dataId).values,h=a.shape.length,p=k.computeStrides(a.shape),f=k.sizeFromShape(o),m=o.length,g=k.computeStrides(o),b=k.getTypedArrayFromDType(a.dtype,f);for(let y=0;y<f;y++){let v=k.indexToLoc(y,m,g);for(let w=0;w<m;w++)v[w]<l[w]?v[w]=l[w]*2-v[w]-u:v[w]>=d[w]&&(v[w]=(d[w]-1)*2-v[w]+u);v=v.map((w,$)=>w-l[$]);let x=k.locToIndex(v,h,p);b[y]=c[x]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}var Mye={kernelName:ed,backendName:"cpu",kernelFunc:Fye},Oye=ln((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),Lye=_n(td,Oye),Pye={kernelName:td,backendName:"cpu",kernelFunc:Lye},zye=zo($0());function j4(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=a.shape.length,o=i;if(o===-1&&(o=s-1),o!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(s," and dim was ").concat(o));let l=k.parseAxisParam([o],a.shape),d=H4({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=T.expandShapeToKeepDim(d.shape,l),c=Dt({inputs:{x:d},backend:n,attrs:{shape:u}}),h=FE({inputs:{a,b:c},backend:n}),p=t4({inputs:{x:h},backend:n}),f=zg({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=Dt({inputs:{x:f},backend:n,attrs:{shape:u}}),g=LE({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var Bye={kernelName:Id,backendName:"cpu",kernelFunc:j4};function Wye(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;Ce(a,"multinomial");let l=o?a:j4({inputs:{logits:a},backend:n,attrs:{dim:-1}}),d=l.shape[0],u=l.shape[1],c=n.data.get(l.dataId).values,h=[d,i],p=k.makeZerosTypedArray(k.sizeFromShape(h),"int32");for(let f=0;f<d;++f){let m=f*u,g=new Float32Array(u-1);g[0]=c[m];for(let v=1;v<g.length;++v)g[v]=g[v-1]+c[m+v];let b=zye.alea(s.toString()),y=f*i;for(let v=0;v<i;++v){let x=b();p[y+v]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){p[y+v]=w;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",p)}var Vye={kernelName:Yh,backendName:"cpu",kernelFunc:Wye},Uye=as.nonMaxSuppressionV3Impl;function Hye(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;Ce(a,"NonMaxSuppression");let d=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:c}=Uye(d,u,s,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}var jye={kernelName:Jh,backendName:"cpu",kernelFunc:Hye},Gye=as.nonMaxSuppressionV4Impl;function qye(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:d}=r;Ce(a,"NonMaxSuppressionPadded");let u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:p}=Gye(u,c,s,o,l,d);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}var Kye={kernelName:ep,backendName:"cpu",kernelFunc:qye},Xye=as.nonMaxSuppressionV5Impl;function Yye(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:d}=r;Ce(a,"NonMaxSuppressionWithScore");let u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,h=s,p=o,f=l,m=d,{selectedIndices:g,selectedScores:b}=Xye(u,c,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var Zye={kernelName:tp,backendName:"cpu",kernelFunc:Yye};function Qye(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r;Ce(a,"oneHot");let d=k.sizeFromShape(a.shape),u=new Float32Array(d*s);u.fill(l);let c=n.data.get(a.dataId).values;for(let h=0;h<d;++h)c[h]>=0&&c[h]<s&&(u[h*s+c[h]]=o);return n.makeTensorInfo([...a.shape,s],i,u)}var Jye={kernelName:rd,backendName:"cpu",kernelFunc:Qye};function Ev(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let a=eu({inputs:{input:r},backend:n}),i=Ev({inputs:{x:a},backend:n}),s=dh({inputs:{input:r},backend:n}),o=Ev({inputs:{x:s},backend:n}),l=ta({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return PE({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var eve={kernelName:xp,backendName:"cpu",kernelFunc:Ev};function G4(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let a=eu({inputs:{input:r},backend:n}),i=G4({inputs:{x:a},backend:n}),s=dh({inputs:{input:r},backend:n}),o=Ev({inputs:{x:s},backend:n}),l=ta({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return PE({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var tve={kernelName:np,backendName:"cpu",kernelFunc:G4};function q4(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(t.length===1)return Cv({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(u=>{k.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),k.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(u=>{let c=Cv({inputs:{input:u},backend:n,attrs:{dim:a}});return o.push(c),c}),d=ch({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),d}var nve={kernelName:rp,backendName:"cpu",kernelFunc:q4};function rve(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;Ce(a,"pad");let o=i.map((b,y)=>b[0]+a.shape[y]+b[1]),l=i.map(b=>b[0]),d=n.data.get(a.dataId).values,u=k.sizeFromShape(a.shape),c=a.shape.length,h=k.computeStrides(a.shape),p=k.sizeFromShape(o),f=o.length,m=k.computeStrides(o),g=k.getTypedArrayFromDType(a.dtype,p);s!==0&&g.fill(s);for(let b=0;b<u;b++){let y=k.indexToLoc(b,c,h).map((x,w)=>x+l[w]),v=k.locToIndex(y,f,m);g[v]=d[b]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}var K4={kernelName:ad,backendName:"cpu",kernelFunc:rve},ave=ln((e,t)=>Math.pow(e,t)),ive=_n(id,ave),sve={kernelName:id,backendName:"cpu",kernelFunc:ive};function ove(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,o=a.map(g=>n.data.get(g.dataId).values),l=a.map(g=>g.shape),d=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,[c,h,p]=v4(o,l,d,i.shape,i.dtype,u,s.shape),f=c.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(p,i.dtype,h);return f.concat([m])}var lve={kernelName:L0,backendName:"cpu",kernelFunc:ove};function uve(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[d,u]=x4(s,r.shape,r.dtype,o,a.shape,l,i.shape),c=n.makeTensorInfo([d.length],"int32",d),h=n.makeTensorInfo([u.length],r.dtype,u);return[c,h]}var dve={kernelName:P0,backendName:"cpu",kernelFunc:uve};function cve(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,d=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,h=o.map(g=>n.data.get(g.dataId).values),p=o.map(g=>g.shape),[f,m]=w4(d,a.shape,u,i.shape,i.dtype,c,s.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}var hve={kernelName:z0,backendName:"cpu",kernelFunc:cve};function pve(e){let{backend:t,attrs:n}=e,{start:r,stop:a,dtype:i,step:s}=n,o=NE(r,a,s,i);return t.makeTensorInfo([o.length],i,o)}var fve={kernelName:Qm,backendName:"cpu",kernelFunc:pve},mve=bt(ld,e=>1/e),gve={kernelName:ld,backendName:"cpu",kernelFunc:mve};function bve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;Ce(a,"resizeBilinear");let l=k.computeStrides(a.shape),[d,u]=o,[c,h,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(k.sizeFromShape([c,d,u,f])),b=[i&&d>1?h-1:h,i&&u>1?p-1:p],y=[i&&d>1?d-1:d,i&&u>1?u-1:u],v=0,x=b[0]/y[0],w=b[1]/y[1];for(let $=0;$<c;$++)for(let C=0;C<d;C++){let E;s?E=x*(C+.5)-.5:E=x*C;let A=Math.max(0,Math.floor(E)),R=E-A,N=Math.min(h-1,Math.ceil(E)),I=$*l[0]+A*l[1],F=$*l[0]+N*l[1];for(let L=0;L<u;L++){let P;s?P=w*(L+.5)-.5:P=w*L;let H=Math.max(0,Math.floor(P)),X=P-H,M=Math.min(p-1,Math.ceil(P)),B=I+H*l[2],V=F+H*l[2],K=I+M*l[2],Q=F+M*l[2];for(let ee=0;ee<f;ee++){let ie=m[B+ee],se=m[V+ee],ge=m[K+ee],fe=m[Q+ee],pe=ie+(ge-ie)*X,Ne=se+(fe-se)*X,De=pe+(Ne-pe)*R;g[v++]=De}}}return n.makeTensorInfo([c,d,u,f],"float32",g)}var yve={kernelName:cd,backendName:"cpu",kernelFunc:bve};function vve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;Ce([i,a],"resizeBilinearGrad");let o=k.computeStrides(a.shape),[l,d,u,c]=a.shape,[,h,p]=i.shape,f=new Float32Array(l*d*u*c),m=[s&&h>1?d-1:d,s&&p>1?u-1:u],g=[s&&h>1?h-1:h,s&&p>1?p-1:p],b=m[0]/g[0],y=m[1]/g[1],v=n.data.get(i.dataId).values,x=0;for(let w=0;w<l;w++){let $=w*o[0];for(let C=0;C<h;C++){let E=C*b,A=Math.floor(E),R=Math.min(Math.ceil(E),d-1),N=$+A*o[1],I=$+R*o[1],F=E-A,L=1-F;for(let P=0;P<p;P++){let H=P*y,X=Math.floor(H),M=Math.min(Math.ceil(H),u-1),B=H-X,V=1-B,K=N+X*o[2],Q=N+M*o[2],ee=I+X*o[2],ie=I+M*o[2],se=L*V,ge=L*B,fe=F*V,pe=F*B;for(let Ne=0;Ne<c;Ne++){let De=v[x++];f[K+Ne]+=De*se,f[Q+Ne]+=De*ge,f[ee+Ne]+=De*fe,f[ie+Ne]+=De*pe}}}}return n.makeTensorInfo([l,u,d,c],"float32",f)}var xve={kernelName:sp,backendName:"cpu",kernelFunc:vve};function wve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;Ce(a,"resizeNearestNeighbor");let l=k.computeStrides(a.shape),[d,u]=o,[c,h,p,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(c*d*u*f),b=[i&&d>1?h-1:h,i&&u>1?p-1:p],y=[i&&d>1?d-1:d,i&&u>1?u-1:u],v=b[0]/y[0],x=b[1]/y[1],w=0;for(let $=0;$<c;$++){let C=$*l[0];for(let E=0;E<d;E++){let A=s?v*(E+.5):v*E,R=Math.min(h-1,i?Math.round(A):Math.floor(A));s&&(R=Math.max(0,R));let N=C+R*l[1];for(let I=0;I<u;I++){let F=s?x*(I+.5):x*I,L=Math.min(p-1,i?Math.round(F):Math.floor(F));s&&(L=Math.max(0,L));let P=N+L*l[2];for(let H=0;H<f;H++){let X=m[P+H];g[w++]=X}}}}return n.makeTensorInfo([c,d,u,f],a.dtype,g)}var kve={kernelName:dd,backendName:"cpu",kernelFunc:wve};function Sve(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;Ce([i,a],"resizeNearestNeighborGrad");let o=k.computeStrides(a.shape),l=k.computeStrides(i.shape),[d,u,c,h]=a.shape,[,p,f]=i.shape,m=new Float32Array(d*u*c*h),g=n.data.get(i.dataId).values,b=[s&&p>1?u-1:u,s&&f>1?c-1:c],y=[s&&p>1?p-1:p,s&&f>1?f-1:f],v=b[0]/y[0],x=b[1]/y[1],w=1/v,$=1/x,C=Math.ceil(w)*2+2,E=Math.ceil($)*2+2;for(let A=0;A<d;A++){let R=A*o[0];for(let N=0;N<u;N++){let I=R+N*o[1],F=Math.floor(N*w),L=Math.floor(F-C/2);for(let P=0;P<c;P++){let H=I+P*o[2],X=Math.floor(P*$),M=Math.floor(X-E/2);for(let B=0;B<h;B++){let V=0;for(let K=0;K<C;K++){let Q=K+L;if(Q<0||Q>=p)continue;let ee=R+Q*l[1],ie=Q*v,se=Math.min(u-1,s?Math.round(ie):Math.floor(ie));if(N===se)for(let ge=0;ge<E;ge++){let fe=ge+M;if(fe<0||fe>=f)continue;let pe=ee+fe*l[2],Ne=fe*x,De=Math.min(c-1,s?Math.round(Ne):Math.floor(Ne));P===De&&(V+=g[pe+B])}}m[H+B]=V}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}var Ive={kernelName:ip,backendName:"cpu",kernelFunc:Sve};function $ve(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r;Ce(a,"reverse");let s=a.shape.length,o=k.parseAxisParam(i,a.shape);if(s===0)return Ji({inputs:{x:a},backend:n});let l=new mn(a.shape,a.dtype),d=n.bufferSync(a);for(let u=0;u<l.size;u++){let c=l.indexToLoc(u),h=c.slice();o.forEach(p=>h[p]=a.shape[p]-1-h[p]),l.set(d.get(...h),...c)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}var Cve={kernelName:pd,backendName:"cpu",kernelFunc:$ve},Eve={kernelName:wp,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:i,center:s}=t,o=n,l=k.getTypedArrayFromDType(r.dtype,k.sizeFromShape(r.shape)),[d,u,c,h]=r.shape,[p,f]=T.getImageCenter(s,u,c),m=255,g=Math.sin(a),b=Math.cos(a),y=o.data.get(r.dataId).values;for(let v=0;v<d;v++){let x=v*c*u*h;for(let w=0;w<u;w++){let $=w*(c*h);for(let C=0;C<c;C++){let E=C*h;for(let A=0;A<h;A++){let R=[d,w,C,A],N=R[2],I=R[1],F=(N-p)*b-(I-f)*g,L=(N-p)*g+(I-f)*b;F=Math.round(F+p),L=Math.round(L+f);let P=i;if(typeof i!="number"&&(A===3?P=m:P=i[A]),F>=0&&F<c&&L>=0&&L<u){let X=L*(c*h),M=F*h,B=x+X+M+A;P=y[B]}let H=x+$+E+A;l[H]=P}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Tve=bt(fd,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),Nve={kernelName:fd,backendName:"cpu",kernelFunc:Tve};function _ve(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:d,strides:u,outputSize:c}=T.calculateShapes(i,a,s),h=!0,p=n.bufferSync(a),f=n.bufferSync(i),m=Il(p,f,s,c,d,l,o,u,0,h);return n.makeTensorInfo(s,m.dtype,m.values)}var Ave={kernelName:op,backendName:"cpu",kernelFunc:_ve};function Rve(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function Dve(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}function Fve(e,t,n,r,a,i){let s=k.getArrayFromDType("int32",n*a);for(let o=0;o<n;++o){let l=e.slice(o*r,(o+1)*r),d=o*a;for(let u=0;u<a;++u)s[d+u]=i==="left"?Rve(l,t[u+d]):Dve(l,t[u+d])}return s}function Mve(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=Fve(o,l,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",d)}var Ove={kernelName:up,backendName:"cpu",kernelFunc:Mve};function Lve(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t;Ce([r,a,i],"select");let s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,u=Ra(a.dtype,i.dtype),c=k.makeZerosTypedArray(k.sizeFromShape(a.shape),u),h=0,p=s===0||s>1||a.shape.length===1?1:k.sizeFromShape(a.shape.slice(1));for(let f=0;f<o.length;f++)for(let m=0;m<p;m++)o[f]===1?c[h++]=l[f]:c[h++]=d[f];return n.makeTensorInfo(a.shape,u,c)}var Pve={kernelName:dp,backendName:"cpu",kernelFunc:Lve},zve=T.SELU_SCALEALPHA,Bve=T.SELU_SCALE,Wve=bt(gd,e=>e>=0?Bve*e:zve*(Math.exp(e)-1)),Vve={kernelName:gd,backendName:"cpu",kernelFunc:Wve},Uve=bt(vd,e=>e<0?-1:e>0?1:0),Hve={kernelName:vd,backendName:"cpu",kernelFunc:Uve},jve=bt(bd,e=>Math.sin(e)),Gve={kernelName:bd,backendName:"cpu",kernelFunc:jve},qve=bt(yd,e=>Math.sinh(e)),Kve={kernelName:yd,backendName:"cpu",kernelFunc:qve},Xve=11920928955078125e-23,ER=Math.log(Xve)+2,Yve=bt(wd,e=>{let t=e>-ER,n=e<ER,r=Math.exp(e),a;return n?a=r:t?a=e:a=Math.log(1+r),a}),Zve={kernelName:wd,backendName:"cpu",kernelFunc:Yve};function Qve(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;Ce([a],"spaceToBatchND");let o=k.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);let d=K4.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=T.getReshaped(d.shape,i,o,!1),c=T.getPermuted(u.length,i.length,!1),h=T.getReshapedPermuted(d.shape,i,o,!1),p=Dt({inputs:{x:d},backend:n,attrs:{shape:u}}),f=Hr({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Dt({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}var Jve={kernelName:hp,backendName:"cpu",kernelFunc:Qve};function e0e(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(r.shape.length!==2)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(a.shape.length!==1)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(s.shape.length!==0)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));let o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values[0],[c,h,p,f,m]=I4(o,r.shape,r.dtype,l,a.dtype,d,u);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var t0e={kernelName:Jm,backendName:"cpu",kernelFunc:e0e};function n0e(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[d,u,c]=$4(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,d),n.makeTensorInfo([c.length],i.dtype,new Int32Array(c))]}var r0e={kernelName:fp,backendName:"cpu",kernelFunc:n0e};function a0e(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[d,u]=_E(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,d)}var i0e={kernelName:eg,backendName:"cpu",kernelFunc:a0e};function s0e(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[d,u]=_E(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,d)}var o0e={kernelName:tg,backendName:"cpu",kernelFunc:s0e};function l0e(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:d,sliceSize:u,strides:c,outputSize:h}=T.calculateShapes(i,a,o),p=!1,f=n.bufferSync(a),m;switch(i.dtype){case"bool":{let g=n.bufferSync(i),b=!!n.data.get(s.dataId).values[0];m=Il(f,g,o,h,u,d,l,c,b,p);break}case"float32":{let g=n.bufferSync(i),b=n.data.get(s.dataId).values[0];m=Il(f,g,o,h,u,d,l,c,b,p);break}case"int32":{let g=n.bufferSync(i),b=n.data.get(s.dataId).values[0];m=Il(f,g,o,h,u,d,l,c,b,p);break}case"string":{let g=n.bufferSync(i),b=k.decodeString(n.data.get(s.dataId).values[0]);m=Il(f,g,o,h,u,d,l,c,b,p);break}default:throw new Error("Unsupported type ".concat(i.dtype))}return n.makeTensorInfo(o,m.dtype,m.values)}var u0e={kernelName:mp,backendName:"cpu",kernelFunc:l0e};function d0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=k.parseAxisParam(s,a.shape)[0],l=T.prepareSplitSize(a,i,o),d=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(c=>{let h=[...u];h[o]=c;let p=tu({inputs:{x:a},backend:n,attrs:{begin:d,size:h}});return d[o]+=c,p})}var c0e={kernelName:pp,backendName:"cpu",kernelFunc:d0e},h0e={kernelName:ng,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e,r=t;Ce(n,"square");let a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let s=0;s<a.length;++s){let o=a[s];i[s]=o*o}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},p0e=bt(Uo,(e,t)=>{let n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),f0e={kernelName:Uo,backendName:"cpu",kernelFunc:p0e};function m0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:d,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:h}=r;Ce(a,"stridedSlice");let{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:v,strides:x}=En.sliceInfo(a.shape,i,s,o,l,d,u,c,h),w;if(m)w=Dt({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||b){k.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let $=En.computeOutShape(y,v,x),C=tu({inputs:{x:a},backend:n,attrs:{begin:y,size:$}});w=Dt({inputs:{x:C},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(C)}else{let $=n.bufferSync(a),C=T4(p,$,x,y);w=n.makeTensorInfo(f,C.dtype,C.values)}return w}var g0e={kernelName:gp,backendName:"cpu",kernelFunc:m0e};function b0e(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:d}=r,{data:u,dataSplits:c}=t,h=n.data.get(u.dataId).values,p=n.data.get(c.dataId).values,[f,m]=AE(h,p,a,i,s,o,l,d);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(c.shape,"int32",m)]}var y0e={kernelName:ag,backendName:"cpu",kernelFunc:b0e};function v0e(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(s.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));let o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values[0],[d,u,c]=RE(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",d),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}var x0e={kernelName:ig,backendName:"cpu",kernelFunc:v0e};function w0e(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let s=n.data.get(i.dataId).values,o=DE(s,a);return n.makeTensorInfo(i.shape,"int32",o)}var k0e={kernelName:sg,backendName:"cpu",kernelFunc:w0e},S0e=bt(Ed,e=>Math.tan(e)),I0e={kernelName:Ed,backendName:"cpu",kernelFunc:S0e},$0e=bt(Td,e=>Math.tanh(e)),C0e={kernelName:Td,backendName:"cpu",kernelFunc:$0e};function E0e(e){let{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:i}=t,{sliceRank:s,numUpdates:o,sliceSize:l,strides:d,outputSize:u}=T.calculateShapes(i,a,r.shape),c=!1,h=n.bufferSync(a),p=n.bufferSync(i),f=n.bufferSync(r),m=Il(h,p,r.shape,u,l,o,s,d,f,c);return n.makeTensorInfo(r.shape,m.dtype,m.values)}var T0e={kernelName:lp,backendName:"cpu",kernelFunc:E0e};function N0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;Ce(a,"tile");let s=_4(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}var _0e={kernelName:Vo,backendName:"cpu",kernelFunc:N0e};function A0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r;Ce(a,"topk");let o=n.data.get(a.dataId).values,[l,d]=R4(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(d.shape,d.dtype,d.values)]}var R0e={kernelName:bp,backendName:"cpu",kernelFunc:A0e};function D0e(e){let{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:d}=n,[u,c,h,p]=a.shape,[f,m]=d!=null?d:[c,h],g=[u,f,m,p],b=k.computeStrides(a.shape),y=b[0],v=b[1],x=b[2],w=k.computeStrides(g),$=w[0],C=w[1],E=w[2],A=k.getTypedArrayFromDType(a.dtype,k.sizeFromShape(g));A.fill(l);let R=r.data.get(a.dataId).values,N=r.data.get(i.dataId).values;for(let I=0;I<u;++I){let F=i.shape[0]===1?N:N.subarray(I*8,I*8+8);for(let L=0;L<f;++L)for(let P=0;P<m;++P)for(let H=0;H<p;++H){let X,M=F[6]*P+F[7]*L+1;if(M===0)continue;let B=(F[0]*P+F[1]*L+F[2])/M,V=(F[3]*P+F[4]*L+F[5])/M,K=TR(B,h,o),Q=TR(V,c,o);switch(s){case"nearest":X=z0e(R,c,h,y,v,x,I,Q,K,H,l);break;case"bilinear":X=B0e(R,c,h,y,v,x,I,Q,K,H,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(s))}let ee=I*$+L*C+P*E+H;A[ee]=X}return r.makeTensorInfo(g,a.dtype,A)}return{dataId:r.write(A,g,a.dtype),shape:a.shape,dtype:a.dtype}}var F0e={kernelName:yp,backendName:"cpu",kernelFunc:D0e};function TR(e,t,n){switch(n){case"reflect":return M0e(e,t);case"wrap":return O0e(e,t);case"nearest":return P0e(e,t);case"constant":default:return L0e(e)}}function M0e(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{let r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return k.clamp(0,n,t-1)}function O0e(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{let r=t-1;n-=t*Math.trunc(n/r)}return k.clamp(0,n,t-1)}function L0e(e,t){return e}function P0e(e,t){return k.clamp(0,e,t-1)}function ff(e,t,n,r,a,i,s,o,l,d,u){let c=s*r+o*a+l*i+d;return 0<=o&&o<t&&0<=l&&l<n?e[c]:u}function z0e(e,t,n,r,a,i,s,o,l,d,u){let c=Math.round(o),h=Math.round(l);return ff(e,t,n,r,a,i,s,c,h,d,u)}function B0e(e,t,n,r,a,i,s,o,l,d,u){let c=Math.floor(o),h=Math.floor(l),p=c+1,f=h+1,m=(f-l)*ff(e,t,n,r,a,i,s,c,h,d,u)+(l-h)*ff(e,t,n,r,a,i,s,c,f,d,u),g=(f-l)*ff(e,t,n,r,a,i,s,p,h,d,u)+(l-h)*ff(e,t,n,r,a,i,s,p,f,d,u);return(p-o)*m+(o-c)*g}function W0e(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;Ce(i,"unique");let s=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:d}=ME(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([d.length],"int32",d)]}var V0e={kernelName:og,backendName:"cpu",kernelFunc:W0e};function U0e(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a.shape.length,o=a.shape[i],l=new Array(s-1),d=0;for(let p=0;p<s;p++)p!==i&&(l[d++]=a.shape[p]);let u=new Array(s).fill(0),c=a.shape.slice();c[i]=1;let h=new Array(o);for(let p=0;p<h.length;p++){u[i]=p;let f=tu({inputs:{x:a},backend:n,attrs:{begin:u,size:c}});h[p]=Dt({inputs:{x:f},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(f)}return h}var H0e={kernelName:vp,backendName:"cpu",kernelFunc:U0e};function j0e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r;Ce(a,"unsortedSegmentSum");let o=a.shape.length,l=i.shape.length,d=[],u=[],c=o-l,h=i;for(let f=0;f<c;++f){let m=Cv({inputs:{input:h},backend:n,attrs:{dim:f+1}});h=m,u.push(m)}for(let f=0;f<s;++f){let m=k.createScalarValue(f,"int32"),g=n.makeTensorInfo([],"int32",m),b=JB({inputs:{a:g,b:h},backend:n}),y=Ro({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),v=Ux({inputs:{a:y,b:a},backend:n}),x=zg({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});d.push(x),u.push(g),u.push(b),u.push(y),u.push(v),u.push(x)}let p=q4({inputs:d,backend:n,attrs:{axis:0}});return u.forEach(f=>n.disposeIntermediateTensorInfo(f)),p}var G0e={kernelName:lg,backendName:"cpu",kernelFunc:j0e},q0e=[Bme,xfe,Vme,Hme,Cfe,Gme,Kme,Yme,Qme,ege,nge,age,sge,uge,cge,fge,gge,yge,xge,Pme,kge,Ige,Cge,Tfe,Tge,Ife,_fe,_ge,wfe,Rge,Fge,Mge,Lge,zge,Wge,Uge,jge,qge,Xge,Zge,Jge,tbe,rbe,ibe,sbe,lbe,dbe,hbe,pbe,fbe,mbe,bbe,xbe,Ame,kbe,Afe,_be,Rfe,Abe,Ffe,Lbe,Pbe,Bbe,Ofe,Pfe,Vbe,Hbe,Gbe,Kbe,Bfe,Vfe,kfe,Ybe,Dge,Qbe,eye,nye,Rme,Hfe,Gfe,aye,Kfe,sye,uye,cye,fye,gye,yye,vye,Yfe,wye,Sye,$ye,Eye,Nye,Aye,Dye,Qfe,Mye,Pye,Vye,eme,nme,jye,Kye,Zye,ame,Jye,tve,nve,K4,sve,Fme,ome,lve,dve,hve,fve,Sfe,cS,gve,Mme,Ome,Lme,yve,xve,kve,Ive,Cve,Eve,Nve,mme,Ave,Ove,Pve,Vve,bme,Hve,Gve,Kve,yme,Bye,Zve,Jve,t0e,r0e,i0e,o0e,u0e,c0e,wme,h0e,Sme,$me,f0e,g0e,y0e,x0e,k0e,Nme,ybe,I0e,C0e,T0e,_0e,R0e,F0e,ime,V0e,H0e,G0e,eve];for(let e of q0e)ug(e);var X4={};We(X4,{assertNotComplex:()=>Fp,bindCanvasToFramebuffer:()=>axe,bindColorTextureToFramebuffer:()=>ly,bindTextureToProgramUniformSampler:()=>cW,bindTextureUnit:()=>lW,bindVertexBufferToProgramAttribute:()=>pS,callAndCheck:()=>ye,canBeRepresented:()=>Z4,createFragmentShader:()=>eW,createFramebuffer:()=>oW,createProgram:()=>tW,createStaticIndexBuffer:()=>aW,createStaticVertexBuffer:()=>rW,createTexture:()=>iW,createVertexShader:()=>J4,getBatchDim:()=>nu,getExtensionOrThrow:()=>mf,getFramebufferErrorMessage:()=>hW,getMaxTexturesInShader:()=>gW,getNumChannels:()=>nxe,getProgramUniformLocation:()=>dW,getProgramUniformLocationOrThrow:()=>uW,getRowsCols:()=>ru,getShapeAs3D:()=>bf,getTextureShapeFromLogicalShape:()=>fW,getWebGLDisjointQueryTimerVersion:()=>bW,getWebGLErrorMessage:()=>Q4,getWebGLMaxTextureSize:()=>mW,hasExtension:()=>Ea,isCapableOfRenderingToFloatTexture:()=>yW,isDownloadFloatTextureEnabled:()=>vW,isReshapeFree:()=>vm,isWebGLFenceEnabled:()=>xW,isWebGLVersionEnabled:()=>mS,linkProgram:()=>nW,logShaderSourceAndInfoLog:()=>BE,resetMaxTextureSize:()=>ixe,resetMaxTexturesInShader:()=>sxe,unbindColorTextureFromFramebuffer:()=>fS,unbindTextureUnit:()=>rxe,validateFramebuffer:()=>gf,validateProgram:()=>oy,validateTextureSize:()=>sW});var gl={},Lb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Y4(e,t){gl[e]=t}function Ai(e,t){if(!(e in gl)||t!=null){let r=X0e(e,t);if(r!==null)gl[e]=r;else return console.log("Could not get context for WebGL version",e),null}let n=gl[e];return n==null||n.isContextLost()?(delete gl[e],Ai(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),gl[e])}function K0e(e){if(!Z().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function X0e(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=t==null?K0e(e):t;return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete gl[e]},!1),Z().getBool("SOFTWARE_WEBGL_ENABLED")&&(Lb.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",Lb)||n.getContext("experimental-webgl",Lb):n.getContext("webgl2",Lb)}var ym;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(ym||(ym={}));var Ca;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Ca||(Ca={}));var Xn;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Xn||(Xn={}));function Bg(e,t){return[t,e]}function Y0e(e,t){return e*t}function Pb(e){let t=k.sizeFromShape(e),n=Math.ceil(t/4);return k.sizeToSquarishShape(n)}function Dp(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Z0e(e,t){let[n,r]=Dp(e,t);return n*r*4}function zE(e,t){let n=e,r,a,i,s,o,l,d,u,c,h;return Z().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,s=n.RGBA32F,o=n.RED,d=4,u=1,c=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=e.RGBA,a=e.RGBA,i=e.RGBA,s=n.RGBA,o=e.RGBA,d=4,u=4,c=t!=null?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:d,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:h}}function ye(e,t){let n=t();return Z().getBool("DEBUG")&&Q0e(e),n}function Q0e(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Q4(e,t))}var J0e=596e-10,exe=65504;function Z4(e){return!!(Z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||J0e<Math.abs(e)&&Math.abs(e)<exe)}function Q4(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function mf(e,t){return zs(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function J4(e,t){let n=zs(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ye(e,()=>e.shaderSource(n,t)),ye(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function eW(e,t){let n=zs(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ye(e,()=>e.shaderSource(n,t)),ye(e,()=>e.compileShader(n)),Z().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw BE(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var txe=/ERROR: [0-9]+:([0-9]+):/g;function BE(e,t){let n=txe.exec(t);if(n==null){console.log("Couldn't parse line number in error: ".concat(t)),console.log(e);return}let r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,s=a.map((c,h)=>k.rightPad((h+1).toString(),i)+c),o=0;for(let c=0;c<s.length;c++)o=Math.max(s[c].length,o);let l=s.slice(0,r-1),d=s.slice(r-1,r),u=s.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(k.rightPad(d[0],o)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function tW(e){return zs(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function nW(e,t){if(ye(e,()=>e.linkProgram(t)),!Z().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function oy(e,t){if(ye(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function rW(e,t){let n=zs(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return ye(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),ye(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function aW(e,t){let n=zs(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return ye(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),ye(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function nxe(){return Z().getNumber("WEBGL_VERSION")===2?1:4}function iW(e){return zs(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function sW(e,t){let n=Z().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){let r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function oW(e){return zs(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function pS(e,t,n,r,a,i,s){let o=e.getAttribLocation(t,n);return o===-1?!1:(ye(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),ye(e,()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,i,s)),ye(e,()=>e.enableVertexAttribArray(o)),!0)}function lW(e,t,n){pW(e,n),ye(e,()=>e.activeTexture(e.TEXTURE0+n)),ye(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function rxe(e,t){pW(e,t),ye(e,()=>e.activeTexture(e.TEXTURE0+t)),ye(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function uW(e,t,n){return zs(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function dW(e,t,n){return e.getUniformLocation(t,n)}function cW(e,t,n,r){ye(e,()=>lW(e,t,r)),ye(e,()=>e.uniform1i(n,r))}function axe(e){ye(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ye(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),ye(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function ly(e,t,n){ye(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),ye(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function fS(e,t){ye(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),ye(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function gf(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+hW(e,t))}function hW(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function zs(e,t,n){let r=ye(e,()=>t());if(r==null)throw new Error(n);return r}function pW(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function nu(e,t=2){return k.sizeFromShape(e.slice(0,e.length-t))}function ru(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function bf(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[nu(e),...ru(e)]),t}function fW(e,t=!1){let n=Z().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Z().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Z().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((o,l)=>l>=e.length-2?k.nearestLargerEven(e[l]):e[l]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=k.squeezeShape(e).newShape);let a=k.sizeFromShape(e),i=null;e.length<=1&&a<=n?i=[1,a]:e.length===2&&e[0]<=n&&e[1]<=n?i=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(i==null||s)if(t){let o=nu(e),l=2,d=2;e.length&&([l,d]=ru(e)),a=o*(l/2)*(d/2),i=k.sizeToSquarishShape(a).map(u=>u*2)}else i=k.sizeToSquarishShape(a);return i}function zb(e){return e%2===0}function vm(e,t){if(e=e.slice(-2),t=t.slice(-2),k.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||zb(n)&&zb(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&zb(e[0])&&zb(t[0])}var uy,dy;function mW(e){if(uy==null){let t=Ai(e);uy=t.getParameter(t.MAX_TEXTURE_SIZE)}return uy}function ixe(){uy=null}function sxe(){dy=null}function gW(e){if(dy==null){let t=Ai(e);dy=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,dy)}function bW(e){if(e===0)return 0;let t,n=Ai(e);return Ea(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:Ea(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Ea(e,t){return e.getExtension(t)!=null}function mS(e){try{if(Ai(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function yW(e){if(e===0)return!1;let t=Ai(e);if(e===1){if(!Ea(t,"OES_texture_float"))return!1}else if(!Ea(t,"EXT_color_buffer_float"))return!1;return gS(t)}function vW(e){if(e===0)return!1;let t=Ai(e);if(e===1){if(!Ea(t,"OES_texture_float")||!Ea(t,"WEBGL_color_buffer_float"))return!1}else{if(Ea(t,"EXT_color_buffer_float"))return gS(t);let n="EXT_color_buffer_half_float";if(Ea(t,n)){let r=t.getExtension(n);return oxe(t,r)}return!1}return gS(t)}function gS(e){let t=zE(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);let r=1,a=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,r,a,0,t.textureFormatFloat,t.textureTypeFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(i),s}function oxe(e,t){let n=zE(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);let a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),o}function xW(e){return e!==2?!1:Ai(e).fenceSync!=null}function Fp(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&k.assert(n.dtype!=="complex64",()=>"".concat(t," does not support complex64 tensors in the WebGL backend."))})}var Te=Z();Te.registerFlag("HAS_WEBGL",()=>Te.getNumber("WEBGL_VERSION")>0);Te.registerFlag("WEBGL_VERSION",()=>mS(2)?2:mS(1)?1:0);Te.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Te.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Te.get("WEBGL_VERSION")===2);Te.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Te.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Te.registerFlag("WEBGL_PACK",()=>Te.getBool("HAS_WEBGL"));Te.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CLIP",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_REDUCE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_LAZILY_UNPACK",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_CONV_IM2COL",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>mW(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>gW(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=Te.getNumber("WEBGL_VERSION");return e===0?0:bW(e)});Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Te.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!hg.isMobile());Te.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>yW(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Te.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Te.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Te.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>vW(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_FENCE_API_ENABLED",()=>xW(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Te.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Te.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))});Te.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>hg.isMobile()?1:-1,e=>{if(e<0&&e!==-1)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))});Te.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Te.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Te.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Te.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Te.registerFlag("WEBGL_EXP_CONV",()=>!1);Te.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Te.getBool("IS_TEST"));Te.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Te.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Te.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Te.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function Dr(){let e,t,n,r,a,i,s,o,l,d;return Z().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=Z().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",d="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",d="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:d}}function Od(e,t,n="index"){let r=k.computeStrides(t);return r.map((a,i)=>{let s="int ".concat(e[i]," = ").concat(n," / ").concat(a),o=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * ").concat(a):"index -= ".concat(e[i]," * ").concat(a);return"".concat(s,"; ").concat(o,";")}).join("")}function Hx(e,t,n="index"){let r=k.computeStrides(t);return r.map((a,i)=>{let s="int ".concat(e[i]," = ").concat(n," / outShapeStrides[").concat(i,"]"),o=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * outShapeStrides[").concat(i,"]"):"index -= ".concat(e[i]," * outShapeStrides[").concat(i,"]");return"".concat(s,"; ").concat(o,";")}).join("")}function lxe(e,t){let n=e.length,r=e.map(i=>"".concat(t,"[").concat(i,"]")),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function uxe(e,t,n="index"){let r=e.map((i,s)=>s),a=lxe(r,t);return a.map((i,s)=>{let o="int ".concat(e[s]," = ").concat(n," / ").concat(a[s]),l=s===a.length-1?"int ".concat(e[s+1]," = ").concat(n," - ").concat(e[s]," * ").concat(a[s]):"index -= ".concat(e[s]," * ").concat(a[s]);return"".concat(o,"; ").concat(l,";")}).join("")}function WE(e){let t=k.computeStrides(e).map(n=>n.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}function VE(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}var wW="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:kW}=T;function dxe(e,t,n){let r=[];if(e.forEach(h=>{let p=k.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push("uniform float ".concat(h.name).concat(p>1?"[".concat(p,"]"):"",";")):(r.push("uniform sampler2D ".concat(h.name,";")),r.push("uniform int offset".concat(h.name,";"))),n.enableShapeUniforms){let{uniformShape:f}=UE(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(f.length){case 1:r.push("uniform int ".concat(h.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(h.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(h.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(h.name,"Shape;"));break}r.push("uniform ivec2 ".concat(h.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push("uniform ".concat(h.type," ").concat(h.name).concat(h.arrayIndex?"[".concat(h.arrayIndex,"]"):"",";"))});let a=r.join("\n"),i=e.map(h=>cxe(h,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),s=t.texShape,o=Dr(),l=fxe(o),d,u,c=bxe(o);return t.isPacked?(d=hxe(t.logicalShape,s,n.enableShapeUniforms),u=gxe(o)):(d=pxe(t.logicalShape,s,n.enableShapeUniforms),u=mxe(o)),n.packedInputs&&(c+=wxe),[c,l,u,a,d,i,n.userCode].join("\n")}function Mp(e,t=!1){let n=e.shapeInfo.logicalShape;switch(n.length){case 0:return Dxe(e,t);case 1:return Mxe(e,t);case 2:return Lxe(e,t);case 3:return zxe(e,t);case 4:return Wxe(e,t);case 5:return Vxe(e);case 6:return Uxe(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function SW(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return Rxe(e);case 1:return Fxe(e,t);case 2:return Oxe(e,t);case 3:return Pxe(e,t);default:return Bxe(e,t)}}function cxe(e,t,n=!1,r){let a="";n?a+=SW(e,r):a+=Mp(e,r);let i=e.shapeInfo.logicalShape,s=t.logicalShape;return i.length<=s.length&&(n?a+=Hxe(e,t):a+=jxe(e,t)),a}function hxe(e,t,n){switch(e.length){case 0:return IW();case 1:return kxe(e,t,n);case 2:return _xe(e,t,n);case 3:return Ixe(e,t,n);default:return Cxe(e,t,n)}}function pxe(e,t,n){switch(e.length){case 0:return IW();case 1:return Sxe(e,t,n);case 2:return Axe(e,t,n);case 3:return $xe(e,t,n);case 4:return Exe(e,t,n);case 5:return Txe(e,t);case 6:return Nxe(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}function fxe(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}function mxe(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}function gxe(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}function bxe(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(yxe,"\n    ").concat(vxe,"\n    ").concat(xxe,"\n  ")}var yxe="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",vxe="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",xxe="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",wxe="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function IW(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function kxe(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):r[1]===1?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}function Sxe(e,t,n){return t[0]===1?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):t[1]===1?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}function Ixe(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}function $xe(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(Hx(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");let r=Od(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}function Cxe(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),s=i,o="",l="b, r, c";for(let d=2;d<e.length-1;d++)s*=e[e.length-d-1],o="\n      int b".concat(d," = index / ").concat(s,";\n      index -= b").concat(d," * ").concat(s,";\n    ")+o,l="b".concat(d,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}function Exe(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(Hx(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");let r=Od(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}function Txe(e,t){let n=Od(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}function Nxe(e,t){let n=Od(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}function _xe(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(k.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");let a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}function Axe(e,t,n){return k.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):e[1]===1?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):e[0]===1?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}function Ld(e){return"offset".concat(e)}function Rxe(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Dr();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}function Dxe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");let[a,i]=e.shapeInfo.texShape;if(a===1&&i===1)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");let s=Ld(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");let[o,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Fxe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Dr();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");let s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}function Mxe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(Op(e),"\n      }\n    ");let a=e.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");let o=Ld(n);return s===1?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):i===1?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(s,", index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Oxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=i[0],o=i[1],l=Dr();if(i!=null&&k.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(s,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");let d=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(d[0],", ").concat(d[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}function Lxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(i!=null&&k.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");let h=i[0],p=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(p,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}let{newShape:s,keptDims:o}=k.squeezeShape(n),l=s;if(l.length<n.length){let h=Lp(e,l),p=["row","col"];return"\n      ".concat(Mp(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(Pp(p,o),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Op(e),"\n      }\n    ");let d=i[0],u=i[1],c=Ld(r);return u===1?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(c,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(c,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):d===1?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(c,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(c,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(c,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(c,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function Pxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){let h=n.slice(1),p=[1,2],f=Lp(e,h),m=["b","row","col"];return"\n        ".concat(SW(f,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(Pp(m,p),");\n        }\n      ")}let o=Dr();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ");let l=s[0],d=s[1],u=Math.ceil(n[2]/2),c=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(d,", ").concat(c,", ").concat(u,", b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ")}function zxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=k.squeezeShape(n),d=o;if(d.length<n.length){let m=Lp(e,d),g=["row","col","depth"];return"\n        ".concat(Mp(m,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(Pp(g,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(s,", 1)));\n        ").concat(Op(e),"\n      }\n    ");let u=e.shapeInfo.texShape,c=u[0],h=u[1],p=e.shapeInfo.flatOffset;if(h===i&&p==null)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(c,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===s&&p==null)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");let f=Ld(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(s," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(c,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function Bxe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Dr();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");let i=e.shapeInfo.logicalShape,s=i.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],d=l[0],u=l[1],c=Math.ceil(i[s-1]/2),h=c*Math.ceil(i[s-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(c," + (col / 2)");for(let m=2;m<s-1;m++)p="int b".concat(m,", ")+p,h*=i[s-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(d,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}function Wxe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:l,keptDims:d}=k.squeezeShape(n);if(l.length<n.length){let y=Lp(e,l),v=["row","col","depth","depth2"];return"\n      ".concat(Mp(y,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(Pp(v,d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(o,", ").concat(s,", ").concat(i,", 1)));\n        ").concat(Op(e),"\n      }\n    ");let u=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,h=c[0],p=c[1],f="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===o&&u==null)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===i&&u==null)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");let b=Ld(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(m,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function Vxe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,s=t[2]*i,o=t[1]*s,{newShape:l,keptDims:d}=k.squeezeShape(t);if(l.length<t.length){let m=Lp(e,l),g=["row","col","depth","depth2","depth3"];return"\n      ".concat(Mp(m),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Pp(g,d),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(o,", ").concat(s,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(Op(e),"\n      }\n    ");let u=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,h=c[0],p=c[1];if(p===o&&u==null)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&u==null)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");let f=Ld(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Uxe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=k.squeezeShape(t);if(a.length<t.length){let g=Lp(e,a),b=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(Mp(g),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Pp(b,i),");\n      }\n    ")}let s=t[5],o=t[4]*s,l=t[3]*o,d=t[2]*l,u=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(d,", ").concat(l,", ").concat(o,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(Op(e),"\n      }\n    ");let c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];if(f===u&&c==null)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(l,", ").concat(o,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===s&&c==null)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");let m=Ld(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(d," + depth * ").concat(l," +\n          depth2 * ").concat(o," + depth3 * ").concat(s," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Op(e){let t=e.name,n=k.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Hxe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,o=kW(e.shapeInfo.logicalShape,t.logicalShape),l=It(s),d=s-i,u,c=["x","y","z","w","u","v"];i===0?u="":s<2&&o.length>=1?u="coords = 0;":u=o.map(g=>"coords.".concat(c[g+d]," = 0;")).join("\n");let h="";s<2&&i>0?h="coords":h=e.shapeInfo.logicalShape.map((g,b)=>"coords.".concat(c[b+d])).join(", ");let p="return outputValue;",f=k.sizeFromShape(e.shapeInfo.logicalShape)===1,m=k.sizeFromShape(t.logicalShape)===1;if(i===1&&!f&&!m)p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";else if(f&&!m)s===1?p="\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":p="\n        return vec4(outputValue.x);\n      ";else if(o.length){let g=i-2,b=i-1;o.indexOf(g)>-1&&o.indexOf(b)>-1?p="return vec4(outputValue.x);":o.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return"\n    vec4 ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function jxe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&e.shapeInfo.flatOffset==null&&k.arraysEqual(s,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");let d=It(l),u=kW(e.shapeInfo.logicalShape,t.logicalShape),c=l-o,h,p=["x","y","z","w","u","v"];o===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(m=>"coords.".concat(p[m+c]," = 0;")).join("\n");let f="";return l<2&&o>0?f="coords":f=e.shapeInfo.logicalShape.map((m,g)=>"coords.".concat(p[g+c])).join(", "),"\n    float ".concat(a,"() {\n      ").concat(d," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}function It(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function UE(e,t,n){let{newShape:r,keptDims:a}=k.squeezeShape(t),i=t.length,s=e&&i===3&&t[0]===1,o=s?t.slice(1):r,l=!e&&i>1&&!k.arraysEqual(t,n)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:a}}function Lp(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Pp(e,t){return t.map(n=>e[n]).join(", ")}function Gxe(e,t,n,r){let a=n.map((u,c)=>{let h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:t.variableNames[c],shapeInfo:h}}),i=a.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=dxe(a,s,t),l=eW(e.gl,o),d=e.createProgram(l);return Z().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:d,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(d),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:d,inShapeInfos:i,outShapeInfo:s},$W(e,t,d)))}function $W(e,t,n){let r=[],a=[],i,s,o,l=null,d=null;d=e.getUniformLocation(n,"NAN",!1),Z().getNumber("WEBGL_VERSION")===1&&(l=e.getUniformLocation(n,"INFINITY",!1));let u=!1;for(let c of t.variableNames){let h={name:c,uniform:e.getUniformLocation(n,c,u),offset:e.getUniformLocation(n,"offset".concat(c),u)};t.enableShapeUniforms&&(h.shape=e.getUniformLocation(n,"".concat(c,"Shape"),u),h.texShape=e.getUniformLocation(n,"".concat(c,"TexShape"),u)),r.push(h)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",u),o=e.getUniformLocation(n,"outShapeStrides",u),s=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(let c of t.customUniforms)a.push(e.getUniformLocation(n,c.name,u));return{variablesLocations:r,customUniformLocations:a,infLoc:l,nanLoc:d,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}}function NR(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((n,r)=>{let a=n.logicalShape,i=t[r],s=i.shape;if(!k.arraysEqual(a,s))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(a," and ").concat(s," must match"));if(n.isUniform&&i.isUniform)return;let o=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!k.arraysEqual(o,l))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(o," and ").concat(l," must match"))})}function qxe(e,t,n,r,a){t.program.enableShapeUniforms||(NR(t.inShapeInfos,n),NR([t.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),Z().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){let d=n[l],{uniform:u,offset:c,shape:h,texShape:p}=t.variablesLocations[l];if(h){let{uniformShape:f}=UE(t.program.packedInputs,d.shape,d.texData.texShape);switch(f.length){case 1:e.gl.uniform1iv(h,new Int32Array(f));break;case 2:e.gl.uniform2iv(h,new Int32Array(f));break;case 3:e.gl.uniform3iv(h,new Int32Array(f));break;case 4:e.gl.uniform4iv(h,new Int32Array(f));break}}if(p&&e.gl.uniform2i(p,d.texData.texShape[0],d.texData.texShape[1]),u!=null){if(d.isUniform){if(k.sizeFromShape(d.shape)<2)e.gl.uniform1f(u,d.uniformValues[0]);else{let f=d.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),e.gl.uniform1fv(u,f)}continue}d.texData.slice!=null&&c!=null&&e.gl.uniform1i(c,d.texData.slice.flatOffset),e.setInputMatrixTexture(d.texData.texture.texture,u,l)}}let o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){let l=k.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let l=0;l<t.program.customUniforms.length;++l){let d=t.program.customUniforms[l],u=t.customUniformLocations[l],c=a[l];if(d.type==="float")e.gl.uniform1fv(u,c);else if(d.type==="vec2")e.gl.uniform2fv(u,c);else if(d.type==="vec3")e.gl.uniform3fv(u,c);else if(d.type==="vec4")e.gl.uniform4fv(u,c);else if(d.type==="int")e.gl.uniform1iv(u,c);else if(d.type==="ivec2")e.gl.uniform2iv(u,c);else if(d.type==="ivec3")e.gl.uniform3iv(u,c);else if(d.type==="ivec4")e.gl.uniform4iv(u,c);else throw Error("uniform type ".concat(d.type," is not supported yet."))}e.executeProgram()}function Kxe(e,t,n){let r="";t.concat(n).forEach(s=>{let o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:d,uniformShape:u,keptDims:c}=UE(e.packedInputs,s.shape,l),h="",p="",f="";if(u.length===1&&e.packedInputs){let w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h="".concat(w[0]>1,"_").concat(w[1]>1)}else if(u.length===2&&!e.packedInputs)p="".concat(u[0]>1,"_").concat(u[1]>1);else if(u.length>2&&!e.packedInputs){let w=k.computeStrides(u);f="".concat(w[0]===l[1],"_").concat(w[w.length-1]===l[1])}let m=s.shape.length,g=u.length===2&&k.arraysEqual(s.shape,l),b=k.sizeFromShape(s.shape)===1,y=T.getBroadcastDims(s.shape,n.shape),v=!e.packedInputs&&m===n.shape.length&&k.arraysEqual(l,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(l[0]>1,"_").concat(l[1]>1);r+="".concat(m,"_").concat(v,"_").concat(d?c:"","_").concat(u.length,"_").concat(b,"_").concat(y,"_").concat(g,"_").concat(h,"_").concat(p,"_").concat(f,"_").concat(x,"_").concat(o)}else{let l=s.isUniform?"uniform":s.texData.texShape;r+="".concat(s.shape,"_").concat(l,"_").concat(o)}});let a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Z().getNumber("WEBGL_VERSION")),i}function hr(e){return Z().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Xxe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ym.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Dr();this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Hx(["r","c","d"],e):Od(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},Yxe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ym.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Dr();this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Hx(["r","c","d"],e):Od(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},Zxe=class{constructor(e){this.variableNames=["A"],this.outTexUsage=Ca.DOWNLOAD;let t=Dr();this.outputShape=e,this.userCode="\n      ".concat(wW,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}},Qxe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ca.DOWNLOAD;let t=Dr();this.outputShape=e,this.userCode="\n      ".concat(wW,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}},Jxe={R:0,G:1,B:2,A:3},_R=class{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=Dr();this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let s=0;s<n.length;s++){let o=n[s];i+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(Jxe[o],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?VE():WE(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}},ewe=class{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Dr();this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let o=i*2+s;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(o,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(o,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(o,"] = values[2];\n            } else {\n              result[").concat(o,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?VE():WE(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(a,";\n        }\n    ")}},CW={};We(CW,{bindVertexProgramAttributeStreams:()=>MW,createBufferFromOutputTexture:()=>PW,createFloat16MatrixTexture:()=>AW,createFloat16PackedMatrixTexture:()=>FW,createFloat32MatrixTexture:()=>_W,createIndexBuffer:()=>NW,createPackedMatrixTexture:()=>DW,createUnsignedBytesMatrixTexture:()=>RW,createVertexBuffer:()=>TW,createVertexShader:()=>EW,downloadByteEncodedFloatMatrixFromOutputTexture:()=>BW,downloadFloat32MatrixFromBuffer:()=>zW,downloadMatrixFromPackedOutputTexture:()=>VW,downloadPackedMatrixFromBuffer:()=>WW,getInternalFormatForFloat16MatrixTexture:()=>jE,getInternalFormatForFloat16PackedMatrixTexture:()=>KE,getInternalFormatForFloat32MatrixTexture:()=>HE,getInternalFormatForPackedMatrixTexture:()=>qE,getInternalFormatForUnsignedBytesMatrixTexture:()=>GE,uploadDenseMatrixToTexture:()=>OW,uploadPixelDataToTexture:()=>LW});function EW(e){let t=Dr(),n="".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }");return J4(e,n)}function TW(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return rW(e,t)}function NW(e){let t=new Uint16Array([0,1,2,2,1,3]);return aW(e,t)}function Wg(e,t,n,r,a,i){sW(t,n);let s=iW(e),o=e.TEXTURE_2D;return ye(e,()=>e.bindTexture(o,s)),ye(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),ye(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),ye(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),ye(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),Z().getNumber("WEBGL_VERSION")===1?ye(e,()=>e.texImage2D(o,0,r,t,n,0,a,i,null)):ye(e,()=>e.texStorage2D(o,1,r,t,n)),ye(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function HE(e){return e.internalFormatFloat}function _W(e,t,n,r){let[a,i]=Bg(t,n);return Wg(e,a,i,HE(r),r.textureFormatFloat,e.FLOAT)}function jE(e){return e.internalFormatHalfFloat}function AW(e,t,n,r){let[a,i]=Bg(t,n);return Wg(e,a,i,jE(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function GE(e){return e.downloadTextureFormat}function RW(e,t,n,r){let[a,i]=Bg(t,n);return Wg(e,a,i,GE(r),e.RGBA,e.UNSIGNED_BYTE)}function qE(e){return e.internalFormatPackedFloat}function DW(e,t,n,r){let[a,i]=Dp(t,n);return Wg(e,a,i,qE(r),e.RGBA,e.FLOAT)}function KE(e){return e.internalFormatPackedHalfFloat}function FW(e,t,n,r){let[a,i]=Dp(t,n);return Wg(e,a,i,KE(r),e.RGBA,r.textureTypeHalfFloat)}function MW(e,t,n){return ye(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),pS(e,t,"clipSpacePos",n,3,20,0)&&pS(e,t,"uv",n,2,20,12)}function OW(e,t,n,r,a,i){ye(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,o,l;a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),o=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),Z().getNumber("WEBGL_VERSION")===2?ye(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,s)):ye(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,s)),ye(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function LW(e,t,n){ye(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?Z().getNumber("WEBGL_VERSION")===2?ye(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):ye(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):Z().getNumber("WEBGL_VERSION")===2?ye(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):ye(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),ye(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function PW(e,t,n,r){let a=e.createBuffer();ye(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));let i=4*4*t*n;return ye(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),ye(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),ye(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}function zW(e,t,n){let r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function BW(e,t,n,r){let[a,i]=Bg(t,n),s=4,o=new Uint8Array(Y0e(t*n,s));return ye(e,()=>e.readPixels(0,0,a,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function WW(e,t,n,r,a,i,s,o){let l=e,d=new Float32Array(Z0e(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,d),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),d}function VW(e,t,n){let r=new Float32Array(t*n*4);return ye(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}var cy=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let t=Z().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Y4(t,e)):this.gl=Ai(t),e=this.gl,Z().getNumber("WEBGL_VERSION")===2){let a=e;this.createVertexArray=()=>ye(a,()=>a.createVertexArray()),this.bindVertexArray=i=>ye(a,()=>a.bindVertexArray(i)),this.deleteVertexArray=i=>ye(a,()=>a.deleteVertexArray(i)),this.getVertexArray=()=>ye(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){let a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ye(e,()=>a.createVertexArrayOES()),this.bindVertexArray=i=>ye(e,()=>a.bindVertexArrayOES(i)),this.deleteVertexArray=i=>ye(e,()=>a.deleteVertexArrayOES(i)),this.getVertexArray=()=>ye(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Z().getNumber("WEBGL_VERSION")===1){let a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=mf(this.gl,a),Ea(this.gl,i))this.textureHalfFloatExtension=mf(this.gl,i);else if(Z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Ea(this.gl,r))this.colorBufferHalfFloatExtension=mf(this.gl,r);else if(Z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Ea(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else if(Ea(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=TW(this.gl),this.indexBuffer=NW(this.gl),this.framebuffer=oW(this.gl),this.textureConfig=zE(this.gl,this.textureHalfFloatExtension)}get debug(){return Z().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;ye(e,()=>e.finish()),ye(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ye(e,()=>e.deleteFramebuffer(this.framebuffer)),ye(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ye(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ye(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),_W(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),AW(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),RW(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),LW(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),OW(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),FW(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),DW(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(fS(this.gl,this.framebuffer),this.outputTexture=null),ye(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>BW(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,i){return WW(this.gl,e,t,n,r,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return zW(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=PW(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Z().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let i=r.clientWaitSync(a,0,0);return i===r.ALREADY_SIGNALED||i===r.CONDITION_SATISFIED},t=a}else Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>VW(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;this.vertexShader==null&&(this.vertexShader=EW(t));let n=tW(t);ye(t,()=>t.attachShader(n,this.vertexShader)),ye(t,()=>t.attachShader(n,e)),nW(t,n);let r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&oy(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let t=this.gl;ye(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),MW(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ye(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&oy(this.gl,this.program),ye(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?uW(this.gl,e,t):dW(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),ye(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),cW(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,a]=Dp(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&oy(this.gl,this.program),gf(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;if(this.debug){let t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ye(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ye(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=mf(this.gl,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.createQuery();return n.beginQuery(r.TIME_ELAPSED_EXT,a),a}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await k.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){let n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}else{let n=this.getQueryTimerExtensionWebGL1();return n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{let n=this.getQueryTimerExtensionWebGL1(),r=n.getQueryObjectEXT(e,n.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=twe(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:n}=this.itemsToPoll[t];n()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Z().platform&&(n=Z().platform.setTimeoutCustom.bind(Z().platform)),k.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),ly(this.gl,e,this.framebuffer),this.debug&&gf(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(ly(this.gl,this.outputTexture,this.framebuffer),this.debug&&gf(this.gl)):fS(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;ly(r,e,this.framebuffer),this.debug&&gf(r),this.outputTexture=e,ye(r,()=>r.viewport(0,0,t,n)),ye(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),ye(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function twe(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var{addImpl:nwe,bincountImpl:UW,bincountReduceImpl:rwe,bitwiseAndImpl:awe,castImpl:iwe,ceilImpl:swe,concatImpl:owe,equalImpl:lwe,expImpl:uwe,expm1Impl:dwe,floorImpl:cwe,gatherNdImpl:hwe,gatherV2Impl:pwe,greaterImpl:fwe,greaterEqualImpl:mwe,lessImpl:gwe,lessEqualImpl:bwe,linSpaceImpl:ywe,logImpl:vwe,maxImpl:xwe,maximumImpl:wwe,minimumImpl:kwe,multiplyImpl:Swe,negImpl:Iwe,notEqualImpl:$we,prodImpl:Cwe,raggedGatherImpl:Ewe,raggedRangeImpl:Twe,raggedTensorToTensorImpl:Nwe,rangeImpl:_we,rsqrtImpl:Awe,scatterImpl:Rwe,sigmoidImpl:Dwe,simpleAbsImpl:HW,sliceImpl:Fwe,sparseFillEmptyRowsImpl:Mwe,sparseReshapeImpl:Owe,sparseSegmentReductionImpl:jW,sqrtImpl:Lwe,staticRegexReplaceImpl:Pwe,stridedSliceImpl:zwe,stringNGramsImpl:Bwe,stringSplitImpl:Wwe,stringToHashBucketFastImpl:Vwe,subImpl:Uwe,tileImpl:Hwe,topKImpl:jwe,transposeImpl:XE,uniqueImpl:Gwe}=SE;function GW(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>"".concat(e,".").concat(n))}function xr(e,t){return t===1?[e]:GW(e,t)}function qwe(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}var Kwe=class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=hr(this.outputShape.length),this.rank===0)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{let t=xr("rc",this.rank),n=It(this.rank),r=this.getOutOfBoundsCondition(t),a=this.getSetup(t),i=this.getOutput(t);this.userCode="\n        void main() {\n          ".concat(n," rc = getOutputCoords();\n\n          if(").concat(r,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(a,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a="".concat(n===0?"r":"rp1",", ").concat(r===0?"c":"cp1");for(let i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";let t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){let t=this.getSourceCoordsArr(e);return this.rank===1?"getA(rc), (rc + 1 >= ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]," ? 0. : getA(rc + 1)), 0, 0"):"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}},qW=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length);let n="";for(let r=0;r<4;r++){let a="thisRC = rc;";r%2===1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        ".concat(a,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(Xwe(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?VE():WE(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}};function Xwe(e,t){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t?uxe(["r","c","d"],"inputShape"):Od(["r","c","d"],e),"\n      return ivec3(r, c, d);\n    }\n  ")}var Ywe=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){let r=RR(t,n),a=DR(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);let i=AR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();let o=this.freeTextures[a].pop();return this.usedTextures[a].push(o),o}let s;return r===Xn.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Xn.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Xn.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Xn.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Xn.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),s}releaseTexture(e,t,n,r){if(this.freeTextures==null)return;let a=RR(n,r),i=DR(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);let s=AR(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Z().get("WEBGL_DELETE_TEXTURE_THRESHOLD");o!==-1&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;let l=this.usedTextures[i],d=l&&l.indexOf(e);if(d==null||d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[d]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));let t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function Zwe(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F||t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}function AR(e,t,n,r,a){let i=Qwe(t,r),s;if(a){let[l,d]=Dp(e[0],e[1]);s=l*d}else{let[l,d]=Bg(e[0],e[1]);s=l*d}let o=Zwe(n,i);return s*o}function Qwe(e,t){switch(e){case Xn.PACKED_2X2_FLOAT32:return qE(t);case Xn.PACKED_2X2_FLOAT16:return KE(t);case Xn.UNPACKED_FLOAT32:return HE(t);case Xn.UNPACKED_FLOAT16:return jE(t);case Xn.PACKED_4X1_UNSIGNED_BYTE:return GE(t);default:throw new Error("Unknown physical texture type ".concat(e))}}function Jwe(e){return Z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Xn.PACKED_2X2_FLOAT32:Xn.UNPACKED_FLOAT32:e?Xn.PACKED_2X2_FLOAT16:Xn.UNPACKED_FLOAT16}function RR(e,t){if(e===Ca.UPLOAD)return Xn.PACKED_2X2_FLOAT32;if(e===Ca.RENDER||e==null)return Jwe(t);if(e===Ca.DOWNLOAD||e===Ca.PIXELS)return Xn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function DR(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var ji=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}},ri="if (isnan(x)) return x;",e1e="return x;",FR="return abs(x);",t1e="return (x >= 0.0) ? x : (exp(x) - 1.0);",n1e=ri+"\n  return (x < 0.0) ? 0.0 : x;\n",r1e=ri+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Xs="return x;",a1e="return 1.0 / (1.0 + exp(-1.0 * x));",i1e="return x;",s1e="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",o1e="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",l1e="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",u1e="return 1.0 / (1.0 + exp(-1.0 * x));",io=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}},d1e=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length);let t=e.length,n=xr("rc",t),r=It(t),a=qwe(t,n),i=n.slice(-2),s=t<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(a,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}},c1e=as.whereImpl,h1e=1e-7,p1e=1e-4,d1={};function f1e(e){return e in d1||(d1[e]={}),d1[e]}var m1e=Z().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),g1e=600;function b1e(){return Z().global.screen==null?1024:Z().global.screen.height*Z().global.screen.width*window.devicePixelRatio*g1e/1024/1024}var jx=class extends Bm{nextDataId(){return jx.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Z().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof cy)t=e;else{let n=Ai(Z().getNumber("WEBGL_VERSION"),e);t=new cy(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let n=Ai(Z().getNumber("WEBGL_VERSION"));t=new cy(n),this.binaryCache=f1e(Z().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Ywe(this.gpgpu),this.numMBBeforeWarning=b1e(),this.texData=new C0(this,ja())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,i){let s=this.makeTensorInfo(t,n),o=this.texData.get(s.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[r,a]},o.texShape=[r,a];let l=bf(t),d=new _R(l,!1,i),u=this.runWebGLProgram(d,[s],n,[[r,a]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(s),u.dataId}write(e,t,n){if((Z().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Z().getBool("DEBUG"))&&this.checkNumericalProblems(e),n==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Ca.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){let t=this.texData.get(e);t.refCount--}}move(e,t,n,r,a){if(Z().getBool("DEBUG")&&this.checkNumericalProblems(t),r==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Ca.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:i,shape:s,isPacked:o}=t;if(i!=null){let c;o?c=new io(s,Xs):c=new ji(s,Xs);let h=this.runWebGLProgram(c,[{dataId:e,shape:s,dtype:r}],r),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(n!=null)return this.convertAndCacheOnCPU(e);if(r==="string")return n;let l=this.activeTimers!=null,d;l&&(d=k.now());let u;if(r==="complex64"){let c=this.readSync(a.real.dataId),h=this.readSync(a.imag.dataId);u=T.mergeRealAndImagArrays(c,h)}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=k.now()-d),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){let p=this.pendingRead.get(e);return new Promise(f=>p.push(f))}let t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:i,complexTensorInfos:s,isPacked:o}=t;if(a!=null){let p;o?p=new io(r,Xs):p=new ji(r,Xs);let f=this.runWebGLProgram(p,[{dataId:e,shape:r,dtype:i}],i),m=this.read(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(n!=null)return this.convertAndCacheOnCPU(e);if(Z().getBool("DEBUG")&&!Z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Z().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,d;if(i!=="complex64"&&Z().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);let p=this.texData.get(d.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...Pb(r))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let u;if(i==="complex64"){let p=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),f=p[0],m=p[1];u=T.mergeRealAndImagArrays(f,m)}else if(l==null)u=this.getValuesFromTexture(e);else{let p=k.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(d!=null&&this.disposeIntermediateTensorInfo(d),l!=null){let p=this.gpgpu.gl;ye(p,()=>p.deleteBuffer(l))}let c=this.convertAndCacheOnCPU(e,u),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(c)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ja().removeDataId(e,this),this.pendingDeletes--),c}readToGPU(e,t={}){let n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,isPacked:o,texture:l}=n;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;o?h=new io(a,Xs):h=new ji(a,Xs);let p=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),f=this.readToGPU(p,t);return this.disposeIntermediateTensorInfo(p),f}if(l==null)throw r!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(e,t.customTexShape),u=ja().makeTensorFromTensorInfo(d),c=this.texData.get(d.dataId);return Object.assign({tensorRef:u},c.texture)}bufferSync(e){let t=this.readSync(e.dataId);if(e.dtype==="string")try{let n=t.map(r=>k.decodeString(r));return Xe(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Xe(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){let n=e[t];if(!Z4(n))throw Z().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")):Error("The value ".concat(n," cannot be represented on this device."))}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=k.sizeFromShape(t);if(Z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let c=this.decode(e),h=this.texData.get(c.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Pb(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(c),p}let i=Z().getBool("WEBGL_PACK")&&r===!0,s=i?bf(t):t,o=i?new Qxe(s):new Zxe(s),l=this.runWebGLProgram(o,[{shape:s,dtype:n,dataId:e}],"float32"),d=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let t=this.activeTimers,n=[],r=!1;this.programTimersStack==null?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();let a=k.flatten(this.activeTimers.map(o=>o.query)).filter(o=>o!=null),i=k.flatten(this.activeTimers.map(o=>o.name)).filter(o=>o!=null);this.activeTimers=t,r&&(this.programTimersStack=null);let s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let o=await Promise.all(a);s.kernelMs=k.sum(o),s.getExtraProfileInfo=()=>o.map((l,d)=>({name:i[d],ms:l})).map(l=>"".concat(l.name,": ").concat(l.ms)).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:k.now(),endMs:null}}endTimer(e){return Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=k.now(),e)}async getQueryTime(e){if(Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return n!=null&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:r,usage:a,isPacked:i,slice:s}=this.texData.get(e),o=s&&s.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),t!=null&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,i)));let d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=m1e){return Z().getBool("WEBGL_CPU_FORWARD")&&e.every(n=>this.texData.get(n.dataId).texture==null&&k.sizeFromShape(n.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){T.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return c1e(e.shape,t)}packedUnaryOp(e,t,n){let r=new io(e.shape,t),a=this.compileAndRun(r,[e],n);return ja().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let r=HW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,FR,e.dtype);let t=new ji(e.shape,FR),n=this.compileAndRun(t,[e]);return ja().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if(t==="string"&&n!=null&&n.length>0&&k.isString(n[0])){let a=n.map(i=>k.encodeString(i));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return ja().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){let t=new d1e(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new Kwe(e.shape),n=!0;return this.runWebGLProgram(t,[e],e.dtype,null,n)}packedReshape(e,t){let n=[nu(e.shape),...ru(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[nu(t),...ru(t)],i=new qW(a,n),s=!0,o=[n],l=this.runWebGLProgram(i,[r],e.dtype,o,s);return{dataId:l.dataId,shape:t,dtype:l.dtype}}decode(e,t){let n=this.texData.get(e),{isPacked:r,shape:a,dtype:i}=n;if(t!=null){let c=k.sizeFromShape(a),h=t[0]*t[1]*4;k.assert(c<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let s=bf(a),o;r?o=new Yxe(s):o=new Xxe(s);let l=!0,d=[t!=null?t:Pb(s)],u=this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,d,l,t);return{dtype:i,shape:a,dataId:u.dataId}}runWebGLProgram(e,t,n,r,a=!1,i){let s=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(s.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===ym.DENSE){let g=i!=null?i:Pb(e.outputShape);o.texShape=g.map(b=>b*2)}if(e.outTexUsage!=null&&(o.usage=e.outTexUsage),k.sizeFromShape(s.shape)===0)return o.values=k.getTypedArrayFromDType(s.dtype,0),s;let l=[],d=t.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(g.dataId);if(b.texture==null){if(!e.packedInputs&&k.sizeFromShape(g.shape)<=Z().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!b.isPacked!=!!e.packedInputs)g=b.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),b=this.texData.get(g.dataId);else if(b.isPacked&&!vm(b.shape,g.shape)){let y=g,v=g.shape;g.shape=b.shape,g=this.packedReshape(g,v),l.push(g),b=this.texData.get(g.dataId),y.shape=v}return{shape:g.shape,texData:b,isUniform:!1}});this.uploadToGPU(s.dataId);let u={shape:s.shape,texData:o,isUniform:!1},c=Kxe(e,d,u),h=this.getAndSaveBinary(c,()=>Gxe(this.gpgpu,e,d,u)),p=this.activeTimers!=null,f;p&&(f=this.startTimer()),Z().get("ENGINE_COMPILE_ONLY")||qxe(this.gpgpu,h,d,u,r),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));let m=Z().get("WEBGL_FLUSH_THRESHOLD");if(m>0){let g=k.now();g-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!Z().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&a===!1){let g=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),g}return s}compileAndRun(e,t,n,r,a=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Z().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=G(()=>{if(!Z().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=Z().getBool("DEBUG");Z().set("DEBUG",!1);let t=this.abs(Ae(1e-8)).dataSync()[0];if(Z().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?h1e:p1e}uploadToGPU(e){let t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:i,usage:s,isPacked:o}=t;if(i!=null)return;let l=this.activeTimers!=null,d;l&&(d=k.now());let u=t.texShape;if(u==null&&(u=fW(n,o),t.texShape=u),a!=null){let c=bf(n),h,p=u[1],f=u[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(o||!m)&&([p,f]=Dp(u[0],u[1])),o?h=new ewe(c,m):h=new _R(c,m);let g=m?[f,p]:u,b=this.makeTensorInfo(g,r),y=this.texData.get(b.dataId);m?y.usage=Ca.PIXELS:y.usage=Ca.UPLOAD,y.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,f,a);let v=[[f,p]],x=!0,w=this.runWebGLProgram(h,[b],r,v,x),$=this.texData.get(w.dataId);t.texShape=$.texShape,t.isPacked=$.isPacked,t.usage=$.usage,Z().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=$.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=k.now()-d)}else{let c=this.acquireTexture(u,s,r,o);t.texture=c}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:r}=n;return t!=null&&(n.values=y1e(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*k.bytesPerElement(t)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(let[,t]of Object.entries(this.binaryCache)){let n=new Promise(r=>{try{this.checkCompletion_(t),r(!0)}catch(a){throw a}});e.push(n)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await B2(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(BE(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:s,outTexShapeLocation:o}=$W(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=s,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";let{texture:r,height:a,width:i,channels:s}=e,o=ja().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let l=o.writeTexture(r,t,n,a,i,s);return ja().makeTensorFromDataId(l,t,n,o)}};jx.nextDataId=0;function y1e(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){let n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error("Unknown dtype ".concat(t))}var v1e="4.7.0";function KW(){Z().set("WEBGL_FORCE_F16_TEXTURES",!0)}hg.isBrowser()&&U0("webgl",()=>new jx,2);var x1e={forceHalfFloat:KW},YE="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",au=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=T.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=hr(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}},Pd="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",zp=class{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=T.assertAndGetBroadcastShape(t,n);let a=this.outputShape.length;this.enableShapeUniforms=hr(a);let i="";if(r)if(a===0||k.sizeFromShape(this.outputShape)===1)i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(It(a)," coords = getOutputCoords();\n        "),a===1)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{let s=xr("coords",a);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[a-2]," + 1) >= outShape[").concat(a," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[a-1]," + 1) >= outShape[").concat(a," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[a-2]," + 1) >= ").concat(this.outputShape[a-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[a-1]," + 1) >= ").concat(this.outputShape[a-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}};function ba(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var w1e={kernelName:Bu,backendName:"webgl",kernelFunc:ba};function Yo(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=ba({inputs:{x:r},backend:n}),l=ba({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:l},i}var k1e={kernelName:N0,backendName:"webgl",kernelFunc:Yo},XW="return (a < 0.) ? b * a : a;",YW="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function S1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r,s=n.makeTensorInfo([],"float32",k.createScalarValue(i,"float32")),o=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zp(YW,a.shape,s.shape):new au(XW,a.shape,s.shape),l=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),l}var I1e={kernelName:Hu,backendName:"webgl",kernelFunc:S1e},ZW="return (a < 0.) ? b * a : a;",QW="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function $1e(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zp(QW,r.shape,a.shape):new au(ZW,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}var C1e={kernelName:sd,backendName:"webgl",kernelFunc:$1e},Bp="if (isnan(x)) return x;";function rt({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{let{x:s}=a,o=i,l=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){let c=o.texData.get(s.dataId),h=n(c.values,l);return o.makeTensorInfo(s.shape,l,h)}let d=Z().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,u;return d?u=new io(s.shape,t):u=new ji(s.shape,e),o.runWebGLProgram(u,[s],l)}}function nr({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:s,backend:o})=>{let{a:l,b:d}=s,u=o;if(r&&l.dtype==="complex64"){let f=u.texData.get(l.dataId),m=u.texData.get(d.dataId),[g,b]=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{let[x,w]=v,$={dataId:x.dataId,dtype:x.dtype,shape:l.shape},C={dataId:w.dataId,dtype:w.dtype,shape:d.shape},E=new au(e,l.shape,d.shape);return u.runWebGLProgram(E,[$,C],Ra(x.dtype,w.dtype))}),y=Yo({inputs:{real:g,imag:b},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(b),y}let c=i||Ra(l.dtype,d.dtype);if((l.dtype==="string"||d.dtype==="string"||u.shouldExecuteOnCPU([l,d]))&&a!=null){let f=u.texData.get(l.dataId).values,m=u.texData.get(d.dataId).values,g=l.dtype==="string"?T.fromUint8ToStringArray(f):f,b=l.dtype==="string"?T.fromUint8ToStringArray(m):m,[y,v]=a(l.shape,d.shape,g,b,c),x=u.makeTensorInfo(v,c),w=u.texData.get(x.dataId);return w.values=y,x}let h=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,p;return h?p=new zp(t,l.shape,d.shape,n):p=new au(e,l.shape,d.shape),u.runWebGLProgram(p,[l,d],c)}}function xm(e,t=!1){if(e==="linear")return t?i1e:e1e;if(e==="relu")return t?o1e:n1e;if(e==="elu")return t?s1e:t1e;if(e==="relu6")return t?l1e:r1e;if(e==="prelu")return t?QW:ZW;if(e==="leakyrelu")return t?YW:XW;if(e==="sigmoid")return t?u1e:a1e;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var JW=class{constructor(e,t,n,r=!1,a=!1,i=!1,s=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=hr(this.outputShape.length);let d=r?e[1]:e[2],u=Math.ceil(d/2),c=r?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(o?m="vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?m="vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):m="vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");let b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let y="rc.x",v="rc.x";e[0]<t[0]?y="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(v="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(y,";\n        int batchB = ").concat(v,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(c,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}},MR={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},OR=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=T.assertAndGetBroadcastShape(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}},LR="return a * b;";function ZE(e){let{inputs:t,backend:n}=e,{a:r,b:a}=t,i=T.upcastType(r.dtype,a.dtype);if(r.dtype==="complex64"){let o=n.texData.get(r.dataId),l=n.texData.get(a.dataId),d=new OR(MR.REAL,r.shape,a.shape),u=new OR(MR.IMAG,r.shape,a.shape),c=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:a.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:a.shape}],h=n.runWebGLProgram(d,c,"float32"),p=n.runWebGLProgram(u,c,"float32"),f=Yo({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}if(n.shouldExecuteOnCPU([r,a])){let o=n.texData.get(r.dataId),l=n.texData.get(a.dataId),[d,u]=Swe(r.shape,a.shape,o.values,l.values,i),c=n.makeTensorInfo(u,i),h=n.texData.get(c.dataId);return h.values=d,c}let s;return Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new zp(LR,r.shape,a.shape):s=new au(LR,r.shape,a.shape),n.runWebGLProgram(s,[r,a],i)}var E1e={kernelName:nd,backendName:"webgl",kernelFunc:ZE};function T1e(e,t,n){let r=[nu(e.shape),...ru(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[nu(t),...ru(t)],s=new qW(i,r),o=!0,l=[r],d=n.runWebGLProgram(s,[a],e.dtype,l,o);return{dataId:d.dataId,shape:t,dtype:d.dtype}}function be(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=n,o=k.sizeFromShape(a.shape),l=k.inferFromImplicitShape(i,o),d=k.sizeFromShape(l);k.assert(o===d,()=>"The new shape (".concat(l,") has ").concat(d," elements and the old shape (").concat(a.shape,") has ").concat(o," elements. The new shape and old shape must have the same number of elements."));let u=s.texData.get(a.dataId);return u.isPacked&&!vm(a.shape,l)&&!(u.texture!==null&&vm(u.shape,l))?T1e(a,l,s):(s.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype})}var N1e={kernelName:ap,backendName:"webgl",kernelFunc:be},PR=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s=Math.floor(n/4)*4,o=n%4,l="sumValue += dot(values, ones);";if(t!=null){let u=1/t;l="sumValue += dot(values * ".concat(k.isInt(u)?u.toPrecision(2):u,", ones);")}let d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(o===1,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(o===2,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(o===3,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}},_1e=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s="0.0",o="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",o="min"):t==="max"&&(s="-1.0 / 1e-20",o="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");let d=Math.floor(n/4)*4,u=n%4,c="\n      if (".concat(t==="sum",") {\n        sumValue += dot(values, ones);\n      } else if (").concat(t==="prod",") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(o,"(values, minMaxValue);\n        if (").concat(t==="min"," || ").concat(t==="max",") {\n          minMaxValue = ").concat(o,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";t==="all"?(s="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):t==="any"&&(s="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(d,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(d,";\n        if (").concat(u===1,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(c,"\n        } else if (").concat(u===2,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(c,"\n        } else if (").concat(u===3,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}};function A1e(e){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let n=t.length?t[t.length-1].outSize:e[1],r=T.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function zd(e,t,n,r){let a=A1e(e.shape),i=e;for(let s=0;s<a.length;s++){let{inSize:o,windowSize:l,outSize:d}=a[s],u,c;n==="mean"?u=s===0?new PR({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:d},o):new PR({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:d}):u=new _1e({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:d},n),c=i,i=r.runWebGLProgram(u,[i],t),c.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(c)}return i}var R1e=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[t[i]];this.outputShape=n,this.rank=n.length;let r=It(this.rank),a=D1e(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(a,"));\n    }\n    ")}};function D1e(e){let t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}var F1e=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let d=0;d<n.length;d++)n[d]=e[t[d]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));let r=It(this.rank),a=GW("rc",this.rank),i=new Array(this.rank);for(let d=0;d<t.length;d++)i[t[d]]=a[d];let s="vec2(".concat(i.slice(-2).join(),")"),o="++".concat(a[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(i.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(o,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(a[this.rank-1],";\n      if(++").concat(a[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(o,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}};function Gx(e,t,n){let r=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new F1e(e.shape,t):new R1e(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function M1e(e,t,n,r){let a=t,i=e.shape.length,s=k.parseAxisParam(a,e.shape),o=s,l=T.getAxesPermutation(o,i),d=l!=null,u=e;d&&(u=Gx(e,l,r),o=T.getInnerMostAxes(o.length,i)),T.assertAxesAreInnerMostDims("sum",o,i);let[c,h]=T.computeOutAndReduceShapes(u.shape,o),p=c;n&&(p=T.expandShapeToKeepDim(c,s));let f=k.sizeFromShape(h),m=k.sizeFromShape(e.shape)/f,g=be({inputs:{x:u},attrs:{shape:[m,f]},backend:r}),b=V0(e.dtype),y=zd(g,b,"sum",r),v=be({inputs:{x:y},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),d&&r.disposeIntermediateTensorInfo(u),v}function qx(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;return M1e(a,i,s,n)}var O1e={kernelName:Sd,backendName:"webgl",kernelFunc:qx};function Er(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:i}=r,s=n,o=a.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=a.shape[i[u]];let d;if(s.shouldExecuteOnCPU([a])){let u=s.texData.get(a.dataId).values,c=XE(u,a.shape,a.dtype,i,l);d=s.makeTensorInfo(l,a.dtype);let h=s.texData.get(d.dataId);h.values=c}else d=Gx(a,i,s);return d}var L1e={kernelName:Ss,backendName:"webgl",kernelFunc:Er},eV=1e3;function Tv({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){let d=e.shape.length,u=t.shape.length,c=n?e.shape[d-2]:e.shape[d-1],h=r?t.shape[u-1]:t.shape[u-2],p=n?e.shape[d-1]:e.shape[d-2],f=r?t.shape[u-2]:t.shape[u-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),b=k.sizeFromShape(m),y=k.sizeFromShape(g),v=kp.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([p,f]);k.assert(c===h,()=>"Error in matMul: inner shapes (".concat(c,") and (").concat(h,") of Tensors with shapes ").concat(e.shape," and ").concat(t.shape," and transposeA=").concat(n," and transposeB=").concat(r," must match."));let x=n?[b,c,p]:[b,p,c],w=r?[y,f,h]:[y,h,f],$=be({inputs:{x:e},backend:a,attrs:{shape:x}}),C=be({inputs:{x:t},backend:a,attrs:{shape:w}}),E=[$,C],A=Math.max(b,y),R=n?$.shape[1]:$.shape[2],N=i!=null,I=s!=null,F=l==="leakyrelu",L=l!=null?xm(l,!0):null,P=N||I||F||L!=null,H;if((p===1||f===1)&&R>eV&&P===!1){let M=$,B=C;n&&(M=Er({inputs:{x:$},backend:a,attrs:{perm:[0,2,1]}}),E.push(M)),r&&(B=Er({inputs:{x:C},backend:a,attrs:{perm:[0,2,1]}}),E.push(B));let V=f!==1,K=f===1,Q=M;V&&(Q=be({inputs:{x:M},backend:a,attrs:{shape:[A,R,1]}}),E.push(Q));let ee=f===1?2:1,ie=B;K&&(ie=be({inputs:{x:B},backend:a,attrs:{shape:[A,1,R]}}),E.push(ie));let se=ZE({inputs:{a:Q,b:ie},backend:a});H=qx({inputs:{x:se},backend:a,attrs:{axis:ee,keepDims:!0}}),E.push(se)}else{let M=Ra(e.dtype,t.dtype),B=new JW(x,w,[A,p,f],n,r,N,L,I,F),V=[$,C];if(i!=null&&V.push(i),I&&V.push(s),F){let K=a.makeTensorInfo([],"float32",k.createScalarValue(o,"float32"));V.push(K),E.push(K)}H=a.runWebGLProgram(B,V,M)}let X=be({inputs:{x:H},backend:a,attrs:{shape:v}});E.push(H);for(let M of E)a.disposeIntermediateTensorInfo(M);return X}function P1e(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:d,activation:u,leakyreluAlpha:c}=r;return Tv({a,b:i,transposeA:l,transposeB:d,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:c,activation:u})}var z1e={kernelName:Wl,backendName:"webgl",kernelFunc:P1e},zR="return abs(x);";function B1e(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=n.texData.get(r.dataId),s=HW(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let a;return Z().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new io(r.shape,zR):a=new ji(r.shape,zR),n.runWebGLProgram(a,[r],r.dtype)}var W1e={kernelName:xh,backendName:"webgl",kernelFunc:B1e},V1e=ri+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",U1e=rt({opSnippet:V1e}),H1e={kernelName:cu,backendName:"webgl",kernelFunc:U1e},j1e=ri+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",G1e=rt({opSnippet:j1e}),q1e={kernelName:hu,backendName:"webgl",kernelFunc:G1e},BR="return a + b;",K1e=nr({opSnippet:BR,packedOpSnippet:BR,supportsComplex:!0,cpuKernelImpl:nwe}),X1e={kernelName:Bo,backendName:"webgl",kernelFunc:K1e},Y1e=class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((a,i)=>"T".concat(i));let n=[];this.variableNames.forEach(a=>{n.push("float v".concat(a," = get").concat(a,"AtOutCoords();"))});let r=this.variableNames.map(a=>"v".concat(a)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}},Z1e=class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((a,i)=>"T".concat(i));let n=[];this.variableNames.forEach(a=>{n.push("vec4 v".concat(a," = get").concat(a,"AtOutCoords();"))});let r=this.variableNames.map(a=>"v".concat(a)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}};function hy(e){let{inputs:t,backend:n}=e,r=t;if(r.length===1)return ba({inputs:{x:r[0]},backend:n});if(r.length>Z().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let o=Math.floor(r.length/2),l=hy({inputs:r.slice(0,o),backend:n}),d=hy({inputs:r.slice(o),backend:n});return hy({inputs:[l,d],backend:n})}let a=r.map(o=>o.dtype).reduce((o,l)=>Ra(o,l)),i=r.map(o=>o.shape),s=Z().getBool("WEBGL_PACK")?new Z1e(r[0].shape,i):new Y1e(r[0].shape,i);return n.runWebGLProgram(s,r,a)}var Q1e={kernelName:pu,backendName:"webgl",kernelFunc:hy};function J1e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),d=l,u=T.getAxesPermutation(d,o),c=a;u!=null&&(c=Er({inputs:{x:a},backend:n,attrs:{perm:u}}),d=T.getInnerMostAxes(d.length,o)),T.assertAxesAreInnerMostDims("all",d,o);let[h,p]=T.computeOutAndReduceShapes(c.shape,d),f=k.sizeFromShape(p),m=be({inputs:{x:c},backend:n,attrs:{shape:[-1,f]}}),g=zd(m,m.dtype,"all",n),b;if(s){let y=T.expandShapeToKeepDim(h,l);b=be({inputs:{x:g},backend:n,attrs:{shape:y}})}else b=be({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(c),b}var eke={kernelName:wh,backendName:"webgl",kernelFunc:J1e};function tke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),d=l,u=T.getAxesPermutation(d,o),c=a;u!=null&&(c=Er({inputs:{x:a},backend:n,attrs:{perm:u}}),d=T.getInnerMostAxes(d.length,o)),T.assertAxesAreInnerMostDims("any",d,o);let[h,p]=T.computeOutAndReduceShapes(c.shape,d),f=k.sizeFromShape(p),m=be({inputs:{x:c},backend:n,attrs:{shape:[-1,f]}}),g=zd(m,m.dtype,"any",n),b;if(s){let y=T.expandShapeToKeepDim(h,l);b=be({inputs:{x:g},backend:n,attrs:{shape:y}})}else b=be({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(c),b}var nke={kernelName:kh,backendName:"webgl",kernelFunc:tke},rke=class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:a,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];let s=t==="max"?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(o,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}},ake=class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,k.assert(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));let a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");let s=this.outputShape,o=s.length,l=It(o),d=xr("coords",o),u,c;if(i===1){c=o+1;let C=It(c);u="\n        ".concat(C," sourceLocR = ").concat(C,"(").concat(d.join(),", 0);\n        ++").concat(d[o-1],";\n        ").concat(C," sourceLocG = ").concat(C,"(").concat(d.join(),", 0);\n        ++").concat(d[o-2],";\n        ").concat(C," sourceLocA = ").concat(C,"(").concat(d.join(),", 0);\n        --").concat(d[o-1],";\n        ").concat(C," sourceLocB = ").concat(C,"(").concat(d.join(),", 0);\n        --").concat(d[o-2],";")}else c=o,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(d[o-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(d[o-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(d[o-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(d[o-2],";");let h=["x","y","z","w","u","v"].slice(0,c),p="."+h[c-1],f=h.map(C=>"int "+C),m=xr("sourceLocR",c-1).concat("inIdx.r"),g=xr("sourceLocG",c-1).concat("inIdx.g"),b=xr("sourceLocB",c-1).concat("inIdx.b"),y=xr("sourceLocA",c-1).concat("inIdx.a"),v=n==="max"?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),")));"),w="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(y.join(),") : 0.)"),$=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat($,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[o-1]," < ").concat(s[o-1]-1,";\n        bool hasNextRow = ").concat(d[o-2]," < ").concat(s[o-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(v,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}};function tV(e,t,n,r=null){let a=t.shape[0],i=t.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);let s=T.computeOptimalWindowSize(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},l=new rke(o,n,r==null),d=[t];r!=null&&d.push(r);let u=e.runWebGLProgram(l,d,"int32");if(u.shape[1]===1)return u;let c=tV(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}function nV(e,t,n,r=null){let a=r!=null?r.shape:t.shape,i=a[a.length-1],s=T.computeOptimalWindowSize(i),o=new ake(a,s,n,r==null),l=r==null?[t]:[t,r],d=e.runWebGLProgram(o,l,"int32");if(d.shape.length===t.shape.length){let u=nV(e,t,n,d);return e.disposeIntermediateTensorInfo(d),u}return d}function rV(e,t,n,r){let a=[n];if(T.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Z().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let i=[],s=e.texData.get(t.dataId),o=s!==null&&s.isPacked,l=t;o&&(l=e.unpackTensor(t),i.push(l));let[d,u]=T.computeOutAndReduceShapes(l.shape,a),c=k.sizeFromShape(u),h=be({inputs:{x:l},backend:e,attrs:{shape:[-1,c]}});i.push(h);let p=tV(e,h,r);i.push(p);let f=be({inputs:{x:p},backend:e,attrs:{shape:d}});return i.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}return nV(e,t,r)}function ike(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,s=k.parseAxisParam(i,a.shape),o=T.getAxesPermutation(s,a.shape.length),l=a,d=[];o!=null&&(l=Er({inputs:{x:a},backend:n,attrs:{perm:o}}),d.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),T.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=rV(n,l,s[0],"max");return d.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}var ske={kernelName:Sh,backendName:"webgl",kernelFunc:ike};function oke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,s=k.parseAxisParam(i,a.shape),o=T.getAxesPermutation(s,a.shape.length),l=a,d=[];o!=null&&(l=Er({inputs:{x:a},backend:n,attrs:{perm:o}}),d.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),T.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=rV(n,l,s[0],"min");return d.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}var lke={kernelName:Ih,backendName:"webgl",kernelFunc:oke},uke=ri+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",dke=rt({opSnippet:uke}),cke={kernelName:fu,backendName:"webgl",kernelFunc:dke},hke=ri+"return log(x + sqrt(x * x + 1.0));",pke=rt({opSnippet:hke}),fke={kernelName:mu,backendName:"webgl",kernelFunc:pke},mke=ri+"\n  return atan(x);\n",gke=rt({opSnippet:mke}),bke={kernelName:gu,backendName:"webgl",kernelFunc:gke},yke=YE+"\n  return atan(a, b);\n",vke="\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Pd+"\n  return result;\n",xke=nr({opSnippet:yke,packedOpSnippet:vke}),wke={kernelName:yu,backendName:"webgl",kernelFunc:xke},kke=ri+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",Ske=rt({opSnippet:kke}),Ike={kernelName:bu,backendName:"webgl",kernelFunc:Ske},wm=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;let f=t==="avg",m="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),b="0.0";if(f||(b="-1.0 / 1e-20"),n){let C=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(d,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(C," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?a?m:g:"wR * ".concat(c," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");return}let y="max",v="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");t==="avg"&&(v="avgValue / max(count, 1.0)");let x=Math.floor(i/4)*4,w=i%4,$="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(y,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(d,", d),\n              getValue(batch, xR, xC + 2 * ").concat(d,", d),\n              getValue(batch, xR, xC + 3 * ").concat(d,", d)\n            );\n\n            ").concat($,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(w===1,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat($,"\n          } else if (").concat(w===2,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(d,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat($,"\n          } else if (").concat(w===3,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(d,", d),\n              getValue(batch, xR, xC + 2 * ").concat(d,", d),\n              initializationValue\n            );\n\n            ").concat($,"\n          }\n        }\n        setOutput(").concat(v,");\n      }\n    ")}},QE=class{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,d=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;let y=t==="avg",v="0.0";if(y||(v="-1.0 / 1e-20"),n){let A=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(d,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(c,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(A," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?a?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");return}let x="max",w="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");t==="avg"&&(w="avgValue / max(count, 1.0)");let $=Math.floor(i/4)*4,C=i%4,E="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(d,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat($,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(c,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(c,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(c,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat($,";\n            if (").concat(C===1,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(C===2,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(c,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(C===3,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(c,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(c,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}};function $ke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;Fp(a,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,d=1;k.assert(T.eitherStridesOrDilationsAreOne(s,d),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(d,"'"));let u=T.computePool2DInfo(a.shape,i,s,d,o,l);if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))return ba({inputs:{x:a},backend:n});let c=new wm(u,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}var Cke={kernelName:vu,backendName:"webgl",kernelFunc:$ke};function Eke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:d}=r,u=[1,1,1],c=T.computePool3DInfo(a.shape,i,s,u,o,l,d),h=new QE(c,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}var Tke={kernelName:$h,backendName:"webgl",kernelFunc:Eke},Nke=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,d=o-1-e.padInfo.top,u=l-1-e.padInfo.left,c=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(d,", ").concat(u,");\n      const float avgMultiplier = float(").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},_ke=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=c-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(a,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(d,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function Ake(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:d,dimRoundingMode:u}=r,c=[1,1,1],h=T.computePool3DInfo(s.shape,o,l,c,d,u),p=new _ke(h);return n.runWebGLProgram(p,[a],s.dtype)}var Rke={kernelName:Um,backendName:"webgl",kernelFunc:Ake};function Dke(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;Fp([a,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:d}=r,u=T.computePool2DInfo(s.shape,o,l,1,d),c=new Nke(u);return n.runWebGLProgram(c,[a],s.dtype)}var Fke={kernelName:Vm,backendName:"webgl",kernelFunc:Dke};function Mke(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:s,transposeB:o}=r;return Tv({a,b:i,transposeA:s,transposeB:o,backend:n})}var Oke={kernelName:xu,backendName:"webgl",kernelFunc:Mke},Lke=class{constructor(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],T.assertAndGetBroadcastShape(e,t),T.assertAndGetBroadcastShape(e,n);let s="0.0";r!=null&&(T.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";a!=null&&(T.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(o,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}},Pke=class{constructor(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],T.assertAndGetBroadcastShape(e,t),T.assertAndGetBroadcastShape(e,n);let s="vec4(0.0)";r!=null&&(T.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";a!=null&&(T.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(o,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}},zke=({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:a,variance:i,offset:s,scale:o}=e;k.assert(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),k.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),k.assert(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);let d=[r,a,i],u=null;s!=null&&(u=s.shape,d.push(s));let c=null;o!=null&&(c=o.shape,d.push(o));let h=Z().getBool("WEBGL_PACK_NORMALIZATION")?new Pke(r.shape,a.shape,i.shape,u,c,l):new Lke(r.shape,a.shape,i.shape,u,c,l);return t.runWebGLProgram(h,d,d[0].dtype)},Bke={kernelName:Pu,backendName:"webgl",kernelFunc:zke},Wke=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=It(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=Vke(this.rank),r,a=e.map((i,s)=>"sourceLoc.".concat(bS[s]," = start[").concat(s,"] + coords.").concat(bS[s],";"));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(a.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}},bS=["x","y","z","w","u","v"];function Vke(e){if(e===1)return"sourceLoc";if(e<=6)return bS.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}var Uke=class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=It(this.rank),n=xr("coords",this.rank),r=xr("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),i="getChannel(getSource(".concat(r.join(),"), ").concat(a,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(r[this.rank-1],";\n      }\n    "),o=this.rank===1?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((d,u)=>"start[".concat(u,"]")).join(),");"):e.map((d,u)=>"".concat(r[u]," = ").concat(n[u]," + start[").concat(u,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(o,"\n        setOutput(result);\n      }\n    ")}};function Hke(e,t,n,r){let a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=e.dtype;let o=En.computeFlatOffset(t,k.computeStrides(e.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function Wp(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r,[o,l]=En.parseSliceParams(a,i,s);if(En.assertParamsValid(a,o,l),k.sizeFromShape(l)===0)return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){let c=n.texData.get(a.dataId),h=Fwe(c.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,h)}let{isPacked:d}=n.texData.get(a.dataId),u=En.isSliceContinous(a.shape,o,l);if(d||!u){let c=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Uke(l):new Wke(l),h=[o];return n.runWebGLProgram(c,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),Hke(a,o,l,n)}var jke={kernelName:cp,backendName:"webgl",kernelFunc:Wp},Gke=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;k.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((y,v)=>y*v),l=T.getReshaped(a.shape,i,o),d=T.getPermuted(l.length,i.length),u=T.getReshapedPermuted(a.shape,i,o),c=T.getSliceBeginCoords(s,i.length),h=T.getSliceSize(u,s,i.length),p=[],f=be({inputs:{x:a},backend:n,attrs:{shape:l}}),m=Er({inputs:{x:f},backend:n,attrs:{perm:d}}),g=be({inputs:{x:m},backend:n,attrs:{shape:u}}),b=Wp({inputs:{x:g},backend:n,attrs:{begin:c,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),b},qke={kernelName:Ch,backendName:"webgl",kernelFunc:Gke};function Kke(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=n.readSync(a.dataId),l=n.readSync(i.dataId),d=UW(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,d)}var Xke={kernelName:Eh,backendName:"webgl",kernelFunc:Kke},Yke="\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",Zke="\n  return float(int(a.r) & int(b.r));\n";function Qke(e){let{inputs:t,backend:n}=e,{a:r,b:a}=t,i=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Z().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||s===1){let l=n.texData.get(r.dataId).values,d=n.texData.get(a.dataId).values,[u,c]=awe(r.shape,a.shape,l,d,r.dtype),h=n.makeTensorInfo(c,r.dtype),p=n.texData.get(h.dataId);return p.values=u,h}let o;return i?o=new zp(Yke,r.shape,a.shape,!1):o=new au(Zke,r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}var Jke={kernelName:Th,backendName:"webgl",kernelFunc:Qke};function eSe(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=T.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var tSe={kernelName:Hm,backendName:"webgl",kernelFunc:eSe},nSe="return float(a != b);",aV=nr({opSnippet:nSe,cpuKernelImpl:$we,dtype:"bool"}),rSe={kernelName:Qh,backendName:"webgl",kernelFunc:aV};function Vg(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return ba({inputs:{x:a.complexTensorInfos.real},backend:n})}var aSe={kernelName:B0,backendName:"webgl",kernelFunc:Vg},iSe="return float(int(x));";function sSe(e,t){let n=new ji(e.shape,iSe),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function yS(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return ba({inputs:{x:a},backend:n});let s=Kt(a.shape),o=yS({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=Yo({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),l}if(a.dtype==="complex64"){let s=Vg({inputs:{input:a},backend:n}),o=yS({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),o}if(!k.hasEncodingLoss(a.dtype,i)){let s=ba({inputs:{x:a},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){let s=n.texData.get(a.dataId).values,[o,l,d]=iwe(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,d)}if(i==="int32")return sSe(a,n);if(i==="bool"){let s=n.makeTensorInfo([],"bool",k.getTypedArrayFromDType("bool",1)),o=aV({inputs:{a,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),o}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var oSe={kernelName:wu,backendName:"webgl",kernelFunc:yS},WR="return ceil(x);",lSe=rt({opSnippet:WR,packedOpSnippet:WR,cpuKernelImpl:swe}),uSe={kernelName:ku,backendName:"webgl",kernelFunc:lSe},dSe=class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}},cSe=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}};function hSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:s}=r,o;Z().getBool("WEBGL_PACK_CLIP")?o=new cSe(a.shape):o=new dSe(a.shape);let l=[[i],[s]];return n.runWebGLProgram(o,[a],a.dtype,l)}var pSe={kernelName:Wo,backendName:"webgl",kernelFunc:hSe},fSe=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}};function VR(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function mSe(e){let{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),i=new fSe(r.shape),s=[VR(r,a.complexTensorInfos.real),VR(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}var gSe={kernelName:jm,backendName:"webgl",kernelFunc:mSe},bSe=class{constructor(e){this.outputShape=[],this.outputShape=T.computeOutShape(e,1),this.variableNames=e.map((i,s)=>"T".concat(s));let t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];let n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<t.length;i++){let s=t[i-1];n.push("else if (yC < ".concat(t[i],") setOutput(getT").concat(i,"(yR, yC-").concat(s,"));"))}let r=t.length,a=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(a,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}},ySe=class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=T.computeOutShape(e,t);let n=this.outputShape,r=n.length,a=It(r),i=xr("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((f,m)=>"T".concat(m));let o=new Array(e.length-1);o[0]=e[0][t];for(let f=1;f<o.length;f++)o[f]=o[f-1]+e[f][t];let l=s[t],d=s.slice(-2),u=s.join(),c="if (".concat(l," < ").concat(o[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(d.join(),"));\n        }");for(let f=1;f<o.length;f++){let m=o[f-1];c+="\n        if (".concat(l," < ").concat(o[f],"  && ").concat(l," >= ").concat(o[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(Bb(s,l,m),"),\n            vec2(").concat(Bb(d,l,m),"));\n        }")}let h=o.length,p=o[o.length-1];c+="\n        return getChannel(\n          getT".concat(h,"(").concat(Bb(s,l,p),"),\n          vec2(").concat(Bb(d,l,p),"));"),this.userCode="\n      float getValue(".concat(s.map(f=>"int "+f),") {\n        ").concat(c,"\n      }\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2]," &&\n            ").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}};function Bb(e,t,n){let r=e.indexOf(t);return e.map((a,i)=>i===r?"".concat(a," - ").concat(n):a).join()}function Kx(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return ba({inputs:{x:a.complexTensorInfos.imag},backend:n})}var vSe={kernelName:O0,backendName:"webgl",kernelFunc:Kx};function yf(e,t,n){let r=e[0].dtype;if(r==="complex64"){let p=e.map(y=>Vg({inputs:{input:y},backend:n})),f=e.map(y=>Kx({inputs:{input:y},backend:n})),m=yf(p,t,n),g=yf(f,t,n),b=Yo({inputs:{real:m,imag:g},backend:n});return p.forEach(y=>n.disposeIntermediateTensorInfo(y)),f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),b}let a=n.shouldExecuteOnCPU(e);if(r==="string"&&(a=!0),a){let p=e.map(x=>{let w=[-1,k.sizeFromShape(x.shape.slice(t))];return be({inputs:{x},backend:n,attrs:{shape:w}})}),f=p.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=T.computeOutShape(p.map(x=>x.shape),1),g=p[0].shape[0]===1,b=owe(f,m,r,g),y=T.computeOutShape(e.map(x=>x.shape),t),v=n.makeTensorInfo(y,r,b);return p.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}let i=e.filter(p=>k.sizeFromShape(p.shape)>0),s=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let p=s?new ji(e[0].shape,Xs):new io(e[0].shape,Xs);return n.runWebGLProgram(p,e,r)}let o=Z().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){let p=[];for(let m=0;m<i.length;m+=o){let g=i.slice(m,m+o);p.push(yf(g,t,n))}let f=yf(p,t,n);for(let m of p)n.disposeIntermediateTensorInfo(m);return f}if(s){let p=new ySe(i.map(f=>f.shape),t);return n.runWebGLProgram(p,i,r)}let{tensors2D:l,outShape:d}=xSe(i,t,n),u=new bSe(l.map(p=>p.shape)),c=n.runWebGLProgram(u,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));let h=be({inputs:{x:c},attrs:{shape:d},backend:n});return n.disposeIntermediateTensorInfo(c),h}function xSe(e,t,n){let r=T.computeOutShape(e.map(a=>a.shape),t);return{tensors2D:e.map(a=>be({inputs:{x:a},attrs:{shape:[-1,k.sizeFromShape(a.shape.slice(t))]},backend:n})),outShape:r}}function iV(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=k.parseAxisParam(a,t[0].shape)[0],s=t.map(d=>d.shape);T.assertParamsConsistent(s,i);let o=T.computeOutShape(t.map(d=>d.shape),i);if(k.sizeFromShape(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(d=>k.sizeFromShape(d.shape)>0);return l.length===1?ba({inputs:{x:l[0]},backend:n}):yf(l,i,n)}var wSe={kernelName:Nh,backendName:"webgl",kernelFunc:iV},sV=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let i=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,d=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,f=e.inChannels%4,m=e.dataFormat==="channelsLast",g=m?1:2,b=m?2:3,y=m?3:1,v="",x="";n&&(r?v="float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?v="float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):v="\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),x="result = activation(result);");let w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(o,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(c,"; wR++) {\n          int xR = xRCorner + wR * ").concat(d,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(f===1,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(f===2,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(f===3,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}},kSe=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,d=e.dilationWidth,u=e.filterDepth,c=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(a,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(o,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(c,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(f===1,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(f===2,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(f===3,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},oV=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=hr(this.outputShape.length);let i=e.padInfo.left,s=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,d=e.filterWidth,u=d,c="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<d;m++)c+="\n           vec4 xTexelC".concat(m*2,";\n           int xTexelC").concat(m*2,"Ready;\n           vec4 xTexelC").concat(m*2+1,";\n           int xTexelC").concat(m*2+1,"Ready;\n           vec4 xC").concat(m,";");c+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let m=0;m<d;m++)c+="\n           xTexelC".concat(m*2," = vec4(0.0);\n           xTexelC").concat(m*2,"Ready = 0;\n           xTexelC").concat(m*2+1," = vec4(0.0);\n           xTexelC").concat(m*2+1,"Ready = 0;\n           xC").concat(m," = vec4(0.0);");c+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){let g=m*2;if(c+="\n           xC = xCCorner + ".concat(g*o,";\n           "),s===1){if(g<d&&(i%2===1?(c+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),o===1&&g>0?c+="\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):c+="\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):c+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<d)){let b=i%2===0?k.nearestLargerEven(o):o;o%2===0&&i%2===1||o%2!==0&&i%2!==1?(c+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(b,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),o>1?c+="\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):c+="\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):b===1?c+="\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):c+="\n                     xCOffset = xC + ".concat(b,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<d&&(i%2===1?(c+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<d&&(c+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(c+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<d&&(c+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<d&&(c+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<d&&(c+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}c+="\n     }\n   ",c+="\n     }\n   ",c+="\n     }\n   ";let h="",p="";n&&(r?h="vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):a?h="vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):h="vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");let f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(c,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}},SSe=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=hr(this.outputShape.length);let{dataFormat:n}=t,r=Dr(),a=n==="channelsLast",i=a?1:2,s=a?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {"),l="";for(let d=0;d<=1;d++)for(let u=0;u<=1;u++)l+="\n          blockIndex = rc.z + ".concat(u,";\n          pos = rc.y + ").concat(d,";\n\n          ").concat(o,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(a,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(d*2+u,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(d*2+u,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}};function Nv(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function lV({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){let l=e.shape,d=r.texData.get(e.dataId),u=n.inChannels,c=l[0]*l[1]*l[2],h=n.outChannels,p=n.dataFormat==="channelsLast",f=!1,m=!1,g,b=[];if(i!=null){let y=Nv(i.shape,p);y!=null&&(i=be({inputs:{x:i},backend:r,attrs:{shape:y}}),b.push(i))}if(a!=null){let y=Nv(a.shape,p);y!=null&&(a=be({inputs:{x:a},backend:r,attrs:{shape:y}}),b.push(a))}if(!((c===1||h===1)&&u>eV)&&d.isPacked&&p&&d.texture!=null&&l[2]%2!==0&&k.arraysEqual(d.shape.slice(-3),l.slice(-3))){let y=l[0]*l[1]*(l[2]+1),v={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},x=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,k.assert(vm(d.shape,v.shape),()=>"packed reshape ".concat(d.shape," to ").concat(v.shape," isn't free"));let w=be({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(w);let $=Tv({a:v,b:w,backend:r,transposeA:f,transposeB:m,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),C=r.texData.get($.dataId);k.assert(C.isPacked,()=>"batchMatMul result is expected to be packed"),d.shape=x,C.shape=n.outShape,g=ba({inputs:{x:$},backend:r}),g.shape=n.outShape,b.push($)}else{let y=n.outHeight*n.outWidth,v=be({inputs:{x:e},backend:r,attrs:{shape:p?[n.batchSize,y,n.inChannels]:[n.batchSize,n.inChannels,y]}}),x=be({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),w=Tv({a:p?v:x,b:p?x:v,transposeA:!p,transposeB:m,backend:r,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s});g=be({inputs:{x:w},backend:r,attrs:{shape:n.outShape}}),b.push(v),b.push(x),b.push(w)}for(let y of b)r.disposeIntermediateTensorInfo(y);return g}function uV({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){let{filterWidth:l,filterHeight:d,inChannels:u,outWidth:c,outHeight:h,dataFormat:p}=n,f=p==="channelsLast",m=l*d*u,g=h*c,b=[n.batchSize,m,g],y=!0,v=!1,x=[];if(i!=null){let M=Nv(i.shape,f);M!=null&&(i=be({inputs:{x:i},backend:r,attrs:{shape:M}}),x.push(i))}if(a!=null){let M=Nv(a.shape,f);M!=null&&(a=be({inputs:{x:a},backend:r,attrs:{shape:M}}),x.push(a))}let w=be({inputs:{x:t},backend:r,attrs:{shape:[1,m,k.sizeFromShape(t.shape)/m]}});x.push(w);let $=new SSe(b,n),C=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=r.runWebGLProgram($,[e],"float32",C),A=be({inputs:{x:E},backend:r,attrs:{shape:b}});x.push(E),x.push(A);let R=a!=null,N=i!=null,I=o==="leakyrelu",F=o?xm(o,!0):null,L=new JW(f?A.shape:w.shape,f?w.shape:A.shape,f?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],y,v,R,F,N,I),P=f?[A,w]:[w,A];if(a&&P.push(a),N&&P.push(i),I){let M=r.makeTensorInfo([],"float32",k.createScalarValue(s,"float32"));P.push(M),x.push(M)}let H=r.runWebGLProgram(L,P,"float32"),X=be({inputs:{x:H},backend:r,attrs:{shape:n.outShape}});x.push(H);for(let M of x)r.disposeIntermediateTensorInfo(M);return X}function ISe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:d,dimRoundingMode:u}=r,c=T.convertConv2DDataFormat(l),h=T.computeConv2DInfo(a.shape,i.shape,s,d,o,u,!1,c),p;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))p=lV({x:a,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&c==="channelsLast"&&Z().getBool("WEBGL_EXP_CONV")){let m=new oV(h),g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];p=n.runWebGLProgram(m,[a,i],"float32",g)}else if(Z().getBool("WEBGL_CONV_IM2COL"))p=uV({x:a,filter:i,convInfo:h,backend:n});else{let m=new sV(h);p=n.runWebGLProgram(m,[a,i],"float32")}let f=be({inputs:{x:p},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(p),f}var $Se={kernelName:Su,backendName:"webgl",kernelFunc:ISe},CSe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},ESe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=i?1:2,d=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(d,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},TSe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(a,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},NSe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,d=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(o,", ").concat(l,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(a,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function _Se(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:d,filterShape:u}=r,c=T.convertConv2DDataFormat(l),h=T.computeConv2DInfo(a.shape,u,s,1,o,d,!1,c),p=new CSe(h);return n.runWebGLProgram(p,[a,i],"float32")}var ASe={kernelName:_0,backendName:"webgl",kernelFunc:_Se},RSe=class{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=hr(this.outputShape.length);let t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}};function DSe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:d,dimRoundingMode:u}=r,c=T.convertConv2DDataFormat(d),h=T.computeConv2DInfo(s,i.shape,o,1,l,u,!1,c);if(Z().getBool("WEBGL_PACK")&&c==="channelsLast"){let p=[[h.strideHeight,h.strideWidth]],f=new RSe(h);return n.runWebGLProgram(f,[a,i],"float32",p)}else{let p=new ESe(h);return n.runWebGLProgram(p,[a,i],"float32")}}var FSe={kernelName:Iu,backendName:"webgl",kernelFunc:DSe};function MSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,d=T.computeConv3DInfo(a.shape,i.shape,s,l,o),u=new kSe(d);return n.runWebGLProgram(u,[a,i],"float32")}var OSe={kernelName:$u,backendName:"webgl",kernelFunc:MSe};function LSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r,d=T.computeConv3DInfo(a.shape,l,s,1,o),u=new TSe(d);return n.runWebGLProgram(u,[a,i],"float32")}var PSe={kernelName:_h,backendName:"webgl",kernelFunc:LSe};function zSe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r,d=T.computeConv3DInfo(l,i.shape,o,1,s),u=new NSe(d);return n.runWebGLProgram(u,[a,i],"float32")}var BSe={kernelName:Ah,backendName:"webgl",kernelFunc:zSe},WSe=Bp+"\n  return cos(x);\n",VSe="\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(Pd,"\n  return result;\n"),USe=rt({opSnippet:WSe,packedOpSnippet:VSe}),HSe={kernelName:Cu,backendName:"webgl",kernelFunc:USe},jSe="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",GSe=rt({opSnippet:jSe}),qSe={kernelName:Eu,backendName:"webgl",kernelFunc:GSe},KSe=class{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[i,s,o,l]=e,[d]=t,[u,c]=n;this.outputShape=[d,u,c,l];let h=r==="bilinear"?1:0,[p,f]=["".concat(s-1,".0"),"".concat(o-1,".0")],[m,g,b]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[y,v,x]=c>1?["".concat((o-1)/(c-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(m,");\n      const float width_ratio = float(").concat(y,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(v,";\n\n        float in_y = ").concat(b,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n        float in_x = ").concat(x,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}},XSe=e=>{let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:d}=r,u=new KSe(a.shape,i.shape,o,l,d);return n.runWebGLProgram(u,[a,i,s],"float32")},YSe={kernelName:Dh,backendName:"webgl",kernelFunc:XSe},km;(function(e){e.Prod="*",e.Sum="+"})(km||(km={}));var UR=class{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let a=this.outputShape.length,i=this.op===km.Prod?"1.0":"0.0",s=n?i:"getX(".concat(HR(a,"coords",this.op),")"),o=this.outputShape[this.outputShape.length-1],l="",d="";n?(l=r?"end != ".concat(o-1):"end != 0",d=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(o):"end >= pow2",d=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(It(a)," coords = getOutputCoords();\n        int end = ").concat(jR(a,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(d,";\n          ").concat(jR(a,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(HR(a,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}};function HR(e,t,n){if(e===1)return"".concat(t);if(e===2)return"".concat(t,".x, ").concat(t,".y");if(e===3)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(e===4)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function jR(e,t,n){if(e===1)return"".concat(t);if(e===2)return"".concat(t,".y");if(e===3)return"".concat(t,".z");if(e===4)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function dV(e,t,n,r,a,i){let s=t.shape.length,o=T.getAxesPermutation([r],s),l=t;o!=null&&(l=Er({inputs:{x:t},backend:n,attrs:{perm:o}}));let d=T.getInnerMostAxes(1,s)[0];if(d!==s-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));let u=l.shape[d],c=ba({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){let p=new UR(e,l.shape,!1,i),f=[[h]],m=c;c=n.runWebGLProgram(p,[c],c.dtype,f),n.disposeIntermediateTensorInfo(m)}if(a){let h=new UR(e,l.shape,a,i),p=c;c=n.runWebGLProgram(h,[c],c.dtype),n.disposeIntermediateTensorInfo(p)}if(o!=null){let h=T.getUndoAxesPermutation(o),p=Er({inputs:{x:c},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),p}return c}function ZSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return dV(km.Prod,a,n,i,s,o)}var QSe={kernelName:Rh,backendName:"webgl",kernelFunc:ZSe};function JSe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return dV(km.Sum,a,n,i,s,o)}var eIe={kernelName:Tu,backendName:"webgl",kernelFunc:JSe};function tIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(a.shape.length===1){let l=n.readSync(a.dataId),d=n.readSync(i.dataId),u=UW(l,d,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,u)}else if(a.shape.length===2){let l=n.bufferSync(a),d=n.bufferSync(i),u=rwe(l,d,s,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}var nIe={kernelName:Gm,backendName:"webgl",kernelFunc:tIe},rIe=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function aIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=s==="NHWC"?a.shape[1]:a.shape[2],d=s==="NHWC"?a.shape[2]:a.shape[3],u=s==="NHWC"?a.shape[3]:a.shape[1],c=l*i,h=d*i,p=u/(i*i),f=s==="NHWC"?[o,c,h,p]:[o,p,c,h],m=new rIe(f,i,s);return n.runWebGLProgram(m,[a],a.dtype)}var iIe={kernelName:Fh,backendName:"webgl",kernelFunc:aIe},cV=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=hr(this.outputShape.length);let i=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels,l="",d="";n&&(r?l="float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?l="float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):l="\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),d="result = activation(result);");let u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}},hV=class{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=hr(this.outputShape.length);let i=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,d=e.filterHeight,u=e.filterWidth,c=u,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+="\n          vec4 xTexelC".concat(g*2,";\n          int xTexelC").concat(g*2,"Ready;\n          vec4 xTexelC").concat(g*2+1,";\n          int xTexelC").concat(g*2+1,"Ready;\n          vec4 xC").concat(g,";");h+="\n    for (int r = 0; r < ".concat(d,"; r++) {\n      ");for(let g=0;g<u;g++)h+="\n          xTexelC".concat(g*2," = vec4(0.0);\n          xTexelC").concat(g*2,"Ready = 0;\n          xTexelC").concat(g*2+1," = vec4(0.0);\n          xTexelC").concat(g*2+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(c+1)/2;g++){let b=g*2;if(h+="\n          xC = xCCorner + ".concat(b*l,";\n          "),o===1){if(b<u&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n              "),l===1&&b>0?h+="\n                xC".concat(b," = vec4(xTexelC").concat(b-2,".zw, xTexelC").concat(b,".xy);\n                "):h+="\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(b," = vec4(previous.zw, xTexelC").concat(b,".xy);\n                  } else {\n                    xC").concat(b," = vec4(0.0, 0.0, xTexelC").concat(b,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                xC").concat(b," = xTexelC").concat(b,";\n                "),b+1<u)){let y=s%2===0?k.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                    xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(b+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(b+1,"Ready = 1;\n                  }\n                  "),l>1?h+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(b+1," = vec4(previous.zw, xTexelC").concat(b+1,".xy);\n                    } else {\n                     xC").concat(b+1," = vec4(0.0, 0.0, xTexelC").concat(b+1,".xy);\n                    }\n                    "):h+="\n                    xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".xy);\n                    ")):y===1?h+="\n                    xC".concat(b+1," = xTexelC").concat(b,";\n                    "):h+="\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                      xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(b+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(b+1,"Ready = 1;\n                    }\n\n                    xC").concat(b+1," = xTexelC").concat(b+1,";\n                    ")}}else b<u&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                  xTexelC").concat(b+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(b+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b+1,"Ready = 1;\n                }\n\n                xC").concat(b," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n              "),b+1<u&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(b+1," = vec4(xTexelC").concat(b+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(b,"Ready == 0) {\n                  xTexelC").concat(b," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(b,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(b,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(b+1,"Ready == 0) {\n                  xTexelC").concat(b+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(b+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(b+1,"Ready = 1;\n                }\n\n                xC").concat(b," = vec4(\n                  xTexelC").concat(b,".xy, xTexelC").concat(b+1,".xy);\n              "),b+1<u&&(h+="\n                  xC".concat(b+1," = vec4(xTexelC").concat(b,".zw, xTexelC").concat(b+1,".zw);\n                "))));b<u&&(h+="\n            wTexel = getW(r, ".concat(b,", d1, q);\n            dotProd += xC").concat(b," * vec4(wTexel.xz, wTexel.xz);\n          "),b+1<u&&(h+="\n              wTexel = getW(r, ".concat(b+1,", d1, q);\n              dotProd += xC").concat(b+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let p="",f="";n&&(r?p="vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?p="vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):p="vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");let m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(m,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}};function sIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:d}=r,u=l;u==null&&(u=[1,1]),k.assert(T.eitherStridesOrDilationsAreOne(s,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(u,"'"));let c=T.computeConv2DInfo(a.shape,i.shape,s,u,o,d,!0),h;Z().getBool("WEBGL_PACK_DEPTHWISECONV")&&c.strideWidth<=2&&c.outChannels/c.inChannels===1?h=new hV(c):h=new cV(c);let p=[[c.padInfo.top,c.padInfo.left],[c.strideHeight,c.strideWidth],[c.dilationHeight,c.dilationWidth],[c.inHeight,c.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",p)}var oIe={kernelName:Nu,backendName:"webgl",kernelFunc:sIe},lIe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},uIe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(o,"; dm++) {\n              int d2 = d1 * ").concat(o," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function dIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:d,filterShape:u}=r,c=T.computeConv2DInfo(a.shape,u,s,o,l,d,!0),h=new lIe(c);return n.runWebGLProgram(h,[a,i],"float32")}var cIe={kernelName:A0,backendName:"webgl",kernelFunc:dIe};function hIe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:d,inputShape:u}=r,c=T.computeConv2DInfo(u,i.shape,s,o,l,d,!0),h=new uIe(c);return n.runWebGLProgram(h,[a,i],"float32")}var pIe={kernelName:R0,backendName:"webgl",kernelFunc:hIe},fIe=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}};function mIe(e){let{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],i=k.sizeFromShape(r.shape),s=be({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new fIe(i),l=n.runWebGLProgram(o,[s],s.dtype),d=be({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),d}var gIe={kernelName:qm,backendName:"webgl",kernelFunc:mIe},bIe=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:d}=e,{top:u,left:c}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(o,"; w++) {\n              int wIn = wBeg + w * ").concat(d,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}};function yIe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,d=T.computeDilation2DInfo(a.shape,i.shape,s,o,"NHWC",l),u,c=new bIe(d);u=n.runWebGLProgram(c,[a,i],"float32");let h=be({inputs:{x:u},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(u),h}var vIe={kernelName:_u,backendName:"webgl",kernelFunc:yIe};function xIe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=T.decodeEinsumEquation(a,i.length);T.checkEinsumDimSizes(s.length,l,i);let{path:d,steps:u}=T.getEinsumComputePath(o,l),c=u.length,h=null,p=s.length,f=[];for(let m=0;m<c;++m){for(let g of u[m]){let{permutationIndices:b,expandDims:y}=T.getEinsumPermutation(p,l[g]),v;T.isIdentityPermutation(b)?v=i[g]:(v=Er({inputs:{x:i[g]},backend:n,attrs:{perm:b}}),f.push(v));let x=v.shape.slice();for(let w=0;w<y.length;++w)x.splice(y[w],0,1);k.arraysEqual(v.shape,x)||(v=be({inputs:{x:v},backend:n,attrs:{shape:x}}),f.push(v)),h===null?h=v:(h=ZE({inputs:{a:v,b:h},backend:n}),f.push(h))}m<c-1&&(d[m]>=0&&(h=qx({inputs:{x:h},backend:n,attrs:{axis:d[m]-(s.length-p),keepDims:!1}}),f.push(h)),p--)}for(let m of f)m!==h&&n.disposeIntermediateTensorInfo(m);return h}var wIe={kernelName:D0,backendName:"webgl",kernelFunc:xIe},kIe="return (x >= 0.0) ? x : (exp(x) - 1.0);",SIe="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",IIe=rt({opSnippet:kIe,packedOpSnippet:SIe}),$Ie={kernelName:Ru,backendName:"webgl",kernelFunc:IIe},CIe="return (b >= 0.0) ? a : a * (b + 1.0);",EIe="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",TIe=e=>{let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zp(EIe,r.shape,a.shape):new au(CIe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},NIe={kernelName:Mh,backendName:"webgl",kernelFunc:TIe},_Ie="\n  return vec4(equal(a, b));\n",AIe="return float(a == b);",RIe=nr({opSnippet:AIe,packedOpSnippet:_Ie,dtype:"bool",cpuKernelImpl:lwe}),DIe={kernelName:Oh,backendName:"webgl",kernelFunc:RIe},FIe='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(T.ERF_P,";\n  float a1 = ").concat(T.ERF_A1,";\n  float a2 = ").concat(T.ERF_A2,";\n  float a3 = ").concat(T.ERF_A3,";\n  float a4 = ").concat(T.ERF_A4,";\n  float a5 = ").concat(T.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n"),MIe=rt({opSnippet:FIe}),OIe={kernelName:Du,backendName:"webgl",kernelFunc:MIe},LIe=Bp+"\n  return exp(x);\n",PIe="\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",pV=rt({opSnippet:LIe,packedOpSnippet:PIe,cpuKernelImpl:uwe,dtype:"float32"}),zIe={kernelName:Fu,backendName:"webgl",kernelFunc:pV};function vS(e){let{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:i}=t,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(k.assert(-(s+1)<=a,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+a+1),o.splice(l,0,1),be({inputs:{x:i},backend:r,attrs:{shape:o}})}var BIe={kernelName:Lh,backendName:"webgl",kernelFunc:vS},GR="return exp(x) - 1.0;",WIe=rt({opSnippet:GR,packedOpSnippet:GR,cpuKernelImpl:dwe}),VIe={kernelName:Mu,backendName:"webgl",kernelFunc:WIe},qR=class{constructor(e,t,n){this.variableNames=["real","imag"];let r=t[1];this.outputShape=t;let a=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),i=n?"".concat(r,".0"):"1.0",s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));this.userCode="\n      const float exponentMultiplier = ".concat(a,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(s,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(i,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}};function fV(e,t,n){let r=n.texData.get(e.dataId),a=k.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],s=a/i,o=be({inputs:{x:e},backend:n,attrs:{shape:[s,i]}}),l=o.shape,d=new qR("real",l,t),u=new qR("imag",l,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(d,c,"float32"),p=n.runWebGLProgram(u,c,"float32"),f=Yo({inputs:{real:h,imag:p},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p);let m=be({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(f),m}function UIe(e){let{inputs:t,backend:n}=e,{input:r}=t;return fV(r,!1,n)}var HIe={kernelName:F0,backendName:"webgl",kernelFunc:UIe},jIe=class{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}};function Ug(e){let{backend:t,attrs:n}=e,{shape:r,value:a}=n,{dtype:i}=n;if(i=i||k.inferDtype(a),i==="string"){let s=k.getArrayFromDType(i,k.sizeFromShape(r));return s.fill(a),t.makeTensorInfo(r,i,s)}else{let s=new jIe(r,a),o=[[a]];return t.runWebGLProgram(s,[],i,o)}}var GIe={kernelName:Km,backendName:"webgl",kernelFunc:Ug},qIe=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}},KIe={kernelName:Ph,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,a=new qIe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},KR="return floor(x);",XIe=rt({opSnippet:KR,packedOpSnippet:KR,cpuKernelImpl:cwe}),YIe={kernelName:Ou,backendName:"webgl",kernelFunc:XIe},ZIe="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",QIe="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",JIe=nr({opSnippet:ZIe,packedOpSnippet:QIe,dtype:"int32"}),e$e={kernelName:Lu,backendName:"webgl",kernelFunc:JIe},t$e=class{constructor(e){this.variableNames=["A"];let t=Dr(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}},n$e=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=Dr(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},r$e={kernelName:iv,backendName:"webgl",kernelFunc:a$e},Zd,c1=Z().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function a$e(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:a}=t,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[l,d]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[d,l],c=[d,l,i];if(o||s){let m=Z().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Zd==null||m!==c1)&&(c1=m,Zd=document.createElement("canvas").getContext("2d",{willReadFrequently:c1})),Zd.canvas.width=l,Zd.canvas.height=d,Zd.drawImage(a,0,0,l,d),a=Zd.canvas}let h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=Ca.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);let p=Z().getBool("WEBGL_PACK")?new n$e(c):new t$e(c),f=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),f}function i$e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:d,dataFormat:u,dilations:c,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=r,m=T.convertConv2DDataFormat(u),g=T.computeConv2DInfo(a.shape,i.shape,l,c,d,h,!1,m),b,y=[],v=s!=null,x=o!=null,w=p==="leakyrelu",$=()=>{let E=[a,i],A=(R,N)=>{if(N==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){let I=be({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return y.push(I),I}return R};if(v&&E.push(A(s,u)),x&&E.push(A(o,u)),w){let R=n.makeTensorInfo([],"float32",k.createScalarValue(f,"float32"));E.push(R),y.push(R)}return E};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))b=lV({x:a,filter:i,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else if(g.strideWidth<=2&&m==="channelsLast"&&Z().getBool("WEBGL_EXP_CONV")){let E=p?xm(p,!0):null,A=new oV(g,v,E,x,w),R=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=$();b=n.runWebGLProgram(A,N,"float32",R)}else if(Z().getBool("WEBGL_CONV_IM2COL"))b=uV({x:a,filter:i,convInfo:g,backend:n,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{let E=p?xm(p,!1):null,A=new sV(g,v,E,x,w),R=$();b=n.runWebGLProgram(A,R,"float32")}let C=be({inputs:{x:b},backend:n,attrs:{shape:g.outShape}});return y.push(b),y.forEach(E=>n.disposeIntermediateTensorInfo(E)),C}var s$e={kernelName:Vl,backendName:"webgl",kernelFunc:i$e};function o$e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:d,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:p}=r,f=[],m=u;m==null&&(m=[1,1]),k.assert(T.eitherStridesOrDilationsAreOne(l,m),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(l," and dilations '").concat(m,"'"));let g=T.computeConv2DInfo(a.shape,i.shape,l,m,d,c,!0),b=Z().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=h?xm(h,b):null,v=[a,i],x=s!=null,w=o!=null,$=h==="leakyrelu";if(x&&v.push(s),w&&v.push(o),$){let R=n.makeTensorInfo([],"float32",k.createScalarValue(p,"float32"));v.push(R),f.push(R)}let C;b?C=new hV(g,x,y,w,$):C=new cV(g,x,y,w,$);let E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],A=n.runWebGLProgram(C,v,"float32",E);return f.forEach(R=>n.disposeIntermediateTensorInfo(R)),A}var l$e={kernelName:Ul,backendName:"webgl",kernelFunc:o$e},u$e=class{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let a=It(n.length),i="\n    int index;";for(let s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(a," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}};function d$e(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=a.shape,s=i[i.length-1],o=k.sizeFromShape(r.shape),[l,d,u,c]=T.prepareAndValidate(r,a),h=be({inputs:{x:a},backend:n,attrs:{shape:[d,s]}}),p=be({inputs:{x:r},backend:n,attrs:{shape:[k.sizeFromShape(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){let b=n.readSync(a.dataId),y=n.bufferSync(r),v=hwe(b,y,r.dtype,d,s,u,c,r.shape,o);return n.makeTensorInfo(l,r.dtype,v.values)}let f=new u$e(s,c,[d,u],r.shape),m=n.runWebGLProgram(f,[p,h],p.dtype),g=be({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}var c$e={kernelName:Bh,backendName:"webgl",kernelFunc:d$e},h$e=class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=It(this.rank),r=p$e(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}};function p$e(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<e.length;a++)a===2?r.push("index"):r.push("".concat(n[a]));return r.join()}function mV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r,l=k.parseAxisParam(s,a.shape)[0];if(Z().get("DEBUG")){let y=n.readSync(i.dataId),v=a.shape[l];for(let x=0;x<y.length;++x){let w=y[x];k.assert(w<=v-1&&w>=0,()=>"GatherV2: the index value ".concat(w," is not in [0, ").concat(v-1,"]"))}}let d=T.segment_util.collectGatherOpShapeInfo(a,i,l,o),u=k.sizeFromShape(i.shape),c=[],h=be({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),p=be({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,u/d.batchSize]}});c.push(h),c.push(p);let f=[d.batchSize,d.outerSize,u/d.batchSize,d.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){let y=n.bufferSync(p),v=n.bufferSync(h),x=pwe(v,y,f);return c.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(d.outputShape,x.dtype,x.values)}let m=new h$e(h.shape,f),g=n.runWebGLProgram(m,[h,p],h.dtype);c.push(g);let b=be({inputs:{x:g},backend:n,attrs:{shape:d.outputShape}});return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),b}var f$e={kernelName:zh,backendName:"webgl",kernelFunc:mV},m$e="return float(a > b);",g$e="\n  return vec4(greaterThan(a, b));\n",b$e=nr({opSnippet:m$e,packedOpSnippet:g$e,cpuKernelImpl:fwe,dtype:"bool"}),y$e={kernelName:Wh,backendName:"webgl",kernelFunc:b$e},v$e="return float(a >= b);",x$e="\n  return vec4(greaterThanEqual(a, b));\n",w$e=nr({opSnippet:v$e,packedOpSnippet:x$e,dtype:"bool",cpuKernelImpl:mwe}),k$e={kernelName:zu,backendName:"webgl",kernelFunc:w$e};function S$e(e){let{inputs:t,backend:n}=e,{input:r}=t;return fV(r,!0,n)}var I$e={kernelName:M0,backendName:"webgl",kernelFunc:S$e},$$e="return float(!isnan(x) && !isinf(x));",C$e=rt({opSnippet:$$e,dtype:"bool"}),E$e={kernelName:Wu,backendName:"webgl",kernelFunc:C$e},T$e="return float(isinf(x));",N$e=rt({opSnippet:T$e,dtype:"bool"}),_$e={kernelName:Vu,backendName:"webgl",kernelFunc:N$e},A$e="return float(isnan(x));",R$e=rt({opSnippet:A$e,dtype:"bool"}),D$e={kernelName:Uu,backendName:"webgl",kernelFunc:R$e},F$e="return float(a < b);",M$e="\n  return vec4(lessThan(a, b));\n",O$e=nr({opSnippet:F$e,packedOpSnippet:M$e,cpuKernelImpl:gwe,dtype:"bool"}),L$e={kernelName:Vh,backendName:"webgl",kernelFunc:O$e},P$e="return float(a <= b);",z$e="\n  return vec4(lessThanEqual(a, b));\n",B$e=nr({opSnippet:P$e,packedOpSnippet:z$e,cpuKernelImpl:bwe,dtype:"bool"}),W$e={kernelName:Uh,backendName:"webgl",kernelFunc:B$e};function V$e(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=ywe(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}var U$e={kernelName:Hh,backendName:"webgl",kernelFunc:V$e},H$e=Bp+"\n  return x < 0.0 ? 0./0. : log(x);\n",j$e="\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",G$e=rt({opSnippet:H$e,packedOpSnippet:j$e,cpuKernelImpl:vwe}),q$e={kernelName:ju,backendName:"webgl",kernelFunc:G$e},K$e=Bp+"\n  return log(1.0 + x);\n",X$e=rt({opSnippet:K$e}),Y$e={kernelName:Gu,backendName:"webgl",kernelFunc:X$e},Z$e="return float(a >= 1.0 && b >= 1.0);",Q$e="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",J$e=nr({opSnippet:Z$e,packedOpSnippet:Q$e,dtype:"bool"}),e2e={kernelName:jh,backendName:"webgl",kernelFunc:J$e},t2e="return float(!(x >= 1.0));",n2e=rt({opSnippet:t2e}),r2e={kernelName:Gh,backendName:"webgl",kernelFunc:n2e},a2e="return float(a >= 1.0 || b >= 1.0);",i2e="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",s2e=nr({opSnippet:a2e,packedOpSnippet:i2e,dtype:"bool"}),o2e={kernelName:qh,backendName:"webgl",kernelFunc:s2e},l2e=class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];let i=t,s=e[3]-1;this.outputShape=e;let o,l="float(".concat(n,") + float(").concat(r,") * sum");a===.5?o="inversesqrt(".concat(l,")"):a===1?o="1.0/(".concat(l,")"):o="exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")}},u2e=class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let i=t,s=e[3]-1;this.outputShape=e;let o,l="float(".concat(n,") + float(").concat(r,") * sum");a===.5?o="inversesqrt(".concat(l,")"):a===1?o="1.0/(".concat(l,")"):o="exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")}},d2e=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r,d=Z().getBool("WEBGL_PACK_NORMALIZATION")?new u2e(a.shape,i,s,o,l):new l2e(a.shape,i,s,o,l);return n.runWebGLProgram(d,[a],a.dtype)},c2e={kernelName:qu,backendName:"webgl",kernelFunc:d2e},h2e=class{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(a,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(a,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}},p2e=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:d,beta:u}=r,c=new h2e(a.shape,o,l,d,u);return n.runWebGLProgram(c,[a,i,s],a.dtype)},f2e={kernelName:Kh,backendName:"webgl",kernelFunc:p2e};function m2e(e,t,n,r){let a=k.sizeFromShape(t),i=k.sizeFromShape(e.shape)/a,s=be({inputs:{x:e},attrs:{shape:[i,a]},backend:r}),o=zd(s,e.dtype,"max",r),l=be({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}function gV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),d=l,u=T.getAxesPermutation(d,o),c=u!=null,h=n.shouldExecuteOnCPU([a]),p=a;if(c){if(h){let y=n.texData.get(p.dataId).values,v=new Array(o);for(let $=0;$<v.length;$++)v[$]=a.shape[u[$]];let x=XE(y,a.shape,a.dtype,u,v);p=n.makeTensorInfo(v,a.dtype);let w=n.texData.get(p.dataId);w.values=x}else p=Gx(a,u,n);d=T.getInnerMostAxes(d.length,o)}T.assertAxesAreInnerMostDims("max",d,o);let[f,m]=T.computeOutAndReduceShapes(p.shape,d),g=f;s&&(g=T.expandShapeToKeepDim(f,l));let b;if(h){let y=n.texData.get(p.dataId).values,v=xwe(y,k.sizeFromShape(m),g,a.dtype);b=n.makeTensorInfo(g,a.dtype);let x=n.texData.get(b.dataId);x.values=v}else b=m2e(p,m,g,n);return c&&n.disposeIntermediateTensorInfo(p),b}var g2e={kernelName:Ku,backendName:"webgl",kernelFunc:gV},b2e=YE+"\n  return max(a, b);\n",y2e="\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Pd+"\n  return result;\n",v2e=nr({opSnippet:b2e,packedOpSnippet:y2e,cpuKernelImpl:wwe}),x2e={kernelName:Xu,backendName:"webgl",kernelFunc:v2e};function w2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;Fp(a,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r,d=1;k.assert(T.eitherStridesOrDilationsAreOne(s,d),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(d,"'"));let u=T.computePool2DInfo(a.shape,i,s,d,o,l);if(u.filterWidth===1&&u.filterHeight===1&&k.arraysEqual(u.inShape,u.outShape))return ba({inputs:{x:a},backend:n});let c=new wm(u,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}var k2e={kernelName:Yu,backendName:"webgl",kernelFunc:w2e};function S2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dataFormat:l,dimRoundingMode:d}=r,u=[1,1,1],c=T.computePool3DInfo(a.shape,i,s,u,o,d,l),h=new QE(c,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}var I2e={kernelName:Xh,backendName:"webgl",kernelFunc:S2e},$2e=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,s=a-1-e.padInfo.top,o=i-1-e.padInfo.left,l=a*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},C2e=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=o-1-e.padInfo.front,c=l-1-e.padInfo.top,h=d-1-e.padInfo.left,p=o*l*d-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(o,";\n           wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(d," +\n                  wR * ").concat(d," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};function E2e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:d,dimRoundingMode:u}=r,c=[1,1,1],h=T.computePool3DInfo(s.shape,o,l,c,d,u),p=new QE(h,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new C2e(h),g=n.runWebGLProgram(m,[a,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}var T2e={kernelName:Ym,backendName:"webgl",kernelFunc:E2e};function N2e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;Fp([i,s],"maxPoolGrad");let{filterSize:l,strides:d,pad:u,dimRoundingMode:c}=r,h=T.computePool2DInfo(o.shape,l,d,1,u,c),p=!0,f=new wm(h,"max",p),m=n.runWebGLProgram(f,[o],o.dtype),g=new $2e(h),b=n.runWebGLProgram(g,[a,m],o.dtype);return n.disposeIntermediateTensorInfo(m),b}var _2e={kernelName:Xm,backendName:"webgl",kernelFunc:N2e};function A2e(e,t,n,r){let a=new wm(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");a=new wm(n,"max",!0,!0,t);let s=r.runWebGLProgram(a,[e],"float32");return[i,s]}var R2e={kernelName:Zm,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=t,l=n;k.assert(r.shape.length===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,"."));let d=[1,1];k.assert(T.eitherStridesOrDilationsAreOne(i,d),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(d,"'"));let u=T.computePool2DInfo(r.shape,a,i,d,s),[c,h]=A2e(r,o,u,l);return[c,h]}};function D2e(e,t,n,r){let a=k.sizeFromShape(t),i=k.sizeFromShape(e.shape)/a,s=be({inputs:{x:e},attrs:{shape:[i,a]},backend:r}),o=zd(s,"float32","mean",r),l=be({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}var F2e={kernelName:Zu,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:a,axis:i}=t,s=n,o=r.shape.length,l=k.parseAxisParam(i,r.shape),d=l,u=T.getAxesPermutation(d,o),c=u!=null,h=s.shouldExecuteOnCPU([r]),p=[],f=r;if(c){if(h){let v=s.texData.get(f.dataId).values,x=new Array(o);for(let C=0;C<x.length;C++)x[C]=r.shape[u[C]];let w=XE(v,r.shape,r.dtype,u,x);f=s.makeTensorInfo(x,r.dtype);let $=s.texData.get(f.dataId);$.values=w}else f=Gx(r,u,s);p.push(f),d=T.getInnerMostAxes(d.length,o)}T.assertAxesAreInnerMostDims("sum",d,o);let[m,g]=T.computeOutAndReduceShapes(f.shape,d),b=m;a&&(b=T.expandShapeToKeepDim(m,l));let y=D2e(f,g,b,s);for(let v of p)s.disposeIntermediateTensorInfo(v);return y}};function M2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=k.parseAxisParam(i,a.shape),d=l,u=T.getAxesPermutation(d,o),c=a;u!=null&&(c=Er({inputs:{x:a},backend:n,attrs:{perm:u}}),d=T.getInnerMostAxes(d.length,a.shape.length)),T.assertAxesAreInnerMostDims("min",d,o);let[h,p]=T.computeOutAndReduceShapes(c.shape,d),f=k.sizeFromShape(p),m=be({inputs:{x:c},backend:n,attrs:{shape:[-1,f]}}),g=zd(m,m.dtype,"min",n),b;if(s){let y=T.expandShapeToKeepDim(h,l);b=be({inputs:{x:g},backend:n,attrs:{shape:y}})}else b=be({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(c),b}var O2e={kernelName:Qu,backendName:"webgl",kernelFunc:M2e},L2e=YE+"\n  return min(a, b);\n",P2e="\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Pd+"\n  return result;\n",z2e=nr({opSnippet:L2e,packedOpSnippet:P2e,cpuKernelImpl:kwe}),B2e={kernelName:Ju,backendName:"webgl",kernelFunc:z2e},W2e=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((d,u)=>d[0]+e[u]+d[1]);let r=e.length,a=It(r),i=t.map(d=>d[0]).join(","),s=t.map((d,u)=>d[0]+e[u]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l=n==="reflect"?0:1;if(r===1){this.userCode="\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ");return}this.userCode="\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(a," coords = outC - start;\n        setOutput(getX(").concat(o,"));\n      }\n    ")}},V2e=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((p,f)=>p[0]+e[f]+p[1]);let r=e.length,a=It(r),i=t.map(p=>p[0]).join(","),s=t.map((p,f)=>p[0]+e[f]).join(","),o=xr("rc",r),l=xr("source",r),d="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=r===1?"source":"vec2(".concat(l.slice(-2).join(),")"),c=n==="reflect"?0:1,h="";if(r===1){let p="\n        ".concat(a," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(c,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(c,";\n        }\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(d,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{let p="\n        ".concat(a," source = rc;\n        ").concat(a," lt = ").concat(a,"(lessThan(source, start));\n        ").concat(a," gte = ").concat(a,"(greaterThanEqual(source, end));\n        ").concat(a," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(c,") +\n                gte * ((end - 1) * 2 - source + ").concat(c,");\n        source -= start;\n      ");h="\n        ".concat(a," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(d,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(o[r-2]," += 1;\n        if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(p,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(o[r-1]," += 1;\n          if(").concat(d,") {\n            ").concat(p,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}},U2e=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:a,mode:i}=n,s=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new V2e(r.shape,a,i):new W2e(r.shape,a,i);return t.runWebGLProgram(s,[r],r.dtype)},H2e={kernelName:ed,backendName:"webgl",kernelFunc:U2e},j2e="if (b == 0.0) return NAN;\n  return mod(a, b);",G2e="\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+Pd+"\n  return result;\n",q2e=nr({opSnippet:j2e,packedOpSnippet:G2e}),K2e={kernelName:td,backendName:"webgl",kernelFunc:q2e},X2e=class{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}},Y2e="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",Z2e="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",bV=nr({opSnippet:Y2e,packedOpSnippet:Z2e,checkOutOfBounds:!0}),Q2e={kernelName:Au,backendName:"webgl",kernelFunc:bV},XR="return a - b;",yV=nr({opSnippet:XR,packedOpSnippet:XR,supportsComplex:!0,cpuKernelImpl:Uwe}),J2e={kernelName:Cd,backendName:"webgl",kernelFunc:yV};function vV(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=k.parseAxisParam([i],a.shape),o=gV({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=T.expandShapeToKeepDim(o.shape,s),d=be({inputs:{x:o},backend:n,attrs:{shape:l}}),u=yV({inputs:{a,b:d},backend:n}),c=pV({inputs:{x:u},backend:n}),h=qx({inputs:{x:c},backend:n,attrs:{axis:s,keepDims:!1}}),p=be({inputs:{x:h},backend:n,attrs:{shape:l}}),f=bV({inputs:{a:c,b:p},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}var eCe={kernelName:Id,backendName:"webgl",kernelFunc:vV};function tCe(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r,l=o?a:vV({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),d=l.shape[0],u=l.shape[1],c=new X2e(d,u,i),h=[[s]],p=n.runWebGLProgram(c,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),p}var nCe={kernelName:Yh,backendName:"webgl",kernelFunc:tCe},rCe=ri+"\n  return -x;\n",aCe="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";function iCe(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){let i=n.texData.get(r.dataId),[s,o]=Iwe(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let a;return Z().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new io(r.shape,aCe):a=new ji(r.shape,rCe),n.runWebGLProgram(a,[r],r.dtype)}var sCe={kernelName:Zh,backendName:"webgl",kernelFunc:iCe},oCe=as.nonMaxSuppressionV3Impl;function lCe(e){T.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,d=n.readSync(a.dataId),u=n.readSync(i.dataId),{selectedIndices:c}=oCe(d,u,s,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}var uCe={kernelName:Jh,backendName:"webgl",kernelFunc:lCe},dCe=as.nonMaxSuppressionV4Impl;function cCe(e){T.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:d}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:h,validOutputs:p}=dCe(u,c,s,o,l,d);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}var hCe={kernelName:ep,backendName:"webgl",kernelFunc:cCe},pCe=as.nonMaxSuppressionV5Impl;function fCe(e){T.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:d}=r,u=n.readSync(a.dataId),c=n.readSync(i.dataId),h=s,p=o,f=l,m=d,{selectedIndices:g,selectedScores:b}=pCe(u,c,h,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}var mCe={kernelName:tp,backendName:"webgl",kernelFunc:fCe},gCe=class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}},bCe=e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,d=k.sizeFromShape(a.shape),u=new gCe(d,s,o,l),c=be({inputs:{x:a},backend:n,attrs:{shape:[d]}}),h=n.runWebGLProgram(u,[c],i);n.disposeIntermediateTensorInfo(c);let p=[...a.shape,s],f=be({inputs:{x:h},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(h),f},yCe={kernelName:rd,backendName:"webgl",kernelFunc:bCe};function _v(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){let a=Vg({inputs:{input:r},backend:n}),i=_v({inputs:{x:a},backend:n}),s=Kx({inputs:{input:r},backend:n}),o=_v({inputs:{x:s},backend:n}),l=Yo({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return Ug({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}var vCe={kernelName:xp,backendName:"webgl",kernelFunc:_v};function xV(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let a=Vg({inputs:{input:r},backend:n}),i=xV({inputs:{x:a},backend:n}),s=Kx({inputs:{input:r},backend:n}),o=_v({inputs:{x:s},backend:n}),l=Yo({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return Ug({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}var xCe={kernelName:np,backendName:"webgl",kernelFunc:xV};function wCe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(t.length===1)return vS({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(u=>{k.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),k.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(u=>{let c=vS({inputs:{input:u},backend:n,attrs:{dim:a}});return o.push(c),c}),d=iV({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),d}var kCe={kernelName:rp,backendName:"webgl",kernelFunc:wCe},SCe=class{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((l,d)=>l[0]+e[d]+l[1]);let r=e.length,a=It(r),i=t.map(l=>l[0]).join(","),s=t.map((l,d)=>l[0]+e[d]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode="\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ");return}this.userCode="\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(a," coords = outC - start;\n          setOutput(getX(").concat(o,"));\n        }\n      }\n    ")}},ICe=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((f,m)=>f[0]+e[m]+f[1]);let r=e.length,a=It(r),i=t.map(f=>f[0]).join(","),s=t.map((f,m)=>f[0]+e[m]).join(","),o=xr("rc",r),l=xr("source",r),d="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=r===1?"source":"vec2(".concat(l.slice(-2).join(),")"),c=["".concat(a," rc = outputLoc;"),"".concat(o[r-1]," += 1;\n       if(").concat(d,") {\n      "),r===1?"":"}\n       rc = outputLoc;\n       ".concat(o[r-2]," += 1;\n       if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {"),r===1?"":"  ".concat(o[r-1]," += 1;\n         if(").concat(d,") {")],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="";for(let f=0,m=r===1?2:4;f<m;f++)p+="\n        ".concat(c[f],"\n        if (").concat(h,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(a," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=r===1?"} ":"}}",this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}},wV=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;if(k.sizeFromShape(a.shape)===0){let d=i.map((u,c)=>u[0]+a.shape[c]+u[1]);return Ug({backend:n,attrs:{shape:d,value:s,dtype:a.dtype}})}let o=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ICe(a.shape,i,s):new SCe(a.shape,i,s),l=[[s]];return n.runWebGLProgram(o,[a],a.dtype,l)},$Ce={kernelName:ad,backendName:"webgl",kernelFunc:wV},CCe="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",ECe="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+Pd+"\n  return result;\n",TCe=nr({opSnippet:CCe,packedOpSnippet:ECe}),NCe={kernelName:id,backendName:"webgl",kernelFunc:TCe};function _Ce(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=[],d=k.parseAxisParam(i,a.shape),u=d,c=T.getAxesPermutation(u,o),h=a;c!=null&&(h=Er({inputs:{x:a},backend:n,attrs:{perm:c}}),u=T.getInnerMostAxes(u.length,o),l.push(h)),T.assertAxesAreInnerMostDims("prod",u,o);let p;if(n.shouldExecuteOnCPU([h])){let f=n.texData.get(h.dataId).values,{outVals:m,outShape:g,outDtype:b}=Cwe(h.shape,h.dtype,f,u);p=n.makeTensorInfo(g,b,m)}else{let[f,m]=T.computeOutAndReduceShapes(h.shape,u),g=k.sizeFromShape(m),b=be({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),y=V0(a.dtype),v=zd(b,y,"prod",n);p=be({inputs:{x:v},backend:n,attrs:{shape:f}}),l.push(b),l.push(v)}if(s){l.push(p);let f=T.expandShapeToKeepDim(p.shape,d);p=be({inputs:{x:p},backend:n,attrs:{shape:f}})}return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),p}var ACe={kernelName:od,backendName:"webgl",kernelFunc:_Ce};function RCe(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:o}=r,l=a.map(b=>n.readSync(b.dataId)),d=a.map(b=>b.shape),u=n.readSync(i.dataId),c=n.readSync(s.dataId),[h,p,f]=Ewe(l,d,u,i.shape,i.dtype,c,s.shape,o),m=h.map(b=>n.makeTensorInfo([b.length],"int32",b)),g=n.makeTensorInfo(f,i.dtype,p);return m.concat([g])}var DCe={kernelName:L0,backendName:"webgl",kernelFunc:RCe};function FCe(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[d,u]=Twe(s,r.shape,r.dtype,o,a.shape,l,i.shape),c=n.makeTensorInfo([d.length],"int32",d),h=n.makeTensorInfo([u.length],r.dtype,u);return[c,h]}var MCe={kernelName:P0,backendName:"webgl",kernelFunc:FCe};function OCe(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,d=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(s.dataId),h=o.map(g=>n.readSync(g.dataId)),p=o.map(g=>g.shape),[f,m]=Nwe(d,a.shape,u,i.shape,i.dtype,c,s.shape,h,p,l);return n.makeTensorInfo(f,i.dtype,m)}var LCe={kernelName:z0,backendName:"webgl",kernelFunc:OCe},kV=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=_we(r,a,i,s);return t.makeTensorInfo([o.length],s,o)},PCe={kernelName:Qm,backendName:"webgl",kernelFunc:kV},zCe="return 1.0 / x;",BCe=rt({opSnippet:zCe}),WCe={kernelName:ld,backendName:"webgl",kernelFunc:BCe},VCe=ri+"\n  return (x < 0.0) ? 0.0 : x;\n",UCe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",HCe=rt({opSnippet:VCe,packedOpSnippet:UCe}),jCe={kernelName:ud,backendName:"webgl",kernelFunc:HCe},GCe=ri+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",qCe="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",KCe=rt({opSnippet:GCe,packedOpSnippet:qCe}),XCe={kernelName:hd,backendName:"webgl",kernelFunc:KCe},YCe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let d=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c;a?c="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":c="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/u[0],",\n          ").concat(d[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(c,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}},ZCe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let d=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c;a?c="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":c="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/u[0],",\n          ").concat(d[1]/u[1],",\n          ").concat(d[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(c,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}};function QCe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,d]=o,u=Z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZCe(a.shape,l,d,i,s):new YCe(a.shape,l,d,i,s);return n.runWebGLProgram(u,[a],"float32")}var JCe={kernelName:cd,backendName:"webgl",kernelFunc:QCe},eEe=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],d=o[0]/l[0],u=o[1]/l[1],c=1/d,h=1/u,p=Math.ceil(c)*2+2,f=Math.ceil(h)*2+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(c,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(a-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}};function tEe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new eEe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}var nEe={kernelName:sp,backendName:"webgl",kernelFunc:tEe},rEe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let d=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0",h;a?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/u[0],",\n          ").concat(d[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(c,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}},aEe=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let d=[r&&t>1?s-1:s,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0",h;a?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/u[0],",\n          ").concat(d[1]/u[1],",\n          ").concat(d[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(c,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}};function iEe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,d]=o,u=Z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new aEe(a.shape,l,d,i,s):new rEe(a.shape,l,d,i,s);return n.runWebGLProgram(u,[a],a.dtype)}var sEe={kernelName:dd,backendName:"webgl",kernelFunc:iEe},oEe=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],d=o[0]/l[0],u=o[1]/l[1],c=1/d,h=1/u,p=Math.ceil(c)*2+2,f=Math.ceil(h)*2+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(c,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(o[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(o[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}};function lEe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new oEe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}var uEe={kernelName:ip,backendName:"webgl",kernelFunc:lEe},dEe=class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,n===1){this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      ");return}let r=s=>t.indexOf(s)!==-1&&e[s]!==1?"".concat(e[s]," - coords[").concat(s,"] - 1"):"coords[".concat(s,"]"),a=e.map((s,o)=>r(o)).join(","),i=It(n);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}},cEe=class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;let r=xr("rc",n),a="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),i="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=It(n);n===1?this.userCode="\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(a,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):this.userCode="\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(o(r.slice()),";\n          if(").concat(a,"){\n            result.g = ").concat(l(r.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(d(r.slice()),";\n            if(").concat(a,") {\n              result.a = ").concat(u(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ");function o(p){return c(p)}function l(p){return p[n-1]="("+p[n-1]+" + 1)",c(p)}function d(p){return p[n-2]="("+p[n-2]+" + 1)",c(p)}function u(p){return p[n-1]="("+p[n-1]+" + 1)",p[n-2]="("+p[n-2]+" + 1)",c(p)}function c(p){let f=e.map((b,y)=>h(y,p)),m=f.join(","),g=f.slice(-2).join(",");return"getChannel(getX(".concat(m,"), vec2(").concat(g,"))")}function h(p,f){return t.indexOf(p)!==-1&&e[p]!==1?"".concat(e[p]," - ").concat(f[p]," - 1"):"".concat(f[p])}}};function hEe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=a.shape.length,o=k.parseAxisParam(i,a.shape);if(s===0)return ba({inputs:{x:a},backend:n});let l=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cEe(a.shape,o):new dEe(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var pEe={kernelName:pd,backendName:"webgl",kernelFunc:hEe},fEe=class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let a="";typeof t=="number"?a="float outputValue = ".concat(t.toFixed(2),";"):a="\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(a,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}},mEe={kernelName:wp,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:i,center:s}=t,o=n,l=new fEe(r.shape,i),[d,u]=T.getImageCenter(s,r.shape[1],r.shape[2]),c=[[d,u,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(l,[r],r.dtype,c)}},gEe="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",bEe=rt({opSnippet:gEe}),yEe={kernelName:fd,backendName:"webgl",kernelFunc:bEe},vEe="return inversesqrt(x);",xEe=rt({opSnippet:vEe,cpuKernelImpl:Awe}),wEe={kernelName:md,backendName:"webgl",kernelFunc:xEe},JE=class{constructor(e,t,n,r,a,i,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;let l=It(a.length),d=It(i.length),u="";n===1?u="i":n===2&&(u="i, j");let c="getIndices(".concat(u,")"),h="";r===1?h="i":r===2&&(h="i, coords[1]");let p="getUpdates(".concat(h,")"),f="";o&&(f="coords[0], coords[1]");let m="getDefaultValue(".concat(f,")"),g=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(l," strides = ").concat(l,"(").concat(a,");\n\n        void main() {\n          ").concat(d," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(m,", sum, float(found)));\n        }\n      ")}},kEe=class{constructor(e,t,n,r,a,i,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;let l=It(a.length),d=It(i.length),u="";n===1?u="i":n===2&&(u="i, j");let c="getIndices(".concat(u,")"),h="";r===1?h="i":r===2&&(h="i, coords[1]");let p="getUpdates(".concat(h,")"),f="";o&&(f="coords[0], coords[1]");let m="getDefaultValue(".concat(f,")"),g=t>1?"strides[j]":"strides",b=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(l," strides = ").concat(l,"(").concat(a,");\n\n        void main() {\n          ").concat(d," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(c,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(b,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(p,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(m,", sum, found));\n        }\n      ")}};function SEe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:d,strides:u,outputSize:c}=T.calculateShapes(i,a,s),h=[c/d,d];if(c===0)return n.makeTensorInfo(s,a.dtype);let p=be({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=be({inputs:{x:i},backend:n,attrs:{shape:[l,d]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g;Z().getBool("WEBGL_PACK")?g=new kEe(l,o,p.shape.length,f.shape.length,u,h):g=new JE(l,o,p.shape.length,f.shape.length,u,h);let b=n.runWebGLProgram(g,[f,p,m],f.dtype),y=be({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(m),y}var IEe={kernelName:op,backendName:"webgl",kernelFunc:SEe},$Ee=class{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let a="while (left < right) {",i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),s=Z().getNumber("WEBGL_VERSION")===2?a:i,o=r==="left"?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(s,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(o," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}};function CEe(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=new $Ee(a.shape[0],a.shape[1],i.shape[1],s),l=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",l)}var EEe={kernelName:up,backendName:"webgl",kernelFunc:CEe},TEe=class{constructor(e,t,n){this.variableNames=["c","a","b"],this.outputShape=t;let r,a;if(n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(n===1)a="resRC",r="resRC";else{let s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[];for(let d=0;d<t.length;d++)l.push("".concat(s[d])),d<e&&o.push("".concat(s[d]));r=o.join(),a=l.join()}let i=It(n);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(a,"));\n        } else {\n          setOutput(getB(").concat(a,"));\n        }\n      }\n    ")}};function NEe(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=new TEe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],Ra(a.dtype,i.dtype))}var _Ee={kernelName:dp,backendName:"webgl",kernelFunc:NEe},AEe="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(T.SELU_SCALEALPHA,";\n  float scale = ").concat(T.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"),REe=rt({opSnippet:AEe}),DEe={kernelName:gd,backendName:"webgl",kernelFunc:REe},FEe=Bp+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",MEe="\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",OEe=rt({opSnippet:FEe,packedOpSnippet:MEe,cpuKernelImpl:Dwe}),LEe={kernelName:xd,backendName:"webgl",kernelFunc:OEe},PEe="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",zEe=rt({opSnippet:PEe}),BEe={kernelName:vd,backendName:"webgl",kernelFunc:zEe},WEe=Bp+"\n  return sin(x);\n",VEe="\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(Pd,"\n  return result;\n"),UEe=rt({opSnippet:WEe,packedOpSnippet:VEe}),HEe={kernelName:bd,backendName:"webgl",kernelFunc:UEe},jEe="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",GEe=rt({opSnippet:jEe}),qEe={kernelName:yd,backendName:"webgl",kernelFunc:GEe},KEe="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",XEe=rt({opSnippet:KEe}),YEe={kernelName:wd,backendName:"webgl",kernelFunc:XEe},ZEe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;k.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((b,y)=>b*y),l=[[0,0]];l.push(...s);for(let b=1+i.length;b<a.shape.length;++b)l.push([0,0]);let d=[],u=wV({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=T.getReshaped(u.shape,i,o,!1),h=T.getPermuted(c.length,i.length,!1),p=T.getReshapedPermuted(u.shape,i,o,!1),f=be({inputs:{x:u},backend:n,attrs:{shape:c}}),m=Er({inputs:{x:f},backend:n,attrs:{perm:h}}),g=be({inputs:{x:m},backend:n,attrs:{shape:p}});return d.push(u),d.push(f),d.push(m),d.forEach(b=>n.disposeIntermediateTensorInfo(b)),g},QEe={kernelName:hp,backendName:"webgl",kernelFunc:ZEe};function JEe(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(r.shape.length!==2)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(a.shape.length!==1)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(s.shape.length!==0)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));let o=n.readSync(r.dataId),l=n.readSync(a.dataId),d=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[c,h,p,f,m]=Mwe(o,r.shape,r.dtype,l,a.dtype,d,u);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var eTe={kernelName:Jm,backendName:"webgl",kernelFunc:JEe};function tTe(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[d,u,c]=Owe(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,d),n.makeTensorInfo([c.length],i.dtype,new Int32Array(c))]}var nTe={kernelName:fp,backendName:"webgl",kernelFunc:tTe};function rTe(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));let s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[d,u]=jW(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,d)}var aTe={kernelName:eg,backendName:"webgl",kernelFunc:rTe};function iTe(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(i.shape.length!==1)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));let s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[d,u]=jW(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,d)}var sTe={kernelName:tg,backendName:"webgl",kernelFunc:iTe};function oTe(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:d,sliceSize:u,strides:c,outputSize:h}=T.calculateShapes(i,a,o),p=!1;if(i.dtype==="string"){let b=n.bufferSync(a),y=n.bufferSync(i),v=k.decodeString(n.readSync(s.dataId)[0]),x=Rwe(b,y,o,h,u,d,l,c,v,p);return n.makeTensorInfo(o,x.dtype,x.values)}let f=new JE(d,l,a.shape.length,i.shape.length,c,[h,1],p),m=n.runWebGLProgram(f,[i,a,s],i.dtype),g=be({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(m),g}var lTe={kernelName:mp,backendName:"webgl",kernelFunc:oTe};function uTe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=k.parseAxisParam(s,a.shape)[0],l=T.prepareSplitSize(a,i,o),d=a.shape.length,u=new Array(d).fill(0),c=a.shape.slice();return l.map(h=>{let p=[...c];p[o]=h;let f=Wp({inputs:{x:a},backend:n,attrs:{begin:u,size:p}});return u[o]+=h,f})}var dTe={kernelName:pp,backendName:"webgl",kernelFunc:uTe},YR="return sqrt(x);",cTe=rt({opSnippet:YR,packedOpSnippet:YR,cpuKernelImpl:Lwe}),hTe={kernelName:kd,backendName:"webgl",kernelFunc:cTe},pTe="return x * x;",fTe=rt({opSnippet:pTe}),mTe={kernelName:ng,backendName:"webgl",kernelFunc:fTe},ZR="return (a - b) * (a - b);",gTe=nr({opSnippet:ZR,packedOpSnippet:ZR}),bTe={kernelName:$d,backendName:"webgl",kernelFunc:gTe};function yTe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");let i=n.readSync(a.dataId),s=T.fromUint8ToStringArray(i),o=Pwe(s,"string",r);return n.makeTensorInfo(a.shape,"string",o)}var vTe={kernelName:rg,backendName:"webgl",kernelFunc:yTe};function xTe({inputs:e,attrs:t,backend:n}){let{x:r}=e,a=ri+"\n    return x > 0.0 ? 1.0 : float(".concat(t.alpha,");\n  "),i=new ji(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}var wTe={kernelName:Uo,backendName:"webgl",kernelFunc:xTe},kTe=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,a=It(n.length),i=It(n.length),s="";if(r===1)s="coords * strides + begin";else{let o=0;s=n.map((l,d)=>(o++,n.length===1?"coords * strides[".concat(d,"] + begin[").concat(d,"]"):"coords[".concat(o-1,"] * strides[").concat(d,"] + begin[").concat(d,"]"))).join(",")}this.userCode="\n      ".concat(a," begin = ").concat(a,"(").concat(e,");\n      ").concat(a," strides = ").concat(a,"(").concat(t,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}};function STe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:d,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:v,strides:x}=En.sliceInfo(a.shape,i,s,o,l,d,u,c,h),w;if(m)w=be({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||b){k.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let C=En.computeOutShape(y,v,x),E=Wp({inputs:{x:a},backend:n,attrs:{begin:y,size:C}});w=be({inputs:{x:E},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([a])){let C=n.readSync(a.dataId),E=Xe(a.shape,a.dtype,C),A=zwe(p,E,x,y);w=n.makeTensorInfo(f,a.dtype,A.values)}else{let C=new kTe(y,x,p);w=n.runWebGLProgram(C,[a],a.dtype)}let $=be({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),$}var ITe={kernelName:gp,backendName:"webgl",kernelFunc:STe};function $Te(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:d}=r,{data:u,dataSplits:c}=t,h=n.readSync(u.dataId),p=n.readSync(c.dataId),[f,m]=Bwe(h,p,a,i,s,o,l,d);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(c.shape,"int32",m)]}var CTe={kernelName:ag,backendName:"webgl",kernelFunc:$Te};function ETe(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(s.shape.length!==0)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));let o=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[d,u,c]=Wwe(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",d),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}var TTe={kernelName:ig,backendName:"webgl",kernelFunc:ETe};function NTe(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let s=n.readSync(i.dataId),o=Vwe(s,a);return n.makeTensorInfo(i.shape,"int32",o)}var _Te={kernelName:sg,backendName:"webgl",kernelFunc:NTe},ATe="return tan(x);",RTe=rt({opSnippet:ATe}),DTe={kernelName:Ed,backendName:"webgl",kernelFunc:RTe},FTe="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",MTe=rt({opSnippet:FTe}),OTe={kernelName:Td,backendName:"webgl",kernelFunc:MTe};function LTe(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=t,{sliceRank:o,numUpdates:l,sliceSize:d,strides:u,outputSize:c}=T.calculateShapes(s,i,a.shape),h=[c/d,d];if(c===0)return n.makeTensorInfo(a.shape,i.dtype);let p=be({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),f=be({inputs:{x:s},backend:n,attrs:{shape:[l,d]}}),m=be({inputs:{x:a},backend:n,attrs:{shape:h}}),g=new JE(l,o,p.shape.length,f.shape.length,u,h,!1,!0),b=n.runWebGLProgram(g,[f,p,m],m.dtype),y=be({inputs:{x:b},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),y}var PTe={kernelName:lp,backendName:"webgl",kernelFunc:LTe},zTe=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[i]*t[i];this.outputShape=n,this.rank=n.length;let r=It(this.rank),a=BTe(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")}};function BTe(e){let t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(t===1)return"imod(resRC, ".concat(e[0],")");let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}function SV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){let o=n.readSync(a.dataId),l=a.dtype==="string"?o.map(c=>k.decodeString(c)):o,d=Xe(a.shape,a.dtype,l),u=Hwe(d,i);return n.makeTensorInfo(u.shape,u.dtype,u.values)}let s=new zTe(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}var WTe={kernelName:Vo,backendName:"webgl",kernelFunc:SV},VTe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}},UTe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}};function ol(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function QR(e){let t=1;for(;t<e;)t*=2;return t}function HTe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r,o=Z().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Z().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),d=a.shape,u=d[d.length-1];if(n.shouldExecuteOnCPU([a])||u<o||i>l){let A=n.readSync(a.dataId),[R,N]=jwe(A,d,a.dtype,i,s);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo(N.shape,N.dtype,N.values)]}if(i===0)return d[d.length-1]=0,[n.makeTensorInfo(d,a.dtype,[]),n.makeTensorInfo(d,"int32",[])];if(u===1)return[a,Ug({attrs:{shape:d,dtype:"int32",value:0},backend:n})];let c=n.texData.get(a.dataId),h=c!==null&&c.isPacked,p=h?n.unpackTensor(a):a,f=k.sizeFromShape(d)/u,m=be({inputs:{x:p},attrs:{shape:[f,u]},backend:n});h&&ol(n,p);let g=QR(i),b=QR(u),y=null,v=()=>y===null?[m,m]:[m,y],x=(A,R,N)=>{let I=v(),F=new VTe(N),L=[[u],[y===null?1:0],[Number.NEGATIVE_INFINITY],[A],[R]],P=y;y=n.runWebGLProgram(F,I,"int32",L),ol(n,P)};for(let A=1;A<g;A*=2){let R=A*2;for(let N=A;N>=1;N/=2)x(R,N,[f,b])}for(let A=b;A>g;A/=2){let R=v(),N=new UTe([f,A/2]),I=[[u],[y===null?1:0],[g]],F=y;y=n.runWebGLProgram(N,R,"int32",I),ol(n,F);let L=g/2,P=L*2;for(let H=L;H>=1;H/=2)x(P,H,y.shape)}let w=y;y=Wp({inputs:{x:y},backend:n,attrs:{begin:0,size:[f,i]}}),ol(n,w);let $=mV({inputs:{x:m,indices:y},backend:n,attrs:{axis:1,batchDims:1}});ol(n,m);let C=d.slice(0,-1);C.push(i),w=y,y=be({inputs:{x:y},attrs:{shape:C},backend:n}),ol(n,w);let E=$;return $=be({inputs:{x:$},attrs:{shape:C},backend:n}),ol(n,E),[$,y]}var jTe={kernelName:bp,backendName:"webgl",kernelFunc:HTe},GTe=class{constructor(e,t,n,r,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;let s=n==="nearest"?1:2,o;switch(r){case"constant":o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4;break;default:o=1;break}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(o," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(o," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(a,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(a,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}};function qTe(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:d}=r,[u,c,h,p]=a.shape,[f,m]=d!=null?d:[c,h],g=[u,f,m,p],b=new GTe(c,h,s,o,l,g);return n.runWebGLProgram(b,[a,i],"float32")}var KTe={kernelName:yp,backendName:"webgl",kernelFunc:qTe};function XTe(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;Fp(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:d}=Gwe(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([d.length],"int32",d)]}var YTe={kernelName:og,backendName:"webgl",kernelFunc:XTe};function ZTe(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a,o=s.shape.length,l=a.shape[i],d=new Array(o-1),u=0;for(let m=0;m<o;m++)m!==i&&(d[u++]=s.shape[m]);let c=[],h=new Array(o).fill(0),p=s.shape.slice();p[i]=1;let f=new Array(l);for(let m=0;m<f.length;m++){h[i]=m;let g=Wp({inputs:{x:s},backend:n,attrs:{begin:h,size:p}}),b=be({inputs:{x:g},backend:n,attrs:{shape:d}});f[m]=b,c.push(g)}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}var QTe={kernelName:vp,backendName:"webgl",kernelFunc:ZTe},JTe=class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,s=i*Math.ceil(a/n);this.outputShape=[r,s];let o="0.0",l="sumValue",d=Math.floor(n/4)*4,u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      "));let p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(o,";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(d,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(d,";\n        if (").concat(u===1,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(u===2,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(u===3,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}};function eNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r,o=a.shape.length,l=[],d=0,u=T.getAxesPermutation([d],o),c=a;u!=null&&(c=Er({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(c),d=T.getInnerMostAxes(1,o)[0]);let h=T.segment_util.computeOutShape(c.shape,d,s),p=k.sizeFromShape([c.shape[d]]),f=be({inputs:{x:c},backend:n,attrs:{shape:[-1,p]}});l.push(f);let m=V0(a.dtype),g=(x,w,$,C,E)=>{let A=x.shape[0],R=x.shape[1],N=T.segment_util.segOpComputeOptimalWindowSize(R,E),I={windowSize:N,inSize:R,batchSize:A,numSegments:E},F=new JTe(I,w),L=n.compileAndRun(F,[x,$],C);if(l.push(L),L.shape[1]===E)return L;let P=kV({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),H=SV({inputs:{x:P},backend:n,attrs:{reps:[R/N]}});return l.push(P),l.push(H),g(L,w,H,C,E)},b=g(f,"unsortedSegmentSum",i,m,s),y=be({inputs:{x:b},backend:n,attrs:{shape:h}}),v=y;if(u!=null){l.push(y);let x=T.getUndoAxesPermutation(u);v=Er({inputs:{x:v},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}var tNe={kernelName:lg,backendName:"webgl",kernelFunc:eNe},nNe=[z1e,W1e,H1e,q1e,X1e,Q1e,eke,nke,ske,lke,cke,fke,bke,wke,Ike,Cke,Tke,Rke,Fke,Oke,Bke,qke,Xke,Jke,tSe,oSe,uSe,pSe,k1e,gSe,wSe,$Se,ASe,FSe,OSe,PSe,BSe,HSe,qSe,YSe,QSe,eIe,nIe,iIe,oIe,cIe,pIe,gIe,vIe,wIe,$Ie,NIe,DIe,OIe,zIe,BIe,VIe,HIe,GIe,KIe,YIe,e$e,r$e,s$e,l$e,c$e,f$e,y$e,k$e,w1e,I$e,vSe,E$e,_$e,D$e,I1e,L$e,W$e,U$e,q$e,Y$e,e2e,r2e,o2e,c2e,f2e,g2e,x2e,k2e,I2e,T2e,_2e,R2e,F2e,O2e,B2e,H2e,K2e,nCe,E1e,sCe,uCe,hCe,mCe,rSe,yCe,xCe,kCe,$Ce,NCe,C1e,ACe,DCe,MCe,LCe,PCe,aSe,Q2e,WCe,jCe,XCe,N1e,JCe,nEe,sEe,uEe,pEe,mEe,yEe,wEe,IEe,EEe,_Ee,DEe,LEe,BEe,HEe,qEe,jke,eCe,YEe,QEe,eTe,nTe,aTe,sTe,lTe,dTe,hTe,mTe,bTe,vTe,wTe,ITe,CTe,TTe,_Te,J2e,O1e,DTe,OTe,PTe,WTe,jTe,KTe,L1e,YTe,QTe,tNe,vCe];for(let e of nNe)ug(e);var ot;(function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"})(ot||(ot={}));var Sm;(function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"})(Sm||(Sm={}));var IV;function rNe(e){IV=e.wasm.cwrap(Wl,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function aNe(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:s,preluActivationWeights:o}=t;if(a.dtype!=="float32"||i.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:d,activation:u,leakyreluAlpha:c}=r,h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,f=0;if(s!=null){let E=n.dataIdMap.get(s.dataId);if(E.shape.length!==1)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(E.shape.length,"."));f=E.id}let m=o==null?0:n.dataIdMap.get(o.dataId).id,g=Sm[u];if(g==null)throw new Error("".concat(u," activation not yet supported for FusedConv2D in the wasm backend."));let b=l?a.shape[2]:a.shape[1],y=d?i.shape[1]:i.shape[2],v=kp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),x=n.makeOutput([...v,b,y],a.dtype),w=n.dataIdMap.get(x.dataId).id,$=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(i.shape).buffer);return IV(h,$,a.shape.length,p,C,i.shape.length,l,d,g,f,m,c||0,w),x}var iNe={kernelName:Wl,backendName:"wasm",setupFunc:rNe,kernelFunc:aNe};function nt(e,t){let n;function r(i){n=i.wasm.cwrap(e,null,["number","number","number"])}function a(i){let{backend:s,inputs:{x:o}}=i,l=s.dataIdMap.get(o.dataId).id,d=s.makeOutput(o.shape,t||o.dtype),u=s.dataIdMap.get(d.dataId).id;return k.sizeFromShape(d.shape)===0||n(l,ot[o.dtype],u),d}return{kernelName:e,backendName:"wasm",setupFunc:r,kernelFunc:a}}var sNe=nt(xh),oNe=nt(cu),lNe=nt(hu);function yn(e,t,n){let r;function a(s){r=s.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])}function i(s){let{backend:o,inputs:l}=s,{a:d,b:u}=l,c=o.dataIdMap.get(d.dataId).id,h=o.dataIdMap.get(u.dataId).id,p=n!=null?n:d.dtype,f=T.assertAndGetBroadcastShape(d.shape,u.shape),m=o.makeOutput(f,p);if(k.sizeFromShape(f)===0)return m;let g=new Uint8Array(new Int32Array(d.shape).buffer),b=new Uint8Array(new Int32Array(u.shape).buffer),y=o.dataIdMap.get(m.dataId).id;return r(c,g,d.shape.length,h,b,u.shape.length,ot[d.dtype],y),m}return{kernelName:e,backendName:"wasm",setupFunc:a,kernelFunc:i}}var uNe=yn(Bo),$V;function dNe(e){$V=e.wasm.cwrap(pu,null,["array","number","number","number"])}function cNe(e){let{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(k.sizeFromShape(r.shape)===0)return r;let a=t.map(o=>n.dataIdMap.get(o.dataId).id),i=new Uint8Array(new Int32Array(a).buffer),s=n.dataIdMap.get(r.dataId).id;return $V(i,a.length,ot[r.dtype],s),r}var hNe={kernelName:pu,backendName:"wasm",setupFunc:dNe,kernelFunc:cNe};function Xx(e){let{inputs:{x:t},backend:n}=e;if(t.dtype==="string")return wr(n.readSync(t.dataId),t.shape,t.dtype);let r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var pNe={kernelName:Bu,backendName:"wasm",kernelFunc:Xx},CV;function fNe(e){CV=e.wasm.cwrap(Ss,null,["number","array","number","number","number","array","number"])}function Do(e){let{inputs:t,backend:n,attrs:r}=e,[a,i]=gNe(t.x.shape,r.perm),s=!0;for(let f=0;f<i.length;f++)i[f]!==f&&(s=!1);let o=mNe(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(s){let f=Xx({inputs:t,backend:n});return f.shape=o,f}let d=n.makeOutput(o,l.dtype),u=n.dataIdMap.get(l.dataId).id,c=n.dataIdMap.get(d.dataId).id,h=new Uint8Array(new Int32Array(i).buffer),p=new Uint8Array(new Int32Array(l.shape).buffer);return CV(u,p,l.shape.length,ot[l.dtype],c,h,i.length),d}function mNe(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}function gNe(e,t){let n=[],r=[];for(let a=0;a<e.length;++a)e[a]!==1&&n.push(e[a]),e[t[a]]!==1&&r.push(t[a]);for(let a=0;a<r.length;++a){let i=-1;for(let s=0;s<r.length;++s)r[s]>=a&&(i===-1||r[i]>r[s])&&(i=s);r[i]=a}return[n,r]}var bNe={kernelName:Ss,backendName:"wasm",kernelFunc:Do,setupFunc:fNe};function Zo(e,t,n){let r=e.shape,a=e.shape.length,i=k.parseAxisParam(t,r),s=i,o=T.getAxesPermutation(s,a),l=null,d=!1;if(o!=null){let u=new Array(a);for(let h=0;h<u.length;h++)u[h]=r[o[h]];s=T.getInnerMostAxes(s.length,a),l=Do({inputs:{x:e},attrs:{perm:o},backend:n});let c=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==c&&(d=!0)}return{transposed:l,originalAxes:i,axes:s,inputWasTransposed:d}}var EV;function yNe(e){EV=e.wasm.cwrap(wh,null,["number, number, number"])}function vNe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:d,axes:u,originalAxes:c,inputWasTransposed:h}=Zo(s,a,t);if(h){let y=t.dataIdMap.get(d.dataId).id;l=d,o=y}let p=l.shape.length;T.assertAxesAreInnerMostDims("all",u,p);let[f,m]=T.computeOutAndReduceShapes(l.shape,u),g=k.sizeFromShape(m),b=t.makeOutput(f,s.dtype);if(k.sizeFromShape(l.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;EV(o,g,y)}if(h&&t.disposeData(d.dataId),i){let y=T.expandShapeToKeepDim(b.shape,c);b.shape=y}return b}var xNe={kernelName:wh,backendName:"wasm",setupFunc:yNe,kernelFunc:vNe},TV;function wNe(e){TV=e.wasm.cwrap(kh,null,["number, number, number"])}function kNe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:d,axes:u,originalAxes:c,inputWasTransposed:h}=Zo(s,a,t);if(h){let y=t.dataIdMap.get(d.dataId).id;l=d,o=y}let p=l.shape.length;T.assertAxesAreInnerMostDims("any",u,p);let[f,m]=T.computeOutAndReduceShapes(l.shape,u),g=k.sizeFromShape(m),b=t.makeOutput(f,s.dtype);if(k.sizeFromShape(l.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;TV(o,g,y)}if(h&&t.disposeData(d.dataId),i){let y=T.expandShapeToKeepDim(b.shape,c);b.shape=y}return b}var SNe={kernelName:kh,backendName:"wasm",setupFunc:wNe,kernelFunc:kNe};function NV(e){let t;function n(a){t=a.wasm.cwrap(e,null,["number","number","number","number","number"])}function r(a){let{backend:i,inputs:s,attrs:o}=a,{axis:l}=o,{x:d}=s,u=i.dataIdMap.get(d.dataId).id,c=u,h=d,{transposed:p,axes:f,inputWasTransposed:m}=Zo(d,l,i);if(m){let w=i.dataIdMap.get(p.dataId).id;w!==u&&(h=p,c=w)}let g=h.shape.slice(0,-1),b=i.makeOutput(g,"int32"),y=i.dataIdMap.get(b.dataId).id,v=k.sizeFromShape(b.shape),x=h.shape[f[0]];return t(c,ot[h.dtype],v,x,y),m&&i.disposeData(p.dataId),b}return{kernelName:e,backendName:"wasm",setupFunc:n,kernelFunc:r}}var INe=NV(Sh),$Ne=NV(Ih),CNe=nt(fu),ENe=nt(mu),TNe=nt(gu),NNe=yn(yu),_Ne=nt(bu),_V;function ANe(e){_V=e.wasm.cwrap(vu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function RNe(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,i=r.dataIdMap.get(a.dataId).id,{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=n,u=T.computePool2DInfo(a.shape,s,o,1,l,d),c=u.filterHeight,h=u.filterWidth,p=u.padInfo.top,f=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,b=u.strideHeight,y=u.strideWidth,v=u.inChannels;if(u.dataFormat!=="channelsLast")throw new Error("wasm backend does not support dataFormat:'".concat(u.dataFormat,"'. Please use 'channelsLast'."));if(u.dilationWidth!==1||u.dilationHeight!==1)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(u.dilationHeight,", ").concat(u.dilationWidth,"]."));let x=r.makeOutput(u.outShape,"float32"),w=r.dataIdMap.get(x.dataId).id;return _V(i,a.shape[0],a.shape[1],a.shape[2],c,h,p,f,m,g,b,y,v,w),x}var DNe={kernelName:vu,backendName:"wasm",setupFunc:ANe,kernelFunc:RNe},AV;function FNe(e){AV=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function MNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:d}=r,u=T.computePool3DInfo(a.shape,i,s,1,o,l,d),c=n.makeOutput(u.outShape,a.dtype);return AV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}var ONe={kernelName:$h,backendName:"wasm",setupFunc:FNe,kernelFunc:MNe},RV;function LNe(e){RV=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function PNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=r,u=T.computePool3DInfo(i.shape,s,o,1,l,d),c=n.makeOutput(i.shape,i.dtype);return RV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left,u.filterDepth,u.filterHeight,u.filterWidth),c}var zNe={kernelName:Um,backendName:"wasm",setupFunc:LNe,kernelFunc:PNe},DV;function BNe(e){DV=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function WNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l}=r,d=T.computePool2DInfo(i.shape,s,o,1,l),u=n.makeOutput(i.shape,i.dtype);return DV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,d.batchSize,d.inChannels,d.inHeight,d.inWidth,d.outHeight,d.outWidth,d.strideHeight,d.strideWidth,d.dilationHeight,d.dilationWidth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.top,d.padInfo.left,d.filterHeight,d.filterWidth),u}var VNe={kernelName:Vm,backendName:"wasm",setupFunc:BNe,kernelFunc:WNe};function Wr(e){let{inputs:t,attrs:n}=e,{x:r}=t,{shape:a}=n,i=k.sizeFromShape(r.shape),s=k.inferFromImplicitShape(a,i);return k.assert(i===k.sizeFromShape(s),()=>"new shape: ".concat(s,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var UNe={kernelName:ap,backendName:"wasm",kernelFunc:Wr},FV;function HNe(e){FV=e.wasm.cwrap(xu,null,["number","array","number","number","array","number","number","number","number"])}function jNe(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:s,transposeB:o}=r;if(a.dtype!=="float32"||i.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=a.shape.length,d=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],c=o?i.shape[d-1]:i.shape[d-2],h=s?a.shape[l-1]:a.shape[l-2],p=o?i.shape[d-2]:i.shape[d-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=k.sizeFromShape(f),b=k.sizeFromShape(m),y=kp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);k.assert(u===c,()=>"Error in matMul: inner shapes (".concat(u,") and (").concat(c,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(s," and transposeB=").concat(o," must match."));let v=s?[g,u,h]:[g,h,u],x=o?[b,p,c]:[b,c,p],w=Wr({inputs:{x:a},backend:n,attrs:{shape:v}}),$=Wr({inputs:{x:i},backend:n,attrs:{shape:x}}),C=n.dataIdMap.get(w.dataId).id,E=n.dataIdMap.get($.dataId).id,A=s?w.shape[2]:w.shape[1],R=o?$.shape[1]:$.shape[2],N=Math.max(g,b),I=n.makeOutput([N,A,R],w.dtype),F=n.dataIdMap.get(I.dataId).id,L=new Uint8Array(new Int32Array(w.shape).buffer),P=new Uint8Array(new Int32Array($.shape).buffer);return FV(C,L,w.shape.length,E,P,$.shape.length,s,o,F),n.disposeData(w.dataId),n.disposeData($.dataId),I.shape=y,I}var GNe={kernelName:xu,backendName:"wasm",setupFunc:HNe,kernelFunc:jNe};function iu(e){let{inputs:{x:t},attrs:{begin:n,size:r},backend:a}=e,[i,s]=En.parseSliceParams(t,n,r),o=En.isSliceContinous(t.shape,i,s),l=a.readSync(t.dataId),d=a.makeOutput(s,t.dtype),u=k.computeStrides(t.shape),c=a.dataIdMap.get(d.dataId);if(o){let f=En.computeFlatOffset(i,u);return t.dtype==="string"?c.stringBytes=l.slice(f,f+k.sizeFromShape(s)):a.typedArrayFromHeap(d).set(l.subarray(f,f+k.sizeFromShape(s))),d}if(t.dtype==="string"){let f=Iv(l,i,s,t.shape,t.dtype);return c.stringBytes=f,d}let h=a.typedArrayFromHeap(d),p=t.shape.length;if(p===2)qNe(l,u[0],h,i,s);else if(p===3)KNe(l,u[0],u[1],h,i,s);else if(p===4)XNe(l,u[0],u[1],u[2],h,i,s);else{let f=Iv(l,i,s,t.shape,t.dtype);h.set(f)}return d}function qNe(e,t,n,r,a){let i=0,s=r[0],o=r[1],l=s+a[0];for(let d=s;d<l;d++){let u=d*t+o;n.set(e.subarray(u,u+a[1]),i),i+=a[1]}}function KNe(e,t,n,r,a,i){let s=0,o=a[0],l=a[1],d=a[2],u=o+i[0],c=l+i[1];for(let h=o;h<u;h++)for(let p=l;p<c;p++){let f=h*t+p*n+d;r.set(e.subarray(f,f+i[2]),s),s+=i[2]}}function XNe(e,t,n,r,a,i,s){let o=0,l=i[0],d=i[1],u=i[2],c=l+s[0],h=d+s[1],p=u+s[2],f=i[3];for(let m=l;m<c;m++)for(let g=d;g<h;g++)for(let b=u;b<p;b++){let y=m*t+g*n+b*r+f;a.set(e.subarray(y,y+s[3]),o),o+=s[3]}}var YNe={kernelName:cp,backendName:"wasm",kernelFunc:iu};function ZNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r,o=i.reduce((b,y)=>b*y),l=T.getReshaped(a.shape,i,o),d=T.getPermuted(l.length,i.length),u=T.getReshapedPermuted(a.shape,i,o),c=T.getSliceBeginCoords(s,i.length),h=T.getSliceSize(u,s,i.length),p=Wr({inputs:{x:a},backend:n,attrs:{shape:l}}),f=Do({inputs:{x:p},backend:n,attrs:{perm:d}}),m=Wr({inputs:{x:f},backend:n,attrs:{shape:u}}),g=iu({inputs:{x:m},backend:n,attrs:{begin:c,size:h}});return n.disposeData(p.dataId),n.disposeData(f.dataId),n.disposeData(p.dataId),g}var QNe={kernelName:Ch,backendName:"wasm",kernelFunc:ZNe},MV;function JNe(e){MV=e.wasm.cwrap(Eh,null,["number","number","boolean","number","number","number"])}function e_e(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,weights:i}=n,{size:s}=r,o=i.shape.reduce((c,h)=>c*h,1)!==0,l=a.shape.length===1?[s]:[a.shape[0],s],d=t.makeOutput(l,i.dtype);function u(c){return t.dataIdMap.get(c.dataId).id}return MV(u(a),s,o,u(i),ot[i.dtype],u(d)),d}var t_e={kernelName:Eh,backendName:"wasm",setupFunc:JNe,kernelFunc:e_e},n_e=yn(Th);function r_e(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.typedArrayFromHeap(r),s=n.typedArrayFromHeap(a),o=T.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeOutput([o.length],"int32",void 0,new Int32Array(o))}var a_e={kernelName:Hm,backendName:"wasm",kernelFunc:r_e};function Qo(e){let{inputs:{x:t},attrs:{dtype:n},backend:r}=e,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var i_e={kernelName:wu,backendName:"wasm",kernelFunc:Qo},s_e=nt(ku),OV;function o_e(e){OV=e.wasm.cwrap(Wo,null,["number","number","number","number"])}function l_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:s}=r,o=n.dataIdMap.get(a.dataId).id,l=n.makeOutput(a.shape,a.dtype),d=n.dataIdMap.get(l.dataId).id;return OV(o,i,s,d),l}var u_e={kernelName:Wo,backendName:"wasm",setupFunc:o_e,kernelFunc:l_e};function LV(e){let{inputs:t,backend:n}=e,r=k.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=t.map(p=>p.shape);T.assertParamsConsistent(a,r);let i=T.computeOutShape(t.map(p=>p.shape),r),s=t.filter(p=>k.sizeFromShape(p.shape)>0);if(s.length===1)return Xx({inputs:{x:s[0]},backend:n});let o=n.makeOutput(i,t[0].dtype);if(k.sizeFromShape(i)===0)return o;if(s[0].dtype==="string"){let p=s.map(v=>{let x=[-1,k.sizeFromShape(v.shape.slice(r))];return Wr({inputs:{x:v},backend:n,attrs:{shape:x}})}),f=p.map(v=>({vals:n.readSync(v.dataId),shape:v.shape}));i=T.computeOutShape(p.map(v=>v.shape),1);let m=p[0].shape[0]===1,g=CE(f,i,t[0].dtype,m),b=T.computeOutShape(s.map(v=>v.shape),r);o.shape=b;let y=n.dataIdMap.get(o.dataId);return y.stringBytes=T.fromStringArrayToUint8(g),p.forEach(v=>n.disposeData(v.dataId)),o}let l=k.sizeFromShape(s[0].shape.slice(0,r)),d=0,u=s.map(p=>{let f=k.sizeFromShape(p.shape.slice(r));return d+=f,f}),c=s.map(p=>n.typedArrayFromHeap(p)),h=n.typedArrayFromHeap(o);for(let p=0;p<l;p++){let f=p*d;for(let m=0;m<c.length;m++){let g=u[m],b=p*g,y=c[m].subarray(b,b+g);h.set(y,f),f+=g}}return o}var d_e={kernelName:Nh,backendName:"wasm",kernelFunc:LV},PV;function c_e(e){PV=e.wasm.cwrap(Su,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function h_e(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(i.dataId).id,{strides:l,dilations:d,pad:u,dimRoundingMode:c,dataFormat:h}=n,p=T.convertConv2DDataFormat(h),f=T.computeConv2DInfo(a.shape,i.shape,l,d,u,c,!1,p),m=f.filterHeight,g=f.filterWidth,b=f.padInfo.top,y=f.padInfo.right,v=f.padInfo.bottom,x=f.padInfo.left,w=f.dilationHeight,$=f.dilationWidth,C=f.strideHeight,E=f.strideWidth,A=f.inChannels,R=f.outChannels,N=f.padInfo.type==="SAME"?1:0;if(f.dataFormat!=="channelsLast")throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));let I=r.makeOutput(f.outShape,"float32"),F=r.dataIdMap.get(I.dataId).id;return PV(s,a.shape[0],a.shape[1],a.shape[2],o,m,g,b,y,v,x,N,w,$,C,E,A,R,F),I}var p_e={kernelName:Su,backendName:"wasm",setupFunc:c_e,kernelFunc:h_e},zV;function f_e(e){zV=e.wasm.cwrap(Iu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function m_e(e){let{backend:t,inputs:n,attrs:r}=e,{dy:a,filter:i}=n,{strides:s,pad:o,dataFormat:l,dimRoundingMode:d,inputShape:u}=r,c=1,h=T.convertConv2DDataFormat(l),p=T.computeConv2DInfo(u,i.shape,s,c,o,d,!1,h),{batchSize:f,filterHeight:m,filterWidth:g,inChannels:b,inHeight:y,inWidth:v,outChannels:x,outHeight:w,outWidth:$,strideHeight:C,strideWidth:E}=p,A=m-1-p.padInfo.top,R=g-1-p.padInfo.left,N=p.dataFormat==="channelsLast",I=k.computeStrides(p.inShape),F=k.computeStrides(a.shape),[L,P,H]=k.computeStrides(i.shape),X=I[0],M=N?I[1]:I[2],B=N?I[2]:1,V=N?1:I[1],K=F[0],Q=N?F[1]:F[2],ee=N?F[2]:1,ie=N?1:F[1],se=t.makeOutput(p.inShape,"float32"),ge=t.dataIdMap.get(se.dataId).id,fe=t.dataIdMap.get(a.dataId).id,pe=t.dataIdMap.get(i.dataId).id;return zV(fe,pe,f,m,g,y,v,b,w,$,x,C,E,A,R,L,P,H,X,M,B,V,K,Q,ee,ie,ge),se}var g_e={kernelName:Iu,backendName:"wasm",setupFunc:f_e,kernelFunc:m_e},BV;function b_e(e){BV=e.wasm.cwrap($u,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function y_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;if(a.dtype!=="float32")throw new Error("Tensor x must have dtype float32, got ".concat(a.dtype));if(i.dtype!=="float32")throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let d=T.computeConv3DInfo(a.shape,i.shape,s,l,o),u=n.makeOutput(d.outShape,a.dtype);return BV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,d.batchSize,d.inDepth,d.inHeight,d.inWidth,d.inChannels,d.outDepth,d.outHeight,d.outWidth,d.outChannels,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.filterDepth,d.filterHeight,d.filterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left),u}var v_e={kernelName:$u,backendName:"wasm",setupFunc:b_e,kernelFunc:y_e},WV;function x_e(e){WV=e.wasm.cwrap(_h,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function w_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;if(a.dtype!=="float32")throw new Error("Tensor dy must have dtype float32, got ".concat(a.dtype));if(i.dtype!=="float32")throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let d=T.computeConv3DInfo(a.shape,l,s,1,o),u=n.makeOutput(d.filterShape,i.dtype);return WV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,d.batchSize,d.inDepth,d.inHeight,d.inWidth,d.inChannels,d.outDepth,d.outHeight,d.outWidth,d.outChannels,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.filterDepth,d.filterHeight,d.filterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left),u}var k_e={kernelName:_h,backendName:"wasm",setupFunc:x_e,kernelFunc:w_e},VV;function S_e(e){VV=e.wasm.cwrap(Ah,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function I_e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;if(a.dtype!=="float32")throw new Error("Tensor dy must have dtype float32, got ".concat(a.dtype));if(i.dtype!=="float32")throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let d=T.computeConv3DInfo(l,i.shape,o,1,s),u=n.makeOutput(d.inShape,a.dtype);return VV(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,d.batchSize,d.inDepth,d.inHeight,d.inWidth,d.inChannels,d.outDepth,d.outHeight,d.outWidth,d.outChannels,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.filterDepth,d.filterHeight,d.filterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left),u}var $_e={kernelName:Ah,backendName:"wasm",setupFunc:S_e,kernelFunc:I_e},C_e=nt(Cu),E_e=nt(Eu),xS;(function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"})(xS||(xS={}));var UV;function T_e(e){UV=e.wasm.cwrap(Dh,null,["number","number","number","number","array","number","number","number","number","number"])}function N_e(e){let{backend:t,inputs:n,attrs:r}=e,{method:a,extrapolationValue:i,cropSize:s}=r,{image:o,boxes:l,boxInd:d}=n,u=l.shape[0],[c,h]=s,p=[u,c,h,o.shape[3]],f=t.dataIdMap.get(o.dataId),m;o.dtype!=="float32"&&(m=Qo({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),f=t.dataIdMap.get(m.dataId));let g=f.id,b=t.dataIdMap.get(l.dataId).id,y=t.dataIdMap.get(d.dataId).id,v=t.makeOutput(p,"float32"),x=t.dataIdMap.get(v.dataId).id,w=new Uint8Array(new Int32Array(o.shape).buffer);return UV(g,b,y,u,w,c,h,xS[a],i,x),m!=null&&t.disposeData(m.dataId),v}var __e={kernelName:Dh,backendName:"wasm",setupFunc:T_e,kernelFunc:N_e},HV;function A_e(e){HV=e.wasm.cwrap(Rh,null,["number","number","number","number","number","number"])}function R_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r,l=a.shape.length;k.assert(a.dtype==="float32"||a.dtype==="int32",()=>"cumprod does not support ".concat(a.dtype," tensors in the WASM backend"));let d=T.getAxesPermutation([i],l),u=a;d!==null&&(u=Do({inputs:{x:a},attrs:{perm:d},backend:n}));let c=T.getInnerMostAxes(1,l)[0];T.assertAxesAreInnerMostDims("cumprod",[c],l);let h=n.makeOutput(u.shape,u.dtype),p=u.shape[c],f=n.dataIdMap.get(u.dataId).id,m=n.dataIdMap.get(h.dataId).id;HV(f,s?1:0,o?1:0,p,m,ot[a.dtype]);let g=h;if(d!==null){let b=T.getUndoAxesPermutation(d);g=Do({inputs:{x:h},attrs:{perm:b},backend:n}),n.disposeData(u.dataId),n.disposeData(h.dataId)}return g}var D_e={kernelName:Rh,backendName:"wasm",setupFunc:A_e,kernelFunc:R_e},jV;function F_e(e){jV=e.wasm.cwrap(Tu,null,["number","number","number","number","number","number"])}function M_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r,l=a.shape.length;k.assert(a.dtype==="float32"||a.dtype==="int32",()=>"cumsum does not support ".concat(a.dtype," tensors in the WASM backend"));let d=T.getAxesPermutation([i],l),u=a;d!==null&&(u=Do({inputs:{x:a},attrs:{perm:d},backend:n}));let c=T.getInnerMostAxes(1,l)[0];T.assertAxesAreInnerMostDims("cumsum",[c],l);let h=n.makeOutput(u.shape,u.dtype),p=u.shape[c],f=n.dataIdMap.get(u.dataId).id,m=n.dataIdMap.get(h.dataId).id;jV(f,s?1:0,o?1:0,p,m,ot[a.dtype]);let g=h;if(d!==null){let b=T.getUndoAxesPermutation(d);g=Do({inputs:{x:h},attrs:{perm:b},backend:n}),n.disposeData(u.dataId),n.disposeData(h.dataId)}return g}var O_e={kernelName:Tu,backendName:"wasm",setupFunc:F_e,kernelFunc:M_e},GV;function L_e(e){GV=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function P_e(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,weights:i}=n,{size:s,binaryOutput:o}=r,l=i.shape.reduce((h,p)=>h*p,1)!==0,d=a.shape.length===1?[s]:[a.shape[0],s],u=t.makeOutput(d,i.dtype);function c(h){return t.dataIdMap.get(h.dataId).id}return GV(c(a),new Uint8Array(new Int32Array(a.shape).buffer),a.shape.length,s,l,c(i),ot[i.dtype],o,c(u)),u}var z_e={kernelName:Gm,backendName:"wasm",setupFunc:L_e,kernelFunc:P_e},qV;function B_e(e){qV=e.wasm.cwrap(Fh,null,["number","number","number","array","number","array","array","number","number"])}function W_e(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=s==="NHWC"?a.shape[1]:a.shape[2],d=s==="NHWC"?a.shape[2]:a.shape[3],u=s==="NHWC"?a.shape[3]:a.shape[1],c=l*i,h=d*i,p=u/(i*i),f=s==="NHWC"?[o,c,h,p]:[o,p,c,h],m=t.makeOutput(f,"float32"),g=t.dataIdMap.get(a.dataId).id,b=new Uint8Array(new Int32Array(k.computeStrides(a.shape)).buffer),y=new Uint8Array(new Int32Array(f).buffer),v=new Uint8Array(new Int32Array(k.computeStrides(f)).buffer),x=t.dataIdMap.get(m.dataId).id;return qV(g,i,s==="NHWC"?1:0,b,a.shape.length-1,y,v,f.length,x),m}var V_e={kernelName:Fh,backendName:"wasm",setupFunc:B_e,kernelFunc:W_e},KV;function U_e(e){KV=e.wasm.cwrap(Nu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function H_e(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(i.dataId).id,{strides:l,dilations:d,pad:u,dimRoundingMode:c}=n,h=d==null?[1,1]:d,p=T.computeConv2DInfo(a.shape,i.shape,l,h,u,c,!0),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,b=p.padInfo.right,y=p.padInfo.bottom,v=p.padInfo.left,x=p.dilationHeight,w=p.dilationWidth,$=p.strideHeight,C=p.strideWidth,E=p.inChannels,A=p.outChannels,R=p.padInfo.type==="SAME"?1:0;if(p.dataFormat!=="channelsLast")throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));let N=r.makeOutput(p.outShape,"float32"),I=r.dataIdMap.get(N.dataId).id;return KV(s,a.shape[0],a.shape[1],a.shape[2],o,f,m,g,b,y,v,R,x,w,$,C,E,A,I),N}var j_e={kernelName:Nu,backendName:"wasm",setupFunc:U_e,kernelFunc:H_e},XV;function G_e(e){XV=e.wasm.cwrap("Diag",null,["number","number","number","number"])}function q_e(e){let{inputs:t,backend:n}=e,{x:r}=t,a=k.sizeFromShape(r.shape),i=n.makeOutput([...r.shape,...r.shape],r.dtype);return XV(n.dataIdMap.get(r.dataId).id,ot[r.dtype],a,n.dataIdMap.get(i.dataId).id),i}var K_e={kernelName:qm,backendName:"wasm",setupFunc:G_e,kernelFunc:q_e},YV;function X_e(e){YV=e.wasm.cwrap(_u,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Y_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;if(a.dtype!==i.dtype)throw new Error("Dilation2D error: x must have the same dtype as filter. Got ".concat(a.dtype," and ").concat(i.dtype));let d=T.computeDilation2DInfo(a.shape,i.shape,s,o,"NHWC",l),u=n.makeOutput(d.outShape,a.dtype);return YV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,ot[a.dtype],d.batchSize,d.inChannels,d.inHeight,d.inWidth,d.outHeight,d.outWidth,d.strideHeight,d.strideWidth,d.dilationHeight,d.dilationWidth,d.filterHeight,d.filterWidth,d.padInfo.top,d.padInfo.left),u}var Z_e={kernelName:_u,backendName:"wasm",setupFunc:X_e,kernelFunc:Y_e},ZV;function Q_e(e){ZV=e.wasm.cwrap(Kc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function J_e(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:d}=r;if(a.dtype!==i.dtype||a.dtype!==s.dtype)throw new Error("Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ".concat(a.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));let u=T.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",d),c=n.makeOutput(i.shape,i.dtype);return ZV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(c.dataId).id,ot[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),c}var eAe={kernelName:Kc,backendName:"wasm",setupFunc:Q_e,kernelFunc:J_e},QV;function tAe(e){QV=e.wasm.cwrap(qc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function nAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:d}=r;if(a.dtype!==i.dtype||a.dtype!==s.dtype)throw new Error("Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ".concat(a.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));let u=T.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",d),c=n.makeOutput(a.shape,a.dtype);return QV(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(c.dataId).id,ot[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),c}var rAe={kernelName:qc,backendName:"wasm",setupFunc:tAe,kernelFunc:nAe},aAe=nt(Ru),JV;function iAe(e){JV=e.wasm.cwrap(Mh,null,["number","number","number"])}function sAe(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=n.makeOutput(a.shape,"float32"),s=o=>n.dataIdMap.get(o.dataId).id;return JV(s(a),s(r),s(i)),i}var oAe={kernelName:Mh,backendName:"wasm",setupFunc:iAe,kernelFunc:sAe},lAe=!1,uAe=yn(Oh,lAe,"bool"),dAe=nt(Du),cAe=nt(Fu,"float32");function wS(e){let{inputs:t,attrs:n,backend:r}=e,{input:a}=t,{dim:i}=n,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(k.assert(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),Wr({inputs:{x:a},backend:r,attrs:{shape:o}})}var hAe={kernelName:Lh,backendName:"wasm",kernelFunc:wS},pAe=nt(Mu,"float32");function eU(e){let{attrs:{shape:t,value:n,dtype:r},backend:a}=e,i=a.makeOutput(t,r);return a.typedArrayFromHeap(i).fill(n),i}var fAe={kernelName:Km,backendName:"wasm",kernelFunc:eU},tU;function mAe(e){tU=e.wasm.cwrap(Ph,null,["number","number","number","number","number","number"])}function gAe(e){let{inputs:t,backend:n}=e,{image:r}=t,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,[o,l,d,u]=r.shape;return tU(i,o,l,d,u,s),a}var bAe={kernelName:Ph,backendName:"wasm",kernelFunc:gAe,setupFunc:mAe},yAe=nt(Ou),vAe=yn(Lu),nU;function xAe(e){nU=e.wasm.cwrap(Pu,null,["number","number","number","number","number","number","number"])}function wAe(e){let{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:a}=r,{x:i,mean:s,variance:o,offset:l,scale:d}=n,u=t.dataIdMap.get(i.dataId).id,c=t.dataIdMap.get(s.dataId).id,h=t.dataIdMap.get(o.dataId).id,p=l!=null?t.dataIdMap.get(l.dataId).id:0,f=d!=null?t.dataIdMap.get(d.dataId).id:0,m=t.makeOutput(i.shape,i.dtype);if(k.sizeFromShape(i.shape)===0)return m;let g=t.dataIdMap.get(m.dataId).id;return nU(u,c,h,p,f,a,g),m}var kAe={kernelName:Pu,backendName:"wasm",setupFunc:xAe,kernelFunc:wAe},rU;function SAe(e){rU=e.wasm.cwrap(Vl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function IAe(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:d,dilations:u,dataFormat:c,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=n,m=T.computeConv2DInfo(a.shape,i.shape,l,u,d,h),g=Sm[p];if(g==null)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));let b=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,v=m.outChannels,x=0;if(s!=null){let ee=r.dataIdMap.get(s.dataId);if(ee.shape.length!==1)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(ee.shape.length,"."));if(ee.shape[0]!==v)throw new Error("FusedConv2D bias shape (".concat(ee.shape,") does not match the number of output channels (").concat(v,")"));x=ee.id}let w=m.filterHeight,$=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,A=m.padInfo.bottom,R=m.padInfo.left,N=m.dilationHeight,I=m.dilationWidth,F=m.strideHeight,L=m.strideWidth,P=m.inChannels,H=m.padInfo.type==="SAME"?1:0,X=m.batchSize,M=m.inHeight,B=m.inWidth;if(c!=="NHWC")throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(c,"'. Please use 'NHWC'."));let V=r.makeOutput(m.outShape,"float32"),K=r.dataIdMap.get(V.dataId).id,Q=o==null?0:r.dataIdMap.get(o.dataId).id;return rU(b,X,M,B,y,w,$,x,C,E,A,R,H,N,I,F,L,P,v,g,Q,f||0,K),V}var $Ae={kernelName:Vl,backendName:"wasm",setupFunc:SAe,kernelFunc:IAe},aU;function CAe(e){aU=e.wasm.cwrap(Ul,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function EAe(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:d,dilations:u,dataFormat:c,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=n,m=T.computeConv2DInfo(a.shape,i.shape,l,u,d,h,!0),g=Sm[p];if(g==null)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));let b=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,v=m.outChannels,x=0;if(s!=null){let ee=r.dataIdMap.get(s.dataId);if(ee.shape.length!==1)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(ee.shape.length,"."));if(ee.shape[0]!==v)throw new Error("FusedDepthwiseConv2D bias shape (".concat(ee.shape,") does not match the number of output channels (").concat(v,")"));x=ee.id}let w=m.filterHeight,$=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,A=m.padInfo.bottom,R=m.padInfo.left,N=m.dilationHeight,I=m.dilationWidth,F=m.strideHeight,L=m.strideWidth,P=m.inChannels,H=m.padInfo.type==="SAME"?1:0,X=m.batchSize,M=m.inHeight,B=m.inWidth;if(c!=="NHWC")throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(c,"'. Please use 'NHWC'."));let V=r.makeOutput(m.outShape,"float32"),K=r.dataIdMap.get(V.dataId).id,Q=o==null?0:r.dataIdMap.get(o.dataId).id;return aU(b,X,M,B,y,w,$,x,C,E,A,R,H,N,I,F,L,P,v,g,Q,f||0,K),V}var TAe={kernelName:Ul,backendName:"wasm",setupFunc:CAe,kernelFunc:EAe},iU;function NAe(e){iU=e.wasm.cwrap(Bh,null,["number","number","number","number","number","number","array","number"])}function _Ae(e){let{backend:t,inputs:n}=e,{params:r,indices:a}=n,[i,s,o,l]=z2.prepareAndValidate(r,a),d=t.makeOutput(i,r.dtype);if(s===0)return d;let u=a.shape,c=u[u.length-1],h=t.dataIdMap.get(r.dataId).id,p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(d.dataId).id;return iU(h,ot[r.dtype],p,s,c,o,f,m),d}var AAe={kernelName:Bh,backendName:"wasm",setupFunc:NAe,kernelFunc:_Ae},sU;function RAe(e){sU=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function DAe(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,indices:i}=n,{axis:s,batchDims:o}=r,l=k.parseAxisParam(s,a.shape)[0],d=t.readSync(i.dataId),u=a.shape[l];for(let C=0;C<d.length;++C){let E=d[C];k.assert(E<=u-1&&E>=0,()=>"GatherV2: the index value ".concat(E," is not in [0, ").concat(u-1,"]"))}let c=T.segment_util.collectGatherOpShapeInfo(a,i,l,o),h=Wr({inputs:{x:a},attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]},backend:t}),p=k.sizeFromShape(i.shape),f=Wr({inputs:{x:i},attrs:{shape:[c.batchSize,p/c.batchSize]},backend:t}),m=[c.batchSize,c.outerSize,p/c.batchSize,c.sliceSize],g=t.makeOutput(m,a.dtype);if(k.sizeFromShape(a.shape)===0)return g;let b=h.shape.length-1,y=t.dataIdMap.get(h.dataId).id,v=t.dataIdMap.get(f.dataId).id,x=t.dataIdMap.get(g.dataId).id,w=new Uint8Array(new Int32Array(k.computeStrides(h.shape)).buffer),$=new Uint8Array(new Int32Array(k.computeStrides(m)).buffer);return sU(y,ot[a.dtype],w,b,v,c.batchSize,$,x),t.disposeData(h.dataId),t.disposeData(f.dataId),g.shape=c.outputShape,g}var FAe={kernelName:zh,backendName:"wasm",setupFunc:RAe,kernelFunc:DAe},MAe=!1,OAe=yn(Wh,MAe,"bool"),LAe=!1,PAe=yn(zu,LAe,"bool"),zAe=nt(Wu,"bool"),BAe=nt(Vu,"bool"),WAe=nt(Uu,"bool"),oU;function VAe(e){oU=e.wasm.cwrap(Hu,null,["number","number","number","number"])}function UAe(e){let{inputs:{x:t},attrs:{alpha:n},backend:r}=e,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(k.sizeFromShape(t.shape)!==0){let s=r.dataIdMap.get(i.dataId).id;oU(a,ot[t.dtype],n,s)}return i}var HAe={kernelName:Hu,backendName:"wasm",setupFunc:VAe,kernelFunc:UAe},jAe=!1,GAe=yn(Vh,jAe,"bool"),qAe=!1,KAe=yn(Uh,qAe,"bool"),lU;function XAe(e){lU=e.wasm.cwrap(Hh,null,["number","number","number","number"])}function YAe(e){let{attrs:t,backend:n}=e,{start:r,stop:a,num:i}=t,s=Math.floor(i),o=n.makeOutput([s],"float32");return lU(n.dataIdMap.get(o.dataId).id,r,a,s),o}var ZAe={kernelName:Hh,backendName:"wasm",setupFunc:XAe,kernelFunc:YAe},QAe=nt(ju),JAe=nt(Gu),eRe=!1,tRe=yn(jh,eRe,"bool"),nRe=nt(Gh),rRe=!1,aRe=yn(qh,rRe,"bool"),iRe=!1,sRe=yn(T3,iRe,"bool"),uU;function oRe(e){uU=e.wasm.cwrap(qu,null,["number","number","number","number","number","number","number"])}function lRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;if(a.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");let d=n.makeOutput(a.shape,a.dtype);return uU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,a.shape[3],i,s,o,l),d}var uRe={kernelName:qu,backendName:"wasm",setupFunc:oRe,kernelFunc:lRe},dU;function dRe(e){dU=e.wasm.cwrap(Kh,null,["number","number","number","number","number","number","number","number","number"])}function cRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:d,beta:u}=r;if(a.dtype!=="float32"||i.dtype!=="float32"||s.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let c=n.makeOutput(a.shape,a.dtype);return dU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(c.dataId).id,s.shape[3],o,l,d,u),c}var hRe={kernelName:Kh,backendName:"wasm",setupFunc:dRe,kernelFunc:cRe},cU;function pRe(e){cU=e.wasm.cwrap(Ku,null,["number","number","number","number"])}function fRe(e){let{backend:t,inputs:n,attrs:r}=e,{reductionIndices:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:d,axes:u,originalAxes:c,inputWasTransposed:h}=Zo(s,a,t);if(h){let y=t.dataIdMap.get(d.dataId).id;l=d,o=y}let p=l.shape.length;T.assertAxesAreInnerMostDims("max",u,p);let[f,m]=T.computeOutAndReduceShapes(l.shape,u),g=k.sizeFromShape(m),b=t.makeOutput(f,s.dtype);if(k.sizeFromShape(l.shape)!==0){let y=t.dataIdMap.get(b.dataId).id;cU(o,ot[s.dtype],g,y)}if(h&&t.disposeData(d.dataId),i){let y=T.expandShapeToKeepDim(b.shape,c);b.shape=y}return b}var mRe={kernelName:Ku,backendName:"wasm",setupFunc:pRe,kernelFunc:fRe},gRe=yn(Xu),hU;function bRe(e){hU=e.wasm.cwrap(Yu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function yRe(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,i=r.dataIdMap.get(a.dataId).id;k.assert(a.dtype==="float32",()=>"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,"."));let{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=n,u=T.computePool2DInfo(a.shape,s,o,1,l,d),c=u.filterHeight,h=u.filterWidth,p=u.padInfo.top,f=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,b=u.dilationHeight,y=u.dilationWidth,v=u.strideHeight,x=u.strideWidth,w=u.inChannels,$=u.outChannels;if(u.dataFormat!=="channelsLast")throw new Error("wasm backend does not support dataFormat:'".concat(u.dataFormat,"'. Please use 'channelsLast'."));let C=r.makeOutput(u.outShape,"float32"),E=r.dataIdMap.get(C.dataId).id;return hU(i,a.shape[0],a.shape[1],a.shape[2],c,h,p,f,m,g,b,y,v,x,w,$,E),C}var vRe={kernelName:Yu,backendName:"wasm",setupFunc:bRe,kernelFunc:yRe},pU;function xRe(e){pU=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function wRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:d}=r,u=T.computePool3DInfo(a.shape,i,s,1,o,l,d),c=n.makeOutput(u.outShape,a.dtype);return pU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}var kRe={kernelName:Xh,backendName:"wasm",setupFunc:xRe,kernelFunc:wRe},fU;function SRe(e){fU=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function IRe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=r,u=T.computePool3DInfo(i.shape,s,o,1,l,d),c=n.makeOutput(i.shape,i.dtype);return fU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}var $Re={kernelName:Ym,backendName:"wasm",setupFunc:SRe,kernelFunc:IRe},mU;function CRe(e){mU=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function ERe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:d}=r,u=T.computePool2DInfo(i.shape,s,o,1,l,d),c=n.makeOutput(i.shape,i.dtype);return mU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),c}var TRe={kernelName:Xm,backendName:"wasm",setupFunc:CRe,kernelFunc:ERe},gU;function NRe(e){gU=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function _Re(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=r;k.assert(a.shape.length===4,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));let d=[1,1];k.assert(T.eitherStridesOrDilationsAreOne(s,d),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(d,"'"));let u=T.computePool2DInfo(a.shape,i,s,[1,1],o),c=n.makeOutput(u.outShape,a.dtype),h=n.makeOutput(u.outShape,"int32");return gU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,n.dataIdMap.get(h.dataId).id,ot[a.dtype],l,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),[c,h]}var ARe={kernelName:Zm,backendName:"wasm",setupFunc:NRe,kernelFunc:_Re},bU;function RRe(e){bU=e.wasm.cwrap(Zu,null,["number, number, number"])}function DRe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,d=s,{transposed:u,axes:c,originalAxes:h,inputWasTransposed:p}=Zo(s,a,t),f=c;if(p){let x=t.dataIdMap.get(u.dataId).id;x!==o&&(d=u,l=x,f=T.getInnerMostAxes(f.length,d.shape.length))}T.assertAxesAreInnerMostDims("mean",f,d.shape.length);let[m,g]=T.computeOutAndReduceShapes(d.shape,f),b=k.sizeFromShape(g),y=d;d.dtype!=="float32"&&(y=Qo({backend:t,inputs:{x:d},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(y.dataId).id);let v=t.makeOutput(m,"float32");if(k.sizeFromShape(d.shape)!==0){let x=t.dataIdMap.get(v.dataId).id;bU(l,b,x)}if(p&&t.disposeData(u.dataId),i){let x=T.expandShapeToKeepDim(v.shape,h);v.shape=x}return d.dtype!=="float32"&&t.disposeData(y.dataId),v}var FRe={kernelName:Zu,backendName:"wasm",setupFunc:RRe,kernelFunc:DRe},yU;function MRe(e){yU=e.wasm.cwrap(Qu,null,["number","number","number","number"])}function ORe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,d=s,{transposed:u,axes:c,originalAxes:h,inputWasTransposed:p}=Zo(s,a,t);if(p){let v=t.dataIdMap.get(u.dataId).id;v!==o&&(d=u,l=v)}let f=d.shape.length;T.assertAxesAreInnerMostDims("min",c,f);let[m,g]=T.computeOutAndReduceShapes(d.shape,c),b=k.sizeFromShape(g),y=t.makeOutput(m,d.dtype);if(k.sizeFromShape(d.shape)!==0){let v=t.dataIdMap.get(y.dataId).id;yU(l,ot[s.dtype],b,v)}if(p&&t.disposeData(u.dataId),i){let v=T.expandShapeToKeepDim(y.shape,h);y.shape=v}return y}var LRe={kernelName:Qu,backendName:"wasm",setupFunc:MRe,kernelFunc:ORe},PRe=yn(Ju),kS;(function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"})(kS||(kS={}));var vU;function zRe(e){vU=e.wasm.cwrap(ed,null,["number","array","number","number","array","array","number","number"])}function BRe(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,mode:a}}=e,i=r.map((f,m)=>f[0]+t.shape[m]+f[1]),s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),l=n.dataIdMap.get(o.dataId).id,d=new Uint8Array(new Int32Array(t.shape).buffer),u=r.map(f=>f[0]),c=r.map(f=>f[1]),h=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(c).buffer);return vU(s,d,t.shape.length,ot[t.dtype],h,p,kS[a],l),o}var WRe={kernelName:ed,backendName:"wasm",kernelFunc:BRe,setupFunc:zRe},xU;function VRe(e){xU=e.wasm.cwrap(Id,null,["number","number","number","number"])}function wU(e){let{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),s=t.dataIdMap.get(i.dataId).id,o=n.shape[r],l=k.sizeFromShape(n.shape)/o;return k.sizeFromShape(i.shape)===0||xU(a,s,o,l),i}var URe={kernelName:Id,backendName:"wasm",setupFunc:VRe,kernelFunc:wU},kU;function HRe(e){kU=e.wasm.cwrap(Yh,null,["number","number","number","number","number","number"])}function jRe(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;if(a.dtype!=="float32")throw new Error("Tensor logits must have dtype float32, got ".concat(a.dtype));let l=o?a:wU({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),[d,u]=l.shape,c=n.makeOutput([d,i],"int32");return kU(n.dataIdMap.get(l.dataId).id,d,u,i,s,n.dataIdMap.get(c.dataId).id),o||n.disposeData(l.dataId),c}var GRe={kernelName:Yh,backendName:"wasm",setupFunc:HRe,kernelFunc:jRe},qRe=yn(td),KRe=yn(nd),XRe=nt(Zh);function eT(e,t){let n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],s=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:s}}var SU;function YRe(e){SU=e.wasm.cwrap(Jh,"number",["number","number","number","number","number"])}function ZRe(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s}=r,{boxes:o,scores:l}=n,d=t.dataIdMap.get(o.dataId).id,u=t.dataIdMap.get(l.dataId).id,c=SU(d,u,i,a,s),{pSelectedIndices:h,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=eT(t,c);return t.wasm._free(f),t.wasm._free(m),t.makeOutput([p],"int32",h)}var QRe={kernelName:Jh,backendName:"wasm",setupFunc:YRe,kernelFunc:ZRe},IU;function JRe(e){IU=e.wasm.cwrap(ep,"number",["number","number","number","number","number","bool"])}function eDe(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s,padToMaxOutputSize:o}=r,{boxes:l,scores:d}=n,u=t.dataIdMap.get(l.dataId).id,c=t.dataIdMap.get(d.dataId).id,h=IU(u,c,i,a,s,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=eT(t,h);t.wasm._free(m);let b=t.makeOutput([f],"int32",p),y=t.makeOutput([],"int32",g);return[b,y]}var tDe={kernelName:ep,backendName:"wasm",setupFunc:JRe,kernelFunc:eDe},$U;function nDe(e){$U=e.wasm.cwrap(tp,"number",["number","number","number","number","number","number"])}function rDe(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s,softNmsSigma:o}=r,{boxes:l,scores:d}=n,u=t.dataIdMap.get(l.dataId).id,c=t.dataIdMap.get(d.dataId).id,h=$U(u,c,i,a,s,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=eT(t,h);t.wasm._free(g);let b=t.makeOutput([f],"int32",p),y=t.makeOutput([f],"float32",m);return[b,y]}var aDe={kernelName:tp,backendName:"wasm",setupFunc:nDe,kernelFunc:rDe},iDe=!1,sDe=yn(Qh,iDe,"bool"),CU;function oDe(e){CU=e.wasm.cwrap(rd,null,["number","number","number","number","number"])}function lDe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,d=n.makeOutput([...a.shape,s],i),u=n.dataIdMap.get(d.dataId).id,c=n.dataIdMap.get(a.dataId).id;return CU(c,s,o,l,u),d}var uDe={kernelName:rd,backendName:"wasm",setupFunc:oDe,kernelFunc:lDe};function dDe(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}var cDe={kernelName:np,backendName:"wasm",kernelFunc:dDe};function hDe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(t.length===1)return wS({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(u=>{k.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),k.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(u=>{let c=wS({inputs:{input:u},backend:n,attrs:{dim:a}});return o.push(c),c}),d=LV({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(u=>n.disposeData(u.dataId)),d}var pDe={kernelName:rp,backendName:"wasm",kernelFunc:hDe},EU;function fDe(e){EU=e.wasm.cwrap(ad,null,["number","array","number","number","array","array","number","number"])}function mDe(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:a}}=e,i=r.map((f,m)=>f[0]+t.shape[m]+f[1]);if(k.sizeFromShape(t.shape)===0)return eU({backend:n,attrs:{shape:i,value:a,dtype:t.dtype}});let s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),l=n.dataIdMap.get(o.dataId).id,d=new Uint8Array(new Int32Array(t.shape).buffer),u=r.map(f=>f[0]),c=r.map(f=>f[1]),h=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(c).buffer);return EU(s,d,t.shape.length,ot[t.dtype],h,p,a,l),o}var TU={kernelName:ad,backendName:"wasm",kernelFunc:mDe,setupFunc:fDe},gDe=yn(id),NU;function bDe(e){NU=e.wasm.cwrap(sd,null,["number","number","number"])}function yDe(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,o=i,l=r,d=l;l.dtype!=="float32"&&(d=Qo({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),o=n.dataIdMap.get(d.dataId).id);let u=n.makeOutput(r.shape,"float32"),c=n.dataIdMap.get(u.dataId).id;return NU(o,s,c),l.dtype!=="float32"&&n.disposeData(d.dataId),u}var vDe={kernelName:sd,backendName:"wasm",setupFunc:bDe,kernelFunc:yDe},_U;function xDe(e){_U=e.wasm.cwrap(od,null,["number","number","number","number"])}function wDe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,d=s,{transposed:u,axes:c,originalAxes:h,inputWasTransposed:p}=Zo(s,a,t),f=c;if(p){let v=t.dataIdMap.get(u.dataId).id;v!==o&&(d=u,l=v,f=T.getInnerMostAxes(f.length,d.shape.length))}T.assertAxesAreInnerMostDims("prod",f,d.shape.length);let[m,g]=T.computeOutAndReduceShapes(d.shape,f),b=k.sizeFromShape(g),y=t.makeOutput(m,d.dtype);if(k.sizeFromShape(d.shape)!==0){let v=t.dataIdMap.get(y.dataId).id;_U(l,b,ot[y.dtype],v)}if(p&&t.disposeData(u.dataId),i){let v=T.expandShapeToKeepDim(y.shape,h);y.shape=v}return y}var kDe={kernelName:od,backendName:"wasm",setupFunc:xDe,kernelFunc:wDe},SDe=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=NE(r,a,i,s),l=t.makeOutput([o.length],s);return t.typedArrayFromHeap(l).set(o),l},IDe={kernelName:Qm,backendName:"wasm",kernelFunc:SDe},$De=yn(Au),CDe=nt(ld),EDe=nt(ud),TDe=nt(hd),AU;function NDe(e){AU=e.wasm.cwrap(cd,null,["number","number","number","number","number","number","number","number","number","number"])}function _De(e){let{backend:t,inputs:n,attrs:r}=e,{images:a}=n,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,d]=o,[u,c,h,p]=a.shape,f=[u,l,d,p],m=t.dataIdMap.get(a.dataId),g;m.dtype!=="float32"&&(g=Qo({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(g.dataId));let b=m.id,y=t.makeOutput(f,"float32");if(k.sizeFromShape(a.shape)===0)return y;let v=t.dataIdMap.get(y.dataId).id;return AU(b,u,c,h,p,l,d,i?1:0,s?1:0,v),g!=null&&t.disposeData(g.dataId),y}var ADe={kernelName:cd,backendName:"wasm",setupFunc:NDe,kernelFunc:_De},RU;function RDe(e){RU=e.wasm.cwrap(sp,null,["number","number","number","array","array","boolean"])}function DDe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=n.makeOutput(a.shape,"float32"),l=n.dataIdMap.get(a.dataId),d;return l.dtype!=="float32"&&(d=Qo({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(d.dataId)),RU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(a.shape).buffer),new Uint8Array(new Int32Array(i.shape).buffer),s),d!=null&&n.disposeData(d.dataId),o}var FDe={kernelName:sp,backendName:"wasm",setupFunc:RDe,kernelFunc:DDe},DU;function MDe(e){DU=e.wasm.cwrap(dd,null,["number","number","number","number","number","number","number","number","number","number"])}function ODe(e){let{backend:t,inputs:n,attrs:r}=e,{images:a}=n,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,d]=o,[u,c,h,p]=a.shape,f=[u,l,d,p],m=t.makeOutput(f,"float32");if(k.sizeFromShape(a.shape)===0)return m;let g=t.dataIdMap.get(a.dataId),b;g.dtype!=="float32"&&(b=Qo({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(b.dataId));let y=g.id,v=t.dataIdMap.get(m.dataId).id;return DU(y,u,c,h,p,l,d,i?1:0,s?1:0,v),b!=null&&t.disposeData(b.dataId),m}var LDe={kernelName:dd,backendName:"wasm",setupFunc:MDe,kernelFunc:ODe},FU;function PDe(e){FU=e.wasm.cwrap(ip,null,["number","number","number","array","array","boolean"])}function zDe(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=n.makeOutput(a.shape,"float32"),l=n.dataIdMap.get(a.dataId),d;return l.dtype!=="float32"&&(d=Qo({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(d.dataId)),FU(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(a.shape).buffer),new Uint8Array(new Int32Array(i.shape).buffer),s),d!=null&&n.disposeData(d.dataId),o}var BDe={kernelName:ip,backendName:"wasm",setupFunc:PDe,kernelFunc:zDe},MU;function WDe(e){MU=e.wasm.cwrap(pd,null,["number","array","number","array","number","number"])}function VDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=k.parseAxisParam(i,a.shape);if(a.shape.length===0)return Xx({inputs:{x:a},backend:n});let o=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,d=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(s).buffer),c=new Uint8Array(new Int32Array(a.shape).buffer);MU(l,u,s.length,c,a.shape.length,d);let h=Wr({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),h}var UDe={kernelName:pd,backendName:"wasm",kernelFunc:VDe,setupFunc:WDe},OU;function HDe(e){OU=e.wasm.cwrap(wp,null,["number","number","number","number","number","number","number","number","array","number","number"])}function jDe(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{radians:i,fillValue:s,center:o}=r,l=n.makeOutput(a.shape,a.dtype),d=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(l.dataId).id,[c,h,p,f]=a.shape,[m,g]=T.getImageCenter(o,h,p),b=s===0,y=255,v=typeof s=="number"?[s,s,s,b?0:y]:[...s,y],x=new Uint8Array(new Int32Array(v).buffer);return OU(d,c,h,p,f,i,m,g,x,v.length,u),l}var GDe={kernelName:wp,backendName:"wasm",kernelFunc:jDe,setupFunc:HDe},qDe=nt(fd),KDe=nt(md),LU;function XDe(e){LU=e.wasm.cwrap(op,null,["number","number","number","number","number","number","array","number","number"])}function YDe(e){let{backend:t,inputs:n,attrs:r}=e,{indices:a,updates:i}=n,{shape:s}=r,o=t.makeOutput(s,i.dtype);if(k.sizeFromShape(s)===0)return o;let{sliceRank:l,numUpdates:d,sliceSize:u,strides:c,outputSize:h}=px.calculateShapes(i,a,s),p=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(i.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(o.dataId).id;return LU(p,f,ot[i.dtype],l,d,u,m,h,g),o}var ZDe={kernelName:op,backendName:"wasm",setupFunc:XDe,kernelFunc:YDe},PU;function QDe(e){PU=e.wasm.cwrap(up,null,["number","number","number","number","number","number","bool","number"])}function JDe(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r;if(a.dtype!==i.dtype)throw new Error("SearchSorted error: sorted_sequence must have the same dtype as values. Got ".concat(a.dtype," and ").concat(i.dtype));let o=n.makeOutput(i.shape,"int32");function l(d){return n.dataIdMap.get(d.dataId).id}return PU(l(a),l(i),a.shape[0],a.shape[1],i.shape[1],ot[a.dtype],s==="left",l(o)),o}var eFe={kernelName:up,backendName:"wasm",setupFunc:QDe,kernelFunc:JDe},zU;function tFe(e){zU=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function nFe(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(i.dataId).id,d=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(d.dataId).id,c=r.shape.length,h=a.shape.length,p=c===0||c>1||h===1?1:k.sizeFromShape(a.shape.slice(1));return zU(s,o,l,p,u),d}var rFe={kernelName:dp,backendName:"wasm",kernelFunc:nFe,setupFunc:tFe},aFe=nt(gd),BU;function iFe(e){BU=e.wasm.cwrap(xd,null,["number","number"])}function sFe(e){let{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return k.sizeFromShape(a.shape)===0||BU(r,i),a}var oFe={kernelName:"Sigmoid",backendName:"wasm",setupFunc:iFe,kernelFunc:sFe},lFe=nt(vd),uFe=nt(bd),dFe=nt(yd),cFe=nt(wd);function hFe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r,o=k.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);let d=TU.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=T.getReshaped(d.shape,i,o,!1),c=T.getPermuted(u.length,i.length,!1),h=T.getReshapedPermuted(d.shape,i,o,!1),p=Wr({inputs:{x:d},backend:n,attrs:{shape:u}}),f=Do({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Wr({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeData(d.dataId),n.disposeData(p.dataId),n.disposeData(f.dataId),m}var pFe={kernelName:hp,backendName:"wasm",kernelFunc:hFe},WU;function fFe(e){WU=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function mFe(e){let{backend:t,inputs:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=n,o=r.shape[0],l=r.shape[1],d=t.readSync(i.dataId)[0],u=[o+d,l],c=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(s.dataId).id,f=t.makeOutput(u,r.dtype),m=t.dataIdMap.get(f.dataId).id,g=t.makeOutput(u.slice(0,1),a.dtype),b=t.dataIdMap.get(g.dataId).id,y=t.makeOutput([d],"bool"),v=t.dataIdMap.get(y.dataId).id,x=t.makeOutput([o],r.dtype),w=t.dataIdMap.get(x.dataId).id,$=t.makeOutput([4],"int32"),C=t.dataIdMap.get($.dataId).id,E=WU(c,h,ot[a.dtype],o,d,l,p,m,b,v,w,C),A=t.readSync($.dataId),R;switch(A[0]){case 1:{R=T.getSparseFillEmptyRowsIndicesDenseShapeMismatch(A[1]);break}case 2:{R=T.getSparseFillEmptyRowsNegativeIndexErrorMessage(A[1],A[2]);break}case 3:R=T.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(A[1],A[2],A[3]);break;default:R=""}if(t.disposeData($.dataId),R)throw t.disposeData(f.dataId),t.disposeData(g.dataId),t.disposeData(y.dataId),t.disposeData(x.dataId),new Error(R);let N=f,I=g;return E!==u[0]&&(N=iu({inputs:{x:f},attrs:{begin:0,size:[E,l]},backend:t}),I=iu({inputs:{x:g},attrs:{begin:0,size:E},backend:t}),t.disposeData(f.dataId),t.disposeData(g.dataId)),[N,I,y,x]}var gFe={kernelName:Jm,backendName:"wasm",setupFunc:fFe,kernelFunc:mFe},VU;function bFe(e){VU=e.wasm.cwrap(fp,null,["number","number","number","number","number","number","number"])}function yFe(e){let{backend:t,inputs:n}=e,{inputIndices:r,inputShape:a,newShape:i}=n;if(r.shape.length!==2)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(a.shape.length!==1)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(i.shape.length!==1)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=t.dataIdMap.get(r.dataId).id,o=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,d=r.shape[0],u=k.sizeFromShape(i.shape),c=t.makeOutput([d,u],r.dtype),h=t.dataIdMap.get(c.dataId).id,p=t.makeOutput([u],i.dtype),f=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;VU(s,o,l,d,h,f,g);let b=t.readSync(m.dataId),y;switch(b[0]){case 0:{y=T.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(b[1],b[2]);break}case 1:{y=T.getSparseReshapeNegativeOutputDimErrorMessage(b[1],b[2]);break}case 2:y=T.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let v=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));y=T.getSparseReshapeInputOutputMultipleErrorMessage(v,x);break}case 4:{let v=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));y=T.getSparseReshapeInputOutputMismatchErrorMessage(v,x);break}default:y=""}if(t.disposeData(m.dataId),y)throw t.disposeData(c.dataId),t.disposeData(p.dataId),new Error(y);return[c,p]}var vFe={kernelName:fp,backendName:"wasm",setupFunc:bFe,kernelFunc:yFe},UU;function HU(e){UU=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function jU(e,t){let{backend:n,inputs:r}=e,{data:a,indices:i,segmentIds:s}=r,o=i.shape[0],l=n.readSync(s.dataId,o-1,o)[0],d=o>0?l+1:0;if(d<0)throw new Error(T.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let u=a.shape.slice();u[0]=d;let c=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(s.dataId).id,f=n.makeOutput(u,a.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput([4],"int32"),b=n.dataIdMap.get(g.dataId).id;UU(c,ot[a.dtype],a.shape[0],h,p,m,b,t,0);let y=n.readSync(g.dataId),v;switch(y[0]){case 0:{v=T.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break}case 1:{v=T.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break}case 2:v=T.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y[1],y[2]);break;case 3:v=T.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(y[1],y[2],y[3]);break;default:v=""}if(n.disposeData(g.dataId),v)throw n.disposeData(f.dataId),new Error(v);return f}function xFe(e){return jU(e,!0)}var wFe={kernelName:eg,backendName:"wasm",setupFunc:HU,kernelFunc:xFe};function kFe(e){return jU(e,!1)}var SFe={kernelName:tg,backendName:"wasm",setupFunc:HU,kernelFunc:kFe},GU;function IFe(e){GU=e.wasm.cwrap(mp,null,["number","number","number","number","number","number","number","number","array","number","number"])}function $Fe(e){let{backend:t,inputs:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=n,{outputShape:o}=r,l=t.makeOutput(o,s.dtype);if(k.sizeFromShape(o)===0)return l;let{sliceRank:d,numUpdates:u,sliceSize:c,strides:h,outputSize:p}=T.calculateShapes(i,a,o),f=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,g=t.dataIdMap.get(s.dataId).id,b=new Uint8Array(new Int32Array(h).buffer),y=t.dataIdMap.get(l.dataId).id;return GU(f,m,i.shape.length,g,ot[s.dtype],d,u,c,b,p,y),l}var CFe={kernelName:mp,backendName:"wasm",setupFunc:IFe,kernelFunc:$Fe};function EFe(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=n,o=k.parseAxisParam(s,a.shape)[0],l=T.prepareSplitSize(a,i,o),d=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(c=>{let h=[...u];h[o]=c;let p=iu({inputs:{x:a},attrs:{begin:d,size:h},backend:r});return d[o]+=c,p})}var TFe={kernelName:pp,backendName:"wasm",kernelFunc:EFe},NFe=nt(kd),_Fe=nt(ng),AFe=yn($d),qU;function RFe(e){qU=e.wasm.cwrap(Uo,null,["number","number","number","number"])}function DFe(e){let{backend:t,inputs:n,attrs:r}=e,{alpha:a}=r,{x:i}=n,s=t.dataIdMap.get(i.dataId).id,o=t.makeOutput(i.shape,i.dtype),l=t.dataIdMap.get(o.dataId).id;return qU(s,a,ot[i.dtype],l),o}var FFe={kernelName:Uo,backendName:"wasm",setupFunc:RFe,kernelFunc:DFe},KU;function MFe(e){KU=e.wasm.cwrap(gp,null,["number","array","number","array","array","array","array","array","number","number"])}function OFe(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{begin:i,end:s,strides:o,beginMask:l,endMask:d,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:h}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:b,begin:y,end:v,strides:x}=En.sliceInfo(a.shape,i,s,o,l,d,u,c,h),w;if(m)w=Wr({inputs:{x:a},backend:t,attrs:{shape:f}});else if(g||b){k.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let $=En.computeOutShape(y,v,x),C=iu({inputs:{x:a},backend:t,attrs:{begin:y,size:$}});w=Wr({inputs:{x:C},backend:t,attrs:{shape:f}}),t.disposeData(C.dataId)}else{let $=t.makeOutput(p,"float32"),C=t.dataIdMap.get(a.dataId).id,E=new Uint8Array(new Int32Array(k.computeStrides(a.shape)).buffer),A=new Uint8Array(new Int32Array(y).buffer),R=new Uint8Array(new Int32Array(v).buffer),N=new Uint8Array(new Int32Array(x).buffer),I=new Uint8Array(new Int32Array(p).buffer),F=new Uint8Array(new Int32Array(k.computeStrides(p)).buffer),L=t.dataIdMap.get($.dataId).id;KU(C,E,a.shape.length,A,R,N,I,F,p.length,L),w=Wr({inputs:{x:$},backend:t,attrs:{shape:f}}),t.disposeData($.dataId)}return w}var LFe={kernelName:gp,backendName:"wasm",setupFunc:MFe,kernelFunc:OFe};function PFe(e){let{backend:t,inputs:n,attrs:r}=e,{data:a,dataSplits:i}=n,{separator:s,nGramWidths:o,leftPad:l,rightPad:d,padWidth:u,preserveShortSequences:c}=r,h=t.readSync(a.dataId),p=t.readSync(i.dataId),[f,m]=AE(h,p,s,o,l,d,u,c),g=t.makeOutput([f.length],"string"),b=t.dataIdMap.get(g.dataId);b.stringBytes=f;let y=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(y).set(m),[g,y]}var zFe={kernelName:ag,backendName:"wasm",kernelFunc:PFe};function BFe(e){let{backend:t,inputs:n,attrs:r}=e,{input:a,delimiter:i}=n,{skipEmpty:s}=r,o=t.readSync(a.dataId),l=t.readSync(i.dataId),[d,u,c]=RE(o,l[0],s),h=u.length,p=t.makeOutput([h,2],"int32");t.typedArrayFromHeap(p).set(d);let f=t.makeOutput([h],"string"),m=t.dataIdMap.get(f.dataId);m.stringBytes=u;let g=t.makeOutput([2],"int32");return t.typedArrayFromHeap(g).set(c),[p,f,g]}var WFe={kernelName:ig,backendName:"wasm",kernelFunc:BFe};function VFe(e){let{backend:t,inputs:n,attrs:r}=e,{input:a}=n,{numBuckets:i}=r,s=t.readSync(a.dataId),o=DE(s,i),l=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(l).set(o),l}var UFe={kernelName:sg,backendName:"wasm",kernelFunc:VFe},HFe=yn(Cd),XU;function jFe(e){XU=e.wasm.cwrap(Sd,null,["number","number","number","number"])}function GFe(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,d=s,{transposed:u,axes:c,originalAxes:h,inputWasTransposed:p}=Zo(s,a,t),f=c;if(p){let v=t.dataIdMap.get(u.dataId).id;v!==o&&(d=u,l=v,f=T.getInnerMostAxes(f.length,d.shape.length))}T.assertAxesAreInnerMostDims("sum",f,d.shape.length);let[m,g]=T.computeOutAndReduceShapes(d.shape,f),b=k.sizeFromShape(g),y=t.makeOutput(m,d.dtype);if(k.sizeFromShape(d.shape)!==0){let v=t.dataIdMap.get(y.dataId).id;XU(l,b,ot[y.dtype],v)}if(p&&t.disposeData(u.dataId),i){let v=T.expandShapeToKeepDim(y.shape,h);y.shape=v}return y}var qFe={kernelName:Sd,backendName:"wasm",setupFunc:jFe,kernelFunc:GFe},KFe=nt(Ed),XFe=nt(Td),YU;function YFe(e){YU=e.wasm.cwrap(lp,null,["number","number","number","number","number","number","array","number","number","number"])}function ZFe(e){let{backend:t,inputs:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=n,o=t.makeOutput(a.shape,a.dtype);if(k.sizeFromShape(a.shape)===0)return o;let{sliceRank:l,numUpdates:d,sliceSize:u,strides:c,outputSize:h}=px.calculateShapes(s,i,a.shape),p=t.dataIdMap.get(i.dataId).id,f=t.dataIdMap.get(s.dataId).id,m=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(c).buffer),b=t.dataIdMap.get(o.dataId).id;return YU(p,f,ot[s.dtype],l,d,u,g,h,b,m),o}var QFe={kernelName:lp,backendName:"wasm",setupFunc:YFe,kernelFunc:ZFe},ZU;function JFe(e){ZU=e.wasm.cwrap(Vo,null,["number","array","number","array","number","number"])}function eMe(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,i=n.dataIdMap.get(a.dataId).id,{reps:s}=r,o=new Array(a.shape.length);for(let h=0;h<o.length;h++)o[h]=a.shape[h]*s[h];let l=new Uint8Array(new Int32Array(a.shape).buffer),d=new Uint8Array(new Int32Array(o).buffer),u=n.makeOutput(o,a.dtype),c=n.dataIdMap.get(u.dataId).id;return ZU(i,l,a.shape.length,d,o.length,ot[u.dtype],c),u}var tMe={kernelName:Vo,backendName:"wasm",setupFunc:JFe,kernelFunc:eMe},QU;function nMe(e){QU=e.wasm.cwrap(bp,null,["number","array","number","number","number","bool","number","number"])}var rMe=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{k:a,sorted:i}=n,s=t.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=a;let d=t.makeOutput(l,r.dtype),u=t.dataIdMap.get(d.dataId).id,c=t.makeOutput(l,"int32"),h=t.dataIdMap.get(c.dataId).id;return QU(s,o,r.shape.length,ot[r.dtype],a,i,u,h),[d,c]},aMe={kernelName:bp,backendName:"wasm",setupFunc:nMe,kernelFunc:rMe},JU;function iMe(e){JU=e.wasm.cwrap(yp,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function sMe(e){let{backend:t,inputs:n,attrs:r}=e,{image:a,transforms:i}=n,{interpolation:s,fillMode:o,fillValue:l,outputShape:d}=r,[u,c,h,p]=a.shape,[f,m]=d!=null?d:[c,h],g=[u,f,m,p],b=new Uint8Array(new Int32Array(k.computeStrides(a.shape)).buffer),y=new Uint8Array(new Int32Array(k.computeStrides(g)).buffer),v=t.makeOutput(g,a.dtype),x=t.dataIdMap.get(v.dataId).id,w=t.dataIdMap.get(a.dataId).id,$=t.dataIdMap.get(i.dataId).id,C=s==="nearest"?1:2,E;switch(o){case"constant":E=1;break;case"reflect":E=2;break;case"wrap":E=3;break;case"nearest":E=4;break;default:E=1;break}return JU(w,$,i.shape[0]>1,u,f,m,p,h,c,b,a.shape.length-1,y,g.length-1,C,E,l,x),v}var oMe={kernelName:yp,backendName:"wasm",setupFunc:iMe,kernelFunc:sMe};function lMe(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t,{outputValues:s,outputShape:o,indices:l}=ME(r.readSync(i.dataId),a,i.shape,i.dtype);return[r.makeOutput(o,i.dtype,void 0,s),r.makeOutput([l.length],"int32",void 0,l)]}var uMe={kernelName:og,backendName:"wasm",kernelFunc:lMe};function dMe(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a.shape[i],o=a.shape.length,l=new Array(o-1),d=0;for(let p=0;p<o;p++)p!==i&&(l[d++]=a.shape[p]);let u=new Array(s),c=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(let p=0;p<u.length;p++)c[i]=p,u[p]=iu({inputs:{x:a},attrs:{begin:c,size:h},backend:n});return u.map(({dataId:p,dtype:f})=>({dataId:p,dtype:f,shape:l}))}var cMe={kernelName:vp,backendName:"wasm",kernelFunc:dMe};function hMe(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}var pMe={kernelName:xp,backendName:"wasm",kernelFunc:hMe},fMe=[iNe,sNe,oNe,lNe,uNe,hNe,xNe,SNe,INe,$Ne,CNe,ENe,TNe,NNe,_Ne,DNe,VNe,ONe,zNe,GNe,QNe,t_e,n_e,a_e,i_e,s_e,u_e,d_e,p_e,g_e,v_e,k_e,$_e,C_e,E_e,__e,D_e,O_e,z_e,V_e,j_e,K_e,Z_e,eAe,rAe,aAe,oAe,uAe,dAe,cAe,hAe,pAe,fAe,bAe,yAe,vAe,kAe,$Ae,TAe,AAe,FAe,OAe,PAe,pNe,zAe,BAe,WAe,HAe,GAe,KAe,ZAe,JAe,QAe,tRe,nRe,aRe,sRe,uRe,hRe,mRe,gRe,vRe,kRe,$Re,TRe,ARe,FRe,LRe,PRe,WRe,GRe,qRe,KRe,XRe,QRe,tDe,aDe,sDe,uDe,cDe,pDe,TU,gDe,vDe,kDe,IDe,$De,CDe,EDe,TDe,UNe,ADe,FDe,LDe,BDe,UDe,GDe,qDe,KDe,ZDe,eFe,rFe,aFe,oFe,lFe,uFe,dFe,YNe,URe,cFe,pFe,gFe,vFe,wFe,SFe,CFe,TFe,NFe,_Fe,AFe,FFe,LFe,zFe,WFe,UFe,HFe,qFe,KFe,XFe,QFe,tMe,aMe,oMe,bNe,uMe,cMe,pMe];for(let e of fMe)ug(e);var SS=Z();SS.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}});SS.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(SS.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});var JR=zo(cZ()),mMe=zo(hZ()),eD=zo(pZ()),tD=JR.default||JR,gMe=eD.default||eD,eH=class extends Bm{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(tH),IS=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new C0(this,ja())}write(e,t,n){let r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=k.now();return e(),{kernelMs:k.now()-t}}move(e,t,n,r,a){let i=this.dataIdNextNumber++;if(r==="string"){let d=t;this.dataIdMap.set(e,{id:i,stringBytes:d,shape:n,dtype:r,memoryOffset:null,refCount:a});return}let s=k.sizeFromShape(n),o=s*k.bytesPerElement(r),l=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:i,memoryOffset:l,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,s,l),t!=null&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e,t,n){let{memoryOffset:r,dtype:a,shape:i,stringBytes:s}=this.dataIdMap.get(e);if(a==="string")return(t==null||t===0)&&(n==null||n>=s.length)?s:s.slice(t,n);t=t||0,n=n||k.sizeFromShape(i);let o=k.bytesPerElement(a),l=this.wasm.HEAPU8.slice(r+t*o,r+n*o);return vMe(l.buffer,a)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);t!=null&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,r){let a;if(n==null)a=this.write(r!=null?r:null,e,t);else{let i=this.dataIdNextNumber++;a={id:i},this.dataIdMap.set(a,{id:i,memoryOffset:n,shape:e,dtype:t,refCount:1});let s=k.sizeFromShape(e);this.wasm.tfjs.registerTensor(i,s,n)}return{dataId:a,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){let r=this.wasm.HEAPU8.buffer,{memoryOffset:a}=this.dataIdMap.get(n),i=k.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,a,i);case"int32":return new Int32Array(r,a,i);case"bool":return new Uint8Array(r,a,i);default:throw new Error("Unknown dtype ".concat(t))}}};function bMe(e){return(t,n)=>(k.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then(a=>{WebAssembly.instantiate(a,t).then(i=>{n(i.instance,i.module)})})}),{})}function nD(e,t,n){if(Av!=null)return Av;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),Ff!=null&&Ff[r]!=null?Ff[r]:n+r}async function yMe(){let[e,t]=await Promise.all([Z().getAsync("WASM_HAS_SIMD_SUPPORT"),Z().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{let a={};a.locateFile=(o,l)=>{if(o.endsWith(".worker.js")){let d=mMe.wasmWorkerContents.replace(/\n/g,"\\n"),u=new Blob([d],{type:"application/javascript"});return URL.createObjectURL(u)}return o.endsWith(".wasm")?nD(e,t,vf!=null?vf:l):l+o},tT&&(a.instantiateWasm=bMe(nD(e,t,vf!=null?vf:"")));let i=!1;a.onAbort=()=>{i||Mf||(Mf=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))};let s;t&&e&&Av==null?(a.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+tD.toString()],{type:"text/javascript"}),s=tD(a)):s=gMe(a),s.then(o=>{i=!0,Mf=!1;let l=null;o.tfjs={init:o.cwrap("init",null,[]),initWithThreadsCount:o.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:o.cwrap("get_threads_count","number",[]),registerTensor:o.cwrap("register_tensor",null,["number","number","number"]),disposeData:o.cwrap("dispose_data",l,["number"]),dispose:o.cwrap("dispose",l,[])},n({wasm:o})}).catch(r)})}function vMe(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}var xMe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Av=null,vf=null,Ff={},Mf=!1,tT=!1;function wMe(e,t=!1){if(J3("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),Mf)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");Av=e,tT=t}function kMe(e,t=!1){if(Mf)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof e=="string")vf=e;else{Ff=e;let n=xMe.filter(r=>Ff[r]==null);if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}tT=t}var tH=-1,IS=-1;function SMe(e){tH=e}function IMe(){if(IS===-1)throw new Error("WASM backend not initialized.");return IS}var $Me="4.7.0",CMe=2;U0("wasm",async()=>{let{wasm:e}=await yMe();return new eH(e)},CMe);var rD="4.7.0",EMe="4.7.0",TMe="4.7.0",NMe="4.7.0",_Me="4.7.0",AMe={tfjs:rD,"tfjs-core":rD,"tfjs-converter":EMe,"tfjs-backend-cpu":TMe,"tfjs-backend-webgl":NMe,"tfjs-backend-wasm":_Me},RMe={};c$(RMe,{AnchorPosition:()=>hH,DrawBox:()=>fH,DrawBoxOptions:()=>pH,DrawFaceLandmarks:()=>NH,DrawFaceLandmarksOptions:()=>TH,DrawTextField:()=>Zx,DrawTextFieldOptions:()=>oT,drawContour:()=>Gs,drawDetections:()=>jMe,drawFaceExpressions:()=>sOe,drawFaceLandmarks:()=>lOe});function Gs(e,t,n=!1){if(e.beginPath(),t.slice(1).forEach(({x:r,y:a},i)=>{let s=t[i];e.moveTo(s.x,s.y),e.lineTo(r,a)}),n){let r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}var DMe={};c$(DMe,{computeReshapedDimensions:()=>aH,getCenterPoint:()=>nT,isDimensions:()=>CS,isEven:()=>$S,isFloat:()=>rH,isTensor:()=>Vp,isTensor1D:()=>FMe,isTensor2D:()=>nH,isTensor3D:()=>Hg,isTensor4D:()=>$s,isValidNumber:()=>_l,isValidProbablitiy:()=>MMe,range:()=>hh,round:()=>Yx});var yo=class{constructor(e,t){if(!_l(e)||!_l(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have ".concat(JSON.stringify({width:e,height:t})));this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new yo(1/this.width,1/this.height)}};function Vp(e,t){return e instanceof Ue&&e.shape.length===t}function FMe(e){return Vp(e,1)}function nH(e){return Vp(e,2)}function Hg(e){return Vp(e,3)}function $s(e){return Vp(e,4)}function rH(e){return e%1!==0}function $S(e){return e%2===0}function Yx(e,t=2){let n=10**t;return Math.floor(e*n)/n}function CS(e){return e&&e.width&&e.height}function aH({width:e,height:t},n){let r=n/Math.max(t,e);return new yo(Math.round(e*r),Math.round(t*r))}function nT(e){return e.reduce((t,n)=>t.add(n),new it(0,0)).div(new it(e.length,e.length))}function hh(e,t,n){return Array(e).fill(0).map((r,a)=>t+a*n)}function _l(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||e===0}function MMe(e){return _l(e)&&e>=0&&e<=1}var it=class{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}add(e){return new it(this.x+e.x,this.y+e.y)}sub(e){return new it(this.x-e.x,this.y-e.y)}mul(e){return new it(this.x*e.x,this.y*e.y)}div(e){return new it(this.x/e.x,this.y/e.y)}abs(){return new it(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new it(Math.floor(this.x),Math.floor(this.y))}},lr=class{static isRect(e){return!!e&&[e.x,e.y,e.width,e.height].every(_l)}static assertIsValidBox(e,t,n=!1){if(!lr.isRect(e))throw new Error("".concat(t," - invalid box: ").concat(JSON.stringify(e),", expected object with properties x, y, width, height"));if(!n&&(e.width<0||e.height<0))throw new Error("".concat(t," - width (").concat(e.width,") and height (").concat(e.height,") must be positive numbers"))}constructor(e,t=!0){let n=e||{},r=[n.left,n.top,n.right,n.bottom].every(_l),a=[n.x,n.y,n.width,n.height].every(_l);if(!a&&!r)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have ".concat(JSON.stringify(n)));let[i,s,o,l]=a?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top];lr.assertIsValidBox({x:i,y:s,width:o,height:l},"Box.constructor",t),this._x=i,this._y=s,this._width=o,this._height=l}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new it(this.left,this.top)}get topRight(){return new it(this.right,this.top)}get bottomLeft(){return new it(this.left,this.bottom)}get bottomRight(){return new it(this.right,this.bottom)}round(){let[e,t,n,r]=[this.x,this.y,this.width,this.height].map(a=>Math.round(a));return new lr({x:e,y:t,width:n,height:r})}floor(){let[e,t,n,r]=[this.x,this.y,this.width,this.height].map(a=>Math.floor(a));return new lr({x:e,y:t,width:n,height:r})}toSquare(){let{x:e,y:t,width:n,height:r}=this,a=Math.abs(n-r);return n<r&&(e-=a/2,n+=a),r<n&&(t-=a/2,r+=a),new lr({x:e,y:t,width:n,height:r})}rescale(e){let t=CS(e)?e.width:e,n=CS(e)?e.height:e;return new lr({x:this.x*t,y:this.y*n,width:this.width*t,height:this.height*n})}pad(e,t){let[n,r,a,i]=[this.x-e/2,this.y-t/2,this.width+e,this.height+t];return new lr({x:n,y:r,width:a,height:i})}clipAtImageBorders(e,t){let{x:n,y:r,right:a,bottom:i}=this,s=Math.max(n,0),o=Math.max(r,0),l=a-s,d=i-o,u=Math.min(l,e-s),c=Math.min(d,t-o);return new lr({x:s,y:o,width:u,height:c}).floor()}shift(e,t){let{width:n,height:r}=this,a=this.x+e,i=this.y+t;return new lr({x:a,y:i,width:n,height:r})}padAtBorders(e,t){let n=this.width+1,r=this.height+1,a=1,i=1,s=n,o=r,l=this.left,d=this.top,u=this.right,c=this.bottom;return u>t&&(s=-u+t+n,u=t),c>e&&(o=-c+e+r,c=e),l<1&&(o=2-l,l=1),d<1&&(o=2-d,d=1),{dy:i,edy:o,dx:a,edx:s,y:d,ey:c,x:l,ex:u,w:n,h:r}}calibrate(e){return new lr({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()}},iH=class extends lr{constructor(e,t,n,r,a=!1){super({left:e,top:t,right:n,bottom:r},a)}},rT=class{constructor(e,t,n,r,a){this._imageDims=new yo(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new lr(r).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new lr(this._box).rescale(this.imageDims.reverse())}forSize(e,t){return new rT(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})}},Fa=class extends rT{constructor(e,t,n){super(e,e,"",t,n)}forSize(e,t){let{score:n,relativeBox:r,imageDims:a}=super.forSize(e,t);return new Fa(n,r,a)}};function OMe(e,t,n=!0){let r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*a;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function LMe(e){let t=e.map(o=>o.x),n=e.map(o=>o.y),r=t.reduce((o,l)=>l<o?l:o,1/0),a=n.reduce((o,l)=>l<o?l:o,1/0),i=t.reduce((o,l)=>o<l?l:o,0),s=n.reduce((o,l)=>o<l?l:o,0);return new iH(r,a,i,s)}function PMe(e,t,n,r=!0){let a=t.map((s,o)=>({score:s,boxIndex:o})).sort((s,o)=>s.score-o.score).map(s=>s.boxIndex),i=[];for(;a.length>0;){let s=a.pop();i.push(s);let o=a,l=[];for(let d=0;d<o.length;d++){let u=o[d],c=e[s],h=e[u];l.push(OMe(c,h,r))}a=a.filter((d,u)=>l[u]<=n)}return i}function jg(e,t){return G(()=>{let[n,r,a]=t,i=ca([...e.shape.slice(0,3),1],n,"float32"),s=ca([...e.shape.slice(0,3),1],r,"float32"),o=ca([...e.shape.slice(0,3),1],a,"float32"),l=kt([i,s,o],3);return we(e,l)})}function zMe(e,t=!1){return G(()=>{let[n,r]=e.shape.slice(1);if(n===r)return e;let a=Math.abs(n-r),i=Math.round(a*(t?.5:1)),s=n>r?2:1,o=c=>{let h=e.shape.slice();return h[s]=c,ca(h,0,"float32")},l=o(i),d=a-l.shape[s],u=[t&&d?o(d):null,e,l].filter(c=>!!c).map(c=>ce(c,"float32"));return kt(u,s)})}function h1(e){return 1/(1+Math.exp(-e))}var sH=class extends lr{constructor(e,t,n,r,a=!1){super({x:e,y:t,width:n,height:r},a)}},BMe=.5,WMe=.43,VMe=.45,Im=class{constructor(e,t,n=new it(0,0)){let{width:r,height:a}=t;this._imgDims=new yo(r,a),this._shift=n,this._positions=e.map(i=>i.mul(new it(r,a)).add(n))}get shift(){return new it(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new it(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new it(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,t={}){if(e){let a=e instanceof Fa?e.box.floor():new lr(e);return this.shiftBy(a.x,a.y).align(null,t)}let{useDlibAlignment:n,minBoxPadding:r}={useDlibAlignment:!1,minBoxPadding:.2,...t};return n?this.alignDlib():this.alignMinBbox(r)}alignDlib(){let e=this.getRefPointsForAlignment(),[t,n,r]=e,a=u=>r.sub(u).magnitude(),i=(a(t)+a(n))/2,s=Math.floor(i/VMe),o=nT(e),l=Math.floor(Math.max(0,o.x-BMe*s)),d=Math.floor(Math.max(0,o.y-WMe*s));return new sH(l,d,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+d))}alignMinBbox(e){let t=LMe(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},oH=class extends Im{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(nT)}},aD=class{constructor(e,t){this._label=e,this._distance=t}get label(){return this._label}get distance(){return this._distance}toString(e=!0){return"".concat(this.label).concat(e?" (".concat(Yx(this.distance),")"):"")}},xc=class{constructor(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(n=>!(n instanceof Float32Array)))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}get label(){return this._label}get descriptors(){return this._descriptors}toJSON(){return{label:this.label,descriptors:this.descriptors.map(e=>Array.from(e))}}static fromJSON(e){let t=e.descriptors.map(n=>new Float32Array(n));return new xc(e.label,t)}};function $m(e){return e.detection instanceof Fa}function Rv(e,t){return{...e,detection:t}}function lH(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function aT(){return typeof global=="object"&&typeof process<"u"&&process.versions!=null&&process.versions.node!=null}function uH(e){let t="";if(!e&&aT())try{e=UY("fs")}catch(n){t=n.toString()}return{readFile:e?n=>new Promise((r,a)=>{e.readFile(n,(i,s)=>i?a(i):r(s))}):()=>{throw new Error("readFile - failed to require fs in nodejs environment with error: ".concat(t))}}}function dH(){let e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=global.Video||global.HTMLVideoElement,r=()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},a=()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=()=>{if(n)return new n;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},s=global.fetch,o=uH();return{Canvas:e||class{},CanvasRenderingContext2D:global.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:global.ImageData||class{},Video:global.HTMLVideoElement||class{},createCanvasElement:r,createImageElement:a,createVideoElement:i,fetch:s,...o}}function cH(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}var Fn;function UMe(){if(!Fn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Fn}function ES(e){Fn=e}function iT(){return cH()?ES(lH()):aT()?ES(dH()):null}function HMe(e){if(Fn||iT(),!Fn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:t=Fn.Canvas,Image:n=Fn.Image}=e;Fn.Canvas=t,Fn.Image=n,Fn.createCanvasElement=e.createCanvasElement||(()=>new t),Fn.createImageElement=e.createImageElement||(()=>new n),Fn.ImageData=e.ImageData||Fn.ImageData,Fn.Video=e.Video||Fn.Video,Fn.fetch=e.fetch||Fn.fetch,Fn.readFile=e.readFile||Fn.readFile}var Tr={getEnv:UMe,setEnv:ES,initialize:iT,createBrowserEnv:lH,createFileSystem:uH,createNodejsEnv:dH,monkeyPatch:HMe,isBrowser:cH,isNodejs:aT};iT();function sT(e){return!Tr.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Fo(e){let{Canvas:t,CanvasRenderingContext2D:n}=Tr.getEnv();if(e instanceof n)return e;let r=sT(e);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var hH=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e))(hH||{}),oT=class{constructor(e={}){let{anchorPosition:t,backgroundColor:n,fontColor:r,fontSize:a,fontStyle:i,padding:s}=e;this.anchorPosition=t||"TOP_LEFT",this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=s||4}},Zx=class{constructor(e,t,n={}){this.text=typeof e=="string"?[e]:e instanceof Zx?e.text:e,this.anchor=t,this.options=new oT(n)}measureWidth(e){let{padding:t}=this.options;return this.text.map(n=>e.measureText(n).width).reduce((n,r)=>n<r?r:n,0)+2*t}measureHeight(){let{fontSize:e,padding:t}=this.options;return this.text.length*e+2*t}getUpperLeft(e,t){let{anchorPosition:n}=this.options,r=n==="BOTTOM_RIGHT"||n==="TOP_RIGHT",a=n==="BOTTOM_LEFT"||n==="BOTTOM_RIGHT",i=this.measureWidth(e),s=this.measureHeight(),o=r?this.anchor.x-i:this.anchor.x,l=a?this.anchor.y-s:this.anchor.y;if(t){let{width:d,height:u}=t,c=Math.max(Math.min(o,d-i),0),h=Math.max(Math.min(l,u-s),0);return{x:c,y:h}}return{x:o,y:l}}draw(e){let t=sT(e),n=Fo(t),{backgroundColor:r,fontColor:a,fontSize:i,fontStyle:s,padding:o}=this.options;n.font="".concat(i,"px ").concat(s);let l=this.measureWidth(n),d=this.measureHeight();n.fillStyle=r;let u=this.getUpperLeft(n,t);n.fillRect(u.x,u.y,l,d),n.fillStyle=a,this.text.forEach((c,h)=>{let p=o+u.x,f=o+u.y+(h+1)*i;n.fillText(c,p,f)})}},pH=class{constructor(e={}){let{boxColor:t,lineWidth:n,label:r,drawLabelOptions:a}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;let i={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new oT({...i,...a})}},fH=class{constructor(e,t={}){this.box=new lr(e),this.options=new pH(t)}draw(e){let t=Fo(e),{boxColor:n,lineWidth:r}=this.options,{x:a,y:i,width:s,height:o}=this.box;t.strokeStyle=n,t.lineWidth=r,t.strokeRect(a,i,s,o);let{label:l}=this.options;l&&new Zx([l],{x:a-r/2,y:i},this.options.drawLabelOptions).draw(e)}};function jMe(e,t){(Array.isArray(t)?t:[t]).forEach(n=>{let r=n instanceof Fa?n.score:$m(n)?n.detection.score:void 0,a=n instanceof Fa?n.box:$m(n)?n.detection.box:new lr(n),i=r?"".concat(Yx(r)):void 0;new fH(a,{label:i}).draw(e)})}function mH(e){let{Image:t,Video:n}=Tr.getEnv();return e instanceof t&&e.complete||e instanceof n&&e.readyState>=3}function GMe(e){return new Promise((t,n)=>{(e instanceof Tr.getEnv().Canvas||mH(e))&&t(null);function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",r),n(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",a),i.currentTarget.removeEventListener("error",r),t(i))}e.addEventListener("load",a),e.addEventListener("error",r)})}function qMe(e){return new Promise((t,n)=>{e instanceof Blob||n(new Error("bufferToImage - expected buf to be of type: Blob"));let r=new FileReader;r.onload=()=>{typeof r.result!="string"&&n(new Error("bufferToImage - expected reader.result to be a string, in onload"));let a=Tr.getEnv().createImageElement();a.onload=()=>t(a),a.onerror=n,a.src=r.result},r.onerror=n,r.readAsDataURL(e)})}function lT(e){let{Image:t,Video:n}=Tr.getEnv();return e instanceof t?new yo(e.naturalWidth,e.naturalHeight):e instanceof n?new yo(e.videoWidth,e.videoHeight):new yo(e.width,e.height)}function Dv({width:e,height:t}){let{createCanvasElement:n}=Tr.getEnv(),r=n();return r.width=e,r.height=t,r}function gH(e,t){let{ImageData:n}=Tr.getEnv();if(!(e instanceof n)&&!mH(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:r,height:a}=t||lT(e),i=Dv({width:r,height:a});return e instanceof n?Fo(i).putImageData(e,0,0):Fo(i).drawImage(e,0,0,r,a),i}async function KMe(e,t){let n=t||Tr.getEnv().createCanvasElement(),[r,a,i]=e.shape.slice($s(e)?1:0),s=G(()=>e.as3D(r,a,i).toInt());return await Eg.toPixels(s,n),s.dispose(),n}function iD(e){let{Image:t,Canvas:n,Video:r}=Tr.getEnv();return e instanceof t||e instanceof n||e instanceof r}function XMe(e,t,n=!1){let{Image:r,Canvas:a}=Tr.getEnv();if(!(e instanceof r||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return Dv({width:1,height:1});let i=lT(e),s=t/Math.max(i.height,i.width),o=s*i.width,l=s*i.height,d=Dv({width:t,height:t}),u=e instanceof a?e:gH(e),c=Math.abs(o-l)/2,h=n&&o<l?c:0,p=n&&l<o?c:0;return u.width>0&&u.height>0&&Fo(d).drawImage(u,h,p,o,l),d}var Fv=class{constructor(e,t=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ".concat(e));this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((n,r)=>{if(Hg(n)){this._imageTensors[r]=n,this._inputDimensions[r]=n.shape;return}if($s(n)){let i=n.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize ".concat(i," passed, but not supported in input array"));this._imageTensors[r]=n,this._inputDimensions[r]=n.shape.slice(1);return}let a=n instanceof Tr.getEnv().Canvas?n:gH(n);this._canvases[r]=a,this._inputDimensions[r]=[a.height,a.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return hh(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");let t=this.getInputWidth(e),n=this.getInputHeight(e);return aH({width:t,height:n},this.inputSize)}toBatchTensor(e,t=!0){return this._inputSize=e,G(()=>{let n=hh(this.batchSize,0,1).map(r=>{let a=this.getInput(r);if(a instanceof Ue){let i=$s(a)?a:qn(a);return i=zMe(i,t),(i.shape[1]!==e||i.shape[2]!==e)&&(i=$a.resizeBilinear(i,[e,e],!1,!1)),i.as3D(e,e,3)}if(a instanceof Tr.getEnv().Canvas)return Eg.fromPixels(XMe(a,e,t));throw new Error("toBatchTensor - at batchIdx ".concat(r,", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ").concat(a))});return Cn(n.map(r=>ce(r,"float32"))).as4D(this.batchSize,e,e,3)})}};async function Nr(e){if(e instanceof Fv)return e;let t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");let n=a=>Array.isArray(e)?" at input index ".concat(a,":"):"",r=t.map(sT);return r.forEach((a,i)=>{if(!iD(a)&&!Hg(a)&&!$s(a))throw typeof t[i]=="string"?new Error("toNetInput -".concat(n(i)," string passed, but could not resolve HTMLElement for element id ").concat(t[i])):new Error("toNetInput -".concat(n(i)," expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id"));if($s(a)){let s=a.shape[0];if(s!==1)throw new Error("toNetInput -".concat(n(i)," tf.Tensor4D with batchSize ").concat(s," passed, but not supported in input array"))}}),await Promise.all(r.map(a=>iD(a)&&GMe(a))),new Fv(r,Array.isArray(e))}async function uT(e,t){let{Canvas:n}=Tr.getEnv(),r=e;if(!(e instanceof n)){let i=await Nr(e);if(i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let s=i.getInput(0);r=s instanceof n?s:await KMe(s)}let a=Fo(r);return t.map(i=>i instanceof Fa?i.forSize(r.width,r.height).box.floor():i).map(i=>i.clipAtImageBorders(r.width,r.height)).map(({x:i,y:s,width:o,height:l})=>{let d=Dv({width:o,height:l});return o>0&&l>0&&Fo(d).putImageData(a.getImageData(i,s,o,l),0,0),d})}async function dT(e,t){if(!Hg(e)&&!$s(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if($s(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return G(()=>{let[n,r,a]=e.shape.slice($s(e)?1:0);return t.map(i=>i instanceof Fa?i.forSize(r,n).box:i).map(i=>i.clipAtImageBorders(r,n)).filter(i=>i.width>0&&i.height>0).map(({x:i,y:s,width:o,height:l})=>Tp(e.as3D(n,r,a),[s,i,0],[l,o,a]))})}async function bH(e,t){let{fetch:n}=Tr.getEnv(),r=await n(e,t);if(!(r.status<400))throw new Error("failed to fetch: (".concat(r.status,") ").concat(r.statusText,", from url: ").concat(r.url));return r}async function YMe(e){let t=await bH(e),n=await t.blob();if(!n.type.startsWith("image/"))throw new Error("fetchImage - expected blob type to be of type image/*, instead have: ".concat(n.type,", for url: ").concat(t.url));return qMe(n)}async function ZMe(e){return(await bH(e)).json()}function yH(e,t){let n="".concat(t,"-weights_manifest.json");if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/".concat(n)};let r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");let a=e.split("/").filter(o=>o),i=e.endsWith(".json")?a[a.length-1]:n,s=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return s=e.startsWith("/")?"/".concat(s):s,{modelBaseUri:s,manifestUri:s==="/"?"/".concat(i):"".concat(s,"/").concat(i)}}async function QMe(e,t){let{manifestUri:n,modelBaseUri:r}=yH(e,t),a=await ZMe(n);return Yn.loadWeights(a,r)}function JMe(e,t,n=!1){let{width:r,height:a}=n?lT(t):t;return e.width=r,e.height=a,{width:r,height:a}}var Jo=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:t,objProp:n}=this.traversePropertyPath(e);return t[n]}reassignParamFromPath(e,t){let{obj:n,objProp:r}=this.traversePropertyPath(e);n[r].dispose(),n[r]=t}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof Hl)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof Hl))}variable(){this.getFrozenParams().forEach(({path:e,tensor:t})=>{this.reassignParamFromPath(e,t.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:t})=>{let n=wr(t.dataSync());t.dispose(),this.reassignParamFromPath(e,n)})}dispose(e=!0){this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path ".concat(t.path));t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,t)=>e.concat(t)))}async load(e){if(e instanceof Float32Array){this.extractWeights(e);return}await this.loadFromUri(e)}async loadFromUri(e){if(e&&typeof e!="string")throw new Error("".concat(this._name,".loadFromUri - expected model uri"));let t=await QMe(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&typeof e!="string")throw new Error("".concat(this._name,".loadFromDisk - expected model file path"));let{readFile:t}=Tr.getEnv(),{manifestUri:n,modelBaseUri:r}=yH(e,this.getDefaultModelName()),a=l=>Promise.all(l.map(d=>t(d).then(u=>u.buffer))),i=Yn.weightsLoaderFactory(a),s=JSON.parse((await t(n)).toString()),o=await i(s,r);this.loadFromWeightMap(o)}loadFromWeightMap(e){let{paramMappings:t,params:n}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=n}extractWeights(e){let{paramMappings:t,params:n}=this.extractParams(e);this._paramMappings=t,this._params=n}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let t=e.split("/").reduce((a,i)=>{if(!a.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property ".concat(i,", for path ").concat(e));return{obj:a.nextObj,objProp:i,nextObj:a.nextObj[i]}},{nextObj:this.params}),{obj:n,objProp:r}=t;if(!n||!r||!(n[r]instanceof Ue))throw new Error("traversePropertyPath - parameter is not a tensor, for path ".concat(e));return{obj:n,objProp:r}}};function Ta(e,t,n){return G(()=>{let r=Ep(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=ne(r,t.bias),r})}function p1(e,t,n=!1){return G(()=>{let r=gt(n?ne($r(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Ta(e,t.conv0,[2,2])),a=Ta(r,t.conv1,[1,1]),i=gt(ne(r,a)),s=Ta(i,t.conv2,[1,1]);return gt(ne(r,ne(a,s)))})}function Wb(e,t,n=!1,r=!0){return G(()=>{let a=gt(n?ne($r(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Ta(e,t.conv0,r?[2,2]:[1,1])),i=Ta(a,t.conv1,[1,1]),s=gt(ne(a,i)),o=Ta(s,t.conv2,[1,1]),l=gt(ne(a,ne(i,o))),d=Ta(l,t.conv3,[1,1]);return gt(ne(a,ne(i,ne(o,d))))})}function Of(e,t,n="same",r=!1){return G(()=>{let a=ne($r(e,t.filters,[1,1],n),t.bias);return r?gt(a):a})}function el(e,t){Object.keys(e).forEach(n=>{t.some(r=>r.originalPath===n)||e[n].dispose()})}function cT(e,t){return(n,r,a,i)=>{let s=Eo(e(n*r*a*a),[a,a,n,r]),o=mt(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/bias")}),{filters:s,bias:o}}}function vH(e,t){return(n,r,a)=>{let i=Xi(e(n*r),[n,r]),s=mt(e(r));return t.push({paramPath:"".concat(a,"/weights")},{paramPath:"".concat(a,"/bias")}),{weights:i,bias:s}}}var xH=class{constructor(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}};function hT(e,t){return(n,r,a)=>{let i=Eo(e(9*n),[3,3,n,1]),s=Eo(e(n*r),[1,1,n,r]),o=mt(e(r));return t.push({paramPath:"".concat(a,"/depthwise_filter")},{paramPath:"".concat(a,"/pointwise_filter")},{paramPath:"".concat(a,"/bias")}),new xH(i,s,o)}}function pT(e){return t=>{let n=e("".concat(t,"/depthwise_filter"),4),r=e("".concat(t,"/pointwise_filter"),4),a=e("".concat(t,"/bias"),1);return new xH(n,r,a)}}function Bd(e,t){return(n,r,a)=>{let i=e[n];if(!Vp(i,r))throw new Error("expected weightMap[".concat(n,"] to be a Tensor").concat(r,"D, instead have ").concat(i));return t.push({originalPath:n,paramPath:a||n}),i}}function tl(e){let t=e;function n(a){let i=t.slice(0,a);return t=t.slice(a),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function wH(e,t){let n=cT(e,t),r=hT(e,t);function a(s,o,l,d=!1){let u=d?n(s,o,3,"".concat(l,"/conv0")):r(s,o,"".concat(l,"/conv0")),c=r(o,o,"".concat(l,"/conv1")),h=r(o,o,"".concat(l,"/conv2"));return{conv0:u,conv1:c,conv2:h}}function i(s,o,l,d=!1){let{conv0:u,conv1:c,conv2:h}=a(s,o,l,d),p=r(o,o,"".concat(l,"/conv3"));return{conv0:u,conv1:c,conv2:h,conv3:p}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function eOe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=tl(e),{extractDenseBlock4Params:a}=wH(n,t),i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),o=a(64,128,"dense2"),l=a(128,256,"dense3");if(r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o,dense3:l}}}function kH(e){return t=>{let n=e("".concat(t,"/filters"),4),r=e("".concat(t,"/bias"),1);return{filters:n,bias:r}}}function SH(e,t){let n=Bd(e,t),r=kH(n),a=pT(n);function i(o,l=!1){let d=l?r("".concat(o,"/conv0")):a("".concat(o,"/conv0")),u=a("".concat(o,"/conv1")),c=a("".concat(o,"/conv2"));return{conv0:d,conv1:u,conv2:c}}function s(o,l=!1){let d=l?r("".concat(o,"/conv0")):a("".concat(o,"/conv0")),u=a("".concat(o,"/conv1")),c=a("".concat(o,"/conv2")),h=a("".concat(o,"/conv3"));return{conv0:d,conv1:u,conv2:c,conv3:h}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:s}}function tOe(e){let t=[],{extractDenseBlock4Params:n}=SH(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return el(e,t),{params:r,paramMappings:t}}var IH=class extends Jo{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return G(()=>{let n=ce(e.toBatchTensor(112,!0),"float32"),r=jg(n,[122.782,117.001,104.298]).div(255),a=Wb(r,t.dense0,!0);return a=Wb(a,t.dense1),a=Wb(a,t.dense2),a=Wb(a,t.dense3),a=Ms(a,[7,7],[2,2],"valid"),a})}async forward(e){return this.forwardInput(await Nr(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return tOe(e)}extractParams(e){return eOe(e)}};function TS(e,t){return G(()=>ne(Ge(e,t.weights),t.bias))}function nOe(e,t,n){let r=[],{extractWeights:a,getRemainingWeights:i}=tl(e),s=vH(a,r)(t,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: ".concat(i().length));return{paramMappings:r,params:{fc:s}}}function rOe(e){let t=[],n=Bd(e,t);function r(i){let s=n("".concat(i,"/weights"),2),o=n("".concat(i,"/bias"),1);return{weights:s,bias:o}}let a={fc:r("fc")};return el(e,t),{params:a,paramMappings:t}}function $H(e){let t={},n={};return Object.keys(e).forEach(r=>{let a=r.startsWith("fc")?n:t;a[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var CH=class extends Jo{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error("".concat(this._name," - load model before inference"));return G(()=>{let n=e instanceof Fv?this.faceFeatureExtractor.forwardInput(e):e;return TS(n.as2D(n.shape[0],-1),t.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return nOe(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=$H(e);return this.faceFeatureExtractor.loadFromWeightMap(t),rOe(n)}extractParams(e){let t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)}},sD=["neutral","happy","sad","angry","fearful","disgusted","surprised"],fT=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: ".concat(e.length));sD.forEach((t,n)=>{this[t]=e[n]})}asSortedArray(){return sD.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}},aOe=class extends CH{constructor(e=new IH){super("FaceExpressionNet",e)}forwardInput(e){return G(()=>qo(this.runNet(e)))}async forward(e){return this.forwardInput(await Nr(e))}async predictExpressions(e){let t=await Nr(e),n=await this.forwardInput(t),r=await Promise.all(tn(n).map(async i=>{let s=i.dataSync();return i.dispose(),s}));n.dispose();let a=r.map(i=>new fT(i));return t.isBatchInput?a:a[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}};function iOe(e){return e.expressions instanceof fT}function EH(e,t){return{...e,expressions:t}}function sOe(e,t,n=.1,r){(Array.isArray(t)?t:[t]).forEach(a=>{let i=a instanceof fT?a:iOe(a)?a.expressions:void 0;if(!i)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let s=i.asSortedArray().filter(l=>l.probability>n),o=$m(a)?a.detection.box.bottomLeft:r||new it(0,0);new Zx(s.map(l=>"".concat(l.expression," (").concat(Yx(l.probability),")")),o).draw(e)})}function mT(e){return $m(e)&&e.landmarks instanceof Im&&e.unshiftedLandmarks instanceof Im&&e.alignedRect instanceof Fa}function oOe(e){let t=l=>l*180/Math.PI,n=(l,d)=>Math.sqrt((l._x-d._x)**2+(l._y-d._y)**2),r={roll:void 0,pitch:void 0,yaw:void 0},a=(l,d,u)=>{let c=Math.floor(l._x-d._x),h=Math.floor(d._x-u._x);return c-h},i=(l,d)=>{let u=Math.hypot(d._x-l._x,d._y-l._y),c=d._y-l._y,h=Math.asin(c/u),p=t(h),f=Math.floor(90-p),m=d._x-l._x<0?-1:1;return f*m},s=(l,d,u)=>{let c=n(l,u),h={_x:(l._x+u._x)/2,_y:(l._y+u._y)/2},p=n(d,h),f=Math.atan(p/c),m=Math.floor(t(f)),g=h._y-d._y<0?-1:1;return m*g};if(!e||!e._positions||e._positions.length!==68)return r;let o=e._positions;return r.roll=i(o[27],o[66]),r.pitch=s(o[14],o[30],o[2]),r.yaw=a(o[14],o[33],o[2]),r}function gT(e,t){let{box:n}=e.detection,r=t.shiftBy(n.x,n.y),a=r.align(),{imageDims:i}=e.detection,s=new Fa(e.detection.score,a.rescale(i.reverse()),i),o=oOe(t);return{...e,landmarks:r,unshiftedLandmarks:t,alignedRect:s,angle:o}}var TH=class{constructor(e={}){let{drawLines:t=!0,drawPoints:n=!0,lineWidth:r,lineColor:a,pointSize:i,pointColor:s}=e;this.drawLines=t,this.drawPoints=n,this.lineWidth=r||1,this.pointSize=i||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}},NH=class{constructor(e,t={}){this.faceLandmarks=e,this.options=new TH(t)}draw(e){let t=Fo(e),{drawLines:n,drawPoints:r,lineWidth:a,lineColor:i,pointSize:s,pointColor:o}=this.options;if(n&&this.faceLandmarks instanceof oH&&(t.strokeStyle=i,t.lineWidth=a,Gs(t,this.faceLandmarks.getJawOutline()),Gs(t,this.faceLandmarks.getLeftEyeBrow()),Gs(t,this.faceLandmarks.getRightEyeBrow()),Gs(t,this.faceLandmarks.getNose()),Gs(t,this.faceLandmarks.getLeftEye(),!0),Gs(t,this.faceLandmarks.getRightEye(),!0),Gs(t,this.faceLandmarks.getMouth(),!0)),r){t.strokeStyle=o,t.fillStyle=o;let l=d=>{t.beginPath(),t.arc(d.x,d.y,s,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(l)}}};function lOe(e,t){(Array.isArray(t)?t:[t]).forEach(n=>{let r=n instanceof Im?n:mT(n)?n.landmarks:void 0;if(!r)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new NH(r).draw(e)})}function uOe(e,t){let n=cT(e,t),r=hT(e,t);function a(s,o,l){let d=r(s,o,"".concat(l,"/separable_conv0")),u=r(o,o,"".concat(l,"/separable_conv1")),c=n(s,o,1,"".concat(l,"/expansion_conv"));return{separable_conv0:d,separable_conv1:u,expansion_conv:c}}function i(s,o){let l=r(s,s,"".concat(o,"/separable_conv0")),d=r(s,s,"".concat(o,"/separable_conv1")),u=r(s,s,"".concat(o,"/separable_conv2"));return{separable_conv0:l,separable_conv1:d,separable_conv2:u}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function dOe(e,t){let n=[],{extractWeights:r,getRemainingWeights:a}=tl(e),{extractConvParams:i,extractSeparableConvParams:s,extractReductionBlockParams:o,extractMainBlockParams:l}=uOe(r,n),d=i(3,32,3,"entry_flow/conv_in"),u=o(32,64,"entry_flow/reduction_block_0"),c=o(64,128,"entry_flow/reduction_block_1"),h={conv_in:d,reduction_block_0:u,reduction_block_1:c},p={};hh(t,0,1).forEach(b=>{p["main_block_".concat(b)]=l(128,"middle_flow/main_block_".concat(b))});let f=o(128,256,"exit_flow/reduction_block"),m=s(256,512,"exit_flow/separable_conv"),g={reduction_block:f,separable_conv:m};if(a().length!==0)throw new Error("weights remaing after extract: ".concat(a().length));return{paramMappings:n,params:{entry_flow:h,middle_flow:p,exit_flow:g}}}function cOe(e,t){let n=Bd(e,t),r=kH(n),a=pT(n);function i(o){let l=a("".concat(o,"/separable_conv0")),d=a("".concat(o,"/separable_conv1")),u=r("".concat(o,"/expansion_conv"));return{separable_conv0:l,separable_conv1:d,expansion_conv:u}}function s(o){let l=a("".concat(o,"/separable_conv0")),d=a("".concat(o,"/separable_conv1")),u=a("".concat(o,"/separable_conv2"));return{separable_conv0:l,separable_conv1:d,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:s}}function hOe(e,t){let n=[],{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:s}=cOe(e,n),o=r("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),d=i("entry_flow/reduction_block_1"),u={conv_in:o,reduction_block_0:l,reduction_block_1:d},c={};hh(t,0,1).forEach(m=>{c["main_block_".concat(m)]=s("middle_flow/main_block_".concat(m))});let h=i("exit_flow/reduction_block"),p=a("exit_flow/separable_conv"),f={reduction_block:h,separable_conv:p};return el(e,n),{params:{entry_flow:u,middle_flow:c,exit_flow:f},paramMappings:n}}function _H(e,t,n){return ne($r(e,t.filters,n,"same"),t.bias)}function f1(e,t,n=!0){let r=n?gt(e):e;return r=Ta(r,t.separable_conv0,[1,1]),r=Ta(gt(r),t.separable_conv1,[1,1]),r=Mn(r,[3,3],[2,2],"same"),r=ne(r,_H(e,t.expansion_conv,[2,2])),r}function pOe(e,t){let n=Ta(gt(e),t.separable_conv0,[1,1]);return n=Ta(gt(n),t.separable_conv1,[1,1]),n=Ta(gt(n),t.separable_conv2,[1,1]),n=ne(n,e),n}var fOe=class extends Jo{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return G(()=>{let n=ce(e.toBatchTensor(112,!0),"float32"),r=jg(n,[122.782,117.001,104.298]).div(255),a=gt(_H(r,t.entry_flow.conv_in,[2,2]));return a=f1(a,t.entry_flow.reduction_block_0,!1),a=f1(a,t.entry_flow.reduction_block_1),hh(this._numMainBlocks,0,1).forEach(i=>{a=pOe(a,t.middle_flow["main_block_".concat(i)])}),a=f1(a,t.exit_flow.reduction_block),a=gt(Ta(a,t.exit_flow.separable_conv,[1,1])),a})}async forward(e){return this.forwardInput(await Nr(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return hOe(e,this._numMainBlocks)}extractParams(e){return dOe(e,this._numMainBlocks)}};function mOe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=tl(e),a=vH(n,t),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{fc:{age:i,gender:s}}}}function gOe(e){let t=[],n=Bd(e,t);function r(i){let s=n("".concat(i,"/weights"),2),o=n("".concat(i,"/bias"),1);return{weights:s,bias:o}}let a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return el(e,t),{params:a,paramMappings:t}}var bOe=(e=>(e.FEMALE="female",e.MALE="male",e))(bOe||{}),yOe=class extends Jo{constructor(e=new fOe(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error("".concat(this._name," - load model before inference"));return G(()=>{let n=e instanceof Fv?this.faceFeatureExtractor.forwardInput(e):e,r=Ms(n,[7,7],[2,2],"valid").as2D(n.shape[0],-1),a=TS(r,t.fc.age).as1D(),i=TS(r,t.fc.gender);return{age:a,gender:i}})}forwardInput(e){return G(()=>{let{age:t,gender:n}=this.runNet(e);return{age:t,gender:qo(n)}})}async forward(e){return this.forwardInput(await Nr(e))}async predictAgeAndGender(e){let t=await Nr(e),n=await this.forwardInput(t),r=tn(n.age),a=tn(n.gender),i=r.map((o,l)=>({ageTensor:o,genderTensor:a[l]})),s=await Promise.all(i.map(async({ageTensor:o,genderTensor:l})=>{let d=o.dataSync()[0],u=l.dataSync()[0],c=u>.5,h=c?"male":"female",p=c?u:1-u;return o.dispose(),l.dispose(),{age:d,gender:h,genderProbability:p}}));return n.age.dispose(),n.gender.dispose(),t.isBatchInput?s:s[0]}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return mOe(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=$H(e);return this.faceFeatureExtractor.loadFromWeightMap(t),gOe(n)}extractParams(e){let t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}},AH=class extends CH{postProcess(e,t,n){let r=n.map(({width:i,height:s})=>{let o=t/Math.max(s,i);return{width:i*o,height:s*o}}),a=r.length;return G(()=>{let i=(d,u)=>Cn([ca([68],d,"float32"),ca([68],u,"float32")],1).as2D(1,136).as1D(),s=(d,u)=>{let{width:c,height:h}=r[d];return u(c,h)?Math.abs(c-h)/2:0},o=d=>s(d,(u,c)=>u<c),l=d=>s(d,(u,c)=>c<u);return e.mul(ca([a,136],t,"float32")).sub(Cn(Array.from(Array(a),(d,u)=>i(o(u),l(u))))).div(Cn(Array.from(Array(a),(d,u)=>i(r[u].width,r[u].height))))})}forwardInput(e){return G(()=>{let t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(([n,r])=>({height:n,width:r})))})}async forward(e){return this.forwardInput(await Nr(e))}async detectLandmarks(e){let t=await Nr(e),n=G(()=>tn(this.forwardInput(t))),r=await Promise.all(n.map(async(a,i)=>{let s=Array.from(a.dataSync()),o=s.filter((d,u)=>$S(u)),l=s.filter((d,u)=>!$S(u));return new oH(Array(68).fill(0).map((d,u)=>new it(o[u],l[u])),{height:t.getInputHeight(i),width:t.getInputWidth(i)})}));return n.forEach(a=>a.dispose()),t.isBatchInput?r:r[0]}getClassifierChannelsOut(){return 136}},vOe=class extends AH{constructor(e=new IH){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}};function xOe(e){let t=[],{extractDenseBlock3Params:n}=SH(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return el(e,t),{params:r,paramMappings:t}}function wOe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=tl(e),{extractDenseBlock3Params:a}=wH(n,t),i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),o=a(64,128,"dense2");if(r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o}}}var kOe=class extends Jo{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return G(()=>{let n=ce(e.toBatchTensor(112,!0),"float32"),r=jg(n,[122.782,117.001,104.298]).div(255),a=p1(r,t.dense0,!0);return a=p1(a,t.dense1),a=p1(a,t.dense2),a=Ms(a,[14,14],[2,2],"valid"),a})}async forward(e){return this.forwardInput(await Nr(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return xOe(e)}extractParams(e){return wOe(e)}},SOe=class extends AH{constructor(e=new kOe){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}};function IOe(e,t){return ne(U(e,t.weights),t.biases)}function bT(e,t,n,r,a="same"){let{filters:i,bias:s}=t.conv,o=$r(e,i,n,a);return o=ne(o,s),o=IOe(o,t.scale),r?gt(o):o}function $Oe(e,t){return bT(e,t,[1,1],!0)}function RH(e,t){return bT(e,t,[1,1],!1)}function DH(e,t){return bT(e,t,[2,2],!0,"valid")}function COe(e,t){function n(o,l,d){let u=e(o),c=u.length/(l*d*d);if(rH(c))throw new Error("depth has to be an integer: ".concat(c,", weights.length: ").concat(u.length,", numFilters: ").concat(l,", filterSize: ").concat(d));return G(()=>Ke(Eo(u,[l,c,d,d]),[2,3,1,0]))}function r(o,l,d,u){let c=n(o,l,d),h=mt(e(l));return t.push({paramPath:"".concat(u,"/filters")},{paramPath:"".concat(u,"/bias")}),{filters:c,bias:h}}function a(o,l){let d=mt(e(o)),u=mt(e(o));return t.push({paramPath:"".concat(l,"/weights")},{paramPath:"".concat(l,"/biases")}),{weights:d,biases:u}}function i(o,l,d,u){let c=r(o,l,d,"".concat(u,"/conv")),h=a(l,"".concat(u,"/scale"));return{conv:c,scale:h}}function s(o,l,d,u,c=!1){let h=i((c?.5:1)*o,l,d,"".concat(u,"/conv1")),p=i(o,l,d,"".concat(u,"/conv2"));return{conv1:h,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:s}}function EOe(e){let{extractWeights:t,getRemainingWeights:n}=tl(e),r=[],{extractConvLayerParams:a,extractResidualLayerParams:i}=COe(t,r),s=a(4704,32,7,"conv32_down"),o=i(9216,32,3,"conv32_1"),l=i(9216,32,3,"conv32_2"),d=i(9216,32,3,"conv32_3"),u=i(36864,64,3,"conv64_down",!0),c=i(36864,64,3,"conv64_1"),h=i(36864,64,3,"conv64_2"),p=i(36864,64,3,"conv64_3"),f=i(147456,128,3,"conv128_down",!0),m=i(147456,128,3,"conv128_1"),g=i(147456,128,3,"conv128_2"),b=i(589824,256,3,"conv256_down",!0),y=i(589824,256,3,"conv256_1"),v=i(589824,256,3,"conv256_2"),x=i(589824,256,3,"conv256_down_out"),w=G(()=>Ke(Xi(t(256*128),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),n().length!==0)throw new Error("weights remaing after extract: ".concat(n().length));return{params:{conv32_down:s,conv32_1:o,conv32_2:l,conv32_3:d,conv64_down:u,conv64_1:c,conv64_2:h,conv64_3:p,conv128_down:f,conv128_1:m,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:v,conv256_down_out:x,fc:w},paramMappings:r}}function TOe(e,t){let n=Bd(e,t);function r(s){let o=n("".concat(s,"/scale/weights"),1),l=n("".concat(s,"/scale/biases"),1);return{weights:o,biases:l}}function a(s){let o=n("".concat(s,"/conv/filters"),4),l=n("".concat(s,"/conv/bias"),1),d=r(s);return{conv:{filters:o,bias:l},scale:d}}function i(s){return{conv1:a("".concat(s,"/conv1")),conv2:a("".concat(s,"/conv2"))}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function NOe(e){let t=[],{extractConvLayerParams:n,extractResidualLayerParams:r}=TOe(e,t),a=n("conv32_down"),i=r("conv32_1"),s=r("conv32_2"),o=r("conv32_3"),l=r("conv64_down"),d=r("conv64_1"),u=r("conv64_2"),c=r("conv64_3"),h=r("conv128_down"),p=r("conv128_1"),f=r("conv128_2"),m=r("conv256_down"),g=r("conv256_1"),b=r("conv256_2"),y=r("conv256_down_out"),{fc:v}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!nH(v))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have ".concat(v));let x={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:o,conv64_down:l,conv64_1:d,conv64_2:u,conv64_3:c,conv128_down:h,conv128_1:p,conv128_2:f,conv256_down:m,conv256_1:g,conv256_2:b,conv256_down_out:y,fc:v};return el(e,t),{params:x,paramMappings:t}}function Li(e,t){let n=$Oe(e,t.conv1);return n=RH(n,t.conv2),n=ne(n,e),n=gt(n),n}function Vb(e,t){let n=DH(e,t.conv1);n=RH(n,t.conv2);let r=Ms(e,2,2,"valid"),a=Kt(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){let s=[...n.shape];s[1]=1;let o=Kt(s);n=kt([n,o],1);let l=[...n.shape];l[2]=1;let d=Kt(l);n=kt([n,d],2)}return r=i?kt([r,a],3):r,n=ne(r,n),n=gt(n),n}var _Oe=class extends Jo{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return G(()=>{let n=ce(e.toBatchTensor(150,!0),"float32"),r=jg(n,[122.782,117.001,104.298]).div(255),a=DH(r,t.conv32_down);a=Mn(a,3,2,"valid"),a=Li(a,t.conv32_1),a=Li(a,t.conv32_2),a=Li(a,t.conv32_3),a=Vb(a,t.conv64_down),a=Li(a,t.conv64_1),a=Li(a,t.conv64_2),a=Li(a,t.conv64_3),a=Vb(a,t.conv128_down),a=Li(a,t.conv128_1),a=Li(a,t.conv128_2),a=Vb(a,t.conv256_down),a=Li(a,t.conv256_1),a=Li(a,t.conv256_2),a=Vb(a,t.conv256_down_out);let i=a.mean([1,2]);return Ge(i,t.fc)})}async forward(e){return this.forwardInput(await Nr(e))}async computeFaceDescriptor(e){var t;if((t=e==null?void 0:e.shape)!=null&&t.some(i=>i<=0))return new Float32Array(128);let n=await Nr(e),r=G(()=>tn(this.forwardInput(n))),a=await Promise.all(r.map(i=>i.data()));return r.forEach(i=>i.dispose()),n.isBatchInput?a:a[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return NOe(e)}extractParams(e){return EOe(e)}};function FH(e,t){return{...e,descriptor:t}}function MH(e,t){return{...e,age:t}}function OH(e,t,n){return{...e,gender:t,genderProbability:n}}function AOe(e,t){function n(l,d){let u=Eo(e(9*l),[3,3,l,1]),c=mt(e(l)),h=mt(e(l)),p=mt(e(l)),f=mt(e(l));return t.push({paramPath:"".concat(d,"/filters")},{paramPath:"".concat(d,"/batch_norm_scale")},{paramPath:"".concat(d,"/batch_norm_offset")},{paramPath:"".concat(d,"/batch_norm_mean")},{paramPath:"".concat(d,"/batch_norm_variance")}),{filters:u,batch_norm_scale:c,batch_norm_offset:h,batch_norm_mean:p,batch_norm_variance:f}}function r(l,d,u,c,h){let p=Eo(e(l*d*u*u),[u,u,l,d]),f=mt(e(d));return t.push({paramPath:"".concat(c,"/filters")},{paramPath:"".concat(c,"/").concat(h?"batch_norm_offset":"bias")}),{filters:p,bias:f}}function a(l,d,u,c){let{filters:h,bias:p}=r(l,d,u,c,!0);return{filters:h,batch_norm_offset:p}}function i(l,d,u){let c=n(l,"".concat(u,"/depthwise_conv")),h=a(l,d,1,"".concat(u,"/pointwise_conv"));return{depthwise_conv:c,pointwise_conv:h}}function s(){let l=a(3,32,3,"mobilenetv1/conv_0"),d=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),c=i(128,128,"mobilenetv1/conv_3"),h=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),f=i(256,512,"mobilenetv1/conv_6"),m=i(512,512,"mobilenetv1/conv_7"),g=i(512,512,"mobilenetv1/conv_8"),b=i(512,512,"mobilenetv1/conv_9"),y=i(512,512,"mobilenetv1/conv_10"),v=i(512,512,"mobilenetv1/conv_11"),x=i(512,1024,"mobilenetv1/conv_12"),w=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:d,conv_2:u,conv_3:c,conv_4:h,conv_5:p,conv_6:f,conv_7:m,conv_8:g,conv_9:b,conv_10:y,conv_11:v,conv_12:x,conv_13:w}}function o(){let l=a(1024,256,1,"prediction_layer/conv_0"),d=a(256,512,3,"prediction_layer/conv_1"),u=a(512,128,1,"prediction_layer/conv_2"),c=a(128,256,3,"prediction_layer/conv_3"),h=a(256,128,1,"prediction_layer/conv_4"),p=a(128,256,3,"prediction_layer/conv_5"),f=a(256,64,1,"prediction_layer/conv_6"),m=a(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),b=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),y=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),v=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),x=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),$=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),C=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),E=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),R=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),N=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor");return{conv_0:l,conv_1:d,conv_2:u,conv_3:c,conv_4:h,conv_5:p,conv_6:f,conv_7:m,box_predictor_0:{box_encoding_predictor:g,class_predictor:b},box_predictor_1:{box_encoding_predictor:y,class_predictor:v},box_predictor_2:{box_encoding_predictor:x,class_predictor:w},box_predictor_3:{box_encoding_predictor:$,class_predictor:C},box_predictor_4:{box_encoding_predictor:E,class_predictor:A},box_predictor_5:{box_encoding_predictor:R,class_predictor:N}}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:o}}function ROe(e){let t=[],{extractWeights:n,getRemainingWeights:r}=tl(e),{extractMobilenetV1Params:a,extractPredictionLayerParams:i}=AOe(n,t),s=a(),o=i(),l={extra_dim:hx(n(5118*4),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),r().length!==0)throw new Error("weights remaing after extract: ".concat(r().length));return{params:{mobilenetv1:s,prediction_layer:o,output_layer:l},paramMappings:t}}function DOe(e,t){let n=Bd(e,t);function r(d,u,c){let h=n("".concat(d,"/Conv2d_").concat(u,"_pointwise/weights"),4,"".concat(c,"/filters")),p=n("".concat(d,"/Conv2d_").concat(u,"_pointwise/convolution_bn_offset"),1,"".concat(c,"/batch_norm_offset"));return{filters:h,batch_norm_offset:p}}function a(d){let u="mobilenetv1/conv_".concat(d),c="MobilenetV1/Conv2d_".concat(d,"_depthwise"),h="".concat(u,"/depthwise_conv"),p="".concat(u,"/pointwise_conv"),f=n("".concat(c,"/depthwise_weights"),4,"".concat(h,"/filters")),m=n("".concat(c,"/BatchNorm/gamma"),1,"".concat(h,"/batch_norm_scale")),g=n("".concat(c,"/BatchNorm/beta"),1,"".concat(h,"/batch_norm_offset")),b=n("".concat(c,"/BatchNorm/moving_mean"),1,"".concat(h,"/batch_norm_mean")),y=n("".concat(c,"/BatchNorm/moving_variance"),1,"".concat(h,"/batch_norm_variance"));return{depthwise_conv:{filters:f,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:b,batch_norm_variance:y},pointwise_conv:r("MobilenetV1",d,p)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function s(d,u){let c=n("".concat(d,"/weights"),4,"".concat(u,"/filters")),h=n("".concat(d,"/biases"),1,"".concat(u,"/bias"));return{filters:c,bias:h}}function o(d){let u=s("Prediction/BoxPredictor_".concat(d,"/BoxEncodingPredictor"),"prediction_layer/box_predictor_".concat(d,"/box_encoding_predictor")),c=s("Prediction/BoxPredictor_".concat(d,"/ClassPredictor"),"prediction_layer/box_predictor_".concat(d,"/class_predictor"));return{box_encoding_predictor:u,class_predictor:c}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:l}}function FOe(e){let t=[],{extractMobilenetV1Params:n,extractPredictionLayerParams:r}=DOe(e,t),a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Hg(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ".concat(a));let i={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:a}};return el(e,t),{params:i,paramMappings:t}}function Bi(e,t,n){return G(()=>{let r=$r(e,t.filters,n,"same");return r=ne(r,t.batch_norm_offset),cr(r,0,6)})}var MOe=.0010000000474974513;function OOe(e,t,n){return G(()=>{let r=_d(e,t.filters,n,"same");return r=Nd(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,MOe),cr(r,0,6)})}function LOe(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}function POe(e,t){return G(()=>{let n,r=Bi(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((a,i)=>{let s=i+1,o=LOe(s);r=OOe(r,a.depthwise_conv,o),r=Bi(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function zOe(e,t,n){let r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),d=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),c=Math.max(r[n][1],r[n][3]),h=(s-a)*(o-i),p=(u-l)*(c-d);if(h<=0||p<=0)return 0;let f=Math.max(a,l),m=Math.max(i,d),g=Math.min(s,u),b=Math.min(o,c),y=Math.max(g-f,0)*Math.max(b-m,0);return y/(h+p-y)}function BOe(e,t,n,r,a){let i=e.shape[0],s=Math.min(n,i),o=t.map((u,c)=>({score:u,boxIndex:c})).filter(u=>u.score>a).sort((u,c)=>c.score-u.score),l=u=>u<=r?1:0,d=[];return o.forEach(u=>{if(d.length>=s)return;let c=u.score;for(let h=d.length-1;h>=0;--h){let p=zOe(e,u.boxIndex,d[h]);if(p!==0&&(u.score*=l(p),u.score<=a))break}c===u.score&&d.push(u.boxIndex)}),d}function WOe(e){let t=tn(Ke(e,[1,0])),n=[we(t[2],t[0]),we(t[3],t[1])],r=[ne(t[0],Se(n[0],2)),ne(t[1],Se(n[1],2))];return{sizes:n,centers:r}}function VOe(e,t){let{sizes:n,centers:r}=WOe(e),a=tn(Ke(t,[1,0])),i=Se(U(Cr(Se(a[2],5)),n[0]),2),s=ne(U(Se(a[0],10),n[0]),r[0]),o=Se(U(Cr(Se(a[3],5)),n[1]),2),l=ne(U(Se(a[1],10),n[1]),r[1]);return Ke(Cn([we(s,i),we(l,o),ne(s,i),ne(l,o)]),[1,0])}function UOe(e,t,n){return G(()=>{let r=e.shape[0],a=VOe(j(aa(n.extra_dim,[r,1,1]),[-1,4]),j(e,[-1,4]));a=j(a,[r,a.shape[0]/r,4]);let i=Za(Qe(t,[0,0,1],[-1,-1,-1])),s=Qe(i,[0,0,0],[-1,-1,1]);s=j(s,[r,s.shape[1]]);let o=tn(a),l=tn(s);return{boxes:o,scores:l}})}function Qd(e,t){return G(()=>{let n=e.shape[0],r=j(Of(e,t.box_encoding_predictor),[n,-1,1,4]),a=j(Of(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function HOe(e,t,n){return G(()=>{let r=Bi(e,n.conv_0,[1,1]),a=Bi(r,n.conv_1,[2,2]),i=Bi(a,n.conv_2,[1,1]),s=Bi(i,n.conv_3,[2,2]),o=Bi(s,n.conv_4,[1,1]),l=Bi(o,n.conv_5,[2,2]),d=Bi(l,n.conv_6,[1,1]),u=Bi(d,n.conv_7,[2,2]),c=Qd(t,n.box_predictor_0),h=Qd(e,n.box_predictor_1),p=Qd(a,n.box_predictor_2),f=Qd(s,n.box_predictor_3),m=Qd(l,n.box_predictor_4),g=Qd(u,n.box_predictor_5),b=kt([c.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),y=kt([c.classPrediction,h.classPrediction,p.classPrediction,f.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:b,classPredictions:y}})}var Gg=class{constructor({minConfidence:e,maxResults:t}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error("".concat(this._name," - expected minConfidence to be a number between 0 and 1"));if(typeof this._maxResults!="number")throw new Error("".concat(this._name," - expected maxResults to be a number"))}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},jOe=class extends Jo{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return G(()=>{let n=ce(e.toBatchTensor(512,!1),"float32"),r=we(Se(n,127.5),1),a=POe(r,t.mobilenetv1),{boxPredictions:i,classPredictions:s}=HOe(a.out,a.conv11,t.prediction_layer);return UOe(i,s,t.output_layer)})}async forward(e){return this.forwardInput(await Nr(e))}async locateFaces(e,t={}){let{maxResults:n,minConfidence:r}=new Gg(t),a=await Nr(e),{boxes:i,scores:s}=this.forwardInput(a),o=i[0],l=s[0];for(let b=1;b<i.length;b++)i[b].dispose(),s[b].dispose();let d=Array.from(l.dataSync()),u=BOe(o,d,n,.5,r),c=a.getReshapedInputDimensions(0),h=a.inputSize,p=h/c.width,f=h/c.height,m=o.arraySync(),g=u.map(b=>{let[y,v]=[Math.max(0,m[b][0]),Math.min(1,m[b][2])].map($=>$*f),[x,w]=[Math.max(0,m[b][1]),Math.min(1,m[b][3])].map($=>$*p);return new Fa(d[b],new sH(x,y,w-x,v-y),{height:a.getInputHeight(0),width:a.getInputWidth(0)})});return o.dispose(),l.dispose(),g}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return FOe(e)}extractParams(e){return ROe(e)}},GOe=.4,qOe=[new it(.738768,.874946),new it(2.42204,2.65704),new it(4.30971,7.04493),new it(10.246,4.59428),new it(12.6868,11.8741)],KOe=[new it(1.603231,2.094468),new it(6.041143,7.080126),new it(2.882459,3.518061),new it(4.266906,5.178857),new it(9.041765,10.66308)],XOe=[117.001,114.697,97.404],YOe="tiny_yolov2_model",ZOe="tiny_yolov2_separable_conv_model",Ub=e=>typeof e=="number";function QOe(e){if(!e)throw new Error("invalid config: ".concat(e));if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: ".concat(e.withSeparableConvs));if(!Ub(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: ".concat(e.iouThreshold));if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(t=>typeof t=="string"))throw new Error("config.classes has to be an array class names: string[], have: ".concat(JSON.stringify(e.classes)));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(t=>t||{}).every(t=>Ub(t.x)&&Ub(t.y)))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: ".concat(JSON.stringify(e.anchors)));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Ub)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: ".concat(JSON.stringify(e.meanRgb)))}function yT(e){return G(()=>{let t=U(e,Ae(.10000000149011612));return ne(gt(we(e,t)),t)})}function Us(e,t){return G(()=>{let n=Ri(e,[[0,0],[1,1],[1,1],[0,0]]);return n=$r(n,t.conv.filters,[1,1],"valid"),n=we(n,t.bn.sub),n=U(n,t.bn.truediv),n=ne(n,t.conv.bias),yT(n)})}function Hs(e,t){return G(()=>{let n=Ri(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Ep(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=ne(n,t.bias),yT(n)})}function JOe(e,t){let n=cT(e,t);function r(s,o){let l=mt(e(s)),d=mt(e(s));return t.push({paramPath:"".concat(o,"/sub")},{paramPath:"".concat(o,"/truediv")}),{sub:l,truediv:d}}function a(s,o,l){let d=n(s,o,3,"".concat(l,"/conv")),u=r(o,"".concat(l,"/bn"));return{conv:d,bn:u}}let i=hT(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function e3e(e,t,n,r){let{extractWeights:a,getRemainingWeights:i}=tl(e),s=[],{extractConvParams:o,extractConvWithBatchNormParams:l,extractSeparableConvParams:d}=JOe(a,s),u;if(t.withSeparableConvs){let[c,h,p,f,m,g,b,y,v]=r,x=t.isFirstLayerConv2d?o(c,h,3,"conv0"):d(c,h,"conv0"),w=d(h,p,"conv1"),$=d(p,f,"conv2"),C=d(f,m,"conv3"),E=d(m,g,"conv4"),A=d(g,b,"conv5"),R=y?d(b,y,"conv6"):void 0,N=v?d(y,v,"conv7"):void 0,I=o(v||y||b,5*n,1,"conv8");u={conv0:x,conv1:w,conv2:$,conv3:C,conv4:E,conv5:A,conv6:R,conv7:N,conv8:I}}else{let[c,h,p,f,m,g,b,y,v]=r,x=l(c,h,"conv0"),w=l(h,p,"conv1"),$=l(p,f,"conv2"),C=l(f,m,"conv3"),E=l(m,g,"conv4"),A=l(g,b,"conv5"),R=l(b,y,"conv6"),N=l(y,v,"conv7"),I=o(v,5*n,1,"conv8");u={conv0:x,conv1:w,conv2:$,conv3:C,conv4:E,conv5:A,conv6:R,conv7:N,conv8:I}}if(i().length!==0)throw new Error("weights remaing after extract: ".concat(i().length));return{params:u,paramMappings:s}}function t3e(e,t){let n=Bd(e,t);function r(o){let l=n("".concat(o,"/sub"),1),d=n("".concat(o,"/truediv"),1);return{sub:l,truediv:d}}function a(o){let l=n("".concat(o,"/filters"),4),d=n("".concat(o,"/bias"),1);return{filters:l,bias:d}}function i(o){let l=a("".concat(o,"/conv")),d=r("".concat(o,"/bn"));return{conv:l,bn:d}}let s=pT(n);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:s}}function n3e(e,t){let n=[],{extractConvParams:r,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}=t3e(e,n),s;if(t.withSeparableConvs){let o=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?r("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:o>7?i("conv6"):void 0,conv7:o>8?i("conv7"):void 0,conv8:r("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:r("conv8")};return el(e,n),{params:s,paramMappings:n}}var vT=class{constructor({inputSize:e,scoreThreshold:t}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error("".concat(this._name," - expected inputSize to be a number divisible by 32"));if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error("".concat(this._name," - expected scoreThreshold to be a number between 0 and 1"))}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},LH=class extends Jo{constructor(e){super("TinyYolov2"),QOe(e),this._config=e}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(e,t){let n=Us(e,t.conv0);return n=Mn(n,[2,2],[2,2],"same"),n=Us(n,t.conv1),n=Mn(n,[2,2],[2,2],"same"),n=Us(n,t.conv2),n=Mn(n,[2,2],[2,2],"same"),n=Us(n,t.conv3),n=Mn(n,[2,2],[2,2],"same"),n=Us(n,t.conv4),n=Mn(n,[2,2],[2,2],"same"),n=Us(n,t.conv5),n=Mn(n,[2,2],[1,1],"same"),n=Us(n,t.conv6),n=Us(n,t.conv7),Of(n,t.conv8,"valid",!1)}runMobilenet(e,t){let n=this.config.isFirstLayerConv2d?yT(Of(e,t.conv0,"valid",!1)):Hs(e,t.conv0);return n=Mn(n,[2,2],[2,2],"same"),n=Hs(n,t.conv1),n=Mn(n,[2,2],[2,2],"same"),n=Hs(n,t.conv2),n=Mn(n,[2,2],[2,2],"same"),n=Hs(n,t.conv3),n=Mn(n,[2,2],[2,2],"same"),n=Hs(n,t.conv4),n=Mn(n,[2,2],[2,2],"same"),n=Hs(n,t.conv5),n=Mn(n,[2,2],[1,1],"same"),n=t.conv6?Hs(n,t.conv6):n,n=t.conv7?Hs(n,t.conv7):n,Of(n,t.conv8,"valid",!1)}forwardInput(e,t){let{params:n}=this;if(!n)throw new Error("TinyYolov2 - load model before inference");return G(()=>{let r=ce(e.toBatchTensor(t,!1),"float32");return r=this.config.meanRgb?jg(r,this.config.meanRgb):r,r=r.div(255),this.config.withSeparableConvs?this.runMobilenet(r,n):this.runTinyYolov2(r,n)})}async forward(e,t){return this.forwardInput(await Nr(e),t)}async detect(e,t={}){let{inputSize:n,scoreThreshold:r}=new vT(t),a=await Nr(e),i=await this.forwardInput(a,n),s=G(()=>tn(i)[0].expandDims()),o={width:a.getInputWidth(0),height:a.getInputHeight(0)},l=await this.extractBoxes(s,a.getReshapedInputDimensions(0),r);i.dispose(),s.dispose();let d=l.map(p=>p.box),u=l.map(p=>p.score),c=l.map(p=>p.classScore),h=l.map(p=>this.config.classes[p.label]);return PMe(d.map(p=>p.rescale(n)),u,this.config.iouThreshold,!0).map(p=>new rT(u[p],c[p],h[p],d[p],o))}getDefaultModelName(){return""}extractParamsFromWeightMap(e){return n3e(e,this.config)}extractParams(e){let t=this.config.filterSizes||LH.DEFAULT_FILTER_SIZES,n=t?t.length:void 0;if(n!==7&&n!==8&&n!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ".concat(n," filterSizes in config"));return e3e(e,this.config,this.boxEncodingSize,t)}async extractBoxes(e,t,n){let{width:r,height:a}=t,i=Math.max(r,a),s=i/r,o=i/a,l=e.shape[1],d=this.config.anchors.length,[u,c,h]=G(()=>{let g=e.reshape([l,l,d,this.boxEncodingSize]),b=g.slice([0,0,0,0],[l,l,d,4]),y=g.slice([0,0,0,4],[l,l,d,1]),v=this.withClassScores?qo(g.slice([0,0,0,5],[l,l,d,this.config.classes.length]),3):Ae(0);return[b,y,v]}),p=[],f=await c.array(),m=await u.array();for(let g=0;g<l;g++)for(let b=0;b<l;b++)for(let y=0;y<d;y++){let v=h1(f[g][b][y][0]);if(!n||v>n){let x=(b+h1(m[g][b][y][0]))/l*s,w=(g+h1(m[g][b][y][1]))/l*o,$=Math.exp(m[g][b][y][2])*this.config.anchors[y].x/l*s,C=Math.exp(m[g][b][y][3])*this.config.anchors[y].y/l*o,E=x-$/2,A=w-C/2,R={row:g,col:b,anchor:y},{classScore:N,label:I}=this.withClassScores?await this.extractPredictedClass(h,R):{classScore:1,label:0};p.push({box:new iH(E,A,E+$,A+C),score:v,classScore:v*N,label:I,...R})}}return u.dispose(),c.dispose(),h.dispose(),p}async extractPredictedClass(e,t){let{row:n,col:r,anchor:a}=t,i=await e.array();return Array(this.config.classes.length).fill(0).map((s,o)=>i[n][r][a][o]).map((s,o)=>({classScore:s,label:o})).reduce((s,o)=>s.classScore>o.classScore?s:o)}},xT=LH;xT.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var r3e=class extends xT{constructor(e=!0){let t={withSeparableConvs:e,iouThreshold:GOe,classes:["face"],...e?{anchors:KOe,meanRgb:XOe}:{anchors:qOe,withClassScores:!0}};super(t)}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(n=>new Fa(n.score,n.relativeBox,{width:n.imageWidth,height:n.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?ZOe:YOe}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},a3e=class extends vT{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},qg=class{async then(e){return e(await this.run())}async run(){throw new Error("ComposableTask - run is not implemented")}};async function Qx(e,t,n,r,a=({alignedRect:i})=>i){let i=e.map(l=>mT(l)?a(l):l.detection),s=r||(t instanceof Ue?await dT(t,i):await uT(t,i)),o=await n(s);return s.forEach(l=>l instanceof Ue&&l.dispose()),o}async function wT(e,t,n,r,a){return Qx([e],t,async i=>n(i[0]),r,a)}var i3e=.4,s3e=[new it(1.603231,2.094468),new it(6.041143,7.080126),new it(2.882459,3.518061),new it(4.266906,5.178857),new it(9.041765,10.66308)],o3e=[117.001,114.697,97.404],l3e=class extends xT{constructor(){let e={withSeparableConvs:!0,iouThreshold:i3e,classes:["face"],anchors:s3e,meanRgb:o3e,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};super(e)}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(n=>new Fa(n.score,n.relativeBox,{width:n.imageWidth,height:n.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},ha={ssdMobilenetv1:new jOe,tinyFaceDetector:new l3e,tinyYolov2:new r3e,faceLandmark68Net:new vOe,faceLandmark68TinyNet:new SOe,faceRecognitionNet:new _Oe,faceExpressionNet:new aOe,ageGenderNet:new yOe},PH=class extends qg{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},kT=class extends PH{async run(){let e=await this.parentTask,t=await Qx(e,this.input,async n=>Promise.all(n.map(r=>ha.faceExpressionNet.predictExpressions(r))),this.extractedFaces);return e.map((n,r)=>EH(n,t[r]))}withAgeAndGender(){return new CT(this,this.input)}},ST=class extends PH{async run(){let e=await this.parentTask;if(!e)return;let t=await wT(e,this.input,n=>ha.faceExpressionNet.predictExpressions(n),this.extractedFaces);return EH(e,t)}withAgeAndGender(){return new ET(this,this.input)}},IT=class extends kT{withAgeAndGender(){return new TT(this,this.input)}withFaceDescriptors(){return new _T(this,this.input)}},$T=class extends ST{withAgeAndGender(){return new NT(this,this.input)}withFaceDescriptor(){return new AT(this,this.input)}},zH=class extends qg{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},CT=class extends zH{async run(){let e=await this.parentTask,t=await Qx(e,this.input,async n=>Promise.all(n.map(r=>ha.ageGenderNet.predictAgeAndGender(r))),this.extractedFaces);return e.map((n,r)=>{let{age:a,gender:i,genderProbability:s}=t[r];return MH(OH(n,i,s),a)})}withFaceExpressions(){return new kT(this,this.input)}},ET=class extends zH{async run(){let e=await this.parentTask;if(!e)return;let{age:t,gender:n,genderProbability:r}=await wT(e,this.input,a=>ha.ageGenderNet.predictAgeAndGender(a),this.extractedFaces);return MH(OH(e,n,r),t)}withFaceExpressions(){return new ST(this,this.input)}},TT=class extends CT{withFaceExpressions(){return new IT(this,this.input)}withFaceDescriptors(){return new _T(this,this.input)}},NT=class extends ET{withFaceExpressions(){return new $T(this,this.input)}withFaceDescriptor(){return new AT(this,this.input)}},BH=class extends qg{constructor(e,t){super(),this.parentTask=e,this.input=t}},_T=class extends BH{async run(){let e=await this.parentTask;return(await Qx(e,this.input,t=>Promise.all(t.map(n=>ha.faceRecognitionNet.computeFaceDescriptor(n))),null,t=>t.landmarks.align(null,{useDlibAlignment:!0}))).map((t,n)=>FH(e[n],t))}withFaceExpressions(){return new IT(this,this.input)}withAgeAndGender(){return new TT(this,this.input)}},AT=class extends BH{async run(){let e=await this.parentTask;if(!e)return;let t=await wT(e,this.input,n=>ha.faceRecognitionNet.computeFaceDescriptor(n),null,n=>n.landmarks.align(null,{useDlibAlignment:!0}));return FH(e,t)}withFaceExpressions(){return new $T(this,this.input)}withAgeAndGender(){return new NT(this,this.input)}},WH=class extends qg{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.useTinyLandmarkNet=n}get landmarkNet(){return this.useTinyLandmarkNet?ha.faceLandmark68TinyNet:ha.faceLandmark68Net}},u3e=class extends WH{async run(){let e=await this.parentTask,t=e.map(a=>a.detection),n=this.input instanceof Ue?await dT(this.input,t):await uT(this.input,t),r=await Promise.all(n.map(a=>this.landmarkNet.detectLandmarks(a)));return n.forEach(a=>a instanceof Ue&&a.dispose()),e.filter((a,i)=>r[i]).map((a,i)=>gT(a,r[i]))}withFaceExpressions(){return new IT(this,this.input)}withAgeAndGender(){return new TT(this,this.input)}withFaceDescriptors(){return new _T(this,this.input)}},d3e=class extends WH{async run(){let e=await this.parentTask;if(!e)return;let{detection:t}=e,n=this.input instanceof Ue?await dT(this.input,[t]):await uT(this.input,[t]),r=await this.landmarkNet.detectLandmarks(n[0]);return n.forEach(a=>a instanceof Ue&&a.dispose()),gT(e,r)}withFaceExpressions(){return new $T(this,this.input)}withAgeAndGender(){return new NT(this,this.input)}withFaceDescriptor(){return new AT(this,this.input)}},VH=class extends qg{constructor(e,t=new Gg){super(),this.input=e,this.options=t}},UH=class extends VH{async run(){let{input:e,options:t}=this,n;if(t instanceof a3e)n=ha.tinyFaceDetector.locateFaces(e,t);else if(t instanceof Gg)n=ha.ssdMobilenetv1.locateFaces(e,t);else if(t instanceof vT)n=ha.tinyYolov2.locateFaces(e,t);else throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");return n}runAndExtendWithFaceDetections(){return new Promise((e,t)=>{this.run().then(n=>e(n.map(r=>Rv({},r)))).catch(n=>t(n))})}withFaceLandmarks(e=!1){return new u3e(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new kT(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new CT(this.runAndExtendWithFaceDetections(),this.input)}},c3e=class extends VH{async run(){let e=await new UH(this.input,this.options),t=e[0];return e.forEach(n=>{n.score>t.score&&(t=n)}),t}runAndExtendWithFaceDetection(){return new Promise(async e=>{let t=await this.run();e(t?Rv({},t):void 0)})}withFaceLandmarks(e=!1){return new d3e(this.runAndExtendWithFaceDetection(),this.input,e)}withFaceExpressions(){return new ST(this.runAndExtendWithFaceDetection(),this.input)}withAgeAndGender(){return new ET(this.runAndExtendWithFaceDetection(),this.input)}};function h3e(e,t=new Gg){return new c3e(e,t)}function p3e(e,t=new Gg){return new UH(e,t)}function f3e(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");let n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((a,i)=>a-r[i]).reduce((a,i)=>a+i*i,0))}var HH=class{constructor(e,t=.6){this._distanceThreshold=t;let n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");let r=1,a=()=>"person ".concat(r++);this._labeledDescriptors=n.map(i=>{if(i instanceof xc)return i;if(i instanceof Float32Array)return new xc(a(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new xc(a(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}get labeledDescriptors(){return this._labeledDescriptors}get distanceThreshold(){return this._distanceThreshold}computeMeanDistance(e,t){return t.map(n=>f3e(n,e)).reduce((n,r)=>n+r,0)/(t.length||1)}matchDescriptor(e){return this.labeledDescriptors.map(({descriptors:t,label:n})=>new aD(n,this.computeMeanDistance(e,t))).reduce((t,n)=>t.distance<n.distance?t:n)}findBestMatch(e){let t=this.matchDescriptor(e);return t.distance<this._distanceThreshold?t:new aD("unknown",t.distance)}toJSON(){return{distanceThreshold:this._distanceThreshold,labeledDescriptors:this._labeledDescriptors.map(e=>e.toJSON())}}static fromJSON(e){let t=e.labeledDescriptors.map(n=>xc.fromJSON(n));return new HH(t,e.distanceThreshold)}};function jH(e,t){let{width:n,height:r}=new yo(t.width,t.height);if(n<=0||r<=0)throw new Error("resizeResults - invalid dimensions: ".concat(JSON.stringify({width:n,height:r})));if(Array.isArray(e))return e.map(a=>jH(a,{width:n,height:r}));if(mT(e)){let a=e.detection.forSize(n,r),i=e.unshiftedLandmarks.forSize(a.box.width,a.box.height);return gT(Rv(e,a),i)}return $m(e)?Rv(e,e.detection.forSize(n,r)):e instanceof Im||e instanceof Fa?e.forSize(n,r):e}const m3e="Unknown",oD=.5,GH=()=>{const e=ut.useRef(null),t=ut.useRef(null);return ut.useEffect(()=>{const n=async()=>{try{const i=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=i)}catch(i){console.error("Error accessing webcam:",i)}},r=async()=>{const i=["Yeongseo","jane","Daegwon"];return Promise.all(i.map(async s=>{const o=[];for(let l=1;l<=2;l++){const d=await YMe("./labels/".concat(s,"/").concat(l,".jpg")),u=await h3e(d).withFaceLandmarks().withFaceDescriptor();o.push(u.descriptor)}return new xc(s,o)}))},a=async()=>{const i=await r(),s=new HH(i,oD),o=e.current,l=t.current,d={width:o.width,height:o.height};JMe(l,d),setInterval(async()=>{if(!o.paused&&!o.ended){const u=await p3e(o).withFaceLandmarks().withFaceDescriptors(),c=jH(u,d);l.getContext("2d").clearRect(0,0,l.width,l.height),c.map(p=>s.findBestMatch(p.descriptor)).forEach((p,f)=>{const m=c[f].detection.box;let g=p.toString();p.distance>oD&&(g=m3e);const b=l.getContext("2d");b.lineWidth=2,b.strokeStyle="red",b.fillStyle="red",b.font="20px Arial";const y=c[f].landmarks,v=y.getLeftEye(),x=y.getRightEye(),w=(v[0].x+x[3].x)/2,$=(v[0].y+x[3].y)/2,C=b.measureText(g).width,E=parseInt(b.font),A=w-C/2,R=$-m.height/2-E;b.fillText(g,A,R+E),b.strokeRect(m.x,m.y,m.width,m.height)})}},100)};Promise.all([ha.ssdMobilenetv1.loadFromUri("/models"),ha.faceRecognitionNet.loadFromUri("/models"),ha.faceLandmark68Net.loadFromUri("/models")]).then(()=>n().then(a))},[]),Y.jsxs(Y.Fragment,{children:[Y.jsx("video",{ref:e,id:"video",width:"720",height:"560",autoPlay:!0,muted:!0,style:{margin:"0 auto",position:"absolute"}}),Y.jsx("canvas",{ref:t,style:{margin:"0 auto",position:"absolute"}})]})},g3e=()=>Y.jsxs("div",{children:[Y.jsx("h1",{children:"Face Recognition App"}),Y.jsx(GH,{})]});c3({mode:"md"});const Cm=e=>{const[t,n]=ut.useState(!1),[r,a]=ut.useState("회원번호 입력 (5자리)"),[i,s]=ut.useState(!1),o=f=>{f=="clubID"?(n(!1),a("회원번호 입력 (5자리)")):f=="Tel"&&(n(!0),a("010-")),s(!1)},l="만약 얼굴인식이 안되는 경우, \n본인의 회원번호(5자리) 혹은 휴대폰번호를 입력해주세요.",d=f=>{t==!1?(e.settypeid(!1),u(f)):t==!0&&(e.settypeid(!0),c(f))},u=f=>{i==!1&&r.length>=6&&(a(""+f.target.textContent),s(!0)),r.length==5||(r.length>5?a(f.target.textContent):a(r+f.target.textContent))},c=f=>{i==!1&&(a(""+f.target.textContent),s(!0)),r.length==3||r.length==8?a(r+"-"+f.target.textContent):r.length>=13?r.length>13&&a(f.target.textContent):a(r+f.target.textContent),e.AlertFunc(r)},h=()=>{t==!0&&(r.length==5||r.length==10)?a(r.slice(0,-2)):a(r.slice(0,-1))},p=()=>{a("")};return ut.useEffect(()=>{e.AlertFunc(r)}),Y.jsxs(Y.Fragment,{children:[Y.jsx(i$,{}),Y.jsx(zm,{children:Y.jsxs(da,{class:"input_box",children:[Y.jsx(zt,{class:"input_segment",children:Y.jsxs(nY,{class:"input_segment",onIonChange:f=>o(f.target.value),children:[Y.jsx(pA,{class:"input_segment",value:"clubID",children:Y.jsx(hA,{children:"회원번호"})}),Y.jsx(pA,{class:"input_segment",value:"Tel",children:Y.jsx(hA,{children:"휴대폰번호"})})]})}),Y.jsx(zt,{class:"input_div_row",children:Y.jsx(_t,{class:"input_box",children:Y.jsx("div",{className:"input_div ion-text-center",children:r})})}),Y.jsxs(zt,{class:"input_desc",children:[Y.jsx("div",{className:"hr"}),Y.jsx("div",{className:"input_desc",children:l})]}),Y.jsxs(zt,{class:"input_pad",children:[Y.jsx(zt,{class:"input_row",children:Y.jsxs(_t,{class:"input_box",children:[Y.jsx(kn,{class:"input_btn",onClick:d,children:"1"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"2"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"3"})]})}),Y.jsx(zt,{class:"input_row",children:Y.jsxs(_t,{class:"input_box",children:[Y.jsx(kn,{class:"input_btn",onClick:d,children:"4"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"5"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"6"})]})}),Y.jsx(zt,{class:"input_row",children:Y.jsxs(_t,{class:"input_box",children:[Y.jsx(kn,{class:"input_btn",onClick:d,children:"7"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"8"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"9"})]})}),Y.jsx(zt,{class:"input_row",children:Y.jsxs(_t,{class:"input_box",children:[Y.jsx(kn,{class:"input_btn",onClick:p,children:"취소"}),Y.jsx(kn,{class:"input_btn",onClick:d,children:"0"}),Y.jsx(kn,{class:"input_btn",onClick:h,children:"←"})]})})]})]})})]})},b3e=()=>Y.jsxs(Y.Fragment,{children:[Y.jsx(i$,{children:Y.jsxs(o$,{children:[Y.jsx(o3,{slot:"start",children:Y.jsx(u3,{})}),Y.jsx(s$,{children:"입장"})]})}),Y.jsxs(zm,{class:"ion-padding",children:[Y.jsx(da,{children:Y.jsx(zt,{children:Y.jsx(_t,{children:Y.jsx("br",{})})})}),Y.jsx(da,{children:Y.jsx(zt,{children:Y.jsx(_t,{id:"frist",children:Y.jsxs("div",{className:"text_container",children:[Y.jsx("h2",{children:"체육관 출결관리 시스템"}),Y.jsx("p",{children:"현재 연동된 체육관 : 홀리데이 피트니스클럽(광주효천점)"})]})})})}),Y.jsx(da,{children:Y.jsxs(zt,{children:[Y.jsxs(_t,{id:"second",children:[" ",Y.jsx(ev,{routerDirection:"forward",component:()=>Y.jsx(InputId,{}),children:Y.jsx(kn,{className:"enumButton",children:"회원번호로 입장"})})]}),Y.jsx(_t,{children:Y.jsx(ev,{routerDirection:"forward",component:()=>Y.jsx(Cm,{}),children:Y.jsx(kn,{className:"pnumButton",children:"전화번호로 입장"})})})]})})]})]}),y3e=()=>Y.jsxs(Y.Fragment,{children:[Y.jsx(i$,{children:Y.jsxs(o$,{children:[Y.jsx(o3,{slot:"start",children:Y.jsx(u3,{})}),Y.jsx(s$,{children:"퇴장"})]})}),Y.jsxs(zm,{class:"ion-padding",children:[Y.jsx(da,{children:Y.jsx(zt,{children:Y.jsx(_t,{children:Y.jsx("br",{})})})}),Y.jsx(da,{children:Y.jsx(zt,{children:Y.jsx(_t,{id:"frist",children:Y.jsxs("div",{className:"text_container",children:[Y.jsx("h2",{children:"체육관 출결관리 시스템"}),Y.jsx("p",{children:"현재 연동된 체육관 : 홀리데이 피트니스클럽(광주효천점)"})]})})})}),Y.jsx(da,{children:Y.jsxs(zt,{children:[Y.jsxs(_t,{id:"second",children:[" ",Y.jsx(ev,{routerDirection:"forward",component:()=>Y.jsx(Cm,{}),children:Y.jsx(kn,{className:"enumButton",children:"회원번호로 퇴장"})})]}),Y.jsx(_t,{children:Y.jsx(ev,{routerDirection:"forward",component:()=>Y.jsx(Cm,{}),children:Y.jsx(kn,{className:"pnumButton",children:"전화번호로 퇴장"})})})]})})]})]}),lD="/assets/test-03c7e081.svg";function qH(){const[e,t]=ut.useState(window.innerWidth);ut.useState(window.innerHeight);const n=()=>{t(window.innerWidth)};return ut.useEffect(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),Y.jsx(Y.Fragment,{children:window.innerWidth<=window.innerHeight?Y.jsxs(da,{style:{border:"0px"},children:[Y.jsx(zt,{style:{border:"0px"},children:Y.jsx(_t,{size:"12",style:{border:"0px"},children:Y.jsx("img",{style:{width:"13%"},src:lD,alt:"Logo"})})}),Y.jsx(zt,{children:Y.jsx(_t,{style:{border:"0px"},children:Y.jsx("div",{style:{textAlign:"center",fontSize:"180%",fontWeight:700,letterSpacing:"-3.12%",color:"white",marginTop:"3%",marginBottom:"5%"},children:"홀리데이 피트니스클럽(광주효천점)"})})})]}):Y.jsx(da,{style:{border:"0px"},children:Y.jsxs(zt,{style:{border:"0px"},children:[Y.jsx(_t,{size:"auto",style:{marginLeft:"3%",marginBottom:"18%",border:"0px"},children:Y.jsx("img",{style:{width:"100%",marginLeft:"5%"},src:lD,alt:"Logo"})}),Y.jsx(_t,{size:"auto",style:{marginLeft:"0.7%",marginBottom:"18%",border:"0px"},children:Y.jsx("div",{style:{textAlign:"center",color:"white",fontWeight:700,letterSpacing:"-3.12%",fontSize:"190%",marginTop:"3.3%"},children:"홀리데이 피트니스클럽(광주효천점)"})})]})})})}function KH(){const[e,t]=ut.useState(window.innerWidth);ut.useState(window.innerHeight);const n=()=>{t(window.innerWidth)};return ut.useEffect(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),Y.jsx(Y.Fragment,{children:window.innerWidth<=window.innerHeight?Y.jsx(da,{children:Y.jsx(zt,{style:{height:"280px"},children:Y.jsx(_t,{style:{border:"0px",margin:"0px auto",padding:"5px 5px"},children:Y.jsxs("div",{style:{width:"100%",height:"100%",backgroundColor:"white",borderRadius:"1.2%",color:"black",textAlign:"left",paddingLeft:"6%",paddingTop:"5%",fontSize:"125%",fontWeight:400,lineHeight:"190%"},children:["∙ 여름시즌 다이어트 프로그램 안내",Y.jsx("br",{}),"∙ 이번달 회원 등록시 운동복 무료 이용권 증정"]})})})}):Y.jsx(da,{})})}const v3e=e=>{function t(){e.typeid==!1?e.id.length!=5?console.log("id를 다시 확인해주세요."):(console.log(e.id+"님 입장 하셨습니다."),e.setisOpen(!0)):e.id.length!=13?console.log("id를 다시 확인해주세요."):(console.log(e.id+"님 입장 하셨습니다."),e.setisOpen(!0))}function n(){e.typeid==!1?e.id.length!=5?console.log("id를 다시 확인해주세요."):(console.log(e.id+"님 퇴장 하셨습니다."),e.setisOpen(!0)):e.id.length!=13?console.log("id를 다시 확인해주세요."):(console.log(e.id+"님 퇴장 하셨습니다."),e.setisOpen(!0))}function r(){console.log("직원 호출 중입니다.")}return Y.jsx(Y.Fragment,{children:Y.jsxs(da,{class:"btns",children:[Y.jsxs(zt,{children:[Y.jsx(_t,{class:"out_btn",children:Y.jsx(kn,{class:"out_btn",onClick:n,children:"퇴소하기"})}),Y.jsx(_t,{class:"call_btn",children:Y.jsx(kn,{class:"call_btn",onClick:r,trigger:e.trigger,children:"직원호출"})})]}),Y.jsx(zt,{children:Y.jsx(_t,{class:"in_btn",children:Y.jsx(kn,{class:"in_btn",onClick:t,trigger:e.trigger,children:"출석하기"})})})]})})},x3e=e=>Y.jsx(Y.Fragment,{children:Y.jsxs(zm,{children:[Y.jsxs(o$,{children:[Y.jsx(s$,{children:"Title"}),Y.jsx(kn,{color:"light",onClick:()=>e.dismiss(),children:"Close"})]}),e.id," 님 어서오세요."]})});function w3e(){const e=ut.useRef();async function t(){var h;(h=e.current)==null||h.dismiss(),r(!1)}const[n,r]=ut.useState(!1),[a,i]=ut.useState("123"),[s,o]=ut.useState(!1),[l,d]=ut.useState("pw"),[u,c]=ut.useState(!1);return Y.jsx(Y.Fragment,{children:Y.jsxs(zm,{children:[Y.jsx(oY,{backdropDismiss:!1,isOpen:n,id:"modaltest",ref:e,children:Y.jsx(x3e,{id:a,pw:l,dismiss:t})}),Y.jsx("div",{className:"background-image-init"}),Y.jsx("div",{className:"background-image-img"}),Y.jsx("div",{className:"background-image-gradient"}),Y.jsx("div",{className:"content",children:Y.jsxs(da,{class:"window",children:[Y.jsx(zt,{class:"title",children:Y.jsx(_t,{children:Y.jsx(qH,{})})}),window.innerWidth<=window.innerHeight?Y.jsx(zt,{class:"announcement",children:Y.jsx(_t,{class:"announcement",children:Y.jsx(KH,{})})}):Y.jsx("div",{}),Y.jsxs(zt,{class:"bottom_side",children:[Y.jsx(_t,{size:"8",class:"main_input_box",children:Y.jsx("div",{className:"main_input_box",children:Y.jsx(Cm,{AlertFunc:i,settypeid:o})})}),Y.jsx(_t,{size:"4",class:"btn_and_face",children:Y.jsxs(da,{children:[Y.jsx(zt,{children:Y.jsx(_t,{class:"face",children:Y.jsx(GH,{})})}),Y.jsx(zt,{children:Y.jsx(_t,{class:"btn",children:Y.jsx(v3e,{id:a,pw:l,face:u,setisOpen:r,typeid:s})})})]})})]})]})})]})})}c3();const k3e=()=>Y.jsx(mY,{children:Y.jsx(WY,{children:Y.jsxs(IY,{children:[Y.jsxs(ds,{exact:!0,path:"/home",children:[Y.jsx(xY,{root:()=>Y.jsx(g3e,{})}),";"]}),Y.jsx(ds,{exact:!0,path:"/Exit",children:Y.jsx(y3e,{})}),Y.jsx(ds,{exact:!0,path:"/Entrance",children:Y.jsx(b3e,{})}),Y.jsx(ds,{exact:!0,path:"/Main",children:Y.jsx(w3e,{})}),Y.jsx(ds,{exact:!0,path:"/",children:Y.jsx(L5,{to:"/Main"})}),Y.jsx(ds,{exact:!0,path:"/logo",children:Y.jsx(qH,{})}),Y.jsx(ds,{exact:!0,path:"/announcement",children:Y.jsx(KH,{})}),Y.jsx(ds,{exact:!0,path:"/numpad",children:Y.jsx(Cm,{})})]})})}),S3e=document.getElementById("root"),I3e=kM(S3e);I3e.render(Y.jsx(oe.StrictMode,{children:Y.jsx(k3e,{})}));export{_O as K,$3e as __vite_legacy_guard,Uc as a,Vc as b,HI as c,ck as d,hk as e,t7 as f,xk as g,Or as h,bk as i,V_ as j,P3e as k,fn as l,T3e as m,C3e as n,E3e as p,nm as r,L3e as s,Ti as w};
